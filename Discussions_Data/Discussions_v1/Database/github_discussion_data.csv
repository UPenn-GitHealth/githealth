Title,Discussion ID,Created At,User ID,Comment Count,Answered/Unanswered,Comment ID,Comment Author,Comment Text
Localization Architecture Design,D_kwDOAnasMc4AP640,2021-12-22T10:22:48Z,mitsudome-r,4,Answered,,,
Localization Architecture Design,D_kwDOAnasMc4AP640,2021-12-22T10:22:48Z,mitsudome-r,4,Answered,DC_kwDOAnasMc4AHFoI,mitsudome-r,"Here's the meeting minutes from the discussion we had today.
https://docs.google.com/document/d/1_4VbWuIiRXWsc_u6vuDmNARjmT8QAOSmPvjPpZN7PK8/edit?usp=sharing

Summary:
In general, the proposal was accepted.
![image](https://user-images.githubusercontent.com/43976834/147089470-3896e861-5fcd-4f7a-9443-fb4ba690e6a0.png)

![image](https://user-images.githubusercontent.com/43976834/147089458-54a7dbc0-2989-48ed-8817-3a5ea2bd7289.png)

  * We have agreed on overall input/output for the localization
  * We also agreed to abstract the inputs to Kalman Filter and only allow PoseWithCovariance and TwistWithCovariance
  * We will be starting without `odom` frame in Core architecture. If anyone can come up with a use case where we really need the frame, then we can have another discussion

Next Action:
 * Tier IV will be creating a draft for localization design document based on today's discussion. Any review would be welcome
 * We can further discuss about actual node level implementation that we would be expecting to have during Bus ODD offline using this thread.

The summary is just from the people who participated to the meeting, and if there are any people who weren't able to attend, feel free to comment your concerns or proposals in this thread."
Localization Architecture Design,D_kwDOAnasMc4AP640,2021-12-22T10:22:48Z,mitsudome-r,4,Answered,DC_kwDOAnasMc4AIFQu,xczhanjun,How about add an end 2 end AI module together with the Kalman Filter to test data-driven path?
Localization Architecture Design,D_kwDOAnasMc4AP640,2021-12-22T10:22:48Z,mitsudome-r,4,Answered,DC_kwDOAnasMc4AI3TZ,xmfcx,"@xczhanjun As long as it can replicate the inputs and outputs of these specified modules, any module can be replaced partly or as a whole.

We are discussing what the inputs and outputs of these modules should be here."
Localization Architecture Design,D_kwDOAnasMc4AP640,2021-12-22T10:22:48Z,mitsudome-r,4,Answered,DC_kwDOAnasMc4AIdYt,maxime-clem,"I would like to propose an additional feature: localization always produces an estimate of the current acceleration.

**Motivation**
In the current architecture, modules have to calculate the acceleration using the change of twist over time. Even if a sensor provides more accurate values they cannot be used without breaking the separation between hardware and software.

**Possible Implementation**
Localization uses acceleration information from sensors (e.g., IMU) if available. Otherwise localization estimates the acceleration using the change in twist over time."
Localization Architecture Design,D_kwDOAnasMc4AP640,2021-12-22T10:22:48Z,mitsudome-r,4,Answered,DC_kwDOAnasMc4AIdts,mitsudome-r,@YamatoAndo Do you have any opinion on this?
Localization Architecture Design,D_kwDOAnasMc4AP640,2021-12-22T10:22:48Z,mitsudome-r,4,Answered,DC_kwDOAnasMc4AId00,YamatoAndo,"I agree with this propose.
Currently, the acceleration is calculated in each planning module as shown in the code below, but I also think the localization module should produce it.

https://github.com/autowarefoundation/autoware.universe/blob/tier4/proposal/planning/behavior_velocity_planner/include/behavior_velocity_planner/planner_data.hpp#L152-L182
https://github.com/autowarefoundation/autoware.universe/blob/tier4/proposal/planning/behavior_velocity_planner/src/node.cpp#L126-L127"
Localization Architecture Design,D_kwDOAnasMc4AP640,2021-12-22T10:22:48Z,mitsudome-r,4,Answered,DC_kwDOAnasMc4AIeE2,brkay54,"I agree with @YamatoAndo but also we should change the acceleration data on all modules. I plotted the estimated acceleration of trajectory follower node as you can see below. 

![image](https://user-images.githubusercontent.com/45468306/154946640-55b97dce-9fca-4976-a496-a9a166b8bf70.png)

Estimated acceleration is not reliable I think, 9-10 m/s^2 acceleration is not possible in AVP Demo. If localization module will produce the measured acceleration as an option, I think all modules should use that data. 
"
Localization Architecture Design,D_kwDOAnasMc4AP640,2021-12-22T10:22:48Z,mitsudome-r,4,Answered,DC_kwDOAnasMc4AIjRz,YamatoAndo,"In the current architecture, the localization module outputs the Odometry type.
If we add the acceleration to the output, which one do you think would be best for the output?

1. Pose, Twist and Accel are combined into one data type.
- User-defined message type consisting of std_msgs/Header, geometry_msgs/PoseWithCovariance, geometry_msgs/TwistWithCovariance and geometry_msgs/AccelWithCovariance

2. Pose and Twist are output as Odometry type, and Accel is output separately.
- nav_msgs/Odometry
- geometry_msgs/AccelWithCovarianceStamped

3. Pose, Twist and Accel are output separately.
- geometry_msgs/PoseWithCovarianceStamped
- geometry_msgs/TwistWithCovarianceStamped
- geometry_msgs/AccelWithCovarianceStamped
"
Localization Architecture Design,D_kwDOAnasMc4AP640,2021-12-22T10:22:48Z,mitsudome-r,4,Answered,DC_kwDOAnasMc4AIlHy,maxime-clem,I like both options 1 and 2. I think if few nodes use the acceleration information then option 2 is probably better.  
Localization Architecture Design,D_kwDOAnasMc4AP640,2021-12-22T10:22:48Z,mitsudome-r,4,Answered,DC_kwDOAnasMc4AIldt,YamatoAndo,Option 3 seems to be popular in Tier IV.
Localization Architecture Design,D_kwDOAnasMc4AP640,2021-12-22T10:22:48Z,mitsudome-r,4,Answered,DC_kwDOAnasMc4AIlkA,maxime-clem,"I do not have a strong opinion.
What I liked about option 2 was that only nodes that need acceleration would subscribe to the corresponding topic, making it clear which node uses the acceleration data.
Option 3 actually has the same advantage so this is also fine."
Localization Architecture Design,D_kwDOAnasMc4AP640,2021-12-22T10:22:48Z,mitsudome-r,4,Answered,DC_kwDOAnasMc4AI3UN,xmfcx,"@maxime-clem @YamatoAndo I also support option 3. And mark all 3 with same timestamps. And use [exact_time policy](https://github.com/ros2/message_filters/blob/galactic/include/message_filters/sync_policies/exact_time.h) for near latency-less communication of these messages.

They should all be together or they will feel disorganized and confuse people."
Localization Architecture Design,D_kwDOAnasMc4AP640,2021-12-22T10:22:48Z,mitsudome-r,4,Answered,DC_kwDOAnasMc4AKz4H,xmfcx,In https://github.com/autowarefoundation/autoware_msgs/pull/16 I've went with the option 1 to keep things simple.
Localization Architecture Design,D_kwDOAnasMc4AP640,2021-12-22T10:22:48Z,mitsudome-r,4,Answered,DC_kwDOAnasMc4AK8sr,meliketanrikulu,"Hello, do you plan to include gnss data in ekf? I think GNSS is an important source of localization. Any progress on this? We talked about this issue. -->https://github.com/autowarefoundation/autoware.universe/issues/800#issuecomment-1124899422"
Localization Architecture Design,D_kwDOAnasMc4AP640,2021-12-22T10:22:48Z,mitsudome-r,4,Answered,DC_kwDOAnasMc4AK8zc,YamatoAndo,"@kminoda is working on supporting multi input pose in EKF, starting this week.
If his work is done, we can add gnss data to the estimation as well."
Localization Architecture Design,D_kwDOAnasMc4AP640,2021-12-22T10:22:48Z,mitsudome-r,4,Answered,DC_kwDOAnasMc4AK80H,kminoda,"Thanks for your interest! Yes, I am currently working on multiple sensor inputs into the ekf_localizer package, which is targeted for the configurations like follows:

- IMU+odometry, and NDT
- IMU+odometry, GNSS, and NDT
- IMU+odometry, GNSS doppler, GNSS, and NDT

In the proposal, ekf_localizer will subscribe to `/localization/pose_estimator/pose_with_covariance` and `/localization/twist_estimator/twist_with_covariance`. If you want to use both NDT and GNSS for the pose information source, you need to put both information into `/localization/pose_estimator/pose_with_covariance`.

Here is the PR (draft): https://github.com/autowarefoundation/autoware.universe/pull/1027

(As the module is responsible for the final output of localization results, it may take some time for performance validation.)
"
Localization Architecture Design,D_kwDOAnasMc4AP640,2021-12-22T10:22:48Z,mitsudome-r,4,Answered,DC_kwDOAnasMc4AK9RT,meliketanrikulu,Thanks for your work. @kminoda 
Sensing/Perception Architecture Design,D_kwDOAnasMc4AP648,2021-12-23T10:33:10Z,mitsudome-r,2,Answered,,,
Sensing/Perception Architecture Design,D_kwDOAnasMc4AP648,2021-12-23T10:33:10Z,mitsudome-r,2,Answered,DC_kwDOAnasMc4AHG2V,mitsudome-r,"Here's the meeting minutes from today's discussion:
https://docs.google.com/document/d/1ZobsK1qR4axNW8g9gVsQQ-YZ7BiJxZPbIX1GMtvQelg/edit?usp=sharing

## Summary
**Sensing**
* We are moving forward with current design made by Fatih in [here](https://gitlab.com/autowarefoundation/autoware.auto/AutowareAuto/-/issues/1421). 
* we are still flexible with additional sensors (e.g. ultrasonic, 2D LiDAR, etc)
![image](https://user-images.githubusercontent.com/43976834/147235673-4a6fa0c8-940b-4b00-b09d-8779ff51ca27.png)

**Perception**
![image](https://user-images.githubusercontent.com/43976834/147235748-b4113ce9-6c6a-420b-84fa-607e2ecb9c58.png)

* We have decided add Untracked object as output of perception stack. However, the output format and how it is provided needs further discussion
* We have decided to move fusion out of tracking to make it more flexible to different sensor configuration.
![image](https://user-images.githubusercontent.com/43976834/147236006-e18904cc-864d-4133-9e5e-71b38df7b0cd.png)


I would like to use this thread to discuss further about untracked objects and traffic light recognition, so any comments or proposal are welcome."
Sensing/Perception Architecture Design,D_kwDOAnasMc4AP648,2021-12-23T10:33:10Z,mitsudome-r,2,Answered,DC_kwDOAnasMc4AHG2i,alexandrx,"One comment regarding sensing part is about LiDAR pointcloud filtering. 
The text we analyzed during today's call, the pointcloud preprocessor (page 3) says ""ring_outlier_filter"". While I guess this was intended as an example, there are plenty of LiDARs which do not have ""rings"" (multiple beams + mechanical 360° rotation); some examples are: Livox Horizon, RoboSense RS-LiDAR-M, Baraja, etc. Say, one potential deployment could use a bunch of Livox around the car and not use a 360° LiDAR on top.

Therefore, the architecture should adopt a ""wording"" which does not necessary limit the technology of LiDARs to use.  "
Sensing/Perception Architecture Design,D_kwDOAnasMc4AP648,2021-12-23T10:33:10Z,mitsudome-r,2,Answered,DC_kwDOAnasMc4AJHAR,xmfcx,"@alexandrx do you have any suggestions on this one?

What should we use instead of **ring**?

`x_outlier_filter`

**Potential candidates:**
- channel
- beam
- line
- row
- scan_line
- scan_id
- laser_id
- laser_channel"
Sensing/Perception Architecture Design,D_kwDOAnasMc4AP648,2021-12-23T10:33:10Z,mitsudome-r,2,Answered,DC_kwDOAnasMc4AJHDX,xmfcx,"I think **laser_id** represents the field best since it is about continuous readings from a single laser.

But **id** tends to be ambiguous sometimes. Although it is long, maybe we should call it **laser_channel**."
Sensing/Perception Architecture Design,D_kwDOAnasMc4AP648,2021-12-23T10:33:10Z,mitsudome-r,2,Answered,DC_kwDOAnasMc4AJHEK,xmfcx,"From Velodyne VLS-128 datasheet:
> A **laser channel** is a single 903 nm laser emitter and detector pair. 
> Each **laser channel** is fixed at a particular elevation angle relative to the horizontal plane of the sensor. 
> Each **laser channel** is given its own **Laser ID** number. 
> Since the elevation angle of a particular **laser channel** doesn't change, it doesn't appear in data packets. Its value is inferred by a data point's location in a data packet."
Sensing/Perception Architecture Design,D_kwDOAnasMc4AP648,2021-12-23T10:33:10Z,mitsudome-r,2,Answered,DC_kwDOAnasMc4AJHFT,xmfcx,"From [Livox Horizon Point Cloud Characteristics Page](https://www.livoxtech.com/3296f540ecf5458a8829e01cf429798e/downloads/Point%20cloud%20characteristics.pdf)

> In Fig. 3 you can see the FOV coverage of other (non-Livox) LiDAR sensors that use common mechanical scanning
methods. For these sensors, the number of **laser lines** and vertical FOV are 64-**lines**-27°, 32-**lines**-41°, and 16-**lines**-30°."
Sensing/Perception Architecture Design,D_kwDOAnasMc4AP648,2021-12-23T10:33:10Z,mitsudome-r,2,Answered,DC_kwDOAnasMc4AJHHe,yukkysaito,"If it is closed to the sensing component, the ring information may or may not be required.
Since the PointCloud2 type can freely define fields, it is not necessary to define even the inner fields as an interface within the sensing component.

I think it is better to remove the ring information in the output of the sensing component.

Proposed pointcloud fields of output of the sensing component
- x
- y
- z
- intensity (optional)"
Sensing/Perception Architecture Design,D_kwDOAnasMc4AP648,2021-12-23T10:33:10Z,mitsudome-r,2,Answered,DC_kwDOAnasMc4AJHH0,xmfcx,"@yukkysaito I think you've meant to post under https://github.com/autowarefoundation/autoware/discussions/101#laser_channel

I agree the rest of the stack doesn't need the ring information.

Here problem is, what should we rename field **ring** into?"
Sensing/Perception Architecture Design,D_kwDOAnasMc4AP648,2021-12-23T10:33:10Z,mitsudome-r,2,Answered,DC_kwDOAnasMc4AJHSJ,yukkysaito,">what should we rename field ring into?

@xmfcx 
I see :+1: 
Sorry. I misunderstood something. 

I don't have a strong preference, but I think **laser id** is the best.
Channel can also be interpreted as frequency band, so I think I would mistake it to mean wavelength.

I am not a native English and may have misunderstood the meaning of the word. :pray: "
Planning/Control/Vehicle Interface Architecture Design,D_kwDOAnasMc4AP64_,2021-12-23T15:02:55Z,maxime-clem,1,Answered,,,
Planning/Control/Vehicle Interface Architecture Design,D_kwDOAnasMc4AP64_,2021-12-23T15:02:55Z,maxime-clem,1,Answered,DC_kwDOAnasMc4AHHIn,mitsudome-r,"Here's the meeting minutes that I wrote during the call. I will summarize the discussion points and action items tomorrow morning.
https://docs.google.com/document/d/1OlmQFEtTTabxknBDfFpBvPzjtUiUJOD34CYTwO_3Zks/edit"
Planning/Control/Vehicle Interface Architecture Design,D_kwDOAnasMc4AP64_,2021-12-23T15:02:55Z,maxime-clem,1,Answered,DC_kwDOAnasMc4AHcuY,maxime-clem,"I have updated the google document with a summary of the decisions made during the recent discussions as well as the remaining points to discuss. I created new discussion threads for each action item.

### Decisions Made

- Publish new steering and actuation topics from the VehicleInterface.
  - Steering as Quaternion ? Actuation as TwistWithCovariance ?
- Focus on Ackermann vehicles in Core for now. Make it clear in the documentation.
- Implement adapter to map Autoware control command into vehicle specific actuation command.
  - Library or Node ?
- Implement vehicle command gate.
  - Independent node or part of VehicleInterface ? Josh wants to create a pros/cons table.
- Move all information about vehicle gear into the VehicleInterface.
- Add a service in Perception to query the value of a traffic light by its ID in the lanelet map.
- Implement a diagnostic manager.
- A detailed design is already being worked on:
  - https://gitlab.com/autowarefoundation/autoware.auto/AutowareAuto/-/issues/1233
  - https://gitlab.com/autowarefoundation/autoware.auto/AutowareAuto/-/merge_requests/1289

### Action Items

- [ ] Have more discussions about adding a velocity array to the control command to remove ambiguity about acceleration https://github.com/autowarefoundation/autoware/discussions/20.
- [ ] Make a more detailed proposal for the Planning manager and further discuss https://github.com/autowarefoundation/autoware/discussions/19.
- [ ] Create a pros/cons table for having the vehicle command gate as part of the VehicleInterface and decide between an independent node or part of VehicleInterface https://github.com/autowarefoundation/autoware/discussions/18.
- [ ] Control command adapter: decide if library or node https://github.com/autowarefoundation/autoware/discussions/16.
"
Control Command Adapter,D_kwDOAnasMc4AP65A,2022-01-12T06:41:16Z,maxime-clem,2,Answered,,,
Control Command Adapter,D_kwDOAnasMc4AP65A,2022-01-12T06:41:16Z,maxime-clem,2,Answered,DC_kwDOAnasMc4AKjPU,xmfcx,"ActuationCommand Message:
- string command_name
- float value

ActuationCommands Message:
- ActuationCommand[] commands

ActuationStatus Message:
- string status_name
- float value

ActuationStatus Message:
- ActuationStatus[] statuss

command_name and status_name could be:
- brake_pedal_level
- throttle_pedal_level
- voltage (steer/wheel)
- torque (steer/wheel)
- pressure (for brake)

These messages are used by:
- Vehicle Interface
- Control Command Adapter
- Calibration tool (when it is implemented)

Control Message:
Lateral:
- steering angle
- steering rate

Longitudinal:
- velocity
- acceleration (can be + or - )
- jerk"
Control Command Adapter,D_kwDOAnasMc4AP65A,2022-01-12T06:41:16Z,maxime-clem,2,Answered,DC_kwDOAnasMc4AKmps,taikitanaka3,"@xmfcx 
here is current topic names.
I would like to use ActuationStatus(.iv) rather than  Report(which comes from .auto)
```
/vehicle/status/control_mode
/vehicle/status/door_status
/vehicle/status/gear_status
/vehicle/status/hazard_lights_status
/vehicle/status/steering_offset
/vehicle/status/steering_status
/vehicle/status/turn_indicators_status
/vehicle/status/velocity_status
```"
Control Command Adapter,D_kwDOAnasMc4AP65A,2022-01-12T06:41:16Z,maxime-clem,2,Answered,DC_kwDOAnasMc4AKmq1,xmfcx,"Thanks, I've updated the names in previous post, is it ok now?"
Control Command Adapter,D_kwDOAnasMc4AP65A,2022-01-12T06:41:16Z,maxime-clem,2,Answered,DC_kwDOAnasMc4AKmrW,taikitanaka3,Good Thank you
Vehicle Command Gate,D_kwDOAnasMc4AP65B,2022-01-12T06:47:29Z,maxime-clem,1,Answered,,,
Vehicle Command Gate,D_kwDOAnasMc4AP65B,2022-01-12T06:47:29Z,maxime-clem,1,Answered,DC_kwDOAnasMc4AHdyT,JWhitleyWork,I was convinced during the last call that I was on that it doesn't really matter that much. I prefer it to be part of the VehicleInterface for convenience and so the information about where the commands are coming from is available to other parts of be VehicleInterface but it really doesn't matter all that much. 
Planning Manager,D_kwDOAnasMc4AP65C,2022-01-12T06:50:45Z,maxime-clem,0,Unanswered,,,
Using a velocity array in the control command,D_kwDOAnasMc4AP65D,2022-01-12T07:05:55Z,maxime-clem,2,Answered,,,
Using a velocity array in the control command,D_kwDOAnasMc4AP65D,2022-01-12T07:05:55Z,maxime-clem,2,Answered,DC_kwDOAnasMc4AHdV7,TakaHoribe,"Thank you for creating a discussion thread, Maxime.

In my mind, the main advantage of having a velocity array in the control command is that a vehicle controller has higher-level information, which allows for more complex control to be implemented.

But I feel the velocity array is slightly too much for two reasons.

Firstly, the velocity array is equivalent to the output of the planning module (target velocity on the reference trajectory). Adding a velocity array allows the ""low-level controller in the vehicle"" to do more complicated processing. For example, by implementing the velocity feedback controller for the target velocity array, the target acceleration can be calculated. However, this is almost the same as what the current control module is doing, and the role of the control/vehicle modules may conflict.

Secondly, the frequency of the vehicle speed is at most 10Hz in general, and the control command is sent at about 50~100Hz. In this case, the target speed and its 1st derivative (acceleration) information may be sufficient for accurate control.

@xmfcx Any comments are appreciated. Thanks!
"
Using a velocity array in the control command,D_kwDOAnasMc4AP65D,2022-01-12T07:05:55Z,maxime-clem,2,Answered,DC_kwDOAnasMc4AHdmt,xmfcx,"@TakaHoribe thanks for your inputs on this topic!

So I've heard you wanted to send following to the vehicle:
- Velocity (`v`)
- Acceleration (`a`)
- Steering angle (`θ`)

My recommendation is to provide the following to the vehicle controller with a time horizon of `t` and step size of `dt`:
- Velocity array (`v[]`)
- Acceleration array (`a[]`)
- Steering angle array (`θ[]`)

The first values of these would be equal to your proposal:
- `v[0] = v`
- `a[0] = a`
- `θ[0] = θ`

It would be up to controller to make use of this more in depth information. If the controller finds the first elements of these arrays enough, they could just use them.

But providing these arrays allows more sophisticated low level controllers to be implemented if needed.


> Firstly, the velocity array is equivalent to the output of the planning module (target velocity on the reference trajectory).

Is this really true? Because I thought MPC would modify its input velocity array (from trajectory) to fit into its model (smooth it more maybe) and output a trajectory (and a set of control commands) which vehicle will actually follow.

> Adding a velocity array allows the ""low-level controller in the vehicle"" to do more complicated processing. For example, by implementing the velocity feedback controller for the target velocity array, the target acceleration can be calculated. However, this is almost the same as what the current control module is doing, and the role of the control/vehicle modules may conflict.

We would actually be passing an acceleration array too so it's just extra information, it may or may not use it. But maybe someone could make use of these for finer control.

> Secondly, the frequency of the vehicle speed is at most 10Hz in general, and the control command is sent at about 50~100Hz. In this case, the target speed and its 1st derivative (acceleration) information may be sufficient for accurate control.

We should specify the expected frequency for these messages for nodes and the vehicle interface. What are sources and targets of these messages you are talking about?"
Using a velocity array in the control command,D_kwDOAnasMc4AP65D,2022-01-12T07:05:55Z,maxime-clem,2,Answered,DC_kwDOAnasMc4AHfCg,TakaHoribe,"@xmfcx Ahh, sorry, I misunderstood that having a velocity array means ""replacing acceleration information with target velocity array"". 

> The first values of these would be equal to your proposal:

Thank you. I'm very clear now. Then, 90% of my concern is solved. 
The remaining 10% is, calculation of the `a[]` and `theta[]` is not so easy. MPC (or controller that predicts the future) can compute them easily, but simple controllers such as `pure_pursuit` or `PID` are not able to calculate the array of the control command. So what values should the array have in this case? 
(My idea is, just putting the same value in the array is sufficient.)

> Is this really true? Because I thought MPC would modify its input velocity array

The `mpc_controller` previously used in .auto modifies the target velocity. While the `trajectory_follower` recently ported into .auto from T4's proposal does not modify the target velocity. This is actually related to the roles of planning and control. 

I think, the target speed should not be modified in the control module. Because in the planning module, decisions are made based on the assumption that the vehicle will move according to the planned speed. Also, certain safety assessments are made for target trajectory.
If the control system is allowed to change the target speed, the consistency of the planning decisions will be broken and proper vehicle behavior will not be achieved. The controller should focus on following the target speed. 
(This could be a long discussion, so let's discuss it separately if necessary.)

> We would actually be passing an acceleration array too so it's just extra information, it may or may not use it. But maybe someone could make use of these for finer control.

I'm convinced. Thank you.

> What are sources and targets of these messages you are talking about?

I'm talking about the control command sent from the control module (say, MPC) to the vehicle interface."
Using a velocity array in the control command,D_kwDOAnasMc4AP65D,2022-01-12T07:05:55Z,maxime-clem,2,Answered,DC_kwDOAnasMc4AHfS7,TakaHoribe,"One more thing. What happens if the Autoware control module supports delay compensation? In this case, v[0] or a[0] does not simply mean a target velocity / acceleration at the current time (It may be a target velocity after delay time)."
Using a velocity array in the control command,D_kwDOAnasMc4AP65D,2022-01-12T07:05:55Z,maxime-clem,2,Answered,DC_kwDOAnasMc4AHflU,xmfcx,"@TakaHoribe Thanks for your insights and inquiries!

> simple controllers such as pure_pursuit or PID are not able to calculate the array of the control command. So what values should the array have in this case?
> (My idea is, just putting the same value in the array is sufficient.)

I'd suggest we make the array size flexible and if 
- `t = 0` and `dt = 0` (ms)
  - array sizes = 1
- `t = 1000` and `dt = 100` (ms)
  - array sizes = 10

> I think, the target speed should not be modified in the control module. Because in the planning module, decisions are made based on the assumption that the vehicle will move according to the planned speed. Also, certain safety assessments are made for target trajectory.
> If the control system is allowed to change the target speed, the consistency of the planning decisions will be broken and proper vehicle behavior will not be achieved. The controller should focus on following the target speed.

I agree on this 100%

> One more thing. What happens if the Autoware control module supports delay compensation? In this case, v[0] or a[0] does not simply mean a target velocity / acceleration at the current time (It may be a target velocity after delay time).

So delay handling means that 
- the vehicle will act with a delay due to actuators, 
- transmission delay(would be very small) is also included
- this delay is assumed constant 

is this correct?

For this, I would say that it is even more valuable to have the array structure. Because the vehicle wouldn't use `v[0]` or `a[0]` and it would use `v[x]` or `a[x]` where `x=duration_delay / dt`

But I might be understanding it wrong and it might be that `v[0]` or `a[0]` is already the values with delay compensation calculated so we should add a new value with each message that conveys the `duration_delay` value to the low level controller for it to make sense.

Another option would be that the actuation delay is constant and known by the vehicle and we just set this parameter once and vehicle interface would assume index 0 means the delay compensation is already included.

But I'd need to know how what end signals the vehicle interface is sending to what.

What does vehicle_interface output?
- Reference voltage levels
- Reference torque values
- Reference pedal levels for throttle/brakes
- Reference angles
- Reference accelerations
- Reference velocities

Because this really affects the role of the vehicle_interface and Autoware's responsibility in general."
Using a velocity array in the control command,D_kwDOAnasMc4AP65D,2022-01-12T07:05:55Z,maxime-clem,2,Answered,DC_kwDOAnasMc4AHkGH,TakaHoribe,"@xmfcx 
>I'd suggest we make the array size flexible and if
>t = 0 and dt = 0 (ms)
array sizes = 1
t = 1000 and dt = 100 (ms)
array sizes = 10

That makes sense. Thank you.


>So delay handling means that
the vehicle will act with a delay due to actuators,
transmission delay(would be very small) is also included
this delay is assumed constant
is this correct?

Yes, it is correct.

>v[0] or a[0] is already the values with delay compensation...

For example, the velocity controller used in .auto uses PID control + delay compensation. This module calculates the reference acceleration `a` with the delay compensation from the reference trajectory. Here, it cannot simply publish the value calculated here as `a[delay_duration]` to the later stage, because `a[0]~a[delay_duration-1]` is not computed.
So, option 2 you mentioned ""index 0 means the delay compensation is already included"" is better i think. One concern is ""how to know the velocity already includes the delay compensation"". But vehicle may not need to know that.


>But I'd need to know how what end signals the vehicle interface is sending to what.
>What does vehicle_interface output?

What do you mean about the end signals?
In my mind, the output of the `vehicle_interface` is vehicle-specific such as you listed above (voltage, torque, pedal position, steering angle, steering-wheel angle, steering rate, etc). We should have an abstraction module to support these multiple interfaces, which is the ""adapter"" module discussed [in the separate page](https://github.com/autowarefoundation/autoware/discussions/16). "
Using a velocity array in the control command,D_kwDOAnasMc4AP65D,2022-01-12T07:05:55Z,maxime-clem,2,Answered,DC_kwDOAnasMc4AH7wi,maxime-clem,"Is the following message definition suitable ?
```idl
# autoware_auto_control_msgs/LongitudinalCommand
builtin_interfaces::msg::Time stamp
builtin_interfaces::msg::Duration duration   # new field
builtin_interfaces::msg::Duration time_step  # new field
# fields changed from float to float[]
float[] speeds 
float[] accelerations
float[] jerks
```

Do we also want to modify `autoware_auto_control_msgs/LateralAckermannCommand` to use an array of steering angles and angle rates ?"
Using a velocity array in the control command,D_kwDOAnasMc4AP65D,2022-01-12T07:05:55Z,maxime-clem,2,Answered,DC_kwDOAnasMc4AIL-b,boyali,"Once we have a controller and a reference trajectory, it is possible to simulate the system forward in time (forward simulation). In this case, you can get any control and state trajectory. A controller and system model forms a new closed-loop model of the controlled system. Since we have a known closed-loop model, the only input the system becomes the reference signals.

If one would like to take the uncertainty in the model into account, we can parametrize a model uncertainty function which gives us a family of the state and control trajectories into the feature. "
Steering and Actuation status messages,D_kwDOAnasMc4AP65E,2022-01-31T09:42:41Z,maxime-clem,2,Answered,,,
Steering and Actuation status messages,D_kwDOAnasMc4AP65E,2022-01-31T09:42:41Z,maxime-clem,2,Answered,DC_kwDOAnasMc4AH-gh,HuaweiAlgolux,"acceleration/brake measurements can be used to improve the performance and robustness of controllers for mechanical systems. To use acceleration signals, there are at least two approaches: direct use in a feedback loop to improve the trajectory tracking error, and indirect use by an observer to improve the estimates of position and speed. "
Steering and Actuation status messages,D_kwDOAnasMc4AP65E,2022-01-31T09:42:41Z,maxime-clem,2,Answered,DC_kwDOAnasMc4AIKJM,TakaHoribe,"In my mind, there are three outputs from the Vehicle component.

 - Vehicle Odometry: for the velocity velocity information with speed vx and angular velocity wz. It can be represented by `TwistWithCovariance` or `Odometry` message type.
 - Steering Status: for the steering information. It is completely limited in 2D space, so we don't have to use the quaternion. We should rather think about the possibility to support the non-Ackermann steering type vehicle. For now, we can define the specific message type like `Steering.msg` with just one steering_angle field, but it should be extendable for more vehicle types.
 - Actuation Status: for primitive vehicle control. This represents the vehicle-specific information such as throttle, brake, torque, voltage, pressure, etc, and they are used by the [adapter](https://github.com/autowarefoundation/autoware/discussions/16). So, this message type should be a generic one. In the ArchitectureProposal, the `steer`, `accel`, and `brake` are used to represent ""any lateral motion related status"" such as steering torque or voltage, ""any accelerating longitudinal related motion status"" such as accel pedal or throttle, and ""any decelerating longitudinal related motion status"" such as brake torque or pressure, respectively. It is based on the assumption that vehicles have three actuators for steering and accel and brake. But it could be more common message type like `actuation_status_array`.

So my proposal is (still open discussion though)

 - Vehicle Odometry: `TwistWithCovariance.msg`
     - replace the current message type `nav_msgs/Odometry` ?
 - Steering Status: `Steering.msg` [new]
     - with timestamp, and steering_angle.
 - Actuation Status: `ActuationStatus.msg` [new]
     - with `accel`, `brake` and `steer`.

Any comments are welcome. Thanks!
"
Steering and Actuation status messages,D_kwDOAnasMc4AP65E,2022-01-31T09:42:41Z,maxime-clem,2,Answered,DC_kwDOAnasMc4AIKKM,TakaHoribe,@xmfcx Appreciated if you have any comments.
web version of  runtime_manager (including webviz),D_kwDOAnasMc4AP65c,2022-01-31T14:02:57Z,xczhanjun,3,Answered,,,
web version of  runtime_manager (including webviz),D_kwDOAnasMc4AP65c,2022-01-31T14:02:57Z,xczhanjun,3,Answered,DC_kwDOAnasMc4AH_HU,Unknown,"When I was learning about Autoware with Autoware.AI, I found the old Runtime Manager to be incredibly useful. I could start up Autoware with a single command from a single command prompt, and I was able to view and adjust settings without having to manually stop and restart things myself.

When using the AutowareArchitectureProposal repo which had no Runtime Manager, it was much more challenging for me to get things up and running. For example, just changing a setting meant that you had to know the exact name of the setting, or which launch file that contained the setting. Conversely, with the Runtime Manager, I could just browse settings and then search the code for any setting that I was curious about to see if I could learn more about it.

Also, speaking as someone who has delivered Autoware.AI training to university students, it was very straightforward to demonstrate basic exercises with the Runtime Manager and for the students to follow along. If I had had to do the same kind of training with Autoware just using launch files, it would have taken far longer to carry out each demonstration and for the students to carry out the exercises."
web version of  runtime_manager (including webviz),D_kwDOAnasMc4AP65c,2022-01-31T14:02:57Z,xczhanjun,3,Answered,DC_kwDOAnasMc4AICzY,mitsudome-r,"@xczhanjun 
Thank you for raising the topic.
Currently, I was thinking of only having a sample launch file where users can customize for their own use case, but I understand that having GUI might be easier for light users or non ROS developers to play around with Autoware. 

However, before we start developing the GUI, I would like to first set the scope and usecases of the tool. Runtime manager included features to launch a node, do topic monitoring, playing/recording rosbags, etc. I would like to know if there are any features we would like to add/remove and make clear with the purpose of having the GUI. 

As for the implementation, I would completely agree that we should rewrite the code since we were struggling to maintain the code with poor readability. I would still like to discuss which language would be the best. I can think of web based GUi like you mentioned, but I think there is an option of going with rqt just like other ROS GUI tools."
web version of  runtime_manager (including webviz),D_kwDOAnasMc4AP65c,2022-01-31T14:02:57Z,xczhanjun,3,Answered,DC_kwDOAnasMc4AIFPx,xczhanjun,web is eating the world.
web version of  runtime_manager (including webviz),D_kwDOAnasMc4AP65c,2022-01-31T14:02:57Z,xczhanjun,3,Answered,DC_kwDOAnasMc4ALItE,Unknown,"@xczhanjun Based on @mitsudome-r's comment, I have created a new Design discussion to talk about the scope and use cases for a new Runtime Manager. If you have any views on what should be included in this tool, and how it should be created, then please feel free to leave a comment!
https://github.com/orgs/autowarefoundation/discussions/410"
Interface Design (AD API),D_kwDOAnasMc4AP65d,2022-02-02T03:18:58Z,isamu-takagi,9,Answered,,,
Interface Design (AD API),D_kwDOAnasMc4AP65d,2022-02-02T03:18:58Z,isamu-takagi,9,Answered,DC_kwDOAnasMc4AJkuu,xmfcx,https://github.com/autowarefoundation/autoware-documentation/pull/69
Interface Design (AD API),D_kwDOAnasMc4AP65d,2022-02-02T03:18:58Z,isamu-takagi,9,Answered,DC_kwDOAnasMc4AJ3Aw,isamu-takagi,"I started implementing the API prototype to help discussion of API.

- https://github.com/autowarefoundation/autoware.universe/pull/704"
Interface Design (AD API),D_kwDOAnasMc4AP65d,2022-02-02T03:18:58Z,isamu-takagi,9,Answered,DC_kwDOAnasMc4ANNcS,isamu-takagi,"# Localization API

Unify the location initialization method to the service. The topic `/initialpose` from rviz is only subscribed to by adapter node and converted to API call. This API call is forwarded to the pose initializer node so it can centralize the state of pose initialization. For other nodes that require initialpose, pose initializer node publishes as `/initialpose3d`.

![block-diagram-initial-pose drawio](https://user-images.githubusercontent.com/43976882/182350009-11922fc7-da2b-4f3f-81ee-33a87bcf09ab.png)
(Actually, the module when using GNSS is included in the pose initializer node.)

## Docs

- https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/list/api/localization/

## PRs

- https://github.com/autowarefoundation/autoware.universe/pull/1560
- https://github.com/autowarefoundation/autoware.universe/pull/1431
- https://github.com/autowarefoundation/autoware.universe/pull/1500
- https://github.com/autowarefoundation/autoware_launch/pull/70
- https://github.com/autowarefoundation/autoware_launch/pull/72
- https://github.com/tier4/tier4_autoware_msgs/pull/44
"
Interface Design (AD API),D_kwDOAnasMc4AP65d,2022-02-02T03:18:58Z,isamu-takagi,9,Answered,DC_kwDOAnasMc4ANNdh,isamu-takagi,"# Routing API

Unify the route setting method to the service. This API supports two waypoint formats, poses and HADMap segments. The goal and checkpoint topics from rviz is only subscribed to by adapter node and converted to API call. This API call is forwarded to the mission planner node so it can centralize the state of routing. For other nodes that require route, mission planner  node publishes as /planning/mission_planning/route.

![routing-after drawio](https://user-images.githubusercontent.com/43976882/191480499-82a4e17c-cab4-4e6e-8593-f0990c406d3d.png)

## Docs

- https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/list/api/routing/

## PRs

- https://github.com/autowarefoundation/autoware.universe/pull/1559
- https://github.com/autowarefoundation/autoware.universe/pull/1494
- https://github.com/autowarefoundation/autoware_launch/pull/70
- https://github.com/autowarefoundation/autoware.universe/pull/1495
- https://github.com/autowarefoundation/autoware_msgs/pull/37
- https://github.com/autowarefoundation/autoware_msgs/pull/33

"
Interface Design (AD API),D_kwDOAnasMc4AP65d,2022-02-02T03:18:58Z,isamu-takagi,9,Answered,DC_kwDOAnasMc4AOHC9,isamu-takagi,"# Motion API

Provides a hook for when the vehicle starts. It is typically used for announcements that call attention to the surroundings. Add a pause function to the vehicle_cmd_gate, and API will control it based on vehicle stopped and start requested. 

![motion drawio](https://user-images.githubusercontent.com/43976882/191482512-cb7f8c50-09a5-4bd0-b673-e58b871c8d7a.png)

## Docs

- https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/list/api/motion/

## PRs

- https://github.com/autowarefoundation/autoware.universe/pull/1808
- https://github.com/autowarefoundation/autoware.universe/pull/1809
- https://github.com/autowarefoundation/autoware.universe/pull/1810
- https://github.com/tier4/tier4_autoware_msgs/pull/53


"
Interface Design (AD API),D_kwDOAnasMc4AP65d,2022-02-02T03:18:58Z,isamu-takagi,9,Answered,DC_kwDOAnasMc4APq0a,isamu-takagi,"# Operation Mode API

Introduce operation mode. It handles `autoware engage`, `gate_mode`, `external_cmd_selector` and `control_mode` abstractly. When the mode is changed, it will be in-transition state, and if the transition completion condition to that mode is not satisfied, it will be returned to the previous mode. Also, currently, the condition for mode change is only `WaitingForEngage` in `/autoware/state`, and the engage state is shared between modes. After introducing operation mode, each mode will have a transition available flag.

![operation-mode](https://user-images.githubusercontent.com/43976882/201102260-c3c09465-4e79-4a08-abcd-12b24b94b5be.png)

state transition
![operation-mode-state drawio](https://user-images.githubusercontent.com/43976882/201105007-97e41106-93b9-4492-842f-e671d85cfa13.png)

nodes and topics
![operation-mode-compatibility drawio](https://user-images.githubusercontent.com/43976882/201105002-0867badd-8c58-4595-bae7-164626396fe6.png)

## Docs

- https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/list/api/operation_mode/

## PRs

- https://github.com/autowarefoundation/autoware.universe/pull/1570
- https://github.com/autowarefoundation/autoware.universe/pull/1569
- https://github.com/autowarefoundation/autoware.universe/pull/2120
- https://github.com/autowarefoundation/autoware.universe/pull/1586
- https://github.com/autowarefoundation/autoware.universe/pull/1535
- https://github.com/tier4/tier4_autoware_msgs/pull/46"
Interface Design (AD API),D_kwDOAnasMc4AP65d,2022-02-02T03:18:58Z,isamu-takagi,9,Answered,DC_kwDOAnasMc4APsQD,evshary,"@isamu-takagi This is awesome architecture and clarifies some of my questions about AD API!
After viewing the topic and service from [here](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/list/api/operation_mode/), I guess the idea will be that FMS uses AD API to change the operation mode, but leaves the control command to other components.
From the description below, Remote means ""Manually control the vehicle from a web application on the cloud.""
![image](https://user-images.githubusercontent.com/456210/201254724-6d991485-2242-4d71-b9a8-1b25e872e3f0.png)
In your architecture, I saw that `control command (remote)` does not come from AD API. May I know how this works?
"
Interface Design (AD API),D_kwDOAnasMc4AP65d,2022-02-02T03:18:58Z,isamu-takagi,9,Answered,DC_kwDOAnasMc4APsTC,isamu-takagi,"@evshary The control commands are currently available for the following topics. But these are prototypes, so topics should be designed later and defined as AD API.

- `/api/external/set/command/local/control`
- `/api/external/set/command/local/heartbeat`
- `/api/external/set/command/local/shift`
- `/api/external/set/command/local/turn_signal`
- `/api/external/set/command/remote/control`
- `/api/external/set/command/remote/heartbeat`
- `/api/external/set/command/remote/shift`
- `/api/external/set/command/remote/turn_signal`"
Interface Design (AD API),D_kwDOAnasMc4AP65d,2022-02-02T03:18:58Z,isamu-takagi,9,Answered,DC_kwDOAnasMc4APsnk,evshary,"@isamu-takagi Thank you for the answers.
I found that these topics are published directly in packages `external_cmd_selector`.
Do you mean that these topics should be moved to `tier4_autoware_api_launch` and covert to AD API later?"
Interface Design (AD API),D_kwDOAnasMc4AP65d,2022-02-02T03:18:58Z,isamu-takagi,9,Answered,DC_kwDOAnasMc4APsqE,isamu-takagi,"That's right. First, consider a message type suitable for AD API, and rename the topic name if necessary. Then, create a node to relay or convert in the [AD API package](https://github.com/autowarefoundation/autoware.universe/tree/main/system/default_ad_api). This node is launched by `tier4_autoware_api_launch`."
Interface Design (AD API),D_kwDOAnasMc4AP65d,2022-02-02T03:18:58Z,isamu-takagi,9,Answered,DC_kwDOAnasMc4APsrb,evshary,Good to know that. Really appreciate your answer!
Interface Design (AD API),D_kwDOAnasMc4AP65d,2022-02-02T03:18:58Z,isamu-takagi,9,Answered,DC_kwDOAnasMc4AQmCA,isamu-takagi,"# Resource API

Cancelled."
Interface Design (AD API),D_kwDOAnasMc4AP65d,2022-02-02T03:18:58Z,isamu-takagi,9,Answered,DC_kwDOAnasMc4AQmCc,isamu-takagi,"We are currently considering resource API for updating the parameter file.
https://github.com/autowarefoundation/autoware-documentation/pull/275"
Interface Design (AD API),D_kwDOAnasMc4AP65d,2022-02-02T03:18:58Z,isamu-takagi,9,Answered,DC_kwDOAnasMc4AREEI,isamu-takagi,Related to https://github.com/autowarefoundation/autoware/discussions/3123
Interface Design (AD API),D_kwDOAnasMc4AP65d,2022-02-02T03:18:58Z,isamu-takagi,9,Answered,DC_kwDOAnasMc4AREEx,isamu-takagi,"# Vehicle status API

https://github.com/autowarefoundation/autoware/issues/3232
https://github.com/autowarefoundation/autoware/issues/3226"
Interface Design (AD API),D_kwDOAnasMc4AP65d,2022-02-02T03:18:58Z,isamu-takagi,9,Answered,DC_kwDOAnasMc4ASN8S,isamu-takagi,"# Visualization API

https://github.com/autowarefoundation/autoware/issues/3225"
Enable RISC-V platform,D_kwDOAnasMc4AP65f,2022-02-02T13:24:05Z,xczhanjun,1,Answered,,,
Enable RISC-V platform,D_kwDOAnasMc4AP65f,2022-02-02T13:24:05Z,xczhanjun,1,Answered,DC_kwDOAnasMc4AH_vG,kenji-miyake,"Could you write a bit more detailed description?

For example:
- How can we support it?
- What ECUs can we use?
- etc.

Also, since this isn't a bug but just an idea, I'll convert this to a discussion."
Enable RISC-V platform,D_kwDOAnasMc4AP65f,2022-02-02T13:24:05Z,xczhanjun,1,Answered,DC_kwDOAnasMc4AIFP1,xczhanjun,how about this open risc-v chip (https://github.com/OpenXiangShan/XiangShan)?
Support bi-directional driving,D_kwDOAnasMc4AP65g,2022-02-04T07:09:33Z,g-ise,0,Unanswered,,,
Creating high level epics for the Bus ODD,D_kwDOAnasMc4AP65h,2022-02-16T17:51:24Z,BonoloAWF,0,Unanswered,,,
Autonomy Software WG Meeting 2022/03/01,D_kwDOAnasMc4AP65i,2022-02-24T09:30:23Z,BonoloAWF,1,Answered,,,
Autonomy Software WG Meeting 2022/03/01,D_kwDOAnasMc4AP65i,2022-02-24T09:30:23Z,BonoloAWF,1,Answered,DC_kwDOAnasMc4AIzhF,ambroise-arm,"> F- Of course it's important but for the Yolo issue previous tests were written by hard coding bounding boxes and expecting the exact same output when Yolo runs. That test makes no sense. M - yes, that specific test makes no sense. Rather ignore the bounding box and check label outputs are correct. This just sounds like a poorly designed test.

@xmfcx @mitsudome-r I am lacking context, but I assume we are talking about this: https://gitlab.com/autowarefoundation/autoware.auto/AutowareAuto/-/blob/e718a68266aaa168558b38c08b99aa7f256d71ae/src/common/tvm_utility/test/yolo_v2_tiny/main.cpp#L273

The goal of the current tests is to ensure repeatability and determinism of the results for a given network. It also tests against regressions in other parts of the environment (modifications to the tvm_utility package, to the TVM runtime version, ...). Checking the label makes perfect sense and can become an additional test. But I don't think the current ones should be removed, unless the determinism of the results is not important."
Autonomy Software WG Meeting 2022/03/01,D_kwDOAnasMc4AP65i,2022-02-24T09:30:23Z,BonoloAWF,1,Answered,DC_kwDOAnasMc4AIzzW,xmfcx,"@ambroise-arm I was actually referring to this: https://gitlab.com/autowarefoundation/autoware.auto/AutowareAuto/-/merge_requests/1303#note_860406908

> `[0.995058, 0.976546, 0.999322, 1, 1] instead of [0.995058, 0.976546, 0.999322]`

I misunderstood the point made here. I misread it as outputs being different in float precision level, not vector element count difference. It was my fault sorry."
Core/Universe Planning meeting 2022/03/02,D_kwDOAnasMc4AP65m,2022-03-02T14:33:18Z,mitsudome-r,0,Unanswered,,,
Autonomy Software WG Meeting 2022/03/08,D_kwDOAnasMc4AP65n,2022-03-03T13:14:44Z,BonoloAWF,4,Answered,,,
Autonomy Software WG Meeting 2022/03/08,D_kwDOAnasMc4AP65n,2022-03-03T13:14:44Z,BonoloAWF,4,Answered,DC_kwDOAnasMc4AI1AS,xmfcx,@xmfcx to create a Discussion for point cloud fields with the prev. mermaid diagram.
Autonomy Software WG Meeting 2022/03/08,D_kwDOAnasMc4AP65n,2022-03-03T13:14:44Z,BonoloAWF,4,Answered,DC_kwDOAnasMc4AI1Fo,mitsudome-r,"Today's presentation: [Transition.to.Autoware.Core_Universe.pdf](https://github.com/autowarefoundation/autoware/files/9069801/Transition.to.Autoware.Core_Universe.pdf)

"
Autonomy Software WG Meeting 2022/03/08,D_kwDOAnasMc4AP65n,2022-03-03T13:14:44Z,BonoloAWF,4,Answered,DC_kwDOAnasMc4AI2lP,hueirutseng,"Today's presentation.
[ITRI Autonomous Bus Pilot Run in Hsinchu Update_20220308.pdf](https://github.com/autowarefoundation/autoware/files/8210975/ITRI.Autonomous.Bus.Pilot.Run.in.Hsinchu.Update_20220308.pdf)
 "
Autonomy Software WG Meeting 2022/03/08,D_kwDOAnasMc4AP65n,2022-03-03T13:14:44Z,BonoloAWF,4,Answered,DC_kwDOAnasMc4AI2ns,Unknown,@BonoloAWF  Can the recording of this meeting be shared please?
Autonomy Software WG Meeting 2022/03/08,D_kwDOAnasMc4AP65n,2022-03-03T13:14:44Z,BonoloAWF,4,Answered,DC_kwDOAnasMc4AI3Qq,BonoloAWF,Please ask @mitsudome-r  for the recording. I don't have access.
Autonomy Software WG Meeting 2022/03/15,D_kwDOAnasMc4AP65o,2022-03-09T11:36:52Z,BonoloAWF,0,Unanswered,,,
Core/Universe Planning meeting 2022/03/09,D_kwDOAnasMc4AP65p,2022-03-09T14:32:05Z,mitsudome-r,0,Unanswered,,,
Open AD Kit WG Meeting 2022/03/10,D_kwDOAnasMc4AP65r,2022-03-10T07:02:35Z,Unknown,0,Unanswered,,,
Open AD Kit 2.0 scope,D_kwDOAnasMc4AP65t,2022-03-11T07:16:15Z,Unknown,8,Answered,,,
Open AD Kit 2.0 scope,D_kwDOAnasMc4AP65t,2022-03-11T07:16:15Z,Unknown,8,Answered,DC_kwDOAnasMc4AJczK,Unknown,"[Use-cases and Benefits of the Open AD Kit 2.0 (1st draft).pdf](https://github.com/autowarefoundation/autoware/files/8388486/Use-cases.and.Benefits.of.the.Open.AD.Kit.2.0.1st.draft.pdf)

In [the previous meeting](https://github.com/autowarefoundation/autoware/discussions/132#discussion-3974372), I explained the above presentation to provide the starting point to discuss use-cases and benefits that the Open AD Kit version 2.0 will bring to users. To choose appropriate technologies, I think it should be valuable for us to firstly consider the use-cases and benefits, and then we can define the scope of the Open AD Kit version 2.0.

I showed example use-cases and benefits in page 8, and I hope we can discuss and dig into them here."
Open AD Kit 2.0 scope,D_kwDOAnasMc4AP65t,2022-03-11T07:16:15Z,Unknown,8,Answered,DC_kwDOAnasMc4AJc2f,Unknown,"I got questions from Fatih ( @xmfcx ) in [the meeting](https://github.com/autowarefoundation/autoware/discussions/132#discussion-3974372), and I'll answer them below:

>  1, 3 and 4 (local deployment only) could be achieved before, so what will v2.0 do differently?

I think that v1.0 achieves some high-level use-cases at some level, but v1.0 does not seem to be sufficient to perform CI/CD or DevOps required in the software defined vehicle (SDV) development. So, v2.0 would provide use-cases and benefits that are demanded in the SDV development. These high-level use-cases can be digged into a little more deeply to appear the difference between v1.0 and v2.0.

> what is the difference between 2 and 5?

The no.2 ""Simulate scenarios/sensors"" means simulations. The no.5 ""Debug the system"" means that developers can easily prepare the cloud or vehicle-edge environments in their local environment for debugging.

I hope that it answers your questions.
Thank you!"
Open AD Kit 2.0 scope,D_kwDOAnasMc4AP65t,2022-03-11T07:16:15Z,Unknown,8,Answered,DC_kwDOAnasMc4AJeGB,kenji-miyake,"I think we have to consider the preparation phase such as ""Hardware Selection"", ""Map Creation"", etc.
Even though we can't change the HW specs for the Bus ODD, we should document it in a place where people can easily find it."
Open AD Kit 2.0 scope,D_kwDOAnasMc4AP65t,2022-03-11T07:16:15Z,Unknown,8,Answered,DC_kwDOAnasMc4AJpYj,armaganarsln,"Hardware selection and architecture is prepared at the beginning of the project for each ODD. The previous ODDs are here: https://github.com/autowarefoundation/autoware-projects/wiki/autonomy-hardware-working-group
https://drive.google.com/open?id=1d3PjkqIypyrm0xwk_AYRP0EGApPxnSw6&authuser=armagan%40leodrive.ai&usp=drive_fs
The current ODD is here and not finalized: https://drive.google.com/open?id=1yGgWudSl04lOhgqgGP-PrNxzVlHH_PMb&authuser=armagan%40leodrive.ai&usp=drive_fs
"
Open AD Kit 2.0 scope,D_kwDOAnasMc4AP65t,2022-03-11T07:16:15Z,Unknown,8,Answered,DC_kwDOAnasMc4AJc38,NaoyoriTanzawa,"Let's determine the use cases first considering the benefit.
Then, we can discuss which technology given by Kasper's presentation works to achieve the use cases.

@LalithVipulananthan Please give the timeline to close this discussion."
Open AD Kit 2.0 scope,D_kwDOAnasMc4AP65t,2022-03-11T07:16:15Z,Unknown,8,Answered,DC_kwDOAnasMc4AJebW,Unknown,"As requested, I have updated the discussion to include my proposed timeline, as well as adding links to PDFs of Hashimoto-san's document and Kasper's document."
Open AD Kit 2.0 scope,D_kwDOAnasMc4AP65t,2022-03-11T07:16:15Z,Unknown,8,Answered,DC_kwDOAnasMc4AJeSE,Igata-ctrl,"It might be a good idea to go back to the Vision and Mission of the working group instead  of showing the open ADK 1.0 content as a back ground, as v1.0 was more like a simplified feasible study of the containerization.  
https://github.com/autowarefoundation/autoware-projects/wiki/Open-AD-Kit-working-group
![image](https://user-images.githubusercontent.com/65706406/161197650-3841577a-5009-4c1a-b05e-c05caef67c1a.png)

Secondary, though its'a small issue, the term ""Robo-bus"" can be misleading as it sounds like a driver-less bus, which ITRI, AWF or any other player in the industry is claiming as far as I know. I'd like to recommend to continue to use ""public road bus""."
Open AD Kit 2.0 scope,D_kwDOAnasMc4AP65t,2022-03-11T07:16:15Z,Unknown,8,Answered,DC_kwDOAnasMc4AJpYq,armaganarsln,One use case example of Open-AD Kit could be online sensor calibration. We could maybe start with Lidar-Lidar calibration as the first step since bus ODD requires using multiple Lidar. We don't need to do this as an action item but could be in conOps in Hashimoto san presentation.
Open AD Kit 2.0 scope,D_kwDOAnasMc4AP65t,2022-03-11T07:16:15Z,Unknown,8,Answered,DC_kwDOAnasMc4AJuH-,kaspermeck-arm,"One of the most important aspects of Open AD Kit is the build, test and deployment infrastructure. The infrastructure is orthogonal to the use-cases, so I don't quite understand what is meant by defining the use-cases first.

Suggestion for the scope of Open AD Kit 2.0
- Bus ODD (this is the microservices application)
-- simulation in cloud (also for ""desktop"" development hardware)
-- live sensor data in vehicle
- Multi stage build pipeline (build, CI/CD)
- Testing, e.g. ROS package test, unit tests (test, CI/CD)
- Public container registry for the build artifacts, i.e., container images
- Integration testing using containers and orchestrator (cloud deployment, CI/CD)
- OTA service (eSync Alliance)
- distro with container runtime and orchestration (EWAOL, edge and cloud)
- CPU and GP-GPU hardware (edge and cloud)

I will work on refining the list above."
Open AD Kit 2.0 scope,D_kwDOAnasMc4AP65t,2022-03-11T07:16:15Z,Unknown,8,Answered,DC_kwDOAnasMc4AJuUL,kenji-miyake,"> so I don't quite understand what is meant by defining the use-cases first.

I believe what is important to projects is to show the product's value to the stakeholders and involve them.

Use cases are useful for that. It can explain:
- What are the target users and usage of the feature?
- What are the current problems?
- Why can the feature solve the problems? (Is it an appropriate approach?)
- How beneficial is it if the problems are solved?

If stakeholders (including TIER IV) don't understand that, they can't provide resources for the project because they can't judge the ROI.

@kasperornmeck Is this explanation clear for you?

> The infrastructure is orthogonal

What did you mean by this? I'm sorry but I couldn't understand well."
Open AD Kit 2.0 scope,D_kwDOAnasMc4AP65t,2022-03-11T07:16:15Z,Unknown,8,Answered,DC_kwDOAnasMc4AJvLc,NaoyoriTanzawa,"@kasperornmeck 
Thank you for the proposal. I am still having similar questions to Miyake-san's ones, although I joined the Open AD Kit CI/CD bi-weekly sync.
I just checked your slides again. I think the objective can be clarified on the page 2. I understand SOAFEE and SDV are the concept. On the other hand, I assume those should have any objective to be achieved. This is why we are trying to start developing any system with specific use cases.
https://docs.google.com/presentation/d/1aPaW-BkNnFMA-LhVgaxjO3qo5HU-YCqpOtjp-ZJCP2k/edit#slide=id.g1134780ae1b_0_15"
Open AD Kit 2.0 scope,D_kwDOAnasMc4AP65t,2022-03-11T07:16:15Z,Unknown,8,Answered,DC_kwDOAnasMc4AJu6C,doganulus,"As a researcher in V&V of autonomous systems and a testing tool developer, I would be interested in a containarized Autoware + containerized simulator to research&develop more advanced scenario-based testing and verification tools. 

The OpenAD kit would help integrating different testing approaches into the workflow and evaluate them against Autoware on a scalable platform. Currently, setup times from the zero to the first simulation, and from the first to many many simulations is too much effort.

For integration, we would need interfaces to control simulation actors and selectively enable/disable Autoware functions, as well as use ground truth sometimes from the simulator and/or deliberately inject faults to challenge the Autoware implementation harder.

"
Open AD Kit 2.0 scope,D_kwDOAnasMc4AP65t,2022-03-11T07:16:15Z,Unknown,8,Answered,DC_kwDOAnasMc4AKIMu,Unknown,"Until now, we have been discussing several candidate technologies, like containerization and microservice architectures. I think some of them are ambitious challenges for vehicle-edge systems that have limited hardware resources. To choice better solutions, I would like to propose the following steps to consider candidate technologies that will be included in version 2.0:

1. Define a use-cases and benefit that the Open AD Kit bring to users of each version (hopefully identify use-cases and benefits of a final version, too) 
2. Consider candidate technologies that achieve the use-cases on each version (especially identify them on version 2.0) while considering a project time frame and the feasibility of them

To consider use-cases of the Open AD Kit and identify when we will implement them with specific technologies, I think it is important to create a roadmap based on use-cases and benefits that each version will bring to users. So, I prepared [a draft of the roadmap](https://docs.google.com/spreadsheets/d/1TO4Ycgi96aHNYMTQRgezuOLVYV1UEMRtUX0hA5bgvW0/edit?usp=sharing) that proposes use-cases and benefits of each version of the Open AD Kit.

I hope we can discuss use-cases, benefits and candidate technologies with [the roadmap](https://docs.google.com/spreadsheets/d/1TO4Ycgi96aHNYMTQRgezuOLVYV1UEMRtUX0hA5bgvW0/edit?usp=sharing). If you have any ideas or comments, please feel free to add them to the document or here."
Open AD Kit 2.0 scope,D_kwDOAnasMc4AP65t,2022-03-11T07:16:15Z,Unknown,8,Answered,DC_kwDOAnasMc4AKIcD,kaspermeck-arm,"@d-hashimoto 
Thanks for putting together a the proposed roadmap for the Open AD Kit 2.0 and I think the features which you have outlined are reasonable (depending on the release date for 2.0). Below I've copied and commented on some of the fields you put in your spreadsheet.
- 1.1 Easily reproduce vehicle-edge environments
This is one of the main goals of EWAOL, ensuring that the deployment environment is consistent with the needs of the applications.
- 2.1. Simulate sensors
Does replaying a ROSBAG count towards this? Are there other ways of doing this?
- 4.2. Update wirelessly
This can be done in many ways, e.g. for containers, a simple ""docker pull"", using ""docker-compose run"", or K3s. Is there anything else you have in mind?
- 5.1. Monitor fleet data
How is this done today? What data is gathered and how?

Regarding ""several candidate technologies"", I just want to make clear that containerization and microservices architecture aren't candidates, they're concepts/technologies which have been decided on to be used in Open AD Kit."
Open AD Kit 2.0 scope,D_kwDOAnasMc4AP65t,2022-03-11T07:16:15Z,Unknown,8,Answered,DC_kwDOAnasMc4AKxbb,Unknown,"@d-hashimoto The outstanding questions from Kasper above were discussed in today's WG meeting. We attempted to clarify as much as possible based on the roadmap proposal document, but further input from you is needed so that we can finish the discussion and finalise the project scope. 🙇🏾 

- 1.1 Easily reproduce vehicle-edge environments
  - The roadmap document talks about a ""pre-build container"". Could you clarify what is meant by this term?
- 2.1. Simulate sensors
  - For Open AD Kit 1.0, the Planning Simulator is supported locally and in the cloud (using Scenario Runner for cloud CI/CD)
  - For Open AD Kit 2.0, is there a plan to support other simulation types? 
    - [I asked the Simulation WG in Discord for information on new simulation types](https://discord.com/channels/953808765935816715/953901404727148574/979174983181951076), but it would be good to confirm what you had in mind.
- 4.2. Update wirelessly
  - The roadmap's use case is to update container images on vehicle-edge devices, but could the scope be described in more detail? For example, do we want to be able to remotely manage the edge device? Do we want to be able to update edge device firmware as well?
- 5.1. Monitor fleet data
  - How is this done today? What data is gathered and how?
  - Is this just recording of data to rosbags? Is there something different that is planned for 2.0?"
Open AD Kit 2.0 scope,D_kwDOAnasMc4AP65t,2022-03-11T07:16:15Z,Unknown,8,Answered,DC_kwDOAnasMc4AK6gd,NaoyoriTanzawa,"@kasperornmeck Let me reply to you instead of Hashimoto-san. Sorry for the delay.
> 1.1 Easily reproduce vehicle-edge environments
> This is one of the main goals of EWAOL, ensuring that the deployment environment is consistent with the needs of the applications.

I understand. Thank you for letting us know!

> 2.1. Simulate sensors
> Does replaying a ROSBAG count towards this? Are there other ways of doing this?

We assume a simulator with ROSBAG can handle this.

> 4.2. Update wirelessly
> This can be done in many ways, e.g. for containers, a simple ""docker pull"", using ""docker-compose run"", or K3s. Is there anything else you have in mind?

As you mentioned, we understand there are several ways and a solution from eSync is one of the options.

> 5.1. Monitor fleet data
> How is this done today? What data is gathered and how?

This is not achieved with Open AD Kit 1.0."
Open AD Kit 2.0 scope,D_kwDOAnasMc4AP65t,2022-03-11T07:16:15Z,Unknown,8,Answered,DC_kwDOAnasMc4AK6g0,NaoyoriTanzawa,"@LalithVipulananthan As we discussed, let me reply to you as follows.
> 1.1 Easily reproduce vehicle-edge environments
> The roadmap document talks about a ""pre-build container"". Could you clarify what is meant by this term?

It means the container is validated independently.

> 2.1. Simulate sensors
> For Open AD Kit 1.0, the Planning Simulator is supported locally and in the cloud (using Scenario Runner for cloud CI/CD)
> For Open AD Kit 2.0, is there a plan to support other simulation types?
> [I asked the Simulation WG in Discord for information on new simulation types](https://discord.com/channels/953808765935816715/953901404727148574/979174983181951076), but it would be good to confirm what you had in mind.

This is under discussion at Simulation WG. The simulator with ROSBAG could be supported this year.

> 4.2. Update wirelessly
> The roadmap's use case is to update container images on vehicle-edge devices, but could the scope be described in more detail? For example, do we want to be able to remotely manage the edge device? Do we want to be able to update edge device firmware as well?

We can involve eSync in this discussion.

> 5.1. Monitor fleet data
> How is this done today? What data is gathered and how?
> Is this just recording of data to rosbags? Is there something different that is planned for 2.0?

I think TIER IV can propose this more specifically based on our experience."
Open AD Kit 2.0 scope,D_kwDOAnasMc4AP65t,2022-03-11T07:16:15Z,Unknown,8,Answered,DC_kwDOAnasMc4AK6lX,Unknown,"@kasperornmeck @LalithVipulananthan
I apologize late reply, and I will answer them:

- 1.1. Easily reproduce vehicle-edge environments
  - It was a typo, and I meant ""prebuilt container image.""

- 2.1. Simulate sensors
  - For Open AD Kit 2.0, ""logging simulator"" might be implemented.

-  4.2. Update wirelessly
  - To define the scope of OTA, we can gradually expand the scope of OTA, like following steps:
    1.   Define hardware components for which software is updated wirelessly (ex: vehicle ECUs, sensors CPU, etc...)
    2.  Define target layer that will be updated (ex: application layer, middleware layer, operating system layer, firmware layer)
    3.  Define granularity of containerization (this seems to be discussed in [the WG on 5/26](https://github.com/autowarefoundation/autoware/discussions/347))
  - To narrow the scope of the version 2.0, I can suggest the following example:
    1. Vehicle ECU(s)
    2. Application Layer (only autoware)
    3. Current monolithic image or Splitting out perception
![Screen Shot 2022-06-01 at 17 11 20](https://user-images.githubusercontent.com/89968601/171358713-3b033279-33d2-4ccf-8f14-20cb39dc0ced.png)



- 5.1. Monitor fleet data
  - For updating wirelessly, we need to know the status of the application if we decide the OTA scope like above. If we operate the application as a docker container(s), we need to know the container(s) status and application status remotely. It is not just recording data to rosbags."
Open AD Kit 2.0 scope,D_kwDOAnasMc4AP65t,2022-03-11T07:16:15Z,Unknown,8,Answered,DC_kwDOAnasMc4AK9fj,kaspermeck-arm,"@NaoyoriTanzawa  @d-hashimoto 
Thanks for your responses. It seems like we are aligned now! :) "
Open AD Kit 2.0 scope,D_kwDOAnasMc4AP65t,2022-03-11T07:16:15Z,Unknown,8,Answered,DC_kwDOAnasMc4AK8gT,Unknown,"Since the initial scope for Open AD Kit 2.0 was finalized in this week's Open AD Kit meeting, I will be locking/closing this discussion. If there are any further comments or feedback regarding the current scope, then please discuss in the next WG meeting (June 9th) or comment in the Discord channel between now and that meeting. "
2022-03-22 ODD working group weekly meeting (85),D_kwDOAnasMc4AP65u,2022-03-15T00:00:36Z,Igata-ctrl,0,Unanswered,,,
Microservices based architecture design for Autoware,D_kwDOAnasMc4AP65v,2022-03-15T02:53:10Z,Unknown,3,Answered,,,
Microservices based architecture design for Autoware,D_kwDOAnasMc4AP65v,2022-03-15T02:53:10Z,Unknown,3,Answered,DC_kwDOAnasMc4AJAru,kenji-miyake,"> One of the objectives for the Open AD Kit is to deliver a [microservice](https://aws.amazon.com/microservices/) based architecture for Autoware to enable cloud native devops and cloud-to-edge service orchestration

@LalithVipulananthan Thank you for your summary, but I believe this isn't true.
`microservice` is just a method, not a purpose.

So before that, we should define what benefits we'd like to provide to the users by introducing `microservice`.

My proposal is to list up use cases.
https://docs.google.com/presentation/d/1Y14DTQSyTlVXkAFyhVWVgf8zqDjyhL_hdpPyATOLi0w/edit#slide=id.g11a4e6b6669_0_108"
Microservices based architecture design for Autoware,D_kwDOAnasMc4AP65v,2022-03-15T02:53:10Z,Unknown,3,Answered,DC_kwDOAnasMc4AJCPE,kaspermeck-arm,"@LalithVipulananthan 

The first step is to have a CI/CD which splits the monolithic Autoware container into smaller containers based on features, e.g., map, sensing, localization, etc, and then manage these smaller containers using an orchestrator (K3s). Software development can still be done in a monolithic Autoware container with SDK and all necessary tool chains, but be deployed as a microservice.

I'm not sure what is meant by ""taking down the entire system""?"
Microservices based architecture design for Autoware,D_kwDOAnasMc4AP65v,2022-03-15T02:53:10Z,Unknown,3,Answered,DC_kwDOAnasMc4AJC_g,xmfcx,"@kasperornmeck @LalithVipulananthan 

I've meant that in Autoware.Auto, generally you need to restart all of nodes (take down the entire system) even if you want to restart one. Because most of the demos run from a single launch file and hard to shut down / restart a single node from there.

[Because there is no `ros2 node kill` command that is equivalent to `rosnode kill` from ROS1](https://answers.ros.org/question/323329/how-to-kill-nodes-in-ros2/).

For that we need to implement [Managed Nodes](https://design.ros2.org/articles/node_lifecycle.html).

When I was making these remarks, I was talking about the things we lack in Autoware.Auto in general, not specifically related to OpenAD Kit."
Microservices based architecture design for Autoware,D_kwDOAnasMc4AP65v,2022-03-15T02:53:10Z,Unknown,3,Answered,DC_kwDOAnasMc4AJDP_,kaspermeck-arm,"@xmfcx 
Would Autoware.Auto using a microservices way of deployment solve this issue? If a ROS node needed to be restarted, the container running this ROS node would be killed, then launched again."
Microservices based architecture design for Autoware,D_kwDOAnasMc4AP65v,2022-03-15T02:53:10Z,Unknown,3,Answered,DC_kwDOAnasMc4AJDQN,xmfcx,@kasperornmeck Yes it would. But we will implement [Managed Nodes](https://design.ros2.org/articles/node_lifecycle.html) regardless to enable fine control over the nodes.
Microservices based architecture design for Autoware,D_kwDOAnasMc4AP65v,2022-03-15T02:53:10Z,Unknown,3,Answered,DC_kwDOAnasMc4AJX_u,Unknown,"@xmfcx @kasperornmeck Thank you for your comments. 

You will have to forgive my ignorance on the subject, but Kasper mentioned ""using a microservices way of deployment"", is this something that Autoware is capable of right now or is additional development work required? If the latter, very roughly speaking how much time would be required to do that work?

In either case, does the AS WG plan to implement Managed Nodes as a priority, and if so how long might that work take?"
Microservices based architecture design for Autoware,D_kwDOAnasMc4AP65v,2022-03-15T02:53:10Z,Unknown,3,Answered,DC_kwDOAnasMc4AJZtI,kaspermeck-arm,"@LalithVipulananthan 
Right now, a microservices architecture can be prototyped using the monolithic Autoware container image, but it's not how it's supposed to be done. I'm not sure what the effort is, working to figure this out. There are a couple of different viable approaches.

Not sure regarding Managed Nodes."
Autonomy Software WG Meeting 2022/03/22,D_kwDOAnasMc4AP65w,2022-03-15T20:49:18Z,BonoloAWF,1,Answered,,,
Autonomy Software WG Meeting 2022/03/22,D_kwDOAnasMc4AP65w,2022-03-15T20:49:18Z,BonoloAWF,1,Answered,DC_kwDOAnasMc4AJNQq,armaganarsln,- [ ] We have reviewed the [current radar architecture proposal ](https://github.com/scepter914/autoware-radar-architecture-proposal)with the radar manufacturer smartmicro. Could we learn more about the plans for the radar perception pipeline and what's needed from the radar hardware in order to achieve the goals?
autoware_msgs Finalization,D_kwDOAnasMc4AP654,2022-03-16T13:24:24Z,xmfcx,2,Answered,,,
autoware_msgs Finalization,D_kwDOAnasMc4AP654,2022-03-16T13:24:24Z,xmfcx,2,Answered,DC_kwDOAnasMc4AJ3At,isamu-takagi,"I started implementing the API prototype to help discussion of API. So, I plan to add autoware_ad_api_msgs package. 

First, add this package to the autoware.universe repository. This is because there will be many PRs for prototyping and each PR will need to add messages. It's a waste of time to make two PRs each time. Finally, move the package to the message repository when the message is stable."
autoware_msgs Finalization,D_kwDOAnasMc4AP654,2022-03-16T13:24:24Z,xmfcx,2,Answered,DC_kwDOAnasMc4AJ6r_,kenji-miyake,"I'll add some supplemental comments.

First, the version API, which must be very stable, will be merged in this PR.
https://github.com/autowarefoundation/autoware.universe/pull/704

Then, TIER IV will implement prototypes, which will be merged with TIER IV's internal reviews and will be the AD API `v0` (or `v1` would be better?).

After that, TIER IV will ask other contributors to review them and update messages based on the reviews, which will be `v1`.

@xmfcx cc @mitsudome-r Please let us know if you have any questions or feedback."
autoware_msgs Finalization,D_kwDOAnasMc4AP654,2022-03-16T13:24:24Z,xmfcx,2,Answered,DC_kwDOAnasMc4AKBvC,kenji-miyake,"I'll link to related information.
https://gitlab.com/autowarefoundation/autoware.auto/AutowareAuto/-/issues/1421"
Core/Universe Planning meeting 2022/03/16,D_kwDOAnasMc4AP655,2022-03-16T14:03:37Z,mitsudome-r,0,Unanswered,,,
Point Types,D_kwDOAnasMc4AP656,2022-03-16T14:03:39Z,xmfcx,5,Answered,,,
Point Types,D_kwDOAnasMc4AP656,2022-03-16T14:03:39Z,xmfcx,5,Answered,DC_kwDOAnasMc4AJYfi,xmfcx,"https://github.com/autowarefoundation/autoware.universe/blob/2f3e335ab289c2e940229bd659589d081f6408ea/common/autoware_point_types/include/autoware_point_types/types.hpp#L57-L76

https://github.com/autowarefoundation/autoware.universe/blob/2f3e335ab289c2e940229bd659589d081f6408ea/sensing/pointcloud_preprocessor/docs/dual-return-outlier-filter.md"
Point Types,D_kwDOAnasMc4AP656,2022-03-16T14:03:39Z,xmfcx,5,Answered,DC_kwDOAnasMc4AJad4,chishengshih,"Hi, 

I suggest adding 'clock source' into UTC format.

A complex system may have several clock sources and will fuse the data from multiple sensors, which use different clock sources. For example, the bus may have one GPS clock for the computer and another GPS clock for each LIDAR. The drift among clock sources may lead to wrong results if the system is NOT aware of the difference in clock sources. Clock drift within 100ms will prolong the length of the detected objects. The clock source can be represented by the UUID of the device, for example, or URL to the NNTP server..
 
Daniel"
Point Types,D_kwDOAnasMc4AP656,2022-03-16T14:03:39Z,xmfcx,5,Answered,DC_kwDOAnasMc4AJe5f,ralwing,"Hello,
The PointCloud is currently heavily used by Lidar Perception, especially by ray_ground_estimator. Currently, this module use ray casting, which will be impossible after the distortion correction. 
Another problem is that the ray_cast should be able to know the source of each ray to properly evaluate the ray angles - The longer the distance is from base_link the higher is the evaluation error.
"
Point Types,D_kwDOAnasMc4AP656,2022-03-16T14:03:39Z,xmfcx,5,Answered,DC_kwDOAnasMc4AJlF7,xmfcx,"Hi @ralwing,

> Currently, this module use ray casting, which will be impossible after the distortion correction.

I'm assuming you are talking about the [ray_ground_classifier](https://gitlab.com/autowarefoundation/autoware.auto/AutowareAuto/-/tree/master/src/perception/filters/ray_ground_classifier).

And its [design doc](https://autowarefoundation.gitlab.io/autoware.auto/AutowareAuto/ray-ground-classifier-design.html).

This filter divides the point cloud into regions (rays), filtered by the local heights, sorted by x-y euclidean distance, and classifies the points as ground or not if difference is too high.

It doesn't do ray casting to my knowledge. Lidars are ray casting sensors themselves.

I'd say that with egomotion correction done, the full point cloud will make more sense and the ray_ground_classifier will work better.

> Another problem is that the ray_cast should be able to know the source of each ray to properly evaluate the ray angles - The longer the distance is from base_link the higher is the evaluation error.

A ray is basically a top down pie section of the point cloud. You can divide the point cloud into ""rays"" in any angle size you want. And [that angle size is a parameter](https://gitlab.com/autowarefoundation/autoware.auto/AutowareAuto/-/blob/master/src/perception/filters/ray_ground_classifier_nodes/param/vlp16_lexus.param.yaml#L22).

The red part would represent a ray in the filter.
![ray](https://user-images.githubusercontent.com/10751153/161847142-d68897ec-9c91-4cb4-a6ed-45535a1eda95.png)

(normally it'd be of 0.01rad or 0.57deg)"
Point Types,D_kwDOAnasMc4AP656,2022-03-16T14:03:39Z,xmfcx,5,Answered,DC_kwDOAnasMc4AJlvD,ralwing,"Ray Ground Classifier (RGC) works by getting a point cloud, dividing it into rays, and then analyzing the divided points to classify them as points on the ground or above the ground. The division into rays should reflect the operation of lidar - the RGC should see the world in the same way as lidar to work optimally.

Currently, the RGC gets points in the base_link frame and creates rays from that point. So the rays created this way do not correspond to the rays from lidar because they are created from a different location. This can cause misclassification of the outermost points, as you can see in the attached image (the problem becomes apparent when standing in front of a hill).

Her lidar is about 2 meters in from of base_link:

![rgc](https://user-images.githubusercontent.com/58466562/161922932-4febfd09-47e8-4a73-b2cf-7f72afdcfb4d.png)

The green points are on the ground, the blue points are above. The points on the left have been misclassified as blue, because for the radius so created (relative to base_link) the initial points are missing and the first points in that radius are already on the hill.

Once we set base_link into the same location, all points are correctly classified. 
"
Point Types,D_kwDOAnasMc4AP656,2022-03-16T14:03:39Z,xmfcx,5,Answered,DC_kwDOAnasMc4AJlzL,xmfcx,@ralwing Of course the origin of the lidar should be known for RGC to work correctly. I agree with that. But ego-motion distortion correction doesn't translate the point cloud so this shouldn't be an issue.
Point Types,D_kwDOAnasMc4AP656,2022-03-16T14:03:39Z,xmfcx,5,Answered,DC_kwDOAnasMc4AJksd,piotr-zyskowski-rai,"I believe, it is rather important to limit the data size of a point cloud. In our experience, big messages are not well supported in DDS/RMW implementations.

Considering a format like this:

name | datatype
-- | --
x | FLOAT32 
y | FLOAT32 
z | FLOAT32
intensity | FLOAT32
unix_seconds | UINT32
nanoseconds | UINT32
laser_channel | UINT8 (assuming lidars have no more than 256 lines)

It has 25 bytes per point. In the case of Velodyne VLS 128 set for 600RPM, it produces over 230k points each revolution.  A single message has around 5.5MB of data, which is quite a lot for DDS/RMW implementation to handle with 10Hz frequency. Size reduction would be very desireable, I think.

### Intensity

Is there a reason for intensity to be as high resolution as FLOAT32? Wouldn't the resolution provided with UINT16 or even UINT8  be sufficient for Autoware applications?

### Laser channel

What would be the data type of the `laser_channel` data field? It seems UINT8 would be sufficient for most lidar models.

### Time representation

I think a better approach would be to use a full timestamp in the header and offsets in the points since it reduces the overall message size.

To further reduce the point cloud size, offsets could be set for a ranges of points rather than to each point. Such metadata might be sent on the dedicated topic and nodes interested could use it. However, the question is whether such an approach would be accurate enough to be used for distortion reduction or other required applications.

### X,Y, Z position information

FLOAT32 seems fine to represent points. However, depending on the expected resolution data size might be reduced by half when representing the position in INT16. With 1cm level accuracy, it can represent a range <-327,68; 327,67>m which seems enough for most Lidars. Or with 0.5cm level accuracy with range reduced by half.

Of course, the drawback here would be greatly limited distance resolution. And it is not the standard approach to point representation.
"
Point Types,D_kwDOAnasMc4AP656,2022-03-16T14:03:39Z,xmfcx,5,Answered,DC_kwDOAnasMc4AJlC5,xmfcx,"### Intensity
> Is there a reason for intensity to be as high resolution as FLOAT32? Wouldn't the resolution provided with UINT16 or even UINT8 be sufficient for Autoware applications?

The raw data is represented by a single byte, so this is definitely possible.

### Laser channel

> What would be the data type of the laser_channel data field? It seems UINT8 would be sufficient for most lidar models.

For laser channel, assuming all of the points were ordered by channel before sending, it should be possible just to send the indices of the points where the new channels start as a separate array with the point cloud.

### Time representation

> I think a better approach would be to use a full timestamp in the header and offsets in the points since it reduces the overall message size.

If we are constrained by the size, then yes, this is my second method described above. But I have also specified its negative implications too.

> To further reduce the point cloud size, offsets could be set for a ranges of points rather than to each point. Such metadata might be sent on the dedicated topic and nodes interested could use it. However, the question is whether such an approach would be accurate enough to be used for distortion reduction or other required applications.

I think this would be going too far for this, would add too much complexity for the benefits it'd bring.

### X,Y, Z position information

> FLOAT32 seems fine to represent points. However, depending on the expected resolution data size might be reduced by half when representing the position in INT16. With 1cm level accuracy, it can represent a range <-327,68; 327,67>m which seems enough for most Lidars. Or with 0.5cm level accuracy with range reduced by half.

It is possible to represent VLP16 points with 2 bytes azimuth and 2 bytes of distance as long as we know which laser channels they belong to. This is what the driver uses to convert to a more usable format which is made of 3 floats.

Reference: 
> ### 9.3.1.3 Data Point
> A data point is a measurement by one laser channel of a reflection of a laser pulse.
> A data point is represented in the packet by three bytes - two bytes of distance and one byte of calibrated reflectivity. The distance is an unsigned integer. It has 2 mm granularity. Hence, a reported value of 51,154 represents 102,308 mm or 102.308 m. Calibrated 
 reflectivity is reported on a scale of 0 to 255 as described in Calibrated Reflectivity on page 32. The elevation angle (ω) is inferred based on the position of the data point within a data block.
> A distance of 0 indicates a non-measurement. The laser is either off or a measurable reflection was not returned in time.
> ### 9.3.1.4 Azimuth
> A two-byte azimuth value (α) appears after the flag bytes at the beginning of each data block. The azimuth is an unsigned integer. It represents an angle in hundredths of a degree. Therefore, a raw value of 27742 should be interpreted as 277.42°.
> Valid values for azimuth range from 0 to 35999. Only one azimuth value is reported per data block.

@piotr-zyskowski-rai said:
> And it is not the standard approach to point representation.

This is our main constraint, it'd pivot away too much from the standard.

For reference, [from VLP16 User Manual](https://velodynelidar.com/wp-content/uploads/2019/12/63-9243-Rev-E-VLP-16-User-Manual.pdf):
![VLP16 Single Return](https://user-images.githubusercontent.com/10751153/161839187-6e73f7aa-ab09-4e44-a850-b6b9fc58827c.png)"
Point Types,D_kwDOAnasMc4AP656,2022-03-16T14:03:39Z,xmfcx,5,Answered,DC_kwDOAnasMc4AJlDL,xmfcx,"> I believe, it is rather important to limit the data size of a point cloud. In our experience, big messages are not well supported in DDS/RMW implementations.

Even if we make the point cloud size constant and use [zero-copy method from iceoryx](https://github.com/eclipse-iceoryx/iceoryx#introduction)?

I'm asking because I've not tried it yet."
Point Types,D_kwDOAnasMc4AP656,2022-03-16T14:03:39Z,xmfcx,5,Answered,DC_kwDOAnasMc4AKYKK,mitsudome-r,I can create a sample nodes to investigate iceoryx zero-copy feature against a very large pointcloud message.
Point Types,D_kwDOAnasMc4AP656,2022-03-16T14:03:39Z,xmfcx,5,Answered,DC_kwDOAnasMc4AKYKM,mitsudome-r,cc. @piotr-zyskowski-rai 
Point Types,D_kwDOAnasMc4AP656,2022-03-16T14:03:39Z,xmfcx,5,Answered,DC_kwDOAnasMc4AKj8m,piotr-zyskowski-rai,"@xmfcx 
> Even if we make the point cloud size constant and use [zero-copy method from iceoryx](https://github.com/eclipse-iceoryx/iceoryx#introduction)?
> I'm asking because I've not tried it yet.

I looked over the description of this solution and I have one concern. From [iceoryx page](https://github.com/eclipse-iceoryx/iceoryx#introduction):

> iceoryx uses a true zero-copy, shared memory approach that allows to transfer data from publishers to subscribers without a single copy

So it would be great in case of publisher and subscriber are on the same machine, but it won't work via the network I suppose. Can it be expected that no big point cloud will be sent over the network?

@mitsudome-r I did not perform the iceoryx performance tests yet. I will take care of them soon however
"
Point Types,D_kwDOAnasMc4AP656,2022-03-16T14:03:39Z,xmfcx,5,Answered,DC_kwDOAnasMc4AKkD3,xmfcx,"- publish from drivers in each `epoch time + n *  101ms`

- https://github.com/google/draco"
Point Types,D_kwDOAnasMc4AP656,2022-03-16T14:03:39Z,xmfcx,5,Answered,DC_kwDOAnasMc4AKu_x,piotr-zyskowski-rai,"I did some tests of iceoryx

I used `rmw` implementation described on [iceoryx github page](https://github.com/ros2/rmw_iceoryx), except instead of calling `./install/iceoryx_posh/bin/iox-roudi` to run the daemon, I run `/opt/ros/galactic/bin/iox-roudi`

I created an artificial point cloud formatted as x,y,z floats

I planned to test point clouds from 100'000 to 15'000'000 points which was feasible for `cyclone_dds`. But for iceoryx after reaching 400'000 (around 4,5MB) I got the following error:
```
2022-05-24 18:44:33.707 [ Fatal ]: The following mempools are available:  MemPool [ ChunkSize = 168, ChunkPayloadSize = 128, ChunkCount = 10000 ]  MemPool [ ChunkSize = 1064, ChunkPayloadSize = 1024, ChunkCount = 5000 ]  MemPool [ ChunkSize = 16424, ChunkPayloadSize = 16384, ChunkCount = 1000 ]  MemPool [ ChunkSize = 131112, ChunkPayloadSize = 131072, ChunkCount = 200 ]  MemPool [ ChunkSize = 524328, ChunkPayloadSize = 524288, ChunkCount = 50 ]  MemPool [ ChunkSize = 1048616, ChunkPayloadSize = 1048576, ChunkCount = 30 ]  MemPool [ ChunkSize = 4194344, ChunkPayloadSize = 4194304, ChunkCount = 10 ]Could not find a fitting mempool for a chunk of size 4800149
2022-05-24 18:44:33.708 [Warning]: ICEORYX error! MEPOO__MEMPOOL_GETCHUNK_CHUNK_IS_TOO_LARGE
```
Apparently, it would not fit a single point cloud of mentioned Velodyne VLS 128 (with format as stated before) that has over 5,5MB of data.

I do not know if the implementation could be change to fit more data but I would conclude that usage of iceoryx might be more cumbersome than anticipated."
Point Types,D_kwDOAnasMc4AP656,2022-03-16T14:03:39Z,xmfcx,5,Answered,DC_kwDOAnasMc4ALl0P,aohsato,"@xmfcx (@badai-nguyen @drwnz @miursh)
Hi! We'd like to discuss azimuth in addition.

We currently use a [pointcloud_ex](https://github.com/tier4/velodyne_vls/blob/tier4/universe/velodyne_pointcloud/include/velodyne_pointcloud/pointcloudXYZIRADT.h) topic that also includes distance, azimuth, and return type for some sensing modules (the data size is large, so we use a container as shown in [velodyne_node_container.launch.py](https://github.com/autowarefoundation/sample_sensor_kit_launch/blob/main/common_sensor_launch/launch/velodyne_node_container.launch.py)).

Currently, the azimuth output from sensor drivers is a lidar-dependent value, and the type is not fixed.
We'd like to standardize it in the following issue, so would you please join us in the discussion?
https://github.com/autowarefoundation/autoware.universe/issues/1127"
Alternative Autonomous Vehicle Software Architectures,D_kwDOAnasMc4AP657,2022-03-16T14:08:50Z,xmfcx,0,Unanswered,,,
how to use elevation_map_loader in perception,D_kwDOAnasMc4AP658,2022-03-17T10:30:01Z,LLplane,3,Answered,,,
how to use elevation_map_loader in perception,D_kwDOAnasMc4AP658,2022-03-17T10:30:01Z,LLplane,3,Answered,DC_kwDOAnasMc4AJE_W,kenji-miyake,"@kosuke55 Could you briefly explain it, please? :pray: "
how to use elevation_map_loader in perception,D_kwDOAnasMc4AP658,2022-03-17T10:30:01Z,LLplane,3,Answered,DC_kwDOAnasMc4AJFBl,kosuke55,"@LLplane 
`elevation_map_loader` is for [compare_elevation_map_filter](https://github.com/autowarefoundation/autoware.universe/tree/main/perception/compare_map_segmentation). This filter compares the sensor pointcloud with the map and detects obstacles. You can use it with sample launches.
- [elevation_map_loader.launch.xml](https://github.com/autowarefoundation/autoware.universe/blob/main/perception/elevation_map_loader/launch/elevation_map_loader.launch.xml)
- [compare_elevation_map_filter.launch.xml ](https://github.com/autowarefoundation/autoware.universe/blob/main/perception/compare_map_segmentation/launch/compare_elevation_map_filter.launch.xml)"
how to use elevation_map_loader in perception,D_kwDOAnasMc4AP658,2022-03-17T10:30:01Z,LLplane,3,Answered,DC_kwDOAnasMc4AJFLM,LLplane,"Thank u!



发自我的iPhone


------------------ Original ------------------
From: Kosuke Takeuchi ***@***.***&gt;
Date: Thu,Mar 17,2022 6:59 PM
To: autowarefoundation/autoware ***@***.***&gt;
Cc: LLplane ***@***.***&gt;, Mention ***@***.***&gt;
Subject: Re: [autowarefoundation/autoware] how to use elevation_map_loader in perception (Discussion autowarefoundation/autoware#105)





 
@LLplane
 elevation_map_loader is for compare_elevation_map_filter. This filter compares the map with the sensor pointcloud and detects obstacles. You can use it with sample launches.
  
elevation_map_loader.launch.xml 

compare_elevation_map_filter.launch.xml  
 
—
Reply to this email directly, view it on GitHub, or unsubscribe.
Triage notifications on the go with GitHub Mobile for iOS or Android. 
You are receiving this because you were mentioned.Message ID: ***@***.***&gt;"
Is `localization_tf_status` necessary?,D_kwDOAnasMc4AP659,2022-03-18T06:04:21Z,h-ohta,1,Answered,,,
Is `localization_tf_status` necessary?,D_kwDOAnasMc4AP659,2022-03-18T06:04:21Z,h-ohta,1,Answered,DC_kwDOAnasMc4AJMIE,kenji-miyake,"@h-ohta The original reason why I added `localization_tf_status` is TIER IV has used TF instead of Pose as an output of the Localization component.

Diagnostics should be designed based on what failures we want to detect.
Considering the current use case ""detecting whether the Localization component is down"", I feel monitoring Pose is enough and that we can remove `localization_tf_status`.

If we want to detect a more complicated case such as ""Localization component is alive and Pose is published, but only TF isn't published"" in the future, we can re-add this feature."
Is `localization_tf_status` necessary?,D_kwDOAnasMc4AP659,2022-03-18T06:04:21Z,h-ohta,1,Answered,DC_kwDOAnasMc4AJMIk,kenji-miyake,"However, since components in `autoware.universe` are just prototypes, I'm not sure how valuable doing cleanup tasks such as removing unused features is.

If it won't affect the system behavior, I believe we should spend more resources to creating `autoware.core`."
Open AD Kit WG Meeting 2022/03/24,D_kwDOAnasMc4AP65-,2022-03-23T04:14:23Z,Unknown,0,Unanswered,,,
Autonomy Software WG Meeting 2022/03/29,D_kwDOAnasMc4AP65_,2022-03-23T09:21:15Z,BonoloAWF,2,Answered,,,
Autonomy Software WG Meeting 2022/03/29,D_kwDOAnasMc4AP65_,2022-03-23T09:21:15Z,BonoloAWF,2,Answered,DC_kwDOAnasMc4AJYVe,xmfcx,Discussion about localization: https://github.com/autowarefoundation/autoware/discussions/112
Autonomy Software WG Meeting 2022/03/29,D_kwDOAnasMc4AP65_,2022-03-23T09:21:15Z,BonoloAWF,2,Answered,DC_kwDOAnasMc4AJYXJ,mitsudome-r,"If we have time, I would like to discuss about:
1. https://github.com/autowarefoundation/autoware/pull/96 Very long discussion was done about the installation script whether we should use `pip` or `apt` for installing rocker 
1. I would like to discuss what everyone thinks about models for machine learning based perception nodes. We have CenterPoint uploaded as GDrive file but it sometimes fail with the download using a download script (`gdown`). Should modelzoo only support TVM models? or can it support other models. Who would maintain the repository?"
Changing the origin value in the gnss_poser package,D_kwDOAnasMc4AP66A,2022-03-23T12:59:04Z,meliketanrikulu,3,Answered,,,
Changing the origin value in the gnss_poser package,D_kwDOAnasMc4AP66A,2022-03-23T12:59:04Z,meliketanrikulu,3,Answered,DC_kwDOAnasMc4AJPa3,kenji-miyake,@YamatoAndo Could you answer this? :pray: 
Changing the origin value in the gnss_poser package,D_kwDOAnasMc4AP66A,2022-03-23T12:59:04Z,meliketanrikulu,3,Answered,DC_kwDOAnasMc4AJPyM,xmfcx,Also linked issue: https://github.com/autowarefoundation/autoware.universe/issues/576
Changing the origin value in the gnss_poser package,D_kwDOAnasMc4AP66A,2022-03-23T12:59:04Z,meliketanrikulu,3,Answered,DC_kwDOAnasMc4AJP2Z,xmfcx,"## Package can convert to other coordinate systems too

https://github.com/autowarefoundation/autoware.universe/blob/main/sensing/gnss_poser/launch/gnss_poser.launch.xml#L17 here I see that it is able to convert incoming lat/lon into UTM and MGRS coordinate systems too.

Here is where the conversion is made: https://github.com/autowarefoundation/autoware.universe/blob/main/sensing/gnss_poser/src/gnss_poser_core.cpp#L159-L175

## Median filtering should be made optional

It's also doing some median filtering operation based on past 1 second of incoming values: https://github.com/autowarefoundation/autoware.universe/blob/main/sensing/gnss_poser/src/gnss_poser_core.cpp#L76-L99 We should probably make this part optional.

## No place to set origin

Apart from this, I don't see a place where the large UTM or MGRS coordinate values would offset from an origin so that they would become more small local coordinates.

## Why not use LocalCartesian

For this why not make use of https://geographiclib.sourceforge.io/html/classGeographicLib_1_1LocalCartesian.html to simplify a lot of things? I uses WGS84 earth model and makes it possible to convert any lat-lon-alt to x-y-z local cartesian coordinates.

It takes a geodetic coordinate as origin and allows you to convert any other geodetic coordinate to local cartesian coordinates with the [Forward()](https://geographiclib.sourceforge.io/html/classGeographicLib_1_1LocalCartesian.html#acb5cdba37d411f0504c65489ff9f376c) method.

It makes it global, not worrying about either:
- [UTM](https://en.wikipedia.org/wiki/Universal_Transverse_Mercator_coordinate_system)
- [MGRS](https://en.wikipedia.org/wiki/Military_Grid_Reference_System)
- [Japan Plane Rectangular CS](https://spatialreference.org/ref/?search=japan&srtext=Search)
- [State Plane Coordinate System](https://en.wikipedia.org/wiki/State_Plane_Coordinate_System)."
Changing the origin value in the gnss_poser package,D_kwDOAnasMc4AP66A,2022-03-23T12:59:04Z,meliketanrikulu,3,Answered,DC_kwDOAnasMc4AJQsP,mitsudome-r,"I agree with Fatih. It makes more sense to use the LocalCartesian Projector.
If Tier IV requires to use MGRS, we can have a parameter to select GeographicLib projector to use for calculation."
Core/Universe Planning meeting 2022/03/23,D_kwDOAnasMc4AP66B,2022-03-23T13:58:41Z,mitsudome-r,3,Answered,,,
Core/Universe Planning meeting 2022/03/23,D_kwDOAnasMc4AP66B,2022-03-23T13:58:41Z,mitsudome-r,3,Answered,DC_kwDOAnasMc4AJPhq,kenji-miyake,"Small updates from my side:
- Added a description thread: https://github.com/autowarefoundation/autoware/discussions/115
- Adding Stale bot: https://github.com/autowarefoundation/autoware/pull/111
- Added some TIER IV members to the list of AWF contributors: https://docs.google.com/spreadsheets/d/1j0SeCbPr3Kh1dY1n0P96QFP-CJLfZcBFTEp1g9nXE2c/edit#gid=0"
Core/Universe Planning meeting 2022/03/23,D_kwDOAnasMc4AP66B,2022-03-23T13:58:41Z,mitsudome-r,3,Answered,DC_kwDOAnasMc4AJPht,xmfcx,https://gitlab.com/autowarefoundation/autoware.auto/AutowareAuto/-/issues/1421#note_880366717 On adding a prediction component.
Core/Universe Planning meeting 2022/03/23,D_kwDOAnasMc4AP66B,2022-03-23T13:58:41Z,mitsudome-r,3,Answered,DC_kwDOAnasMc4AJPie,kenji-miyake,"Other topics from Fatih-san
- https://github.com/autowarefoundation/.github/issues/2
- https://github.com/autowarefoundation/autoware-documentation/pull/21
  - https://autowarefoundation.github.io/autoware-documentation/pr-21/design/autoware-concepts/"
Relationships between artifacts in AWF working groups,D_kwDOAnasMc4AP66E,2022-03-24T00:05:07Z,Unknown,1,Answered,,,
Relationships between artifacts in AWF working groups,D_kwDOAnasMc4AP66E,2022-03-24T00:05:07Z,Unknown,1,Answered,DC_kwDOAnasMc4AJpFZ,Unknown,Please note that the closing date for comments on this proposal is **April 14th**. 
Relationships between artifacts in AWF working groups,D_kwDOAnasMc4AP66E,2022-03-24T00:05:07Z,Unknown,1,Answered,DC_kwDOAnasMc4AK8gn,Unknown,"Now that the scope for Open AD Kit 2.0 has been determined, and there were no objections to the approach suggested above, we can now continue with adoption of a ConOps/OpsCon approach to developing Open AD Kit 2.0."
Autoware.universe install fail on Jetson Xavier platform,D_kwDOAnasMc4AP66F,2022-03-25T11:49:53Z,jason914,8,Answered,,,
Autoware.universe install fail on Jetson Xavier platform,D_kwDOAnasMc4AP66F,2022-03-25T11:49:53Z,jason914,8,Answered,DC_kwDOAnasMc4AJTBO,kenji-miyake,"Unfortunately, we don't support Jetson and haven't tested it yet.
But it seems `pip` isn't set up correctly. Could you manually run `pip3 install ansible`?"
Autoware.universe install fail on Jetson Xavier platform,D_kwDOAnasMc4AP66F,2022-03-25T11:49:53Z,jason914,8,Answered,DC_kwDOAnasMc4AJX6i,jason914,"Dear Kenji,

Thank you about your reply.
I tried the ""pip3 install  ansible"". 
It only fix my Q1 question.
But the Q2 still have problem.
It show same error log.
I will search the other docker image that used on Jetson Xavier.

Best regards

-Shu-Kang"
Autoware.universe install fail on Jetson Xavier platform,D_kwDOAnasMc4AP66F,2022-03-25T11:49:53Z,jason914,8,Answered,DC_kwDOAnasMc4AJYD8,kenji-miyake,"Could you try the following commands? I guess your docker isn't installed correctly.

```
docker run --rm -it hello-world # Without Autoware
docker run --rm -it ghcr.io/autowarefoundation/autoware-universe:latest-arm64 # Without rocker
```"
Autoware.universe install fail on Jetson Xavier platform,D_kwDOAnasMc4AP66F,2022-03-25T11:49:53Z,jason914,8,Answered,DC_kwDOAnasMc4AJajp,jason914,"Dear Kenji,

Thank you about your reply.
They are work about your last mail commands.

Because I need to use GPU.
I tried following command on Jetson Xavier.
_docker run **--gpus all** --rm -it ghcr.io/autowarefoundation/autoware-universe:latest-arm64_
It seem have CUDA version problem.
Now Nvidia only support Jetpack 4.x (Ubunut 18.04, CUDA 10.2).
My Xavier use Jetpack 4.4 (Ubunut 18.04, CUDA 10.2).
The ghcr.io/autowarefoundation/autoware-universe:latest-arm64 use CUDA 11.4.
I think, It have conflict between CUDA 10.2 and CUDA 11.4.

(My test log start)
`nvidia@xavier:~$ docker run --rm -it hello-world
Unable to find image 'hello-world:latest' locally
latest: Pulling from library/hello-world
7050e35b49f5: Pull complete 
Digest: sha256:bfea6278a0a267fad2634554f4f0c6f31981eea41c553fdf5a83e95a41d40c38
Status: Downloaded newer image for hello-world:latest

Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the ""hello-world"" image from the Docker Hub.
    (arm64v8)
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
 https://hub.docker.com/

For more examples and ideas, visit:
 https://docs.docker.com/get-started/

nvidia@xavier:~$ 

nvidia@xavier:~$ docker run --rm -it ghcr.io/autowarefoundation/autoware-universe:latest-arm64
root@7b20cb7db353:/autoware# exit
exit

nvidia@xavier:~$ docker run --gpus all --rm -it ghcr.io/autowarefoundation/autoware-universe:latest-arm64
docker: Error response from daemon: OCI runtime create failed: container_linux.go:367: starting container process caused: process_linux.go:495: container init caused: Running hook #0:: error running hook: exit status 1, stdout: , stderr: exec command: [/usr/bin/nvidia-container-cli --load-kmods configure --ldconfig=@/sbin/ldconfig.real --device=all --compute --utility --require=cuda>=11.4 --pid=11118 /home/nvidia/hard_disk/docker/overlay2/56314ac7cf30ed97446bf1d1247d3cfe10f4fb1f48fa4f79c4bcafe4a81db7bd/merged]
nvidia-container-cli: requirement error: unsatisfied condition: cuda >= 11.4: unknown.

`
(My test log end)

Best regards

-Shu-Kang
"
Autoware.universe install fail on Jetson Xavier platform,D_kwDOAnasMc4AP66F,2022-03-25T11:49:53Z,jason914,8,Answered,DC_kwDOAnasMc4AJakX,kenji-miyake,"Thank you for your report.
But unfortunately, in that case, it's not the problem of Autoware but Jetson/CUDA's one.
Could you google for some references and try to find a solution?

If some modifications are required to Autoware, it might be accepted."
Autoware.universe install fail on Jetson Xavier platform,D_kwDOAnasMc4AP66F,2022-03-25T11:49:53Z,jason914,8,Answered,DC_kwDOAnasMc4AJwW6,mitsudome-r,"Maybe you can check this Docker file to create your own image for Jetson + Galactic, and setup autoware with it."
Autoware.universe install fail on Jetson Xavier platform,D_kwDOAnasMc4AP66F,2022-03-25T11:49:53Z,jason914,8,Answered,DC_kwDOAnasMc4AJ3Bi,mitsudome-r,https://github.com/dusty-nv/jetson-containers
Autoware.universe install fail on Jetson Xavier platform,D_kwDOAnasMc4AP66F,2022-03-25T11:49:53Z,jason914,8,Answered,DC_kwDOAnasMc4AJwje,mitsudome-r,cc. @esteve 
Autoware.universe install fail on Jetson Xavier platform,D_kwDOAnasMc4AP66F,2022-03-25T11:49:53Z,jason914,8,Answered,DC_kwDOAnasMc4AJ3Kv,esteve,"I'm going to try this guide https://github.com/NVIDIA/nvidia-docker/wiki/NVIDIA-Container-Runtime-on-Jetson#enabling-jetson-containers-on-an-x86-workstation-using-qemu and see if I can run Jetpack (the Jetson OS) on qemu. Given the lack of stock and how long it'd take to ship a spare Jetson from someone else, this seems the only viable option."
Autoware.universe install fail on Jetson Xavier platform,D_kwDOAnasMc4AP66F,2022-03-25T11:49:53Z,jason914,8,Answered,DC_kwDOAnasMc4AJ5OI,esteve,I've created #190 to track this work
Autoware.universe install fail on Jetson Xavier platform,D_kwDOAnasMc4AP66F,2022-03-25T11:49:53Z,jason914,8,Answered,DC_kwDOAnasMc4AKMvy,esteve,"According to https://github.com/orgs/autowarefoundation/discussions/255#discussioncomment-2664151, Autoware runs fine on Jetpack 5.0. @jason914 could you upgrade and see if it works for you? Thanks."
Autoware.universe install fail on Jetson Xavier platform,D_kwDOAnasMc4AP66F,2022-03-25T11:49:53Z,jason914,8,Answered,DC_kwDOAnasMc4AKM2M,raminterpl,"@jason914 : What is your Name in Discord. i can connect to chat to discuss more 
on this issue"
Autoware.universe install fail on Jetson Xavier platform,D_kwDOAnasMc4AP66F,2022-03-25T11:49:53Z,jason914,8,Answered,DC_kwDOAnasMc4AKWCP,Sharrrrk,"@jason914 
Just tested using Jetson AGX Xavier with JetPack 5.0 (Ubuntu 20.04) and latest arm64 docker image, after a minor fix [869](https://github.com/autowarefoundation/autoware.universe/pull/869), build success without errors.
`Summary: 195 packages finished [1h 54min 26s]Summary: 195 packages finished [1h 54min 26s]`

CUDA and OS version as below:
```
nv@xavier-5:~$ uname -a
Linux xavier-5 5.10.65-tegra autowarefoundation/autoware.ai#2455 SMP PREEMPT Wed Apr 6 11:45:49 PDT 2022 aarch64 aarch64 aarch64 GNU/Linux
nv@xavier-5:~$ nvcc --version
nvcc: NVIDIA (R) Cuda compiler driver
Copyright (c) 2005-2021 NVIDIA Corporation
Built on Thu_Nov_11_23:44:05_PST_2021
Cuda compilation tools, release 11.4, V11.4.166
Build cuda_11.4.r11.4/compiler.30645359_0
```"
Autoware.universe install fail on Jetson Xavier platform,D_kwDOAnasMc4AP66F,2022-03-25T11:49:53Z,jason914,8,Answered,DC_kwDOAnasMc4AKXt9,jason914,"Hi Sharrrrk,

Because my camera driver base on Jetpack 4.4 (Ubunut 18.04, CUDA 10.2) now.
I  found jatson.containers https://github.com/dusty-nv/jetson-containers/tree/56bdf7e31037b308b6ef3039175c80a64e5e9d81
The jteson-container(dustynv/ros:galactic-ros-base-l4t-r32.4.4) meet my request.
I will use the jetson-containers.
Thank you very much.

Best regards.

-Jason
"
Autoware.universe install fail on Jetson Xavier platform,D_kwDOAnasMc4AP66F,2022-03-25T11:49:53Z,jason914,8,Answered,DC_kwDOAnasMc4AW7BQ,major2012ye,"Hi,@Sharrrrk,I noticed your answer about the jetson AGX.After you compiled,did you test the examples in the turtials。for example,the planning simulation in ad-hoc foder.I run this example,and it can't run normally."
2022-03-29 ODD working group weekly meeting (86),D_kwDOAnasMc4AP66G,2022-03-28T09:54:07Z,Igata-ctrl,0,Unanswered,,,
2022-03-16 Simulation Working Group meeting,D_kwDOAnasMc4AP66H,2022-03-28T10:57:12Z,WJaworskiRobotec,0,Unanswered,,,
"Getting daily ""Run failed: sync-files - main (2a39743)"" emails after forking autowarefoundation/.github",D_kwDOAnasMc4AP66I,2022-03-29T01:12:29Z,Unknown,1,Answered,,,
"Getting daily ""Run failed: sync-files - main (2a39743)"" emails after forking autowarefoundation/.github",D_kwDOAnasMc4AP66I,2022-03-29T01:12:29Z,Unknown,1,Answered,DC_kwDOAnasMc4AJYB5,kenji-miyake,"@LalithVipulananthan You don't have to run this workflow on your fork, so you should disable this workflow.
![image](https://user-images.githubusercontent.com/31987104/160522208-fe6089f5-b6c5-48e0-b5cf-fff7bc5ed126.png)

Or you can disable the entire GitHub Actions on your fork.
![image](https://user-images.githubusercontent.com/31987104/160522260-c58b5479-2b6e-4eea-96f8-3be0fa9c4957.png)
"
"Getting daily ""Run failed: sync-files - main (2a39743)"" emails after forking autowarefoundation/.github",D_kwDOAnasMc4AP66I,2022-03-29T01:12:29Z,Unknown,1,Answered,DC_kwDOAnasMc4AJYai,Unknown,"@kenji-miyake Thank you very much! I disabled all GitHub actions for my fork and the problem has been resolved! 😄 

Is this a problem that other contributors may also experience when forking autoware repositories, or is a problem specific to the .github repo?"
"Getting daily ""Run failed: sync-files - main (2a39743)"" emails after forking autowarefoundation/.github",D_kwDOAnasMc4AP66I,2022-03-29T01:12:29Z,Unknown,1,Answered,DC_kwDOAnasMc4AJYeX,kenji-miyake,"There is a related issue here. https://github.com/autowarefoundation/autoware.universe/issues/319
Generally scheduled workflows are disabled when you fork it, but for some reason sometimes it will be activated. (Probably when the workflow file is updated? :thinking: )"
Q&A - eSync Alliance presentation,D_kwDOAnasMc4AP66J,2022-03-29T02:50:33Z,Unknown,1,Answered,,,
Q&A - eSync Alliance presentation,D_kwDOAnasMc4AP66J,2022-03-29T02:50:33Z,Unknown,1,Answered,DC_kwDOAnasMc4AJpX5,Unknown,"Would it be possible to clarify exactly what is meant by ""Includes license for use in development and demonstration"" on slide 9 please? 

For example, if an AWF member was working with a bus manufacturer who was using Autoware, but not an AWF member, could the eSync PoC still be used under the proposed license?"
Q&A - eSync Alliance presentation,D_kwDOAnasMc4AP66J,2022-03-29T02:50:33Z,Unknown,1,Answered,DC_kwDOAnasMc4ALpmY,Unknown,"Questions were answered in this issue: https://github.com/autowarefoundation/autoware-projects/issues/33

> Q: Confirm the situation around eSync's license for non-AWF members - is there any open source or free tier solution?
> A: Since the Autoware project usage is not limited to only AWF members, non-AWF members will be made available to use eSync's OTA capability, once it's implemented in the Open AD Kit. This is a general rule of thumb but technicalities will be detailed once the implementation is completed.
> 
> Q: Confirm how AWF members will get access to eSync's solution
> A: eSync's SDK is currently running on major public cloud vendors (such as AWS, Microsoft Azure, Google Cloud). For AWF members to access the solution, a separate SDK (with the same capabilities) will be made available to use through AWF hosted cloud instances"
Q&A - SUSE presentation,D_kwDOAnasMc4AP66K,2022-03-29T03:19:43Z,Unknown,2,Answered,,,
Q&A - SUSE presentation,D_kwDOAnasMc4AP66K,2022-03-29T03:19:43Z,Unknown,2,Answered,DC_kwDOAnasMc4AJYOi,kei-t4,"Currently, Open AD Kit WG has its software stack. The most of it is developed by SOAFEE, then the reference implementation is named EWAOL.
So SUSE's initial plan is to have k3s integrated in EWAOL.
Is my understanding correct?

This question is a subsequent of No 10 in [SUSE follow-up Q&A.xlsx](https://github.com/autowarefoundation/autoware/files/8367768/SUSE.follow-up.Q.A.xlsx)"
Q&A - SUSE presentation,D_kwDOAnasMc4AP66K,2022-03-29T03:19:43Z,Unknown,2,Answered,DC_kwDOAnasMc4AJmIY,afaerber,"My assumption is that K3s is already integrated into Yocto based EWAOL. @mak3r would have more details on that (compare question 6).

It is also possible to use K3s on other Linux distros of your choice. SOAFEE's policy is to contribute to upstream projects, so it'll be a matter of which version you use and not of where you get it from."
Q&A - SUSE presentation,D_kwDOAnasMc4AP66K,2022-03-29T03:19:43Z,Unknown,2,Answered,DC_kwDOAnasMc4AJnjN,kei-t4,"I see, thanks!
My concern was that Open AD Kit would have another software stack variants, so k3s already included into EWAOL sounds good. "
Q&A - SUSE presentation,D_kwDOAnasMc4AP66K,2022-03-29T03:19:43Z,Unknown,2,Answered,DC_kwDOAnasMc4AJjoI,Unknown,"@mak3r @shpwrck Hi guys, I just wanted to follow up about question 9 on the spreadsheet above (I think some kind of visual was needed to answer this?), as well as the additional question from @kei-t4 above. Cheers!
"
Q&A - SUSE presentation,D_kwDOAnasMc4AP66K,2022-03-29T03:19:43Z,Unknown,2,Answered,DC_kwDOAnasMc4AJnFh,afaerber,"Regarding question 9:

> The attached image (see picture 1 on the right) is an example of an ADK hardware/software block diagram, both Edge and Cloud-side. It would be appreciated if you could indicate any parts that can be achieved using solutions from SUSE. I would like to understand what is in scope and out of scope for SUSE. Also it would be very helpful if you could describe the benefit we would have by implementing SUSE's solutions.

I spot in the diagram:

- AWS G5g cloud instance with NVIDIA T4G GPU:
  - [SUSE Linux Enterprise Server on Arm](https://www.suse.com/products/arm/) 15 SP3 runs on AWS Graviton2; theoretically also [SUSE Linux Enterprise High Performance Computing](https://www.suse.com/products/server/hpc/) 15 SP3 and [SLE Micro](https://www.suse.com/products/micro/) 5.1, but possibly not yet conveniently on the AWS Marketplace.
  - NVIDIA offers GPU drivers and CUDA stack for SUSE customers as an opt-in SLE Module.
  - [SUSE Manager](https://www.suse.com/products/suse-manager/) target support is available for updating etc.
- ADLINK AVA AP1 with NVIDIA RTX5000 GPU:
  - SUSE Linux Enterprise Server on Arm 15 SP3 and SLE Micro 5.1 run on Ampere Altra and are being tested on AVA Developer Platform; for Automotive QM Linux variants or safety certifications talk to @joesusecom and/or SUSE Embedded Sales.
  - NVIDIA CUDA module for SLE
  - SUSE Manager target support for SLE
  - Out of scope would be the NXP S32S micro-controller and Zephyr RTOS.
- Container runtime (not depicted):
  - **[K3s](https://www.suse.com/products/k3s/)** is a light-weight Kubernetes container orchestrator for Edge systems and can run on top of SLE, Ubuntu and presumably Amazon Linux (@mak3r? @shpwrck?), as well as EWAOL and other third-party Linux distros.
    - Currently out of scope would be deployment of Zephyr/RTOS firmware updates (non-containers) via any Kubernetes orchestrator, whether K3s or otherwise.
    If Linux/RTOS interactions are relevant to Tier IV, as member they can propose such use cases to SOAFEE (preliminarily via Cloud Native Dev working group and Google Docs, in the future via Jira tickets and System Architecture working group).
  - [SUSE Rancher](https://www.suse.com/products/suse-rancher/) 2.6 management solutions work across RKE(2), K3s, Amazon EKS and further third-party Kubernetes runtimes (compare slide 6).
- Container images (A, B):
  - [SUSE Linux Enterprise Base Container Images](https://www.suse.com/products/base-container-images/) can be pulled from https://registry.suse.com/ as base image for containerized applications.
    - Currently out of scope are Autoware, ROS2 and Cyclone DDS.
      - Could be packaged and made available by third-parties via [SUSE Package Hub](https://packagehub.suse.com/) (slide 5).
        - During a SUSE Hackweek a few years back I personally started some ROS and ROS2 packaging for openSUSE:
        https://build.opensuse.org/project/show/home:a_faerber:ros:ros2
        https://build.opensuse.org/project/show/home:a_faerber:ros
      - Third-parties could host their own BCI-derived container images themselves (instead of or in addition to making packages available).
  - ( [Open Build Service](https://openbuildservice.org/) client&server or Geckito [pbuild](https://www.geckito.org/pages/pbuild.html) tool ) and/or [Kiwi](https://github.com/OSInside/kiwi) tool can be used to build container images.
  - [Fleet](https://github.com/rancher/fleet) can be used to deploy containers (bundles) via GitOps.
  - [NeuVector](https://neuvector.com/) (recently acquired and open-sourced by SUSE) can be used to scan container images; application-level firewall functionality at runtime may still require adaptation for K3s.

Further potentially applicable components are shown on slides 6-11.

Now, not sure what you mean with ""_implementing SUSE's solutions_""? I'm guessing you meant adopting Kubernetes over Docker?

Christophe had pointed out on slide 10 that you'd need to author a ([Helm](https://helm.sh/)) **Deployment Chart** for your containers. Instead of running four containers interactively in terminal windows using Docker for each (https://gitlab.com/autowarefoundation/autoware_reference_design/-/blob/main/docs/Appendix/Open-AD-Kit-Start-Guide/run-autoware.md / https://github.com/autowarefoundation/autoware-documentation/blob/main/docs/installation/autoware/docker-installation.md), you can then deploy the whole pod with multiple containers at once to a cluster (with potentially multiple nodes) using a single Kubernetes command. Kubernetes as container orchestrator may even be able to use dockerd as container runtime backend, so should rather be considered a more powerful alternative to Docker Swarm. Essentially, Kubernetes uses YAML text files (e.g., `kubectl apply -f foo.yaml`), and Helm adds some more magic around that IIUC. Once you have your config ready, you should be able to deploy on virtually any Kubernetes cluster - no special implementation for SUSE needed.

SOAFEE members will be looking into implementing additional features for K3s, Container Network Interfaces (abstraction of inter-container networking across cluster nodes) and other container runtime components as needed for mixed-critical workloads. For example, allowing individual containers in a pod to specify that they want the runtime to execute them with real-time process priority (for PREEMPT_RT scheduler). Or how to best deal with time-critical Ethernet TSN or CAN network traffic into and out of containers. Deployment Charts making use of such new features may then need to require newer versions of Kubernetes to ensure config settings get applied as expected.

Hope that helps."
Autonomy Software WG Meeting 2022/04/05,D_kwDOAnasMc4AP66L,2022-03-29T14:13:56Z,BonoloAWF,2,Answered,,,
Autonomy Software WG Meeting 2022/04/05,D_kwDOAnasMc4AP66L,2022-03-29T14:13:56Z,BonoloAWF,2,Answered,DC_kwDOAnasMc4AJkik,xmfcx,Interplai will make a presentation on localization.
Autonomy Software WG Meeting 2022/04/05,D_kwDOAnasMc4AP66L,2022-03-29T14:13:56Z,BonoloAWF,2,Answered,DC_kwDOAnasMc4AJkl1,xmfcx,@xmfcx assign issues on universe to projects.
How to avoid the DCO check failing when making commits via the GitHub website?,D_kwDOAnasMc4AP66M,2022-03-30T02:25:29Z,Unknown,1,Answered,,,
How to avoid the DCO check failing when making commits via the GitHub website?,D_kwDOAnasMc4AP66M,2022-03-30T02:25:29Z,Unknown,1,Answered,DC_kwDOAnasMc4AJaKU,kenji-miyake,"@LalithVipulananthan  Seeing these two PRs, it seems either the Author or Commiter should match the signed email address.
https://github.com/autowarefoundation/.github/pull/9
https://github.com/autowarefoundation/.github/pull/10 (I used `git commit --amend` for this.)

If you set your email public, you can select what email address to use for your commit.
https://github.com/autowarefoundation/.github/pull/12

Or if you sign with the GitHub email address instead of the company one, the DCO check will pass.
https://github.com/autowarefoundation/.github/pull/13"
How to avoid the DCO check failing when making commits via the GitHub website?,D_kwDOAnasMc4AP66M,2022-03-30T02:25:29Z,Unknown,1,Answered,DC_kwDOAnasMc4AJaKm,kenji-miyake,"Or you can be sure there is no problem, you can force pass the DCO check by clicking this.
![image](https://user-images.githubusercontent.com/31987104/160744398-6a377616-a796-4adf-88ee-08fff5c016db.png)

For example:
- Small docs changes probably don't have to be signed.
- You don't have to sign all commits because we squash them.
  - If there are multiple authors in one PR, it would be better to sign all commits to distinguish them."
map_loader package not working in UTM coordinates,D_kwDOAnasMc4AP66N,2022-03-30T09:05:06Z,meliketanrikulu,2,Answered,,,
map_loader package not working in UTM coordinates,D_kwDOAnasMc4AP66N,2022-03-30T09:05:06Z,meliketanrikulu,2,Answered,DC_kwDOAnasMc4AJao4,meliketanrikulu,Also linked issue: https://github.com/autowarefoundation/autoware.universe/issues/607
map_loader package not working in UTM coordinates,D_kwDOAnasMc4AP66N,2022-03-30T09:05:06Z,meliketanrikulu,2,Answered,DC_kwDOAnasMc4AJbHo,mitsudome-r,Maybe relevant discussion: https://github.com/autowarefoundation/autoware/discussions/112
Open AD Kit WG Meeting 2022/03/31,D_kwDOAnasMc4AP66O,2022-03-30T11:27:52Z,Unknown,0,Unanswered,,,
Core/Universe Planning meeting 2022/03/30,D_kwDOAnasMc4AP66P,2022-03-30T13:58:53Z,mitsudome-r,0,Unanswered,,,
Add YOLO Custom Dataset Handler Script,D_kwDOAnasMc4AP66Q,2022-03-30T14:58:54Z,goktugyildirim,0,Unanswered,,,
2022-03-30 Simulation Working Group meeting,D_kwDOAnasMc4AP66R,2022-03-30T15:30:41Z,WJaworskiRobotec,0,Unanswered,,,
PNC::obstacle_stop_planner::about calculate obstacle,D_kwDOAnasMc4AP66S,2022-03-31T12:31:21Z,JokerWhy233,2,Answered,,,
PNC::obstacle_stop_planner::about calculate obstacle,D_kwDOAnasMc4AP66S,2022-03-31T12:31:21Z,JokerWhy233,2,Answered,DC_kwDOAnasMc4AJeJU,kenji-miyake,@yukkysaito @TakaHoribe Could you answer this or mention appropriate people? :pray: 
PNC::obstacle_stop_planner::about calculate obstacle,D_kwDOAnasMc4AP66S,2022-03-31T12:31:21Z,JokerWhy233,2,Answered,DC_kwDOAnasMc4AJ973,TakaHoribe,"@JokerWhy233 
The current design concept is like below.

First, these two types of information have the following characteristics:

 - Dynamic Object (`/perception/obstacle_segmentation/pointcloud`): has time-series information through clustering and tracking, allowing estimation of velocity. On the other hand, positional accuracy is generally poor compared to the `Object Segmented Points` due to the performance of clustering algorithms.
 - Object Segmented Points (`/perception/object_recognition/objects`): is the sensor point cloud information segmented as an obstacle, and the position information is very accurate. On the other hand, speed estimation is not that easy.

To efficiently use these advantages, the `obstacle_stop_planner` first calculates the position where the planned-velocity is inserted from the `/perception/obstacle_segmentation/pointcloud`, and then the velocity to be inserted is calculated using ` /perception/object_recognition/objects`.

Note that it might be not ideal, and should be discussed for the global design with sensing/perception/planning components."
Racing WG - Meeting 03/31/2022,D_kwDOAnasMc4AP66T,2022-03-31T13:43:52Z,JohannesBetz,0,Unanswered,,,
2022-04-05 ODD working group weekly meeting (87),D_kwDOAnasMc4AP66W,2022-04-04T09:16:50Z,Igata-ctrl,0,Unanswered,,,
ekf_localizer latency issue,D_kwDOAnasMc4AP66X,2022-04-04T16:10:51Z,meliketanrikulu,1,Answered,,,
ekf_localizer latency issue,D_kwDOAnasMc4AP66X,2022-04-04T16:10:51Z,meliketanrikulu,1,Answered,DC_kwDOAnasMc4AJkBZ,yukkysaito,"Could you please give me a rosbag and branch that I can reproduce? 
My guess is that there is a topic with zero speed.  and If the deviation is too large, the Mahalanobis distance becomes too large and the velocity is determined to be an outlier, then the ekf pose seems to be catching up input pose."
ekf_localizer latency issue,D_kwDOAnasMc4AP66X,2022-04-04T16:10:51Z,meliketanrikulu,1,Answered,DC_kwDOAnasMc4AJkBh,yukkysaito,discord link : https://discord.com/channels/953808765935816715/953897341180604456/960809428754505748
ekf_localizer latency issue,D_kwDOAnasMc4AP66X,2022-04-04T16:10:51Z,meliketanrikulu,1,Answered,DC_kwDOAnasMc4AJkMM,meliketanrikulu,"My rosbag file is here : https://drive.google.com/drive/folders/1vMp9avkR1yvnb6LGaicmvI0PCYUt5ejR?usp=sharing

Where /test/twist_with_covariance_stamped and /test/pose_with_covariance_stamped are topics to which ekf is subscribed to."
ekf_localizer latency issue,D_kwDOAnasMc4AP66X,2022-04-04T16:10:51Z,meliketanrikulu,1,Answered,DC_kwDOAnasMc4AJkNf,TakaHoribe,"@meliketanrikulu Thank you for posting the issue. I'll check it, but the rosbag seems to have limited access. Could you make it public?"
ekf_localizer latency issue,D_kwDOAnasMc4AP66X,2022-04-04T16:10:51Z,meliketanrikulu,1,Answered,DC_kwDOAnasMc4AJkN9,TakaHoribe,"And the `ekf_localizer` prints useful information for debugging such as processing time or input delay, Mahalanobis judge, etc when the parameter `show_debug_info_` is true (See [here](https://github.com/autowarefoundation/autoware.universe/blob/main/localization/ekf_localizer/src/ekf_localizer.cpp#L28)). It is nice if you can share the data with `show_debug_info_ = true`. Thank you."
ekf_localizer latency issue,D_kwDOAnasMc4AP66X,2022-04-04T16:10:51Z,meliketanrikulu,1,Answered,DC_kwDOAnasMc4AJkOM,meliketanrikulu,I updated link : https://drive.google.com/drive/folders/1vMp9avkR1yvnb6LGaicmvI0PCYUt5ejR?usp=sharing
ekf_localizer latency issue,D_kwDOAnasMc4AP66X,2022-04-04T16:10:51Z,meliketanrikulu,1,Answered,DC_kwDOAnasMc4AJkPO,meliketanrikulu,"I set show_debug_info to true and looked at the results. I observed that the processing times increased at the points where the positions entered into and published from ekf were opened. At these points, I see that both measurement and prediction time increase."
ekf_localizer latency issue,D_kwDOAnasMc4AP66X,2022-04-04T16:10:51Z,meliketanrikulu,1,Answered,DC_kwDOAnasMc4AJkSQ,yukkysaito,"@TakaHoribe Thank you
Can I leave this issue to you? If you are busy, I will investigate."
ekf_localizer latency issue,D_kwDOAnasMc4AP66X,2022-04-04T16:10:51Z,meliketanrikulu,1,Answered,DC_kwDOAnasMc4AJkVc,TakaHoribe,"@meliketanrikulu Some coments about the cause:

 - The twist message recorded in the rosbag seems to be defined in the map frame (since it has a large velocity for y-axle). The twist must be in the base_link frame. This may explain the behavior of the large deviation of the poses depending on the direction of attitude.
 - In your launch config, the parameters for the state extension is same as a default. I've never seen the issue about the processing time in default parameter, so I doubt your PC environment or compile option (did you build the autoware with `Release` option?. (Installation guide is [here](https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/source-installation/#how-to-set-up-a-workspace) and the build command should be like this `colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release`). Otherwise, the processing time of the EKF is super slow.

@yukkysaito thanks. I'll take it. "
ekf_localizer latency issue,D_kwDOAnasMc4AP66X,2022-04-04T16:10:51Z,meliketanrikulu,1,Answered,DC_kwDOAnasMc4AJkbc,meliketanrikulu,"Thanks for your answer. I will check the Twist message.
"
ekf_localizer latency issue,D_kwDOAnasMc4AP66X,2022-04-04T16:10:51Z,meliketanrikulu,1,Answered,DC_kwDOAnasMc4AJl7G,meliketanrikulu,"Using ins, I generate a twist message using the base_link's velocities relative to the map. ins fixed to the vehicle. In this case, how can I generate a twist message based on the base_link? Aren't the velocities always zero according to base_link? Thanks for your answer"
Open AD Kit WG Meeting 2022/04/07,D_kwDOAnasMc4AP66Y,2022-04-05T02:15:12Z,Unknown,0,Unanswered,,,
ModelZoo artifacts: switch to git-lfs,D_kwDOAnasMc4AP66Z,2022-04-05T09:13:59Z,ambroise-arm,6,Answered,,,
ModelZoo artifacts: switch to git-lfs,D_kwDOAnasMc4AP66Z,2022-04-05T09:13:59Z,ambroise-arm,6,Answered,DC_kwDOAnasMc4AJkeT,xmfcx,"# Pricing
> My understanding is that a custom lfs hosting platform can be configured for the repository. Looking at the GitHub pricing for lfs, it feels like it would be the best economic decision to indeed have a custom hosting, because both of storage and bandwidth. I don’t know what is currently done and it will need to be discussed with the relevant people first.

First for current pricing information:
- https://docs.github.com/en/billing/managing-billing-for-git-large-file-storage/about-billing-for-git-large-file-storage#about-billing-for-git-large-file-storage
  - One data pack costs $5 per month, and provides a monthly quota of 50 GB for bandwidth and 50 GB for storage.
- https://aws.amazon.com/s3/pricing/
  - First 50 TB / Month : $0.023 per GB (50 GB: $1.15)
So S3 is definitely on the cheaper side.

![Screenshot from 2022-04-05 17-14-29](https://user-images.githubusercontent.com/10751153/161774110-9f211f76-1a1f-40b4-a3fe-4bfd1fb70c56.png)

Here I've tried to include transfers too and very similar pricing.

Also it is possible to host Gitlab on custom dedicated servers and have custom LFS (I tried this before). But it is not possible with Github, we have to use their solutions.

# Functionality

`git-lfs` enables to preserve full history. But it prevents us from being able to do finer control over our data.

We cannot remove some old useless files without overriding those commits and ruining the git history.
And for this reason it only grows in size.

@ambroise-arm said:
> Finer-grained updates. If only the networks that had a modification on the ModelZoo side are updated in Autoware, then it will be a smaller delta to be downloaded by the user compared to the full archive currently held in the bucket.

I don't get this part, git lfs doesn't have binary delta capability, it hosts all large binary files as they are, you still download full files even if binaries are slightly different.

Also there is this thing with git-lfs that [it doesn't work with ssh protocol.](https://github.com/git-lfs/git-lfs/issues/1044#issuecomment-188893647) which make it very annoying when moving the repos to a different configuration like switching https to ssh for keys.

For online rant on git-lfs: https://news.ycombinator.com/item?id=27134972

I would like to use S3 for hosting large files and their interface for keeping the portability. And not be tied to 'git-lfs'."
ModelZoo artifacts: switch to git-lfs,D_kwDOAnasMc4AP66Z,2022-04-05T09:13:59Z,ambroise-arm,6,Answered,DC_kwDOAnasMc4AJkoB,xmfcx,@esteve would like to try https://git-annex.branchable.com/special_remotes/S3/ on this.
ModelZoo artifacts: switch to git-lfs,D_kwDOAnasMc4AP66Z,2022-04-05T09:13:59Z,ambroise-arm,6,Answered,DC_kwDOAnasMc4AJkwg,ambroise-arm,"> Also it is possible to host Gitlab on custom dedicated servers and have custom LFS (I tried this before). But it is not possible with Github, we have to use their solutions.

I see, that's not great.

> We cannot remove some old useless files without overriding those commits and ruining the git history.
And for this reason it only grows in size.

The S3 solution will also grow in size, because we probably want to keep some older versions of the artifacts (at least the ones used in previous tagged versions of autoware), but it may grow slower (because we may allow to remove artifacts only used in non-tagged autoware commits, at the cost of braking builds on those). So S3 can indeed be better for that, but not miraculous either.

> I don't get this part, git lfs doesn't have binary delta capability, it hosts all large binary files as they are, you still download full files even if binaries are slightly different.

Right. So this point is more about the current implementation/use we have of the S3 solution than S3 itself. Right now there are 2 files in the bucket: networks-aarch64.tar.gz and networks-x86_64.tar.gz that contain all the networks/backends combinations for each architecture. So a change such as ""adding a new network"" in ModelZoo leads to an effective re-download of every file.  
We could make the archives finer grained, such as one per network, containing all backends. Or even finer grained with one archive per file. But each step requires some more work to implement, and the full granularity sounds a lot like re-implementing the main git-lfs functionalities.  
So it could be done as follow-up work, but our S3 solution doesn't currently have that same granularity as git-lfs."
ModelZoo artifacts: switch to git-lfs,D_kwDOAnasMc4AP66Z,2022-04-05T09:13:59Z,ambroise-arm,6,Answered,DC_kwDOAnasMc4AJk_3,xmfcx,"> So this point is more about the current implementation/use we have of the S3 solution than S3 itself. Right now there are 2 files in the bucket: networks-aarch64.tar.gz and networks-x86_64.tar.gz that contain all the networks/backends combinations for each architecture.

I didn't realize this. The models should be compressed separately and kept in a folder like structure. Then download script could download the folder like in https://stackoverflow.com/a/46680575

Should be fairly simple. And for keeping older models and such, we can follow [what TF Model Zoo does](https://github.com/autowarefoundation/autoware/discussions/150#discussioncomment-2510812) and keep folders organized for versioning."
ModelZoo artifacts: switch to git-lfs,D_kwDOAnasMc4AP66Z,2022-04-05T09:13:59Z,ambroise-arm,6,Answered,DC_kwDOAnasMc4AJlAF,xmfcx,More on S3 folders: https://docs.aws.amazon.com/AmazonS3/latest/userguide/using-folders.html
ModelZoo artifacts: switch to git-lfs,D_kwDOAnasMc4AP66Z,2022-04-05T09:13:59Z,ambroise-arm,6,Answered,DC_kwDOAnasMc4AJkwl,ambroise-arm,cc @JWhitleyWork as you were part of earlier discussions
ModelZoo artifacts: switch to git-lfs,D_kwDOAnasMc4AP66Z,2022-04-05T09:13:59Z,ambroise-arm,6,Answered,DC_kwDOAnasMc4AJk_c,xmfcx,"Why not do what https://github.com/tensorflow/models/blob/master/research/object_detection/g3doc/tf2_detection_zoo.md does?

Have every model hosted compressed individually and versioned like that. And hosted not in git-lfs.

We could do the same on S3 Bucket [using folders](https://docs.aws.amazon.com/AmazonS3/latest/userguide/using-folders.html).

```
Model name                                                                                                                                                                  | Speed (ms) | COCO mAP | Outputs
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :--------: | :----------: | :-----:
[CenterNet HourGlass104 512x512](http://download.tensorflow.org/models/object_detection/tf2/20200713/centernet_hg104_512x512_coco17_tpu-8.tar.gz)                    | 70         | 41.9           | Boxes
[CenterNet HourGlass104 Keypoints 512x512](http://download.tensorflow.org/models/object_detection/tf2/20200711/centernet_hg104_512x512_kpts_coco17_tpu-32.tar.gz)                    | 76         | 40.0/61.4           | Boxes/Keypoints
[CenterNet HourGlass104 1024x1024](http://download.tensorflow.org/models/object_detection/tf2/20200713/centernet_hg104_1024x1024_coco17_tpu-32.tar.gz)               | 197       | 44.5           | Boxes
[CenterNet HourGlass104 Keypoints 1024x1024](http://download.tensorflow.org/models/object_detection/tf2/20200711/centernet_hg104_1024x1024_kpts_coco17_tpu-32.tar.gz)               | 211       | 42.8/64.5          | Boxes/Keypoints
[CenterNet Resnet50 V1 FPN 512x512](http://download.tensorflow.org/models/object_detection/tf2/20200711/centernet_resnet50_v1_fpn_512x512_coco17_tpu-8.tar.gz)     | 27         | 31.2           | Boxes
[CenterNet Resnet50 V1 FPN Keypoints 512x512](http://download.tensorflow.org/models/object_detection/tf2/20200711/centernet_resnet50_v1_fpn_512x512_kpts_coco17_tpu-8.tar.gz)     | 30         | 29.3/50.7         | Boxes/Keypoints
[CenterNet Resnet101 V1 FPN 512x512](http://download.tensorflow.org/models/object_detection/tf2/20200711/centernet_resnet101_v1_fpn_512x512_coco17_tpu-8.tar.gz)     | 34         | 34.2           | Boxes
[CenterNet Resnet50 V2 512x512](http://download.tensorflow.org/models/object_detection/tf2/20200711/centernet_resnet50_v2_512x512_coco17_tpu-8.tar.gz)     | 27         | 29.5           | Boxes
[CenterNet Resnet50 V2 Keypoints 512x512](http://download.tensorflow.org/models/object_detection/tf2/20200711/centernet_resnet50_v2_512x512_kpts_coco17_tpu-8.tar.gz)     | 30         | 27.6/48.2           | Boxes/Keypoints
[CenterNet MobileNetV2 FPN 512x512](http://download.tensorflow.org/models/object_detection/tf2/20210210/centernet_mobilenetv2fpn_512x512_coco17_od.tar.gz)     | 6         | 23.4           | Boxes
[CenterNet MobileNetV2 FPN Keypoints 512x512](http://download.tensorflow.org/models/object_detection/tf2/20210210/centernet_mobilenetv2fpn_512x512_coco17_kpts.tar.gz)     | 6         | 41.7           | Keypoints
```"
ModelZoo artifacts: switch to git-lfs,D_kwDOAnasMc4AP66Z,2022-04-05T09:13:59Z,ambroise-arm,6,Answered,DC_kwDOAnasMc4AJpsE,ambroise-arm,"(from https://github.com/autowarefoundation/autoware/discussions/150#discussioncomment-2510839):
> The models should be compressed separately and kept in a folder like structure. Then download script could download the folder like in https://stackoverflow.com/a/46680575

Downloading through the aws cli requires credentials, even when trying to download public files. Maybe it can be acceptable if a dedicated “public” role is created on the S3 side that can be publicly shared, and whose credentials can be hardcoded in the repo’s file. Or maybe something like this: https://selfscrum.medium.com/how-to-use-aws-cli-without-user-credentials-on-ec2-d686874a2a81, although I didn’t look into it in detail. And if it is not acceptable (or doable) then we can probably mimic the directory discovery by keeping an index file in each directory, listing the files of that directory. Handling the parsing of that index file would be something else to add to the download script to be written for autoware.

> Why not do what https://github.com/tensorflow/models/blob/master/research/object_detection/g3doc/tf2_detection_zoo.md does?

Absolutely. We are planning on formalizing the versioning of the ModelZoo repository (described in https://github.com/autowarefoundation/modelzoo/issues/63; I still need to edit it to reflect the transition to .universe and create a discussion for it in this repo, but I feel like that should happen after the present discussion is settled and the tvm_utility package ported to .universe). And that already plans for a folder-like structure in the bucket that would look like what is done for the tensorflow models, except with versions instead of dates as the folder name.

> Have every model hosted compressed individually and versioned like that.

That sounds good. We would need to think about the implementation. If we only update some of the files from one version to the next, how does a fresh download of the latest model know what to download? The file structure would be something like this (where version 2.0 only updated fileB):
```
/1.0/fileA
/1.0/fileB
/2.0/fileB
```
If autoware targets 2.0 files, we will want /1.0/fileA and /2.0/fileB to be downloaded.  
Maybe the index file described above can be the list of files that correspond to a targeted version instead of the files in a directory.
/1.0/idx.txt would list /1.0/fileA and /1.0/fileB. And /2.0/idx.txt would list /**1.0**/fileA and /2.0/fileB."
ModelZoo artifacts: switch to git-lfs,D_kwDOAnasMc4AP66Z,2022-04-05T09:13:59Z,ambroise-arm,6,Answered,DC_kwDOAnasMc4AJlyW,esteve,"@xmfcx the problem in my opinion is not about the storage medium, but it's more about how to distribute them when we have pieces of software that need them, hence why storing them somehow with Git (be it `git-lfs`, `git-annex`, etc.) solves this because we don't have to worry about integrating those files with how we distribute Autoware.

If we end up using some kind of script to download large files (instead of a git-based solution), we must make sure that it's consistent across all repos and files, otherwise we at risk of using different storage solutions, with different scripts, etc."
ModelZoo artifacts: switch to git-lfs,D_kwDOAnasMc4AP66Z,2022-04-05T09:13:59Z,ambroise-arm,6,Answered,DC_kwDOAnasMc4AJlz9,xmfcx,"@esteve I think for the repository it should be clear what kind of big files we are planning to store. And have them on a organized centralized place. And use git for anything else. For example I wouldn't be against git-lfs for usage for image files. Organizing them is always a hassle, they are relatively small and many in numbers and perfect for git-lfs.

But for point clouds and nn-models lets organize them somewhere else and provide links for those files or downloading one-liner scripts.

I am not opposed to using git-lfs with s3 on the same repository. This is not about inconsistency. It's about using the right tool for the right problem."
ModelZoo artifacts: switch to git-lfs,D_kwDOAnasMc4AP66Z,2022-04-05T09:13:59Z,ambroise-arm,6,Answered,DC_kwDOAnasMc4AJnKl,JWhitleyWork,"I don't quite understand how using `git-lfs` is not ""organized and centralized."" It keeps the files with the code, they are version-controlled, and you can download them (optionally) with just a `git lfs fetch <file-name>`. It isn't like they're all heaped in a big folder somewhere. They live in the same structure as the rest of the files. This is honestly the best part about `git-lfs`."
ModelZoo artifacts: switch to git-lfs,D_kwDOAnasMc4AP66Z,2022-04-05T09:13:59Z,ambroise-arm,6,Answered,DC_kwDOAnasMc4AJnO2,xmfcx,"@JWhitleyWork You are right that the files can be organized with `git-lfs` too. In fact [ONNX model zoo uses it](https://github.com/onnx/models#usage---git-lfs-). Although they seem to be [having second opinions because of the cost](https://github.com/onnx/models/issues/455#issuecomment-902029944).

This is also about balancing on how much history we want to preserve on these big files. If we are going to keep even the oldest versions available, then yes `git-lfs` will act same as storing them elsewhere.

But if we want to delete certain files, it is easy to do in traditional hosts. The file will just not be available anymore. But in `git-lfs`, if further commits were made, without rewriting the history, you cannot remove that file. I prefer having an option to just remove large files in expense of having some older git history state not functioning, while still keeping the commit sha's intact.

I think first we should look into what we are trying to store as big files. `.PCD` files and neural net models are the only instances I know so far.

For neural nets, i think holding them in folders and just providing readable links is the best solution. Similar to neural nets, we should also have a `.PCD` map database. We could handle it similarly to the neural nets and in the main repository, we would just link to these.

And for the small in size but large in count files like images, `git-lfs` can still be used. 

https://github.com/pytorch/hub is the most advanced example I could find for how large models can be hosted while being able to get contributions.

And [tensorflow zoo just does traditional hosting](https://github.com/tensorflow/models/blob/master/research/object_detection/g3doc/tf2_detection_zoo.md)."
ModelZoo artifacts: switch to git-lfs,D_kwDOAnasMc4AP66Z,2022-04-05T09:13:59Z,ambroise-arm,6,Answered,DC_kwDOAnasMc4AJn6A,esteve,"I gave `git-annex` a try, it looks promising, but not without its own caveats.

Pros:

- Supports different types of backends (e.g. S3)
- We can arbitrarily point to existing files on the web (e.g. https://github.com/esteve/git-annex-test contains a link to a Debian ISO)
- Integrated into the Git workflow, no need for special scripts for every new file we download
- Crossplatform (Linux, macOS, Windows)
- We can download specific files, without downloading all of them. Useful when we have multiple architectures and we are only interested on a handful (more for info https://git-annex.branchable.com/git-annex-get/)

Cons:

- Setup on GitHub requires more work because `git-annex` is not natively supported by GitHub
- Documentation is a bit hard to follow and sometimes confusing
- Making files available locally requires a separate command (`git annex get`, similar to `git lfs pull`)

In one of my tests, I have pushed the `git-annex` data to an S3 bucket, but I can't seem to be able to configure the region nor the name of the object in the bucket, not sure if it's because I didn't follow the documentation correctly or if it's a bug. Anyway, I've removed the bucket and will try again.

Overall, my first impressions are good, and seems to fix the issues that `git-lfs` has, while at the same time having more features (native support for S3 is huge plus in my opinion). I prefer this solution much more than every package having its own script for downloading files or having different storage mechanisms for different packages."
ModelZoo artifacts: switch to git-lfs,D_kwDOAnasMc4AP66Z,2022-04-05T09:13:59Z,ambroise-arm,6,Answered,DC_kwDOAnasMc4AKQCf,LucaFos,"I don't want to talk for other people, but after the messages on this page and discussing with @xmfcx and @ambroise-arm I think we're in a good position to decide that we want to go on with S3.
Can I ask if there's anyone who has any objection?"
ModelZoo artifacts: switch to git-lfs,D_kwDOAnasMc4AP66Z,2022-04-05T09:13:59Z,ambroise-arm,6,Answered,DC_kwDOAnasMc4AKRYY,esteve,I agree with using S3 folders.
Best practices for using Autoware.Auto packages in Autoware Core/Universe,D_kwDOAnasMc4AP66a,2022-04-05T23:41:13Z,HaoruXue,1,Answered,,,
Best practices for using Autoware.Auto packages in Autoware Core/Universe,D_kwDOAnasMc4AP66a,2022-04-05T23:41:13Z,HaoruXue,1,Answered,DC_kwDOAnasMc4AJlaz,kenji-miyake,"@angry-crab Could you answer something?
https://github.com/autowarefoundation/autoware.universe/issues/248#issuecomment-1078620033"
Best practices for using Autoware.Auto packages in Autoware Core/Universe,D_kwDOAnasMc4AP66a,2022-04-05T23:41:13Z,HaoruXue,1,Answered,DC_kwDOAnasMc4AJlcD,HaoruXue,Hi @kenji-miyake thank you for pointint out this issue. My takeaway from it is to port Autoware.Auto packages where necessary?
Best practices for using Autoware.Auto packages in Autoware Core/Universe,D_kwDOAnasMc4AP66a,2022-04-05T23:41:13Z,HaoruXue,1,Answered,DC_kwDOAnasMc4AJlcW,kenji-miyake,"> to port Autoware.Auto packages where necessary?

Yes, it is possible. But I guess there are a lot of dependencies, so how to port them cleanly should be discussed (in PRs?)."
Best practices for using Autoware.Auto packages in Autoware Core/Universe,D_kwDOAnasMc4AP66a,2022-04-05T23:41:13Z,HaoruXue,1,Answered,DC_kwDOAnasMc4AJlg4,angry-crab,"@HaoruXue Hi Haoru, just as you said, we have decide to do porting if necessary. You may open an issue for this and we can plan accordingly. "
Core/Universe Planning meeting 2022/04/06,D_kwDOAnasMc4AP66b,2022-04-06T13:40:46Z,mitsudome-r,0,Unanswered,,,
Autonomy Software WG Meeting 2022/04/12,D_kwDOAnasMc4AP66d,2022-04-11T05:15:26Z,BonoloAWF,0,Unanswered,,,
Detail about the scenario simulation,D_kwDOAnasMc4AP66e,2022-04-11T08:14:30Z,shmpwk,2,Answered,,,
Detail about the scenario simulation,D_kwDOAnasMc4AP66e,2022-04-11T08:14:30Z,shmpwk,2,Answered,DC_kwDOAnasMc4AJs3O,mitsudome-r,"Currently, there seems to have some issues with integration with the scenario simulator and Autoware Universe.
It seems like it is currently missing some dependent package, and once they are merged it should be fixed.

You can check the progress on the following issue: https://github.com/autowarefoundation/autoware.universe/issues/656
You wait for the PRs to be merged (probably not more than a week) or you can try the Setup instructions in [this PR](https://github.com/autowarefoundation/autoware_launch/pull/26) to try it out if you can't wait for it. "
Detail about the scenario simulation,D_kwDOAnasMc4AP66e,2022-04-11T08:14:30Z,shmpwk,2,Answered,DC_kwDOAnasMc4AJtE9,YoshinoriTsutake,"@shmpwk 
Thank you so much for getting interested in scenario_simulator_v2.
I hope [this link ](https://tier4.github.io/scenario_simulator_v2-docs/)would be helpful for you. "
2022-04-12 ODD working group weekly meeting (88),D_kwDOAnasMc4AP66f,2022-04-11T09:23:34Z,Igata-ctrl,0,Unanswered,,,
Issue about Launching a Docker container with rocker.,D_kwDOAnasMc4AP66g,2022-04-11T12:35:37Z,PengfeiLin0609,1,Answered,,,
Issue about Launching a Docker container with rocker.,D_kwDOAnasMc4AP66g,2022-04-11T12:35:37Z,PengfeiLin0609,1,Answered,DC_kwDOAnasMc4AJtN1,kenji-miyake,"@PengfeiLin0609 Hello, what happens if you run `docker run --rm -it ghcr.io/autowarefoundation/autoware-universe:latest` instead?"
Issue about Launching a Docker container with rocker.,D_kwDOAnasMc4AP66g,2022-04-11T12:35:37Z,PengfeiLin0609,1,Answered,DC_kwDOAnasMc4AJtOS,PengfeiLin0609,"Hi, thanks for your reply. Here is the result when I execute `docker run --rm -it ghcr.io/autowarefoundation/autoware-universe:latest`:
![image](https://user-images.githubusercontent.com/51280866/162744459-4ce1ce3a-0d62-406c-a087-b04ac7a1f41d.png)
"
Issue about Launching a Docker container with rocker.,D_kwDOAnasMc4AP66g,2022-04-11T12:35:37Z,PengfeiLin0609,1,Answered,DC_kwDOAnasMc4AJtOo,kenji-miyake,"Thank you! And how about `docker run --rm -it hello-world` or `docker run --rm -it ubuntu:latest`?
If it fails, it's probably your network problem."
Issue about Launching a Docker container with rocker.,D_kwDOAnasMc4AP66g,2022-04-11T12:35:37Z,PengfeiLin0609,1,Answered,DC_kwDOAnasMc4AJtO6,PengfeiLin0609,"It seems that I successfully run with these two codes......
![image](https://user-images.githubusercontent.com/51280866/162745521-3fe0f2cf-047e-4b2a-a9c6-e8844785a078.png)

"
Issue about Launching a Docker container with rocker.,D_kwDOAnasMc4AP66g,2022-04-11T12:35:37Z,PengfeiLin0609,1,Answered,DC_kwDOAnasMc4AJtRc,kenji-miyake,"Hmm, then it seems you cannot connect to `ghcr.io`. :thinking: 

The server is alive.
```sh-session
$ docker pull ghcr.io/autowarefoundation/autoware-universe
Using default tag: latest
latest: Pulling from autowarefoundation/autoware-universe
ea362f368469: Already exists
7d191f196220: Already exists
aa7738b2e0ac: Already exists
b68fde25dc8f: Already exists
f20eb7ebd4b8: Already exists
a664f4cd8a6a: Already exists
8cd367bf800d: Already exists
2ce797d833cf: Already exists
b209e397ac07: Already exists
06dacfc38860: Downloading [======================>                            ]    9.6MB/21.21MB
```

@PengfeiLin0609 Where do you live?"
Issue about Launching a Docker container with rocker.,D_kwDOAnasMc4AP66g,2022-04-11T12:35:37Z,PengfeiLin0609,1,Answered,DC_kwDOAnasMc4AJtVP,PengfeiLin0609,"China......I see, I thought I was using a VPN agent, but it actually doesn't work. Thank you for your answers, I really appreciate it."
Open AD Kit WG Meeting 2022/04/14,D_kwDOAnasMc4AP66h,2022-04-12T01:56:07Z,Unknown,1,Answered,,,
Open AD Kit WG Meeting 2022/04/14,D_kwDOAnasMc4AP66h,2022-04-12T01:56:07Z,Unknown,1,Answered,DC_kwDOAnasMc4AJ2yg,Unknown,"@xmfcx @mitsudome-r Just to check, is there an issue tracking the task to create a complete list of all topics/nodes in Autoware?"
Data recording tools,D_kwDOAnasMc4AP66i,2022-04-12T14:24:14Z,mitsudome-r,2,Answered,,,
Data recording tools,D_kwDOAnasMc4AP66i,2022-04-12T14:24:14Z,mitsudome-r,2,Answered,DC_kwDOAnasMc4AJvRc,TakaHoribe,"With option 1, it is difficult to reproduce all data even if Autoware is deterministic. Since a large part of Autoware's processing relies on previous values (e.g., low-pass filtering), all data must be saved from the time Autoware was started to completely reproduce the data offline. (I have already suffered from this problem many times.)
Also, it requires users to restart Autoware every time when the record is stopped or restarted, and this is not practical.

Option 2 sounds not practical as well due to the large quantity of data.

So, I recommend option 3.
"
Data recording tools,D_kwDOAnasMc4AP66i,2022-04-12T14:24:14Z,mitsudome-r,2,Answered,DC_kwDOAnasMc4AJvUB,kenji-miyake,"I generally agree with Taka and Mitsudome-san.

For debugging: Option 3
For data collection (for perception development): Option 1
"
Data recording tools,D_kwDOAnasMc4AP66i,2022-04-12T14:24:14Z,mitsudome-r,2,Answered,DC_kwDOAnasMc4AJw8a,armaganarsln,"We were thinking to record automatically the necessary data when autonomous driving is engaged and turned off when manual driving is engaged to be able to re-create or test the issues during autonomous driving. Data collection for development of perception stack or other modules could be the next step forward. Hopefully, my dream is to have an open-source dataset published by Autoware Foundation in the near future."
Data recording tools,D_kwDOAnasMc4AP66i,2022-04-12T14:24:14Z,mitsudome-r,2,Answered,DC_kwDOAnasMc4AJ5gD,xmfcx,@xmfcx consider the recording of topics as part of AD-API and autoware's architecture in general.
Autonomy Software WG Meeting 2022/04/19,D_kwDOAnasMc4AP66j,2022-04-12T15:18:39Z,BonoloAWF,1,Answered,,,
Autonomy Software WG Meeting 2022/04/19,D_kwDOAnasMc4AP66j,2022-04-12T15:18:39Z,BonoloAWF,1,Answered,DC_kwDOAnasMc4AJ5TZ,xmfcx,@xmfcx create an issue to test the existing lidar-only perception pipeline with the data provided https://github.com/autowarefoundation/autoware.universe/issues/562#issuecomment-1102662448
How to setup autoware for differential drive vehicle ?,D_kwDOAnasMc4AP66k,2022-04-13T07:18:06Z,soblin,3,Answered,,,
How to setup autoware for differential drive vehicle ?,D_kwDOAnasMc4AP66k,2022-04-13T07:18:06Z,soblin,3,Answered,DC_kwDOAnasMc4AJwa7,taikitanaka3,"- for the map in autoware
curently we are using lanelet2 map and pointcloud map you can test it in vector map builder [here](https://tools.tier4.jp/vector_map_builder_ll2/) and as far as I know there is no conversion tool.

- for vehicle model in autoware
there is sample vehicle model in [here](https://github.com/autowarefoundation/sample_vehicle_launch) so you need to change this to diff-drive type."
How to setup autoware for differential drive vehicle ?,D_kwDOAnasMc4AP66k,2022-04-13T07:18:06Z,soblin,3,Answered,DC_kwDOAnasMc4AJwbt,TakaHoribe,"With a simple approach (described later), Autoware can handle the differential-drive robot, but some functions are limited.

As background, Autoware is basically (at least for now) designed for Ackermann-type vehicles, and the Diff-Drive vehicle is not perfectly supported. For example, the path planning module can not take spin-turn planning into account.

So, how to use the Diff-Drive vehicle in the Autoware:

The most simple way is to have Autoware operate with the Diff-Drive robot as a virtual Ackermann vehicle. A pseudo ~`base_link`~ `wheelbase` must be set as a vehicle parameter, and the planning and control module will publish the `ackermann_control_command` (steering, steering_rotation_rate, velocity, and acceleration) based on the Ackermann vehicle model. (See the vehicle parameter example here: [sample_vehicle_description](https://github.com/autowarefoundation/sample_vehicle_launch/blob/main/sample_vehicle_description/config/vehicle_info.param.yaml/#L5), which is used in the tutorial demo.)

By using the Ackermann kinematics equation, you can convert the `ackermann_control_command` into a Twist message (you need to use the pseudo ~`base_link`~ `wheelbase` here). The twist (longitudinal and angular velocity) command can be finally converted into each wheel speed in the robot interface.

You can create your own `vehicle_interface` and implement those conversion there.

This should allow you to use the Autoware with the diff-drive robot for basic operation. If you want to realize spin-turn motion (or something very specific to the diff-drive configuration), a large improvement of the planner is necessary.

Currently no `vehicle_interface` for the diff-drive robot is supported, but it would be nice if we can support in the future."
How to setup autoware for differential drive vehicle ?,D_kwDOAnasMc4AP66k,2022-04-13T07:18:06Z,soblin,3,Answered,DC_kwDOAnasMc4AJyTG,soblin,"Thanks for your reply.

I also had a look at this [diagram](https://tier4.github.io/autoware-documentation/tier4-main/design/node-diagram/) and was able to get a better understanding of how AckermannCommand is finally generated and fed into the vehicle :)

I have another question on [planning_simulator](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/) (aka psim) -- I noticed that in this tutorial [simple_planning_simulator](https://github.com/autowarefoundation/autoware.universe/blob/main/simulator/simple_planning_simulator/src/simple_planning_simulator/simple_planning_simulator_core.cpp) is subscribing to control commands and publishing `current_pose` as the ground-truth position of the vehicle.
So is it correct understanding that this node is simulating the physics of the automobile? If that is the case, do we need to implement corresponding node for our diff-drive robot to run a precise simulation? "
How to setup autoware for differential drive vehicle ?,D_kwDOAnasMc4AP66k,2022-04-13T07:18:06Z,soblin,3,Answered,DC_kwDOAnasMc4AJyXL,TakaHoribe,"Yes, the simple_planning_simulator subscribes to the Autoware command and computes the vehicle dynamics based on the command.
You can select the model from some options. See [the simple_planning_simulator design](https://github.com/autowarefoundation/autoware.universe/blob/main/simulator/simple_planning_simulator/design/simple_planning_simulator-design.md).

If you want to simulate with a vehicle-specific command, you need to create a new model for that. You'll see how to add a new model in the code (there is an interface class for the vehicle model).
"
How to setup autoware for differential drive vehicle ?,D_kwDOAnasMc4AP66k,2022-04-13T07:18:06Z,soblin,3,Answered,DC_kwDOAnasMc4AJ4Nw,TakaHoribe,"Opps, sorry. thank you!"
How to setup autoware for differential drive vehicle ?,D_kwDOAnasMc4AP66k,2022-04-13T07:18:06Z,soblin,3,Answered,DC_kwDOAnasMc4AJyYF,TakaHoribe,"About the SLAM, currently no package for mapping is supported as the Autoware function. 
There are several OSS for mapping/SLAM, and it would be recommended to use those packages.

Personal recommendation from my colleague is [InteractiveSlam](https://github.com/SMRT-AIST/interactive_slam).


 "
Core/Universe Planning meeting 2022/04/13,D_kwDOAnasMc4AP66l,2022-04-13T14:01:44Z,mitsudome-r,0,Unanswered,,,
Create map for autoware,D_kwDOAnasMc4AP66m,2022-04-14T08:26:07Z,shmpwk,2,Answered,,,
Create map for autoware,D_kwDOAnasMc4AP66m,2022-04-14T08:26:07Z,shmpwk,2,Answered,DC_kwDOAnasMc4AJyVY,angry-crab,"Any open source `slam` algorithm would be able to give a `pcd` map if a `rosbag` or other format of sensor data are provided. Some choices are listed below.  

[HDL](https://github.com/koide3/hdl_graph_slam)
[LIO-SAM](https://github.com/TixiaoShan/LIO-SAM)"
Create map for autoware,D_kwDOAnasMc4AP66m,2022-04-14T08:26:07Z,shmpwk,2,Answered,DC_kwDOAnasMc4AJyV3,shmpwk,"Thank you for your information!
We also consider to use [interactive slam](https://github.com/SMRT-AIST/interactive_slam), which includes HDL, 
However interactive slam supports neither ROS2 nor ROS1 noetic, and only supports melodic or its less version.
So we decide to use [LIO-SAM](https://github.com/TixiaoShan/LIO-SAM/tree/ros2) which supports ROS2."
Create map for autoware,D_kwDOAnasMc4AP66m,2022-04-14T08:26:07Z,shmpwk,2,Answered,DC_kwDOAnasMc4AJ6OH,shmpwk,"As @emi0116 says, LIO-SAM is a little complicated. 
It is better for us to use the easiest slam this time.
So finally, we use lidarslam_ros2. "
Create map for autoware,D_kwDOAnasMc4AP66m,2022-04-14T08:26:07Z,shmpwk,2,Answered,DC_kwDOAnasMc4AJzfK,emi0116,"Hello.
You have an interesting discussion.
The feature-based slams proposed by loam (lego-loam, lio-sam, etc.) are very fast and good for real-time mapping, but I would not recommend using them for map matching because the maps are very blurry.
If you can use ROS1, I suggest you use hdl_graph_slam or interactive_slam.
For ROS2, I have used lidarslam_ros2(https://github.com/rsasaki0109/lidarslam_ros2), which is also good
(There was talk that it would also be used in navigation2, but it appears that work has now stopped.
https://github.com/ros-planning/navigation2/issues/1757
)"
Create map for autoware,D_kwDOAnasMc4AP66m,2022-04-14T08:26:07Z,shmpwk,2,Answered,DC_kwDOAnasMc4AJzjw,shmpwk,"Thanks for the extremely useful information!
We use ROS2 and prefer accuracy to speed and real-time performance since we are working on a prototype project.
So lidarslam_ros2 seems nice for us except stopping their work. "
Create map for autoware,D_kwDOAnasMc4AP66m,2022-04-14T08:26:07Z,shmpwk,2,Answered,DC_kwDOAnasMc4AJ2tG,emi0116,"My comment was confusing.
It appears that the development of lidarslam_ros2 is continuing, just that the move to make it the standard SLAM for ROS2 has stopped. (At least the maintainer seems to be actively commenting on issues.)"
Create map for autoware,D_kwDOAnasMc4AP66m,2022-04-14T08:26:07Z,shmpwk,2,Answered,DC_kwDOAnasMc4AJ6OQ,shmpwk,We finished making map by only using lidar. Thank you!
Multi-Sensor Calibration,D_kwDOAnasMc4AP66n,2022-04-14T09:41:26Z,sevocrear,3,Answered,,,
Multi-Sensor Calibration,D_kwDOAnasMc4AP66n,2022-04-14T09:41:26Z,sevocrear,3,Answered,DC_kwDOAnasMc4AJ4ag,aohsato,"@sevocrear Hi, thank you for your question!
As you say, there is no calibration package in autoware.auto/universe right now, but you needs to prepare [calibration parameters](https://github.com/autowarefoundation/autoware_individual_params/tree/main/individual_params/config/default/sample_sensor_kit) for your product.

To resolve this problem, we'll soon release an alpha version of the calibration package from TIER IV tool team in a few days. The following features will be supported as the first step, which will help your project.

- Manual extrinsic calibration
- Map-based lidar-lidar extrinsic calibration
- Target-based lidar-camera extrinsic calibration
- Target-based camera intrinsic calibration"
Multi-Sensor Calibration,D_kwDOAnasMc4AP66n,2022-04-14T09:41:26Z,sevocrear,3,Answered,DC_kwDOAnasMc4AJ4kg,aohsato,"Related issues
https://github.com/autowarefoundation/autoware.universe/issues/592
https://github.com/autowarefoundation/autoware.universe/issues/679"
Multi-Sensor Calibration,D_kwDOAnasMc4AP66n,2022-04-14T09:41:26Z,sevocrear,3,Answered,DC_kwDOAnasMc4AJ62i,yabuta,"@sevocrear I am preparing to release, but it's going to take some more time as I am deleting private information from the repository.
I'm hoping to release it by the end of this month."
Multi-Sensor Calibration,D_kwDOAnasMc4AP66n,2022-04-14T09:41:26Z,sevocrear,3,Answered,DC_kwDOAnasMc4AJ7EP,sevocrear,"@yabuta Okay, thank you. I appreciate it"
Multi-Sensor Calibration,D_kwDOAnasMc4AP66n,2022-04-14T09:41:26Z,sevocrear,3,Answered,DC_kwDOAnasMc4AKVSm,sevocrear,@yabuta Good afternoon! Could you please us tell when we may have an opportunity to use your tools for calibration? 
Multi-Sensor Calibration,D_kwDOAnasMc4AP66n,2022-04-14T09:41:26Z,sevocrear,3,Answered,DC_kwDOAnasMc4AL0GU,yabuta,"@sevocrear 
My sincere apologies. I somehow managed to miss this notification
Also, I was going to release the calibration tools, but it took longer than I thought.
The calibration tool used in Tier4 is now available here
https://github.com/tier4/CalibrationTools"
Multi-Sensor Calibration,D_kwDOAnasMc4AP66n,2022-04-14T09:41:26Z,sevocrear,3,Answered,DC_kwDOAnasMc4AL0VX,Unknown,@yabuta @aohsato Will these calibration tools stay in a T4 repository? Or is there any plan to include this within the AWF organization as an officially supported set of calibration tools?
Multi-Sensor Calibration,D_kwDOAnasMc4AP66n,2022-04-14T09:41:26Z,sevocrear,3,Answered,DC_kwDOAnasMc4AL0vb,aohsato,"@LalithVipulananthan Good point. We plan to manage this repository on tier4 org and wait for reactions from users as the first step, so we have no plan to transit to AWF org now."
2022-04-13 Simulation Working Group meeting,D_kwDOAnasMc4AP66o,2022-04-14T13:33:25Z,WJaworskiRobotec,0,Unanswered,,,
Racing WG - Meeting 04/14/2022,D_kwDOAnasMc4AP66p,2022-04-14T15:11:40Z,JohannesBetz,0,Unanswered,,,
How to set vehicle info param for diff-drive robot ?,D_kwDOAnasMc4AP66q,2022-04-18T02:59:03Z,soblin,1,Answered,,,
How to set vehicle info param for diff-drive robot ?,D_kwDOAnasMc4AP66q,2022-04-18T02:59:03Z,soblin,1,Answered,DC_kwDOAnasMc4AJ27l,shmpwk,"From @TakaHoribe 

`wheel_base` is defined as ""between front wheel center and rear wheel center""

> I think some parameters like wheel_tread do not make sense to diff-drive robot, but it looks like the current system requires those parameters pre-defined. Do you think it's ok to set those irrelevant parameters to zero ?

The answer is no.
Currently the autoware does not consider such a diff-drive model. 
If you set `wheel_base` parameter 0, it might cause the controling problem.
Thus we wants you to set the pseudo wheel_base and whatever pseudo value is ok above 0.

See the discussion https://github.com/autowarefoundation/autoware/discussions/170#discussioncomment-2557677"
Add a documentation for localization initialization,D_kwDOAnasMc4AP66r,2022-04-18T03:41:10Z,IshitaTakeshi,0,Unanswered,,,
2022-04-19 ODD working group weekly meeting (89),D_kwDOAnasMc4AP66s,2022-04-18T06:07:43Z,Igata-ctrl,0,Unanswered,,,
What is mirror param?,D_kwDOAnasMc4AP66u,2022-04-18T07:22:45Z,shmpwk,1,Answered,,,
What is mirror param?,D_kwDOAnasMc4AP66u,2022-04-18T07:22:45Z,shmpwk,1,Answered,DC_kwDOAnasMc4AJ2_P,kenji-miyake,Related: https://github.com/autowarefoundation/autoware-documentation/pull/79
What is mirror param?,D_kwDOAnasMc4AP66u,2022-04-18T07:22:45Z,shmpwk,1,Answered,DC_kwDOAnasMc4AJ2_g,shmpwk,"Thank you, looking forward to merging the PR."
What is mirror param?,D_kwDOAnasMc4AP66u,2022-04-18T07:22:45Z,shmpwk,1,Answered,DC_kwDOAnasMc4AYUzT,TZECHIN6,"I am sorry, but the document doesnt talk about any mirror param, instead its more likely to talk about the vehicle_info.

Edited:
Okay the overhang also including the  mirror, then I would like to ask what does the mirror.param.yaml do? thanks"
Building Open AD kit as a Yocto distribution,D_kwDOAnasMc4AP66v,2022-04-18T14:45:20Z,esteve,2,Answered,,,
Building Open AD kit as a Yocto distribution,D_kwDOAnasMc4AP66v,2022-04-18T14:45:20Z,esteve,2,Answered,DC_kwDOAnasMc4AJ3k9,kaspermeck-arm,"@esteve 

Using Yocto to build containers using `meta-ros` needs more investigation and is not our highest priority. As of now, we only use Yocto to build the custom Linux distro `EWAOL`, which is the host OS. So far it has been ported to e.g., AVA, RPi4, and other hardware.

My suggestion is that we use multi-stage builds (https://docs.docker.com/develop/develop-images/multistage-build/) to create container images which are based on Ubuntu. Each container image will have ROS nodes which relate a specific feature, e.g., localization.

Once we have implemented a multi-stage buildpipeline, we can swap out Ubuntu (in the `FROM` statement in the Dockerfile) with a custom Linux build.

What do you think about that?"
Building Open AD kit as a Yocto distribution,D_kwDOAnasMc4AP66v,2022-04-18T14:45:20Z,esteve,2,Answered,DC_kwDOAnasMc4AJ3oF,esteve,"@kasperornmeck yes, I know it's not a priority now, but I was asked by @mitsudome-r to summarize my findings about Yocto here"
What are the requirements for sensor configuration in using Autoware?,D_kwDOAnasMc4AP66w,2022-04-19T01:06:08Z,kminoda,1,Answered,,,
What are the requirements for sensor configuration in using Autoware?,D_kwDOAnasMc4AP66w,2022-04-19T01:06:08Z,kminoda,1,Answered,DC_kwDOAnasMc4AJ4lY,aohsato,"@kminoda 
Thanks for your question!
Unfortunately, there is no documentation about the whole sensing policy just for now. :face_with_head_bandage: 

The sensing policy around the localization module is as follows.

LiDAR pointcloud ( `sensor_msgs/PointCloud2` ) is mandatory.
https://github.com/autowarefoundation/autoware.universe/tree/main/localization/ndt_scan_matcher

Vehicle Twist ( `geometry_msgs/TwistWithCovarianceStamped` ) is mandatory.
https://github.com/autowarefoundation/autoware.universe/tree/main/localization/ekf_localizer

IMU ( `sensor_msgs/Imu` ) is not mandatory, but it can be used with `gyro_odometer` to improve the accuracy of Vehicle Twist.
https://github.com/autowarefoundation/autoware.universe/tree/main/localization/gyro_odometer

GNSS ( `geometry_msgs/PoseWithCovarianceStamped` ) is not mandatory, but can be used with `pose_initializer` for automatic initial position estimation.
https://github.com/autowarefoundation/autoware.universe/tree/main/localization/pose_initializer

The basic idea can be found at the following URL, the previous AutowareArchitectureProposal documents.
https://github.com/tier4/AutowareArchitectureProposal.proj/blob/main/docs/design/software_architecture/Localization/Localization.md
https://github.com/tier4/AutowareArchitectureProposal.proj/blob/main/docs/design/software_architecture/Localization/TwistEstimator/TwistEstimator.md"
What are the requirements for sensor configuration in using Autoware?,D_kwDOAnasMc4AP66w,2022-04-19T01:06:08Z,kminoda,1,Answered,DC_kwDOAnasMc4AJ4yU,kminoda,Thanks a lot! This fully answers my question.
How can we tune the vehicle velocity in planning simulator?,D_kwDOAnasMc4AP66x,2022-04-19T02:52:30Z,kminoda,2,Answered,,,
How can we tune the vehicle velocity in planning simulator?,D_kwDOAnasMc4AP66x,2022-04-19T02:52:30Z,kminoda,2,Answered,DC_kwDOAnasMc4AJ4QZ,takayuki5168,"I think you can set max_velocity in planning here.
https://github.com/tier4/autoware_launch/blob/7a9ad30407e8c780ee1b5d2175d79d360a94dfdc/planning_launch/config/scenario_planning/common/motion_velocity_smoother/motion_velocity_smoother.param.yaml#L4

Also, acceleration or jerk can be tuned.
https://github.com/tier4/autoware_launch/blob/7a9ad30407e8c780ee1b5d2175d79d360a94dfdc/planning_launch/config/scenario_planning/common/common.param.yaml#L4-L8"
How can we tune the vehicle velocity in planning simulator?,D_kwDOAnasMc4AP66x,2022-04-19T02:52:30Z,kminoda,2,Answered,DC_kwDOAnasMc4AJ4Qt,takayuki5168,"Parameters of the control is here.
https://github.com/tier4/autoware_launch/blob/7a9ad30407e8c780ee1b5d2175d79d360a94dfdc/control_launch/config/vehicle_cmd_gate/vehicle_cmd_gate.param.yaml#L8-L10"
How can we tune the vehicle velocity in planning simulator?,D_kwDOAnasMc4AP66x,2022-04-19T02:52:30Z,kminoda,2,Answered,DC_kwDOAnasMc4AJ4Qy,takayuki5168,"Parameters of the simulator
https://github.com/autowarefoundation/sample_vehicle_launch/blob/df2c4e6e39822942781d9e9e08749a29c779ed78/sample_vehicle_description/config/simulator_model.param.yaml#L9"
How can we tune the vehicle velocity in planning simulator?,D_kwDOAnasMc4AP66x,2022-04-19T02:52:30Z,kminoda,2,Answered,DC_kwDOAnasMc4AJ4Qk,rej55,"@kminoda 
If you want to set the maximum velocity in dynamic, please publish `/planning/scenario_planning/max_velocity_default`.
If you use web_controller, it publishes `/planning/scenario_planning/max_velocity_default` with input velocity limit
![Screenshot from 2022-04-19 11-58-51](https://user-images.githubusercontent.com/10190493/163911673-d5e82a39-4794-4110-97bd-15b553ade6ad.png)

If you want to set the maximum velocity in static, please set the velocity limit in your vector map (ll2 map)."
How can we tune the vehicle velocity in planning simulator?,D_kwDOAnasMc4AP66x,2022-04-19T02:52:30Z,kminoda,2,Answered,DC_kwDOAnasMc4AJ4Q_,takayuki5168,"I think we can set max velocity statically by modifying parameters in launcher as commented in the following. Is it wrong?
https://github.com/autowarefoundation/autoware/discussions/189#discussioncomment-2589721"
How can we tune the vehicle velocity in planning simulator?,D_kwDOAnasMc4AP66x,2022-04-19T02:52:30Z,kminoda,2,Answered,DC_kwDOAnasMc4AJ4RB,takayuki5168,@rej55 
How can we tune the vehicle velocity in planning simulator?,D_kwDOAnasMc4AP66x,2022-04-19T02:52:30Z,kminoda,2,Answered,DC_kwDOAnasMc4AJ4Ry,rej55,"It also works by setting the max velocity in the parameters.
However, I don't recommend changing parameters to set the max velocity because it sets in uniform.
In general, I think the maximum velocity should be set in the vector map."
How can we tune the vehicle velocity in planning simulator?,D_kwDOAnasMc4AP66x,2022-04-19T02:52:30Z,kminoda,2,Answered,DC_kwDOAnasMc4AJ4SP,takayuki5168,"Ahh, now I got it.

@kminoda 
In short, if you want to decrease the velocity only for driving inside and not for driving outside, you'd better set max velocity in vector map or the velocity limit as @.rej55 commented. 
Or if you wanna set the max velocity for driving both inside and outside, please check the following comment.
https://github.com/autowarefoundation/autoware/discussions/189#discussioncomment-2589721"
How can we tune the vehicle velocity in planning simulator?,D_kwDOAnasMc4AP66x,2022-04-19T02:52:30Z,kminoda,2,Answered,DC_kwDOAnasMc4AJ4iw,kminoda,"OK, thanks for the answers!"
Radar Sensing Architecture Design,D_kwDOAnasMc4AP66y,2022-04-19T09:41:53Z,scepter914,5,Answered,,,
Radar Sensing Architecture Design,D_kwDOAnasMc4AP66y,2022-04-19T09:41:53Z,scepter914,5,Answered,DC_kwDOAnasMc4AJ5em,xmfcx,"ros-perception/radar_msgs/msg/RadarScan.msg doesn't seem to have:
- https://en.wikipedia.org/wiki/Signal-to-noise_ratio
- https://en.wikipedia.org/wiki/Radar_cross-section
values for points, SmartMicro radars provide these with raw radar point clouds, do you have any opinion on this?"
Radar Sensing Architecture Design,D_kwDOAnasMc4AP66y,2022-04-19T09:41:53Z,scepter914,5,Answered,DC_kwDOAnasMc4AJ6Om,scepter914,"
I think ""amplitude"" is equivalent for Radar cross section (RCS) and Signal-to-Noise Ratio in ros_perception community idea.
Related discussions are [this PR comment](https://github.com/ros-perception/radar_msgs/pull/1#issuecomment-635988765) and [this PR comment](https://github.com/ros-perception/radar_msgs/pull/1#issuecomment-638770215).

But there is difference in unit:
- RCS: dBsm (DeciBel squared meter)
- SNR: dB
- ""amplitude"" in msg: dB

So, I think the rules to handle the amplitude is needed.
For example, if some radar publish only RCS, its driver need to convert from RCS to amplitude."
Radar Sensing Architecture Design,D_kwDOAnasMc4AP66y,2022-04-19T09:41:53Z,scepter914,5,Answered,DC_kwDOAnasMc4AJ6zF,plane-li,"We use ARS-408 on our demo car, and find it can detect too many objects.It is hard to do ""data association"" in the fusion or tracking module.I suggest that besides RCS,**vector map** can also be use to drop the objects which are far away from the road  in the ""radar threshold filter""."
Radar Sensing Architecture Design,D_kwDOAnasMc4AP66y,2022-04-19T09:41:53Z,scepter914,5,Answered,DC_kwDOAnasMc4AJ7Hp,xmfcx,"@scepter914 what about just using `PointCloud2` message for the raw radar point cloud?

Why use a new message type for radar? (I know ROS is trying to standardize it but still :p)

We can decide what fields each point would have and control the types of these fields for efficiency."
Radar Sensing Architecture Design,D_kwDOAnasMc4AP66y,2022-04-19T09:41:53Z,scepter914,5,Answered,DC_kwDOAnasMc4AJ7Nh,scepter914,"> We use ARS-408 on our demo car, and find it can detect too many objects.It is hard to do ""data association"" in the fusion or tracking module.I suggest that besides RCS,vector map can also be use to drop the objects which are far away from the road in the ""radar threshold filter"".

I agree with you.
For radar objects with high noise, so I suggest to expand [detected_object_validation](https://github.com/autowarefoundation/autoware.universe/tree/main/perception/detected_object_validation), applying `vector_map_filter` for `TrackedObjects` in perception layer.
"
Radar Sensing Architecture Design,D_kwDOAnasMc4AP66y,2022-04-19T09:41:53Z,scepter914,5,Answered,DC_kwDOAnasMc4AJ7Qq,scepter914,"@xmfcx 

> what about just using PointCloud2 message for the raw radar point cloud?
> Why use a new message type for radar? (I know ROS is trying to standardize it but still :p)
> We can decide what fields each point would have and control the types of these fields for efficiency.

Thank you for suggestion.
I think ROS interface should define data type for development with scalability.
It is easy to update packages when data schema is changed.
In addition, I'm worried that everyone define different data field, and it makes even many radar packages useless.
So I think message definition for radar should be used instead of `PointCloud2`.
"
Radar Sensing Architecture Design,D_kwDOAnasMc4AP66y,2022-04-19T09:41:53Z,scepter914,5,Answered,DC_kwDOAnasMc4AJ7U5,xmfcx,"@scepter914 I see, also if we want to use point cloud algorithms, we will need to manually convert it to pcl point cloud then. An example use case is to use [conditional euclidean clustering](https://pointclouds.org/documentation/tutorials/conditional_euclidean_clustering.html) to cluster based on similar fields in addition to distance."
Radar Sensing Architecture Design,D_kwDOAnasMc4AP66y,2022-04-19T09:41:53Z,scepter914,5,Answered,DC_kwDOAnasMc4AJ8K2,plane-li,"I totally agree with ""So I think message definition for radar should be used instead of PointCloud2.""

Radar can output clusters or objects through configuration.The clusters is also called raw data which has too more points than the objects.
If using the clusters, https://pointclouds.org/documentation/tutorials/conditional_euclidean_clustering.html  is suggested to handle the radar point. If we want to use the ""conditional euclidean clustering""directly, I suggest to add a node to convert the radar point to point cloud.
If using the objects, I think that we need not to do any working about clustering.



"
Radar Sensing Architecture Design,D_kwDOAnasMc4AP66y,2022-04-19T09:41:53Z,scepter914,5,Answered,DC_kwDOAnasMc4AJ8Mi,scepter914,"@xmfcx 

> I see, also if we want to use point cloud algorithms, we will need to manually convert it to pcl point cloud then. An example use case  is to use conditional euclidean clustering to cluster based on similar fields in addition to distance.

I suggest for converter for creating from `ros-perception/radar_msgs/msg/RadarScan.msg` to `sensor_msgs/msg/Pointcloud2.msg` for use of radar pointcloud data by LiDAR packages.
In the cases that convert to (x, y, z, RCS) or (x, y, z, doppler_velocity) is used, you can apply to [euclidean_cluster package in Autoware](https://github.com/autowarefoundation/autoware.universe/tree/main/perception/euclidean_cluster).
(I mean it in [convert RadarScan to Pointcloud2 section in radar sensing design](https://github.com/scepter914/autoware-radar-architecture-proposal/blob/main/sensing/radar_sensing_design.md#radarscan-to-pointcloud2))

I think deep discussion is necessary, but I can suggest one of the candidates that to use something like conditional euclidean clustering, converter select data field of `Pointcloud2` as follows:

- (x, y, z, RCS)
- (x, y, z, doppler_velocity)
- (x, y, z, RCS, doppler_velocity)

(x, y, z, RCS) and (x, y, z, doppler_velocity) can be used for LiDAR package, and (x, y, z, RCS, doppler_velocity) can be used for radar package using PCL."
Radar Sensing Architecture Design,D_kwDOAnasMc4AP66y,2022-04-19T09:41:53Z,scepter914,5,Answered,DC_kwDOAnasMc4AJ-F7,mschratter,"@scepter914 @xmfcx 
Thanks for starting this discussion! It is nice to see that Autoware is going to use Radar as well. 
We are using in our vehicle radars from Smartmicro, their ROS2 driver supports directly Pointcloud2. I do not see a benefit in using the radar_msgs/RadarScan, especially in using the sensor in a cluster mode. Since the Pointcloud2 has the possibility to store multiple layers and is therefore more future-proof.  For the object mode the radar_msgs/RadarTrack might make sense.
As you mentioned above parts of the PCL can be directly used and also different layers can be directly visualized in RVIZ. 

Data from our vehicle:
![radar_visualization_pcl](https://user-images.githubusercontent.com/15896286/164618216-3c632d92-a205-47df-9aac-f6e22931ae6a.jpg)

It would be great, if all radar drivers would use the same field names, to be flexible in replacing sensors. 

What do think about this?"
Radar Sensing Architecture Design,D_kwDOAnasMc4AP66y,2022-04-19T09:41:53Z,scepter914,5,Answered,DC_kwDOAnasMc4AJ-PB,scepter914,"@mschratter 

Thank you for suggestion from actual use.
I understand benefits of Pointcloud2 in PCL usage and direct usage of visualization.

I think data field of Pointcloud2 is suitable for small group development, however, not suitable for large open source development.

- When message type is clearly defined like RadarScan, it is easy to update packages when data schema is changed.

If Pointcloud2 is used, it is hard to understand change of data schema and update radar packages.

- When Pointcloud2 is used, everyone come to define different data field.

The data field of Pointcloud2 is useful because anything can be defined.
In your case, (x, y, z, dopper_velocity, power, RCS, Noise) is defined as data field for smartmicro radar (Maybe data field is [here](https://github.com/smartmicro/smartmicro_ros2_radars/blob/master/umrr_ros2_driver/src/smartmicro_radar_node.cpp#L89)), but how about ARS408 is used?
As found in [ros-perception PR autowarefoundation/autoware.ai#2455](https://github.com/ros-perception/radar_msgs/pull/1), each radar output more different data type than LiDAR do, and it is easy to lead to define different data field just as one likes.
After all of that making radar preprocess packages, it would be useless because of lack of message definition.

Of course, I know benefits of Pointcloud2  as you said, so I suggest to prepare
- The converter from RadarScan to Pointcloud2
- The rviz plugin for RadarScan like [tier4_perception_rviz_plugin](https://github.com/autowarefoundation/autoware.universe/tree/main/common/tier4_perception_rviz_plugin).
I think these are not much cost to make.
"
Radar Sensing Architecture Design,D_kwDOAnasMc4AP66y,2022-04-19T09:41:53Z,scepter914,5,Answered,DC_kwDOAnasMc4AJ6M_,scepter914,"I found a mistake in this proposal, so I fixed it."
Radar Sensing Architecture Design,D_kwDOAnasMc4AP66y,2022-04-19T09:41:53Z,scepter914,5,Answered,DC_kwDOAnasMc4AQda3,FranzAlbers,"I am currently working on a driver for our radar sensors as well. For that, I adapted the ars408 repository (https://github.com/tier4/ars408_driver, thanks for implementing this @scepter914!) to our needs and followed the proposed radar architecture: We publish RadarTracks and convert them with the radar_tracks_msgs_converter. 

Just like the ars408 does, our radar sensors estimate object orientations. As far as I can see, these are currently lost when RadarTracks are published, because a RadarTrack does not contain the orientation of the object. Thus, our objects are always oriented in the same direction as our vehicle, though they are actually slightly rotated:

![Screenshot from 2022-12-05 15-02-03](https://user-images.githubusercontent.com/20774470/205679385-ec4a4f81-3518-4f07-b27a-80c412280569.png)

Is there already a way for dealing with object orientations? How are they considered in the current architecture?"
Radar Sensing Architecture Design,D_kwDOAnasMc4AP66y,2022-04-19T09:41:53Z,scepter914,5,Answered,DC_kwDOAnasMc4AQhEj,yukkysaito,"The only three interfaces defined by Autoware.
- DetectedObjects
- TrackedObjects
- PredictedObjects

Intermediate representation is not defined to generate DetectedObjects or TrackedObjects.
So you can use radar_msgs or define your own types. It is only good if the final result is DetectedObjects or TrackedObjects.
@scepter914 any comments?"
Radar Sensing Architecture Design,D_kwDOAnasMc4AP66y,2022-04-19T09:41:53Z,scepter914,5,Answered,DC_kwDOAnasMc4AQhQi,scepter914,"@FranzAlbers 
Thank you for sharing practical use case.

> Is there already a way for dealing with object orientations?

No, there is not now.

> How are they considered in the current architecture?

As said from @yukkysaito , the perception interface of Autoware is defined to `DetectedObjects`, `TrackedObjects`, and `PredictedObjects`, however, other message is defined by own cases.
For example, TIER IV use [DetectedObjectWithFeature](https://github.com/tier4/tier4_autoware_msgs/tree/tier4/universe/tier4_perception_msgs/msg/object_recognition) in perception module.

Same as that, TIER IV use `RadarTrack` to follow ROS-perception definition for radar data.
As an interface of the current `RadarTrack`, `RadarTrack` doesn't have orientation information [from past discussions](https://github.com/ros-perception/radar_msgs/pull/3), especially [this discussion](https://github.com/ros-perception/radar_msgs/pull/3#issuecomment-661599741).
As OSS development, I think radar's interface is better to change ros-perception/radar_msgs as a ROS standard.


Anyway, as said from @yukkysaito , I also recomend for your development that your ROS radar driver publishes directly `TrackedObject` to add orientation information.
I think you can do
by using and modifing this function <https://github.com/autowarefoundation/autoware.universe/blob/4a75d7c0ddbd88f54afaf2bb05eb65138a53ea60/perception/radar_tracks_msgs_converter/src/radar_tracks_msgs_converter_node/radar_tracks_msgs_converter_node.cpp#L160>"
Radar Sensing Architecture Design,D_kwDOAnasMc4AP66y,2022-04-19T09:41:53Z,scepter914,5,Answered,DC_kwDOAnasMc4AQj6Y,FranzAlbers,"Thank you very much for your help, @yukkysaito and @scepter914!

Publishing the `TrackedObjects` directly from the radar driver was exactly the hint I needed. 
I've implemented this and we now have the orientation as well as some additional information provided by the sensors like the existence and classification probabilities available."
Radar Sensing Architecture Design,D_kwDOAnasMc4AP66y,2022-04-19T09:41:53Z,scepter914,5,Answered,DC_kwDOAnasMc4Ab7vu,cycyc1949,"Radar has a great advantage in velocity detection, and architecture design can take advantage of this for tracking modules."
Radar Perception Architecture Design,D_kwDOAnasMc4AP66z,2022-04-19T09:42:39Z,scepter914,2,Answered,,,
Radar Perception Architecture Design,D_kwDOAnasMc4AP66z,2022-04-19T09:42:39Z,scepter914,2,Answered,DC_kwDOAnasMc4AJ5eD,xmfcx,@xmfcx provide the place in the https://github.com/autowarefoundation/autoware-documentation/
Radar Perception Architecture Design,D_kwDOAnasMc4AP66z,2022-04-19T09:42:39Z,scepter914,2,Answered,DC_kwDOAnasMc4AJ6NE,plane-li,"In the detection module or radar fusion node,there should be a  function module to handle the radar data using the RCS，ProbExists ...(the
 radar we use is ars-408)"
Radar Perception Architecture Design,D_kwDOAnasMc4AP66z,2022-04-19T09:42:39Z,scepter914,2,Answered,DC_kwDOAnasMc4AJ6PG,scepter914,"In the view from whole perception architecture, I think the noise filter module is included in radar detection module as same as [detected_object_validation](https://github.com/autowarefoundation/autoware.universe/tree/main/perception/detected_object_validation) is included in LiDAR detection.
(Now we use ARS408 too, so I totally agree because radar information have many noise and it should be removed to use sensor fusion.)"
Radar Perception Architecture Design,D_kwDOAnasMc4AP66z,2022-04-19T09:42:39Z,scepter914,2,Answered,DC_kwDOAnasMc4AJ6vg,plane-li,I agree with you to add a function module to remove the noise of raw data before fusion.
Radar Perception Architecture Design,D_kwDOAnasMc4AP66z,2022-04-19T09:42:39Z,scepter914,2,Answered,DC_kwDOAnasMc4AJ7Ne,scepter914,"I read your comment back now, I guess that I leaped in logic.

> a function module to handle the radar data using the RCS

You mean that this module handle radar object using RCS of radar pointcloud to improve detection result ([my comment](https://github.com/autowarefoundation/autoware/discussions/192#discussioncomment-2597830))?
or that the message of radar objects need to have RCS information?"
Radar Perception Architecture Design,D_kwDOAnasMc4AP66z,2022-04-19T09:42:39Z,scepter914,2,Answered,DC_kwDOAnasMc4AJ8Jc,plane-li," ""The message of radar objects need to have RCS information"""
Radar Perception Architecture Design,D_kwDOAnasMc4AP66z,2022-04-19T09:42:39Z,scepter914,2,Answered,DC_kwDOAnasMc4AJ8bF,scepter914,"@plane-li 

From now Autoware architecture, I think objects information should handle in confidence (probability) 0.0 - 1.0 value.
Considering [Classification of DetectedObjects](https://github.com/tier4/autoware_auto_msgs/blob/tier4/main/autoware_auto_perception_msgs/msg/ObjectClassification.idl), which is used mainly for LiDAR detection, now Autoware architecture handle not intensity from LiDAR, but detection confidence.

But I agree with your suggestion, so I suggest to divide for another discussion, ""how objects have points information including LiDAR data, radar data, and segmentation result"".
"
Radar Perception Architecture Design,D_kwDOAnasMc4AP66z,2022-04-19T09:42:39Z,scepter914,2,Answered,DC_kwDOAnasMc4AKDrE,plane-li,"I think it is hard to define a message including LiDAR data, radar data, and segmentation result.
Sometimes, the object cannot be detected by the Lidar and Radar at the same time.Can the message contain lidar_detect_flag and radar_detect_flag?"
Radar Perception Architecture Design,D_kwDOAnasMc4AP66z,2022-04-19T09:42:39Z,scepter914,2,Answered,DC_kwDOAnasMc4AJ-CI,storrrrrrrrm,which camera-3d-detection model are you going to use
Radar Perception Architecture Design,D_kwDOAnasMc4AP66z,2022-04-19T09:42:39Z,scepter914,2,Answered,DC_kwDOAnasMc4AJ-Kd,scepter914,"Actually we don't have any plan to use what camera-3d-detection model.
Because the scope of this proposal is whole architecture for sensing and perception, I think that if we don't decide which camera-3d-detection model is used in detail here, it's a not problem.
(But I agree with your interest, and if you need I suggest that you send another discussion.  Maybe the discussion will be active.)
"
Autonomy Software WG Meeting 2022/04/26,D_kwDOAnasMc4AP660,2022-04-19T19:12:03Z,BonoloAWF,0,Unanswered,,,
What is the difference between three launch files in autoware_launch?,D_kwDOAnasMc4AP661,2022-04-20T02:58:05Z,kminoda,1,Answered,,,
What is the difference between three launch files in autoware_launch?,D_kwDOAnasMc4AP661,2022-04-20T02:58:05Z,kminoda,1,Answered,DC_kwDOAnasMc4AJ6Od,kenji-miyake,"- **autoware.launch.xml:** For real vehicles
- **logging_simulator.launch.xml:** For RosBag replay simulations
    https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/rosbag-replay-simulation/
- **planning_simulator.launch.xml:** For planning simulations
    https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/

> In particular, which launch file should we use when we want to drive a real mobile robot? 

Therefore, the answer is `autoware.launch.xml`.

> Or should is it intended that we create our own launch file?

If you want to add some extensions, you can do that.
If you use Autoware as-is, you don't have to create your own launch file.

@kminoda Is this answer clear for you?"
What is the difference between three launch files in autoware_launch?,D_kwDOAnasMc4AP661,2022-04-20T02:58:05Z,kminoda,1,Answered,DC_kwDOAnasMc4AJ6PB,kminoda,"I was confused about what `autoware.launch.xml` is intended for since (AFAIK) there was no explanation about it in Autoware Documentation.

And yes, that answers my question! Thank you for the quick reply."
Why use GitHub discussions? And how?,D_kwDOAnasMc4AP662,2022-04-20T09:29:01Z,IshitaTakeshi,3,Answered,,,
Why use GitHub discussions? And how?,D_kwDOAnasMc4AP662,2022-04-20T09:29:01Z,IshitaTakeshi,3,Answered,DC_kwDOAnasMc4AJ6uO,kenji-miyake,"@IshitaTakeshi 

> I made a chart to clarify the usage of Issue and GitHub Discussions. Is this correct?

It's explained here.
https://autowarefoundation.github.io/autoware-documentation/main/help/support-guidelines/

I think it's not correct.
If it's a feature request, please open a feature request thread, not Q&A.

> Still the last part ""???"" is ambiguous for me though...

So what do you want to do here? :thinking:
It's not a bug and not a feature request, what's that? I couldn't understand it.

> Why do you use both GitHub Discussions and Issues?

Autoware.Auto used GitLab Issues for bugs and ROS Answers for questions.
https://autowarefoundation.gitlab.io/autoware.auto/AutowareAuto/support-guidelines.html

I've just replaced ROS Answers with GitHub Discussions.

Why Autoware.Auto did so is, I guess, it's in order to filter issues/questions without adding labels, which makes the maintenance easier.

> I think most of the existing OSS projects (such as [Rust](https://github.com/rust-lang/rust/issues)) use only issues and assign labels based on the issue category

Do you believe you can find out an appropriate issue from the numerous numbers of issues?
I don't think so. Fewer issues are more maintainable.

![image](https://user-images.githubusercontent.com/31987104/164198084-2c89693f-450b-485b-b1c6-963cce28fd80.png)
"
Why use GitHub discussions? And how?,D_kwDOAnasMc4AP662,2022-04-20T09:29:01Z,IshitaTakeshi,3,Answered,DC_kwDOAnasMc4AJ6uh,kenji-miyake,"And if you google for example ""github discussions vs issues"", you can find some articles.
Please refer to them as well.

https://resources.github.com/devops/process/planning/discussions/"
Why use GitHub discussions? And how?,D_kwDOAnasMc4AP662,2022-04-20T09:29:01Z,IshitaTakeshi,3,Answered,DC_kwDOAnasMc4AJ6vq,IshitaTakeshi,"So does it become like this?

```
Did you find a software bug? -> Open an issue in the corresponding software repository

Did you find strange behavior? -> Ask in Q&A

Do you have questions about Autoware functionality? ->  Ask in Q&A

Do you want to add new features to Autoware? -> Make a feature request
```"
Why use GitHub discussions? And how?,D_kwDOAnasMc4AP662,2022-04-20T09:29:01Z,IshitaTakeshi,3,Answered,DC_kwDOAnasMc4AJ6yC,kenji-miyake,"@IshitaTakeshi Yeah, exactly!"
Why use GitHub discussions? And how?,D_kwDOAnasMc4AP662,2022-04-20T09:29:01Z,IshitaTakeshi,3,Answered,DC_kwDOAnasMc4AJ6zC,IshitaTakeshi,"Can I add the chart above to the contribution guideline?
The current guideline page shows what Autoware has for the support (Discussions, Issues), but I think contributors want to know what they should choose based on the contribution type."
Why use GitHub discussions? And how?,D_kwDOAnasMc4AP662,2022-04-20T09:29:01Z,IshitaTakeshi,3,Answered,DC_kwDOAnasMc4AJ628,kenji-miyake,"Sorry, but I think it's not good to add chats to the documentation.
Instead, could you update the documentation if you feel it's unclear?

I think it's already explained here. What is missing? :thinking: 
https://autowarefoundation.github.io/autoware-documentation/main/help/support-guidelines/"
Why use GitHub discussions? And how?,D_kwDOAnasMc4AP662,2022-04-20T09:29:01Z,IshitaTakeshi,3,Answered,DC_kwDOAnasMc4AJ64F,IshitaTakeshi,"I mean a chart not in an image but in text like above.
The current guideline already has what contributors can use, but it doesn't say how they should choose from Q&A or feature requests.
Also, the chart above can more clearly show them what they should choose from Issues, Q&A, and feature requests from their contribution request."
Why use GitHub discussions? And how?,D_kwDOAnasMc4AP662,2022-04-20T09:29:01Z,IshitaTakeshi,3,Answered,DC_kwDOAnasMc4AJ64U,kenji-miyake,"Hmm? Then, you can send a pull request to update the documentation. :+1: "
Why use GitHub discussions? And how?,D_kwDOAnasMc4AP662,2022-04-20T09:29:01Z,IshitaTakeshi,3,Answered,DC_kwDOAnasMc4AKaBB,IshitaTakeshi,Resolved in https://github.com/autowarefoundation/autoware-documentation/pull/91
Pose initialization fails,D_kwDOAnasMc4AP663,2022-04-20T09:40:40Z,shmpwk,1,Answered,,,
Pose initialization fails,D_kwDOAnasMc4AP663,2022-04-20T09:40:40Z,shmpwk,1,Answered,DC_kwDOAnasMc4AJ6us,kminoda,"Thanks for the question!

I assume you don't have GNSS sensor and using GUI pose initialization method on RViz instead.

It is just a guess, but it appears that the covariance of pose_initializer is too large compared to your environment.

Default covariance for x and y of pose_initializer is 2[m], so decreasing the value may solve the issue.
You can change the value in:
YOUR_META_REPOSITORY/src/universe/autoware/localization/pose_initializer/config/pose_initializer.param.yaml
([here](https://github.com/autowarefoundation/autoware.universe/blob/main/localization/pose_initializer/config/pose_initializer.param.yaml))

You’ll see initialpose_particle_covariance there. Try decreasing the first two value from 4.0 to smaller value such as 0.5.

Hope this helps.

"
Pose initialization fails,D_kwDOAnasMc4AP663,2022-04-20T09:40:40Z,shmpwk,1,Answered,DC_kwDOAnasMc4AJ6u0,shmpwk,"Very quick answer! thank you! Succeed!

https://user-images.githubusercontent.com/42209144/164200667-8a8d4378-725c-4daa-bb84-7f315939ec25.mp4




"
How to trigger navigation after initial pose estimation ?,D_kwDOAnasMc4AP664,2022-04-20T09:53:31Z,soblin,2,Answered,,,
How to trigger navigation after initial pose estimation ?,D_kwDOAnasMc4AP664,2022-04-20T09:53:31Z,soblin,2,Answered,DC_kwDOAnasMc4AJ8NE,TakaHoribe,"The next step should be to publish the goal to the `mission_planner`. But some concerns exist. I'm not 100% sure though, 

 - The robot should be inside the lane when you publish a goal
 - The goal lanelet (where the goal is located) and the initial lanelet (where the robot is located) should be separated. If they are the same, route planning will not work correctly. In that case, you have to separate the long lanelet into some small lanes."
How to trigger navigation after initial pose estimation ?,D_kwDOAnasMc4AP664,2022-04-20T09:53:31Z,soblin,2,Answered,DC_kwDOAnasMc4AJ8rm,soblin,"Thank, actually it was due to another reason, but thanks for your helpful answer!"
How to trigger navigation after initial pose estimation ?,D_kwDOAnasMc4AP664,2022-04-20T09:53:31Z,soblin,2,Answered,DC_kwDOAnasMc4AJ8Yd,g-ise,"Another possibility is that some necessary topics are missing and Autoware's STATE does not change from _INITIALIZING_.
You may see the state by adding an rviz panel AutowareStatePanel"
Multi LiDAR localization,D_kwDOAnasMc4AP665,2022-04-20T10:00:49Z,kminoda,1,Answered,,,
Multi LiDAR localization,D_kwDOAnasMc4AP665,2022-04-20T10:00:49Z,kminoda,1,Answered,DC_kwDOAnasMc4AJ62D,YamatoAndo,"Ideally, estimation by multiple Lidars is better because it increases the amount of information.

In reality, however, the estimation may be unstable due to calibration errors and time synchronization discrepancies between Lidars.

In many cases, a single Lidar will perform well, so I recommend using a single Lidar first.

If you understand the problem with multiple Lidars, you can use `/sensing/lidar/concatenated/pointcloud` as input.

Incidentally, if the vehicle is slow or if only the Lidar point cloud near the vehicle is used, this problem is not a major concern."
Multi LiDAR localization,D_kwDOAnasMc4AP665,2022-04-20T10:00:49Z,kminoda,1,Answered,DC_kwDOAnasMc4AJ7CV,kminoda,"Thank you for your answer!

I am trying to apply Autoware on an indoor mobile robot that doesn't move so fast, so will also try using concatenated point cloud to see if it also works."
Customize autoware universe repository but it is not flexible,D_kwDOAnasMc4AP666,2022-04-20T10:21:25Z,shmpwk,2,Answered,,,
Customize autoware universe repository but it is not flexible,D_kwDOAnasMc4AP666,2022-04-20T10:21:25Z,shmpwk,2,Answered,DC_kwDOAnasMc4AJ630,kenji-miyake,"Good question. We have a launch repository for that use case.
https://github.com/autowarefoundation/autoware_launch

You can fork this repository and customize only parameters.

But unfortunately, it's still under construction and all necessary parameters aren't configurable from `autoware_launch`.

Therefore, currently in TIER IV, we have copies of all launch files in the launch repository. (But it's not ideal.)
https://github.com/tier4/autoware_launch"
Customize autoware universe repository but it is not flexible,D_kwDOAnasMc4AP666,2022-04-20T10:21:25Z,shmpwk,2,Answered,DC_kwDOAnasMc4AJ8Ij,shmpwk,"> currently in TIER IV, we have copies of all launch files in the launch repository. (But it's not ideal.)

You mean while [https://github.com/tier4/autoware_launch](https://github.com/tier4/autoware_launch) is more ideal than [https://github.com/autowarefoundation/autoware_launch](https://github.com/autowarefoundation/autoware_launch) in that the former has a launch file to which parameters can be specified. 
But still, detailed parameters such as the parameters of this localization cannot be changed in [https://github.com/tier4/autoware_launch](https://github.com/tier4/autoware_launch).

I agree with you. 
Maybe It is better to write detailed parameter settings in yaml and load them in the launch file?"
Customize autoware universe repository but it is not flexible,D_kwDOAnasMc4AP666,2022-04-20T10:21:25Z,shmpwk,2,Answered,DC_kwDOAnasMc4AJ64T,maxime-clem,"You can write custom launch files and parameter files outside of the universe repository for your own private project.

A simple thing you can test is to copy the [pose_estimator.launch.xml](https://github.com/autowarefoundation/autoware.universe/blob/main/launch/tier4_localization_launch/launch/pose_estimator/pose_estimator.launch.xml) and [ndt_scan_matcher.param.yaml](https://github.com/autowarefoundation/autoware.universe/blob/main/launch/tier4_localization_launch/config/ndt_scan_matcher.param.yaml) and modify the argument `param_file` of the launch file to use your copy of the parameter file.
As long as the package `ndt_scan_matcher` is built and its install path is in the `AMENT_PREFIX_PATH` (done when sourcing `install/setup.bash`), you can run the NDT node using your launch file with `ros2 launch custom_pose_estimator.launch.xml`."
Customize autoware universe repository but it is not flexible,D_kwDOAnasMc4AP666,2022-04-20T10:21:25Z,shmpwk,2,Answered,DC_kwDOAnasMc4AJ8Ih,shmpwk,"Thank you, I will temporarily do as you say. "
Duplicated links and simplification of sentences,D_kwDOAnasMc4AP667,2022-04-20T12:46:16Z,IshitaTakeshi,0,Unanswered,,,
Planning Simulator TF2 Issues,D_kwDOAnasMc4AP668,2022-04-20T17:41:57Z,Denri006,2,Answered,,,
Planning Simulator TF2 Issues,D_kwDOAnasMc4AP668,2022-04-20T17:41:57Z,Denri006,2,Answered,DC_kwDOAnasMc4AJ8L4,kenji-miyake,"@Denri006 It seems the map isn't loaded for some reason.

If there is no message like `Could not find lanelet map under {path-to-map-dir}/lanelet2_map.osm` in the log, I guess it's because of the DDS settings?

Could you tell me the result of this command? By default, it's empty.

```
echo $RMW_IMPLEMENTATION
```"
Planning Simulator TF2 Issues,D_kwDOAnasMc4AP668,2022-04-20T17:41:57Z,Denri006,2,Answered,DC_kwDOAnasMc4AJ9i_,Denri006,"This is the result of that command:
```
rmw_cyclonedds_cpp
```"
Planning Simulator TF2 Issues,D_kwDOAnasMc4AP668,2022-04-20T17:41:57Z,Denri006,2,Answered,DC_kwDOAnasMc4AJ8vR,TakaHoribe,"Not sure, but I had a similar issue before. In that time, the map loading takes a very long time due to a low ros2 DDS performance.
I could solve it by DDS tuning following this tutorial.
https://docs.ros.org/en/rolling/How-To-Guides/DDS-tuning.html

I also applied the localhost_only option for the ros communication.

What I did is below, just in case.

```
$ echo $RMW_IMPLEMENTATION  // this command returns ""rmw_cyclonedds_cpp""
```

and add this in `/etc/sysctl.conf`, 
```
net.ipv4.ipfrag_time=3
net.ipv4.ipfrag_high_thresh=134217728
net.core.rmem_max=2147483647
net.core.rmem_default=8388608
```


then, enable local_host_only
```
$ export ROS_LOCALHOST_ONLY=1
$ sudo ifconfig lo multicast
```
"
Planning Simulator TF2 Issues,D_kwDOAnasMc4AP668,2022-04-20T17:41:57Z,Denri006,2,Answered,DC_kwDOAnasMc4AJ9jM,Denri006,This fixed it for me. Thanks SO much for your help.
Planning Simulator TF2 Issues,D_kwDOAnasMc4AP668,2022-04-20T17:41:57Z,Denri006,2,Answered,DC_kwDOAnasMc4ALMcZ,kenji-miyake,"An alternative command that uses `ip` instead of `ifconfig`.

```bash
sudo ip link set multicast on lo
```"
System Monitor Package does not compile without Modifications,D_kwDOAnasMc4AP669,2022-04-20T18:16:21Z,Denri006,1,Answered,,,
System Monitor Package does not compile without Modifications,D_kwDOAnasMc4AP669,2022-04-20T18:16:21Z,Denri006,1,Answered,DC_kwDOAnasMc4AJ8J_,maxime-clem,"It sounds like an environment issue where your CUDA version is too old.
The easiest way to setup your environment is by running the [setup script](https://github.com/autowarefoundation/autoware/blob/main/setup-dev-env.sh) but you might be able to solve your issue simply by updating CUDA."
System Monitor Package does not compile without Modifications,D_kwDOAnasMc4AP669,2022-04-20T18:16:21Z,Denri006,1,Answered,DC_kwDOAnasMc4AJ9jY,Denri006,I completely uninstalled nvidia drivers and cuda. Installing them with the ansible script fixed it. 
System Monitor Package does not compile without Modifications,D_kwDOAnasMc4AP669,2022-04-20T18:16:21Z,Denri006,1,Answered,DC_kwDOAnasMc4AJ-Q-,NorahXiong,"I tried your method too but the problem showed again after I installed nvidia management lib. If nvml not searched, ""nvml_gpu_monitor.cpp"" will not be compiled at all."
System Monitor Package does not compile without Modifications,D_kwDOAnasMc4AP669,2022-04-20T18:16:21Z,Denri006,1,Answered,DC_kwDOAnasMc4AJ-TW,maxime-clem,"@NorahXiong does the workaround of Denri works for you ?
> I was able to get the package to compile By changing line 186 and line 201 in autoware/src/universe/autoware.universe/system/system_monitor/src/gpu_monitor/nvml_gpu_monitor.cpp from nvmlDeviceGetComputeRunningProcesses_v2 to nvmlDeviceGetComputeRunningProcesses."
System Monitor Package does not compile without Modifications,D_kwDOAnasMc4AP669,2022-04-20T18:16:21Z,Denri006,1,Answered,DC_kwDOAnasMc4AJ-Tw,NorahXiong,"Yes, nvmlDeviceGetComputeRunningProcesses function works."
F1TENTH Racing Architecture Design,D_kwDOAnasMc4AP67F,2022-04-21T01:43:40Z,HaoruXue,0,Unanswered,,,
How to apply senario simulator to the real robot,D_kwDOAnasMc4AP67G,2022-04-21T03:24:11Z,shmpwk,2,Answered,,,
How to apply senario simulator to the real robot,D_kwDOAnasMc4AP67G,2022-04-21T03:24:11Z,shmpwk,2,Answered,DC_kwDOAnasMc4AJ8NZ,takayuki5168,"@shmpwk 
You can run scenario simulator with your vehicle model with the following command.
Make sure to set path-to-scneario-file, $SENSOR_MODEL and $VEHICLE_MODEL

`ros2 launch scenario_test_runner scenario_test_runner.launch.py scenario:=<path-to-scenario-file> sensor_model:=$SENSOR_MODEL vehicle_model:=$VEHICLE_MODEL record:=false initialize_duration:=30 architecture_type:=awf/universe`"
How to apply senario simulator to the real robot,D_kwDOAnasMc4AP67G,2022-04-21T03:24:11Z,shmpwk,2,Answered,DC_kwDOAnasMc4AJ8Nl,takayuki5168,Also you have to modify the map path (to the local map path) written in the scenario file manually.
How to apply senario simulator to the real robot,D_kwDOAnasMc4AP67G,2022-04-21T03:24:11Z,shmpwk,2,Answered,DC_kwDOAnasMc4AJ8Ns,takayuki5168,"In my case, the modified scenario is like this
![image](https://user-images.githubusercontent.com/20228327/164366477-8803a680-a54a-4529-bd97-453ad505de06.png)
"
How to apply senario simulator to the real robot,D_kwDOAnasMc4AP67G,2022-04-21T03:24:11Z,shmpwk,2,Answered,DC_kwDOAnasMc4AJ8OC,takayuki5168,"Sorry, I misunderstood. I just explained how to run scneario simulator v2 with a new scenario file."
How to apply senario simulator to the real robot,D_kwDOAnasMc4AP67G,2022-04-21T03:24:11Z,shmpwk,2,Answered,DC_kwDOAnasMc4AJ8OV,takayuki5168,"Scenario simulator is not supposed to be applied to the real robot since the scenario simulator assumes a lot of conditions like an initial ego state (initial ego pose, velocity, ...) and other environmental conditions (goal pose, dynamic obstacles, ...)"
How to apply senario simulator to the real robot,D_kwDOAnasMc4AP67G,2022-04-21T03:24:11Z,shmpwk,2,Answered,DC_kwDOAnasMc4AJ8OZ,shmpwk,Yes your right! Thank you.
web controller is not working,D_kwDOAnasMc4AP67H,2022-04-21T08:26:20Z,soblin,3,Answered,,,
web controller is not working,D_kwDOAnasMc4AP67H,2022-04-21T08:26:20Z,soblin,3,Answered,DC_kwDOAnasMc4AJ8n3,g-ise,"When I launch `planning_simulator.launch` , normally a Rosbridge WebSocket server bonded on port 9090 starts. 
 `[rosbridge_websocket-28] [INFO] [1650533444.815131122] [rosbridge_websocket]: Rosbridge WebSocket server started on port 9090
`
How about investigating logs from rosbridge_websocket?"
web controller is not working,D_kwDOAnasMc4AP67H,2022-04-21T08:26:20Z,soblin,3,Answered,DC_kwDOAnasMc4AKAez,shmpwk,"I have same error. 
I cannot find `rosbridge_websockt` in the log. 
I only find `[INFO] [web_server-21]: process started with pid [1629290]` when launching `autoware.launch.xml` or `planning_simulator.launch.xml`.

@g-ise 
What repos do you use? 
I use autowarefoundation repos. 
I cannot find any code which launchs `rosbridge` in autowarefoudation repos. 
Under the `autoware` directory, I grep `rosbridge` and I only find that it depends `rosbridge_server`.
 However it seems no code launchs `rosbridge`. 
```
$ grep rosbridge src/ -r
src/universe/autoware.universe/common/web_controller/package.xml:  <exec_depend>rosbridge_server</exec_depend>
```
```
$ grep rosbridge install/ -r
install/share/colcon-core/packages/web_controller:autoware_auto_system_msgs:rosbridge_server:std_msgs:tier4_control_msgs:tier4_planning_msgs
```

On the other hand, for example, [tier4/AutowareArchitectureProposal.proj](https://github.com/tier4/AutowareArchitectureProposal.proj) which seems obsolete depends on [tier4/AutowareArchitectureProposal_launcher](https://github.com/tier4/AutowareArchitectureProposal.proj/blob/main/autoware.proj.repos#L7-L10).
[tier4/AutowareArchitectureProposal_launcher](https://github.com/tier4/AutowareArchitectureProposal_launcher.git) is same as [tier4/autoware_launch](https://github.com/tier4/autoware_launch) and it can launch `rosbridge` [here](https://github.com/tier4/autoware_launch/blob/tier4/universe/autoware_api_launch/launch/autoware_api.launch.xml#L24-L28). 
So with [tier4/AutowareArchitectureProposal.proj](https://github.com/tier4/AutowareArchitectureProposal.proj) , we may use web controller as an example. (I have not checked it works though.)"
web controller is not working,D_kwDOAnasMc4AP67H,2022-04-21T08:26:20Z,soblin,3,Answered,DC_kwDOAnasMc4AKBGI,g-ise,"I use a fork repo from https://github.com/tier4/autoware_launch for launcher. 
You are right, there seems no launch file that runs `rosbridge` in autowarefoundation repos.
"
web controller is not working,D_kwDOAnasMc4AP67H,2022-04-21T08:26:20Z,soblin,3,Answered,DC_kwDOAnasMc4AKBOO,Sharrrrk,It looks like [#318 ](https://github.com/autowarefoundation/autoware.universe/pull/318) has removed the rosbridge from web_controller launch file yet not added to other launch files.
web controller is not working,D_kwDOAnasMc4AP67H,2022-04-21T08:26:20Z,soblin,3,Answered,DC_kwDOAnasMc4AKBQX,shmpwk,"@Sharrrrk 
You are right. 
[#318](https://github.com/autowarefoundation/autoware.universe/pull/318) removed rosbridge for fear of conflicting rosbridge in [#175](https://github.com/tier4/autoware_launch/pull/175) as they mentioned.

Note that  [#175](https://github.com/tier4/autoware_launch/pull/175) is under tier4 repos, but not under autowarefoundation.
Under tier4 repos, rosbridge is launched in [autoware_api_launch](https://github.com/tier4/autoware_launch/blob/b2c2528d6c5a8d5a43b90ea9c493151ec9453853/autoware_api_launch/launch/autoware_api.launch.xml#L24-L28), which cause conflict if other code lanches rosbridge.
On the other hand, under autoware foundation repos, neither [tier4_autoware_api_launch](https://github.com/autowarefoundation/autoware.universe/blob/2af223e7745509cbf7fd3c485a999f506b27be2e/launch/tier4_autoware_api_launch/launch/autoware_api.launch.xml) (same as autoware_api_launch) nor [web_controller](https://github.com/autowarefoundation/autoware.universe/blob/2af223e7745509cbf7fd3c485a999f506b27be2e/common/web_controller/launch/web_controller.launch.xml) does not launch rosbridge for fear of duplication.
See https://github.com/autowarefoundation/autoware.universe/pull/658#issuecomment-1096445703 and https://github.com/autowarefoundation/autoware.universe/pull/318.

Thus we can add launching rosbridge in autoware_api or web_controller under autoware foundation repos."
web controller is not working,D_kwDOAnasMc4AP67H,2022-04-21T08:26:20Z,soblin,3,Answered,DC_kwDOAnasMc4AKBQp,shmpwk,@g-ise Thank you for your checking.
web controller is not working,D_kwDOAnasMc4AP67H,2022-04-21T08:26:20Z,soblin,3,Answered,DC_kwDOAnasMc4AKBRg,Sharrrrk,@shmpwk Thank you for the details.
web controller is not working,D_kwDOAnasMc4AP67H,2022-04-21T08:26:20Z,soblin,3,Answered,DC_kwDOAnasMc4AKA15,shmpwk,"To improve this issue, I create PR https://github.com/autowarefoundation/autoware.universe/pull/779.

[Edited] 
This PR has been merged, and now you can use web controller."
web controller is not working,D_kwDOAnasMc4AP67H,2022-04-21T08:26:20Z,soblin,3,Answered,DC_kwDOAnasMc4AOUoX,takayuki5168,@soblin Could you close the discussion if the issue was resolved.
Is CUDA necessary for Autoware?,D_kwDOAnasMc4AP67I,2022-04-21T08:26:44Z,kminoda,2,Answered,,,
Is CUDA necessary for Autoware?,D_kwDOAnasMc4AP67I,2022-04-21T08:26:44Z,kminoda,2,Answered,DC_kwDOAnasMc4AJ8if,kenji-miyake,"It is explained here.
https://github.com/autowarefoundation/autoware/blob/5fd3659b635190a594d63e60aef2f28389c1140b/ansible/playbooks/universe.yaml#L12
https://github.com/autowarefoundation/autoware/blob/5fd3659b635190a594d63e60aef2f28389c1140b/ansible/playbooks/universe.yaml#L20

So the answer is,
- Some Autoware ""Universe"" components currently depend on CUDA.
- It might be replaced with https://github.com/autowarefoundation/tvm_vendor in the future. (But not planned yet.)

> when CUDA is not available, publish dummy empty messages to /perception/object_recognition/objects. How about this?

Yes, it's a good idea.
But it's not good to automatically do such a thing. Users should manually switch some flag to use dummy nodes."
Is CUDA necessary for Autoware?,D_kwDOAnasMc4AP67I,2022-04-21T08:26:44Z,kminoda,2,Answered,DC_kwDOAnasMc4AJ8kZ,kminoda,"I see, thank you for the answer!

> Yes, it's a good idea.
> But it's not good to automatically do such a thing. Users should manually switch some flag to use dummy nodes.

Thanks!
Are there any other ways to solve this problem? For instance, does autoware have any packages that perform object detection from LiDAR without GPU?"
Is CUDA necessary for Autoware?,D_kwDOAnasMc4AP67I,2022-04-21T08:26:44Z,kminoda,2,Answered,DC_kwDOAnasMc4AJ8lE,kenji-miyake,"I think you can use this node.
https://github.com/autowarefoundation/autoware.universe/tree/main/perception/euclidean_cluster"
Is CUDA necessary for Autoware?,D_kwDOAnasMc4AP67I,2022-04-21T08:26:44Z,kminoda,2,Answered,DC_kwDOAnasMc4AJ8l7,kminoda,That's a huge help!! Thanks!
Is CUDA necessary for Autoware?,D_kwDOAnasMc4AP67I,2022-04-21T08:26:44Z,kminoda,2,Answered,DC_kwDOAnasMc4AKxxB,shmpwk,"I hope in the future autoware can choose euclidean_cluster node instead apollo or centerpoint.
https://github.com/autowarefoundation/autoware.universe/pull/842"
Is CUDA necessary for Autoware?,D_kwDOAnasMc4AP67I,2022-04-21T08:26:44Z,kminoda,2,Answered,DC_kwDOAnasMc4AKxyp,kenji-miyake,"Also, TVM transition is going, which I believe can remove CUDA dependency.
https://github.com/autowarefoundation/autoware.universe/issues/908"
Is CUDA necessary for Autoware?,D_kwDOAnasMc4AP67I,2022-04-21T08:26:44Z,kminoda,2,Answered,DC_kwDOAnasMc4AKzKx,Unknown,"In the meantime, would it be useful to update the Autoware documentation to be more explicit about what will happen if CUDA is not installed? Eg:

- List all of packages that will fail to build without CUDA installed (maybe this information should be added to the troubleshooting guide 🤔 )
- Explain that the `euclidean_cluster` node can be used instead of `apollo` or `centerpoint` for LiDAR based object detection (not sure where to put this information. Also in troubleshooting?)
  - Bonus: Provide explicit steps showing how to use the `euclidean_cluster` node instead of the default nodes."
Is CUDA necessary for Autoware?,D_kwDOAnasMc4AP67I,2022-04-21T08:26:44Z,kminoda,2,Answered,DC_kwDOAnasMc4AKzMA,kminoda,Agreed! I will create a new page for that: https://github.com/autowarefoundation/autoware-documentation/pull/128
Open AD Kit WG Meeting 2022/04/21,D_kwDOAnasMc4AP67J,2022-04-21T12:56:50Z,armaganarsln,1,Answered,,,
Open AD Kit WG Meeting 2022/04/21,D_kwDOAnasMc4AP67J,2022-04-21T12:56:50Z,armaganarsln,1,Answered,DC_kwDOAnasMc4AJ9JG,mitsudome-r,"I we have time, I would like to review some of the concerns that I have regarding Kasper's [slide](https://docs.google.com/presentation/d/1olxpMFNTyy_vdYqBB1cHFEx49tCLgDC8UjQKLI29vdQ/edit#slide=id.g1134780ae1b_0_15).

* If we achieve all the items that are listed on the slides, what would be the benefit to the users of Open AD Kit?
* To me, it only seems to achieve the red box in the diagram. With this, users might get out-of-the-box-""runtime"" of Autoware but not development platform. (That alone can be achieved just by distributing a docker image of Autoware)
* How does the user of Open AD Kit able to improve Autoware on cloud when they find any issues on their site? If we are saying Open AD Kit is a cloud-native development platform, then shouldn't tools that run on cloud (data collection, MLOPs, simulation, etc) also needed to be provided?
* What are the limitation in Open AD Kit v2.0 if we proceed with Kasper's slide? Are those acceptable from GTM point of view?
* Also, it seems to be ambiguous about who would work on which task. (e.g., Who is setting up k3s orchestrator on vehicle/cloud? Who is setting up the pipeline to upload artefacts to container registry and who would be doing the maintenance? ... ) Is Arm going to be able to do the initial setup if we give access to the repository, or are you expecting work done by the other members of AWF? If so, do we have any companies who have expertise to do the tasks?

![image](https://user-images.githubusercontent.com/43976834/164492021-6674314c-f03f-44d6-a968-1ec6cab2ed4e.png)
"
Setup autoware for differential drive vehicle,D_kwDOAnasMc4AP67K,2022-04-22T06:22:04Z,shmpwk,1,Answered,,,
Setup autoware for differential drive vehicle,D_kwDOAnasMc4AP67K,2022-04-22T06:22:04Z,shmpwk,1,Answered,DC_kwDOAnasMc4AKyE8,shmpwk,"100 laps running !!!

https://user-images.githubusercontent.com/42209144/170464743-c2245460-ec11-4ac4-80fb-c28f3fa1e56b.MOV

"
New contributors joining from AutoCore,D_kwDOAnasMc4AP67L,2022-04-22T07:42:55Z,Sharrrrk,1,Answered,,,
New contributors joining from AutoCore,D_kwDOAnasMc4AP67L,2022-04-22T07:42:55Z,Sharrrrk,1,Answered,DC_kwDOAnasMc4AKEqa,BonoloAWF,@Sharrrrk  the team has been sent invitations from Github.
Using a more generic msg type for gnss_poser package,D_kwDOAnasMc4AP67M,2022-04-22T21:49:01Z,meliketanrikulu,5,Answered,,,
Using a more generic msg type for gnss_poser package,D_kwDOAnasMc4AP67M,2022-04-22T21:49:01Z,meliketanrikulu,5,Answered,DC_kwDOAnasMc4AJ_d6,kenji-miyake,"@meliketanrikulu I believe there are no special reasons and simply because it's a prototype.

Since we're reconsidering the message interfaces now, I feel it's good to discuss it in the meeting. (I think the announcement will be published soon.)
https://github.com/autowarefoundation/autoware/discussions/99"
Using a more generic msg type for gnss_poser package,D_kwDOAnasMc4AP67M,2022-04-22T21:49:01Z,meliketanrikulu,5,Answered,DC_kwDOAnasMc4AKBYv,YamatoAndo,"@meliketanrikulu You are right, this dependence is not good.
The reason I was using this message was because I was using ublox's gnss receiver, there is no special reason.

Let's improve this package so that everyone can use it."
Using a more generic msg type for gnss_poser package,D_kwDOAnasMc4AP67M,2022-04-22T21:49:01Z,meliketanrikulu,5,Answered,DC_kwDOAnasMc4AKBm6,meliketanrikulu,@YamatoAndo @kenji-miyake Thanks for your reply. Do you have any suggestions on what the msg type should be?
Using a more generic msg type for gnss_poser package,D_kwDOAnasMc4AP67M,2022-04-22T21:49:01Z,meliketanrikulu,5,Answered,DC_kwDOAnasMc4AKBvS,kenji-miyake,"I remember previously we've discussed it a bit. I guess no concrete msg type is defined yet.
https://gitlab.com/autowarefoundation/autoware.auto/AutowareAuto/-/issues/1421#note_761341971"
Using a more generic msg type for gnss_poser package,D_kwDOAnasMc4AP67M,2022-04-22T21:49:01Z,meliketanrikulu,5,Answered,DC_kwDOAnasMc4AKD29,xmfcx,"https://docs.ros.org/en/api/sensor_msgs/html/msg/NavSatFix.html
https://docs.ros.org/en/api/sensor_msgs/html/msg/Imu.html"
Using a more generic msg type for gnss_poser package,D_kwDOAnasMc4AP67M,2022-04-22T21:49:01Z,meliketanrikulu,5,Answered,DC_kwDOAnasMc4ALDAI,mitsudome-r,"We have discussed further in the Architecture WG meeting.
https://github.com/autowarefoundation/autoware/discussions/364

From the discussion, we have decided to come up with a custome message that includes both pose + velocity(INS) output as a single message. If any one has any experience in using a particular GNSS message, please share in this thread."
Using a more generic msg type for gnss_poser package,D_kwDOAnasMc4AP67M,2022-04-22T21:49:01Z,meliketanrikulu,5,Answered,DC_kwDOAnasMc4ALDEW,YamatoAndo,"@mitsudome-r 
like this?
```
std_msgs/msg/Header header
geometry_msgs/msg/PoseWithCovariance pose
geometry_msgs/msg/TwistWithCovariance twist
```"
Using a more generic msg type for gnss_poser package,D_kwDOAnasMc4AP67M,2022-04-22T21:49:01Z,meliketanrikulu,5,Answered,DC_kwDOAnasMc4ALG4C,mitsudome-r,"The one that Fatih shared as an example was something like this: https://github.com/clearpathrobotics/applanix_driver/blob/hydro-devel/applanix_msgs/msg/NavigationSolution.msg

I think question lies whether we would like to keep position information as lat/lon or as x,y,z in some ROS defined frame as the output from Sensing module."
Using a more generic msg type for gnss_poser package,D_kwDOAnasMc4AP67M,2022-04-22T21:49:01Z,meliketanrikulu,5,Answered,DC_kwDOAnasMc4ALG4H,mitsudome-r,@xmfcx Do you have any comments?
Using a more generic msg type for gnss_poser package,D_kwDOAnasMc4AP67M,2022-04-22T21:49:01Z,meliketanrikulu,5,Answered,DC_kwDOAnasMc4ALHog,xmfcx,"@mitsudome-r @meliketanrikulu I've created https://github.com/autowarefoundation/autoware_msgs/pull/24

Please check the messages I've added and add your comments. Thanks!"
Distributed Autoware,D_kwDOAnasMc4AP67N,2022-04-22T22:35:46Z,crazydude123,2,Answered,,,
Distributed Autoware,D_kwDOAnasMc4AP67N,2022-04-22T22:35:46Z,crazydude123,2,Answered,DC_kwDOAnasMc4AJ_fN,kenji-miyake,"@crazydude123 

> Is this feasible?

I guess you can do it if set up your launch files.

> i.e. scp'ing the rosbag (2 images, lidar topics) to the Euclidean_clustering deployment, then scp'ing the output (bounding boxes) to cloud?

Could you explain this workflow more in detail?

Did you mean like this?
- You have a rosbag file.
- You send the rosbag to the Euclidean_clustering ECU by `scp`.
- The ECU automatically processes the rosbag and send the result to the cloud?"
Distributed Autoware,D_kwDOAnasMc4AP67N,2022-04-22T22:35:46Z,crazydude123,2,Answered,DC_kwDOAnasMc4AKABR,crazydude123,"Right. 
1. Can I script this whole experiment with a Bash script?

Most demos I have watched use the RViZ GUI to go about Autoware.

2. Can you point me to links/tutorials where API end-points of Autoware (to make use of in command-line) are discussed?

Thanks in advance!"
Distributed Autoware,D_kwDOAnasMc4AP67N,2022-04-22T22:35:46Z,crazydude123,2,Answered,DC_kwDOAnasMc4AKASC,Sharrrrk,">     1. Can I script this whole experiment with a Bash script?

Just like kenji-miyake suggested, you can set up your own launch files to achieve this, in your launch file, multiple algorithms (which are ros2 nodes in autoware) could be executed. RViZ GUI is optional, depends whether you need some visulized output or interaction. For more information about ros2 launch files, please refer to https://docs.ros.org/en/foxy/Tutorials/Launch/Creating-Launch-Files.html .

>     2. Can you point me to links/tutorials where API end-points of Autoware (to make use of in command-line) are discussed?
In most cases,  Autoware is using ROS2 topics for communication of different nodes, which is described in README of each package. ROS2 is using DDS as the middleware which also support data distribution over the internet. If you are using other middleware like MQTT, you need to write your own package to relay ros2 topics into MQTT messages.
Additionally, Autoware is working to provides AD API for operating the vehicle from outside the autonomous driving system. For detail please refer to https://autowarefoundation.github.io/autoware-documentation/pr-69/design/autoware-interfaces/ , but it's still in progress.

"
Distributed Autoware,D_kwDOAnasMc4AP67N,2022-04-22T22:35:46Z,crazydude123,2,Answered,DC_kwDOAnasMc4AKAXQ,kenji-miyake,"@Sharrrrk Thank you for your perfect answer! :pray: 

@crazydude123 As a supplemental comment, I believe what you want to do is technically possible.
However, there are few people who have experienced such a system, I recommend that you explain things as much in detail as possible to get proper support. :+1: "
Distributed Autoware,D_kwDOAnasMc4AP67N,2022-04-22T22:35:46Z,crazydude123,2,Answered,DC_kwDOAnasMc4AKBTL,crazydude123,"Thanks @kenji-miyake and @Sharrrrk for your answers!

@Sharrrrk, 
""ROS2 is using DDS as the middleware which also support data distribution over the internet""
1. What are ""Ros2 nodes""? Are these separate ""local servers"" that run when I launch autoware?
2. The tutorial you linked on Launch files does not talk about deploying different ""ros2 nodes"" on different devices/servers (across the internet). Is this possible? Can this be done in one single launch file? Any links for more info?
"
Distributed Autoware,D_kwDOAnasMc4AP67N,2022-04-22T22:35:46Z,crazydude123,2,Answered,DC_kwDOAnasMc4AKBTa,crazydude123,"@kenji-miyake, here's the use-case in detail:
We want to make buses autonomous. So parts of Autoware AD are deployed on a nearby light-post and parts of it are deployed on the main 5G router. I want to experimentally figure out which parts need to be deployed where. The GPU at the lightpost isn't as powerful as the one at the 5G router, and so the process needs to be experimental.
We have 20 such lightposts, and can thus get a global image of the live-traffic at any point in time.

Going by @Sharrrrk's answer, I guess I need to wait for the AD API.
Distributing ros2 nodes across servers is something I would love to try. 

"
Distributed Autoware,D_kwDOAnasMc4AP67N,2022-04-22T22:35:46Z,crazydude123,2,Answered,DC_kwDOAnasMc4AKBYB,kenji-miyake,"> What are ""Ros2 nodes""? Are these separate ""local servers"" that run when I launch autoware?

It's good to read this document first.
https://docs.ros.org/en/rolling/Tutorials/Understanding-ROS2-Nodes.html

> The tutorial you linked on Launch files does not talk about deploying different ""ros2 nodes"" on different devices/servers (across the internet). Is this possible? Can this be done in one single launch file? Any links for more info?

ROS 2 Docs site is a good start.
https://docs.ros.org/en/rolling/Tutorials.html"
Distributed Autoware,D_kwDOAnasMc4AP67N,2022-04-22T22:35:46Z,crazydude123,2,Answered,DC_kwDOAnasMc4AKDcF,Sharrrrk,"@crazydude123 Deploying different ""ros2 nodes"" on different devices/servers cannot be achieved by a single launch file, you need at least one launch file for each hardware. The easy way is to use local network or VPN, then ROS2 nodes can automatically communicate with each other."
Distributed Autoware,D_kwDOAnasMc4AP67N,2022-04-22T22:35:46Z,crazydude123,2,Answered,DC_kwDOAnasMc4AKEXy,crazydude123,"Thanks again for your reply!

Any examples online of this specific case where ros2 nodes are spun up across servers?"
Distributed Autoware,D_kwDOAnasMc4AP67N,2022-04-22T22:35:46Z,crazydude123,2,Answered,DC_kwDOAnasMc4AKFV6,Sharrrrk,"Yes, you can refer to the following two examples:
https://github.com/Adlink-ROS/adlink_ddsbot
https://github.com/Adlink-ROS/adlink_neuronbot"
Distributed Autoware,D_kwDOAnasMc4AP67N,2022-04-22T22:35:46Z,crazydude123,2,Answered,DC_kwDOAnasMc4AKF1b,yuasabe,"As part of ongoing research, I am currently working on adding Vehicle-to-Everything (V2X) communication capabilities to Autoware. The implementation is still not open-sourced, but the overall architecture is as shown in the diagram below. We have utilized the open-source V2X software stack called [Vanetza](https://github.com/riebl/vanetza), and have integrated it with Autoware.

![Autoware V2X (4)](https://user-images.githubusercontent.com/5180742/165488712-9d3bff51-db9e-450b-8d3e-2f286afd04c1.png)

This will allow Autoware to send information to other Autoware-enabled vehicles/infrastructure through a variety of access mediums, such as Wi-Fi, LTE/5G, etc. So, in your case, I understand that the light posts have a cellular connection to the cloud, so by defining a set of messages to use over the air, any sort of information can be sent from the Autoware used in the light posts to the Autoware used in the cloud.

We are currently in the later stages of evaluating performance metrics of our implementation, and after that, we should be able to make the code public. I believe that use cases like yours are very interesting, and I will be more than happy to cooperate together hopefully in the near future.
"
Distributed Autoware,D_kwDOAnasMc4AP67N,2022-04-22T22:35:46Z,crazydude123,2,Answered,DC_kwDOAnasMc4AMxsE,Croquembouche,"Hi,

I just joined the Autoware foundation. We will be building a simulation environment that does the above. The entire simulation will be in CARLA."
Distributed Autoware,D_kwDOAnasMc4AP67N,2022-04-22T22:35:46Z,crazydude123,2,Answered,DC_kwDOAnasMc4AMxsO,Croquembouche,Most of the simulation is done. I just need to integrated into AWF.
Distributed Autoware,D_kwDOAnasMc4AP67N,2022-04-22T22:35:46Z,crazydude123,2,Answered,DC_kwDOAnasMc4AVonA,evshary,"@yuasabe May I ask some questions about your architecture? I'm not really familiar with V2X and I hope to understand more.

1. Is Autoware and Autoware_V2X running in different hosts? If so, is there any reason why running on different hosts? Is it because of safety?
2. Are the blue parts what you developed? (V2XNode, V2XApp, CPM) Does V2XApp use TCP/IP network stack directly? (That means Open socket and send messages) I'm really interested in how V2XApp interacts with the lower layer stack.
3. We're studying whether Zenoh (another protocol similar to DDS, but has more benefits) can be used in the V2X scenario.  Do you think this kind of distributed network protocol can be used in V2XApp?

We are looking forward to your implementation. We're happy to hear any news from you or if you're interested in cooperation together."
Distributed Autoware,D_kwDOAnasMc4AP67N,2022-04-22T22:35:46Z,crazydude123,2,Answered,DC_kwDOAnasMc4AVpg0,yuasabe,"@evshary Thank you for the questions.

1. Autoware and AutowareV2X do not necessarily have to be run on different hosts. As long as they are in the same network and ROS 2 messages can be exchanged between them, Autoware and AutowareV2X can be placed in either the same host or separate hosts. By enabling AutowareV2X to be put on a separate host, I believe that (i) it can be easily integrated into existing Autoware-powered systems, (ii) it can act as a gateway router that can provide network connectivity to other applications (i.e., infotainment), and (iii) it can be isolated from safety-critical processes on the main Autoware ECU (as you pointed out).

2. The blue parts are the main components that were developed. For the network stack, we have focused on the ETSI C-ITS protocol suite, where the lower layers are mainly provided by [Vanetza](https://github.com/riebl/vanetza). Cooperative ITS protocols such as GeoNetworking, Basic Transport Protocol, Decentralized Congestion Control, etc. that are standardized by ETSI are used in place of the widely used TCP/IP stack. Lower-level processes such as opening/closing of sockets and serialization of messages are mainly done via Vanetza.

3. I'm actually very interested in Zenoh, and have seen #3434, #2968. I understand how this can enable the use of multiple Autoware instances in simulator-based environments, and how Zenoh can help DDS hop over routers. However, I'm still not sure how this can be used in the context of wireless V2X communication between multiple vehicles or infrastructure. In the design of AutowareV2X, the ROS 2 environment stays in the local Autoware-based system, and the messages in Autoware are converted into packets that are sent over various wireless mediums to reach other vehicles or infrastructure. What protocol to use for the packets is an important point of discussion, but for the sake of the first implementation, I have focused on using the European ETSI standards. I still don't know much about Zenoh, however, so I would love to study some more and see in what ways we can collaborate!"
Distributed Autoware,D_kwDOAnasMc4AP67N,2022-04-22T22:35:46Z,crazydude123,2,Answered,DC_kwDOAnasMc4AVrd8,evshary,"@yuasabe Thanks for your detailed answers. I'll take a look at Vanetza and see whether there is a possibility to integrate with Zenoh. Welcome to any further discussion if you think we can collaborate. Also, expect the release of your awesome implementation!"
Is there a way to know how many images rviz2 exactly has received?,D_kwDOAnasMc4AP67O,2022-04-24T07:21:16Z,storrrrrrrrm,1,Answered,,,
Is there a way to know how many images rviz2 exactly has received?,D_kwDOAnasMc4AP67O,2022-04-24T07:21:16Z,storrrrrrrrm,1,Answered,DC_kwDOAnasMc4AKBRV,Sharrrrk,"I would suggest you to have a look at the status/topic value under the specific topic you are concerning, just like the example below:

![MicrosoftTeams-image](https://user-images.githubusercontent.com/71419791/165013605-0e5b56c5-425f-467b-8340-1d942edb868d.png)

"
Is there a way to know how many images rviz2 exactly has received?,D_kwDOAnasMc4AP67O,2022-04-24T07:21:16Z,storrrrrrrrm,1,Answered,DC_kwDOAnasMc4AKBbu,storrrrrrrrm,"> I would suggest you to have a look at the status/topic value under the specific topic you are concerning, just like the example below:
> 
> ![MicrosoftTeams-image](https://user-images.githubusercontent.com/71419791/165013605-0e5b56c5-425f-467b-8340-1d942edb868d.png)

thanks,  i finally found the problem of 'roi_cluster_fusion', it has nothing to do with rviz2 receiving images.  As you mentioned,
status/topic value shows the number rviz2 actually receives"
Where to put Planning/Control parameters in order to integrate Autoware to the specific vehicle,D_kwDOAnasMc4AP67P,2022-04-24T11:27:55Z,takayuki5168,2,Answered,,,
Where to put Planning/Control parameters in order to integrate Autoware to the specific vehicle,D_kwDOAnasMc4AP67P,2022-04-24T11:27:55Z,takayuki5168,2,Answered,DC_kwDOAnasMc4AKAnr,kenji-miyake,"@takayuki5168 I completely agree with you.

Some additional information:
For 2, we can consider managing the parameters on a Web service.
It's because the parameters, such as calibration results or hardware IDs, are usually managed by field operation engineers who aren't familiar with Git.
It would be useful if we can provide some intuitive UIs to them, instead of Git's CLI."
Where to put Planning/Control parameters in order to integrate Autoware to the specific vehicle,D_kwDOAnasMc4AP67P,2022-04-24T11:27:55Z,takayuki5168,2,Answered,DC_kwDOAnasMc4AKA1Q,takayuki5168,cc @yukkysaito @mitsudome-r 
Where to put Planning/Control parameters in order to integrate Autoware to the specific vehicle,D_kwDOAnasMc4AP67P,2022-04-24T11:27:55Z,takayuki5168,2,Answered,DC_kwDOAnasMc4AKBKt,kenji-miyake,"> For1, I found it a bit difficult to put all planning parameters which differs among products in arguments of planning.launch.xml since they are so many. Better to have these parameters as a yaml file in individual_params (the same as control parameters) rather than arguments of xml.

For example, do what parameters differ among products?"
The csv vector map specification,D_kwDOAnasMc4AP67Q,2022-04-25T01:21:37Z,Mud-B,1,Answered,,,
The csv vector map specification,D_kwDOAnasMc4AP67Q,2022-04-25T01:21:37Z,Mud-B,1,Answered,DC_kwDOAnasMc4AKBM2,kenji-miyake,"@Mud-B I guess it's an old format.
Now we use Lanelet2. Please refer to https://github.com/fzi-forschungszentrum-informatik/Lanelet2 and https://github.com/autowarefoundation/autoware.universe/tree/main/map/lanelet2_extension."
The csv vector map specification,D_kwDOAnasMc4AP67Q,2022-04-25T01:21:37Z,Mud-B,1,Answered,DC_kwDOAnasMc4AKBNQ,Mud-B,"Yeah that's the old format, but Autoware.ai seems not support Lanelet2 format?"
The csv vector map specification,D_kwDOAnasMc4AP67Q,2022-04-25T01:21:37Z,Mud-B,1,Answered,DC_kwDOAnasMc4AKBNd,kenji-miyake,"I remember it does support Lanelet2.
https://github.com/Autoware-AI/common/tree/master/lanelet2_extension"
The csv vector map specification,D_kwDOAnasMc4AP67Q,2022-04-25T01:21:37Z,Mud-B,1,Answered,DC_kwDOAnasMc4AKBTq,Mud-B,"OK, i have a try, but i still want to ask my original question, do you know that format, it's kinda unwilling to give up halfway."
The csv vector map specification,D_kwDOAnasMc4AP67Q,2022-04-25T01:21:37Z,Mud-B,1,Answered,DC_kwDOAnasMc4AKDRx,Mud-B,"There comes a new problem in compiling lanelet2_extension package, looks like some lib didn't install,do you know how to fix it?

> Starting >>> lanelet2_extension
--- stderr: lanelet2_extension                             
/opt/ros/melodic/lib/liblanelet2_io.so: undefined reference to `lanelet::LaneletMapLayers::LaneletMapLayers(std::unordered_map<long, lanelet::Lanelet, std::hash<long>, std::equal_to<long>, std::allocator<std::pair<long const, lanelet::Lanelet> > > const&, std::unordered_map<long, lanelet::Area, std::hash<long>, std::equal_to<long>, std::allocator<std::pair<long const, lanelet::Area> > > const&, std::unordered_map<long, std::shared_ptr<lanelet::RegulatoryElement>, std::hash<long>, std::equal_to<long>, std::allocator<std::pair<long const, std::shared_ptr<lanelet::RegulatoryElement> > > > const&, std::unordered_map<long, lanelet::Polygon3d, std::hash<long>, std::equal_to<long>, std::allocator<std::pair<long const, lanelet::Polygon3d> > > const&, std::unordered_map<long, lanelet::LineString3d, std::hash<long>, std::equal_to<long>, std::allocator<std::pair<long const, lanelet::LineString3d> > > const&, std::unordered_map<long, lanelet::Point3d, std::hash<long>, std::equal_to<long>, std::allocator<std::pair<long const, lanelet::Point3d> > > const&)'
/opt/ros/melodic/lib/liblanelet2_io.so: undefined reference to `lanelet::RoleNameString::RegulatoryElement'
/opt/ros/melodic/lib/liblanelet2_io.so: undefined reference to `lanelet::RoleNameString::Outer'
/opt/ros/melodic/lib/liblanelet2_io.so: undefined reference to `lanelet::AttributeNamesString::Area'
/opt/ros/melodic/lib/liblanelet2_io.so: undefined reference to `lanelet::RoleNameString::Centerline'
/opt/ros/melodic/lib/liblanelet2_io.so: undefined reference to `lanelet::AttributeValueString::Relation'
/opt/ros/melodic/lib/liblanelet2_io.so: undefined reference to `lanelet::AttributeValueString::Way'
/opt/ros/melodic/lib/liblanelet2_io.so: undefined reference to `lanelet::RoleNameString::Left'
/opt/ros/melodic/lib/liblanelet2_io.so: undefined reference to `lanelet::AttributeValueString::Node'
/opt/ros/melodic/lib/liblanelet2_io.so: undefined reference to `lanelet::RoleNameString::Inner'
/opt/ros/melodic/lib/liblanelet2_io.so: undefined reference to `lanelet::RoleNameString::Right'
collect2: error: ld returned 1 exit status
make[2]: *** [devel/lib/lanelet2_extension/lanelet2_extension_sample] Error 1
make[1]: *** [CMakeFiles/lanelet2_extension_sample.dir/all] Error 2
make[1]: *** Waiting for unfinished jobs....
/opt/ros/melodic/lib/liblanelet2_io.so: undefined reference to `lanelet::LaneletMapLayers::LaneletMapLayers(std::unordered_map<long, lanelet::Lanelet, std::hash<long>, std::equal_to<long>, std::allocator<std::pair<long const, lanelet::Lanelet> > > const&, std::unordered_map<long, lanelet::Area, std::hash<long>, std::equal_to<long>, std::allocator<std::pair<long const, lanelet::Area> > > const&, std::unordered_map<long, std::shared_ptr<lanelet::RegulatoryElement>, std::hash<long>, std::equal_to<long>, std::allocator<std::pair<long const, std::shared_ptr<lanelet::RegulatoryElement> > > > const&, std::unordered_map<long, lanelet::Polygon3d, std::hash<long>, std::equal_to<long>, std::allocator<std::pair<long const, lanelet::Polygon3d> > > const&, std::unordered_map<long, lanelet::LineString3d, std::hash<long>, std::equal_to<long>, std::allocator<std::pair<long const, lanelet::LineString3d> > > const&, std::unordered_map<long, lanelet::Point3d, std::hash<long>, std::equal_to<long>, std::allocator<std::pair<long const, lanelet::Point3d> > > const&)'
/opt/ros/melodic/lib/liblanelet2_io.so: undefined reference to `lanelet::RoleNameString::RegulatoryElement'
/opt/ros/melodic/lib/liblanelet2_io.so: undefined reference to `lanelet::RoleNameString::Outer'
/opt/ros/melodic/lib/liblanelet2_io.so: undefined reference to `lanelet::AttributeNamesString::Area'
/opt/ros/melodic/lib/liblanelet2_io.so: undefined reference to `lanelet::RoleNameString::Centerline'
/opt/ros/melodic/lib/liblanelet2_io.so: undefined reference to `lanelet::AttributeValueString::Relation'
/opt/ros/melodic/lib/liblanelet2_io.so: undefined reference to `lanelet::AttributeValueString::Way'
/opt/ros/melodic/lib/liblanelet2_io.so: undefined reference to `lanelet::RoleNameString::Left'
/opt/ros/melodic/lib/liblanelet2_io.so: undefined reference to `lanelet::AttributeValueString::Node'
/opt/ros/melodic/lib/liblanelet2_io.so: undefined reference to `lanelet::RoleNameString::Inner'
/opt/ros/melodic/lib/liblanelet2_io.so: undefined reference to `lanelet::RoleNameString::Right'
collect2: error: ld returned 1 exit status
make[2]: *** [devel/lib/lanelet2_extension/autoware_lanelet2_validation] Error 1
make[1]: *** [CMakeFiles/autoware_lanelet2_validation.dir/all] Error 2
make: *** [all] Error 2
---
Failed   <<< lanelet2_extension [3.40s, exited with code 2]
"
The csv vector map specification,D_kwDOAnasMc4AP67Q,2022-04-25T01:21:37Z,Mud-B,1,Answered,DC_kwDOAnasMc4AKDSM,kenji-miyake,"I'm sorry, I'm not falimliar with `melodic` issues. :cry:"
The csv vector map specification,D_kwDOAnasMc4AP67Q,2022-04-25T01:21:37Z,Mud-B,1,Answered,DC_kwDOAnasMc4AKDTe,Mud-B,"Alright, thanks for your rapid reply. "
The csv vector map specification,D_kwDOAnasMc4AP67Q,2022-04-25T01:21:37Z,Mud-B,1,Answered,DC_kwDOAnasMc4AKDYS,Sharrrrk,"@Mud-B Just a quick check, have you installed the ROS dependencies?"
The csv vector map specification,D_kwDOAnasMc4AP67Q,2022-04-25T01:21:37Z,Mud-B,1,Answered,DC_kwDOAnasMc4AKDY6,Mud-B,"> @Mud-B Just a quick check, have you installed the ROS dependencies?

I'm sure the ROS dependencies is installed, i follow the official installation document both ROS melodic and Autoware.Ai, and all test passed.Just this new package ""lanelet2_extension"" doesn't pass."
The csv vector map specification,D_kwDOAnasMc4AP67Q,2022-04-25T01:21:37Z,Mud-B,1,Answered,DC_kwDOAnasMc4AKHmf,mitsudome-r,"I just tried with ros_melodic docker, but wasn't able to reproduce the error. (The build passed without any error)
```
docker pull ros:melodic
docker run -it --name melodic_autoware ros:melodic
sudo apt update
sudo apt install -y python3-pip python3-colcon-common-extensions python3-setuptools python3-vcstool
pip3 install -U setuptools
mkdir -p autoware.ai/src
cd autoware.ai/
sudo apt install wget
wget -O autoware.ai.repos ""https://raw.githubusercontent.com/Autoware-AI/autoware.ai/master/autoware.ai.repos""
vcs import src < autoware.ai.repos
rosdep update
rosdep install -y --from-paths src --ignore-src --rosdistro $ROS_DISTRO
colcon build --cmake-args -DCMAKE_BUILD_TYPE=Release --packages-up-to lanelet2_extension
```"
The csv vector map specification,D_kwDOAnasMc4AP67Q,2022-04-25T01:21:37Z,Mud-B,1,Answered,DC_kwDOAnasMc4AKHnI,Mud-B,"OK i didn't use docker before, I will have a try.thanks for your reply."
Regarding slow output rate in ROS2,D_kwDOAnasMc4AP67R,2022-04-25T05:37:15Z,ajay1606,6,Answered,,,
Regarding slow output rate in ROS2,D_kwDOAnasMc4AP67R,2022-04-25T05:37:15Z,ajay1606,6,Answered,DC_kwDOAnasMc4AKBbP,storrrrrrrrm,"you can open system monitor of Ubuntu to see  if the network load reaches the upper limit
"
Regarding slow output rate in ROS2,D_kwDOAnasMc4AP67R,2022-04-25T05:37:15Z,ajay1606,6,Answered,DC_kwDOAnasMc4AKBdf,ajay1606,"@storrrrrrrrm Thanks so much for your quick response. And here is the system monitor plot. 

Bag file simulation, running with autoware:

![image](https://user-images.githubusercontent.com/29722843/165035803-7255fef3-1fa0-452d-b20d-3e167db9713a.png)

Just running bag file:
![image](https://user-images.githubusercontent.com/29722843/165038263-4bd6c990-8d06-4d2c-b07b-62846d11c4aa.png)


Hardware specs as follows:

Architecture = x86_64
CPU = 12-core, Intel(R) Xeon(R) E-2176G CPU @ 3.70GHz
Mainboard = Neousys Technology Inc., NVS-8208
RAM = 31.2 GB

GPU model = TITAN V
GPU RAM = 11.7 GB
Memory Bus width = 3072-bit
CUDA cores = 5120 cores

But still, topic output rates fall down to 7 to 8 Hz. Is there any specific configuration that needs to be done before running Autoware?
And with the same hardware configurations, there were no issues with ROS1 (https://github.com/tier4/AutowareArchitectureProposal.proj version 0.9.1)

Greatly appreciate it if you could help us fix this ROS2 issue !, Thanks 

Regards,
Ajay"
Regarding slow output rate in ROS2,D_kwDOAnasMc4AP67R,2022-04-25T05:37:15Z,ajay1606,6,Answered,DC_kwDOAnasMc4AKBlf,storrrrrrrrm,"I don't know what the upper limit of the transmission capacity of your switch,  You can disconnect the network and test again to  see if problem still exists.  

besides,this is the cyclonedds.xml we use on our real car.
```
<CycloneDDS>
    <Domain id=""any"">
        <General>
            <NetworkInterfaceAddress>auto</NetworkInterfaceAddress>
            <AllowMulticast>spdp</AllowMulticast>
        </General>
    </Domain>
</CycloneDDS>
```
i do not quite understand this since i am not doing dds related stuff, it works on our car,u can have a try.
"
Regarding slow output rate in ROS2,D_kwDOAnasMc4AP67R,2022-04-25T05:37:15Z,ajay1606,6,Answered,DC_kwDOAnasMc4AKBlg,Sharrrrk,"I suggest you firstly tune cyclone DDS according to https://docs.ros.org/en/foxy/How-To-Guides/DDS-tuning.html.

Also you could refer to the instruction given by TakaHoribe:
https://github.com/orgs/autowarefoundation/discussions/204#discussioncomment-2608081"
Regarding slow output rate in ROS2,D_kwDOAnasMc4AP67R,2022-04-25T05:37:15Z,ajay1606,6,Answered,DC_kwDOAnasMc4AKBme,ajay1606,"@storrrrrrrrm & @Sharrrrk Thanks so much for your suggestions, I will try out as you suggested and get back to you as soon as possible. "
Regarding slow output rate in ROS2,D_kwDOAnasMc4AP67R,2022-04-25T05:37:15Z,ajay1606,6,Answered,DC_kwDOAnasMc4AKJON,ajay1606,"> cyclonedds.xml

Hello @storrrrrrrrm , Would you please let me know, where can I find this `cyclonedds.xml` on my computer? "
Regarding slow output rate in ROS2,D_kwDOAnasMc4AP67R,2022-04-25T05:37:15Z,ajay1606,6,Answered,DC_kwDOAnasMc4AKJOo,storrrrrrrrm,"> > cyclonedds.xml
> 
> Hello @storrrrrrrrm , Would you please let me know, where can I find this `cyclonedds.xml` on my computer?

you should create this file manually. then export CYCLONEDDS_URI to your file path
```
export CYCLONEDDS_URI=/autoware/cyclonedds.xml
```"
Regarding slow output rate in ROS2,D_kwDOAnasMc4AP67R,2022-04-25T05:37:15Z,ajay1606,6,Answered,DC_kwDOAnasMc4AKHng,mitsudome-r,"FYI: In the past, I had a case where `ros2 topic hz` had lower output compared to the actual topic frequency for large messages.
I'm doubting it's due to the difference between the python vs cpp implementation of rcl API.

I'm not sure if it is fixed in newest galactic, but you can use the following topic frequency check tool that use cpp to get the actual topic frequency.
https://github.com/tier4/topic_tools

```
ros2 launch topic_tools hz_checker.launch.xml t:=topic_name
```"
Regarding slow output rate in ROS2,D_kwDOAnasMc4AP67R,2022-04-25T05:37:15Z,ajay1606,6,Answered,DC_kwDOAnasMc4AKHoa,Sharrrrk,"> FYI: In the past, I had a case where `ros2 topic hz` had lower output compared to the actual topic frequency for large messages. I'm doubting it's due to the difference between the python vs cpp implementation of rcl API.

I also met this before using foxy. Good to know this tool."
Regarding slow output rate in ROS2,D_kwDOAnasMc4AP67R,2022-04-25T05:37:15Z,ajay1606,6,Answered,DC_kwDOAnasMc4AKHo7,ajay1606,"> FYI: In the past, I had a case where `ros2 topic hz` had lower output compared to the actual topic frequency for large messages. I'm doubting it's due to the difference between the python vs cpp implementation of rcl API.
> 
> I'm not sure if it is fixed in newest galactic, but you can use the following topic frequency check tool that use cpp to get the actual topic frequency. https://github.com/tier4/topic_tools
> 
> ```
> ros2 launch topic_tools hz_checker.launch.xml t:=topic_name
> ```

Thank you so much, Indeed very useful information. "
Regarding slow output rate in ROS2,D_kwDOAnasMc4AP67R,2022-04-25T05:37:15Z,ajay1606,6,Answered,DC_kwDOAnasMc4AKHsf,storrrrrrrrm,"> FYI: In the past, I had a case where `ros2 topic hz` had lower output compared to the actual topic frequency for large messages. I'm doubting it's due to the difference between the python vs cpp implementation of rcl API.
> 
> I'm not sure if it is fixed in newest galactic, but you can use the following topic frequency check tool that use cpp to get the actual topic frequency. https://github.com/tier4/topic_tools
> 
> ```
> ros2 launch topic_tools hz_checker.launch.xml t:=topic_name
> ```

thanks!  very helpful."
Regarding slow output rate in ROS2,D_kwDOAnasMc4AP67R,2022-04-25T05:37:15Z,ajay1606,6,Answered,DC_kwDOAnasMc4AKJaK,ajay1606,"@storrrrrrrrm & @Sharrrrk  I have tried with as you suggested, exporting CYCLONEDDS_URI to cyclonedds.xml file and then Also instruction given by TakaHoribe:[here]( https://github.com/orgs/autowarefoundation/discussions/204#discussioncomment-2608081). And observed that,
output rate of topic: `/sensing/lidar/top/velodyne_packets` some what maintaining on avg 9.5hz, but output rate of `/sensing/lidar/top/pointcloud_raw` getting dropped.

And CPU stress looks as below: Where velodyne container node which is responsible for publishing `/sensing/lidar/top/pointcloud_raw` topic consuming much of CPU resources ,
![image](https://user-images.githubusercontent.com/29722843/165906565-d1fe8ef3-40fb-40ac-9441-b42c4c140275.png)

Are there any possible ways to overcome this issue?

Regarding `ros2 topic hz` tool i have tried with the @mitsudome-r recommended package. And observed that, the tool shows very consistent output rate for topic `/sensing/lidar/top/velodyne_packets`, and a very inconsistent topic rate for `/sensing/lidar/top/pointcloud_raw` .

Example, `/sensing/lidar/top/velodyne_packets` topic rat e was very consistent with showing rate as 9.5~ to 9.6hz, but for the topic `/sensing/lidar/top/pointcloud_raw` topic rate very inconsistent, there are sudden jumps from 6hz to 9hz and 9 hz 6hz in consecutive readings. 

![image](https://user-images.githubusercontent.com/29722843/165908241-35925380-481f-43b6-91a6-3c94e70c70a4.png)

In the case of `ros2 topic hz` it was very consistent with both the topic data like  /sensing/lidar/top/velodyne_packets` maintained at avg of 9 hz while `/sensing/lidar/top/pointcloud_raw` drops to 6hz gradually not suddenly. 

![image](https://user-images.githubusercontent.com/29722843/165908613-72586aa6-7498-467f-a23d-d2c648245b08.png)


And after referring to this [link](https://docs.ros.org/en/galactic/How-To-Guides/DDS-tuning.html), still, it is unknown that, for what reason does topic rate getting slows down for  `/sensing/lidar/top/pointcloud_raw` , Any hint greatly appreciated. 

Regards,
Ajay


"
Regarding slow output rate in ROS2,D_kwDOAnasMc4AP67R,2022-04-25T05:37:15Z,ajay1606,6,Answered,DC_kwDOAnasMc4APYfu,nainaigetuide,@ajay1606  Did you solve this problem please?
Regarding slow output rate in ROS2,D_kwDOAnasMc4AP67R,2022-04-25T05:37:15Z,ajay1606,6,Answered,DC_kwDOAnasMc4AWlul,hect95,@ajay1606 Did you find any solution for this?
Regarding slow output rate in ROS2,D_kwDOAnasMc4AP67R,2022-04-25T05:37:15Z,ajay1606,6,Answered,DC_kwDOAnasMc4AWly6,ajay1606,"@hect95 Here is the very useful discussion related to slow rate. Indeed, it worked well for me. Please check it once.
https://github.com/autowarefoundation/autoware.universe/issues/2597#issuecomment-1477365226

Make sure to delete previous build (install, log, build) directory before build workspace using following command.
`colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=RelWithDebInfo -DCMAKE_EXPORT_COMPILE_COMMANDS=1 --continue-on-error`

"
Regarding slow output rate in ROS2,D_kwDOAnasMc4AP67R,2022-04-25T05:37:15Z,ajay1606,6,Answered,DC_kwDOAnasMc4AWuVE,hect95,"Hey @ajay1606, this seems to work, so thank you very much for this!

However, when I try to record a rosbag with LIDAR pointlcouds, rates becomes slower.

I am using two lidars, one that is defined as Reliable QoS and the second one as best effort, do you think the problem can be related to this subject?"
Regarding slow output rate in ROS2,D_kwDOAnasMc4AP67R,2022-04-25T05:37:15Z,ajay1606,6,Answered,DC_kwDOAnasMc4AWv0s,ajay1606,"@hect95 I would suggest to check cyclone DDS configuration once [here](https://autowarefoundation.github.io/autoware-documentation/main/installation/additional-settings-for-developers/), and increase the buffer size as it mentioned.

Also, for real time sensor data, it is strongly recommended to set **best effort** in QoS profile.

By the way is there any specific reason to choose different modes (Reliable , Best effort) for 2 Lidars ?
"
A combination of Euclidean Clustering and Shape Estimation fails to capture detected objects,D_kwDOAnasMc4AP67S,2022-04-25T10:54:07Z,kminoda,2,Answered,,,
A combination of Euclidean Clustering and Shape Estimation fails to capture detected objects,D_kwDOAnasMc4AP67S,2022-04-25T10:54:07Z,kminoda,2,Answered,DC_kwDOAnasMc4AKHY7,yukkysaito,@kminoda Can you show the perception.launch?
A combination of Euclidean Clustering and Shape Estimation fails to capture detected objects,D_kwDOAnasMc4AP67S,2022-04-25T10:54:07Z,kminoda,2,Answered,DC_kwDOAnasMc4AKHZQ,yukkysaito,"Currently for UNKNOWN objects, the shape type is POLYGON. Therefore, dimension is correct at 0.0.
https://github.com/tier4/autoware_auto_msgs/blob/tier4/main/autoware_auto_perception_msgs/msg/Shape.idl

Maybe, DetectedObjects as UNKNOWN is already published. Can you turn on the Detection visualization in Rviz?"
A combination of Euclidean Clustering and Shape Estimation fails to capture detected objects,D_kwDOAnasMc4AP67S,2022-04-25T10:54:07Z,kminoda,2,Answered,DC_kwDOAnasMc4AKHZh,shmpwk,"perception.launch is the same as the original one.
We changed [lidar_based_detection.launch.xml](https://github.com/team-tier4-FY22/autoware.universe.fy22/blob/debug-detection/launch/tier4_perception_launch/launch/object_recognition/detection/lidar_based_detection.launch.xml) called in perception.launch.
We skip detecting objects with apollo or center point."
A combination of Euclidean Clustering and Shape Estimation fails to capture detected objects,D_kwDOAnasMc4AP67S,2022-04-25T10:54:07Z,kminoda,2,Answered,DC_kwDOAnasMc4AKHaF,shmpwk,"> Maybe, DetectedObjects as UNKNOWN is already published. Can you turn on the Detection visualization in Rviz?

Yes. UNKNOWN objects appeared in Rviz as  /perception/object_recognition/detection/objects.
But the object in /perception/object_recognition/tracking/objects is empty. 
"
A combination of Euclidean Clustering and Shape Estimation fails to capture detected objects,D_kwDOAnasMc4AP67S,2022-04-25T10:54:07Z,kminoda,2,Answered,DC_kwDOAnasMc4AKHaW,yukkysaito,"@shmpwk Can you remove the merger node and publish from clustering directly as `detection/objects`.
Then, pls turn on the Detection visualization in Rviz."
A combination of Euclidean Clustering and Shape Estimation fails to capture detected objects,D_kwDOAnasMc4AP67S,2022-04-25T10:54:07Z,kminoda,2,Answered,DC_kwDOAnasMc4AKHak,yukkysaito,">Yes. UNKNOWN objects appeared in Rviz as /perception/object_recognition/detection/objects.
But the object in /perception/object_recognition/tracking/objects is empty.

I see.
Pls put 1 at unknown-unknown matrix.
https://github.com/autowarefoundation/autoware.universe/blob/main/launch/tier4_perception_launch/config/object_recognition/tracking/multi_object_tracker/data_association_matrix.param.yaml#L5"
A combination of Euclidean Clustering and Shape Estimation fails to capture detected objects,D_kwDOAnasMc4AP67S,2022-04-25T10:54:07Z,kminoda,2,Answered,DC_kwDOAnasMc4AKHbv,shmpwk,"Solved thank you!

> Can you remove the merger node and publish from clustering directly as detection/objects.Then, pls turn on the Detection visualization in Rviz.

First, I interpreted objects removing merger node as getting input objects of merger node.
The detected/objects with skiped merger (=/perception/object_recognition/detection/clustering/clusters_without_feature for us) is as follows.
![Screenshot from 2022-04-28 13-48-40](https://user-images.githubusercontent.com/42209144/165679028-035d4574-6d83-488e-b40e-5baad37b1fe9.png)
It seems UNKNOWN objects are detected.
But failed to visualize tracked objects. (They are not visualize but empty object topic is published.)


The key is 
>Pls put 1 at unknown-unknown matrix.

I can get tracked objects and also predicted objects.
The predicted objects is as follow 

Before:
![Screenshot from 2022-04-28 14-05-51](https://user-images.githubusercontent.com/42209144/165680285-3d31b83d-7191-4bc4-8ee7-8f83fcc1cfe9.png)


After
![Screenshot from 2022-04-28 13-59-09](https://user-images.githubusercontent.com/42209144/165680141-f940e87c-84a1-4bff-ae40-8ce9f4910082.png)
:"
A combination of Euclidean Clustering and Shape Estimation fails to capture detected objects,D_kwDOAnasMc4AP67S,2022-04-25T10:54:07Z,kminoda,2,Answered,DC_kwDOAnasMc4AKHdm,shmpwk,"@yukkysaito 
As you mentioned https://github.com/orgs/autowarefoundation/discussions/225#discussioncomment-2651812, 
without specifying the `parameter can_assign_matrix` as 1, the target objects cannot be tracked.

But [readme](https://github.com/autowarefoundation/autoware.universe/tree/main/perception/multi_object_tracker#ekf-tracker) says unknown objects should be tracked.

Does UNKNOWN-UNKNOWN `parameter can_assign_matrix` is 0 match your expectation? 
Or can I creat PR for it?


"
A combination of Euclidean Clustering and Shape Estimation fails to capture detected objects,D_kwDOAnasMc4AP67S,2022-04-25T10:54:07Z,kminoda,2,Answered,DC_kwDOAnasMc4AKm3t,yukkysaito,"@shmpwk I'm working about it, so pls wait a minutes
https://github.com/autowarefoundation/autoware.universe/pull/870
"
A combination of Euclidean Clustering and Shape Estimation fails to capture detected objects,D_kwDOAnasMc4AP67S,2022-04-25T10:54:07Z,kminoda,2,Answered,DC_kwDOAnasMc4AKHZc,shmpwk,"As for the dimension x&y of  convex hull model is 0, the convex hull model is Amorphous.
But it is not the cause of failure to capture detected objects.

Thus the title is our misunderstaning 
> A combination of Euclidean Clustering and Shape Estimation fails to capture detected objects

The correct title is ""Tracking UNKNOWN object fails""

I'm debug now and at the moment I found that unknown object cannot be tracked well in multi_object_tracker. 
I'm investigating it more now."
A combination of Euclidean Clustering and Shape Estimation fails to capture detected objects,D_kwDOAnasMc4AP67S,2022-04-25T10:54:07Z,kminoda,2,Answered,DC_kwDOAnasMc4AKHcG,shmpwk,This problem is solved with https://github.com/autowarefoundation/autoware/discussions/225#discussioncomment-2651812. 
Autoware.Auto Neural Networks Inference Architecture Design,D_kwDOAnasMc4AP67T,2022-04-25T11:26:07Z,xmfcx,1,Answered,,,
Autoware.Auto Neural Networks Inference Architecture Design,D_kwDOAnasMc4AP67T,2022-04-25T11:26:07Z,xmfcx,1,Answered,DC_kwDOAnasMc4AKPmj,ambroise-arm,"Thanks for the diagrams!
Note that with the current Autoware.Auto implementation, the download step only happens in the `neural_networks` package. `tvm_utility` and `apollo_lidar_segmentation` simply use the files that were installed and exposed by `neural_networks`."
2022-04-26 ODD working group weekly meeting (90),D_kwDOAnasMc4AP67U,2022-04-25T15:15:34Z,Igata-ctrl,0,Unanswered,,,
Tensorrt_yolo issue in autoware universe,D_kwDOAnasMc4AP67V,2022-04-26T01:20:24Z,amtommy,3,Answered,,,
Tensorrt_yolo issue in autoware universe,D_kwDOAnasMc4AP67V,2022-04-26T01:20:24Z,amtommy,3,Answered,DC_kwDOAnasMc4AKDnH,shmpwk,"You can customize your own config parameter [here](https://github.com/autowarefoundation/autoware.universe/tree/main/perception/tensorrt_yolo/config)
such as iou_thresh, ignore_thresh, or anchor size.



"
Tensorrt_yolo issue in autoware universe,D_kwDOAnasMc4AP67V,2022-04-26T01:20:24Z,amtommy,3,Answered,DC_kwDOAnasMc4AKDy9,amtommy,"Thanks for your reply.

I changed the threshold, but I still got the incorrect result. [[figure]](https://drive.google.com/file/d/1rG6pRlhcTbTJVh8RpnPYGf64Vrlxw52l/view?usp=sharing)
* score_thread = 0.5
* iou_thresh = 0.5
* ignore_thresh = 0.8
* Onnx file from autoware.universe [[link]](https://github.com/autowarefoundation/autoware.universe/blob/main/perception/tensorrt_yolo/README.md?plain=1#L71)

 I used the Yolo official image (dog.jpg) to recognize, but also got the incorrect result. [[figure]](https://drive.google.com/file/d/1IzyoXxSqC7nJxz33Yr8-il1lhCZy7AI3/view?usp=sharing)"
Tensorrt_yolo issue in autoware universe,D_kwDOAnasMc4AP67V,2022-04-26T01:20:24Z,amtommy,3,Answered,DC_kwDOAnasMc4AKEVI,shmpwk,"Hmmm... weird...but as you mentioned the [link](https://github.com/autowarefoundation/autoware.universe/blob/main/perception/tensorrt_yolo/README.md?plain=1#L71), the network weight and conf is based on the [open model](https://github.com/pjreddie/darknet) for example, and we fine-tune the network to adapt our domain. You can also fine tune the model if you have your own dataset.

If you would like to get more precise results for your custom image, I recommend to use the upper version of yolo or other SOTA model.
If you would like to use image recognition for Autoware, you can avoid the problem for now since currently we use yolo mainly for the traffic light recognition [here](https://github.com/autowarefoundation/autoware.universe/tree/main/launch/tier4_perception_launch/launch/traffic_light_recognition). As far as  other objects recognition like vehicle, Autoware uses the combination of lidar points and image recognition [here](https://github.com/autowarefoundation/autoware.universe/tree/main/launch/tier4_perception_launch/launch/object_recognition/detection).  We are trying to imporove the accuracy of the image recognition day by day."
Tensorrt_yolo issue in autoware universe,D_kwDOAnasMc4AP67V,2022-04-26T01:20:24Z,amtommy,3,Answered,DC_kwDOAnasMc4AKFmJ,mitsudome-r,@amtommy Could you provide a rosbag + launch file that you used so that other engineers can look for the cause?
Tensorrt_yolo issue in autoware universe,D_kwDOAnasMc4AP67V,2022-04-26T01:20:24Z,amtommy,3,Answered,DC_kwDOAnasMc4AKFqt,amtommy,"Details are provided below:
- [rosbag](https://drive.google.com/drive/folders/1ZmS-ol7X2xzEn-FNAYg7sD6VJHOZlGAq?usp=sharing): The topic name is /cam/front_bottom_60.
- [launch file](https://github.com/autowarefoundation/autoware.universe/blob/main/perception/tensorrt_yolo/launch/tensorrt_yolo.launch.xml)
- [original parameter](https://github.com/autowarefoundation/autoware.universe/blob/main/perception/tensorrt_yolo/config/yolov3.param.yaml)
- [original model](https://github.com/autowarefoundation/autoware.universe/blob/main/perception/tensorrt_yolo/README.md?plain=1#L71)
"
Tensorrt_yolo issue in autoware universe,D_kwDOAnasMc4AP67V,2022-04-26T01:20:24Z,amtommy,3,Answered,DC_kwDOAnasMc4AKj82,xmfcx,Let's solve it in this issue: https://github.com/autowarefoundation/autoware.universe/issues/918
How to get the int8 engine in Tensorrt_yolo?,D_kwDOAnasMc4AP67W,2022-04-26T01:31:52Z,amtommy,1,Answered,,,
How to get the int8 engine in Tensorrt_yolo?,D_kwDOAnasMc4AP67W,2022-04-26T01:31:52Z,amtommy,1,Answered,DC_kwDOAnasMc4AKDXW,storrrrrrrrm,"set `mode` in launch.xml from `FP32` to `INT8`

```
<launch>
  <arg name=""yolo_type"" default=""yolov3""/>
  <arg name=""label_file"" default=""coco.names""/>
  <arg name=""input_topic"" default=""/image_raw""/>
  <arg name=""output_topic"" default=""rois""/>
  <arg name=""calib_image_directory"" default=""$(find-pkg-share tensorrt_yolo)/calib_image/""/>
  <arg name=""mode"" default=""FP32""/>
```"
How to get the int8 engine in Tensorrt_yolo?,D_kwDOAnasMc4AP67W,2022-04-26T01:31:52Z,amtommy,1,Answered,DC_kwDOAnasMc4AKFP_,amtommy,"Thanks for your reply. It's very helpful!
I would like to build my own model. Do you know how to create the onnx file? 
How many calibration images do we need for int8 inference?"
How to get the int8 engine in Tensorrt_yolo?,D_kwDOAnasMc4AP67W,2022-04-26T01:31:52Z,amtommy,1,Answered,DC_kwDOAnasMc4AKFSJ,storrrrrrrrm,"> Thanks for your reply. It's very helpful! I would like to build my own model. Do you know how to create the onnx file? 

have a look at this https://github.com/ultralytics/yolov3/blob/master/export.py

> How many calibration images do we need for int8 inference?

have no expirence about this,but i think there may not be a general answer, it may be relevant to your specific dataset"
Source build on ARM64 fails: (librcl_logging_spdlog.so),D_kwDOAnasMc4AP67X,2022-04-26T08:48:39Z,mojomex,1,Answered,,,
Source build on ARM64 fails: (librcl_logging_spdlog.so),D_kwDOAnasMc4AP67X,2022-04-26T08:48:39Z,mojomex,1,Answered,DC_kwDOAnasMc4AKEAL,mojomex,"It turns out I had to
1. `sudo rm -rf /opt/ros/galactic/`
2. `sudo apt remove ros-galactic-*`
3. `rm -rf ~/autoware/`

and then follow the setup again.
I will leave this here for people with the same problem."
What should be the output of the gnss/ins driver?,D_kwDOAnasMc4AP67Y,2022-04-26T09:00:13Z,xmfcx,1,Answered,,,
What should be the output of the gnss/ins driver?,D_kwDOAnasMc4AP67Y,2022-04-26T09:00:13Z,xmfcx,1,Answered,DC_kwDOAnasMc4AKD3B,xmfcx,Duplicate of https://github.com/orgs/autowarefoundation/discussions/216
Simulator requirements,D_kwDOAnasMc4AP67Z,2022-04-26T09:48:38Z,WJaworskiRobotec,7,Answered,,,
Simulator requirements,D_kwDOAnasMc4AP67Z,2022-04-26T09:48:38Z,WJaworskiRobotec,7,Answered,DC_kwDOAnasMc4AKEEp,brkay54,"About `Integration interface with AWF/Universe`,  I don't know we can access them or not in current design but I think we should be able to access the vehicles state (position, orientation, steering tire angle etc.) without any noise to evaluate the modules."
Simulator requirements,D_kwDOAnasMc4AP67Z,2022-04-26T09:48:38Z,WJaworskiRobotec,7,Answered,DC_kwDOAnasMc4AKEF9,WJaworskiRobotec,"Integration interface description prepared by TierIV (still under development, table will be updated according to any changes). CC: @brkay54 

publish / subscribe | category | topic | msg | frame_id | hz
-- | -- | -- | -- | -- | --
publish | clock | /clock | rosgraph_msgs/Clock |   | 100~1000
subscribe | control | /control/command/turn_indicators_cmd | autoware_auto_vehicle_msgs/TurnIndicatorsCommand |   | 10
subscribe | control | /control/command/hazard_lights_cmd | autoware_auto_vehicle_msgs/HazardLightsCommand |   | 10
subscribe | control | /control/command/control_cmd | autoware_auto_control_msgs/AckermannControlCommand |   | 60
subscribe | control | /control/command/gear_cmd | autoware_auto_vehicle_msgs/GearCommand |   | 10
subscribe | control | /control/command/emergency_cmd | tier4_vehicle_msgs/msg/VehicleEmergencyStamped |   | 60
publish | camera | /sensing/camera/traffic_light/camera_info | sensor_msgs/CameraInfo | traffic_light_left_camera/camera_link | 10
publish | camera | /sensing/camera/traffic_light/image_raw | sensor_msgs/Image | traffic_light_left_camera/camera_link | 10
publish | gps | /sensing/gnss/pose | geometry_msgs/PoseStamped | gnss_link | 1
publish | gps | /sensing/gnss/pose_with_covariance | geometry_msgs/PoseWithCovarianceStamped | gnss_link | 1
publish | imu | /sensing/imu/tamagawa/imu_raw | sensor_msgs/Imu | tamagawa/imu_link | 30
publish | lidar | /sensing/lidar/left/pointcloud_raw | sensor_msgs/PointCloud2 | velodyne_left_base_link | 10
publish | lidar | /sensing/lidar/left/pointcloud_raw_ex | sensor_msgs/PointCloud2 | velodyne_left_base_link | 10
publish | lidar | /sensing/lidar/right/pointcloud_raw | sensor_msgs/PointCloud2 | velodyne_right_base_link | 10
publish | lidar | /sensing/lidar/right/pointcloud_raw_ex | sensor_msgs/PointCloud2 | velodyne_right_base_link | 10
publish | lidar | /sensing/lidar/top/pointcloud_raw | sensor_msgs/PointCloud2 | sensor_kit_base_link | 10
publish | lidar | /sensing/lidar/top/pointcloud_raw_ex | sensor_msgs/PointCloud2 | sensor_kit_base_link | 10
publish | vehicle status | /vehicle/status/control_mode | autoware_auto_vehicle_msgs/ControlModeReport |   | 30
publish | vehicle status | /vehicle/status/gear_status | autoware_auto_vehicle_msgs/GearReport |   | 30
publish | vehicle status | /vehicle/status/steering_status | autoware_auto_vehicle_msgs/SteeringReport |   | 30
publish | vehicle status | /vehicle/status/turn_indicators_status | autoware_auto_vehicle_msgs/TurnIndicatorsReport |   | 30
publish | vehicle status | /vehicle/status/hazard_lights_status | autoware_auto_vehicle_msgs/HazardLightsReport |   | 30
publish | vehicle status | /vehicle/status/velocity_status | autoware_auto_vehicle_msgs/VehicleReport | base_link | 30

"
Simulator requirements,D_kwDOAnasMc4AP67Z,2022-04-26T09:48:38Z,WJaworskiRobotec,7,Answered,DC_kwDOAnasMc4AKEKA,brkay54,@WJaworskiRobotec I guess that these outputs will be noisy in autoware right? Actually I wanted to ask that there will be any gate to access these outputs of simulation without any noise? Or will we able to determine the noises of these outputs? Because in LGSVL we couldn't access the raw outputs of simulation (I guess).  
Simulator requirements,D_kwDOAnasMc4AP67Z,2022-04-26T09:48:38Z,WJaworskiRobotec,7,Answered,DC_kwDOAnasMc4AKEKh,WJaworskiRobotec,@brkay54 Ok I see your point. You mean to add to the simulation publication of Ground Truth information about position/orientation/steering angle etc. to be able to evaluate e.g. Localization algorithms accuracy ? I fully agree that such topics should be added to the simulation
Simulator requirements,D_kwDOAnasMc4AP67Z,2022-04-26T09:48:38Z,WJaworskiRobotec,7,Answered,DC_kwDOAnasMc4AKEiC,sglee-morai,"## 1. About Simulation Environment
### 1.1 The simulator shall support 3D environment that can match lanelet2 data which are used for SUT (Autoware-based autonomous driving software)

For the bus-odd, the following maps in lanelet2 are available. Which map will be used for validation isn't decided yet.
- Hsinchu-city
- ITRI Campus

 
### 1.2 The simulator shall support traffic lights

(TBD) Which types of traffic lights should be supported by the simulator

Related Use-cases for this (bus odd document)
- UC-PB-001-0009
- UC-PB-008-0001 (not 100% sure)
- UC-PB-008-0007 (not 100% sure)
- UC-PB-009-0001 (not 100% sure)


### 1.3 The simulator shall support traffic signs (TBD)

Need a discussion. The bus-odd document does not specify requirements where the bus shall do a certain action when detecting a certain traffic sign

"
Simulator requirements,D_kwDOAnasMc4AP67Z,2022-04-26T09:48:38Z,WJaworskiRobotec,7,Answered,DC_kwDOAnasMc4AKEkX,sglee-morai,"## 2. About Vehicle Model

### 2.1 The simulator shall support a vehicle model that can meet performance requirements specified by the bus odd document

- Acceleration: 1.75 m/s^2
- Jerk: 2.5 m/s^3
- Stopping distance from 60km/h: 78m (approx.)
- Stopping distance from 50km/h: 54m (approx.)
- Stopping distance from 40km/h: 34m (approx.)
- Stopping distance from 30km/h: 19m (approx.)


### 2.2 The vehicle model in the simulator shall have state variables that are published to SUT as vehicle status

A short list for vehicle status (**[Warning] The list must be updated when the integration interface section is updated**)
- /vehicle/status/control_mode (autoware_auto_vehicle_msgs/ControlModeReport)
- /vehicle/status/gear_status (autoware_auto_vehicle_msgs/GearReport)
- /vehicle/status/steering_status (autoware_auto_vehicle_msgs/SteeringReport)
- /vehicle/status/turn_indicators_status (autoware_auto_vehicle_msgs/TurnIndicatorsReport )
- /vehicle/status/hazard_lights_status (autoware_auto_vehicle_msgs/HazardLightsReport)
- /vehicle/status/velocity_status(autoware_auto_vehicle_msgs/VehicleReport)

For more detail, refer to the integration interface section 


### 2.3 The vehicle model in the simulator shall propagate its internal dynamics using control commands from SUT as an input

A short list for vehicle commands (**[Warning] The list above must be updated when the integration interface section is updated**)
- /control/command/turn_indicators_cmd | autoware_auto_vehicle_msgs/TurnIndicatorsCommand
- /control/command/hazard_lights_cmd | autoware_auto_vehicle_msgs/HazardLightsCommand
- /control/command/control_cmd | autoware_auto_control_msgs/AckermannControlCommand
- /control/command/gear_cmd | autoware_auto_vehicle_msgs/GearCommand
- /control/command/emergency_cmd | tier4_vehicle_msgs/msg/VehicleEmergencyStamped

For more detail, refer to the integration interface section 


### 2.4 The vehicle model in the simulator shall propagate its internal dynamics using collision with the road surface


### 2.5 The vehicle model shall have a similar physical look and dimensions as real-world buses to be used for the bus odd project
The following models can be considered 

- **Bus from ITRI**
- ~~ISUZU Bus model (for the sister project)~~  (can be considered later)
- ~~Other commercial bus models~~ (can be considered later)
"
Simulator requirements,D_kwDOAnasMc4AP67Z,2022-04-26T09:48:38Z,WJaworskiRobotec,7,Answered,DC_kwDOAnasMc4AKWXb,Igata-ctrl,"I heard from ITRI that their AD bus is based on the following bus model. 
https://www.racev.com/product/k5
But, last week I received an update from ITRI and the followings are the most accurate vehicle specs.
    wheel_radius: 0.302875
    wheel_width: 0.215
    wheel_base: 3.81 # between front wheel center and rear wheel center
    wheel_tread: 1.71 # between left wheel center and right wheel center
    front_overhang: 1.16 # between front wheel center and vehicle front
    rear_overhang: 2.01 # between rear wheel center and vehicle rear
    left_overhang: 0.12 # between left wheel center and vehicle left
    right_overhang: 0.12  # between right wheel center and vehicle right
    vehicle_height: 2.8 
As for the exterior image, please refer to p1 and p5 of the following file.
https://drive.google.com/drive/folders/1NEN3tgExwGJGTsDwVH4q37mFRoIAByDQ
Thanks!"
Simulator requirements,D_kwDOAnasMc4AP67Z,2022-04-26T09:48:38Z,WJaworskiRobotec,7,Answered,DC_kwDOAnasMc4AKaIn,WJaworskiRobotec,@Igata-ctrl I cannot access the link. Could you use AWF google drive : https://drive.google.com/drive/folders/1YynTJKBC4ULsbvfbOqV7ipRKgMStAYI_ ?
Simulator requirements,D_kwDOAnasMc4AP67Z,2022-04-26T09:48:38Z,WJaworskiRobotec,7,Answered,DC_kwDOAnasMc4AKagi,Igata-ctrl,"Sorry for the trouble, but actually, 
https://drive.google.com/drive/folders/1NEN3tgExwGJGTsDwVH4q37mFRoIAByDQ
is an AFW Google Drive and it works for me. I granted you access to the entire ODD WG folder.
Please refer to the file ""ITRI BUS ODD Proposal_20210831.pdf"" there.

I tried to upload the file to:
https://drive.google.com/drive/folders/1YynTJKBC4ULsbvfbOqV7ipRKgMStAYI_
but it seems that I don't have upload permission to this folder.
 "
Simulator requirements,D_kwDOAnasMc4AP67Z,2022-04-26T09:48:38Z,WJaworskiRobotec,7,Answered,DC_kwDOAnasMc4AKavW,Igata-ctrl,"The file ""ITRI_ADV.docx"" in 
https://drive.google.com/drive/folders/1NEN3tgExwGJGTsDwVH4q37mFRoIAByDQ
has more exterior information of the ITRI bus including the back-shot."
Simulator requirements,D_kwDOAnasMc4AP67Z,2022-04-26T09:48:38Z,WJaworskiRobotec,7,Answered,DC_kwDOAnasMc4AKF-m,doganulus,"Not specific to the Bus ODD but I think of the following discussion items (+ those are listed above) for simulator requirements:

- Simulation determinism
- Simulation time model (discrete?, fixed/variable step?)
- Clock synchronization between the simulator and Autoware (if any)
- NPC control in simulation (fully reactive?, scenario-only?, trajectory-only?)
- Supported log formats other than rosbags (if any)

Any requirements on these items? Or non-requirements?"
Simulator requirements,D_kwDOAnasMc4AP67Z,2022-04-26T09:48:38Z,WJaworskiRobotec,7,Answered,DC_kwDOAnasMc4AKYRG,ralwing,"I think we should also mention the format of scenarios. Currently the [OpenScenario 1.x](https://www.asam.net/standards/detail/openscenario/) is the most common format for simulator and editors.
Speaking of the editor; we should also consider its availability and licensing. 
Another requirement IMHO is the availability of sensor models. The Lidars(solid-state, rotating etc), Radars, IMU..."
Simulator requirements,D_kwDOAnasMc4AP67Z,2022-04-26T09:48:38Z,WJaworskiRobotec,7,Answered,DC_kwDOAnasMc4AKaK1,WJaworskiRobotec,"@ralwing regarding sensors, there is/will be a list of sensors that needs to be simulated for CargoODD.
As far as i know TierIV has some editor for creating scenarios, let's discuss the details of availability on the Simualtion WG meeting tomorrow"
Simulator requirements,D_kwDOAnasMc4AP67Z,2022-04-26T09:48:38Z,WJaworskiRobotec,7,Answered,DC_kwDOAnasMc4AKmDw,WJaworskiRobotec,"I've created the wiki page where we will put the final requirements decided in this discussion : [link](https://github.com/autowarefoundation/autoware-projects/wiki/Bus-ODD-Simulation-requirements)

One more topic that should be written there, is general description of what and how are we going to test using the simulator. Initial high level description of testing procedures : 

**Planning & Control**
Planning module is tested using scenario_simulator_v2 based on scenarios created by ODD Working Group
SS2 provides two runners:
scenario_test_runner – OpenScenario format based scenario runner
random_test_runner – Runner for performing configurable tests with random traffic

**Localization**
Vision/LIDAR based localization algorithms needs to be tested using the high fidelity simulator with satisfying quality of sensors simulation. Simulator should provide Ground Truth information about current location of the vehicle under test, as well as input data for localization algorithms. Accuracy of the localization algorithms can be tested using localization_evaluation_node (Still in development, link to be shared once it’s merged into Autoware Universe repository)

**Perception**
For all perception algorithms it should be possible to perform tests in the simulator. To simplify the process, several Ground Truth sensors should be implemented in the simulator:
2D/3D Bounding Box with labels for object detection/classification algorithms validation
Instance Segmentation for segmentation algorithms validation
Then Ground Truth can be compared with the output of perception algorithms of Autoware using perception_evaluation_node(s) (Still in development, link to be shared once it’s merged into Autoware Universe repository)

**End-to-end testing**
Simulator should be used for End-to-end testing of the entire Autoware stack. For this purpose, the simulator should support easy and flexible way of configuration of traffic in the test scenario (both scenario based and random).

Please let me know your opinion, or anything that we can add/specify here.
"
Simulator requirements,D_kwDOAnasMc4AP67Z,2022-04-26T09:48:38Z,WJaworskiRobotec,7,Answered,DC_kwDOAnasMc4ALFU3,sglee-morai,"## Localization + Planning / Control Testing


## Localization Module Testing
Need to discuss: While the localization node is being tested, should we keep the ego-vehicle moving? If that's the case, the localization node (or the ego-vehicle) should be moving along a predefined path. 

MORAI SIM: Drive has a feature that allows an ego-vehicle to follow a certain path using ground truth data. Is that gonna be enough for aking ego's path?"
Simulator requirements,D_kwDOAnasMc4AP67Z,2022-04-26T09:48:38Z,WJaworskiRobotec,7,Answered,DC_kwDOAnasMc4ALFVM,sglee-morai,"## Test Scenario for E2E Testing
### 1) Random Traffic (TierIV SIM, MORAI SIM)
- The ego-vehicle would follow a certain path
- Random NPC vehicles are moving around the ego-vehicle
- Density of the random traffic can be adjusted (At least, 3 levels of traffic density should be available: low, mid, and high)
- Traffic Behavior could be randomly chosen (speed of the surrounding vehicles: min, max value)


### 2) Unit-level Mission (MORAI SIM, TierIV(potential))
- Re-usage of scenarios defined by ODD WG
- A pedestrian coming out of the road suddenly behind the parked car"
Simulator requirements,D_kwDOAnasMc4AP67Z,2022-04-26T09:48:38Z,WJaworskiRobotec,7,Answered,DC_kwDOAnasMc4ALFcD,sglee-morai,"# Perception
### Closed-loop Testing (TierIV SIM, MORAI SIM)

### Openloop Testing (MORAI SIM)
- Creating synthetic dataset -> rosbag file -> playback with perception node running -> see the result
  **- Creating a launcher so that only the perception part is running**
- For bus ODD, MORAI SIM: Drive will support that
- Benefit: it doesn't require any real-time performance.

### Environment / Scene
- Create a special scene?
  - For Closed-loop testing: Preferred one - use the same scenario as defined above

"
Simulator requirements,D_kwDOAnasMc4AP67Z,2022-04-26T09:48:38Z,WJaworskiRobotec,7,Answered,DC_kwDOAnasMc4AKv0f,WJaworskiRobotec,"Let's discuss the message types here : 
- Ground Truth Localization - /tf message
- Ground Truth Instance Segmentation - Pointcloud with additional field ""label""
- Ground Truth 2D/3D Bounding Boxes - Autoware messages for Detected Objects 
"
Simulator requirements,D_kwDOAnasMc4AP67Z,2022-04-26T09:48:38Z,WJaworskiRobotec,7,Answered,DC_kwDOAnasMc4ALFdX,sglee-morai,"[DetectedObjects](https://github.com/tier4/autoware_auto_msgs/blob/tier4/main/autoware_auto_perception_msgs/msg/DetectedObjects.idl)

[PredictedObjects](https://github.com/tier4/autoware_auto_msgs/blob/tier4/main/autoware_auto_perception_msgs/msg/PredictedObjects.idl)"
About adding plotjuggler to docker image,D_kwDOAnasMc4AP67b,2022-04-26T11:47:20Z,brkay54,1,Answered,,,
About adding plotjuggler to docker image,D_kwDOAnasMc4AP67b,2022-04-26T11:47:20Z,brkay54,1,Answered,DC_kwDOAnasMc4AKEKp,kenji-miyake,"@brkay54 TIER IV uses this tool as well. :+1:
I think, if you add these lines to some package, it's automatically added to Autoware's Docker image.

```xml
<exec_depend>plotjuggler</exec_depend>
<exec_depend>plotjuggler_ros</exec_depend>
```

Another way is to add an Ansible role [here](https://github.com/autowarefoundation/autoware/tree/main/ansible) or edit the [ros2_dev_tools](https://github.com/autowarefoundation/autoware/tree/main/ansible/roles/ros2_dev_tools) role."
Autonomy Software WG Meeting 2022/05/10,D_kwDOAnasMc4AP67c,2022-04-26T16:30:14Z,BonoloAWF,0,Unanswered,,,
Work logs for #238,D_kwDOAnasMc4AP67d,2022-04-27T04:57:10Z,kenji-miyake,6,Answered,,,
Work logs for #238,D_kwDOAnasMc4AP67d,2022-04-27T04:57:10Z,kenji-miyake,6,Answered,DC_kwDOAnasMc4AKFau,kenji-miyake,"```
TASK [autoware.dev_env.docker : Add OSRF apt repository to source list] *****************************************************************************************************************************
fatal: [localhost]: FAILED! => {""changed"": false, ""msg"": ""Failed to update apt cache: W:https://nvidia.github.io/libnvidia-container/stable/ubuntu18.04/amd64/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details., W:https://nvidia.github.io/nvidia-container-runtime/stable/ubuntu18.04/amd64/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details., W:https://nvidia.github.io/nvidia-docker/ubuntu18.04/amd64/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details., W:https://repo.skype.com/deb/dists/stable/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details., E:The repository 'http://packages.ros.org/ros/ubuntu jammy Release' does not have a Release file., W:Updating from such a repository can't be done securely, and is therefore disabled by default., W:See apt-secure(8) manpage for repository creation and user configuration details., W:https://packagecloud.io/slacktechnologies/slack/debian/dists/jessie/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.""}
```"
Work logs for #238,D_kwDOAnasMc4AP67d,2022-04-27T04:57:10Z,kenji-miyake,6,Answered,DC_kwDOAnasMc4AKFbL,kenji-miyake,"From https://docs.ansible.com/ansible/latest/collections/ansible/builtin/apt_key_module.html:

```
The apt-key command has been deprecated and suggests to ‘manage keyring files in trusted.gpg.d instead’. See the Debian wiki for details. This module is kept for backwards compatiblity for systems that still use apt-key as the main way to manage apt repository keys.
```"
Work logs for #238,D_kwDOAnasMc4AP67d,2022-04-27T04:57:10Z,kenji-miyake,6,Answered,DC_kwDOAnasMc4AKFbP,kenji-miyake,"From https://wiki.debian.org/SecureApt:

```
Note: apt-key is in the process of being deprecated, at least for the managing of keys. Discussion in Debian bug [851774](https://bugs.debian.org/851774) .
```"
Work logs for #238,D_kwDOAnasMc4AP67d,2022-04-27T04:57:10Z,kenji-miyake,6,Answered,DC_kwDOAnasMc4AKFbm,kenji-miyake,"From `man apt-key`:

```
DEPRECATION
       Except for using apt-key del in maintainer scripts, the use of apt-key is deprecated. This section shows how to replace existing use of apt-key.

       If your existing use of apt-key add looks like this:

       wget -qO- https://myrepo.example/myrepo.asc | sudo apt-key add -

       Then you can directly replace this with (though note the recommendation below):

       wget -qO- https://myrepo.example/myrepo.asc | sudo tee /etc/apt/trusted.gpg.d/myrepo.asc

       Make sure to use the ""asc"" extension for ASCII armored keys and the ""gpg"" extension for the binary OpenPGP format (also known as ""GPG key public ring""). The binary OpenPGP format works
       for all apt versions, while the ASCII armored format works for apt version >= 1.4.

       Recommended: Instead of placing keys into the /etc/apt/trusted.gpg.d directory, you can place them anywhere on your filesystem by using the Signed-By option in your sources.list and
       pointing to the filename of the key. See sources.list(5) for details. Since APT 2.4, /etc/apt/keyrings is provided as the recommended location for keys not managed by packages. When
       using a deb822-style sources.list, and with apt version >= 2.4, the Signed-By option can also be used to include the full ASCII armored keyring directly in the sources.list without an
       additional file.
```"
Work logs for #238,D_kwDOAnasMc4AP67d,2022-04-27T04:57:10Z,kenji-miyake,6,Answered,DC_kwDOAnasMc4AKFdB,kenji-miyake,"It can be affected by keys that aren't added by Autoware.
So anyway, we have to ignore errors.

```
fatal: [localhost]: FAILED! => {""changed"": false, ""msg"": ""Failed to update apt cache: W:https://repo.skype.com/deb/dists/stable/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details., E:The repository 'http://packages.ros.org/ros/ubuntu jammy Release' does not have a Release file., W:Updating from such a repository can't be done securely, and is therefore disabled by default., W:See apt-secure(8) manpage for repository creation and user configuration details., W:https://packagecloud.io/slacktechnologies/slack/debian/dists/jessie/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.""}
```"
Work logs for #238,D_kwDOAnasMc4AP67d,2022-04-27T04:57:10Z,kenji-miyake,6,Answered,DC_kwDOAnasMc4AKFxZ,kenji-miyake,"Actually, this was the error. I'll replace this with the `ros2` repository.

```
E: The repository 'http://packages.ros.org/ros/ubuntu jammy Release' does not have a Release file.
```"
Work logs for #238,D_kwDOAnasMc4AP67d,2022-04-27T04:57:10Z,kenji-miyake,6,Answered,DC_kwDOAnasMc4AKF7K,kenji-miyake,Will be resolved by https://github.com/autowarefoundation/autoware/pull/242.
Work logs for #238,D_kwDOAnasMc4AP67d,2022-04-27T04:57:10Z,kenji-miyake,6,Answered,DC_kwDOAnasMc4AKFlp,kenji-miyake,"```
fatal: [localhost]: FAILED! => {""cache_update_time"": 1651043822, ""cache_updated"": true, ""changed"": false, ""msg"": ""'/usr/bin/apt-get -y -o \""Dpkg::Options::=--force-confdef\"" -o \""Dpkg::Options::=--force-confold\""       install 'cuda-11-4'' failed: E: Unable to correct problems, you have held broken packages.\n"", ""rc"": 100, ""stderr"": ""E: Unable to correct problems, you have held broken packages.\n"", ""stderr_lines"": [""E: Unable to correct problems, you have held broken packages.""], ""stdout"": ""Reading package lists...\nBuilding dependency tree...\nReading state information...\nSome packages could not be installed. This may mean that you have\nrequested an impossible situation or if you are using the unstable\ndistribution that some required packages have not yet been created\nor been moved out of Incoming.\nThe following information may help to resolve the situation:\n\nThe following packages have unmet dependencies:\n libcufile-11-4 : Depends: liburcu6 but it is not installable\n"", ""stdout_lines"": [""Reading package lists..."", ""Building dependency tree..."", ""Reading state information..."", ""Some packages could not be installed. This may mean that you have"", ""requested an impossible situation or if you are using the unstable"", ""distribution that some required packages have not yet been created"", ""or been moved out of Incoming."", ""The following information may help to resolve the situation:"", """", ""The following packages have unmet dependencies:"", "" libcufile-11-4 : Depends: liburcu6 but it is not installable""]}
```"
Work logs for #238,D_kwDOAnasMc4AP67d,2022-04-27T04:57:10Z,kenji-miyake,6,Answered,DC_kwDOAnasMc4AKGF3,kenji-miyake,https://www.sproutworkshop.com/2022/02/how-to-compile-opencv-4-5-5-with-cuda-11-6-and-cudnn-8-3-2-on-ubuntu-22-04-daily-build/
Work logs for #238,D_kwDOAnasMc4AP67d,2022-04-27T04:57:10Z,kenji-miyake,6,Answered,DC_kwDOAnasMc4AKGjA,kenji-miyake,"Resolved. (As a workaround)

```
- name: (tmp for Ubuntu 22.04) Add liburcu6 repository into sources.list
  become: true
  ansible.builtin.apt_repository:
    repo: deb http://jp.archive.ubuntu.com/ubuntu/ impish main restricted
    filename: impish
    state: present
```"
Work logs for #238,D_kwDOAnasMc4AP67d,2022-04-27T04:57:10Z,kenji-miyake,6,Answered,DC_kwDOAnasMc4AKGll,kenji-miyake,"NVIDIA's CUDA image for Ubuntu 22.04 isn't released yet.
https://gitlab.com/nvidia/container-images/cuda/-/issues/157"
Work logs for #238,D_kwDOAnasMc4AP67d,2022-04-27T04:57:10Z,kenji-miyake,6,Answered,DC_kwDOAnasMc4AKGmd,kenji-miyake,"```bash
$ rosdep install -y --from-paths src --ignore-src --rosdistro $ROS_DISTRO
executing command [sudo -H apt-get install -y ros-rolling-octomap-server]
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
E: Unable to locate package ros-rolling-octomap-server
ERROR: the following rosdeps failed to install
  apt: command [sudo -H apt-get install -y ros-rolling-octomap-server] failed
```"
Work logs for #238,D_kwDOAnasMc4AP67d,2022-04-27T04:57:10Z,kenji-miyake,6,Answered,DC_kwDOAnasMc4AKGn2,kenji-miyake,Resolved by putting `COLCON_IGNORE` to `grid_map` and `grid_map_demos`.
Work logs for #238,D_kwDOAnasMc4AP67d,2022-04-27T04:57:10Z,kenji-miyake,6,Answered,DC_kwDOAnasMc4AKIV_,kminoda,"Is it OK to post build errors about humble here, too? Let me know if this is not the right place to post.

I encountered several build errors that say `error: diagnostic_updater/diagnostic_updater.hpp: No such file or directory`. Following are some of those packages:
- accel_brake_map_calibrator
- fault_injection
- ad_service_state_monitor
- ...

FYI, OS: Ubuntu 22.04, ROS2 humble.
```
$ ros2 pkg list | grep diagnostic_updater
diagnostic_updater

```"
Work logs for #238,D_kwDOAnasMc4AP67d,2022-04-27T04:57:10Z,kenji-miyake,6,Answered,DC_kwDOAnasMc4AKIWY,kenji-miyake,"Thank you for reporting it.

Could you check the include directory? For your case, the command is `ls /opt/ros/humble/include/diagnostic_updater/`.

```bash
$ ls /opt/ros/rolling/include/diagnostic_updater/
diagnostic_status_wrapper.hpp  diagnostic_updater.hpp  publisher.hpp  update_functions.hpp
```"
Work logs for #238,D_kwDOAnasMc4AP67d,2022-04-27T04:57:10Z,kenji-miyake,6,Answered,DC_kwDOAnasMc4AKIWZ,kminoda,"This may be due to the ignorance of setup-dev-env.sh in autoware, since it failed somehow in my environment"
Work logs for #238,D_kwDOAnasMc4AP67d,2022-04-27T04:57:10Z,kenji-miyake,6,Answered,DC_kwDOAnasMc4AKIWf,kminoda,"```
$ ls /opt/ros/humble/include/diagnostic_updater/
diagnostic_status_wrapper.hpp  diagnostic_updater.hpp  publisher.hpp  update_functions.hpp
```"
Work logs for #238,D_kwDOAnasMc4AP67d,2022-04-27T04:57:10Z,kenji-miyake,6,Answered,DC_kwDOAnasMc4AKIXN,kenji-miyake,Did you `source /opt/ros/humble/setup.bash` before building the source? :thinking: 
Work logs for #238,D_kwDOAnasMc4AP67d,2022-04-27T04:57:10Z,kenji-miyake,6,Answered,DC_kwDOAnasMc4AKIXS,kminoda,"Yes, I did that too"
Work logs for #238,D_kwDOAnasMc4AP67d,2022-04-27T04:57:10Z,kenji-miyake,6,Answered,DC_kwDOAnasMc4AKIXh,kenji-miyake,"Could you check the compile options?

```bash
cd autoware/build/accel_brake_map_calibrator
VERBOSE=1 make
```"
Work logs for #238,D_kwDOAnasMc4AP67d,2022-04-27T04:57:10Z,kenji-miyake,6,Answered,DC_kwDOAnasMc4AKIYt,kminoda,"I executed your commands, and it worked. Now I can build the packages both with `make` and `colcon build`.
Not sure what happened, though,,.

Anyway, the above issue seems to be solved. Thank you for your help!"
Work logs for #238,D_kwDOAnasMc4AP67d,2022-04-27T04:57:10Z,kenji-miyake,6,Answered,DC_kwDOAnasMc4AKIZG,kenji-miyake,It's a mystery... :thinking: But great. :+1: 
Work logs for #238,D_kwDOAnasMc4AP67d,2022-04-27T04:57:10Z,kenji-miyake,6,Answered,DC_kwDOAnasMc4AKIcl,kenji-miyake,"[Humble] `ROS_DISTRO` is incorrect.

```sh-session
$ cat /opt/ros/humble/share/ros_environment/environment/0.ros_distro_check.sh
# generated from ros_environment/env-hooks/0.ros_distro.sh.in

if [ -n ""$ROS_DISTRO"" -a ""$ROS_DISTRO"" != ""rolling"" ]; then
  echo ""ROS_DISTRO was set to '$ROS_DISTRO' before. Please make sure that the environment does not mix paths from different distributions.""
fi
```"
2022-04-27 Simulation Working Group meeting,D_kwDOAnasMc4AP67g,2022-04-27T05:55:48Z,sglee-morai,0,Unanswered,,,
How changes in ansible or adding new dependencies updates the docker image?,D_kwDOAnasMc4AP67h,2022-04-27T12:36:56Z,brkay54,1,Answered,,,
How changes in ansible or adding new dependencies updates the docker image?,D_kwDOAnasMc4AP67h,2022-04-27T12:36:56Z,brkay54,1,Answered,DC_kwDOAnasMc4AKGFu,kenji-miyake,"Currently, the Autoware Docker images are built biweekly by [this workflow](https://github.com/autowarefoundation/autoware/blob/2b1d5ea1e86b53bacb890e99acedca97a0af7aae/.github/workflows/docker-build-and-push.yaml#L8).

In that, [docker-bake.hcl](https://github.com/autowarefoundation/autoware/blob/2b1d5ea1e86b53bacb890e99acedca97a0af7aae/docker/autoware-universe/docker-bake.hcl) is referenced.
https://github.com/autowarefoundation/autoware/blob/2b1d5ea1e86b53bacb890e99acedca97a0af7aae/.github/actions/docker-build-and-push/action.yaml#L97

And in the Dockerfile, it runs `setup-dev-env.sh` that internally executes Ansible.
https://github.com/autowarefoundation/autoware/blob/2b1d5ea1e86b53bacb890e99acedca97a0af7aae/docker/autoware-universe/Dockerfile#L29

@brkay54 Is this clear for you?"
How changes in ansible or adding new dependencies updates the docker image?,D_kwDOAnasMc4AP67h,2022-04-27T12:36:56Z,brkay54,1,Answered,DC_kwDOAnasMc4AKGII,brkay54,"Yes, thank you for explanation. "
Autoware Architecture WG Meeting (Control) 2022/04/27,D_kwDOAnasMc4AP67i,2022-04-27T13:57:56Z,mitsudome-r,0,Unanswered,,,
why image_projection_based_fusion need multi types of msg,D_kwDOAnasMc4AP67j,2022-04-28T06:15:01Z,storrrrrrrrm,3,Answered,,,
why image_projection_based_fusion need multi types of msg,D_kwDOAnasMc4AP67j,2022-04-28T06:15:01Z,storrrrrrrrm,3,Answered,DC_kwDOAnasMc4AKHhS,storrrrrrrrm,"it makes code more complex and difficult to modify.  for example,recently i want to add 'filter points out of user-configured-scope ' to make it easier when debug, so i need to add a fuction like this
```
bool out_of_scope(sensor_msgs::msg::PointCloud2 cluster);
``` 
under current design, i have to change
```
template <class Msg>
class FusionNode : public rclcpp::Node
{
```
to
```
template <class Msg,class ObjType>
class FusionNode : public rclcpp::Node
{
```
where 'ObjType' is `autoware_auto_perception_msgs::msg::DetectedObject` or `tier4_perception_msgs::msg::DetectedObjectWithFeature`,and then implement  virtual function `out_of_scope()` in  different subclass

it makes code harder to understand."
why image_projection_based_fusion need multi types of msg,D_kwDOAnasMc4AP67j,2022-04-28T06:15:01Z,storrrrrrrrm,3,Answered,DC_kwDOAnasMc4AKHj7,yukke42,"`roi_cluster_fusion` and `roi_detected_object_fusion` subscribe the different type of messages, but the most of implementations are the same. Therefore, I implemented to allow to use some message types.

We're implementing PointPainting <https://github.com/autowarefoundation/autoware.universe/pull/569> and this feature is also added to the`image_projection_based_fusion` package. It subscribes PointCloud and DetectedObjectWithFeature.

`bool out_of_scope(sensor_msgs::msg::PointCloud2 cluster);` seems only for roi_cluster_fusion, so, is it not good to add only to `RoiClusterFusionNode`?
"
why image_projection_based_fusion need multi types of msg,D_kwDOAnasMc4AP67j,2022-04-28T06:15:01Z,storrrrrrrrm,3,Answered,DC_kwDOAnasMc4AKHq-,storrrrrrrrm,"> `roi_cluster_fusion` and `roi_detected_object_fusion` subscribe the different type of messages, but the most of implementations are the same. Therefore, I implemented to allow to use some message types.
> 
> We're implementing PointPainting [autowarefoundation/autoware.universe#569](https://github.com/autowarefoundation/autoware.universe/pull/569) and this feature is also added to the`image_projection_based_fusion` package. It subscribes PointCloud and DetectedObjectWithFeature.
> 
> `bool out_of_scope(sensor_msgs::msg::PointCloud2 cluster);` seems only for roi_cluster_fusion, so, is it not good to add only to `RoiClusterFusionNode`?

so, you are suggesting me just add 'out_of_scope' to 'roi_cluster_fusion'? i think it is better to unify 'roi_cluster_fusion' and 'roi_detected_object_fusion', otherwise, user would be confused, i prefer to add a virtual function into `FusionNode`."
why image_projection_based_fusion need multi types of msg,D_kwDOAnasMc4AP67j,2022-04-28T06:15:01Z,storrrrrrrrm,3,Answered,DC_kwDOAnasMc4AKH0u,yukke42,"> so, you are suggesting me just add 'out_of_scope' to 'roi_cluster_fusion'? i think it is better to unify 'roi_cluster_fusion' and 'roi_detected_object_fusion', otherwise, user would be confused, i prefer to add a virtual function into FusionNode.

I make sense. It's better to add as a virtual function.
"
why image_projection_based_fusion need multi types of msg,D_kwDOAnasMc4AP67j,2022-04-28T06:15:01Z,storrrrrrrrm,3,Answered,DC_kwDOAnasMc4AKHj9,yukkysaito,"When DetectedObjects as CenterPoint output and 2D ROI are fused, the `roi cluster fusion function` only support Clusters, not support DetectedObjects. However, mostly because of the same algorithm.
So, in order to fuse CenterPoint output and 2D ROI, `roi cluster fusion function` is changed the name and support DetectedObjects."
why image_projection_based_fusion need multi types of msg,D_kwDOAnasMc4AP67j,2022-04-28T06:15:01Z,storrrrrrrrm,3,Answered,DC_kwDOAnasMc4AKHsR,storrrrrrrrm,"> When DetectedObjects as CenterPoint output and 2D ROI are fused, the `roi cluster fusion function` only support Clusters, not support DetectedObjects. However, mostly because of the same algorithm. So, in order to fuse CenterPoint output and 2D ROI, `roi cluster fusion function` is changed the name and support DetectedObjects.

i get what u are concering,why not use a unified message define like this?
```
source: cluster/lidarcnn
vector<object>
```
Essentially, whatever the detection algorithm is, whatever msg u use to represent the obj,it is collection of xyz. There are so many msg defines in autoware,sometimes  called tier4_xx_msgs,sometimes called autoware_xx_msgs,i am sometimes confused about this. "
why image_projection_based_fusion need multi types of msg,D_kwDOAnasMc4AP67j,2022-04-28T06:15:01Z,storrrrrrrrm,3,Answered,DC_kwDOAnasMc4AKIMU,Unknown,"There is active work to finalise the messages types used by Autoware and to remove any confusion around the differently named messages, so this should be much more straightforward to understand in the future. 

https://github.com/orgs/autowarefoundation/discussions/99
"
Open AD Kit WG Meeting 2022/04/28,D_kwDOAnasMc4AP67k,2022-04-28T08:01:53Z,Unknown,0,Unanswered,,,
Racing WG - Meeting 04/28/2022,D_kwDOAnasMc4AP67m,2022-04-28T14:54:37Z,JohannesBetz,0,Unanswered,,,
"Installing Autoware Universe on Jetson Xavier NX failed, CUDA version too low",D_kwDOAnasMc4AP67n,2022-04-29T14:45:39Z,chris-interplai,2,Answered,,,
"Installing Autoware Universe on Jetson Xavier NX failed, CUDA version too low",D_kwDOAnasMc4AP67n,2022-04-29T14:45:39Z,chris-interplai,2,Answered,DC_kwDOAnasMc4AKKbX,chris-interplai,Never mind. Switched to Jetpack 5.0 and installed with no issues.
"Installing Autoware Universe on Jetson Xavier NX failed, CUDA version too low",D_kwDOAnasMc4AP67n,2022-04-29T14:45:39Z,chris-interplai,2,Answered,DC_kwDOAnasMc4AKKmD,kenji-miyake,"FYI: We're planning to update the CUDA version to `11.6`, but it seems network installation for TensorRT isn't released yet. https://github.com/autowarefoundation/autoware_core_universe_prototype/issues/137

The new version set will be tested in https://github.com/autowarefoundation/autoware_core_universe_prototype/pull/248 or another PR."
Differentiating between a car and a police car,D_kwDOAnasMc4AP67o,2022-04-29T17:01:33Z,waynejstaats,0,Unanswered,,,
Why are there some duplicated parameter files?,D_kwDOAnasMc4AP67u,2022-05-02T06:13:41Z,kminoda,1,Answered,,,
Why are there some duplicated parameter files?,D_kwDOAnasMc4AP67u,2022-05-02T06:13:41Z,kminoda,1,Answered,DC_kwDOAnasMc4AKMQM,takayuki5168,"Currently, each planning package and tier4_planning_launch have almost the same yaml file.

In the near future, with the following PRs, we will have two kinds of parameters as follows.
- 1. `autoware.universe/planning/PATH_TO_PACKAGE/config`
- 2. same parameters in autoware_launch or autoware_individual_params.

https://github.com/autowarefoundation/autoware.universe/pull/771 (autoware.universe)
https://github.com/autowarefoundation/autoware_launch/pull/38 (autoware_launch)
https://github.com/autowarefoundation/autoware_individual_params/pull/25 (autoware_individual_params)

In my understanding, the reason having two duplicated parameters is,
- Regarding the first parameter, Autoware's packages are modularized enough and each package can be launched with other software. (e.g. Other company developing mobile robots may use the path planning package in Autoware since its algorithm is awesome.)
  - Therefore we put the reference parameter in `autoware.universe/planning/PATH_TO_PACKAGE/config`.
- Regarding the second parameter, When launching Autoware from autoware_launch, since each vehicle will have different parameters, autoware_launch or autoware_individual_params have these kinds of parameters.
  - e.g. Common parameters for a xx company's bus will be in autoware_launch, and individual parameters for each bus (control parameters are tuned to each vehicle) will be in autoware_individual_params.
"
Why are there some duplicated parameter files?,D_kwDOAnasMc4AP67u,2022-05-02T06:13:41Z,kminoda,1,Answered,DC_kwDOAnasMc4AKMcG,kminoda,"@takayuki5168
Thanks for the detailed answer!

I get the first point,

Regarding the first parameter, Autoware's packages are modularized enough and each package can be launched with other software. (e.g. Other company developing mobile robots may use the path planning package in Autoware since its algorithm is awesome.)

and I think I also get that autoware_individual_params is better to be individually stored, but I couldn't get why autoware_launch should also have duplicated parameter files.

Regarding the second parameter, When launching Autoware from autoware_launch, since each vehicle will have different parameters, autoware_launch or autoware_individual_params have these kinds of parameters.

Speaking of the xx company's bus example, why not just have one set of parameter files in each package (as in pattern i) and tune the parameters to their bus application?"
Why are there some duplicated parameter files?,D_kwDOAnasMc4AP67u,2022-05-02T06:13:41Z,kminoda,1,Answered,DC_kwDOAnasMc4AKMeb,takayuki5168,"> and I think I also get that autoware_individual_params is better to be individually stored, but I couldn't get why autoware_launch should also have duplicated parameter files.

Let's say we will hold a bus project with 1000 same buses.
Most planning parameters (e.g. max_velocity, acceleration, jerk, distance_to_obstacle_when_stopping, ...) are designed for safety and efficiency for the project and used commonly by all 1000 buses. These common parameters will be in `autoware_launch` where yaml files are shared among all buses.

Some of control parameters (e.g. pid gains for velocity controller) have to be tuned to each bus. These individual parameters will be in `autoware_individual_params` where each bus has its own yaml files.


> Speaking of the xx company's bus example, why not just have one set of parameter files in each package (as in pattern i) and tune the parameters to their bus application?

This is because each bus has its own hardware parameters (e.g. frictional coefficient, ...). Therefore, each vehicle has to have its own control parameters (e.g. pid gains for velocity controller).

I hope this will make sense to you :)"
Why are there some duplicated parameter files?,D_kwDOAnasMc4AP67u,2022-05-02T06:13:41Z,kminoda,1,Answered,DC_kwDOAnasMc4AKMga,kminoda,I think I got the point. Thanks for the discussion!
Why are there some duplicated parameter files?,D_kwDOAnasMc4AP67u,2022-05-02T06:13:41Z,kminoda,1,Answered,DC_kwDOAnasMc4AKg2c,takayuki5168,"@kminoda If this makes sense, please make this diccussion unanswered."
A possible bug in scenario_selector when multiple parking lots are available?,D_kwDOAnasMc4AP67v,2022-05-02T08:59:06Z,kminoda,1,Answered,,,
A possible bug in scenario_selector when multiple parking lots are available?,D_kwDOAnasMc4AP67v,2022-05-02T08:59:06Z,kminoda,1,Answered,DC_kwDOAnasMc4AKMbB,kenji-miyake,"Actually, the parking scenario isn't tested in many use cases.
With the current implementation, it simply combines all cost maps from lanes, parking lots, and parking spaces, and finds a path.

You can show an ideal use case scenario and fix the code to accomplish the use case.
In this situation, I feel it's good to start with the lane driving scenario.
So I guess you should fix the initialization condition to check if it's on a lane.
Or as you say, you can check there if the vehicle is in a parking lot of the target parking space."
A possible bug in scenario_selector when multiple parking lots are available?,D_kwDOAnasMc4AP67v,2022-05-02T08:59:06Z,kminoda,1,Answered,DC_kwDOAnasMc4AKMbi,kminoda,"OK, thanks for the suggestion!
I will fix the bug, and if successful, I will open an issue or PR."
2022-05-03 ODD working group weekly meeting (91),D_kwDOAnasMc4AP67x,2022-05-02T09:51:37Z,Igata-ctrl,0,Unanswered,,,
How to fix multi_object_tracker header missing issue ? [mussp.h],D_kwDOAnasMc4AP67y,2022-05-05T05:52:28Z,brian841102,2,Answered,,,
How to fix multi_object_tracker header missing issue ? [mussp.h],D_kwDOAnasMc4AP67y,2022-05-05T05:52:28Z,brian841102,2,Answered,DC_kwDOAnasMc4AKRFU,kenji-miyake,"@brian841102 It's here.
https://github.com/autowarefoundation/autoware/blob/af25faddd16bf8f9a1bace814b0f82e020803f5b/autoware.repos#L38
https://github.com/tier4/muSSP/blob/c79e98fd5e658f4f90c06d93472faa977bc873b9/muSSP/mussp.h

By the way, for what reasons will you move the package to your repository?
Is it impossible to improve and use the package in `autoware.universe`?"
How to fix multi_object_tracker header missing issue ? [mussp.h],D_kwDOAnasMc4AP67y,2022-05-05T05:52:28Z,brian841102,2,Answered,DC_kwDOAnasMc4AKWYv,brian841102,"Thx for your kind reply.
Because we are at early stage of development, compromise between ITRI and
universe is necessary.

For now, localization sensing control decision are developed by ITRI
And, Planning, tracking and Prediction may be based on universe in the
future

from Yu-Heng Lin

Kenji Miyake ***@***.***> 於 2022年5月5日 週四 13:58 寫道：

> @brian841102 <https://github.com/brian841102> It's here.
>
> https://github.com/autowarefoundation/autoware/blob/af25faddd16bf8f9a1bace814b0f82e020803f5b/autoware.repos#L38
>
> https://github.com/tier4/muSSP/blob/c79e98fd5e658f4f90c06d93472faa977bc873b9/muSSP/mussp.h
>
> By the way, for what reasons will you move the package to your repository?
> Is it impossible to improve and use the package in autoware.universe?
>
> —
> Reply to this email directly, view it on GitHub
> <https://github.com/orgs/autowarefoundation/discussions/268#discussioncomment-2691412>,
> or unsubscribe
> <https://github.com/notifications/unsubscribe-auth/AHJBL36Q57CQ6OSI2NBDC33VINPR5ANCNFSM5VD76P7Q>
> .
> You are receiving this because you were mentioned.Message ID:
> ***@***.***
> com>
>
"
Planning & intersection management,D_kwDOAnasMc4AP67z,2022-05-05T23:30:06Z,08beeqtufail-sudo,1,Answered,,,
Planning & intersection management,D_kwDOAnasMc4AP67z,2022-05-05T23:30:06Z,08beeqtufail-sudo,1,Answered,DC_kwDOAnasMc4AKV2R,TakaHoribe,"@08beeqtufail-sudo Thank you for your post. We have the parameter `stop_planner.min_behavior_stop_margin` to manage this behavior. 

The stop_planner 's behavior is like this:

 - Set `v=0` at the point from `stop_margin` distance from an obstacle.
 - If another stop point already exists between an obstacle and ego (like in this case), set `v=0` at the point from `min_behavior_stop_margin` distance from an obstacle.

Generally `min_behavior_stop_margin` is set to be smaller than the `stop_margin`. See the [default parameter](https://github.com/autowarefoundation/autoware.universe/blob/main/planning/obstacle_stop_planner/config/obstacle_stop_planner.param.yaml/#L4-L5). 

If you tune the parameter `min_behavior_stop_margin`, the vehicle will move as you expect.

The readme [here](https://autowarefoundation.github.io/autoware.universe/main/planning/obstacle_stop_planner/#obstacle-stop-planner_1), not well written about this parameter though. 
"
Planning & intersection management,D_kwDOAnasMc4AP67z,2022-05-05T23:30:06Z,08beeqtufail-sudo,1,Answered,DC_kwDOAnasMc4AKWlX,08beeqtufail-sudo,@TakaHoribe Thanks for your reply. Indeed i have tuned stop_planner.min_behavior_stop_margin parameter and i get the expected results. The ego_vehicle stops correctly at the intersection stop line. 
Can I add a little bit more concrete examples to the pull request guideline?,D_kwDOAnasMc4AP670,2022-05-06T08:04:16Z,IshitaTakeshi,1,Answered,,,
Can I add a little bit more concrete examples to the pull request guideline?,D_kwDOAnasMc4AP670,2022-05-06T08:04:16Z,IshitaTakeshi,1,Answered,DC_kwDOAnasMc4AKS7J,kenji-miyake,@IshitaTakeshi cc @LalithVipulananthan LGTM. Please submit a PR! :+1: 
Can I add a little bit more concrete examples to the pull request guideline?,D_kwDOAnasMc4AP670,2022-05-06T08:04:16Z,IshitaTakeshi,1,Answered,DC_kwDOAnasMc4AKV1v,Unknown,"For reference, the associated PR is autowarefoundation/autoware-documentation#99 "
Automatic visualization of Autoware's system,D_kwDOAnasMc4AP671,2022-05-08T14:22:09Z,kenji-miyake,1,Answered,,,
Automatic visualization of Autoware's system,D_kwDOAnasMc4AP671,2022-05-08T14:22:09Z,kenji-miyake,1,Answered,DC_kwDOAnasMc4AKYNs,mitsudome-r,@kenji-miyake Are you planning to make the source code for the tool public?
Automatic visualization of Autoware's system,D_kwDOAnasMc4AP671,2022-05-08T14:22:09Z,kenji-miyake,1,Answered,DC_kwDOAnasMc4AKYOK,kenji-miyake,"Yes, of course! But currently, it's not ready for publication. (Needs some refactoring and documentation.)
If someone is interested, I can share it."
Automatic visualization of Autoware's system,D_kwDOAnasMc4AP671,2022-05-08T14:22:09Z,kenji-miyake,1,Answered,DC_kwDOAnasMc4ALnjs,nabetetsu,"It is really interesting for me because I always get lost when trying to follow the node to node path.
I would be happy to help in any way I can."
Automatic visualization of Autoware's system,D_kwDOAnasMc4AP671,2022-05-08T14:22:09Z,kenji-miyake,1,Answered,DC_kwDOAnasMc4ARLAH,lntsh854,"> 是的当然！但目前，它还没有准备好发布。（需要一些重构和文档。） 如果有人感兴趣，我可以分享。


When will it be released, looking forward to it"
Automatic visualization of Autoware's system,D_kwDOAnasMc4AP671,2022-05-08T14:22:09Z,kenji-miyake,1,Answered,DC_kwDOAnasMc4ARLOP,kenji-miyake,"Hmm, actually I'm working on other tasks so hard.
Considering it would be difficult for me to make the code clean enough, so I'll do minimal cleanup and make it public.
But please note that it doesn't have enough documentation and it may not work correctly."
Automatic visualization of Autoware's system,D_kwDOAnasMc4AP671,2022-05-08T14:22:09Z,kenji-miyake,1,Answered,DC_kwDOAnasMc4ARLWS,kenji-miyake,"@lntsh854 Hi, I made the repository public. https://github.com/kenji-miyake/ros_component_diagram_generator
Please also notice that it's my personal project and not supported by the AWF."
2022-05-10 ODD working group weekly meeting (92),D_kwDOAnasMc4AP672,2022-05-09T06:47:02Z,Igata-ctrl,0,Unanswered,,,
Add Testing Guidelines,D_kwDOAnasMc4AP673,2022-05-09T08:45:22Z,maxime-clem,1,Answered,,,
Add Testing Guidelines,D_kwDOAnasMc4AP673,2022-05-09T08:45:22Z,maxime-clem,1,Answered,DC_kwDOAnasMc4AKr_y,maxime-clem,"I have opened a first PR to add guidelines for unit testing and integration testing: https://github.com/autowarefoundation/autoware-documentation/pull/119
These guidelines are mostly copied from Autoware.Auto (https://autowarefoundation.gitlab.io/autoware.auto/AutowareAuto/testing-overview.html)."
HD Map to lanelet2 converter,D_kwDOAnasMc4AP674,2022-05-09T13:57:18Z,anushamandalapu-tomtom,1,Answered,,,
HD Map to lanelet2 converter,D_kwDOAnasMc4AP674,2022-05-09T13:57:18Z,anushamandalapu-tomtom,1,Answered,DC_kwDOAnasMc4AKYM-,mitsudome-r,"@anushamandalapu-tomtom Great work!
Could you update the link in the readme to change Autoware.Auto to Autoware.Universe/Core since we have transitioned to it?"
HD Map to lanelet2 converter,D_kwDOAnasMc4AP674,2022-05-09T13:57:18Z,anushamandalapu-tomtom,1,Answered,DC_kwDOAnasMc4AKYfI,anushamandalapu-tomtom,"Thank you, @mitsudome-r. 
Sure, we can update the readme file. However, the references I got from the web for [autoware.universe](https://github.com/autowarefoundation/autoware.universe) and [autoware.core](https://github.com/autowarefoundation/autoware.core) are GitHub repositories. Do you want us to reference that?"
[Autoware Documentation] Installation section architecture,D_kwDOAnasMc4AP675,2022-05-10T03:15:57Z,shmpwk,2,Answered,,,
[Autoware Documentation] Installation section architecture,D_kwDOAnasMc4AP675,2022-05-10T03:15:57Z,shmpwk,2,Answered,DC_kwDOAnasMc4AKYOj,mitsudome-r,"@shmpwk Thanks for raising the issue. I think your points are valid. We can still keep the pages for ""Tools"" and create a new page for additional configuration."
[Autoware Documentation] Installation section architecture,D_kwDOAnasMc4AP675,2022-05-10T03:15:57Z,shmpwk,2,Answered,DC_kwDOAnasMc4AKYQM,shmpwk,"Thank you for your reply. 
~~You mean the current contents in ""Tools for users/ developers"" should move to additianal configuration pages and the pages ""Tools for users/ developers"" should be written like ""Under Construction""?~~

[Edited]
Now I understand what you want to say. I create PR which leaves Tools page and adds additional configuration page.
https://github.com/autowarefoundation/autoware-documentation/pull/104"
[Autoware Documentation] Installation section architecture,D_kwDOAnasMc4AP675,2022-05-10T03:15:57Z,shmpwk,2,Answered,DC_kwDOAnasMc4AKYRw,kenji-miyake,"@shmpwk Thank you for your suggestion!

Telling the background, this page is modified from [Autoware.Auto's documentation](https://autowarefoundation.gitlab.io/autoware.auto/AutowareAuto/installation.html).
- Remove ADE.
- Remove SVL simulator. (due to its EOL :cry:)
- Aggregate distributed information such as https://autowarefoundation.gitlab.io/autoware.auto/AutowareAuto/building.html#building-colcon-defaults
  - Because I think it's also ""installation"".

And regarding your suggestion, I feel it's good to discuss with some concrete examples.
So if you have any concrete ideas, please submit a PR, and let's discuss them there! :smile: "
[Autoware Documentation] Installation section architecture,D_kwDOAnasMc4AP675,2022-05-10T03:15:57Z,shmpwk,2,Answered,DC_kwDOAnasMc4AKZtl,shmpwk,"Thank you for your supports, the background helps me to understand the direction of the documetaion.

And I notice that ""Tools for users"" should be left as it is until adding the new simulator, and should change the name for ""Tools for developer"".
I created the PR for the improvement. 
https://github.com/autowarefoundation/autoware-documentation/pull/104"
[Autoware documentation] Adding more detail to the existing hardware requirements,D_kwDOAnasMc4AP676,2022-05-10T05:47:43Z,Unknown,3,Answered,,,
[Autoware documentation] Adding more detail to the existing hardware requirements,D_kwDOAnasMc4AP676,2022-05-10T05:47:43Z,Unknown,3,Answered,DC_kwDOAnasMc4AKYQc,kenji-miyake,"> As a starting point, are the following minimum requirements from the AutowareArchitectureProposal repository still valid?

As a recommended or average requirement, I feel it's okay.
But since Autoware is scalable, it can work with less powerful hardware if users customize the ODD and node configurations.

> Ubuntu 20.04

From ROS 2 Humble, 22.04 is recommended for the source installation.
For the docker installation, I believe Autoware works with many OSs, but they are not tested well and might be difficult to get support."
[Autoware documentation] Adding more detail to the existing hardware requirements,D_kwDOAnasMc4AP676,2022-05-10T05:47:43Z,Unknown,3,Answered,DC_kwDOAnasMc4AKuaY,Unknown,"> From ROS 2 Humble, 22.04 is recommended for the source installation.

Since we plan to keep using Galactic until it reaches end of support in November, will it be okay to state ""Ubuntu 20.04"" until that time?"
[Autoware documentation] Adding more detail to the existing hardware requirements,D_kwDOAnasMc4AP676,2022-05-10T05:47:43Z,Unknown,3,Answered,DC_kwDOAnasMc4AKZnO,HaoruXue,"I'm currently working on Autoware racing ODD on 1/10 platforms with Jetson Xavier NX or equivalent.

One thing to note is that often times you only need a partial Autoware stack running which reduces the computation requirements. For the 1/10 platform with planar LiDAR, for example, the entire localization and perception are out-sourced to NAV2 and SLAM toolbox which have more suitable packages for this use case. We are only running Autoware planning and control packages. You can see more details about the architecture [here](https://github.com/autowarefoundation/autoware/discussions/206).

We don't have any metrics yet in terms of things such as planning FPS, but Autoware.Auto currently runs as intended on a Jetson Xavier NX platform with 6 core and 8GB RAM running Autoware, NAV2, and RVIZ.
"
[Autoware documentation] Adding more detail to the existing hardware requirements,D_kwDOAnasMc4AP676,2022-05-10T05:47:43Z,Unknown,3,Answered,DC_kwDOAnasMc4AKbkZ,Sharrrrk,"> One thing to note is that often times you only need a partial Autoware stack running which reduces the computation requirements.

It is true indeed, we are also using multiple Xavier with partial Autoware stack running on each."
[Autoware documentation] Adding more detail to the existing hardware requirements,D_kwDOAnasMc4AP676,2022-05-10T05:47:43Z,Unknown,3,Answered,DC_kwDOAnasMc4AKt5-,Sharrrrk,Created an issue here to add reference hardware platform https://github.com/autowarefoundation/autoware-documentation/issues/123
Open AD Kit WG Meeting 2022/05/12,D_kwDOAnasMc4AP677,2022-05-10T07:55:44Z,Unknown,0,Unanswered,,,
Autonomy Software WG Meeting 2022/05/17,D_kwDOAnasMc4AP678,2022-05-10T18:20:05Z,BonoloAWF,2,Answered,,,
Autonomy Software WG Meeting 2022/05/17,D_kwDOAnasMc4AP678,2022-05-10T18:20:05Z,BonoloAWF,2,Answered,DC_kwDOAnasMc4AKZRi,kenji-miyake,"@BonoloAWF @xmfcx cc @mitsudome-r Hi, I'd like to discuss the transition strategy from ROS 2 Galactic to Humble (at this meeting and also at the next TSC).

I'll summarize the status (https://github.com/autowarefoundation/autoware.universe/issues/268) into several slides, so I want to get feedback from Bus ODD members about their requirements for the transition.
For example, ""When can the vehicle's OS be updated to `22.04`?"" in order to determine the support timeline.

Thank you. :bow: "
Autonomy Software WG Meeting 2022/05/17,D_kwDOAnasMc4AP678,2022-05-10T18:20:05Z,BonoloAWF,2,Answered,DC_kwDOAnasMc4AKkAU,mitsudome-r,"Here's the slide that I used today: 
[Transition strategy to ROS 2 Humble.pdf](https://github.com/autowarefoundation/autoware/files/8709789/Transition.strategy.to.ROS.2.Humble.pdf)
"
Autonomy Software WG Meeting 2022/05/17,D_kwDOAnasMc4AP678,2022-05-10T18:20:05Z,BonoloAWF,2,Answered,DC_kwDOAnasMc4AKjiy,mitsudome-r,"I also have additional topic about having a monthly release of autoware for ease of testing.
The idea is that we will have a release branch in the https://github.com/autowarefoundation/autoware repository with a repos file pointing to a certain commit hash at certain point in time. We will run the CI against the branch to make sure that it doesn't have a build failure and also make sure that it passes a minimal set of driving scenarios using scenario simulator.

Comment from itri-bus channel in Discord.

> Bonolo 
> Universe is actively under development so it is a bit tricky to get stable packages.  M. Fatih Cırıt (AWF) Xinyu Wang(TIER IV)  do you have any suggestions on how Brian Lin (ITRI-U300) could proceed? Does universe have a pre-release branch perhaps which is a bit more stable than main?
> 
> Xinyu Wang(TIER IV) 
> Bonolo, Brian Lin (ITRI-U300),  Hi Bonolo, Brian. Unfortunately, we do not have a well-tested version for release. I've talked to Mitsudome-san Ryohsuke Mitsudome about the issue and he will be proposing to have this featured release on a monthly basis during the Software Working Group Meeting this week. For now, please use the current master or (make a fork perhaps) as we have not seen major issues with it."
[Autoware Documentation] I want to check how the PR looks beforehand,D_kwDOAnasMc4AP67_,2022-05-11T01:12:40Z,kminoda,1,Answered,,,
[Autoware Documentation] I want to check how the PR looks beforehand,D_kwDOAnasMc4AP67_,2022-05-11T01:12:40Z,kminoda,1,Answered,DC_kwDOAnasMc4AKZrC,maxime-clem,"The easiest way is to open the PR (as a draft if you want) and the updated documentation pages will be generated by github.
For example: https://github.com/autowarefoundation/autoware-documentation/pull/86#issuecomment-1104850759 

Otherwise you can clone the documentation repository and build the documentation locally with command `mkdocs build -f mkdocs.yaml` but this requires many dependencies."
[Autoware Documentation] I want to check how the PR looks beforehand,D_kwDOAnasMc4AP67_,2022-05-11T01:12:40Z,kminoda,1,Answered,DC_kwDOAnasMc4AKbhD,kenji-miyake,`mkdocs serve` can also be used!
"""deploy-docs"" github action for PR in Autoware Documentation fails",D_kwDOAnasMc4AP68A,2022-05-11T02:47:00Z,kminoda,4,Answered,,,
"""deploy-docs"" github action for PR in Autoware Documentation fails",D_kwDOAnasMc4AP68A,2022-05-11T02:47:00Z,kminoda,4,Answered,DC_kwDOAnasMc4AKZy7,shmpwk,"It looks this line causes error.
https://github.com/msabramo/setuptools-markdown/blob/34ed6276e0c8bcefcd967bd8db138546a270bdf4/setuptools_markdown.py#L43

pypandoc does not have `convert` function. https://github.com/NicklasTegner/pypandoc/blob/master/pypandoc/__init__.py
pypandoc only has `convert_file` or `convert_text`.

Actually pypandoc previously have `convert` function like https://github.com/NicklasTegner/pypandoc/blob/c06d7b64a58729fa174b7721dac6c600fad166af/pypandoc/__init__.py

I created PR https://github.com/msabramo/setuptools-markdown/pull/21 but the error cannot be helped until the PR will merge and pypi will update.

FYI, there is a similar issue https://github.com/man-group/pytest-plugins/issues/87.
"
"""deploy-docs"" github action for PR in Autoware Documentation fails",D_kwDOAnasMc4AP68A,2022-05-11T02:47:00Z,kminoda,4,Answered,DC_kwDOAnasMc4AKZ2X,kenji-miyake,"Thank you for investigating and solving this issue! :pray: 
I think we can remove the dependency of `mdx_unimoji` because it's not a mandatory extension.

Would you send PRs to the following files?
- https://github.com/autowarefoundation/autoware-documentation -> mkdocs.yaml
- https://github.com/autowarefoundation/autoware.universe -> mkdocs.yaml
- https://github.com/autowarefoundation/autoware-github-actions -> deploy-docs/mkdocs-requirements.txt"
"""deploy-docs"" github action for PR in Autoware Documentation fails",D_kwDOAnasMc4AP68A,2022-05-11T02:47:00Z,kminoda,4,Answered,DC_kwDOAnasMc4AKZ3a,shmpwk,"Ok, I will, thank you."
"""deploy-docs"" github action for PR in Autoware Documentation fails",D_kwDOAnasMc4AP68A,2022-05-11T02:47:00Z,kminoda,4,Answered,DC_kwDOAnasMc4AKZ5C,shmpwk,"I created and merged those PR.  
- https://github.com/autowarefoundation/autoware-documentation -> mkdocs.yaml
  - https://github.com/autowarefoundation/autoware-documentation/pull/105 
- https://github.com/autowarefoundation/autoware.universe -> mkdocs.yaml
  - https://github.com/autowarefoundation/autoware.universe/pull/883
- https://github.com/autowarefoundation/autoware-github-actions -> deploy-docs/mkdocs-requirements.txt
  - https://github.com/autowarefoundation/autoware-github-actions/pull/146

Thank you for your review @kenji-miyake."
"""deploy-docs"" github action for PR in Autoware Documentation fails",D_kwDOAnasMc4AP68A,2022-05-11T02:47:00Z,kminoda,4,Answered,DC_kwDOAnasMc4AKZ5f,kenji-miyake,"Please wait for the next release of `autoware-github-actions`. :pray:
It would be within about 30 minutes."
"""deploy-docs"" github action for PR in Autoware Documentation fails",D_kwDOAnasMc4AP68A,2022-05-11T02:47:00Z,kminoda,4,Answered,DC_kwDOAnasMc4AKZ6I,kenji-miyake,https://github.com/autowarefoundation/autoware-github-actions/releases/tag/v1.7.1
"""deploy-docs"" github action for PR in Autoware Documentation fails",D_kwDOAnasMc4AP68A,2022-05-11T02:47:00Z,kminoda,4,Answered,DC_kwDOAnasMc4AKZ6f,shmpwk,"Thank you! 
deploy-docs has passed! https://github.com/autowarefoundation/autoware-documentation/pull/103
cc. @kminoda "
"""deploy-docs"" github action for PR in Autoware Documentation fails",D_kwDOAnasMc4AP68A,2022-05-11T02:47:00Z,kminoda,4,Answered,DC_kwDOAnasMc4AKZ7U,shmpwk,"https://github.com/orgs/autowarefoundation/discussions/286#discussioncomment-2727099
↑To sum up the comment above, fixing ci solved the problem by removing mdx_unimoji dependency.
See https://github.com/autowarefoundation/autoware-documentation/pull/105

You can check the ci has passed [here](https://github.com/autowarefoundation/autoware-documentation/runs/6382768400?check_suite_focus=true)."
"""deploy-docs"" github action for PR in Autoware Documentation fails",D_kwDOAnasMc4AP68A,2022-05-11T02:47:00Z,kminoda,4,Answered,DC_kwDOAnasMc4AKarB,JessicaTegner,"Hi there.

I'm the maintainer of PyPandoc, which seems to be the root error in ops post.

In the recent release of PyPandoc (version 1.8), the convert function was removed after a year of being deprecated."
"""deploy-docs"" github action for PR in Autoware Documentation fails",D_kwDOAnasMc4AP68A,2022-05-11T02:47:00Z,kminoda,4,Answered,DC_kwDOAnasMc4AKasH,kenji-miyake,Thank you for notifying that! :pray: 
"""deploy-docs"" github action for PR in Autoware Documentation fails",D_kwDOAnasMc4AP68A,2022-05-11T02:47:00Z,kminoda,4,Answered,DC_kwDOAnasMc4AKasU,shmpwk,"Thank you @NicklasTegner 
We decided to temporarily remove PyPandoc depended library.
But when those libraries are updated, we might use them again."
"""deploy-docs"" github action for PR in Autoware Documentation fails",D_kwDOAnasMc4AP68A,2022-05-11T02:47:00Z,kminoda,4,Answered,DC_kwDOAnasMc4AKats,JessicaTegner,"@shmpwk  @kenji-miyake 

The solution, to get it to work again, is to switch from pypandoc.convert() to pypandoc.convert_file() or pypandoc.convert_text(), depending on the usage case."
"""deploy-docs"" github action for PR in Autoware Documentation fails",D_kwDOAnasMc4AP68A,2022-05-11T02:47:00Z,kminoda,4,Answered,DC_kwDOAnasMc4AKauJ,shmpwk,"Thank you for your advice.
Yes I created such PRs but they are not our libraries.

https://github.com/msabramo/setuptools-markdown/pull/21
https://github.com/man-group/pytest-plugins/pull/205

We hope they’ll be merged."
High Level mission planning or task planning,D_kwDOAnasMc4AP68B,2022-05-11T04:11:50Z,soblin,2,Answered,,,
High Level mission planning or task planning,D_kwDOAnasMc4AP68B,2022-05-11T04:11:50Z,soblin,2,Answered,DC_kwDOAnasMc4AKaW6,takayuki5168,"Currently this function is not supported in Autoware. When the ego is running near the goal, it will stop even if there is a remained path after the goal.
"
High Level mission planning or task planning,D_kwDOAnasMc4AP68B,2022-05-11T04:11:50Z,soblin,2,Answered,DC_kwDOAnasMc4AKbyA,TakaHoribe,"@soblin Autoware doesn't support circular and return paths currently. 
Circular and return routes are not supported by route search in `mission_planner`. An overwrapped route (e.g. forward and backward) is not tested in `behavior_planner` or `motion_planner` thus may cause unintended behavior.

Instead, sending a goal multiple times achieves this behavior."
Parking trajectory for diff-drive robot,D_kwDOAnasMc4AP68C,2022-05-11T04:33:55Z,soblin,1,Answered,,,
Parking trajectory for diff-drive robot,D_kwDOAnasMc4AP68C,2022-05-11T04:33:55Z,soblin,1,Answered,DC_kwDOAnasMc4AKaVd,takayuki5168,"Here we use Hybrid A* search for parking planning.
https://github.com/autowarefoundation/autoware.universe/tree/main/planning/freespace_planning_algorithms/src

In Hybrid A* search, we assume that the vehicle's following path as reeds shepp curves. That's why the generated trajectory is like car-like vehicle's one.
To handle diff drive robot, we have to add its dynamics or kinematics model instead of reeds shepp in Hybrid A* search."
Parking trajectory for diff-drive robot,D_kwDOAnasMc4AP68C,2022-05-11T04:33:55Z,soblin,1,Answered,DC_kwDOAnasMc4AKaV0,takayuki5168,"We will have a big refactoring and improvement on freespace planning by @HiroIshida, so please keep in touch if you modify the package."
Parking trajectory for diff-drive robot,D_kwDOAnasMc4AP68C,2022-05-11T04:33:55Z,soblin,1,Answered,DC_kwDOAnasMc4AKak1,HiroIshida,"@soblin 
I think the problem is two fold. 

First, and most importantly, the transition table that determines the astar's node transition is hard-coded to ""car-like"" vehicle kinematics. So, the resulting trajectory is too conventional for diff-drive robot.  
https://github.com/autowarefoundation/autoware.universe/blob/bb96ae7b56085a6054ad1ade970bad399faef35a/planning/freespace_planning_algorithms/src/astar_search.cpp#L74
You can replace this transition table by the one of diff-drive robot, to make trajectory more suitable for the diff-drive robot. I personally think possible modification would be creating an abstract class for discrete kinematics, and diff-drive and car-like kinematics class as subclass of the abstract class. Then, creating a transition table depending on specified kinematics would be clean solution of the problem.  

Second one is the one mentioned by @takayuki5168.  Even after you replace the transition table with the diff-drive robot's one, because the reeds-shepp distance is used as a heuristic function, ""car-like"" path will be preferred. https://github.com/autowarefoundation/autoware.universe/blob/bb96ae7b56085a6054ad1ade970bad399faef35a/planning/freespace_planning_algorithms/src/astar_search.cpp#L214
Originally, euclidean heuristic function is used in astar planning, but it was deleted before because reeds-shepp is far better for car-like robot. Possible change would be adding a rosparam to select the heuristic function.

I will not make a ""big change"" on freespace planning algorithm package but I am going to open a PR that adds RRT* and informed-RRT* to the package in few days. It would be really helpfule If your PR on this problem is after the merge of my PR on RRT*.  
"
2022-05-11 Simulation Working Group Meeting,D_kwDOAnasMc4AP68D,2022-05-11T11:23:07Z,sglee-morai,0,Unanswered,,,
Autoware Architecture WG Meeting (localization) 2022/05/10,D_kwDOAnasMc4AP68E,2022-05-11T13:59:47Z,mitsudome-r,1,Answered,,,
Autoware Architecture WG Meeting (localization) 2022/05/10,D_kwDOAnasMc4AP68E,2022-05-11T13:59:47Z,mitsudome-r,1,Answered,DC_kwDOAnasMc4AKa2Q,TakaHoribe,"@mitsudome-r @xmfcx Thank you for today's mtg. Let me say one thing.

As in @Sharrrrk 's comment, ""why does autoware not use the velocity information directly from CAN BUS?"" is an essential question for the autoware architecture.
I totally agree with @mitsudome-r 's answer ""to support multiple vehicles without architecture changes as a platform..."", but many users may will think the same question. 
So, I suggest having the example explained by @mitsudome-r in the architecture design document. It seems there already is an abstract description like ""to support multiple sensors..."", but a concrete example will help users better understand the architecture.

This would be like:

""One vehicle has a very accurate speed sensor, but one vehicle may not. In the former vehicle, we can use the speed information directly from CAN BUS, but in the latter vehicle, we need to create better speed information by combining other sensors like GNSS, IIMU, etc. To support the multiple sensor/vehicle configurations without architecture changes, all sensor information is sent to the localization module. If the CAN BUS speed sensor accuracy is very high, localization module will output almost same speed value as the CAN BUS by tuning the sensor's covariance information."" "
Autoware Architecture WG Meeting (localization) 2022/05/10,D_kwDOAnasMc4AP68E,2022-05-11T13:59:47Z,mitsudome-r,1,Answered,DC_kwDOAnasMc4AKbkK,Sharrrrk,"@TakaHoribe thanks for your comment, it is indeed the case for the design robustness to support different types of mobiles. I guess it's just the trade-off to be made. At current stage, Autoware as a reference platform do need to focus on the usability for various users. So I agree with the fusion architecture design."
How can I initial pose estimate to NDT in Autoware.universe using only rviz,D_kwDOAnasMc4AP68F,2022-05-11T16:18:14Z,meliketanrikulu,1,Answered,,,
How can I initial pose estimate to NDT in Autoware.universe using only rviz,D_kwDOAnasMc4AP68F,2022-05-11T16:18:14Z,meliketanrikulu,1,Answered,DC_kwDOAnasMc4AKbLV,YamatoAndo,"@meliketanrikulu Do you mean you want it to work without ekf_node?
If not, you can estimate the initial position using ""2d pose estimate""."
How can I initial pose estimate to NDT in Autoware.universe using only rviz,D_kwDOAnasMc4AP68F,2022-05-11T16:18:14Z,meliketanrikulu,1,Answered,DC_kwDOAnasMc4AKbPC,meliketanrikulu,"Thanks for your reply. Yes, i want to use NDT without ekf_node. actually ekf_node provide initial_pose. I can change this topic as /initialpose (Message from this topic is published when I initialize pose estimate in rviz) but ndt node want to two or more times estimate initial pose . You can look this line.
https://github.com/autowarefoundation/autoware.universe/blob/bb96ae7b56085a6054ad1ade970bad399faef35a/localization/ndt_scan_matcher/src/ndt_scan_matcher_core.cpp#L457

That's why I think it is expected to calculate initialpose from gnss and similar sources.
When I set it in rviz, it doesn't make much sense to set it twice. "
How can I initial pose estimate to NDT in Autoware.universe using only rviz,D_kwDOAnasMc4AP68F,2022-05-11T16:18:14Z,meliketanrikulu,1,Answered,DC_kwDOAnasMc4AKbTX,YamatoAndo,"Sorry. It is not possible to run without ekf_node in the current architecture.

If you can run with ekf_node, you can estimate pose using ""2d pose estimate"", via pose_initializer_node .
Please refer to the current node diagram below.
![autoware_core_architecture-Autoware Universe drawio](https://user-images.githubusercontent.com/13819566/167943612-418696de-2a0c-42fb-bb63-7983362465e5.png)

"
How can I initial pose estimate to NDT in Autoware.universe using only rviz,D_kwDOAnasMc4AP68F,2022-05-11T16:18:14Z,meliketanrikulu,1,Answered,DC_kwDOAnasMc4AKcSt,meliketanrikulu,Thanks for your reply @YamatoAndo . I understand now. I want to ask another question. We use ekf_node output when calculating initial_pose to get more accurate results? Is this true?
How can I initial pose estimate to NDT in Autoware.universe using only rviz,D_kwDOAnasMc4AP68F,2022-05-11T16:18:14Z,meliketanrikulu,1,Answered,DC_kwDOAnasMc4AKdPH,YamatoAndo,Yes! that's right!
Refactor package using C++17 API,D_kwDOAnasMc4AP68H,2022-05-12T04:16:57Z,RyuYamamoto,1,Answered,,,
Refactor package using C++17 API,D_kwDOAnasMc4AP68H,2022-05-12T04:16:57Z,RyuYamamoto,1,Answered,DC_kwDOAnasMc4AKbrb,kenji-miyake,"@RyuYamamoto Yes, it's super nice!!!
Regarding other features, I think many Boost dependencies such as `optional` can be replaced with `std`."
Refactor package using C++17 API,D_kwDOAnasMc4AP68H,2022-05-12T04:16:57Z,RyuYamamoto,1,Answered,DC_kwDOAnasMc4AKbsO,RyuYamamoto,"Thanks for the reply and sharing the info.
sure, boost can be replaced by some std functions. I will try to check autoware packages!"
Refactor package using C++17 API,D_kwDOAnasMc4AP68H,2022-05-12T04:16:57Z,RyuYamamoto,1,Answered,DC_kwDOAnasMc4AKfhr,kenji-miyake,"boost::mutex
https://github.com/autowarefoundation/autoware.universe/blob/e07f8c715bcbf03d48ac5d20391bc78842fbafa1/sensing/pointcloud_preprocessor/src/crop_box_filter/crop_box_filter_nodelet.cpp#L96"
Refactor package using C++17 API,D_kwDOAnasMc4AP68H,2022-05-12T04:16:57Z,RyuYamamoto,1,Answered,DC_kwDOAnasMc4AKmWR,RyuYamamoto,"maybe can replace `boost::filesystem` to `std::filesystem` in `system_monitor` packages.
https://github.com/autowarefoundation/autoware.universe/blob/main/system/system_monitor/include/system_monitor/system_monitor_utility.hpp#L32"
Refactor package using C++17 API,D_kwDOAnasMc4AP68H,2022-05-12T04:16:57Z,RyuYamamoto,1,Answered,DC_kwDOAnasMc4AKmqA,TakaHoribe,This must be super nice work.
Refactor package using C++17 API,D_kwDOAnasMc4AP68H,2022-05-12T04:16:57Z,RyuYamamoto,1,Answered,DC_kwDOAnasMc4AO2QB,RyuYamamoto,"Probably , some of system_monitor packages can be replaced boost:filesystem to std::filesystem.

https://github.com/autowarefoundation/autoware.universe/blob/1bab84e75e6a6b750b5781212b04702b7646616f/system/system_monitor/src/cpu_monitor/raspi_cpu_monitor.cpp#L30
https://github.com/autowarefoundation/autoware.universe/blob/8db33518a31bd7cd56cf9aedab9c19c82282bcea/system/system_monitor/src/ntp_monitor/ntp_monitor.cpp#L34
https://github.com/autowarefoundation/autoware.universe/blob/de8deed8e45177298fe34fbdbf46f7aafead7316/system/system_monitor/src/gpu_monitor/tegra_gpu_monitor.cpp#L33
https://github.com/autowarefoundation/autoware.universe/blob/1bab84e75e6a6b750b5781212b04702b7646616f/system/system_monitor/src/cpu_monitor/intel_cpu_monitor.cpp#L39

etc...
"
colcon build freezes on autoware.universe pointcloud_preprocessor package,D_kwDOAnasMc4AP68I,2022-05-12T15:33:02Z,samehmohamed88,4,Answered,,,
colcon build freezes on autoware.universe pointcloud_preprocessor package,D_kwDOAnasMc4AP68I,2022-05-12T15:33:02Z,samehmohamed88,4,Answered,DC_kwDOAnasMc4AKcwv,xmfcx,"Autoware uses quite a lot of memory to build, could you try to increase the swap space if you have disk space available? Preferably on the SSD. If possible about 16 to 32GB of swap is recommended.

A tutorial for that: https://linuxize.com/post/how-to-add-swap-space-on-ubuntu-20-04/ (you don't need to do Adjusting the Swappiness Value step)"
colcon build freezes on autoware.universe pointcloud_preprocessor package,D_kwDOAnasMc4AP68I,2022-05-12T15:33:02Z,samehmohamed88,4,Answered,DC_kwDOAnasMc4AKcw6,xmfcx,I recommend you to also monitor your system memory usage during the build process with a terminal window with `htop`. (you can install with `sudo apt install htop`)
colcon build freezes on autoware.universe pointcloud_preprocessor package,D_kwDOAnasMc4AP68I,2022-05-12T15:33:02Z,samehmohamed88,4,Answered,DC_kwDOAnasMc4AKc4x,samehmohamed88,Thanks @xmfcx your suggestion of increasing swap did fix the issue.
colcon build freezes on autoware.universe pointcloud_preprocessor package,D_kwDOAnasMc4AP68I,2022-05-12T15:33:02Z,samehmohamed88,4,Answered,DC_kwDOAnasMc4AKdg9,angry-crab,I had the same issue yesterday.  `--executor sequential` worked for me. 
colcon build freezes on autoware.universe pointcloud_preprocessor package,D_kwDOAnasMc4AP68I,2022-05-12T15:33:02Z,samehmohamed88,4,Answered,DC_kwDOAnasMc4AKeN1,samehmohamed88,"@angry-crab  I had already tried this several times.  For my system, the only thing that worked is increasing swap.  It was a fresh checkout of the Autoware, so it was trying to build all 195 packages.  Even with `--executor sequential` the build cache was filling up my RAM"
colcon build freezes on autoware.universe pointcloud_preprocessor package,D_kwDOAnasMc4AP68I,2022-05-12T15:33:02Z,samehmohamed88,4,Answered,DC_kwDOAnasMc4AKebK,yukkysaito,"Parallelism of packages and parallelism within packages must be suppressed.
It may be needed `MAKEFLAGS`.
```
MAKEFLAGS=-j1 colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release --executor sequential
```"
New function to detect if the GNSS value is outside of the map?,D_kwDOAnasMc4AP68J,2022-05-13T07:51:01Z,IshitaTakeshi,1,Answered,,,
New function to detect if the GNSS value is outside of the map?,D_kwDOAnasMc4AP68J,2022-05-13T07:51:01Z,IshitaTakeshi,1,Answered,DC_kwDOAnasMc4AKi_C,YamatoAndo,"It would be good to have such a feature!
But, I think it would be a low priority for development."
New function to detect if the GNSS value is outside of the map?,D_kwDOAnasMc4AP68J,2022-05-13T07:51:01Z,IshitaTakeshi,1,Answered,DC_kwDOAnasMc4AKkus,Unknown,"@kenji-miyake @mitsudome-r If a feature request is considered to be a good addition like this one, what are the next steps? Should an issue be created from this discussion to track the request?"
New function to detect if the GNSS value is outside of the map?,D_kwDOAnasMc4AP68J,2022-05-13T07:51:01Z,IshitaTakeshi,1,Answered,DC_kwDOAnasMc4AKku8,kenji-miyake,"@LalithVipulananthan I think, if we need to discuss the design (approach), it's better to create an issue and discuss it there. If it's relatively small, we can directly submit a PR.
However, as Ando-san says, we should consider the priority."
License of the new file,D_kwDOAnasMc4AP68K,2022-05-13T08:39:59Z,IshitaTakeshi,1,Answered,,,
License of the new file,D_kwDOAnasMc4AP68K,2022-05-13T08:39:59Z,IshitaTakeshi,1,Answered,DC_kwDOAnasMc4AKd8D,kenji-miyake,"The guideline is here.
https://autowarefoundation.github.io/autoware-documentation/main/contributing/license/

To reduce the maintenance cost, it's recommended to use `The Autoware Controbutors` instead.
But currently, the old format that uses company names is allowed."
How-to-add-bidirectional-driving-lanes-in-autoware-universe,D_kwDOAnasMc4AP68L,2022-05-13T10:26:31Z,raminterpl,1,Answered,,,
How-to-add-bidirectional-driving-lanes-in-autoware-universe,D_kwDOAnasMc4AP68L,2022-05-13T10:26:31Z,raminterpl,1,Answered,DC_kwDOAnasMc4AKeGR,TakaHoribe,"@raminterpl ~Could you try making two lanelets with different directions in the same place. Not adding a bi-directional relation, but adding another lanelet that has a different direction. I'm not sure this will work but I did this way before.~ （Edit: I misunderstood. Maybe you've already tried this. We could make a bi-directional driving in your way, so let me take a look at your map.)

Btw, can you share the lanelet map?
If the problem is only in the drivable area thing, it could be a bug. I'd like to look into it.



"
Issue regarding unfinished module system_monitor on Jetson Platform,D_kwDOAnasMc4AP68M,2022-05-13T16:37:49Z,chris-interplai,1,Answered,,,
Issue regarding unfinished module system_monitor on Jetson Platform,D_kwDOAnasMc4AP68M,2022-05-13T16:37:49Z,chris-interplai,1,Answered,DC_kwDOAnasMc4AKhKT,Sharrrrk,"Hi, I think you just need to pull the latest code, I have already fixed this error in: [869](https://github.com/autowarefoundation/autoware.universe/pull/869)"
Where to place the detailed explanation of rosbag simulation & planning simulation?,D_kwDOAnasMc4AP68N,2022-05-16T04:25:23Z,IshitaTakeshi,3,Answered,,,
Where to place the detailed explanation of rosbag simulation & planning simulation?,D_kwDOAnasMc4AP68N,2022-05-16T04:25:23Z,IshitaTakeshi,3,Answered,DC_kwDOAnasMc4AKg_h,kenji-miyake,"@IshitaTakeshi I guess the answer is [this page](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/).
But since the repository is private, please briefly describe each content here."
Where to place the detailed explanation of rosbag simulation & planning simulation?,D_kwDOAnasMc4AP68N,2022-05-16T04:25:23Z,IshitaTakeshi,3,Answered,DC_kwDOAnasMc4AKg_9,IshitaTakeshi,OK. So I'm going to send PRs and link them to this page
Where to place the detailed explanation of rosbag simulation & planning simulation?,D_kwDOAnasMc4AP68N,2022-05-16T04:25:23Z,IshitaTakeshi,3,Answered,DC_kwDOAnasMc4AKhCj,IshitaTakeshi,PR: https://github.com/autowarefoundation/autoware-documentation/pull/111
2022-05-17 ODD working group weekly meeting (93),D_kwDOAnasMc4AP68O,2022-05-16T09:20:07Z,Igata-ctrl,0,Unanswered,,,
Run AVP on Xavier outside ade and LGSVL on Ubuntu,D_kwDOAnasMc4AP68P,2022-05-16T10:43:16Z,FabioSpano,1,Answered,,,
Run AVP on Xavier outside ade and LGSVL on Ubuntu,D_kwDOAnasMc4AP68P,2022-05-16T10:43:16Z,FabioSpano,1,Answered,DC_kwDOAnasMc4AXWct,Danior2235,ros2 launch autoware_demos avp_sim.launch.py api_endpoint_address:=192.168.16.134(simulator client IP ) ros2_bridge_address:=192.168.16.183(the autoware host IP)
Open AD Kit WG meeting schedule proposal,D_kwDOAnasMc4AP68Q,2022-05-17T05:43:11Z,Unknown,0,Unanswered,,,
Open AD Kit WG Meeting 2022/05/19,D_kwDOAnasMc4AP68R,2022-05-18T02:04:54Z,Unknown,1,Answered,,,
Open AD Kit WG Meeting 2022/05/19,D_kwDOAnasMc4AP68R,2022-05-18T02:04:54Z,Unknown,1,Answered,DC_kwDOAnasMc4AKnDM,Sharrrrk,"> Are the launch files ready?
Mitsudome: Yes. Just need confirmation from the web team that CI/CD is available before launch files can be provided to other members to test the existing platforms

@LalithVipulananthan Just to confirm that the launch files are not ready to be provided yet, right? Please let us know when it's available.

Another comment here: https://github.com/autowarefoundation/autoware-projects/issues/32#issuecomment-1131285502 "
Open AD Kit WG Meeting 2022/05/19,D_kwDOAnasMc4AP68R,2022-05-18T02:04:54Z,Unknown,1,Answered,DC_kwDOAnasMc4AKnHj,Unknown,"@Sharrrrk Correct! We are still in the process of getting the launch files ready, but we are also waiting to confirm that T4's CI/CD has been set up to work with Universe so that the quick start guide can be confirmed from start to finish. Once the launch files are ready I will update you via the issue or via Discord (and thank you for the offer to test on a Jetson AGX. I think we will most likely take you up on that offer!)"
Open AD Kit WG Meeting 2022/05/19,D_kwDOAnasMc4AP68R,2022-05-18T02:04:54Z,Unknown,1,Answered,DC_kwDOAnasMc4AKnJ3,Sharrrrk,Thank you for the clarification.
autoware test,D_kwDOAnasMc4AP68S,2022-05-18T02:55:37Z,storrrrrrrrm,1,Answered,,,
autoware test,D_kwDOAnasMc4AP68S,2022-05-18T02:55:37Z,storrrrrrrrm,1,Answered,DC_kwDOAnasMc4AKkzU,kenji-miyake,"@storrrrrrrrm Regarding `gtest` (or `launch_testing`), it's executed through `colcon test`.
https://github.com/autowarefoundation/autoware.universe/blob/49d1764a5cb02924910cc5fab0f055cc337ca8ac/.github/workflows/build-and-test.yaml#L36

But there are not so many unit tests in `autoware.universe` now.
Instead, TIER IV utilizes scenario testing by https://github.com/tier4/scenario_simulator_v2.
Although it's currently only targeting Planning components, we're preparing to extend the support using Rosbags or a Digital-twin simulator.

And in the future, we'll refactor the code of `autoware.universe` and put it into `autoware.core`, and there will be much more unit tests.
For that, we are discussing the interface at the [Architecture Meetings](https://github.com/orgs/autowarefoundation/discussions/291) now."
autoware test,D_kwDOAnasMc4AP68S,2022-05-18T02:55:37Z,storrrrrrrrm,1,Answered,DC_kwDOAnasMc4AKkzz,storrrrrrrrm,"> @storrrrrrrrm Regarding `gtest` (or `launch_testing`), it's executed through `colcon test`. https://github.com/autowarefoundation/autoware.universe/blob/49d1764a5cb02924910cc5fab0f055cc337ca8ac/.github/workflows/build-and-test.yaml#L36
> 
> But there are not so many unit tests in `autoware.universe` now. Instead, TIER IV utilizes scenario testing by https://github.com/tier4/scenario_simulator_v2. Although it's currently only targeting Planning components, we're preparing to extend the support using Rosbags or a Digital-twin simulator.
> 
> And in the future, we'll refactor the code of `autoware.universe` and put it into `autoware.core`, and there will be much more unit tests. For that, we are discussing the interface at the [Architecture Meetings](https://github.com/orgs/autowarefoundation/discussions/291) now.

thanks for quick reply,i have noticed this. what i want to know is where i can find details about what gtest programms are excuted."
autoware test,D_kwDOAnasMc4AP68S,2022-05-18T02:55:37Z,storrrrrrrrm,1,Answered,DC_kwDOAnasMc4AKkz_,kenji-miyake,"If `ament_add_ros_isolated_gtest` or `ament_add_gtest` is written in the package's `CMakeLists.txt`, the tests files are executed.
https://github.com/autowarefoundation/autoware.universe/blob/56f83861c291b4cae0f56d65ce1d23e138aa1f91/control/trajectory_follower/CMakeLists.txt#L75

Please note that some packages have test `.cpp` files, but they might be commented out in `CMakeLists.txt` due to the flakiness."
autoware test,D_kwDOAnasMc4AP68S,2022-05-18T02:55:37Z,storrrrrrrrm,1,Answered,DC_kwDOAnasMc4AKk0d,storrrrrrrrm,"> If `ament_add_ros_isolated_gtest` or `ament_add_gtest` is written in the package's `CMakeLists.txt`, the tests files are executed. https://github.com/autowarefoundation/autoware.universe/blob/56f83861c291b4cae0f56d65ce1d23e138aa1f91/control/trajectory_follower/CMakeLists.txt#L75
> 
> Please note that some packages have test `.cpp` files, but they might be commented out in `CMakeLists.txt` due to the flakiness.

actually,i want to find a place to check which gtest programms are excuted.  currently, i am writting a gtest program to test perception module to make sure that basic  functionality works well, i know how to write and compile a gtest program.   what i want to know is if there is a page i can find details like this:
test_1  passed
test_2 failed
test_3 passed

"
autoware test,D_kwDOAnasMc4AP68S,2022-05-18T02:55:37Z,storrrrrrrrm,1,Answered,DC_kwDOAnasMc4AKk01,kenji-miyake,"You can check the CI logs to confirm that.
https://github.com/autowarefoundation/autoware.universe/runs/6480715619?check_suite_focus=true

If you want to run tests locally, run the following command.

```bash
colcon test --event-handlers console_cohesion+
```"
autoware test,D_kwDOAnasMc4AP68S,2022-05-18T02:55:37Z,storrrrrrrrm,1,Answered,DC_kwDOAnasMc4AKk_W,storrrrrrrrm,"> You can check the CI logs to confirm that. https://github.com/autowarefoundation/autoware.universe/runs/6480715619?check_suite_focus=true
> 
> If you want to run tests locally, run the following command.
> 
> ```shell
> colcon test --event-handlers console_cohesion+
> ```

thanks,it helps!    i ever checked my own PR:https://github.com/autowarefoundation/autoware.universe/pull/820/checks , found that no test excuted.  It seems that it only excuted gtest programms related with the nodes modified,  i ever thought that every gtest program would be excuted.

now here is another question, i want to write a gtest program like this
```
send lidar point and image //ie. has two cars and one person
wait
obj = get result from roi_cluster_fusion
check obj
if(two cars and one person)
{return true}
else
{return false}
```
start perception nodes in background, check if gtest passed.

currently,in autoware test,gtest programms are unittest testing some logic in a single node,they do not need autoware nodes started in background. what i am tying to do is actually module test.  

i do not know if it is possible or how to transplant above idea into current autoware test. whether the test program can pass is related to the autoware nodes parameters and  the data constructed in test program



"
autoware test,D_kwDOAnasMc4AP68S,2022-05-18T02:55:37Z,storrrrrrrrm,1,Answered,DC_kwDOAnasMc4AKlJS,isamu-takagi,"The package [launch_testing](https://github.com/ros2/launch/tree/galactic/launch_testing) can test combinations of multiple nodes.
Write the test node and output the result to stdout or as exit code, and check it using launch_testing.

This is a test using launch_testing that I wrote.
https://github.com/autowarefoundation/autoware.universe/tree/main/system/default_ad_api/test"
autoware test,D_kwDOAnasMc4AP68S,2022-05-18T02:55:37Z,storrrrrrrrm,1,Answered,DC_kwDOAnasMc4AKlPN,maxime-clem,"If you want a test with multiple nodes running in parallel and communicating with each other, this corresponds to an integration test and should use `launch_testing` as isamu-takagi said.

If you only want to test a single node, you can manually publish the input topics and check the output topic. You can find examples of such test in the `trajectory_follower_nodes` package: https://github.com/autowarefoundation/autoware.universe/blob/main/control/trajectory_follower_nodes/test/
This requires creating a ""fake"" node to publish and subscribe to some topics. A convenience library is available to help create this fake node: https://github.com/autowarefoundation/autoware.universe/blob/main/common/fake_test_node/design/fake_test_node-design.md"
autoware test,D_kwDOAnasMc4AP68S,2022-05-18T02:55:37Z,storrrrrrrrm,1,Answered,DC_kwDOAnasMc4AKlUL,storrrrrrrrm,"> 

@isamu-takagi  @maxime-clem  can u tell me how to start this test? i use
```
python3 ./install/default_ad_api/share/default_ad_api/test/main.test.py
```
it shows nothing

and i check https://github.com/autowarefoundation/autoware.universe/runs/6176222765?check_suite_focus=true  wanna to find how it is tested,but find nothing"
autoware test,D_kwDOAnasMc4AP68S,2022-05-18T02:55:37Z,storrrrrrrrm,1,Answered,DC_kwDOAnasMc4AKlY4,isamu-takagi,"@storrrrrrrrm For launch_testing, use launch_test command.
`launch_test ./install/default_ad_api/share/default_ad_api/test/main.test.py`"
autoware test,D_kwDOAnasMc4AP68S,2022-05-18T02:55:37Z,storrrrrrrrm,1,Answered,DC_kwDOAnasMc4AKm78,storrrrrrrrm,"let me summarize my question
1.  if i modify the code of package `default_ad_api` and create a PR, would cmd  `launch_test ./install/default_ad_api/share/default_ad_api/test/main.test.py` triggerd in ci process?
2. as far as i understand,through `main.test.py`, two .py files are executed,
   1. interface_version.py  
      this is test script to test InterfaceVersionNode
   2. default_ad_api.launch.py  
   InterfaceVersionNode and web_server.py are called by default_ad_api.launch.py, these two nodes(InterfaceVersionNode and web_server.py) are 'multi multiple nodes running in parallel and communicating with each other'
am i right?

what i want to do is:
write a test node to test multi perception nodes(crop_box_filter/ground_filter/voxel_grid_filter/euclidean_cluster/tensorrt_yolo/rois_cluster_fusion/..) for autoware,so problems can be found in time 
after codes related with these nodes modified

my initial idea was writing a script to start all perception nodes in background, writing a gtest program to publish fake lidar data and image data,and check results from rois_cluster_fusion. the only problem is how to integrate it into the existing autoware CI process

if using `launch_testing` as u mentioned, i need to write three .py files
1. main.test.py  
call  start_nodes.py and  result_check.py
2. start_nodes.py,like default_ad_api.launch.py
start all perception nodes. is it technically feasible to start all these codes correctly with specific params like we use 'ros2 launch autoware_launch perception.launch.xml' 
3. result_check.py,like interface_version.py
construct fake lidar data,recv result from rois_cluster_fusion node,check the result

it looks too complex and hard to achieve."
Autonomy Software WG Meeting 2022/05/24,D_kwDOAnasMc4AP68T,2022-05-18T13:27:33Z,BonoloAWF,0,Unanswered,,,
Autoware Architecture WG Meeting (perception) 2022/05/18,D_kwDOAnasMc4AP68U,2022-05-18T14:01:59Z,mitsudome-r,1,Answered,,,
Autoware Architecture WG Meeting (perception) 2022/05/18,D_kwDOAnasMc4AP68U,2022-05-18T14:01:59Z,mitsudome-r,1,Answered,DC_kwDOAnasMc4AKnEE,Sharrrrk,"@mitsudome-r I have added the link of Autoware Architecture WG wiki to the wiki home page and the side navigation bar.
https://github.com/autowarefoundation/autoware-projects/wiki#working-group-list"
"Stepping stones for OAD Kit containerization, composition, and orchestration.",D_kwDOAnasMc4AP68V,2022-05-18T14:19:18Z,HamburgDave,1,Answered,,,
"Stepping stones for OAD Kit containerization, composition, and orchestration.",D_kwDOAnasMc4AP68V,2022-05-18T14:19:18Z,HamburgDave,1,Answered,DC_kwDOAnasMc4ALGlm,Unknown,"With the aim of creating a PoC that is focused on creating a container just for Perception related nodes/packages and confirming that it can work with a second container (one that is either monolithic or contains everything except Perception), we have the following tasks/issues set up so far:

- https://github.com/autowarefoundation/autoware-projects/issues/34
- https://github.com/autowarefoundation/autoware/issues/2447
- https://github.com/autowarefoundation/autoware-documentation/issues/101
- https://github.com/autowarefoundation/autoware-projects/issues/36
- https://github.com/autowarefoundation/autoware-projects/issues/37

Any other hints/tips/ideas about additional tasks that need to be added to get from there to having an orchestrated deployment would be very much appreciated!"
GMSL Camera node,D_kwDOAnasMc4AP68X,2022-05-19T02:43:40Z,Sharrrrk,2,Answered,,,
GMSL Camera node,D_kwDOAnasMc4AP68X,2022-05-19T02:43:40Z,Sharrrrk,2,Answered,DC_kwDOAnasMc4ALOes,aohsato,"@Sharrrrk Thank you for this topic!

We applied our [GMSL camera](https://sensor.tier4.jp/automotive-hdr-camera) to our system by developing our own v4l2 device driver and using it with [gscam](https://github.com/ros-drivers/gscam).
(Our device drivers will be released in the future.)

The drivers you shared depend on NVIDIA DRIVE SDK. However, since [many cameras](https://developer.nvidia.com/drive/ecosystem-hw-sw) are supported, creating a ROS wrapper with the latest SDK and implementing it into autoware may be useful for many users.

@drwnz What do you think about this?"
GMSL Camera node,D_kwDOAnasMc4AP68X,2022-05-19T02:43:40Z,Sharrrrk,2,Answered,DC_kwDOAnasMc4ALOj-,drwnz,"@Sharrrrk @aohsato 
Since each individual GMSL camera will require it's own kernel-level driver (which would be supplied by the vendor), once this is implemented the camera can be accessed over v4l2 like any other camera. Therefore, it is possible to use and v4l2 based camera node in ROS (including GSCam, as mentioned).

However, I think there is benefit in creating a general camera node with a list of supported cameras - this does not have to be limited to GMSL cameras.
The reason for this, is that currently each camera needs careful setting of parameters in launch. For example, with GSCam, the user needs to know exactly which parameters to set for the `gscam_config` for their particular camera.
If instead, we had a package which had proper configuration for each camera model as well as a wrapper to individual camera features (either over `i2cset` or `v4l2-ctl`) then it would make it easier for the autoware user to plug and play a camera.
(@aohsato this could be something like the decoders in Nebula)"
Make RandomDownsampleFilter preserve field information,D_kwDOAnasMc4AP68Y,2022-05-19T03:02:14Z,VRichardJP,0,Unanswered,,,
The generated pcd point cloud map cannot be read because the capacity is too large,D_kwDOAnasMc4AP68Z,2022-05-20T01:45:09Z,mimimidododo,1,Answered,,,
The generated pcd point cloud map cannot be read because the capacity is too large,D_kwDOAnasMc4AP68Z,2022-05-20T01:45:09Z,mimimidododo,1,Answered,DC_kwDOAnasMc4AKoqs,angry-crab,"A quick solution is to downsample the map file. 
```
sudo apt update
sudo apt install pcl-tools
pcl_voxel_grid intput.pcd output.pcd -leaf 0.1, 0.1, 0.1
```
Adjust the leaf parameter accordingly. Hope this would help. "
The generated pcd point cloud map cannot be read because the capacity is too large,D_kwDOAnasMc4AP68Z,2022-05-20T01:45:09Z,mimimidododo,1,Answered,DC_kwDOAnasMc4AKpa-,mimimidododo,"I have tried it. The pcd map can be displayed normally. thank you very much.
Allow me to ask one more question. Is it really impossible to generate multiple pcd maps separately like the example data, and then import all the generated pcd maps and then synthesize a large pcd map?"
The generated pcd point cloud map cannot be read because the capacity is too large,D_kwDOAnasMc4AP68Z,2022-05-20T01:45:09Z,mimimidododo,1,Answered,DC_kwDOAnasMc4AKr-0,angry-crab,"It sounds like you are trying to use `Autoware` as a SLAM package, which is actually beyond our intention. However, as long as you have pcd frames and their corresponding pose infomation, you would be able to generate a map. In your case, I'm not sure what is the purpose of generating separate maps and merging them all together in the end. At least `Autoware.Universe` does not try to do so. Back to your question, if we were given segmented maps and their poses in the global coordinate, all we need to do is just transform each map and put them all together. "
The generated pcd point cloud map cannot be read because the capacity is too large,D_kwDOAnasMc4AP68Z,2022-05-20T01:45:09Z,mimimidododo,1,Answered,DC_kwDOAnasMc4AKs2p,mimimidododo,Thank you so much for anwser. Because I see maps separated like this in the sample data. So I'm just curious how the example data does it. Because it takes too much time to generate a large map with a rosbag with a capacity of about 10GB.
Improve topic naming for better module partitioning,D_kwDOAnasMc4AP68a,2022-05-20T06:18:51Z,VRichardJP,1,Answered,,,
Improve topic naming for better module partitioning,D_kwDOAnasMc4AP68a,2022-05-20T06:18:51Z,VRichardJP,1,Answered,DC_kwDOAnasMc4AKqsa,yukkysaito,"Thank you for your suggestion.
I agree with you. Also, in TIER IV, we think it should be changed to the following. It is same as your suggestion.
- /sensing/lidar/(each sensor unique name)/pointcloud <- each sensor point cloud
- /sensing/lidar/pointcloud <- merged cloud


I also had a conversation and suggested the interface topic name to AWF with @mitsudome-r.
However, due to resource constraints, it was left unattended."
Rationality of freespace planning region,D_kwDOAnasMc4AP68b,2022-05-20T07:45:36Z,NorahXiong,1,Answered,,,
Rationality of freespace planning region,D_kwDOAnasMc4AP68b,2022-05-20T07:45:36Z,NorahXiong,1,Answered,DC_kwDOAnasMc4AKpK4,kenji-miyake,"@NorahXiong Thank you for reporting this. Since it seems to be a bug, could you open a bug issue here?
https://github.com/autowarefoundation/autoware.universe/issues

And I believe the cause is this function. We have to limit the target to the parking area.
https://github.com/autowarefoundation/autoware.universe/blob/1696c2b081f81b43ff2900404e8478dec2cbb1c2/planning/costmap_generator/nodes/costmap_generator/costmap_generator_node.cpp#L231"
Rationality of freespace planning region,D_kwDOAnasMc4AP68b,2022-05-20T07:45:36Z,NorahXiong,1,Answered,DC_kwDOAnasMc4AKr52,NorahXiong,https://github.com/autowarefoundation/autoware.universe/issues/947
Remove `maximum_queue_size_` from concatenate_data preprocessor? (duplicated variable),D_kwDOAnasMc4AP68g,2022-05-23T01:09:56Z,VRichardJP,1,Answered,,,
Remove `maximum_queue_size_` from concatenate_data preprocessor? (duplicated variable),D_kwDOAnasMc4AP68g,2022-05-23T01:09:56Z,VRichardJP,1,Answered,DC_kwDOAnasMc4AKr62,VRichardJP,"I just realized the `PointCloudConcatenateDataSynchronizerComponent` does not derive from `Filter`, so there is no duplicate"
Big latency jump over `/localization/util/voxel_grid_downsample/pointcloud` messages,D_kwDOAnasMc4AP68h,2022-05-23T06:37:35Z,VRichardJP,2,Answered,,,
Big latency jump over `/localization/util/voxel_grid_downsample/pointcloud` messages,D_kwDOAnasMc4AP68h,2022-05-23T06:37:35Z,VRichardJP,2,Answered,DC_kwDOAnasMc4AKuDE,VRichardJP,"In the end, my problem was very simple: the filters default QoS configuration is to keep the last 5 messages. Since the  `voxel_grid_downsample_filter` component is slower than `crop_box_filter_measurement_range`, the messages from `/localization/util/measurement_range/pointcloud` topic accumulate and fill the input queue of `voxel_grid_downsample_filter`. So in order for the latter to process the latest pointcloud and publish it to `/localization/util/voxel_grid_downsample/pointcloud`, the component needs to first process the 4 messages before. This caused the big latency I was observing.

Since what matters is the component processing speed relative to others, I think that problem is not restricted to my setup and the effect should be visible on faster machine too.

Then, what is the most appropriate change? change all filters queue size to 1?"
Big latency jump over `/localization/util/voxel_grid_downsample/pointcloud` messages,D_kwDOAnasMc4AP68h,2022-05-23T06:37:35Z,VRichardJP,2,Answered,DC_kwDOAnasMc4AK4cq,miursh,"My personal opinion is that the queue size should be 1 in a real-time system, unless the node itself has a message buffer.
If some node runs in different (fast) frequency, the others should have message buffer.
"
Big latency jump over `/localization/util/voxel_grid_downsample/pointcloud` messages,D_kwDOAnasMc4AP68h,2022-05-23T06:37:35Z,VRichardJP,2,Answered,DC_kwDOAnasMc4APYgn,nainaigetuide,"@VRichardJP How to change the QOS configuration to 1?
"
Big latency jump over `/localization/util/voxel_grid_downsample/pointcloud` messages,D_kwDOAnasMc4AP68h,2022-05-23T06:37:35Z,VRichardJP,2,Answered,DC_kwDOAnasMc4APZAs,VRichardJP,This is the parameter to change https://github.com/autowarefoundation/autoware.universe/blob/4c0f75f755ea3596401e39c390db75b7a0676842/sensing/pointcloud_preprocessor/src/filter.cpp#L72
Pose Initialization for Bag Play,D_kwDOAnasMc4AP68i,2022-05-23T07:54:46Z,angry-crab,2,Answered,,,
Pose Initialization for Bag Play,D_kwDOAnasMc4AP68i,2022-05-23T07:54:46Z,angry-crab,2,Answered,DC_kwDOAnasMc4AKsOf,YamatoAndo,"This error indicates that the messages from lidar have not been received.
If the messages are received properly, it will work with rosbag replay.
Would you please check if the messages are published? (default topic name is /localization/util/downsample/pointcloud)"
Pose Initialization for Bag Play,D_kwDOAnasMc4AP68i,2022-05-23T07:54:46Z,angry-crab,2,Answered,DC_kwDOAnasMc4AKsQG,angry-crab,"Yes, but it is because I was not playing the bag at that time. The initial pose(maybe just a guess) should be set before we have sensor messages. For the rosbag I used in this case, the vehicle starts moving right after playing the bag. And it does not make any sense to set an initial pose for a moving vehicle. "
Pose Initialization for Bag Play,D_kwDOAnasMc4AP68i,2022-05-23T07:54:46Z,angry-crab,2,Answered,DC_kwDOAnasMc4AKsQR,angry-crab,"[kitti_bag](https://drive.google.com/drive/folders/1-t_ybsy4h7yUfnYeBhfXTP1AnweshEJ_?usp=sharing)
I have shared my testing data if there is anyone would like to try out. "
Pose Initialization for Bag Play,D_kwDOAnasMc4AP68i,2022-05-23T07:54:46Z,angry-crab,2,Answered,DC_kwDOAnasMc4AKsRd,YamatoAndo,I'll try it later.
Pose Initialization for Bag Play,D_kwDOAnasMc4AP68i,2022-05-23T07:54:46Z,angry-crab,2,Answered,DC_kwDOAnasMc4AKtPJ,YamatoAndo,"There are many things that need to be fixed, but I will just point out the bare minimum for initial position estimation.

1. Set QoS of `/localization/util/downsample/pointcloud` to best_effort.
https://docs.ros.org/en/foxy/How-To-Guides/Overriding-QoS-Policies-For-Recording-And-Playback.html

1. Downsample the sensor point cloud because there are too many sensor point clouds and the process is too slow.

1. Use the following command to pause rosbag and wait for the initial position estimation to finish.
`ros2 service call /rosbag2_player/toggle_paused rosbag2_interfaces/srv/TogglePaused`"
Pose Initialization for Bag Play,D_kwDOAnasMc4AP68i,2022-05-23T07:54:46Z,angry-crab,2,Answered,DC_kwDOAnasMc4AKt6C,angry-crab,Thank you for the information. Were you able to localize the vehicle using this dataset? 
Pose Initialization for Bag Play,D_kwDOAnasMc4AP68i,2022-05-23T07:54:46Z,angry-crab,2,Answered,DC_kwDOAnasMc4AKt9l,YamatoAndo,"Yes. 
If it is not working well, I can help you.
"
Pose Initialization for Bag Play,D_kwDOAnasMc4AP68i,2022-05-23T07:54:46Z,angry-crab,2,Answered,DC_kwDOAnasMc4AKyGm,YamatoAndo,"demo video using [kitti_bag](https://drive.google.com/drive/folders/1-t_ybsy4h7yUfnYeBhfXTP1AnweshEJ_?usp=sharing)

https://user-images.githubusercontent.com/13819566/170468006-9f827095-dc71-41f5-b412-f9c1724c5697.mp4

"
Pose Initialization for Bag Play,D_kwDOAnasMc4AP68i,2022-05-23T07:54:46Z,angry-crab,2,Answered,DC_kwDOAnasMc4AMLpc,gayar-helm,"Hello,
@angry-crab have you been able to reproduce @YamatoAndo 's demo?
I think I am experiencing similar issue here  https://github.com/autowarefoundation/autoware/discussions/2749"
2022-05-24 ODD working group weekly meeting (94),D_kwDOAnasMc4AP68j,2022-05-23T09:23:42Z,Igata-ctrl,0,Unanswered,,,
Open AD Kit WG Meeting 2022/05/26,D_kwDOAnasMc4AP68k,2022-05-24T00:53:47Z,Unknown,0,Unanswered,,,
Change pointcloud_preprocessor components QoS policy,D_kwDOAnasMc4AP68l,2022-05-24T08:22:59Z,VRichardJP,0,Unanswered,,,
Timeline for ROS Humble Transition,D_kwDOAnasMc4AP68m,2022-05-24T10:45:57Z,mitsudome-r,7,Answered,,,
Timeline for ROS Humble Transition,D_kwDOAnasMc4AP68m,2022-05-24T10:45:57Z,mitsudome-r,7,Answered,DC_kwDOAnasMc4AKwKn,kenji-miyake,"You can try Humble with this PR: https://github.com/autowarefoundation/autoware_core_universe_prototype/pull/330 -> https://github.com/autowarefoundation/autoware/pull/2692
Or you can use Docker images here: https://github.com/autowarefoundation/autoware/pkgs/container/autoware-universe"
Timeline for ROS Humble Transition,D_kwDOAnasMc4AP68m,2022-05-24T10:45:57Z,mitsudome-r,7,Answered,DC_kwDOAnasMc4ALC66,mitsudome-r,"As we have entered the evaluation phase for Humble release, current code is able to build in Humble environment, and some of engineers have started to do evaluation of some of the features. 

In order to have evaluation process done smoothly, the new CI has been added to check the building in Humble: https://github.com/autowarefoundation/autoware.universe/pull/967.
We currently expect all new PRs to pass the CI so that we can use the newest code for evaluating Humble, but if we find out that this becomes a burden to many developers, we will create a separate branch for further Humble testing and merge with main branch afterwords. Please let us know in this thread if you feel uncomfortable with the current CI settings."
Timeline for ROS Humble Transition,D_kwDOAnasMc4AP68m,2022-05-24T10:45:57Z,mitsudome-r,7,Answered,DC_kwDOAnasMc4ALE7T,hueirutseng,"Hi, this is ITRI Autonomous bus team. From our point of view, it would be prefer to slightly postpone the switch to Humble. The reason is because our autonomous system is also under transition from ROS 1 to ROS 2 galactic / Ubuntu 18.04 to 20.04. After the upgrade is done, we will evaluate the further upgrade plan (to Humble). Thanks. "
Timeline for ROS Humble Transition,D_kwDOAnasMc4AP68m,2022-05-24T10:45:57Z,mitsudome-r,7,Answered,DC_kwDOAnasMc4ALE_1,kenji-miyake,"@hueirutseng Sure, I think the request can be accepted. Would it be possible for you to share the rough timeline of your transition/evaluation plan?"
Timeline for ROS Humble Transition,D_kwDOAnasMc4AP68m,2022-05-24T10:45:57Z,mitsudome-r,7,Answered,DC_kwDOAnasMc4ALGhX,kenji-miyake,"@hueirutseng By the way, is it impossible to use the fixed version for your system?
I mean, Autoware creates a tag that supports both Galactic and Humble right before we drop Galactic support. In that case, I guess there is no need to delay the schedule.

Regarding the Humble evaluation, TIER IV has already finished basic checks and there was no big problem."
Timeline for ROS Humble Transition,D_kwDOAnasMc4AP68m,2022-05-24T10:45:57Z,mitsudome-r,7,Answered,DC_kwDOAnasMc4ALahG,kenji-miyake,"@hueirutseng Friendly ping. If you can't provide enough information, it might be difficult to meet your requests."
Timeline for ROS Humble Transition,D_kwDOAnasMc4AP68m,2022-05-24T10:45:57Z,mitsudome-r,7,Answered,DC_kwDOAnasMc4ALa6w,hueirutseng,"@kenji-miyake Sorry for the late reply. It is roughly estimated that the transition phase (from ROS 1 to ROS 2 Galactic) could be done by July. After that, we will start the on-vehicle testing at ITRI campus. At that time, we might start to evaluate another transition phase from Galacic to Humble. However, if TIER IV has already finished the checks, we believe it would be fine to keep your original time line for the transition. Thanks.  "
Timeline for ROS Humble Transition,D_kwDOAnasMc4AP68m,2022-05-24T10:45:57Z,mitsudome-r,7,Answered,DC_kwDOAnasMc4AMONg,mitsudome-r,"I had a chance to talk this with some Autoware developers, but I believe many users are still using Galactic, and I would like to propose to extend the support of Galactic branch until November. The maintenance cost of two branches seems to be lower than expected, and I think it is manageable until November. 

Any comments? "
Timeline for ROS Humble Transition,D_kwDOAnasMc4AP68m,2022-05-24T10:45:57Z,mitsudome-r,7,Answered,DC_kwDOAnasMc4AMQrv,kenji-miyake,"Seeing NVIDIA libraries (cuDNN/TensorRT) for Ubuntu 22.04 aren't released yet, it's a good idea to extend the Galactic support for a while.
https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2204/x86_64/"
Timeline for ROS Humble Transition,D_kwDOAnasMc4AP68m,2022-05-24T10:45:57Z,mitsudome-r,7,Answered,DC_kwDOAnasMc4APbQG,kenji-miyake,"TensorRT for CUDA 11.8 was released. But for now, it's only for amd64, not for arm64 yet."
Timeline for ROS Humble Transition,D_kwDOAnasMc4AP68m,2022-05-24T10:45:57Z,mitsudome-r,7,Answered,DC_kwDOAnasMc4APbQH,kenji-miyake,"@xmfcx @mitsudome-r Considering Galactic support ends this month, let's discuss the transition timing again.
https://www.ros.org/reps/rep-2001.html#galactic-geochelone-may-2021-november-2022

Is the Bus ODD ready for the transition? Or should we wait a little more?"
Timeline for ROS Humble Transition,D_kwDOAnasMc4AP68m,2022-05-24T10:45:57Z,mitsudome-r,7,Answered,DC_kwDOAnasMc4APilk,xmfcx,"@kenji-miyake wow [this](https://github.com/orgs/autowarefoundation/discussions/2622#discussioncomment-4043782) is great news, I think we can proceed with the transition if the neural nets are working.

Did you check if the current cuda-dependant packages work under the new versions on Ubuntu 22.04?

On the Isuzu bus side though, we will need to go over the non-autoware packages and libraries to see if we can transition them.

This will also mean that we will need to do a re-installation on the bus too, @MertClk what are your thoughts on this?"
Timeline for ROS Humble Transition,D_kwDOAnasMc4AP68m,2022-05-24T10:45:57Z,mitsudome-r,7,Answered,DC_kwDOAnasMc4APil8,kenji-miyake,"> Did you check if the current cuda-dependant packages work under the new versions on Ubuntu 22.04?

Not yet, but I think we don't need to use the version at first.
My proposal is first move to Humble and then upgrade CUDA libraries after the arm64 version is released.

> On the Isuzu bus side though, we will need to go over the non-autoware packages and libraries to see if we can transition them.

So do you mean you are using Ubuntu 20.04 and Galactic for the bus now, right?"
Timeline for ROS Humble Transition,D_kwDOAnasMc4AP68m,2022-05-24T10:45:57Z,mitsudome-r,7,Answered,DC_kwDOAnasMc4APimK,xmfcx,"> My proposal is first move to Humble and then upgrade CUDA libraries after the arm64 version is released.

If we don't upgrade, the CUDA dependant packages won't work for a while, isn't it bad?

> So do you mean you are using Ubuntu 20.04 and Galactic for the bus now, right?

Yes."
Timeline for ROS Humble Transition,D_kwDOAnasMc4AP68m,2022-05-24T10:45:57Z,mitsudome-r,7,Answered,DC_kwDOAnasMc4APimx,kenji-miyake,"> If we don't upgrade, the CUDA dependant packages won't work for a while, isn't it bad?

@xmfcx It does work.
We can use Ubuntu 20.04 CUDA libraries for Ubuntu 22.04, and as I wrote in https://github.com/orgs/autowarefoundation/discussions/2622#discussioncomment-2910295, TIER IV has evaluated them with our data/vehicles."
Timeline for ROS Humble Transition,D_kwDOAnasMc4AP68m,2022-05-24T10:45:57Z,mitsudome-r,7,Answered,DC_kwDOAnasMc4APinJ,xmfcx,"@kenji-miyake Interesting, the comment link doesn't explain the process, is there a guide written somewhere for how we can use the old CUDA libraries in the Ubuntu 22.04?"
Timeline for ROS Humble Transition,D_kwDOAnasMc4AP68m,2022-05-24T10:45:57Z,mitsudome-r,7,Answered,DC_kwDOAnasMc4APiue,kenji-miyake,"Just install 20.04 libraries.
Please refer to https://github.com/autowarefoundation/autoware/pull/2692 and 
https://github.com/autowarefoundation/autoware/blob/f9ca032b226e5dd4a983f2e6171af32237b5911f/ansible/roles/cuda/tasks/main.yaml.

There is a small hack to install 20.04 libraries on 22.04.
https://github.com/autowarefoundation/autoware/pull/2692/commits/5dc0c2ed71d9b48d667d88ec5b247efe74bd3b1b"
Timeline for ROS Humble Transition,D_kwDOAnasMc4AP68m,2022-05-24T10:45:57Z,mitsudome-r,7,Answered,DC_kwDOAnasMc4APiuv,xmfcx,"Thank you, we will try it out!"
Timeline for ROS Humble Transition,D_kwDOAnasMc4AP68m,2022-05-24T10:45:57Z,mitsudome-r,7,Answered,DC_kwDOAnasMc4APlIT,xmfcx,"In the last [ASWG meeting](https://github.com/orgs/autowarefoundation/discussions/2998) we discussed and following are the outputs:

- Currently we are still in the transition phase, `galactic` and `humble` are both supported.
- In 1st of December, we will deprecate `galactic` support, officially transition to `humble`.
- We will make a branch for `galactic` release with marked git hashes at the transition date.
- Both ITRI and Isuzu teams will work on making the transition until the deadline.

cc @hueirutseng @MertClk @mitsudome-r "
Timeline for ROS Humble Transition,D_kwDOAnasMc4AP68m,2022-05-24T10:45:57Z,mitsudome-r,7,Answered,DC_kwDOAnasMc4AQV3P,mitsudome-r,"I have done the upgrade of autoware `main` branch to Humble. Users should be able to install Humble version of Autoware by following the [latest documentation](https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/source-installation/).

For the changes made to the repository, please refer to [this issue](https://github.com/autowarefoundation/autoware/issues/3083) for the details. 

For people who still need to work on Galactic, there is a [galactic](https://github.com/autowarefoundation/autoware/tree/galactic) branch with the [install instructions](https://autowarefoundation.github.io/autoware-documentation/galactic/installation/autoware/source-installation/). However, we have no plans to actively sync `galactic` branch with the main branch so we strongly recommend you to switch over to Humble as soon as possible. "
Timeline for ROS Humble Transition,D_kwDOAnasMc4AP68m,2022-05-24T10:45:57Z,mitsudome-r,7,Answered,DC_kwDOAnasMc4AQsUR,kenji-miyake,"For Galactic users, please add `--include-eol-distros` when you `rosdep update`.

Related:
- https://github.com/ros/rosdistro/pull/35599
- https://github.com/ros-infrastructure/rosdep/blob/b6ad1896e89feff9c5328b7baa708187d790d1e1/src/rosdep2/sources_list.py#L500-L504
- https://github.com/ros-infrastructure/rosdep/blob/b6ad1896e89feff9c5328b7baa708187d790d1e1/src/rosdep2/main.py#L371"
Timeline for ROS Humble Transition,D_kwDOAnasMc4AP68m,2022-05-24T10:45:57Z,mitsudome-r,7,Answered,DC_kwDOAnasMc4AQ0zV,LiangHuangBC,AWSIM is still on Galatic.
Timeline for ROS Humble Transition,D_kwDOAnasMc4AP68m,2022-05-24T10:45:57Z,mitsudome-r,7,Answered,DC_kwDOAnasMc4AQ2Je,YoshinoriTsutake,"> AWSIM is still on Galatic.

TIER IV has been developing AWSIM to support  Humble. 
Please wait for the official AWSIM version for Humble. "
Autonomy Software WG Meeting 2022/05/31,D_kwDOAnasMc4AP68n,2022-05-24T19:16:01Z,BonoloAWF,3,Answered,,,
Autonomy Software WG Meeting 2022/05/31,D_kwDOAnasMc4AP68n,2022-05-24T19:16:01Z,BonoloAWF,3,Answered,DC_kwDOAnasMc4AK3Gf,mitsudome-r,"I would like to get some feedback on the following issues/discussions:

- https://github.com/autowarefoundation/autoware_launch/issues/46 
- https://github.com/autowarefoundation/autoware/discussions/371
"
Autonomy Software WG Meeting 2022/05/31,D_kwDOAnasMc4AP68n,2022-05-24T19:16:01Z,BonoloAWF,3,Answered,DC_kwDOAnasMc4AK49Q,xmfcx,Finally created the issue to test the data collected by AutoCore.ai : https://github.com/autowarefoundation/autoware.universe/issues/1008
Autonomy Software WG Meeting 2022/05/31,D_kwDOAnasMc4AP68n,2022-05-24T19:16:01Z,BonoloAWF,3,Answered,DC_kwDOAnasMc4AK5pX,hatem-darweesh,"Today's Presentation introducing OpenPlanner and migration plans: 
[OpenPlanner_3.0_Presentation.pdf](https://github.com/autowarefoundation/autoware/files/8806891/OpenPlanner_3.0_Presentation.pdf)

"
2022-05-25 Simulation Working Group Meeting,D_kwDOAnasMc4AP68o,2022-05-25T04:33:15Z,sglee-morai,0,Unanswered,,,
NDT scan matcher usage,D_kwDOAnasMc4AP68p,2022-05-25T07:23:44Z,mertyavuz41,1,Answered,,,
NDT scan matcher usage,D_kwDOAnasMc4AP68p,2022-05-25T07:23:44Z,mertyavuz41,1,Answered,DC_kwDOAnasMc4AKv7T,YamatoAndo,"@mertyavuz41 I'm afraid, it is not possible to run without ekf_node in the current architecture.
The same question has been asked before, so could you please read this first?
https://github.com/orgs/autowarefoundation/discussions/292"
NDT scan matcher usage,D_kwDOAnasMc4AP68p,2022-05-25T07:23:44Z,mertyavuz41,1,Answered,DC_kwDOAnasMc4AKv8A,mertyavuz41,"@YamatoAndo Thanks a lot for your rapidly response. Actually, I have search this issue in the Q&A tab but I could not found, apologize.
I see now, thanks again. "
NDT scan matcher usage,D_kwDOAnasMc4AP68p,2022-05-25T07:23:44Z,mertyavuz41,1,Answered,DC_kwDOAnasMc4AYSH0,Tanishq30052002,"Hi @mertyavuz41 
I am facing exactly the same issue, could you please help me, i am unable to figure out why transform is not publishing through ndt node.
"
NDT scan matcher usage,D_kwDOAnasMc4AP68p,2022-05-25T07:23:44Z,mertyavuz41,1,Answered,DC_kwDOAnasMc4AYSz0,rsasaki0109,"@Tanishq30052002 
Are the inputs to the NDT correct?
Also, what are the terminal outputs and diags of the NDT? If there are problems with them, they need to be resolved.

The following may be helpful.
https://autowarefoundation.github.io/autoware.universe/main/localization/ndt_scan_matcher/#input"
NDT scan matcher usage,D_kwDOAnasMc4AP68p,2022-05-25T07:23:44Z,mertyavuz41,1,Answered,DC_kwDOAnasMc4AYS95,Tanishq30052002,"Inputs were correct, the problem author faced as per the screenshot is the same I am facing."
NDT scan matcher usage,D_kwDOAnasMc4AP68p,2022-05-25T07:23:44Z,mertyavuz41,1,Answered,DC_kwDOAnasMc4AYvV-,rsasaki0109,"Is the ekf pose old?
I can't find the relevant sentence, can you copy and paste the output?"
Autoware Architecture WG Meeting (perception/sensing) 2022/05/25,D_kwDOAnasMc4AP68q,2022-05-25T14:01:40Z,mitsudome-r,0,Unanswered,,,
Object detection fail in the room.,D_kwDOAnasMc4AP68r,2022-05-26T09:24:23Z,shmpwk,1,Answered,,,
Object detection fail in the room.,D_kwDOAnasMc4AP68r,2022-05-26T09:24:23Z,shmpwk,1,Answered,DC_kwDOAnasMc4AKyB6,shmpwk,"The solution is to crop the input pointcloud excluding the room ceiling [here](https://github.com/autowarefoundation/autoware.universe/blob/main/sensing/pointcloud_preprocessor/docs/crop-box-filter.md).

Centerpoint model uses a PointPillars-based network to inference.
The pillar unit depends on the top pointcloud including room ceiling, which bothers the detection.
See [japanese reference](https://tech.tier4.jp/entry/2019/04/25/185724) and [PointPillars paper](https://openaccess.thecvf.com/content_CVPR_2019/papers/Lang_PointPillars_Fast_Encoders_for_Object_Detection_From_Point_Clouds_CVPR_2019_paper.pdf).

Apollo model is bird eye view based and the ceiling pointcloud bothers the detection.
https://github.com/ApolloAuto/apollo/blob/master/docs/specs/3d_obstacle_perception.md"
Naming the initial position to Scan Matching,D_kwDOAnasMc4AP68s,2022-05-26T09:42:45Z,YamatoAndo,2,Answered,,,
Naming the initial position to Scan Matching,D_kwDOAnasMc4AP68s,2022-05-26T09:42:45Z,YamatoAndo,2,Answered,DC_kwDOAnasMc4AKyEf,yukkysaito,"I think there is some confusion as to whether it means an initial pose as autoware flow or an optimization initial guess of localization.
currently, an initial pose means an optimization initial guess. but some people misunderstand it for autoware flow."
Naming the initial position to Scan Matching,D_kwDOAnasMc4AP68s,2022-05-26T09:42:45Z,YamatoAndo,2,Answered,DC_kwDOAnasMc4AKyFP,YamatoAndo,"I asked several people around me and came up with the following candidates.
- initial guess
- predicted pose
- pose hint"
Naming the initial position to Scan Matching,D_kwDOAnasMc4AP68s,2022-05-26T09:42:45Z,YamatoAndo,2,Answered,DC_kwDOAnasMc4AKzKh,Unknown,"As a non-developer, I feel that `Initial guess` is too vague and `pose hint` implies something (external to Autoware) had made a suggestion. 

Would `predicted initial pose` be okay, or is that too long?
"
Naming the initial position to Scan Matching,D_kwDOAnasMc4AP68s,2022-05-26T09:42:45Z,YamatoAndo,2,Answered,DC_kwDOAnasMc4AKzZ2,kminoda,"How about something like as follows?
- optimization initial pose (`opt_init_pose`, `optimization_initial_pose`)
- previous pose (`prev_pose`, `previous_pose`)"
Naming the initial position to Scan Matching,D_kwDOAnasMc4AP68s,2022-05-26T09:42:45Z,YamatoAndo,2,Answered,DC_kwDOAnasMc4AKzaD,IshitaTakeshi,`optimization_start_pose`?
Naming the initial position to Scan Matching,D_kwDOAnasMc4AP68s,2022-05-26T09:42:45Z,YamatoAndo,2,Answered,DC_kwDOAnasMc4AKzaJ,IshitaTakeshi,"> the initial position to scan matching is called initial pose

Just to confirm, does it mean the initial pose of the NDT pose optimization?
The name should concisely explain

* What it does or what it is for
* How it is used"
Naming the initial position to Scan Matching,D_kwDOAnasMc4AP68s,2022-05-26T09:42:45Z,YamatoAndo,2,Answered,DC_kwDOAnasMc4AKzi3,angry-crab,`PCL NDT` uses `initial_guess` btw. 
Naming the initial position to Scan Matching,D_kwDOAnasMc4AP68s,2022-05-26T09:42:45Z,YamatoAndo,2,Answered,DC_kwDOAnasMc4AK3D_,kfunaoka,"A technical term would be `initial guess`.
https://en.wikipedia.org/wiki/Gradient_descent#:~:text=minimize.%20As%20an-,initial%20guess,-%2C%20let%20us%20use"
Naming the initial position to Scan Matching,D_kwDOAnasMc4AP68s,2022-05-26T09:42:45Z,YamatoAndo,2,Answered,DC_kwDOAnasMc4AK6e_,YamatoAndo,"Thank you for your input.
It seems that `initial_guess` is common, but I think `optimization_start_pose` is easier to understand."
[IMPORTANT] Merging Autoware-AI Community and Autoware Core/Universe Community,D_kwDOAnasMc4AP68t,2022-05-26T10:51:29Z,mitsudome-r,5,Answered,,,
[IMPORTANT] Merging Autoware-AI Community and Autoware Core/Universe Community,D_kwDOAnasMc4AP68t,2022-05-26T10:51:29Z,mitsudome-r,5,Answered,DC_kwDOAnasMc4AKyOT,samehmohamed88,"@mitsudome-r as someone who recently discovered Autoware Core/Universe, I strongly agree that there is a big confusion here.  I knew of Autoware.Auto on Gitlab from previous years, and when I wanted to take a closer look last month, I went there first.

I only happened to find the Github org by coincidence, and my immediate question was why are there commits to both code bases; I later found out about the Cargo ODD and F1Tenth.

Another big issue for me was the README's of all new Core/Universe Github repos have the same cryptic message about the decision to move from Gitlab to Github.  I think this must change because developer/community expectation is the README is a full first step before visiting the github.io doc pages.

Yet another issue is the Tier IV org and why some common ros2 messages are still there.  I understand in the `.repos` there's a comment that they will be moved to Autoware Foundation org, however there are still several repos that are in Tier IV org, which I myself find confusing and unclear who has what responsibility.

Yet another issue is the Apex.AI YouTube course.  While it's a good intro to the software stack of SDC's and Autoware itself, it references Gitlab, uses outdated `ade` tool, simulation is based on LGV which is no longer supported in Core/Universe, and when I look at the AWF members list I don't even see Apex.AI anymore.  Looking closer at their website I see that they no longer provide a product around Autoware.Auto! 

Finally, to be perfectly honest, my own personal history with Autoware has lead me to dismiss it time and time again.  From autoware.ai to autoware.auto confusion, to the many problems I faced when trying to contribute to Autoware.Auto on Gitlab, to yet another switch to Core/Universe and the outdated course on YouTube.

This is supposed to be Self-Driving Car software, perhaps the most important and challenging problem of this generation.  It's difficult to take Autoware seriously with all of the inconsistencies.

Perhaps most troubling is that while Autoware is open source, it seems that only a few Foundation members are actively contributing, and that leads to confusion about the different members like Tier IV, and if there are competing interests.

On a positive note, the discord community is a great resource to find help, and the fact that Zoom meetings are open to the public is a great positive step.  I don't think any other open source self-driving project has this, which makes this project truly unique, and makes an individual developer feel that contribution is welcome.   

"
[IMPORTANT] Merging Autoware-AI Community and Autoware Core/Universe Community,D_kwDOAnasMc4AP68t,2022-05-26T10:51:29Z,mitsudome-r,5,Answered,DC_kwDOAnasMc4AK6rX,mitsudome-r,"Regarding the merging of Github organization and repositories, I have mentioned in the PDF that it will be done within 2-3 months, but I've got a feedback from the BoD that we should do it faster. The major reason is that the longer we have multiple organization, more confusion we have  to the community. I think they have a good point, and if there are no negative feedback on speeding up the process, I will start working on it after I wait for further feedback until the end of this week."
[IMPORTANT] Merging Autoware-AI Community and Autoware Core/Universe Community,D_kwDOAnasMc4AP68t,2022-05-26T10:51:29Z,mitsudome-r,5,Answered,DC_kwDOAnasMc4ALb_T,Unknown,"@mitsudome-r Apologies for the delayed response to this discussion. I was wondering if there are any plans to migrate Autoware.Auto to GitHub as well, so that all Autoware versions are within the same organization in the same place?"
[IMPORTANT] Merging Autoware-AI Community and Autoware Core/Universe Community,D_kwDOAnasMc4AP68t,2022-05-26T10:51:29Z,mitsudome-r,5,Answered,DC_kwDOAnasMc4ALe7m,mitsudome-r,"We do have intention of migrating some of the Autoware.Auto packages to Autoware Core/Universe repositories, but he still haven't planned out the detailed plan.

Currently, I'm not thinking of doing the direct port of Autoware.Auto into Autoware Core/Universe. There are some packages without the original author or unused packages in Autoware.Auto, and I think we should first have a review on which packages are worth porting. As far as I know, most of the features that was supported in Autoware.Auto should be available in Autoware Core/Universe, but there are some missing features, especially for racing ODD, and I have asked @HaoruXue to start porting some of the packages for racing features (starting with [record replay planner](https://github.com/autowarefoundation/autoware.universe/pulls)). Also, if there are packages with better implementation or better performance in Autoware.Auto that can replace the one made by TIER IV, we can always replace them, but unfortunately we lack resources on doing that right now.

Could you share If you have any particular features that you want from Autoware.Auto?"
[IMPORTANT] Merging Autoware-AI Community and Autoware Core/Universe Community,D_kwDOAnasMc4AP68t,2022-05-26T10:51:29Z,mitsudome-r,5,Answered,DC_kwDOAnasMc4ALmgW,mitsudome-r,"The merging was done last week and we now have a single Autoware repository to contain:
- `main` branch that contains repos files for core/universe
- `autoware-ai` branch that contains repos files for Autoware.AI

I have also transferred all the discussions and issues.
This has caused the change in issue id and discussion id, and if you have any links to issues/discussions for old repository, you might end up seeing a different issue/discussion with the same id in the merged repository.
To solve this, replace `autoware` in the link with `autoware_core_universe_prototype` to find the correct issue.

example:
Replace
`https://github.com/autowarefoundation/autoware/discussions/38`
with
`https://github.com/autowarefoundation/autoware_core_universe_prototype/discussions/38`
"
[IMPORTANT] Merging Autoware-AI Community and Autoware Core/Universe Community,D_kwDOAnasMc4AP68t,2022-05-26T10:51:29Z,mitsudome-r,5,Answered,DC_kwDOAnasMc4AUF-w,mitsudome-r,"I have archived `autoware_ai_*` repositories to stop further PR/Issue creation to the repository.
I will also create autoware_ai meta archive repository and remove all autoware_ai related branches from main Autoware repo https://github.com/autowarefoundation/autoware."
"CARET, a performance analysis tool for Autoware",D_kwDOAnasMc4AP68u,2022-05-26T11:09:15Z,takam5f2,0,Unanswered,,,
Launch and config files,D_kwDOAnasMc4AP68v,2022-05-27T04:15:06Z,angry-crab,2,Answered,,,
Launch and config files,D_kwDOAnasMc4AP68v,2022-05-27T04:15:06Z,angry-crab,2,Answered,DC_kwDOAnasMc4AKz8a,kenji-miyake,"@angry-crab I can understand what you say, but it's a bit difficult problem.
We should take a balance of usability,  maintainability, scalability, security, and so on.

For example, difficult cases are:
- The user has multiple vehicles, and one of them is super secret.
  - In this case, they can't manage the secret vehicle configuration in the same repository because they have to apply different access control settings.
- The user supports 100 vehicles and 200 sensor kits.
  - In this case, I guess it would be too cumbersome.
  - But considering the concept of Autoware, we have to support this scaled case.

In order to support such difficult cases, I think it's better to keep the current structure and accept some increase in maintenance costs.

But if you can list up such use cases and show some concrete ideas that can resolve the problems, then I think we can change the structure!"
Launch and config files,D_kwDOAnasMc4AP68v,2022-05-27T04:15:06Z,angry-crab,2,Answered,DC_kwDOAnasMc4AKz9I,esteve,"@kenji-miyake

> The user has multiple vehicles, and one of them is super secret.
>    In this case, they can't manage the secret vehicle configuration in the same repository because they have to apply different access control settings.

Perhaps I'm not seeing the problem here, but the user can always create their own repository to store the secret vehicles. As far as I understand, this discussion is about how we structure files in our repositories, which I agree with @angry-crab is a difficult to maintain. Unfortunately, I can't see any benefits by keeping so much information separate, could you explain the rationale for having so many separate repositories?

> The user supports 100 vehicles and 200 sensor kits.
>    In this case, I guess it would be too cumbersome.
>    But considering the concept of Autoware, we have to support this scaled case.

I'm sorry, but I don't follow, could you elaborate a bit more? Thanks"
Launch and config files,D_kwDOAnasMc4AP68v,2022-05-27T04:15:06Z,angry-crab,2,Answered,DC_kwDOAnasMc4AK0F7,kenji-miyake,"I'm sorry for my poor explanation. :pray: It's difficult for me to explain complex things in English well. :cry: 

> could you explain the rationale for having so many separate repositories?

At least, it can reduce unnecessary dependencies.

```mermaid
graph TD
    subgraph product_meta_repository
        autoware_repos
    end

    subgraph autoware_launch_repository
        autoware_launch_package
        vehicle_1_package
        vehicle_2_package
        vehicle_3_package
        sensor_kit_c_package
        sensor_kit_b_package
    end

    subgraph secret_vehicle_repository
        secret_vehicle_package
    end

    subgraph secret_sensor_kit_repository
        secret_sensor_kit_package
    end

    autoware_repos --> autoware_launch_package
    autoware_repos --> secret_vehicle_package
    autoware_repos --> secret_sensor_kit_package
```

The above one has unnecessary depends, while the below one has minimal depends.
I'm not saying that the below is better, it's just a trade-off.

```mermaid
graph TD
    subgraph autoware_launch_repository
        autoware_launch_package
    end

    subgraph secret_vehicle_repository
        secret_vehicle_package
    end

    subgraph secret_sensor_kit_repository
        secret_sensor_kit_package
    end

    autoware_repos --> autoware_launch_package
    autoware_repos --> secret_vehicle_package
    autoware_repos --> secret_sensor_kit_package
```

And there is another example.
If we manage vehicle/sensor in the `autoware_launch` repository, there will be multiple `autoware_launch` packages. Then, we can't use user's vehicle/sensor packages because the `autoware_launch` package conflicts.

```mermaid
graph TD
    subgraph product_meta_repository
        autoware_repos
    end

    subgraph awf_autoware_launch_repository
        autoware_launch_package
        awf_vehicle_package
        awf_sensor_kit_package
    end

    subgraph user_autoware_launch_repository
        autoware_launch_package_duplicated
        user_vehicle_package
        user_sensor_kit_package
    end

    autoware_launch_package -->|duplicated| autoware_launch_package_duplicated

    autoware_repos --> autoware_launch_package
    autoware_repos --> user_vehicle_package
    autoware_repos --> user_sensor_kit_package
```

> which I agree with @angry-crab is a difficult to maintain.

Actually, the maintenance cost isn't probably as high as you think because the update period of vehicle/sensor files isn't very high. In TIER IV, we can easily maintain about 10 vehicles and sensor kits with this structure.

> I'm sorry, but I don't follow, could you elaborate a bit more? Thanks

Mm, what I wanted to say is ""too many files in a repository can decrease visibility"".
But perhaps this wasn't a good example. So you can ignore it. Sorry for the confusion."
Launch and config files,D_kwDOAnasMc4AP68v,2022-05-27T04:15:06Z,angry-crab,2,Answered,DC_kwDOAnasMc4AK3Xk,kenji-miyake,"Supplementary information:
The above package-conflicting problem happens only with the source dependency system.
If we use another system like ROS's APT binary releases, we can be more flexible about repository configuration and package dependency.

However, a challenge for that is that all packages should be public if we use ROS buildfarm. It's because Autoware must allow member companies to do their business with their customized proprietary software.
I guess Snap might be a good solution to that. (But there is no concrete plan yet.)
https://snapcraft.io/docs/ros2-applications"
The vehicle doesn't stop smoothly and crosses the stop line,D_kwDOAnasMc4AP68x,2022-05-30T01:17:29Z,kminoda,2,Answered,,,
The vehicle doesn't stop smoothly and crosses the stop line,D_kwDOAnasMc4AP68x,2022-05-30T01:17:29Z,kminoda,2,Answered,DC_kwDOAnasMc4AK2uZ,kminoda,"It turned out that the accel_brake_map was not well calibrated.

Currently, Autoware outputs `/control/command/control_cmd` from `vehicle_cmd_gate`, and `raw_vehicle_cmd_converter` converts the control command to actuation command using the accel brake map.
We used `accel_brake_map_calibrator` to calibrate the map, but it seems that the data was not enough. 

By calibrating the map with sufficient amount of data, the issues listed above were all solved."
The vehicle doesn't stop smoothly and crosses the stop line,D_kwDOAnasMc4AP68x,2022-05-30T01:17:29Z,kminoda,2,Answered,DC_kwDOAnasMc4ANLFk,lhakim85,"Hi @kminoda 
> We encountered some  issues around the stop motion during an integration test of Autoware on our car (uses [pacmod_interface](https://github.com/tier4/pacmod_interface)).

may I know, this pacmod_inteface is inside autoware or u pull it seperately from autoware?
I'm just started to integrate autoware with the car, so need some guideline

"
The vehicle doesn't stop smoothly and crosses the stop line,D_kwDOAnasMc4AP68x,2022-05-30T01:17:29Z,kminoda,2,Answered,DC_kwDOAnasMc4ANLGS,kminoda,"Hi @lhakim85 ,

> may I know, this pacmod_inteface is inside autoware or u pull it seperately from autoware?

I pulled it by myself separately from Autoware. The pacmod interface is for our vehicle, so I think you need to prepare the interface for your vehicle by yourselves (unless your vehicle hardware is luckily mostly the same as ours :sweat_smile:  ).

If you have any troubles, feel free to post it on this GitHub Discussions as a new topic.
It will definitely contribute to the community!
"
The vehicle doesn't stop smoothly and crosses the stop line,D_kwDOAnasMc4AP68x,2022-05-30T01:17:29Z,kminoda,2,Answered,DC_kwDOAnasMc4ANLGZ,lhakim85,Noted. thanks for the reply
Parking funtion feild test,D_kwDOAnasMc4AP68y,2022-05-30T06:55:25Z,Sharrrrk,1,Answered,,,
Parking funtion feild test,D_kwDOAnasMc4AP68y,2022-05-30T06:55:25Z,Sharrrrk,1,Answered,DC_kwDOAnasMc4AK3Bs,Sharrrrk,"Releated Issues will be posted here:
https://github.com/autowarefoundation/autoware.universe/issues/941
https://github.com/autowarefoundation/autoware.universe/issues/947"
Accept Initial Pose Without Performing NDT Alignment,D_kwDOAnasMc4AP68z,2022-05-30T07:07:03Z,angry-crab,1,Answered,,,
Accept Initial Pose Without Performing NDT Alignment,D_kwDOAnasMc4AP68z,2022-05-30T07:07:03Z,angry-crab,1,Answered,DC_kwDOAnasMc4AK4lX,YamatoAndo,"@angry-crab 
If the topic name of the 2d pose estimate is `/initialpose3d`, the initial position can be given directly without running NDT, by the way.

![Screenshot from 2022-05-31 15-10-26](https://user-images.githubusercontent.com/13819566/171105064-94202fa8-bab2-408a-8cd8-a2ff88519447.png)
"
2022-05-31 ODD working group weekly meeting (95),D_kwDOAnasMc4AP680,2022-05-30T08:11:40Z,Igata-ctrl,0,Unanswered,,,
Worse performance compared to Architecture Proposal ROS1 version?,D_kwDOAnasMc4AP681,2022-05-30T09:52:07Z,VRichardJP,4,Answered,,,
Worse performance compared to Architecture Proposal ROS1 version?,D_kwDOAnasMc4AP681,2022-05-30T09:52:07Z,VRichardJP,4,Answered,DC_kwDOAnasMc4AK3Vd,kenji-miyake,"Although I'm not so familiar with this performance issue, I remember one of the biggest reasons is the overhead of existing executors.
I hope Events Executor, which is released in Humble, will improve the performance.
https://discourse.ros.org/t/ros2-middleware-change-proposal/15863

Regarding Autoware itself, I believe it didn't get so slower than TIER IV's proposal version. But as the features have been increasing gradually, it requires more machine resources if you use the full features."
Worse performance compared to Architecture Proposal ROS1 version?,D_kwDOAnasMc4AP681,2022-05-30T09:52:07Z,VRichardJP,4,Answered,DC_kwDOAnasMc4AK3Vm,kenji-miyake,"Also, if you want to optimize performance, you need to tune your DDS settings.
I asked my colleague @takam5f2 to provide some information about this."
Worse performance compared to Architecture Proposal ROS1 version?,D_kwDOAnasMc4AP681,2022-05-30T09:52:07Z,VRichardJP,4,Answered,DC_kwDOAnasMc4AK3Yo,takam5f2,"@VRichardJP  
After migrating from ROS 1 to ROS 2, we tend to take care of performance issue as you mentioned. There are many possible cause to degrade performance; executors, multicast communication, and so on. As you know, unlike ROS 1, ROS 2 does not have master node, so that all nodes try to discover another to communicate autonomously. Consequently, ROS 2 requires more workload of nodes than ROS 1.

> For instance, with AAP I did not have any localization issue on our test field, but with universe the localization is quite unstable and is easily lost if I drive too fast or turn suddenly. Similarly, the whole object tracking pipeline seems to be slower than with AAP (1~2 second delay from VLP cloud to tracked objects).   

However, we have not confronted with such disastrous performance issue as you said. Considering behavior you mentioned, I suspects that your system has something wrong with DDS configuration or memory bandwidth.

> but I somewhat expected that the change from ROS1 to ROS2, the use of efficient DDS implementation and intraprocess communication would compensate the extra processing.

Inter-process communication via multicast on DDS costs CPU time. Each ROS 2 process has a thread to receive topic message, named ""recvMC"". recvMC threads cost about 20-30% of total CPU time in Autoware. 
Please try unicast instead of multicast if you have not tried yet.
In TIER IV, it is recommended to set `spdp` on [AllowMulticast](https://github.com/eclipse-cyclonedds/cyclonedds/blob/master/docs/manual/options.md#cycloneddsdomaingeneralallowmulticast) to use unicast mainly as below.

You will find some useful references on CycloneDDS.
- [CycloneDDS](https://github.com/eclipse-cyclonedds/cyclonedds)
- [Options](https://github.com/eclipse-cyclonedds/cyclonedds/blob/master/docs/manual/options.md)


```xml
<?xml version=""1.0"" encoding=""UTF-8"" ?>
<CycloneDDS xmlns=""https://cdds.io/config"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xsi:schemaLocation=""https://cdds.io/config https://raw.githubusercontent.com/eclipse-cyclonedds/cyclonedds/master/etc/cyclonedds.xsd"">
    <Domain Id=""any"">
        <General>
            <Interfaces>
                <NetworkInterface autodetermine=""true"" priority=""default"" multicast=""default"" />
            </Interfaces>
            <AllowMulticast>spdp</AllowMulticast>
            <MaxMessageSize>65500B</MaxMessageSize>
        </General>
        <Discovery>
            <EnableTopicDiscoveryEndpoints>true</EnableTopicDiscoveryEndpoints>
        </Discovery>
        <Internal>
            <Watermarks>
                <WhcHigh>500kB</WhcHigh>
            </Watermarks>
        </Internal>
        <Tracing>
            <Verbosity>config</Verbosity>
            <OutputFile>cdds.log.${CYCLONEDDS_PID}</OutputFile>
        </Tracing>
    </Domain>
</CycloneDDS>
```"
Worse performance compared to Architecture Proposal ROS1 version?,D_kwDOAnasMc4AP681,2022-05-30T09:52:07Z,VRichardJP,4,Answered,DC_kwDOAnasMc4AK3ZG,takam5f2,"> I don't doubt universe algorithms and features are better and more reliable than AAP

We added new features to Autoware after migrating ROS 2. Compared with ROS-1 based Autoware implemented till last year, current version requires more computing resources than it.  
Sorry, but I can't describe it quantitatively."
Worse performance compared to Architecture Proposal ROS1 version?,D_kwDOAnasMc4AP681,2022-05-30T09:52:07Z,VRichardJP,4,Answered,DC_kwDOAnasMc4AK4q4,VRichardJP,"Using custom cycloneDDS configuration seems indeed to help quite a lot.
The xml configuration you gave is for 0.9.x version I think, but it seems it is possible to get the equivalent for 0.8.0 (the one bundled with galactic)
```xml
<?xml version=""1.0"" encoding=""UTF-8"" ?>
<CycloneDDS xmlns=""https://cdds.io/config"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xsi:schemaLocation=""https://cdds.io/config https://raw.githubusercontent.com/eclipse-cyclonedds/cyclonedds/master/etc/cyclonedds.xsd"">
    <Domain id=""any"">
        <General>
            <NetworkInterfaceAddress>auto</NetworkInterfaceAddress>
            <AllowMulticast>spdp</AllowMulticast>
            <MaxMessageSize>65500B</MaxMessageSize>
            <FragmentSize>4000B</FragmentSize>
        </General>
        <Internal>
            <Watermarks>
                <WhcHigh>500kB</WhcHigh>
            </Watermarks>
        </Internal>
        <Tracing>
            <Verbosity>config</Verbosity>
            <OutputFile>/home/sig/.ros/cdds.log.${CYCLONEDDS_PID}</OutputFile>
        </Tracing>
    </Domain>
</CycloneDDS>
```

Regarding cycloneDDS version, is there any significative advantage using newer version?"
Worse performance compared to Architecture Proposal ROS1 version?,D_kwDOAnasMc4AP681,2022-05-30T09:52:07Z,VRichardJP,4,Answered,DC_kwDOAnasMc4AK5H5,takam5f2,"The configuration looks good.

> is there any significative advantage using newer version?
I believed that it is improved day by day, but we will evaluate it during migration from Galactic to Humble."
Worse performance compared to Architecture Proposal ROS1 version?,D_kwDOAnasMc4AP681,2022-05-30T09:52:07Z,VRichardJP,4,Answered,DC_kwDOAnasMc4AK4uk,VRichardJP,"To illustrate my situation, I have made a small script to track message frequency (like `ros2 topic hz`) and age (`msg.header.stamp - recv_time`) over few key topics. Autoware performance is deeply impacted by the choice of DDS and its configuration.

In the following situation I use cycloneDDS with its default configuration:
![cyclone_no_downsampling (1)](https://user-images.githubusercontent.com/18645627/171117313-c092f9dc-431e-4380-b7aa-3eee5004228f.png)
Topics are ordered. For example the VLP preprocessing pipeline from `top/velodyne_packets` to `top/pointcloud` takes 0.196 - 0.105 = 91ms. Another example: the VLP scan is already 661ms old by the time the new localization is computed (`/localization/pose_estimator/pose_with_covariance`). It gets worse as we go down, with tracked objects being already 3 seconds old by the time there are published.

As I said, I need to heavily downsample the VLP cloud to get ""acceptable"" performance:
![cyclonedds_no_config_no_local](https://user-images.githubusercontent.com/18645627/171116230-8ca2d872-9301-4754-9855-b72530125b25.png)

Then, using `ROS_LOCALHOST_ONLY=1` and the cycloneDDS configuration @takam5f2 suggested, the performance can be improved again:
![cyclonedds_configured](https://user-images.githubusercontent.com/18645627/171119790-9b140d4c-ee7e-41b8-983c-3a6b7c817ac9.png)

But still, it is far from being ideal. In particular `voxel_grid_downsampling`, `labeled_clusters->objects->validation/objects` and `tracking` processing are still very slow on my machine. But as far as I remember, these algorithms also existed in AAP (maybe simpler?)

Last but not least. I observe that despite all my effort configuring cycloneDDS, FastRTPS seems always way faster:
![fastrtps (1)](https://user-images.githubusercontent.com/18645627/171121157-1249cbbd-a6b6-42c6-b28c-419990310089.png)

I am wondering why FastRTPS is not recommended for autoware. 
Is it just faster in my setup? can I meet that performance with cycloneDDS with a better configuration?"
Worse performance compared to Architecture Proposal ROS1 version?,D_kwDOAnasMc4AP681,2022-05-30T09:52:07Z,VRichardJP,4,Answered,DC_kwDOAnasMc4AK5lD,takam5f2,"@VRichardJP  
Thank you for sharing your experiment.  
I suppose that another bottleneck like memory bandwidth or thread pool size limits Autoware's performance.

Could you show me your system configuration?
Mine is here.

| Resources                             | Description                  |
| -----------                                | --------------                   |
| CPU physical Cores              |  8                                |
| CPU logical Cores (threads) | 16                               |
| CPU Freq                              | 3.3 GHz                      |
| Memory size                         | 32 GBytes               |
| Memory channel                   | Dual                       |
| Memory speed                     | 2666 GT/s              |

I'd like to know the number of CPU logical core because it decides thread pool size. If it is less than 8, sensing pipeline might not work correctly.
Sensing pipeline depends on memory speed (bandwidth), so I'd like to know them also.

Best,"
Worse performance compared to Architecture Proposal ROS1 version?,D_kwDOAnasMc4AP681,2022-05-30T09:52:07Z,VRichardJP,4,Answered,DC_kwDOAnasMc4AK6Qk,VRichardJP,"The machine I used in for this test has a i7-9700K (8 cores, 8 threads, 3.60GHz to 4.9GHz) and 32GB DDR4 @2666MHz. The computer I used to have for my AAP tests was slightly less powerful."
Worse performance compared to Architecture Proposal ROS1 version?,D_kwDOAnasMc4AP681,2022-05-30T09:52:07Z,VRichardJP,4,Answered,DC_kwDOAnasMc4AK96Z,VRichardJP,"I think I finally managed to reach a good performance!

At the end of the day, it was only a matter of a few changes:
- Tweaking BIOS and governor configuration to max out the CPU performance
- Use @takam5f2 [configuration](https://github.com/autowarefoundation/autoware/discussions/380#discussioncomment-2848296) for CycloneDDS
- Fix a few slow algorithms (e.g. https://github.com/autowarefoundation/autoware.universe/issues/1019)
- Tune a few parameters and change some ""bad"" defaults (e.g. https://github.com/autowarefoundation/autoware/discussions/392)
"
Worse performance compared to Architecture Proposal ROS1 version?,D_kwDOAnasMc4AP681,2022-05-30T09:52:07Z,VRichardJP,4,Answered,DC_kwDOAnasMc4AK-Bo,takam5f2,"@VRichardJP  
I'm glad to hear that. Thank you for your great contribution! "
Planning do not depend the steering angle rate,D_kwDOAnasMc4AP682,2022-05-30T12:55:57Z,brkay54,2,Answered,,,
Planning do not depend the steering angle rate,D_kwDOAnasMc4AP682,2022-05-30T12:55:57Z,brkay54,2,Answered,DC_kwDOAnasMc4AK3h4,brkay54,cc @maxime-clem @mehmetdogru @TakaHoribe 
Planning do not depend the steering angle rate,D_kwDOAnasMc4AP682,2022-05-30T12:55:57Z,brkay54,2,Answered,DC_kwDOAnasMc4AK4VP,takayuki5168,"@brkay54 Thank you for your question.
Currently, path shape (related to steering) and path velocity are planned almost independently.
When planning the path shape, we do not know the exact path velocity since the velocity is finally calculated in `motion_velocity_smoother` which is the last module of path velocity planners. So it's hard to consider steering_rate_limit in path shape planning.

With this assumption, to solve your issue, `motion_velocity_smoother` should consider steering_rate_limit in my opinion.
This package has a function to decelerate the velocity according to the path curvature so that the lateral acceleration is less than the parameter `max_lateral_accel`. Like this, we can add a function to decelerate the path velocity according to steering_rate_limit."
Planning do not depend the steering angle rate,D_kwDOAnasMc4AP682,2022-05-30T12:55:57Z,brkay54,2,Answered,DC_kwDOAnasMc4AK4VX,takayuki5168,@TakaHoribe Let me know if you disagree with something.
Planning do not depend the steering angle rate,D_kwDOAnasMc4AP682,2022-05-30T12:55:57Z,brkay54,2,Answered,DC_kwDOAnasMc4AK6IO,brkay54,"Thank you for your answer, I agree with you. If both velocity and steering planning are independent, we should add a function that fills the velocity wrt `steering_rate_limit`. I will work on it."
Planning do not depend the steering angle rate,D_kwDOAnasMc4AP682,2022-05-30T12:55:57Z,brkay54,2,Answered,DC_kwDOAnasMc4AK_tY,TakaHoribe,Thank you for the nice discussion! The motion_velocity_smoother sounds good to me. It should consider the steering_rate_limit when it calculates the velocity.
Open AD Kit WG Meeting 2022/06/02,D_kwDOAnasMc4AP683,2022-05-31T01:23:22Z,Unknown,0,Unanswered,,,
Make it possible to change L-Shape Fitting algorithm resolution parameter,D_kwDOAnasMc4AP684,2022-05-31T10:19:29Z,VRichardJP,1,Answered,,,
Make it possible to change L-Shape Fitting algorithm resolution parameter,D_kwDOAnasMc4AP684,2022-05-31T10:19:29Z,VRichardJP,1,Answered,DC_kwDOAnasMc4AK97N,VRichardJP,Made obsolete by https://github.com/autowarefoundation/autoware.universe/issues/1019
Localization Architecture Usage,D_kwDOAnasMc4AP685,2022-05-31T15:57:53Z,mertyavuz41,3,Answered,,,
Localization Architecture Usage,D_kwDOAnasMc4AP685,2022-05-31T15:57:53Z,mertyavuz41,3,Answered,DC_kwDOAnasMc4AK5nV,takayuki5168,@YamatoAndo 
Localization Architecture Usage,D_kwDOAnasMc4AP685,2022-05-31T15:57:53Z,mertyavuz41,3,Answered,DC_kwDOAnasMc4AK6Yj,YamatoAndo,"@mertyavuz41  Hello,
I checked the rosbag you shared, but the LiDAR point cloud seems to be rotating.
Perhaps it is correct to rotate it 90 degrees clockwise, so reattach the LiDAR unit or adjust the TF(base_link to LiDAR).


demo video.  https://user-images.githubusercontent.com/13819566/171319218-ce769688-7adc-45e1-be2d-65d3973c44dc.mp4
It is a bit forced, but it rotates the LiDAR point cloud by 90 degrees in the ndt scan matcher source code.
So note that the `points_aligned` is properly matched to the map, but the `points_raw` is not rotated.

"
Localization Architecture Usage,D_kwDOAnasMc4AP685,2022-05-31T15:57:53Z,mertyavuz41,3,Answered,DC_kwDOAnasMc4AK9Zr,mertyavuz41,"@YamatoAndo Hello,
I have re-attached LIDAR, it has correct direction now. But when the vehicle was turn first corner, the matched points are not match with pcd anymore. 

Also, I have upload new bag file(autoware_loc_test_true): 
https://netorgft4229778-my.sharepoint.com/:f:/g/personal/mert_adastec_com/ElZOcOEd73dOhc08JGsa3FIBxXm76LF_732kHXX1Cz0dKg?e=GIwNnk

Video: https://netorgft4229778-my.sharepoint.com/:v:/g/personal/mert_adastec_com/EdXC1X1x74pBgOItmxc0JHEB_n3JwedaCyKEgPKzJ317qw?e=bK8dKh"
Localization Architecture Usage,D_kwDOAnasMc4AP685,2022-05-31T15:57:53Z,mertyavuz41,3,Answered,DC_kwDOAnasMc4AK-Bj,YamatoAndo,"@mertyavuz41 Hello.
There seems to be an unusual value in angular.z of `/vehicle_twist`.
`autoware_loc_test_2022-05-31-12-33-37.db3` was normal, so could you please check?

autoware_loc_test_2022-05-31-12-33-37.db3
![Screenshot from 2022-06-03 12-13-19](https://user-images.githubusercontent.com/13819566/171779859-0eccc80f-ded8-4f08-8a91-3598b03f902a.png)


autoware_loc_test_2022-06-02-16-54-37.db3
![Screenshot from 2022-06-03 12-17-27](https://user-images.githubusercontent.com/13819566/171779941-dcafc90b-435e-49a1-aeea-94b8b9095be2.png)

"
Localization Architecture Usage,D_kwDOAnasMc4AP685,2022-05-31T15:57:53Z,mertyavuz41,3,Answered,DC_kwDOAnasMc4AK-Ug,mertyavuz41,"@YamatoAndo Hello,

Thanks for your awesome feedbacks. I have increased deviation of the yaw rate, it is better now.

Video: https://netorgft4229778-my.sharepoint.com/:v:/g/personal/mert_adastec_com/EStEkjcPLKlGnB1wjz2LcNIBRly2h7u1dtMo6HX5QTit9w?e=scgF2P

New bag: https://netorgft4229778-my.sharepoint.com/:f:/g/personal/mert_adastec_com/EsStt7FkczhJk-YHgEJmSywBlig0aAWbD4RuTsQQ6Hm2oA?e=EB8isr"
Introduction to OpenPlanner and initial migration plan to universe,D_kwDOAnasMc4AP686,2022-05-31T16:16:32Z,hatem-darweesh,1,Answered,,,
Introduction to OpenPlanner and initial migration plan to universe,D_kwDOAnasMc4AP686,2022-05-31T16:16:32Z,hatem-darweesh,1,Answered,DC_kwDOAnasMc4AMbqG,ralwing,OpenPlanner link doesn't work. 
Introduction to OpenPlanner and initial migration plan to universe,D_kwDOAnasMc4AP686,2022-05-31T16:16:32Z,hatem-darweesh,1,Answered,DC_kwDOAnasMc4AMdur,hatem-darweesh,"Check now, I have fixed the link. "
Autonomy Software WG Meeting 2022/06/07,D_kwDOAnasMc4AP687,2022-05-31T19:51:35Z,BonoloAWF,0,Unanswered,,,
Moving the vehicle-twist and IMU fusion node to the sensing module,D_kwDOAnasMc4AP688,2022-06-01T08:34:05Z,YamatoAndo,2,Answered,,,
Moving the vehicle-twist and IMU fusion node to the sensing module,D_kwDOAnasMc4AP688,2022-06-01T08:34:05Z,YamatoAndo,2,Answered,DC_kwDOAnasMc4ALC2-,kminoda,"Thanks! I have one question.
Do you have any idea about where you will do the transformation of IMU data from `imu_link` to `base_link`?

Since we want to use IMU data expressed in base_link at least in the EKF, we need to do the conversion somewhere before that.
Currently, the transformation is done in `gyro_odometer` (Twist+IMU Fuser in the current arch). And, IMO, it should be done inside the `sensing` modules, since IMU data expressed in `base_link` is all you need outside of the module.

I personally think that **the conversion should be done inside `imu_corrector`**. By doing so, we can provide `imu_corrector.param.yaml` in `base_link` and not in `imu_link`, which means we don't have to estimate `angular_velocity_offset_x` or `~_y` which is not necessary for the autoware.universe algorithm. (If you provide the parameters in `imu_link`, `angular_velocity_offset_x` or `~_y` may affect the yawrate in `base_link` depending on the IMU extrinsics)"
Moving the vehicle-twist and IMU fusion node to the sensing module,D_kwDOAnasMc4AP688,2022-06-01T08:34:05Z,YamatoAndo,2,Answered,DC_kwDOAnasMc4ALDAl,YamatoAndo,"I am not particular about this.
However, if the transformation is done inside imu_corrector, I think there will be confusion as to whether parameters such as `angular_velocity_offset_x` or `~_y` are in the coordinate system of `imu_link` or `base_link`.
Therefore, I think you need to write a comment in the parameter file to clarify which coordinate system it is."
Moving the vehicle-twist and IMU fusion node to the sensing module,D_kwDOAnasMc4AP688,2022-06-01T08:34:05Z,YamatoAndo,2,Answered,DC_kwDOAnasMc4ALQ3K,YamatoAndo,"After discussion with our internal members, we will revise our proposal as follows to address the issue of the difficulty in understanding the role of each module as an architecture.

Do you have any comments on this revised proposal?

- revised proposal

![proposal_2 drawio](https://user-images.githubusercontent.com/13819566/173736642-1255ebaa-c521-486d-9ba2-6112e193e353.png)
"
Moving the vehicle-twist and IMU fusion node to the sensing module,D_kwDOAnasMc4AP688,2022-06-01T08:34:05Z,YamatoAndo,2,Answered,DC_kwDOAnasMc4ALQ3V,YamatoAndo,The only difference from the current version is that the IMU will be added to the input to `LiDAR Distortion Corrector`.
Moving the vehicle-twist and IMU fusion node to the sensing module,D_kwDOAnasMc4AP688,2022-06-01T08:34:05Z,YamatoAndo,2,Answered,DC_kwDOAnasMc4ALRDA,miursh,"[Question] In my opinion, it is a bit confusing/complicated to subscribe both velocity reports and imu data.
Since subscribing twist messages are way more convenient as I/F, how about just moving ""vehicle_velocity_converter"" to sensing?
Is this already considered?
![sub twist drawio](https://user-images.githubusercontent.com/37187849/173767326-58411547-6d1f-4ad0-b4a2-24f2e126ea96.png)

"
Moving the vehicle-twist and IMU fusion node to the sensing module,D_kwDOAnasMc4AP688,2022-06-01T08:34:05Z,YamatoAndo,2,Answered,DC_kwDOAnasMc4ALREN,YamatoAndo,"@miursh Thank you for your comment. 
The reason I wanted to do this is because I want to correct the distortion even for robots with poor heading_rate accuracy.
I would like to incorporate IMU information for this purpose."
Moving the vehicle-twist and IMU fusion node to the sensing module,D_kwDOAnasMc4AP688,2022-06-01T08:34:05Z,YamatoAndo,2,Answered,DC_kwDOAnasMc4ALRFB,miursh,"I see. 
In that case, connecting the output of ""Twist+IMU Fuser"" to ""LiDAR Distortion Corrector"" instead of  using vehicle_velocity_converter/twist_with_covarinace might be OK?"
Moving the vehicle-twist and IMU fusion node to the sensing module,D_kwDOAnasMc4AP688,2022-06-01T08:34:05Z,YamatoAndo,2,Answered,DC_kwDOAnasMc4ALRGE,YamatoAndo,"@miursh like this?
I'm OK with this.
![proposal_3 drawio](https://user-images.githubusercontent.com/13819566/173770709-24014533-1102-4860-a07b-18e26a24d8e4.png)
"
Moving the vehicle-twist and IMU fusion node to the sensing module,D_kwDOAnasMc4AP688,2022-06-01T08:34:05Z,YamatoAndo,2,Answered,DC_kwDOAnasMc4ALRGy,miursh,"I mean, this one
![Copy of sub twist drawio](https://user-images.githubusercontent.com/37187849/173771660-b4e14b61-fdf1-471f-8213-ff0a85bda7ea.png)
"
Moving the vehicle-twist and IMU fusion node to the sensing module,D_kwDOAnasMc4AP688,2022-06-01T08:34:05Z,YamatoAndo,2,Answered,DC_kwDOAnasMc4ALRHv,YamatoAndo,"I see. Actually, I have considered this before. 
But I thought it was not a good architecture to use data from the localization module in the sensing module."
Moving the vehicle-twist and IMU fusion node to the sensing module,D_kwDOAnasMc4AP688,2022-06-01T08:34:05Z,YamatoAndo,2,Answered,DC_kwDOAnasMc4ALRIL,miursh,Hmmm... let me think
Moving the vehicle-twist and IMU fusion node to the sensing module,D_kwDOAnasMc4AP688,2022-06-01T08:34:05Z,YamatoAndo,2,Answered,DC_kwDOAnasMc4ALRKb,angry-crab,What about merging`from VelocityReport to Twist` and  `Twist+IMU Fuser` into one node and putting it under sensing as well? 
Moving the vehicle-twist and IMU fusion node to the sensing module,D_kwDOAnasMc4AP688,2022-06-01T08:34:05Z,YamatoAndo,2,Answered,DC_kwDOAnasMc4ALRNf,YamatoAndo,"@angry-crab Thank your for your comment.
That is close to the proposal in my first comment.
But the following issues were pointed out by my colleagues.

- The role of the Twist Estimator on the localization side and the Twist generated on the sensing side need to be clarified.
- Even if Twist is generated by fusing IMU+Vehicle Velocity on the sensing side, there is a possibility that IMU information is needed on the localization side (e.g. using IMU acceleration information).

We discussed these issues, but finally, we thought that just having the `LiDAR Distortion Corrector` with IMU input would have fewer differences from the current Autoware and would be easier to understand the architecture, so I posted this revised proposal."
Add a glossary to the Autoware documentation,D_kwDOAnasMc4AP68-,2022-06-01T09:04:57Z,Unknown,2,Answered,,,
Add a glossary to the Autoware documentation,D_kwDOAnasMc4AP68-,2022-06-01T09:04:57Z,Unknown,2,Answered,DC_kwDOAnasMc4AK66P,BonoloAWF,This is a good idea!
Add a glossary to the Autoware documentation,D_kwDOAnasMc4AP68-,2022-06-01T09:04:57Z,Unknown,2,Answered,DC_kwDOAnasMc4AK7OL,andrejpadilha2,"I like this! The full glossary is a good idea, but probably starting with a simple one is better. Maybe, for most acronyms, short explanations that could lead people to search a better explanation on their own. If it's something that the Autoware Community wants to explain in their own way, a full explanation can be added."
Autoware Architecture WG Meeting (planning) 2022/06/01,D_kwDOAnasMc4AP68_,2022-06-01T13:47:17Z,mitsudome-r,2,Answered,,,
Autoware Architecture WG Meeting (planning) 2022/06/01,D_kwDOAnasMc4AP68_,2022-06-01T13:47:17Z,mitsudome-r,2,Answered,DC_kwDOAnasMc4AK7iZ,sglee-morai,"### Example Scenario
The vehicle will start from the 2nd floor and get out of the building.
![image](https://user-images.githubusercontent.com/44545624/171446396-1b825b71-8062-4085-8754-ee65fdb8fce4.png)


### Concern
Currently, start_pos and end_pos is defined in the (x,y,z) - defined w.r.t. 3d cartesian coordinate system.

- For multi-story buildings, where getting high accuracy z value is difficult, start_pos (or end_pos) defined this way could make it difficult to guess where it actually is. 
- For the example scenario, if start_pos is defined in (x,y,z), it's hard to tell whether the car is starting from the 1st, 2nd, or 3rd floor.


### Suggestion 
Defining start_pos and end_pos w.r.t to (lane_id, s, t)

- Each lane in the different story will have a unique lane_id. Thus telling lane_id first will eliminate the guessing.
- For the example scenario, start_pos might be defined as (lane_id = lane22, s = 10, t = 0)


Would changing this way create another problem? I'm very new to the planning stack of Autoware, so I'm not really whether the concern I raised is important or not. "
Autoware Architecture WG Meeting (planning) 2022/06/01,D_kwDOAnasMc4AP68_,2022-06-01T13:47:17Z,mitsudome-r,2,Answered,DC_kwDOAnasMc4AK7kT,mitsudome-r,"Thanks for the nice diagram.

Currently, we assume that Lanelet2 will include the z information of the lanes that matches with the pointcloud map coordinates. If this assumption stands true, then I think it wouldn't be a problem to give start_pose/goal_pose in 3D.
Also, I cannot really understand why providing (lane_id = lane22, s = 10, t = 0) would be easier than providing the 3d information if you don't know where exactly you are in the map?"
Autoware Architecture WG Meeting (planning) 2022/06/01,D_kwDOAnasMc4AP68_,2022-06-01T13:47:17Z,mitsudome-r,2,Answered,DC_kwDOAnasMc4AK8NV,Sharrrrk,"I agree with @mitsudome-r, it won't be a problem to get the right lane_id based on given pose. What's more, the pose information is also required for parking scenario in which the target position is beyond lane."
Autoware Architecture WG Meeting (planning) 2022/06/01,D_kwDOAnasMc4AP68_,2022-06-01T13:47:17Z,mitsudome-r,2,Answered,DC_kwDOAnasMc4AK9Jy,Hyeongseok-Jeon,"I have comment on the output msg from the planning. Do you consider generating the pose equally spaced by distance not time? In my personal work, planning module outputs the pose of the waypoints spaced by 0.5meter and corresponding desired velocity for each way point. This is for completely separate lateral plan (equally space future way points) and longitudinal plan (desired velocity for each way point).  Sorry for the delayed comment."
Add independent camera module to Autoware,D_kwDOAnasMc4AP69G,2022-06-02T08:30:31Z,plane-li,1,Answered,,,
Add independent camera module to Autoware,D_kwDOAnasMc4AP69G,2022-06-02T08:30:31Z,plane-li,1,Answered,DC_kwDOAnasMc4ALBNH,yukkysaito,"@plane-li In TIER IV, we use edge ECUs(ROS Cube) for camera and neural networks. And the result of neural networks on the edge ECU send to the main Autoware ECU. @miursh @aohsato Can you share more details of our distributed perception system?
"
Add independent camera module to Autoware,D_kwDOAnasMc4AP69G,2022-06-02T08:30:31Z,plane-li,1,Answered,DC_kwDOAnasMc4ALBN-,plane-li,"Thank you!  Is your result of neural networks 2D-bbox or 3D-bbox ? yolo only outputs 2D-bbox in image,which is hard to fuse with lidar when the object is far away from ego-car."
Add independent camera module to Autoware,D_kwDOAnasMc4AP69G,2022-06-02T08:30:31Z,plane-li,1,Answered,DC_kwDOAnasMc4ALCk5,miursh,"Out output from the edge ECU is 2D-bbox. 
This is the rough diagram for out perception system.
![autoware_node_diagram-Perception ECU drawio](https://user-images.githubusercontent.com/37187849/172270567-14ba07af-b205-4fd8-b74e-014a30bdd4fb.png)

"
Add independent camera module to Autoware,D_kwDOAnasMc4AP69G,2022-06-02T08:30:31Z,plane-li,1,Answered,DC_kwDOAnasMc4ALOcJ,aohsato,"@plane-li As you say, processing camera data requires a lot of resources, so we have already distributed the processing to JetsonXavier-based ECUs.
Another reason is that we want to use a [GMSL camera](https://sensor.tier4.jp/automotive-hdr-camera) for automotive.

Currently, it outputs the 2D bounding box and the result of traffic signal recognition.
The output of the 3D bounding box is still in the research stage, but it is possible in the future."
Add independent camera module to Autoware,D_kwDOAnasMc4AP69G,2022-06-02T08:30:31Z,plane-li,1,Answered,DC_kwDOAnasMc4ALOmC,plane-li,"Oh,we are doing the same work about visual perception,thank u!"
Why is `voxel_based_compare_map_filter` the default `compare_map_segmentation` implementation ?,D_kwDOAnasMc4AP69H,2022-06-02T09:53:36Z,VRichardJP,3,Answered,,,
Why is `voxel_based_compare_map_filter` the default `compare_map_segmentation` implementation ?,D_kwDOAnasMc4AP69H,2022-06-02T09:53:36Z,VRichardJP,3,Answered,DC_kwDOAnasMc4AK-A1,taikitanaka3,"@VRichardJP 
this PR I added computation time for pointcloud related processor
can you compare time with graph using plot juggler?
https://github.com/autowarefoundation/autoware.universe/pull/946

>why it is necessary to check [27 times](https://github.com/autowarefoundation/autoware.universe/blob/daacbd9a75652c5373aaa9232345d341bd7521cc/perception/compare_map_segmentation/src/voxel_based_compare_map_filter_nodelet.cpp#L69) whether each input point is close to the map points. What is certain is that it is rather slow.

@yukkysaito 
can you answer this?"
Why is `voxel_based_compare_map_filter` the default `compare_map_segmentation` implementation ?,D_kwDOAnasMc4AP69H,2022-06-02T09:53:36Z,VRichardJP,3,Answered,DC_kwDOAnasMc4ALU4d,yukkysaito,"@VRichardJP 
Thank you for your analysis.
I can't give you the evaluation results now, but our results differ from your results we measured long ago.

`Voxel based approach` access directory using index access, so it is expected to be fast.
But `KD Tree based approach` access using tree search, then if the map is large, it is expected to be slow.

Anyway, we evaluate again to solve different result.
What is your environment and what maps and rosbags did you use?

>I am not sure I understand the whole rational behind voxel_based_compare_map_filter, in particular why it is necessary to check [27 times](https://github.com/autowarefoundation/autoware.universe/blob/daacbd9a75652c5373aaa9232345d341bd7521cc/perception/compare_map_segmentation/src/voxel_based_compare_map_filter_nodelet.cpp#L69) whether each input point is close to the map points. What is certain is that it is rather slow.

Regarding the `voxel_based_compare_map_filter` searching 27 times, 
if a point is searched only in the voxel to which the point belongs, it may not be searched properly when it is near the voxel's boundary plane. Therefore, it searches surrounding voxels."
Why is `voxel_based_compare_map_filter` the default `compare_map_segmentation` implementation ?,D_kwDOAnasMc4AP69H,2022-06-02T09:53:36Z,VRichardJP,3,Answered,DC_kwDOAnasMc4ALWSW,VRichardJP,"Thank you for the explanation. 

I cannot share the map or rosbag data, but I will check the cloud sizes I used.

So in the voxel based approach, the distance from the point to the voxel centroid is checked, up to 27 times (for each 3x3x3=27 neighbor voxel). In particular, if most of the input cloud is not on the map, the algorithm will be quite slow. In the kdtree approach, the closest neighbor is found in O(ln(map_size)). Does it takes that many comparisons for the kdtree to find the closest neighbor?


"
Why is `voxel_based_compare_map_filter` the default `compare_map_segmentation` implementation ?,D_kwDOAnasMc4AP69H,2022-06-02T09:53:36Z,VRichardJP,3,Answered,DC_kwDOAnasMc4ALns9,VRichardJP,"At the end of the day, it was a silly mistake on my size: the build I used for benchmarking was not compiled in release mode...
With release build, I get the following:
```
voxel_based_approximate_compare_map_filter | 14ms
voxel_based_compare_map_filter             | 25ms
voxel_distance_based_compare_map_filter    | 39ms
```
Suddenly `voxel_based_compare_map_filter` is not that bad anymore, just slightly slower than the approximate version. But then it is a trade off between performance and precision."
Why is `voxel_based_compare_map_filter` the default `compare_map_segmentation` implementation ?,D_kwDOAnasMc4AP69H,2022-06-02T09:53:36Z,VRichardJP,3,Answered,DC_kwDOAnasMc4ALnze,taikitanaka3,"@VRichardJP 
I think the main contribution for this computation was obstacle pointcloud  down sampling https://github.com/autowarefoundation/autoware.universe/pull/961
This makes computation time much lower"
keep changes in the container for later use,D_kwDOAnasMc4AP69J,2022-06-05T13:02:24Z,koraykoca,2,Answered,,,
keep changes in the container for later use,D_kwDOAnasMc4AP69J,2022-06-05T13:02:24Z,koraykoca,2,Answered,DC_kwDOAnasMc4ALJLw,brkay54,Did you try to add `$HOME` as a volume? Maybe it can solve your `PermissionError: [Errno 13] Permission denied: '/home/koray/.ros'` problem.
keep changes in the container for later use,D_kwDOAnasMc4AP69J,2022-06-05T13:02:24Z,koraykoca,2,Answered,DC_kwDOAnasMc4ALMR4,koraykoca,"Hi, thank you for the answer. You're right, adding --home flag to the command solved this problem. However, with this solution, I always need to commit the container and create an image, after every change. Then I need to create a new container from that new image. This shouldn't be like that. I should be able to start the same container with docker start (or rocker start, but there is no command like that) command. Do you have an idea about it?"
keep changes in the container for later use,D_kwDOAnasMc4AP69J,2022-06-05T13:02:24Z,koraykoca,2,Answered,DC_kwDOAnasMc4ALMZ3,kenji-miyake,"@koraykoca 
I believe it is generally not recommended that you edit/commit a Docker container.
Instead, you have to provided containers as they are.
Considering your changes with the Docker image, there are several ways to resolve this.

1. Include scenario_simulator (simularot.repos) into the `autoware-universe` image.

To do this, we have to either:
- Resolve https://github.com/autowarefoundation/autoware/issues/21.
- Add a flag whether to include scenario_simulator or not, and enable the flag only for `amd64`.

I personally would like to avoid this option because the dependency will increase and it makes maintenance difficult. 

2. Run scenario_simulator from a different Docker image.

I guess you can use [this image](https://hub.docker.com/r/tier4/scenario_simulator_v2).
In this case, you don't have to build scenario_simulator inside the `autoware.universe` image.

(The documentation should be updated to support Docker.)

@WJaworskiRobotec @hakuturu583 What do you think about this option?

3. Extend the `autoware-universe` image in your local machine before using `rocker`.

Please refer to the example of `.devcontainer/Dockerfile` in https://github.com/autowarefoundation/autoware/blob/0817e56d8ac2041580b19a2fbff62e1b9d877f6f/docker/README.md#precautions-for-not-using-rocker"
keep changes in the container for later use,D_kwDOAnasMc4AP69J,2022-06-05T13:02:24Z,koraykoca,2,Answered,DC_kwDOAnasMc4ALMaI,kenji-miyake,"In short, my recommendation is:
- If your changes are only for `scenario_simularot_v2`, use option 2.
- If you have other changes, use option 2 for `scenario_simularot_v2` and 3 for other changes."
keep changes in the container for later use,D_kwDOAnasMc4AP69J,2022-06-05T13:02:24Z,koraykoca,2,Answered,DC_kwDOAnasMc4ALd2p,koraykoca,"thank you for your answer @kenji-miyake. I could try your suggestions now (because of illness).

For the option 2, I don't know how to run autoware launch files in the simulator container, because Autoware is not installed in the simulator container, in that case, it looks like I need to build Autoware in the simulator container to be able to run for example planning_simulator.launch.xml from the autoware_launch package.  

That's why, to solve the simulation issue, option 3 seemed the easiest way, and we did it. I think it would be nice, also for others, to create an optional tag to select an image with the simulator. There are only two lines which have to be added to the Dockerfile, and it will not create a lot of dependencies, I think.

For other changes, we just created our own container. 
"
keep changes in the container for later use,D_kwDOAnasMc4AP69J,2022-06-05T13:02:24Z,koraykoca,2,Answered,DC_kwDOAnasMc4ALeDV,kenji-miyake,"> For the option 2, I don't know how to run autoware launch files in the simulator container, because Autoware is not installed in the simulator container, in that case, it looks like I need to build Autoware in the simulator container to be able to run for example planning_simulator.launch.xml from the autoware_launch package.

You have to launch 2 containers, one is Autoware and another is scenario_simulator.
And communicate between the containers.

> There are only two lines which have to be added to the Dockerfile, and it will not create a lot of dependencies, I think.

Yes, it's possible, but there is a problem that `scenario_simularor_v2` doesn't support ARM build yet (without manually building the dependent library).
https://github.com/autowarefoundation/autoware/issues/21"
keep changes in the container for later use,D_kwDOAnasMc4AP69J,2022-06-05T13:02:24Z,koraykoca,2,Answered,DC_kwDOAnasMc4ALp1w,koraykoca,"> You have to launch 2 containers, one is Autoware and another is scenario_simulator. And communicate between the containers.

I did like that, from universe container I launched the launch file and from the simulator container I launched only rviz. It didn't work somehow, but it's not so important right now, we could find a workaround for our case. Thank you for your answers."
colcon build fails due to protobuf compiler,D_kwDOAnasMc4AP69K,2022-06-06T06:42:49Z,CagriCatik,2,Answered,,,
colcon build fails due to protobuf compiler,D_kwDOAnasMc4AP69K,2022-06-06T06:42:49Z,CagriCatik,2,Answered,DC_kwDOAnasMc4ALDFU,mitsudome-r,"Could you provide more environment information?

* OS
* ROS Distribution (Galactic, Humble)
* CPU Architecture (arm64, amd64)
* protobuf package version"
colcon build fails due to protobuf compiler,D_kwDOAnasMc4AP69K,2022-06-06T06:42:49Z,CagriCatik,2,Answered,DC_kwDOAnasMc4ALEHh,CagriCatik,"Here is the detailed information according to my environment:

```
cc@cc-mega:~$ lsb_release -a
No LSB modules are available.
Distributor ID:	Ubuntu
Description:	Ubuntu 20.04.4 LTS
Release:	20.04
Codename:	focal

---

cc@cc-mega:~$ echo $ROS_DISTRO
galactic

---

cc@cc-mega:~$ lscpu
Architecture:                    x86_64
CPU op-mode(s):                  32-bit, 64-bit
Byte Order:                      Little Endian
Address sizes:                   39 bits physical, 48 bits virtual
CPU(s):                          16
On-line CPU(s) list:             0-15
Thread(s) per core:              2
Core(s) per socket:              8
Socket(s):                       1
NUMA node(s):                    1
Vendor ID:                       GenuineIntel
CPU family:                      6
Model:                           167
Model name:                      11th Gen Intel(R) Core(TM) i9-11900K @ 3.50GHz
Stepping:                        1
CPU MHz:                         3500.000
CPU max MHz:                     5300.0000
CPU min MHz:                     800.0000
BogoMIPS:                        7008.00
Virtualization:                  VT-x
L1d cache:                       384 KiB
L1i cache:                       256 KiB
L2 cache:                        4 MiB
L3 cache:                        16 MiB
NUMA node0 CPU(s):               0-15

---

cc@cc-mega:~$ pip show protobuf
Name: protobuf
Version: 3.16.0
Summary: Protocol Buffers
Home-page: https://developers.google.com/protocol-buffers/
Author: 
Author-email: 
License: 3-Clause BSD License
Location: /home/cc/.local/lib/python3.8/site-packages
Requires: six
Required-by:
```"
colcon build fails due to protobuf compiler,D_kwDOAnasMc4AP69K,2022-06-06T06:42:49Z,CagriCatik,2,Answered,DC_kwDOAnasMc4ALFCQ,zulfaqar-azmi-t4,"Have you tried uninstall your protobuf, and in the autoware folder, run `rosdep install -y --from-paths src --ignore-src --rosdistro $ROS_DISTRO`? Chances are, either your `.local/lib` folder is not visible by `cmake`, or the version your using is incompatible. 
For your reference, this is how `pip show protobuf` results looks like for me

```
Name: protobuf
Version: 3.6.1
Summary: Protocol Buffers
Home-page: https://developers.google.com/protocol-buffers/
Author: None
Author-email: None
License: 3-Clause BSD License
Location: /usr/lib/python3/dist-packages
Requires: 
Required-by:
```"
colcon build fails due to protobuf compiler,D_kwDOAnasMc4AP69K,2022-06-06T06:42:49Z,CagriCatik,2,Answered,DC_kwDOAnasMc4ALMOb,CagriCatik,"Thank you @zulfaqar-azmi-t4. I already had the galactic installed, which in this case was a mistake. 
After I deleted the galactic and protobuf it went according to the instructions."
2022-06-07 ODD working group weekly meeting (96),D_kwDOAnasMc4AP69L,2022-06-06T10:44:05Z,Igata-ctrl,0,Unanswered,,,
Bus stop handling in bus ODD,D_kwDOAnasMc4AP69M,2022-06-07T08:30:00Z,mehmetdogru,5,Answered,,,
Bus stop handling in bus ODD,D_kwDOAnasMc4AP69M,2022-06-07T08:30:00Z,mehmetdogru,5,Answered,DC_kwDOAnasMc4ALDHU,taikitanaka3,"> I would like to start a discussion about bus stop handling where the bus stops to take the passengers. In ODD definition we already have a case however it is not yet decided completely how it is gonna be implemented.

I'm going to answer first part. Currently in tier4 we are making scenarios for case by case and these usecases are covered by behavior and motion planning modules which is already implemented.
![image](https://user-images.githubusercontent.com/65527974/172337253-aa6bd910-c094-44c8-831e-7254bd80c8f7.png)

"
Bus stop handling in bus ODD,D_kwDOAnasMc4AP69M,2022-06-07T08:30:00Z,mehmetdogru,5,Answered,DC_kwDOAnasMc4ALDJN,mehmetdogru,Perfect :) Is there an english version of this detailed document and the implementation that you can share here?
Bus stop handling in bus ODD,D_kwDOAnasMc4AP69M,2022-06-07T08:30:00Z,mehmetdogru,5,Answered,DC_kwDOAnasMc4ALDMd,taikitanaka3,Sorry currently there is only Japanese version. We don't have any English version.
Bus stop handling in bus ODD,D_kwDOAnasMc4AP69M,2022-06-07T08:30:00Z,mehmetdogru,5,Answered,DC_kwDOAnasMc4ALDPi,taikitanaka3,"Currently there is no good materials that which module can support which scenario but in short these modules can support for Bus scenario
- Stopping at Bus Stops
  - no stopping area
  - blind spot
  - obstacle stop
- Departure at Bus Stops
  - blind spot
  - obstacle stop
  - intersection
  - runout "
Bus stop handling in bus ODD,D_kwDOAnasMc4AP69M,2022-06-07T08:30:00Z,mehmetdogru,5,Answered,DC_kwDOAnasMc4ALDUJ,mehmetdogru,"Ok, thanks for the information."
Bus stop handling in bus ODD,D_kwDOAnasMc4AP69M,2022-06-07T08:30:00Z,mehmetdogru,5,Answered,DC_kwDOAnasMc4ALDdz,Unknown,"@taikitanaka3 If you can send me links to the relevant documents via Slack, I'm happy to have a go at translating them for the WG to use as a reference."
Bus stop handling in bus ODD,D_kwDOAnasMc4AP69M,2022-06-07T08:30:00Z,mehmetdogru,5,Answered,DC_kwDOAnasMc4ALIiD,Igata-ctrl,"I was to offer the translation, too, but thanks, @LalithVipulananthan.

The original bus stop use case which @mehmetdogru showed above is based on a request from an OEM in the bus project in TIER IV group. As for the numbers like +/-50cm, we might want discuss with ITRI."
Bus stop handling in bus ODD,D_kwDOAnasMc4AP69M,2022-06-07T08:30:00Z,mehmetdogru,5,Answered,DC_kwDOAnasMc4ALPL9,mehmetdogru,"@LalithVipulananthan When you complete the translation of the doc could you notify us here, thanks a lot!"
Bus stop handling in bus ODD,D_kwDOAnasMc4AP69M,2022-06-07T08:30:00Z,mehmetdogru,5,Answered,DC_kwDOAnasMc4ALrPc,Unknown,"@mehmetdogru @Igata-ctrl My apologies for the delayed response. The English translation of the slides above is attached below:
[Bus stop ODD Use Cases.pdf](https://github.com/autowarefoundation/autoware/files/9024707/Bus.stop.ODD.Use.Cases.pdf)"
Bus stop handling in bus ODD,D_kwDOAnasMc4AP69M,2022-06-07T08:30:00Z,mehmetdogru,5,Answered,DC_kwDOAnasMc4ALuhk,mehmetdogru,@LalithVipulananthan Thank you very much!
Bus stop handling in bus ODD,D_kwDOAnasMc4AP69M,2022-06-07T08:30:00Z,mehmetdogru,5,Answered,DC_kwDOAnasMc4AMrrr,mehmetdogru,"@taikitanaka3 @mitsudome-r 

I have a question about this topic which we realized it when we were talking about UI design for Bus ODD so I would be grateful if you could answer it.

So for bus to stop at the bus stop what will you need; will you need a checkpoint around the bus stop sign/inside the bus stop polygon?

Or autoware will extract from the route somehow the bus stops and take action?

~~I will create an issue about handling multiple goal points in autoware which I think it is a must for Bus ODD. But since they might be kind of related I wanted to ask you first what are your intentions/ideas about these topics?~~

**edit:** Sorry about my confusion. I forgot that in autoware.universe there is already a checkpoint implementation :)"
Bus stop handling in bus ODD,D_kwDOAnasMc4AP69M,2022-06-07T08:30:00Z,mehmetdogru,5,Answered,DC_kwDOAnasMc4ALDlx,JToolGD,"I'm curious about the +/- 50cm lateral. That's a range of 1m, right? Unless I'm mistaken, most buses (at least here in The Netherlands) stop at around 30cm from the curb (might even be less). I'm also pretty sure most bus stops (again, in The Netherlands) don't have the space for a bus to be 1m from the curb (it would cross over onto the next lane)."
Bus stop handling in bus ODD,D_kwDOAnasMc4AP69M,2022-06-07T08:30:00Z,mehmetdogru,5,Answered,DC_kwDOAnasMc4ALE3n,mehmetdogru,"Thanks for the input. That is the rough definition of the scenario of course, for different kind of needs and situations different ODD scenarios are needed. And with [the way I think how it should be implemented](https://github.com/orgs/autowarefoundation/discussions/399#:~:text=I%20think%20it%20would%20be%20nice%2C%20efficient%20and%20easy%20to%20debug%20and%20visualize%20it%20if%20we%20would%20have%20bus_stop%20annotations%20which%20have%20a%20polygon%20where%20the%20bus%20can%20pull%20over%20to%20take%20the%20passengers), your case would be covered."
Bus stop handling in bus ODD,D_kwDOAnasMc4AP69M,2022-06-07T08:30:00Z,mehmetdogru,5,Answered,DC_kwDOAnasMc4ALEfA,chishengshih,"
Agree that there are many exceptions. 

Current scenario assume that there are not obstacles between curb and bus. What if there are obstacles? For example, illegal parking or illegal double parking when there is no such bus bay. Will the bus wait until the space is clear? Or, skip this stop and move the next stop? 

For safety, the bus should wait till the space is clear. How does the bus notify other vehicles to move and clear the space? 

Best,
Daniel
> On Jun 7, 2022, at 9:57 PM, JToolGD ***@***.***> wrote:
> 
> 
> I'm curious about the +/- 50cm lateral. That's a range of 1m, right? Unless I'm mistaken, most buses (at least here in The Netherlands) stop at around 30cm from the curb (might even be less). I'm also pretty sure most bus stops (again, in The Netherlands) don't have the space for a bus to be 1m from the curb (it would cross over onto the next lane).
> 
> —
> Reply to this email directly, view it on GitHub <https://github.com/orgs/autowarefoundation/discussions/399#discussioncomment-2898289>, or unsubscribe <https://github.com/notifications/unsubscribe-auth/AAIMBHCF6BW7LQWSLKF3DU3VN5INFANCNFSM5YCBTYHA>.
> You are receiving this because you are subscribed to this thread.
> 

"
Bus stop handling in bus ODD,D_kwDOAnasMc4AP69M,2022-06-07T08:30:00Z,mehmetdogru,5,Answered,DC_kwDOAnasMc4ALE6k,mehmetdogru,"Thank you very much for the input. Of course possible scenarios are endless just like other missions such as lane driving, lane change etc which the bus should handle in normal urban traffic. But these improvements and scenario coverage must be done step by step I believe.

What I wanted to discuss more first what should be the approach in defining bus stops for planning stack to handle efficiently and for easy debugging actually."
Bus stop handling in bus ODD,D_kwDOAnasMc4AP69M,2022-06-07T08:30:00Z,mehmetdogru,5,Answered,DC_kwDOAnasMc4ALabK,brian841102,"I think using the lateral/longitude error as the criteria is nice. In my opinion, the comfort of passengers on the bus is also important, it would be nice if the acceleration/deceleration of ego vehicle be included as a factor to evaluate bus stop handling."
Bus stop handling in bus ODD,D_kwDOAnasMc4AP69M,2022-06-07T08:30:00Z,mehmetdogru,5,Answered,DC_kwDOAnasMc4AMeQ-,BonoloAWF,@mehmetdogru is there a consensus on the implementation details for this feature? Has an issue been created for this? 
Bus stop handling in bus ODD,D_kwDOAnasMc4AP69M,2022-06-07T08:30:00Z,mehmetdogru,5,Answered,DC_kwDOAnasMc4AMeT3,mehmetdogru,I think it is a very good design for this feature. I am not aware of any related issue. 
Bus stop handling in bus ODD,D_kwDOAnasMc4AP69M,2022-06-07T08:30:00Z,mehmetdogru,5,Answered,DC_kwDOAnasMc4AMed5,BonoloAWF,Thanks for the update. I'll create an issue to discuss at the next meeting.
Autonomy Software WG Meeting 2022/06/14,D_kwDOAnasMc4AP69N,2022-06-07T12:21:08Z,BonoloAWF,2,Answered,,,
Autonomy Software WG Meeting 2022/06/14,D_kwDOAnasMc4AP69N,2022-06-07T12:21:08Z,BonoloAWF,2,Answered,DC_kwDOAnasMc4ALPyL,xmfcx,"## Meeting Minutes:

- Merging of the autoware ai into autowarefoundation organizations has started.
- Weekly planner evaluation CI module has been integrated and started running.
  - https://us02st1.zoom.us/web_client/3jktxx3/html/externalLinkPage.html?ref=https://evaluation.tier4.jp/evaluation/reports?project_id=awf
  - You might need access on this, @mitsudome-r will share a discussion thread for this.
  - https://github.com/orgs/autowarefoundation/discussions/411

### Mert shared the bus project updates

- Timeline: 
  - ![Screenshot from 2022-06-14 18-07-32](https://user-images.githubusercontent.com/10751153/173611927-516ae1eb-8be5-4bba-a462-4a06401b172a.png)
- Vehicle setup: 
  - ![Screenshot from 2022-06-14 18-08-07](https://user-images.githubusercontent.com/10751153/173612057-68895354-fdd6-401f-bc33-e6a2f5e59484.png)
- Test campus:
  - ![Screenshot from 2022-06-14 18-09-01](https://user-images.githubusercontent.com/10751153/173612252-27a74707-4c47-4f98-9bdd-790a7122aeb7.png)
- Project goals:
  - ![Screenshot from 2022-06-14 18-10-28](https://user-images.githubusercontent.com/10751153/173612623-471b6bb7-419c-4f92-91d1-07fbee11e9fe.png)
- Project status:
  - ![Screenshot from 2022-06-14 18-11-32](https://user-images.githubusercontent.com/10751153/173612858-36313686-dd87-49e7-86af-56a34b1e372a.png)

### Discussed issues/PRs:
- https://github.com/autowarefoundation/autoware/pull/374
- https://github.com/autowarefoundation/autoware/discussions/313
- https://github.com/autowarefoundation/autoware/discussions/416
- https://github.com/autowarefoundation/autoware/discussions/410
- https://github.com/autowarefoundation/autoware.universe/issues/1076
- https://github.com/autowarefoundation/autoware.universe/issues/1009
- https://github.com/autowarefoundation/autoware.universe/issues/993
- https://github.com/autowarefoundation/autoware.universe/issues/987
- https://github.com/autowarefoundation/autoware.universe/issues/980
- https://github.com/autowarefoundation/autoware.universe/issues/966
- https://github.com/autowarefoundation/autoware.universe/issues/947
- https://github.com/autowarefoundation/autoware.universe/pull/992
- https://github.com/autowarefoundation/autoware.universe/issues/861
- https://github.com/autowarefoundation/autoware.universe/pull/727
  - https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/behavior_path_planner_avoidance-design/
- https://github.com/autowarefoundation/autoware.universe/issues/669
  - @piotr-zyskowski-rai is working on this, once the evaluation node is completed, he will start working on the issue."
Autonomy Software WG Meeting 2022/06/14,D_kwDOAnasMc4AP69N,2022-06-07T12:21:08Z,BonoloAWF,2,Answered,DC_kwDOAnasMc4ALu25,phkarle,"Hey Mert, you mentioned during the presentation that you could provide some rosbags of the sensor data. We would like to make you of this offer. Could you upload / share some data with me?"
Autonomy Software WG Meeting 2022/06/14,D_kwDOAnasMc4AP69N,2022-06-07T12:21:08Z,BonoloAWF,2,Answered,DC_kwDOAnasMc4ALy6C,MertClk,"Hi Phillip, we will forward our bag files to @xmfcx to make them online. I'll ping you, when they are available."
Autonomy Software WG Meeting 2022/06/14,D_kwDOAnasMc4AP69N,2022-06-07T12:21:08Z,BonoloAWF,2,Answered,DC_kwDOAnasMc4ALy6I,phkarle,Great. Thank you.
Autonomy Software WG Meeting 2022/06/14,D_kwDOAnasMc4AP69N,2022-06-07T12:21:08Z,BonoloAWF,2,Answered,DC_kwDOAnasMc4AMFnf,phkarle,"Hey Mert, Have you already uploaded the bags? Thanks in advance"
Autonomy Software WG Meeting 2022/06/14,D_kwDOAnasMc4AP69N,2022-06-07T12:21:08Z,BonoloAWF,2,Answered,DC_kwDOAnasMc4AMFrw,MertClk,"Hello Phillip, we were out of the office last week. Hence, we couldn't upload them yet. We are planning to share them this week."
Autonomy Software WG Meeting 2022/06/14,D_kwDOAnasMc4AP69N,2022-06-07T12:21:08Z,BonoloAWF,2,Answered,DC_kwDOAnasMc4AMUD0,phkarle,"Hey Mert, Any updates?"
Autonomy Software WG Meeting 2022/06/14,D_kwDOAnasMc4AP69N,2022-06-07T12:21:08Z,BonoloAWF,2,Answered,DC_kwDOAnasMc4ALRSU,BonoloAWF,"- https://github.com/autowarefoundation/autoware.universe/issues/711 - visualisation fix required, assigned to Xinyu
- https://github.com/autowarefoundation/autoware.universe/issues/966 - assigned to Karmen"
Document origin of pretrained models provided in autoware.universe,D_kwDOAnasMc4AP69O,2022-06-08T04:52:28Z,VRichardJP,2,Answered,,,
Document origin of pretrained models provided in autoware.universe,D_kwDOAnasMc4AP69O,2022-06-08T04:52:28Z,VRichardJP,2,Answered,DC_kwDOAnasMc4ALFMp,yukkysaito,@miursh @aohsato @eratostennis can you comment?
Document origin of pretrained models provided in autoware.universe,D_kwDOAnasMc4AP69O,2022-06-08T04:52:28Z,VRichardJP,2,Answered,DC_kwDOAnasMc4ALI-X,miursh,"@VRichardJP 
We can gather details of the data currently used and writing it to README may be easy way. Is that enough? or maybe this discussion is not only that? 
From the perspective of continuous deployment, let me and TIER IV MLOps member discuss about this. 
cc @eratostennis @yukke42 
"
Document origin of pretrained models provided in autoware.universe,D_kwDOAnasMc4AP69O,2022-06-08T04:52:28Z,VRichardJP,2,Answered,DC_kwDOAnasMc4ALJXz,VRichardJP,"Yes, I think a small summary in the README of each package would be enough. The information should help the user to understand the package use cases and its limits"
Document origin of pretrained models provided in autoware.universe,D_kwDOAnasMc4AP69O,2022-06-08T04:52:28Z,VRichardJP,2,Answered,DC_kwDOAnasMc4ALPJr,miursh,working on https://github.com/autowarefoundation/autoware.universe/issues/1087
What is the current behavior when a bicycle/motorcycle pass the ego vehicle from the side?,D_kwDOAnasMc4AP69P,2022-06-08T07:57:52Z,VRichardJP,1,Answered,,,
What is the current behavior when a bicycle/motorcycle pass the ego vehicle from the side?,D_kwDOAnasMc4AP69P,2022-06-08T07:57:52Z,VRichardJP,1,Answered,DC_kwDOAnasMc4ALFMd,yukkysaito,">It seems to me that if the ego vehicle is stopped (e.g. traffic light was red and just turned green), the [surround obstacle checker](https://github.com/autowarefoundation/autoware.universe/tree/main/planning/surround_obstacle_checker) will prevent the vehicle from driving until the cyclist is far enough. So if we imagine many other bicycles/motorcycles are following after, the ego vehicle may end up being stuck for a while. Is that assumption correct?

I think it depends on the options user chooses.
Some users do not want the bus to start if there are obstacles nearby, while others want it to start in the situation described above.
I think it is good to have a choice of options depending on the user wants.
The current surround obstacle checker is a requirement for bus starting, so it may not be good for it as the above scene.

>What about if the ego vehicle is still driving? Can the map based prediction node predict the correct trajectory for the cyclist (keep riding on the side, eventually following curved roads)? If so, would autoware keep its lateral position on the lane and drive forward? or generate an avoidance trajectory? or simply stop?

Regarding the current implementation:
I think it will follow or stop when it enters into the trajectory. (I believe there are options to select the following target.)
If it is not in the trajectory, it is ignored."
What is the current behavior when a bicycle/motorcycle pass the ego vehicle from the side?,D_kwDOAnasMc4AP69P,2022-06-08T07:57:52Z,VRichardJP,1,Answered,DC_kwDOAnasMc4ALFON,VRichardJP,"
> Regarding the current implementation: I think it will follow or stop when it enters into the trajectory. (I believe there are options to select the following target.) If it is not in the trajectory, it is ignored.

What about the trajectory prediction for the cyclist? Does current implementation preserve longitudinal position of the obstacle? i.e. predicts the cyclist will stay on the left side of the lane (so maybe always stay outside the ego vehicle path); or does it predicts the cyclist will eventually reach the center line of the lane (in which case there would obviously be a collision?) "
2022-06-08 Simulation Working Group Meeting,D_kwDOAnasMc4AP69Q,2022-06-08T10:31:34Z,sglee-morai,0,Unanswered,,,
Open AD Kit WG Meeting 2022/06/09,D_kwDOAnasMc4AP69R,2022-06-08T13:14:17Z,Unknown,0,Unanswered,,,
Autoware Architecture WG Meeting (vehicle) 2022/06/08,D_kwDOAnasMc4AP69S,2022-06-08T14:00:11Z,mitsudome-r,0,Unanswered,,,
A Sampling-Based planner framework for Autoware,D_kwDOAnasMc4AP69T,2022-06-09T09:29:35Z,maxime-clem,1,Answered,,,
A Sampling-Based planner framework for Autoware,D_kwDOAnasMc4AP69T,2022-06-09T09:29:35Z,maxime-clem,1,Answered,DC_kwDOAnasMc4ALJJn,brkay54,"I think new repository in Autoware Foundation is a good option. Announcements can be made in Discord and also discussions can be created in meta autoware repository. After a successful release, it can be integrated to universe/core. "
"Scope and use cases for a new ""Runtime Manager"" GUI for Autoware Core/Universe",D_kwDOAnasMc4AP69U,2022-06-10T02:48:40Z,Unknown,2,Answered,,,
"Scope and use cases for a new ""Runtime Manager"" GUI for Autoware Core/Universe",D_kwDOAnasMc4AP69U,2022-06-10T02:48:40Z,Unknown,2,Answered,DC_kwDOAnasMc4ALQ1x,maxime-clem,"I do not have experience with the runtime manager in Autoware.ai but as a developer let me describe my ideal (and probably overambitious) Autoware GUI.
- Open a launch file.
   - see the graph of nodes and topics (like `rqt_graph`) that will be launched.
   - select a node to edit its launch parameters.
   - select a topic to change its name.
   - start the launch file.
- After starting a launch file.
   - see the graph of nodes and topics (like `rqt_graph`) that are running.
   - select a node to see information about its inputs, outputs, and to edit its parameters (like `rqt_reconfigure`).
   - select a topic to see information about its rate, publishers/subscribers, and possibly to print the messages.
   - visual information when a node crash, or when a topic does not receive messages.
   - restart a crashed node, manually publish data to some topic.

I believe such GUI would greatly help with debugging issues. The features are not specific to Autoware so this could be a general ROS2 project."
"Scope and use cases for a new ""Runtime Manager"" GUI for Autoware Core/Universe",D_kwDOAnasMc4AP69U,2022-06-10T02:48:40Z,Unknown,2,Answered,DC_kwDOAnasMc4ALXq2,CagriCatik,"After my searching I found the following document/manual [Autoware - Users Manual](https://github.com/CPFL/Autoware-Manuals/blob/master/en/Autoware_UsersManual_v1.1.pdf). 
The source code for Autoware.AI can also be found there [Runtime Manager Dialog](https://gitlab.com/autowarefoundation/autoware.ai/utilities/blob/master/runtime_manager/scripts/runtime_manager_dialog.py). 
As it looks, IMHO, it looks like a migration project.

"
"Scope and use cases for a new ""Runtime Manager"" GUI for Autoware Core/Universe",D_kwDOAnasMc4AP69U,2022-06-10T02:48:40Z,Unknown,2,Answered,DC_kwDOAnasMc4ALwjS,mitsudome-r,@raminterpl will post a comment about requirements for the GUI by the end of this week.
"Scope and use cases for a new ""Runtime Manager"" GUI for Autoware Core/Universe",D_kwDOAnasMc4AP69U,2022-06-10T02:48:40Z,Unknown,2,Answered,DC_kwDOAnasMc4AL8PQ,mitsudome-r,ping @raminterpl 
"Scope and use cases for a new ""Runtime Manager"" GUI for Autoware Core/Universe",D_kwDOAnasMc4AP69U,2022-06-10T02:48:40Z,Unknown,2,Answered,DC_kwDOAnasMc4ALwj5,Unknown,"@CagriCatik In theory, it's just a migration, but the source code is a single file that is over 3000 lines long! It would probably take less time to rewrite the entire thing from scratch that to try and understand all of that code and then make it work with Core/Universe. Thus if we're going to do rewrite the entire thing, then we may as well gather requirements. 

There is also some overlap with another discussion that I created about a potential replacement for RViz. This application covers some of the ideas suggested by @maxime-clem.
https://github.com/orgs/autowarefoundation/discussions/2700
"
"Scope and use cases for a new ""Runtime Manager"" GUI for Autoware Core/Universe",D_kwDOAnasMc4AP69U,2022-06-10T02:48:40Z,Unknown,2,Answered,DC_kwDOAnasMc4AMHyH,raminterpl,"**Runtime Manager Tool requirements** 

 

**Scope:**  

Runtime Manager enables autoware users to execute and monitor functions such as localization, object detection, and path following.  
Runtime manager can be integrated with simulator and visualize localization on 3-D map,path following, ego vehicle and other objects. 

 

**Use case:** 

1.) To ""Quick start"" to start Autoware Core/Universe

2.) To Integrate Rviz or any new tool or any New simulator approved by AWF (Ex: Tier IV) for testing/debugging

3.) To monitor CPU load and memory usage 

4.) To select ""Topics/Nodes"" used and to edit parameters

5.) To do ""Remote control""

6.) To perform ROS bag data recording/Replay 

7.) To Connect through external interfaces (Ex: AndriodTablet, Oculus) "
2022-06-14 ODD working group weekly meeting (97),D_kwDOAnasMc4AP69W,2022-06-10T10:32:04Z,Igata-ctrl,0,Unanswered,,,
Improve the lateral acceleration filter in motion velocity smoother,D_kwDOAnasMc4AP69X,2022-06-10T11:00:33Z,brkay54,2,Answered,,,
Improve the lateral acceleration filter in motion velocity smoother,D_kwDOAnasMc4AP69X,2022-06-10T11:00:33Z,brkay54,2,Answered,DC_kwDOAnasMc4ALJYE,brkay54,cc. @mehmetdogru @TakaHoribe 
Improve the lateral acceleration filter in motion velocity smoother,D_kwDOAnasMc4AP69X,2022-06-10T11:00:33Z,brkay54,2,Answered,DC_kwDOAnasMc4ALPsB,brkay54,"I tested the both approach with `control_performance_analysis` (in this [PR](https://github.com/autowarefoundation/autoware.universe/pull/1099)).

**Results (Before is current implementation, after is implementation with new approach):**
| Series                                                                               | Min Before  | Min After  | Max Before   | Max After   | Average Before | Average After |
|--------------------------------------------------------------------------------------|-------------|------------|--------------|-------------|----------------|---------------|
| /control_performance/driving_status/lateral_acceleration/data                        | -0.414748   | -0.404385  | 0.587819     | 0.570642    | 0.028891       | 0.025944      |
| /control_performance/driving_status/lateral_jerk/data                                | -4.37723    | -3.515305  | 2.620279     | 2.488174    | 0.001978       | -0.002855     |
| /control_performance/driving_status/longitudinal_acceleration/data                   | -0.912165   | -0.992638  | 1.171741     | 1.169503    | -0.00547       | -0.001894     |
| /control_performance/driving_status/longitudinal_jerk/data                           | -37.579326  | -38.59962  | 50.363508    | 64.01396    | -0.043433      | 0.003336      |
| /control_performance/performance_vars/error/control_effort_energy                    | 1E-06       | 3E-06      | 3.751512     | 3.640998    | 0.548236       | 0.517991      |
| /control_performance/performance_vars/error/curvature_estimate                       | -0.196328   | -0.15474   | 0.147634     | 0.14805     | 0.012307       | 0.011465      |
| /control_performance/performance_vars/error/curvature_estimate_pp                    | -0.685987   | -0.659468  | 0.857495     | 0.864488    | 0.0036         | 0.016651      |
| /control_performance/performance_vars/error/error_energy                             | 3E-06       | 3E-06      | 725.076238   | 744.538529  | 16.453592      | 14.461468     |
| /control_performance/performance_vars/error/heading_error                            | -3.935703   | -3.6235    | 0.131046     | 0.089199    | -0.138134      | -0.130147     |
| /control_performance/performance_vars/error/heading_error_velocity                   | -0.228567   | -0.232441  | 0.357787     | 0.351656    | 0.013681       | 0.012888      |
| /control_performance/performance_vars/error/lateral_error                            | -0.201026   | -0.203656  | 25.594785    | 24.925392   | 0.763545       | 0.690954      |
| /control_performance/performance_vars/error/lateral_error_acceleration               | -0.677725   | -0.646119  | 0.977959     | 0.961904    | 0.020453       | 0.020365      |
| /control_performance/performance_vars/error/lateral_error_velocity                   | -0.263545   | -0.231912  | 3.613527     | 3.311932    | 0.080852       | 0.070448      |
| /control_performance/performance_vars/error/longitudinal_error                       | -1.416918   | -1.687636  | 0.415556     | 0.557804    | -0.02788       | -0.024898     |
| /control_performance/performance_vars/error/longitudinal_error_acceleration          | -0.879877   | -0.888177  | 0.731259     | 0.756286    | 0.009436       | 0.000694      |
| /control_performance/performance_vars/error/longitudinal_error_velocity              | -4.887811   | -4.10775   | 0.486414     | 0.093616    | -0.102476      | -0.100788     |
| /control_performance/performance_vars/error/tracking_curvature_discontinuity_ability | 0           | 0          | 0.194609     | 0.149417    | 0.002406       | 0.002328      |
| /control_performance/performance_vars/error/value_approximation                      | 4E-06       | 2E-06      | 1157.290071  | 1141.501573 | 22.946368      | 20.431148     |
| /control_performance/performance_vars/error/vehicle_velocity_error                   | -0.25       | -0.34384   | 4.550888     | 4.419915    | 0.089122       | 0.073407      |
| iae_heading_error                                                                    | 0.070968    | 0.036298   | 2140.478331  | 1845.584953 | 1439.086766    | 1231.35816    |
| iae_heading_velocity_error                                                           | 0.260451    | 0.140809   | 839.786466   | 780.52647   | 438.247896     | 396.277805    |
| iae_lateral_acceleration_error                                                       | 0.062105    | 0.033544   | 2175.340398  | 2000.631767 | 1234.263002    | 1106.525029   |
| iae_lateral_error                                                                    | 1211.975957 | 646.071468 | 11887.734163 | 9804.156735 | 8798.502473    | 7032.961661   |
| iae_lateral_velocity_error                                                           | 4.9E-05     | 1.5E-05    | 1779.449632  | 1556.360706 | 1223.726301    | 1037.138146   |
| iae_longitudina_velocity_error                                                       | 891.871092  | 475.582655 | 2458.981641  | 1861.455609 | 1950.962988    | 1390.603746   |
| iae_longitudinal_acceleration_error                                                  | 176.916485  | 93.702997  | 2746.845968  | 2458.832042 | 1752.962301    | 1549.778308   |
| iae_longitudinal_error                                                               | 0.00567     | 0.002785   | 447.159208   | 366.669203  | 306.049465     | 253.690967    |
| iae_tracking_curvature_discontinuity_ability                                         | 0.000405    | 9E-06      | 31.055063    | 28.275924   | 14.034673      | 13.055478     |
| rms_heading_error                                                                    | 0.070968    | 0.036298   | 2140.478331  | 1845.584953 | 1439.086766    | 1231.35816    |
| rms_heading_velocity_error                                                           | 0.260451    | 0.140809   | 839.786466   | 780.52647   | 438.247896     | 396.277805    |
| rms_lateral_acceleration_error                                                       | 0.062105    | 0.033544   | 2175.340398  | 2000.631767 | 1234.263002    | 1106.525029   |
| rms_lateral_error                                                                    | 1211.975957 | 646.071468 | 11887.734163 | 9804.156735 | 8798.502473    | 7032.961661   |
| rms_lateral_velocity_error                                                           | 4.9E-05     | 1.5E-05    | 1779.449632  | 1556.360706 | 1223.726301    | 1037.138146   |
| rms_longitudinal_acceleration_error                                                  | 176.916485  | 93.702997  | 2746.845968  | 2458.832042 | 1752.962301    | 1549.778308   |
| rms_longitudinal_error                                                               | 0.00567     | 0.002785   | 447.159208   | 366.669203  | 306.049465     | 253.690967    |
| rms_longitudinal_velocity_error                                                      | 891.871092  | 475.582655 | 2458.981641  | 1861.455609 | 1950.962988    | 1390.603746   |
| rms_tracking_curvature_discontinuity_ability                                         | 0.000405    | 9E-06      | 31.055063    | 28.275924   | 14.034673      | 13.055478     |


---
**With new approach, maximum, total, average lateral errors decreased.** 

Related issue [#567](https://github.com/autowarefoundation/autoware.universe/issues/567) "
How to add a live camera stream to Autoware and setup object tracking?,D_kwDOAnasMc4AP69b,2022-06-13T06:51:15Z,Unknown,2,Answered,,,
How to add a live camera stream to Autoware and setup object tracking?,D_kwDOAnasMc4AP69b,2022-06-13T06:51:15Z,Unknown,2,Answered,DC_kwDOAnasMc4ALNFB,kaancolak,"The camera stream is now used for 2D detection and lidar-camera clusters/objects fusion in Autoware.Universe. There is no 2D tracking on the camera, tracking works in 3D."
How to add a live camera stream to Autoware and setup object tracking?,D_kwDOAnasMc4AP69b,2022-06-13T06:51:15Z,Unknown,2,Answered,DC_kwDOAnasMc4ALrHD,aohsato,"@LalithVipulananthan You can use general ros camera drivers (e.g. [gscam](https://github.com/ros-drivers/gscam)) for supplying image stream to autoware.

But autoware currently has only 2D detection and lidar-camera fusion algorithms as @kaancolak said.

If you okay, would you please describe your usecase about ""live camera stream""?"
There are so many duplicated parameters in Universe,D_kwDOAnasMc4AP69c,2022-06-13T11:52:34Z,brkay54,2,Answered,,,
There are so many duplicated parameters in Universe,D_kwDOAnasMc4AP69c,2022-06-13T11:52:34Z,brkay54,2,Answered,DC_kwDOAnasMc4ALNPH,brkay54,cc. @esteve @kenji-miyake @xmfcx @mehmetdogru 
There are so many duplicated parameters in Universe,D_kwDOAnasMc4AP69c,2022-06-13T11:52:34Z,brkay54,2,Answered,DC_kwDOAnasMc4ALNPQ,kenji-miyake,"Related issues:
- https://github.com/autowarefoundation/autoware.universe/issues/910
- https://github.com/autowarefoundation/autoware.universe/issues/143

cc @satoshi-ota @takayuki5168 "
There are so many duplicated parameters in Universe,D_kwDOAnasMc4AP69c,2022-06-13T11:52:34Z,brkay54,2,Answered,DC_kwDOAnasMc4ALP3d,xmfcx,"More related issues:
- https://github.com/autowarefoundation/autoware.universe/issues/987"
There are so many duplicated parameters in Universe,D_kwDOAnasMc4AP69c,2022-06-13T11:52:34Z,brkay54,2,Answered,DC_kwDOAnasMc4ALNQf,kenji-miyake,"I think there are two topics to be discussed.

1. How should we load global parameters?

I personally recommend `global_parameter_loader`, which internally uses [SetParameter](https://github.com/ros2/launch_ros/blob/88b51d0965c5d9946e2427ccbbadfd6c423d28bb/launch_ros/launch_ros/actions/set_parameter.py), to load parameters.
It can set parameters globally in the launch phase (before runtime).

However, the way that is widely used now is [vehicle_info_param_file](https://github.com/autowarefoundation/autoware.universe/blob/fec161b23c451d661e25f2ab75f578d8303cf2d3/planning/behavior_path_planner/launch/behavior_path_planner.launch.xml#L6), which also can set parameters in the launch phase but is not flexible.
We have to define several parameter files and add them to each launch file as arguments.

https://github.com/autowarefoundation/autoware.universe/issues/143 focuses on this.

2. What kind of parameter values should we define?

As you wrote, it's `steering limit degree`, `maximum acceleration`, `maximum_jerk`, etc.

https://github.com/autowarefoundation/autoware.universe/issues/910 is mainly for this."
Telemetry and Basestation Solutions,D_kwDOAnasMc4AP69d,2022-06-13T23:55:32Z,HaoruXue,0,Unanswered,,,
How to identify the adaptive gear ratio for the target vehicle,D_kwDOAnasMc4AP69e,2022-06-14T01:51:06Z,TomoyukiaW,1,Answered,,,
How to identify the adaptive gear ratio for the target vehicle,D_kwDOAnasMc4AP69e,2022-06-14T01:51:06Z,TomoyukiaW,1,Answered,DC_kwDOAnasMc4ALOwc,taikitanaka3,we identify gear ratio from rosbag data using least squared algorithm and we decide coefficient so it can be improved by using more better parameters yet we use that value for years.
How to identify the adaptive gear ratio for the target vehicle,D_kwDOAnasMc4AP69e,2022-06-14T01:51:06Z,TomoyukiaW,1,Answered,DC_kwDOAnasMc4ALOzB,TomoyukiaW,Thank you for your answer. I'll try it.
Autonomy Software WG Meeting 2022/06/21,D_kwDOAnasMc4AP69f,2022-06-15T09:17:35Z,BonoloAWF,1,Answered,,,
Autonomy Software WG Meeting 2022/06/21,D_kwDOAnasMc4AP69f,2022-06-15T09:17:35Z,BonoloAWF,1,Answered,DC_kwDOAnasMc4ALaft,mitsudome-r,"Here's the presentation that I shared today.
[Autoware CI_CD Pipeline.pdf](https://github.com/autowarefoundation/autoware_core_universe_prototype/files/8947366/Autoware.CI_CD.Pipeline.pdf)

I will also create a documentation or wiki later."
Using op_autoware_bridge_2 to run CARLA simulator with Autoware.universe,D_kwDOAnasMc4AP69g,2022-06-15T15:16:54Z,hatem-darweesh,1,Answered,,,
Using op_autoware_bridge_2 to run CARLA simulator with Autoware.universe,D_kwDOAnasMc4AP69g,2022-06-15T15:16:54Z,hatem-darweesh,1,Answered,DC_kwDOAnasMc4ALTHH,mitsudome-r,"Regarding the localization issue, possible cause that I can think of is IMU data. If you are using a default localization launch, it should fuse the imu data with velocity status by overwriting the angular velocity information so if you have IMU output yaw in opposite direction you might have an error as in the video. https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/components/vehicle-dimensions/"
Using op_autoware_bridge_2 to run CARLA simulator with Autoware.universe,D_kwDOAnasMc4AP69g,2022-06-15T15:16:54Z,hatem-darweesh,1,Answered,DC_kwDOAnasMc4ALTtg,hatem-darweesh,"@mitsudome-r That was helpful, I fixed the orientation of the IMU and now it is working fine. Thanks a lot. "
Using op_autoware_bridge_2 to run CARLA simulator with Autoware.universe,D_kwDOAnasMc4AP69g,2022-06-15T15:16:54Z,hatem-darweesh,1,Answered,DC_kwDOAnasMc4AUM00,sayondeep,"@hatem-darweesh Can you please tell how to configure autoware to run in this setup. 
I was able to run the route_secnario and manual_control in carla but couldnt set up the autoware as shown in the video.
"
Autoware.Auto on Nvidia Jetson Nano,D_kwDOAnasMc4AP69h,2022-06-15T18:21:09Z,andrejpadilha2,0,Unanswered,,,
Open AD Kit WG Meeting 2022/06/17,D_kwDOAnasMc4AP69i,2022-06-16T06:55:14Z,Unknown,0,Unanswered,,,
TSC Meeting Minutes for March-May,D_kwDOAnasMc4AP69j,2022-06-16T10:04:04Z,mitsudome-r,0,Unanswered,,,
Technical Steering Committee (TSC) Meeting #43 (2022/06/15) Minutes,D_kwDOAnasMc4AP69k,2022-06-16T10:14:59Z,mitsudome-r,0,Unanswered,,,
Should we have a page listing appropriate reviewers for each major Autoware component?,D_kwDOAnasMc4AP69l,2022-06-17T06:05:32Z,Unknown,2,Answered,,,
Should we have a page listing appropriate reviewers for each major Autoware component?,D_kwDOAnasMc4AP69l,2022-06-17T06:05:32Z,Unknown,2,Answered,DC_kwDOAnasMc4ALVNp,kenji-miyake,I think it's good to update maintainers in `package.xml`.
Should we have a page listing appropriate reviewers for each major Autoware component?,D_kwDOAnasMc4AP69l,2022-06-17T06:05:32Z,Unknown,2,Answered,DC_kwDOAnasMc4ALYmn,maxime-clem,"I think it is okay to ask for reviews on Discord.
In the case where the PR modifies an existing package, then the maintainers of this package should be assigned as reviewers. Otherwise, Discord is a good option in my opinion.

We can either create a new channel (e.g., **#pr-call-for-reviews**) or people can use the corresponding ""Software"" channels (e.g., **#planning-control** for a PR related to planning)."
Always use_sim_time?,D_kwDOAnasMc4AP69m,2022-06-19T20:12:05Z,doganulus,0,Unanswered,,,
Using backward search in freespace planning algorithm,D_kwDOAnasMc4AP69n,2022-06-20T09:09:35Z,alanmengg,0,Unanswered,,,
2022-06-21 ODD working group weekly meeting (98),D_kwDOAnasMc4AP69o,2022-06-20T09:39:34Z,Igata-ctrl,0,Unanswered,,,
Can not convert Yolov4 model that trained on custom dataset to Onnx format,D_kwDOAnasMc4AP69p,2022-06-20T14:51:14Z,Zeysthingz,1,Answered,,,
Can not convert Yolov4 model that trained on custom dataset to Onnx format,D_kwDOAnasMc4AP69p,2022-06-20T14:51:14Z,Zeysthingz,1,Answered,DC_kwDOAnasMc4ALZ83,yukke42,@wep21 @yukkysaito Could you share your conversion script?
Can not convert Yolov4 model that trained on custom dataset to Onnx format,D_kwDOAnasMc4AP69p,2022-06-20T14:51:14Z,Zeysthingz,1,Answered,DC_kwDOAnasMc4ALlzC,Zeysthingz,@wep21  @yukkysaito I am still working on this. Any documentation would be great.
Can not convert Yolov4 model that trained on custom dataset to Onnx format,D_kwDOAnasMc4AP69p,2022-06-20T14:51:14Z,Zeysthingz,1,Answered,DC_kwDOAnasMc4ALl0A,wep21,@Zeysthingz I will prepare the scripts in this week. I am sorry for the inconvenience.
Can not convert Yolov4 model that trained on custom dataset to Onnx format,D_kwDOAnasMc4AP69p,2022-06-20T14:51:14Z,Zeysthingz,1,Answered,DC_kwDOAnasMc4ALmPg,Zeysthingz,Thank you a lot.
Can not convert Yolov4 model that trained on custom dataset to Onnx format,D_kwDOAnasMc4AP69p,2022-06-20T14:51:14Z,Zeysthingz,1,Answered,DC_kwDOAnasMc4ALwsD,mitsudome-r,@wep21 ping.
Can not convert Yolov4 model that trained on custom dataset to Onnx format,D_kwDOAnasMc4AP69p,2022-06-20T14:51:14Z,Zeysthingz,1,Answered,DC_kwDOAnasMc4AL4t4,wep21,"@Zeysthingz sorry for the late reply, I prepare [the script](https://github.com/wep21/yolo_onnx_converter) to convert darknet to onnx.
Please make sure that you change the batch size in cfg file to 1."
Can not convert Yolov4 model that trained on custom dataset to Onnx format,D_kwDOAnasMc4AP69p,2022-06-20T14:51:14Z,Zeysthingz,1,Answered,DC_kwDOAnasMc4AMdvu,Zeysthingz,"Thank you 
"
Can not convert Yolov4 model that trained on custom dataset to Onnx format,D_kwDOAnasMc4AP69p,2022-06-20T14:51:14Z,Zeysthingz,1,Answered,DC_kwDOAnasMc4AMgli,Zeysthingz,"@wep21 Here is my own weights ,cfg and label files. [https://drive.google.com/drive/folders/1P6nNa0h1lSyy6sqUGhtO3HnG6oFwgQcN?usp=sharing](https://drive.google.com/drive/folders/1P6nNa0h1lSyy6sqUGhtO3HnG6oFwgQcN?usp=sharing)"
Bounding boxes flickering,D_kwDOAnasMc4AP69q,2022-06-20T16:18:50Z,bariskapaligoz,5,Answered,,,
Bounding boxes flickering,D_kwDOAnasMc4AP69q,2022-06-20T16:18:50Z,bariskapaligoz,5,Answered,DC_kwDOAnasMc4ALauz,mitsudome-r,"I've heard the test was done by 
* RTX 3090
* Intel® Core™ i9-10920X CPU @ 3.50GHz × 24
* 128 GB DDR4 
so it's probably not the hardware issue."
Bounding boxes flickering,D_kwDOAnasMc4AP69q,2022-06-20T16:18:50Z,bariskapaligoz,5,Answered,DC_kwDOAnasMc4ALax3,miursh,@bariskapaligoz Could you tell us the exact command you use to launch autoware? Also could you confirm the parameter of rviz by `ros2 param dump --print /rviz`
Bounding boxes flickering,D_kwDOAnasMc4AP69q,2022-06-20T16:18:50Z,bariskapaligoz,5,Answered,DC_kwDOAnasMc4ALa3O,bariskapaligoz,"> @bariskapaligoz Could you tell us the exact command you use to launch autoware? Also could you confirm the parameter of rviz by `ros2 param dump --print /rviz`

We have executed logging_simulator.launch.xml with this command: `ros2 launch logging_simulator.launch.xml map_path:=$HOME/vector vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit mode:=lidar`



 you can find launch file here: https://netorgft4229778-my.sharepoint.com/:u:/g/personal/mert_adastec_com/ETE20Fsak95MgW-oFCcdHL0BFV3W-LjeKaCf1b-9PybMLA?e=j12sTH

As last result of `ros2 param dump --print /rviz` command:

> /rviz2:
ros__parameters:
qos_overrides:
/clock:
subscription:
depth: 1
durability: volatile
history: keep_last
reliability: best_effort
/parameter_events:
publisher:
depth: 1000
durability: volatile
history: keep_last
reliability: reliable
use_sim_time: true

"
Bounding boxes flickering,D_kwDOAnasMc4AP69q,2022-06-20T16:18:50Z,bariskapaligoz,5,Answered,DC_kwDOAnasMc4ALcGU,miursh,"Hmm... It was not I had assumed. I was thinking this blinking is probably caused by one of the following
* Imcompatible use_sim_time setting between perception nodes and rviz. (But it looks use_sim_time in rviz is correctly true...)
* Too many /clock publisher (If some node publishes different clock, it happens)"
Bounding boxes flickering,D_kwDOAnasMc4AP69q,2022-06-20T16:18:50Z,bariskapaligoz,5,Answered,DC_kwDOAnasMc4ALcY6,mertyavuz41,"@miursh, could you examine launch file and rosbag? If everything is fine on your computer/environment, we can be sure that problem caused from our side. 
By the way, same problem observed on official rosbag replay simulation(https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/rosbag-replay-simulation/), default instruction command include -r 0.2, I think that to run in real time it must be -r 1.0"
Bounding boxes flickering,D_kwDOAnasMc4AP69q,2022-06-20T16:18:50Z,bariskapaligoz,5,Answered,DC_kwDOAnasMc4ALeJL,miursh,"Right, as you said, to run simulation in real time, the command should be `-r 1.0`.
I tried your rosbag and launcher, it seems working, a bit heavy though.
![perception-2022-06-23_13 06 13](https://user-images.githubusercontent.com/37187849/175207102-6bb6240a-63c5-4c09-960f-f7032d1f0599.gif)

"
Bounding boxes flickering,D_kwDOAnasMc4AP69q,2022-06-20T16:18:50Z,bariskapaligoz,5,Answered,DC_kwDOAnasMc4ALdTG,bariskapaligoz,"We did a retest today with some changes. 

First, we changed the `use_pointcloud_map` parameter to false. 

After than we changed ` input/obstacle_segmentation/pointcloud` parameter to ` /perception/obstacle_segmentation/single_frame/pointcloud_raw` for ignore ground_segmentation node.

Because when we examined the topics, we saw that these nodes were has slow outputs.

The changes had an impact on the outcome. Video and launch files link for you to review the result: https://netorgft4229778-my.sharepoint.com/:f:/g/personal/mert_adastec_com/EijpXDAnLolKohjiNwonk2kBoRp9hp0vBUuBjjUNkyKqLw?e=FbATBo"
Bounding boxes flickering,D_kwDOAnasMc4AP69q,2022-06-20T16:18:50Z,bariskapaligoz,5,Answered,DC_kwDOAnasMc4AMeaP,bariskapaligoz,"We executed autoware perception test's with belowing commands


Commands:

ros2 bag play adastec_autoware_universe_test –clock

ros2 launch logging_simulator.launch.xml map_path:=$HOME/vector vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit mode:=lidar


Test enviroment link: 

https://netorgft4229778-my.sharepoint.com/:f:/g/personal/mert_adastec_com/EijpXDAnLolKohjiNwonk2kBoRp9hp0vBUuBjjUNkyKqLw?e=DuDcru"
Bounding boxes flickering,D_kwDOAnasMc4AP69q,2022-06-20T16:18:50Z,bariskapaligoz,5,Answered,DC_kwDOAnasMc4AMkRV,miursh,"Does it working? or having some trouble?
I'm sorry I couldn't access to your link. Could you change the permission?"
Bounding boxes flickering,D_kwDOAnasMc4AP69q,2022-06-20T16:18:50Z,bariskapaligoz,5,Answered,DC_kwDOAnasMc4AMkbE,bariskapaligoz,"I updated environment link, you can try again to access."
Bounding boxes flickering,D_kwDOAnasMc4AP69q,2022-06-20T16:18:50Z,bariskapaligoz,5,Answered,DC_kwDOAnasMc4ASBzh,wangxianggang1997,"> 我用激光雷达原始数据进行了感知测试。跟踪和检测结果在 rviz 上显示时不稳定。边界框不断闪烁。在 autoware sample-rosbag 上也出现了同样的情况。
> 
> 使用 autoware sample-rosbag 进行感知测试的结果视频链接：[https ://netorgft4229778-my.sharepoint.com/:i:/g/personal/mert_adastec_com/EWEVAFHrTGNHgNebYvhFcFkB5S3NcI6WcSNCo-CyPojSDw?e=RdKJ3p](https://netorgft4229778-my.sharepoint.com/:i:/g/personal/mert_adastec_com/EWEVAFHrTGNHgNebYvhFcFkB5S3NcI6WcSNCo-CyPojSDw?e=RdKJ3p)
> 
> 我的 rosbag 的结果视频链接：[https ://netorgft4229778-my.sharepoint.com/:i:/g/personal/mert_adastec_com/ETQ8b5_F-vdLn_jmzhPOqpAB_5MCZod8oIzPSqV-1-deWA?e=RoNDtR](https://netorgft4229778-my.sharepoint.com/:i:/g/personal/mert_adastec_com/ETQ8b5_F-vdLn_jmzhPOqpAB_5MCZod8oIzPSqV-1-deWA?e=RoNDtR)
> 
> 测试环境链接：[https ://netorgft4229778-my.sharepoint.com/:f:/g/personal/mert_adastec_com/En1QIemNJjlHtuocIpeWIzkBpIdv-cUcOU_E46ZIPyOKdw?e=FdHP6i](https://netorgft4229778-my.sharepoint.com/:f:/g/personal/mert_adastec_com/En1QIemNJjlHtuocIpeWIzkBpIdv-cUcOU_E46ZIPyOKdw?e=FdHP6i)
> 
> 遇到这种情况怎么办？我应该打开一个问题吗？

Hello, can you answer some questions for me? Thank you very much if you can.
I want to know what topics need to be recorded in the rostag package if you use your own rosbag to test only the awareness module. According to the official instructions, I recorded the point cloud topic of lidar and remapped it to/sensing/lidar/concatenated/pointcloud, and then set the launch parameter of other modules to false.
![Screenshot from 2023-01-19 17-51-14](https://user-images.githubusercontent.com/80671417/213411373-2943e935-3fbe-4293-b047-b8cde8a62fc4.png)
when I use my own rosbag which has the /lidar_front/points_raw topic and logging_simulator.launch.xml to test only the perception moudle. it occurs as follows
![Screenshot from 2023-01-17 04-54-52](https://user-images.githubusercontent.com/80671417/213411552-f687447a-5b38-46f3-acf0-53649f60121b.png)
I think the frame id may has some thing wrong because /lidar_front/points_raw's frame id is lidar_front, then I open two new terminal run the ros2 run tf2_ros static_transform_publisher 0 0 0 0 0 0 lidar_front base_link and ros2 run tf2_ros static_transform_publisher 0 0 0 0 0 0 base_link map . Then the rviz show as follws.
![Screenshot from 2023-01-17 04-42-30](https://user-images.githubusercontent.com/80671417/213411705-8cbbb601-d731-4f35-a127-404235fca5dd.png)
Instead of displaying single frame point clouds in sequence, it will pile multiple frame point clouds together, and only the detection results will not output the tracking results. Can someone help me solve it

"
zmqpp built error,D_kwDOAnasMc4AP69r,2022-06-20T18:32:59Z,QZJGeorge,1,Answered,,,
zmqpp built error,D_kwDOAnasMc4AP69r,2022-06-20T18:32:59Z,QZJGeorge,1,Answered,DC_kwDOAnasMc4ALZ7n,kenji-miyake,@QZJGeorge Could you paste your error log? And have you run `rosdep update`?
Autonomy Software WG Meeting 2022/06/28,D_kwDOAnasMc4AP69s,2022-06-21T12:25:45Z,BonoloAWF,0,Unanswered,,,
adding a different map to autoware universe,D_kwDOAnasMc4AP69t,2022-06-21T23:02:24Z,koraykoca,3,Answered,,,
adding a different map to autoware universe,D_kwDOAnasMc4AP69t,2022-06-21T23:02:24Z,koraykoca,3,Answered,DC_kwDOAnasMc4ALb8c,kminoda,"You can find a general description of the vector map for Autoware in [Documentation](https://autowarefoundation.github.io/autoware-documentation/main/how-to-guides/how-to-create-maps-for-autoware/#vector-maps) or [ReadMe](https://github.com/autowarefoundation/autoware.universe/blob/main/map/lanelet2_extension/docs/lanelet2_format_extension.md#local-coordinate-expression).

Among the two files you've shared, `sample-map-cr` seems not compatible with Autoware.

`sample-map-park` seems compatible, but another issue lies in the incompatible coordinate between lanelet2 and pcd file. While the coordinate of pcd is centered around [0, 0], lanelet2 file only includes latlon coordinates. You can refer to [here](https://github.com/RyuYamamoto/autoware.universe/tree/feature/tunnel_patch) for how to provide local coordinates to your lanelet2 file. Modifying pcd coordinate would also be a choice.

It should be something like this:
```
<?xml version=""1.0"" encoding=""UTF-8""?>
<osm generator=""VMB"">
  <MetaInfo format_version=""1"" map_version=""3""/>
  <node id=""1"" lat="""" lon="""">
    <tag k=""mgrs_code"" v=""99XXX000000""/>
    <tag k=""local_x"" v=""2.6262""/>
    <tag k=""local_y"" v=""2.351""/>
    <tag k=""ele"" v=""-0.6315""/>
  </node>
  <node id=""2"" lat="""" lon="""">
    <tag k=""mgrs_code"" v=""99XXX000000""/>
    <tag k=""local_x"" v=""1.5058""/>
    <tag k=""local_y"" v=""2.1833""/>
    <tag k=""ele"" v=""-0.617""/>
  </node>
...
```
Hope this helps.

(I am kind of new to lanelet2, so any additional comments to both of us are welcome!)"
adding a different map to autoware universe,D_kwDOAnasMc4AP69t,2022-06-21T23:02:24Z,koraykoca,3,Answered,DC_kwDOAnasMc4ALcnZ,koraykoca,"thank you for your answer @kminoda. ReadMe file that you shared gave me a good overview.

So I need to add local_x and local_y values into the osm file. Sorry, I couldn't understand how to refer to the repo that you shared for it? Could you elaborate on providing local coordinates to the lanelet2 file? In the repo, I found a [test map](https://github.com/RyuYamamoto/autoware.universe/tree/feature/tunnel_patch/map/map_loader/test/data), it also didn't work. (By the way, I tried [Vector Map Builder](https://tools.tier4.jp/feature/vector_map_builder_ll2/) tool, basically I uploaded the lanelet2 map and then exported the map. It added local_x, local_y coordinates together with mgrs_code values automatically. Now the map has the template which you highlighted, however, it didn't work either.)

How can I modify the coordinate of pcd? I went over [the library ](https://pcl.readthedocs.io/projects/tutorials/en/latest/pcd_file_format.html) doc again, but couldn't find how to do that.  

 "
adding a different map to autoware universe,D_kwDOAnasMc4AP69t,2022-06-21T23:02:24Z,koraykoca,3,Answered,DC_kwDOAnasMc4ALd72,kminoda,"First, may I ask how you created your vector map?

I assume that, in your case, the coordinate in lanelet2 file still isn't compatible with your PCD file coordinate.
One of the easy (and the one that I always do) ways to create a set of compatible PCD and lanelet2 is to use Vector Map Builder with the following procedure:

1. Upload your PCD file
2. Create a lanelet2 file
3. Download the created lanelet2 in .osm format

However, I get an error `Pcd files have invalid SIZE. SIZE should be 4` when uploading your pcd file to VMB (the sample-map-park one) :thinking: ... Give me some time to figure out the solution here."
adding a different map to autoware universe,D_kwDOAnasMc4AP69t,2022-06-21T23:02:24Z,koraykoca,3,Answered,DC_kwDOAnasMc4ALd_e,kminoda,"I finally discovered a way to solve your issue:

1. Make your PCD compatible with VMB  

It seems that the intensity data in your pcd file (sample-map-park) have 1 byte. On the other hand, VMB currently assumes that the intensity is 4 byte. So, one easy solution to fix this is to remove your intensity data from your PCD:
```
#!/usr/bin/env python3
import open3d as o3d
pcd = o3d.io.read_point_cloud(""pointcloud_map.pcd"", format='pcd')
o3d.io.write_point_cloud(""without_intensity.pcd"", pcd)
```

2. Add ""local_x"" and ""local_y"" tag using VMB  

The same one as you tried! (`By the way, I tried Vector Map Builder tool, basically I uploaded the lanelet2 map and then exported the map. It added local_x, local_y coordinates together with mgrs_code values automatically.`)

3. Translate your ""local_x"" and ""local_y"" coordinate of the above-generated vector map

Your PCD is aligned to (0, 0), while the above-generated vector map has coordinate that looks something like (96652.9464, 37746.4134).
In order to align two maps, execute the following command. (Note that the output is still not perfectly aligned, so you need to follow step 4 too)
```
#!/usr/bin/env python3
import xml.etree.ElementTree as ET

path = ""/YOUR_PATH/lanelet2_map.osm""

tree = ET.parse(path)
root = tree.getroot()

center_x = None
center_y = None
for child in root:
    if child.tag == 'node':
        data = child.attrib
        for grandchild in child:
            if grandchild.attrib['k'] == 'local_x':
                if center_x is None:
                    center_x = float(grandchild.attrib['v'])
                grandchild.attrib['v'] = str(float(grandchild.attrib['v']) - center_x)
            if grandchild.attrib['k'] == 'local_y':
                if center_y is None:
                    center_y = float(grandchild.attrib['v'])
                grandchild.attrib['v'] = str(float(grandchild.attrib['v']) - center_y)
tree.write('/YOUR_PATH/output_lanelet2_map.osm')
```

4. Manually align two maps using VMB

Now, upload your pcd map (from 1) and lanelet map (from 3) to VMB. You can manually move your vector map using GUI to align with your pcd map.
![Screenshot from 2022-06-23 10-37-21](https://user-images.githubusercontent.com/44218668/175189703-7ff0d92d-5403-4f90-bccb-14e175b8b89e.png)
"
adding a different map to autoware universe,D_kwDOAnasMc4AP69t,2022-06-21T23:02:24Z,koraykoca,3,Answered,DC_kwDOAnasMc4ALlHj,koraykoca,"Thank you very much for your detailed answer @kminoda. I followed the steps you shared, and I could see the map and point cloud on VMB, as your screenshot. However, I cannot see the lanelet2_map.osm in rviz. The command I am using for it: 

`source ~/autoware/install/setup.bash && ros2 launch autoware_launch planning_simulator.launch.xml map_path:=$HOME/workspace/dfg-car/src/cr2autoware/data/sample-map-cr vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit`

Rviz only shows the point cloud data, lanelet2 map file is missing. Could you see the lanelet2_map.osm data in rviz after these steps? 

I want to ask one more question: we don't have a pcd data for our lanelet2 map (here is [the link ](https://drive.google.com/drive/folders/1z0HPr4csvnNlhjwALbABvbu66-0pu0Qa?usp=sharing) for it). I could load our lanelet2 map in VMB. However, I cannot see it in rviz (same problem as before, but the difference is that I don't have pcd data this time). Can we see/use our lanelet2_map.osm file in rviz without pcd data?"
adding a different map to autoware universe,D_kwDOAnasMc4AP69t,2022-06-21T23:02:24Z,koraykoca,3,Answered,DC_kwDOAnasMc4ALlM9,kminoda,"You are right. In my case, when loading the lanelet2 created with the above procedure, `lanelet2_map_loader` outputs some errors. Apologies for making you confused.
Give me some time to figure out the other way to solve your issue.

> Can we see/use our lanelet2_map.osm file in rviz without pcd data?

I have never tried it, but I think you can do it. Currently, the tf of `viewer` is generated using `map_tf_generator` (see [here](https://github.com/autowarefoundation/autoware.universe/tree/main/map/map_tf_generator)), which uses an approximated center position of pointcloud map. One of the ways to do it is to modify the above package to publish a center coordinate of lanelet2 map as the `viewer` tf."
adding a different map to autoware universe,D_kwDOAnasMc4AP69t,2022-06-21T23:02:24Z,koraykoca,3,Answered,DC_kwDOAnasMc4ALlNH,kminoda,"BTW, would you mind sharing with us how you've created your lanelet2 maps in the first place?"
adding a different map to autoware universe,D_kwDOAnasMc4AP69t,2022-06-21T23:02:24Z,koraykoca,3,Answered,DC_kwDOAnasMc4ALll8,koraykoca,"In my case, it says:
I 0:08:48:291 [map.lanelet2_map_visualization::onMapBin] Map is loaded

however, I cannot see that in rviz. Since I have not the pcd data, I am getting also this warning:
Warning: Invalid frame ID ""viewer"" passed to canTransform argument source_frame - frame does not exist

But I think, this shouldn't affect the lanelet2 map loader. I thought that if we could load the map in VMB, then we could load it also in rviz, but somehow it doesn't work.

Yes, of course. I get the map from [Commonroad website](https://commonroad.in.tum.de/). You can download it from [here](https://commonroad.in.tum.de/scenarios), its name is: PRI_Barceloneta-2_2_T-1 and its number is 104. After I downloaded the map, I have converted it from xml to osm format using proj library. My proj string is: ""+proj=utm +zone=19 +datum=WGS84 +ellps=WGS84"", then I uploaded it to VMB, to get local coordinates and ele tags automatically."
adding a different map to autoware universe,D_kwDOAnasMc4AP69t,2022-06-21T23:02:24Z,koraykoca,3,Answered,DC_kwDOAnasMc4ALpgW,shmpwk,"Without pcd,  curently we cannot launch planning_simulator, which means `sample-map-cr` needs pointcloud.

`sample-map-park` has both osm and pcd, so it should be compatible. But as @.kminoda says, the coordinate seems strange. 

@koraykoca 
Where did you get `sample-map-park`  in Autoware.Auto.? I cannot find it."
adding a different map to autoware universe,D_kwDOAnasMc4AP69t,2022-06-21T23:02:24Z,koraykoca,3,Answered,DC_kwDOAnasMc4ALp1W,koraykoca,"Hi @shmpwk. I downloaded parking_lot osm and pcd data from [Autoware.Auto repository](https://gitlab.com/autowarefoundation/autoware.auto/AutowareAuto/-/tree/master/src/launch/autoware_demos/data). 

"
adding a different map to autoware universe,D_kwDOAnasMc4AP69t,2022-06-21T23:02:24Z,koraykoca,3,Answered,DC_kwDOAnasMc4ALp2L,shmpwk,"@koraykoca 
Thank you for your sharing! 
I also failed to visualize map on rviz using Autoware.Auto data.
Maybe it is obsolete since we don't usually commit it now. (But of course, it should works properly by default.)
If you just try proper map, you can use sample-map-planning data described [here](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/).
It should works fine."
adding a different map to autoware universe,D_kwDOAnasMc4AP69t,2022-06-21T23:02:24Z,koraykoca,3,Answered,DC_kwDOAnasMc4ALp2f,shmpwk,Now I'm trying to find the way to visualize map without pcd as kminoda said.
adding a different map to autoware universe,D_kwDOAnasMc4AP69t,2022-06-21T23:02:24Z,koraykoca,3,Answered,DC_kwDOAnasMc4ALp24,koraykoca,"> Maybe it is obsolete since we don't usually commit it now. (But of course, it should works properly by default.) 

Yes, and we can visualize it on VMB actually, as @kminoda [did it](https://user-images.githubusercontent.com/44218668/175189703-7ff0d92d-5403-4f90-bccb-14e175b8b89e.png).

> If you just try proper map, you can use sample-map-planning data described [here](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/). It should works fine.

I am already working on this map, but would like to upload my own map in the future to test our algorithm. Because then we can test it on the real car."
adding a different map to autoware universe,D_kwDOAnasMc4AP69t,2022-06-21T23:02:24Z,koraykoca,3,Answered,DC_kwDOAnasMc4ALqWh,kminoda,"(Thanks @shmpwk for the answers!)

If running autoware with sample-map-park is not necessary in your project, how about skipping that step and use some other maps (e.g. sample maps from the latest autoware)? Converting maps from Autoware.Auto to Autoware.universe can be a bit tricky.

I am pretty sure you can create your own maps that are compatible with the latest Autoware with the following procedures (without facing the same issue you're having right now 😉):
1. Create a pcd map
2. Upload the pcd map to VMB
3. Create a lanelet map on VMB
"
adding a different map to autoware universe,D_kwDOAnasMc4AP69t,2022-06-21T23:02:24Z,koraykoca,3,Answered,DC_kwDOAnasMc4ALs_n,shmpwk,"@koraykoca 
With [this PR](https://github.com/autowarefoundation/autoware.universe/pull/1216), you can try your custom vector map without pcd map as for `planning_simulator.launch.xml` 
(The PR is currently draft but already works properly.)"
adding a different map to autoware universe,D_kwDOAnasMc4AP69t,2022-06-21T23:02:24Z,koraykoca,3,Answered,DC_kwDOAnasMc4ALtYK,koraykoca,"@shmpwk 
I fetched the PR and tested it on my system. I tried to visualize [this map](https://drive.google.com/drive/folders/1z0HPr4csvnNlhjwALbABvbu66-0pu0Qa?usp=sharing). It's like this on VMB:

![map](https://user-images.githubusercontent.com/20690194/177002000-2a5da02c-80e8-40df-b541-edc917a60469.png)

However, rviz is completely black when I want to use my map. The command I used:
`ros2 launch autoware_launch planning_simulator.launch.xml map_path:=$HOME/workspace/dfg-car/src/cr2autoware/data/sample-map-cr vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit`

I tried the original planning map without pcd data, it worked:

![original_map](https://user-images.githubusercontent.com/20690194/177001947-3849c983-dcab-4285-8296-8aa207f58a30.png)

So it looks like there is a problem with the map itself. [I compared the messages](https://www.diffchecker.com/KJs6KNxa) which are being published to /map/vector_map topic for two maps, one is for the original universe planning map (left) and the other is for my map (right). I am trying to figure out the problem, actually I didn't understand why the values for the two different maps are very similar. 

Could you visualize any other map different from the original planning map? 
"
adding a different map to autoware universe,D_kwDOAnasMc4AP69t,2022-06-21T23:02:24Z,koraykoca,3,Answered,DC_kwDOAnasMc4ALtZG,shmpwk,"@koraykoca 
How about [this map](https://github.com/autowarefoundation/autoware.universe/blob/main/map/map_loader/test/data/test_map.osm)?

1. Execute
```
ros2 launch autoware_launch planning_simulator.launch.xml map_path:=[path to the map folder]  vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit 
```
2. Push Zero botton in Views panel on rviz.

3. Set initial pose and goal pose

![Screenshot from 2022-07-02 22-25-06](https://user-images.githubusercontent.com/42209144/177002816-87e70298-7560-4da8-aa08-fc9d176f7a49.png)


"
adding a different map to autoware universe,D_kwDOAnasMc4AP69t,2022-06-21T23:02:24Z,koraykoca,3,Answered,DC_kwDOAnasMc4ALtZX,koraykoca,"@shmpwk 
yes, this works for me as well. "
adding a different map to autoware universe,D_kwDOAnasMc4AP69t,2022-06-21T23:02:24Z,koraykoca,3,Answered,DC_kwDOAnasMc4ALtZj,shmpwk,"@koraykoca 
Is there any error messages on the console with your custom map?
Also, when pushing Zero botton in Views panel on rviz, what can you see? A car model or nothing appear?
"
adding a different map to autoware universe,D_kwDOAnasMc4AP69t,2022-06-21T23:02:24Z,koraykoca,3,Answered,DC_kwDOAnasMc4ALtaI,koraykoca,"@shmpwk 
nothing appear, completely black. On the swri console, I am only seeing error messages related to pcd map:

```
E 0:01:16:206 [map.map_hash_generator::generate_pcd_file_hash] [/home/koray/workspace/dfg-car/src/cr2autoware/data/sample-map-cr/pointcloud_map.pcd] is neither file nor directory
```

```
E 0:01:17:454 [map.pointcloud_map_loader::PointCloudMapLoaderNode] invalid path: /home/koray/workspace/dfg-car/src/cr2autoware/data/sample-map-cr/pointcloud_map.pcd
E 0:01:17:455 [map.pointcloud_map_loader::loadPCDFiles] PCD load failed: /home/koray/workspace/dfg-car/src/cr2autoware/data/sample-map-cr/pointcloud_map.pcd
E 0:01:17:455 [map.pointcloud_map_loader::PointCloudMapLoaderNode] No PCD was loaded: pcd_paths.size() = 1
```
```
E 0:01:16:498 [system.system_monitor.hdd_monitor::getDeviceFromMountPoint] Failed to execute findmnt. /dev/sda3
```"
adding a different map to autoware universe,D_kwDOAnasMc4AP69t,2022-06-21T23:02:24Z,koraykoca,3,Answered,DC_kwDOAnasMc4ALtaQ,shmpwk,"@koraykoca 
Thank you, seems these error are expected, not the cause of your problem :thinking: Strange......"
adding a different map to autoware universe,D_kwDOAnasMc4AP69t,2022-06-21T23:02:24Z,koraykoca,3,Answered,DC_kwDOAnasMc4ALtan,koraykoca,"exactly. As related info messages, I am seeing:

`I 0:01:16:462 [map.lanelet2_map_visualization::onMapBin] Map is loaded`
`I 0:01:17:733 [map.vector_map_tf_generator::onVectorMap] broadcast static tf. map_frame:map, viewer_frame:viewer, x:60068.5, y:41552.9, z:0`

Everything looks normal actually :thinking:
"
adding a different map to autoware universe,D_kwDOAnasMc4AP69t,2022-06-21T23:02:24Z,koraykoca,3,Answered,DC_kwDOAnasMc4ALt0E,shmpwk,"@koraykoca 
Thanks to @wep21, 
he found your lanelet lacks `subtype: road` .
Without road, no vector map may appear on Rviz."
adding a different map to autoware universe,D_kwDOAnasMc4AP69t,2022-06-21T23:02:24Z,koraykoca,3,Answered,DC_kwDOAnasMc4ALufw,koraykoca,"@shmpwk @wep21 
right, the problem was missing `subtype: road` tags. I added them manually to every `<relation>` elements, which include `type:""way""`. Thank you, it's working right now!

![test](https://user-images.githubusercontent.com/20690194/177054612-5546c875-2fb8-4ac9-95a8-e3f937811674.png)
"
adding a different map to autoware universe,D_kwDOAnasMc4AP69t,2022-06-21T23:02:24Z,koraykoca,3,Answered,DC_kwDOAnasMc4ALuoz,shmpwk,"@koraykoca 
Excellent!!
One thing @wep21 noticed is that your lanelet don't match the map exactly, which might cause a problem when applying to real world driving. 
![image](https://user-images.githubusercontent.com/42209144/177062833-bd71fe47-21e1-479d-b4bb-11b6f3171453.png)

"
2022-06-22 Simulation Working Group Meeting,D_kwDOAnasMc4AP69u,2022-06-22T04:25:53Z,sglee-morai,0,Unanswered,,,
Open AD Kit WG Meeting 2022/06/23,D_kwDOAnasMc4AP69v,2022-06-22T07:44:25Z,Unknown,1,Answered,,,
Open AD Kit WG Meeting 2022/06/23,D_kwDOAnasMc4AP69v,2022-06-22T07:44:25Z,Unknown,1,Answered,DC_kwDOAnasMc4ALdY1,xmfcx,"I'm working on creation of the containers. And regarding to the demo for MIH, here are my questions/concerns:

# In the demo will we use EWAOL or Ubuntu 20.04 as the host operating system?

If we'll use EWAOL, then https://gitlab.com/autowarefoundation/autoware_reference_design/-/blob/main/docs/Appendix/Open-AD-Kit-Start-Guide/index.md#table-of-contents all of these instructions should be followed and modified for the containers of the Autoware Universe.

And I am assuming you'd need specific hardware to perform these actions.

# EWAOL and X.Org/X server? monitor support

**Reference:** https://gitlab.com/autowarefoundation/autoware_reference_design/-/blob/main/docs/Appendix/Open-AD-Kit-Start-Guide/run-autoware.md#run-visialization-and-scenario-simulator-on-your-host-machine

Here the Autoware.Auto is running on the AVA platform or PCU with EWAOL.

But the visualizations are running on the host machine (which I am assuming is a x86-64 architecture. Through the network with DDS I think.

Why was this done this way? Is it possible to have monitor support on EWAOL?

I might have misunderstood the instructions steps too, if so I'm sorry.

# Summary

To me, [the entire process](https://gitlab.com/autowarefoundation/autoware_reference_design/-/blob/main/docs/Appendix/Open-AD-Kit-Start-Guide/index.md#table-of-contents) is very long and out of my expertise (I don't have experience with yocto or BSPs).

Also I don't have access to the specific hardware too, it's so hard if not impossible to develop things like these remotely.

So for now, what I can do is, to show that the containers work on the Ubuntu 20.04 OS.

cc: @LalithVipulananthan @kasperornmeck @kenji-miyake @cjohn66 @HamburgDave @mitsudome-r"
Open AD Kit WG Meeting 2022/06/23,D_kwDOAnasMc4AP69v,2022-06-22T07:44:25Z,Unknown,1,Answered,DC_kwDOAnasMc4AMA4j,kaspermeck-arm,"@xmfcx 
It's possible to add X to enable display output to EWAOL, making it a self-contained demo, i.e., removing the need for a separate computer for the visualization. See https://github.com/m5p3nc3r/meta-ewaol-machine/blob/main/kas/machines/ewaol-avadp-xfce.yml. We have an internal repo which is ported to v1.0 of EWAOL.

This is work which we in Arm can do though, as soon as we have the containers and corresponding launch files. Let's connect more on this!
"
obstacle_avoidance_planner's influence on Autowares operation on lanelet2 map,D_kwDOAnasMc4AP69w,2022-06-22T09:59:44Z,kielczykowski-rai,1,Answered,,,
obstacle_avoidance_planner's influence on Autowares operation on lanelet2 map,D_kwDOAnasMc4AP69w,2022-06-22T09:59:44Z,kielczykowski-rai,1,Answered,DC_kwDOAnasMc4ALeAd,maxime-clem,"> 1. Will the is_stopping_if_outside_drivable_area parameter set to False have any breaking influence on the operation on the rest of the system?

This parameter does not impact the rest of the system. However setting `is_stopping_if_outside_drivable_area` to `False` is **unsafe and should not be done on a real vehicle**.

> 2. Couldn't the footprint checker ([isOutsideDrivableAreaFromRectangleFootprint](https://github.com/autowarefoundation/autoware.universe/blob/86c3fade002f2a18c2c9c113dd828d8f6148cc5c/planning/obstacle_avoidance_planner/src/cv_utils.cpp#L409)) be a little less strict, [...]

It is possible. For example an extra parameter for a `distance_buffer` could be added and a negative value would lead to the behavior you describe. However **this is also unsafe**.

One way to stay safe in this situation is to guarantee that obstacle detection can accurately detect objects that may collide with the overhang of the car (e.g., a high curb along the lane) but I do not think this is currently the case. This would also require a very high precision in the perception and control which may be difficult to achieve.

In my opinion, the better and safer solution to this problem is to have a planner that can generate a trajectory that do not go outside of the drivable area. Maybe [the motion planner of OpenPlanner](https://autoware.readthedocs.io/en/feature-documentation_rtd/DevelopersGuide/PackagesAPI/motion/op_local_planner.html) could solve this case. It is currently [being ported to universe](https://github.com/autowarefoundation/autoware/discussions/386)."
Autoware Architecture WG Meeting (External API) 2022/06/22,D_kwDOAnasMc4AP69x,2022-06-22T13:39:05Z,mitsudome-r,0,Unanswered,,,
Error in building simulator,D_kwDOAnasMc4AP69y,2022-06-22T14:42:38Z,MichaelShen97,1,Answered,,,
Error in building simulator,D_kwDOAnasMc4AP69y,2022-06-22T14:42:38Z,MichaelShen97,1,Answered,DC_kwDOAnasMc4ALdKe,kenji-miyake,@MichaelShen97 I think they are just warnings and actually there is no error.
Cannot Run the Planning Simulation,D_kwDOAnasMc4AP69z,2022-06-24T10:13:06Z,brian841102,1,Answered,,,
Cannot Run the Planning Simulation,D_kwDOAnasMc4AP69z,2022-06-24T10:13:06Z,brian841102,1,Answered,DC_kwDOAnasMc4ALgfv,maxime-clem,Please try enabling multicast as described here: https://autowarefoundation.github.io/autoware-documentation/main/support/troubleshooting/#multicast-is-disabled
Cannot Run the Planning Simulation,D_kwDOAnasMc4AP69z,2022-06-24T10:13:06Z,brian841102,1,Answered,DC_kwDOAnasMc4ALhsc,brian841102,"Thanks a lot~ 
I follow the official guide, add `export ROS_LOCALHOST_ONLY=1` to .bashrc. and cause this error.
Seems like this step is unnecessary.
"
Cannot Run the Planning Simulation,D_kwDOAnasMc4AP69z,2022-06-24T10:13:06Z,brian841102,1,Answered,DC_kwDOAnasMc4ALhw7,maxime-clem,You mean `ROS_LOCALHOST_ONLY=1` is unnecessary ? I agree it is not necessary for advanced user but people that are new to ROS2 will usually only want to run nodes on the localhost. This option then prevents issues if multiple people are using ROS2 on the same network.
Cannot Run the Planning Simulation,D_kwDOAnasMc4AP69z,2022-06-24T10:13:06Z,brian841102,1,Answered,DC_kwDOAnasMc4ALiHx,brian841102,"I am using autoware on only one local machine so I thought `export ROS_LOCALHOST_ONLY=1` is good at first. 
But this will cause above problem so I comment it.
I am still using ` ROS_DOMAIN_ID = 1` to avoid conflict with other ROS2 hosts."
Planning Simulation Stuck in WAITING_FOR_ROUTE state,D_kwDOAnasMc4AP690,2022-06-25T09:06:55Z,brian841102,2,Answered,,,
Planning Simulation Stuck in WAITING_FOR_ROUTE state,D_kwDOAnasMc4AP690,2022-06-25T09:06:55Z,brian841102,2,Answered,DC_kwDOAnasMc4ALhxX,maxime-clem,"It looks like an issue with the system monitor. I think you can bypass it by sending the engage command manually.
```
ros2 topic pub /autoware/engage autoware_auto_vehicle_msgs/msg/Engage '{engage: True}' -1
```
If you share the full log maybe we can find the issue."
Planning Simulation Stuck in WAITING_FOR_ROUTE state,D_kwDOAnasMc4AP690,2022-06-25T09:06:55Z,brian841102,2,Answered,DC_kwDOAnasMc4ALh07,brian841102,"Thank you for reply.
Can you show me how to export the log?
Should I use rqt or other tools?
I know some log will save in /.ros/log, is that what you mean?"
Planning Simulation Stuck in WAITING_FOR_ROUTE state,D_kwDOAnasMc4AP690,2022-06-25T09:06:55Z,brian841102,2,Answered,DC_kwDOAnasMc4ALh3f,maxime-clem,"Yes the one in `/.ros/log` should contain the full console output.
There could be a useful error message thrown during launch."
Planning Simulation Stuck in WAITING_FOR_ROUTE state,D_kwDOAnasMc4AP690,2022-06-25T09:06:55Z,brian841102,2,Answered,DC_kwDOAnasMc4ALh5x,brian841102,"@maxime-clem **Your advice actually works !!!**
But still curious why the Rviz plugin fails to start the engage 
And when I press the button to cancel engage, the vehicle do stop 
but when I press again vehicle still can not start. so weird,
The Status showing on the panel is always WAITING_FOR_ROUTE.
Seems like I need to send engage signal all on the terminal.
In order to reproduce the problem. I did the following process
1. `ros2 launch autoware_launch planning_simulator.launch.xml map_path:=$HOME/Downloads/sample-map-planning vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit
`
2. add AutowareStateControl Panel
3. set initial pose & set goal pose
4. Press engage button on the panel

[Here](https://drive.google.com/drive/folders/1okuJqZWsr1Vqsxy2ceywMelYoAjQ6Jgt?usp=sharing) are my log files. I reproduce the problem twice to ensure they cover all possible issues.
One more thing to mention, I echo the topic /autoware/state. It always prints 2 (=WAITING_FOR_ROUTE) even if I send engage signal by terminal command.

"
Planning Simulation Stuck in WAITING_FOR_ROUTE state,D_kwDOAnasMc4AP690,2022-06-25T09:06:55Z,brian841102,2,Answered,DC_kwDOAnasMc4ALh-3,brian841102,"@maxime-clem  I find the problem. Someone commit the code in **ad_service_state_monitor** with little flaw.
He forgets the parameter input/vector_map. I filled it up and the sim works normally now. Thank God !!
![截圖 2022-06-25 22 11 23](https://user-images.githubusercontent.com/30545391/175777589-c91e703f-fcd9-4ba6-8997-047e302e7416.png)

"
Planning Simulation Stuck in WAITING_FOR_ROUTE state,D_kwDOAnasMc4AP690,2022-06-25T09:06:55Z,brian841102,2,Answered,DC_kwDOAnasMc4ALiCv,shmpwk,"@brian841102 
Thank you for fixing this problem by https://github.com/autowarefoundation/autoware.universe/pull/1169.

This problem came from my commit. 
https://github.com/autowarefoundation/autoware.universe/pull/1153/files#diff-f092ba8cc68e325209a916a7446c37e3efb13e03313408d4461d05287542367eR462-R464

I'm sorry to waste your time and greatly appreciate your contribution.
"
2022-06-28 ODD working group weekly meeting (99),D_kwDOAnasMc4AP7Yo,2022-06-27T08:16:07Z,Igata-ctrl,0,Unanswered,,,
point cloud not visible,D_kwDOAnasMc4AP7if,2022-06-27T12:48:06Z,QipiaoZhou,1,Answered,,,
point cloud not visible,D_kwDOAnasMc4AP7if,2022-06-27T12:48:06Z,QipiaoZhou,1,Answered,DC_kwDOAnasMc4AL2aI,aohsato,"@QipiaoZhou Sorry, your issue seems to be unclear. Would you please describe your environment and some commands to reproduce your problem?"
point cloud not visible,D_kwDOAnasMc4AP7if,2022-06-27T12:48:06Z,QipiaoZhou,1,Answered,DC_kwDOAnasMc4AOFCe,takayuki5168,"@QipiaoZhou Hi, how's it going. Can we close this discussion?"
Open AD Kit WG Meeting 2022/06/30,D_kwDOAnasMc4AP8B1,2022-06-28T07:11:50Z,Unknown,0,Unanswered,,,
Integration of different Neural Network Optimizer,D_kwDOAnasMc4AP8IG,2022-06-28T09:47:06Z,jihwankimqd,1,Answered,,,
Integration of different Neural Network Optimizer,D_kwDOAnasMc4AP8IG,2022-06-28T09:47:06Z,jihwankimqd,1,Answered,DC_kwDOAnasMc4ALmiv,mitsudome-r,"We did have similar discussions in the past https://discourse.ros.org/t/unified-ml-inference-in-autoware-a-proposal/14058.

From the discussion, we decided to use TVM so we are thinking of converting TensorRT implementation into TVM implementation when we move Universe packages into Core as a stable release, but we don't have enough resources to do that so they are currently remaining as TensorRT."
Integration of different Neural Network Optimizer,D_kwDOAnasMc4AP8IG,2022-06-28T09:47:06Z,jihwankimqd,1,Answered,DC_kwDOAnasMc4ALnRJ,jihwankimqd,"Thanks for the prompt reply. After reading the thread you've provided and following the relevant links to a related TVM repo, it seems like the last commit was 2 years ago. I understand that TVM implementation is being considered, but I was wondering if there were documentations to help external/third-parties implement the function using their own preferred framework. For example, I have working experience with OpenVINO and just need a documentation on the formats/standards for designing the module and replacing it with the existing module in Universe."
Autonomy Software WG Meeting 2022/07/05,D_kwDOAnasMc4AP8ad,2022-06-28T17:30:51Z,BonoloAWF,4,Answered,,,
Autonomy Software WG Meeting 2022/07/05,D_kwDOAnasMc4AP8ad,2022-06-28T17:30:51Z,BonoloAWF,4,Answered,DC_kwDOAnasMc4ALoWB,esteve,"@xmfcx I did the migration to `point_cloud_msg_wrapper` in Autoware.Auto, I'd be happy to do it again for Autoware Core/Universe. Is there a ticket for the `point_cloud_msg_wrapper` migration?"
Autonomy Software WG Meeting 2022/07/05,D_kwDOAnasMc4AP8ad,2022-06-28T17:30:51Z,BonoloAWF,4,Answered,DC_kwDOAnasMc4ALwjp,mitsudome-r,"@kaancolak 
> to create a Discussion about adding a camera rectification module to Autoware

Regarding this action item, I believe there is already a http://wiki.ros.org/image_proc?distro=noetic (rectify nodelet) in ROS 2.
Could you explain in more detail about this action item?"
Autonomy Software WG Meeting 2022/07/05,D_kwDOAnasMc4AP8ad,2022-06-28T17:30:51Z,BonoloAWF,4,Answered,DC_kwDOAnasMc4AMSzO,Zeysthingz,@mitsudome-r  When we run camera sensors with Autoware Universe pipeline we took compressed images and after that we convert to uncompressed images.  Also we rectify images to avoid distortions in the image. Does  Autoware Universe do the same process or uses raw data  ? 
Autonomy Software WG Meeting 2022/07/05,D_kwDOAnasMc4AP8ad,2022-06-28T17:30:51Z,BonoloAWF,4,Answered,DC_kwDOAnasMc4ALwv8,mitsudome-r,@brian841102 Could you post the presentation that you shared today?
Autonomy Software WG Meeting 2022/07/05,D_kwDOAnasMc4AP8ad,2022-06-28T17:30:51Z,BonoloAWF,4,Answered,DC_kwDOAnasMc4ALw1_,armaganarsln,Here is the current  supported hardware list that i shared in the meeting  chat: https://docs.google.com/document/d/1Q2hRkJ1y_smtogIYb0sQdOyot-01UpZV3DlGyGU1-Gs/edit
Dynamic map loading functionality in Autoware for large pointcloud maps,D_kwDOAnasMc4AP8uT,2022-06-29T06:59:29Z,kminoda,1,Answered,,,
Dynamic map loading functionality in Autoware for large pointcloud maps,D_kwDOAnasMc4AP8uT,2022-06-29T06:59:29Z,kminoda,1,Answered,DC_kwDOAnasMc4ALpZB,VRichardJP,"Do you plan to add diagnostic messages to monitor map loading state?
In particular, I think it is important to be able to detect when a chunk has failed to be loaded, or when the ego vehicle is getting too close from the current chunk boundaries."
Dynamic map loading functionality in Autoware for large pointcloud maps,D_kwDOAnasMc4AP8uT,2022-06-29T06:59:29Z,kminoda,1,Answered,DC_kwDOAnasMc4ALpzN,kminoda,"Thank you! I agree with your idea. 
We have not implemented such diagnostics yet, but yes, we will do that before finalizing the PR."
Dynamic map loading functionality in Autoware for large pointcloud maps,D_kwDOAnasMc4AP8uT,2022-06-29T06:59:29Z,kminoda,1,Answered,DC_kwDOAnasMc4AUcrm,sayondeep,"@kminoda Can you please help, how to get this vizualization in autoware?
I am able to load the split .pcd files into autoware but not able to get this vizualization."
Dynamic map loading functionality in Autoware for large pointcloud maps,D_kwDOAnasMc4AP8uT,2022-06-29T06:59:29Z,kminoda,1,Answered,DC_kwDOAnasMc4AUdcU,kminoda,I will answer your question here: https://github.com/orgs/autowarefoundation/discussions/3345
"A vehicle protocol ""hub"" for Autoware",D_kwDOAnasMc4AP82F,2022-06-29T10:28:45Z,Sharrrrk,2,Answered,,,
"A vehicle protocol ""hub"" for Autoware",D_kwDOAnasMc4AP82F,2022-06-29T10:28:45Z,Sharrrrk,2,Answered,DC_kwDOAnasMc4ALoAj,kenji-miyake,"@Sharrrrk Great idea, it's exactly the concept of Autoware Universe. I feel it's not only for vehicle drivers but also for other Autoware components (Perception/Planning/etc.).

> Provide an open space for users to share their own vehicle dbw drivers

I think it's good to simply start with the `Show and tell` category of GitHub Discussions.
It's already possible to share vehicle drivers by sharing the Git repository there.
If a developer publishes a vehicle driver in any repository, other developers can refer to the repository and integrate it into Autoware like this.
https://github.com/autowarefoundation/autoware/blob/cc441e7e8b3e986263e5c808802f7f8a15ea0b51/autoware.repos#L78

Later, we can consider more efficient ways to share Autoware components."
"A vehicle protocol ""hub"" for Autoware",D_kwDOAnasMc4AP82F,2022-06-29T10:28:45Z,Sharrrrk,2,Answered,DC_kwDOAnasMc4ALoAn,kenji-miyake,"> The driver contains a unified protocol definition layer, e.g. through reading yaml file, this layer will transfer the defined CAN signal to data

@Sharrrrk Would it be possible for you to tell me a bit more details about this layer?"
Tier IV Map Builder question,D_kwDOAnasMc4AP9cN,2022-06-30T07:44:36Z,JordanCrawfordx,2,Answered,,,
Tier IV Map Builder question,D_kwDOAnasMc4AP9cN,2022-06-30T07:44:36Z,JordanCrawfordx,2,Answered,DC_kwDOAnasMc4ALpqz,shmpwk,"Hello,
You can change the lanelet width using [vector_map_builder](https://tools.tier4.jp/feature/vector_map_builder_ll2/).
Reference is [here](https://autowarefoundation.github.io/autoware-documentation/main/how-to-guides/how-to-create-maps-for-autoware/#creating-a-vector-map)."
Tier IV Map Builder question,D_kwDOAnasMc4AP9cN,2022-06-30T07:44:36Z,JordanCrawfordx,2,Answered,DC_kwDOAnasMc4ALqMj,mitsudome-r,"@JordanCrawfordx 
Just adding to @shmpwk 's comment, you should be able to define the default lane width under Map tab on the right panel.
![image](https://user-images.githubusercontent.com/43976834/176687378-94dc9da7-74b9-4f58-9dd0-edb764c96258.png)

Also FYI, You can find user guide of the tool from the ""Help"" in the top bar for other usage.
![image](https://user-images.githubusercontent.com/43976834/176687902-de638272-0397-433c-ad19-8278a49c9fee.png)
"
Tier IV Map Builder question,D_kwDOAnasMc4AP9cN,2022-06-30T07:44:36Z,JordanCrawfordx,2,Answered,DC_kwDOAnasMc4ALqOz,JordanCrawfordx,Thanks! :) 
Driver for ARS408 Radar,D_kwDOAnasMc4AP9vw,2022-06-30T16:42:33Z,deansaco,2,Answered,,,
Driver for ARS408 Radar,D_kwDOAnasMc4AP9vw,2022-06-30T16:42:33Z,deansaco,2,Answered,DC_kwDOAnasMc4AL112,aohsato,"@deansaco Hi!
We recently started integrating radar fusion with [ars408_ros](https://gitlab.com/perceptionengine/pe-drivers/ars408_ros) driver developed by @amc-nu .
There are some links about RADAR integration so please join our discussion if you like.
- https://github.com/autowarefoundation/autoware/discussions/2531
- https://github.com/autowarefoundation/autoware/discussions/2532
- https://github.com/autowarefoundation/autoware.universe/pull/1016
"
Driver for ARS408 Radar,D_kwDOAnasMc4AP9vw,2022-06-30T16:42:33Z,deansaco,2,Answered,DC_kwDOAnasMc4AMNZl,deansaco,What version of ROS and what ubuntu OS is required for this driver?
Driver for ARS408 Radar,D_kwDOAnasMc4AP9vw,2022-06-30T16:42:33Z,deansaco,2,Answered,DC_kwDOAnasMc4AMbUU,aohsato,"@deansaco [ars408_ros](https://gitlab.com/perceptionengine/pe-drivers/ars408_ros) driver is implemented on both ROS1/ROS2, so please switch its branch to suit your case.
We mainly use Ubuntu 20.04 + ROS2 Galactic for autoware development, please refer [source installation](https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/source-installation/)."
Driver for ARS408 Radar,D_kwDOAnasMc4AP9vw,2022-06-30T16:42:33Z,deansaco,2,Answered,DC_kwDOAnasMc4AOFAc,takayuki5168,"@deansaco Hi, how's it going?
We've tested ars408 with adaptive cruise control on the physical vehicle. Let us know if you have further questions."
Driver for ARS408 Radar,D_kwDOAnasMc4AP9vw,2022-06-30T16:42:33Z,deansaco,2,Answered,DC_kwDOAnasMc4AOIYM,deansaco,Hi @takayuki5168! Where can I find the documentation and code for the work done on the ars408? I would love to read to get up to date with the working system.
Driver for ARS408 Radar,D_kwDOAnasMc4AP9vw,2022-06-30T16:42:33Z,deansaco,2,Answered,DC_kwDOAnasMc4AOLRR,takayuki5168,@scepter914 Could you share what @deansaco wants?
Driver for ARS408 Radar,D_kwDOAnasMc4AP9vw,2022-06-30T16:42:33Z,deansaco,2,Answered,DC_kwDOAnasMc4AOOrp,scepter914,"> Where can I find the documentation and code for the work done on the ars408? I would love to read to get up to date with the working system.

Hi @deansaco .
The repository of ARS408 driver used in TIER IV is <https://github.com/tier4/ars408_driver>, forked from <https://gitlab.com/perceptionengine/pe-drivers/ars408_ros> as referenced above.
There are few documents in the repository, but the code can help you."
Driver for ARS408 Radar,D_kwDOAnasMc4AP9vw,2022-06-30T16:42:33Z,deansaco,2,Answered,DC_kwDOAnasMc4Aa-gR,scepter914,"I think this discussion is finished and no response for a particularly long time, so I close this discussion."
[Autoware GUI] A potential RViz replacement - Foxglove Studio,D_kwDOAnasMc4AP_EZ,2022-07-03T13:31:18Z,Unknown,3,Answered,,,
[Autoware GUI] A potential RViz replacement - Foxglove Studio,D_kwDOAnasMc4AP_EZ,2022-07-03T13:31:18Z,Unknown,3,Answered,DC_kwDOAnasMc4AL4oO,CagriCatik," I've had a little look at the tool and I have to honestly say that the whole thing looks really fancy and user friendly compared to RVIZ. Unfortunately I don't have any experience in typescript or electron, but that doesn't mean I can't learn the whole thing. Will there be a roadmap in the near future e.g. towards defining the requirement?"
[Autoware GUI] A potential RViz replacement - Foxglove Studio,D_kwDOAnasMc4AP_EZ,2022-07-03T13:31:18Z,Unknown,3,Answered,DC_kwDOAnasMc4AL6AA,Unknown,"> Will there be a roadmap in the near future e.g. towards defining the requirement?

That is an excellent question! So far the rough plan is to gather some basic requirements from the Autoware community, approach Foxglove and discuss a potential collaboration and then hash out the finer details once that discussion has begun. 

So, we don't need any super detailed at the moment, but just an outline of things that we might like to see that Foxglove Studio does not currently provide. "
[Autoware GUI] A potential RViz replacement - Foxglove Studio,D_kwDOAnasMc4AP_EZ,2022-07-03T13:31:18Z,Unknown,3,Answered,DC_kwDOAnasMc4AL6B8,Unknown,"To throw some thoughts out there:

- Integrate Foxglove Studio with the Autoware Planning Simulator
  - Add the Autoware-specific RViz in a separate panel (""2D Dummy Pedestrian"", ""2D Dummy Car"", ""Delete All Objects"", ""2D Checkpoint Pose)
  - Enhance the dummy object functionality, such that the type of dummy object can be specified
  - Enhance the delete dummy objects button, such that a user can specify a single object to be deleted
- Some kind of built-in Autoware panel (perhaps more than one) that covers the Autoware State and Traffic Light Publish panels.

Autoware State panel
![image](https://user-images.githubusercontent.com/63835446/178271099-c575c854-59f3-4ed8-b642-9bfd5a4f0423.png)

Traffic Light Publish panel
![image](https://user-images.githubusercontent.com/63835446/178272135-49aef274-42a7-4393-9c95-2a1887519aa9.png)
"
[Autoware GUI] A potential RViz replacement - Foxglove Studio,D_kwDOAnasMc4AP_EZ,2022-07-03T13:31:18Z,Unknown,3,Answered,DC_kwDOAnasMc4AMbRi,yukkysaito,"I made a visualization tool with OSS game engine called godot.
![image](https://user-images.githubusercontent.com/8327598/181166753-89a589c6-89c0-4c2d-9e36-e4fc95f691ea.png)

https://github.com/yukkysaito/godot_rviz2
https://youtu.be/1z300KHRgzE
https://youtu.be/r8NtqiF3JNg

Good point (Comparison with rviz)
- It can be operated with GUI
- easy to make visualization GUI
- no flickering because it can control visualization layer.
- lightweight

Bad point
- It is not as easy to visualize as Rviz. But, it is not so difficult.

discord link : https://discord.com/channels/953808765935816715/953808766657241121/1001135960416854106"
2022-07-05 ODD working group weekly meeting (100),D_kwDOAnasMc4AP_Rh,2022-07-04T03:57:47Z,Igata-ctrl,0,Unanswered,,,
Autonomy Software WG Meeting 2022/07/12,D_kwDOAnasMc4AQANM,2022-07-05T14:37:16Z,BonoloAWF,4,Answered,,,
Autonomy Software WG Meeting 2022/07/12,D_kwDOAnasMc4AQANM,2022-07-05T14:37:16Z,BonoloAWF,4,Answered,DC_kwDOAnasMc4AL5Xk,Sharrrrk,"@BonoloAWF @xmfcx I would give a brief summary of our analysis of the execution delay of the AW nodes in the meeting, thank you.
Related issue: [2449](https://github.com/autowarefoundation/autoware/issues/2449)
[Analysis of execution delay of Autoware Nodes.pdf](https://github.com/autowarefoundation/autoware/files/9128996/Analysis.of.execution.delay.of.Autoware.Nodes.pdf)


"
Autonomy Software WG Meeting 2022/07/12,D_kwDOAnasMc4AQANM,2022-07-05T14:37:16Z,BonoloAWF,4,Answered,DC_kwDOAnasMc4AL8Cv,MertClk,Here is the link for this week's updates from Leo Drive bus integration: [Presentation](https://docs.google.com/presentation/d/1Wwk8367afSqwfuNonbMAOYxnJ7D1JYMak761Jpw4nTs/edit?usp=sharing)
Autonomy Software WG Meeting 2022/07/12,D_kwDOAnasMc4AQANM,2022-07-05T14:37:16Z,BonoloAWF,4,Answered,DC_kwDOAnasMc4AL_Fl,mitsudome-r,"Here's the link to TIER IV's simulator:
* Discord announcement: https://discordapp.com/channels/953808765935816715/953901404727148574/994539048645427201
* Simulator binary: https://drive.google.com/file/d/1zdVYFqIy0LHfFOkTC36iFAgh7qXAy6Ih/view"
Autonomy Software WG Meeting 2022/07/12,D_kwDOAnasMc4AQANM,2022-07-05T14:37:16Z,BonoloAWF,4,Answered,DC_kwDOAnasMc4AL_Lu,maxime-clem,"> [Bi-monthly Milestones](https://github.com/autowarefoundation/autoware.universe/milestone) will be used to track weekly scheduling and progress of tasks

A ""s"" is missing at the end of the linked URL.
Proper link: [Bi-monthly Milestones](https://github.com/autowarefoundation/autoware.universe/milestones)"
Autonomy Software WG Meeting 2022/07/12,D_kwDOAnasMc4AQANM,2022-07-05T14:37:16Z,BonoloAWF,4,Answered,DC_kwDOAnasMc4AMAUp,BonoloAWF,"Good catch, thanks! It's now fixed. "
Open AD Kit WG Meeting 2022/07/07,D_kwDOAnasMc4AQAOi,2022-07-05T15:11:23Z,Unknown,0,Unanswered,,,
2022-07-06 Simulation Working Group Meeting,D_kwDOAnasMc4AQAvW,2022-07-06T11:25:36Z,sglee-morai,0,Unanswered,,,
Autoware can not generate global path,D_kwDOAnasMc4AQAyA,2022-07-06T12:53:17Z,tecena,0,Unanswered,,,
Adding the supported hardware list to Autoware documentation,D_kwDOAnasMc4AQBK7,2022-07-07T02:37:35Z,Unknown,1,Answered,,,
Adding the supported hardware list to Autoware documentation,D_kwDOAnasMc4AQBK7,2022-07-07T02:37:35Z,Unknown,1,Answered,DC_kwDOAnasMc4AL7_E,Unknown,"@mitsudome-r Have you had any time to consider this proposal and the best place for the supported hardware list? @kenji-miyake If you have any views/feedback on this, then please do let us know!"
Adding the supported hardware list to Autoware documentation,D_kwDOAnasMc4AQBK7,2022-07-07T02:37:35Z,Unknown,1,Answered,DC_kwDOAnasMc4AL9SP,kenji-miyake,"@LalithVipulananthan What did you mean by the word `the supported hardware`? The things like reference configuration? If so, it should be in the Open AD Kit documentation.

If you mean general requirements, it can be in the Autoware documentation, but I believe it's already written, so I guess you didn't mean them.
https://autowarefoundation.github.io/autoware-documentation/main/installation/#minimum-hardware-requirements

> Currently, Autoware's supported hardware list exists as a Google document in a shared folder.

Would it be possible for you to summarize the contents and write them in this discussion page?"
Adding the supported hardware list to Autoware documentation,D_kwDOAnasMc4AQBK7,2022-07-07T02:37:35Z,Unknown,1,Answered,DC_kwDOAnasMc4AL-80,mitsudome-r,"@kenji-miyake I think he is talking about this list: https://docs.google.com/document/d/1Q2hRkJ1y_smtogIYb0sQdOyot-01UpZV3DlGyGU1-Gs/edit. It was originally created in the hardware WG and meant to collect sensors/devices + it's drivers that can be used with Autoware, whereas reference configuration would be a recommended combination of the hardware that is listed here.
(@armaganarsln correct me if I'm wrong)

@LalithVipulananthan Maybe we can create a supported hardware page and reference configuration page under [system configuration](https://autowarefoundation.github.io/open-ad-kit-docs/latest/system-configuration/) tab in the Open AD Kit documentation."
Adding the supported hardware list to Autoware documentation,D_kwDOAnasMc4AQBK7,2022-07-07T02:37:35Z,Unknown,1,Answered,DC_kwDOAnasMc4AMCgT,armaganarsln,@kenji-miyake if you don't think it's unrelated or out-of-scope we will be happy if we could combine all documentation including open AD Kit and supported hardware in the autoware main documentation page. as 2 new tabs after the support page. If not i will add under open ad kit system configuration as @mitsudome-r suggested.
Adding the supported hardware list to Autoware documentation,D_kwDOAnasMc4AQBK7,2022-07-07T02:37:35Z,Unknown,1,Answered,DC_kwDOAnasMc4AMD00,kenji-miyake,"> we will be happy if we could combine all documentation including open AD Kit and supported hardware in the autoware main documentation page

@armaganarsln Thank you for your suggestion! It could be combined in the future, but I personally think it's good to start with linking two documentation sites.
It's because the two sites have different owners."
ndt_map and viz_ndt_map topic empty 'frame_id',D_kwDOAnasMc4AQBif,2022-07-07T15:32:15Z,MrOCW,1,Answered,,,
ndt_map and viz_ndt_map topic empty 'frame_id',D_kwDOAnasMc4AQBif,2022-07-07T15:32:15Z,MrOCW,1,Answered,DC_kwDOAnasMc4AL22A,shmpwk,"Yes, like autonomous_lot_parking map, you need `frame_id: map`. 
The way to set frame_id is by hand cording or by LIO-SAM library (but it seems LIO-SAM doesn't have such API.)

(Same issue as https://answers.ros.org/question/403506/unable-to-visualize-own-pcd/)"
2022-07-12 ODD working group weekly meeting (101),D_kwDOAnasMc4AQBwI,2022-07-08T00:28:42Z,Igata-ctrl,0,Unanswered,,,
Adding UTM coordinates to map in Tier IV,D_kwDOAnasMc4AQCNM,2022-07-08T18:03:49Z,JordanCrawfordx,1,Answered,,,
Adding UTM coordinates to map in Tier IV,D_kwDOAnasMc4AQCNM,2022-07-08T18:03:49Z,JordanCrawfordx,1,Answered,DC_kwDOAnasMc4AL3gd,shmpwk,"UTM is supported. Please see [here](https://autowarefoundation.github.io/autoware-documentation/main/how-to-guides/how-to-create-maps-for-autoware/#point-cloud-map-specifications).
> Three global coordinate systems are supported by Autoware, including [Military Grid Reference System (MGRS)](https://en.wikipedia.org/wiki/Military_Grid_Reference_System), [Universal Transverse Mercator (UTM)](https://en.wikipedia.org/wiki/Universal_Transverse_Mercator_coordinate_system), and [Japan Rectangular Coordinate System](https://ja.wikipedia.org/wiki/%E5%B9%B3%E9%9D%A2%E7%9B%B4%E8%A7%92%E5%BA%A7%E6%A8%99%E7%B3%BB). However, MGRS is a preferred coordinate system for georeferenced maps. In a map with MGRS coordinate system, the X and Y coordinates of each point represent the point's location within the 100,000-meter square, while the Z coordinate represents the point's elevation.

You can choose MGRS or UTM by setting config parameter [here](https://github.com/autowarefoundation/autoware.universe/blob/main/map/map_loader/config/lanelet2_map_loader.param.yaml#L3)."
Can I use ekf with multi pose sources (e.g. gnss and ndt),D_kwDOAnasMc4AQCSO,2022-07-08T21:33:52Z,meliketanrikulu,1,Answered,,,
Can I use ekf with multi pose sources (e.g. gnss and ndt),D_kwDOAnasMc4AQCSO,2022-07-08T21:33:52Z,meliketanrikulu,1,Answered,DC_kwDOAnasMc4AL3b7,kminoda,"Hi meliketanrikulu,

Thanks for posting your idea. Yes, with the recent update in ekf_localizer (see this PR: https://github.com/tier4/autoware_launch/pull/380), you can put multiple sensor inputs. In case you want to fuse GNSS&NDT, just put both data into /localization/pose_estimator/pose_with_covariance. I am also be very interested in fusing GNSS for better localization performance.

However, I am not sure whether fusing GNSS & NDT with the current EKF motion model is the best approach. The output of GNSS may have a strong non-gaussian noise especially in the existence of multi-path issue, and it is not verified that the current ekf_localizer is capable of addressing that issue.

Would you mind sharing us your plan of how to fuse those two sensors?"
Can I use ekf with multi pose sources (e.g. gnss and ndt),D_kwDOAnasMc4AQCSO,2022-07-08T21:33:52Z,meliketanrikulu,1,Answered,DC_kwDOAnasMc4AMGKi,meliketanrikulu,"Hi @kminoda. Thanks for your answer. I'm looking at this PR, there is an input topic, so I don't quite understand how to give an input. The frequencies that I calculated with the data from different sensors and which I will give as input here are different. (NDT 10 hz - GNSS 50 hz). So I thought it might be a problem. In this way, will it be enough for me to publish two same sensors as input from the same topic? "
Can I use ekf with multi pose sources (e.g. gnss and ndt),D_kwDOAnasMc4AQCSO,2022-07-08T21:33:52Z,meliketanrikulu,1,Answered,DC_kwDOAnasMc4AMGLV,meliketanrikulu,"In some cases, the error values of Gnss are quite high. (Like under a tree or going through a tunnel). Likewise, the ndt error may also rise in some cases. Since these situations are independent of each other, I think that two different input sources should be handled separately. Different solutions can be produced by following the covariance values for different input sources."
Can I use ekf with multi pose sources (e.g. gnss and ndt),D_kwDOAnasMc4AQCSO,2022-07-08T21:33:52Z,meliketanrikulu,1,Answered,DC_kwDOAnasMc4AMHwL,kminoda,"Hi, thank you for the comment!

> In this way, will it be enough for me to publish two same sensors as input from the same topic?

Yes, you are right. As long as you assume Gaussian noise for all the measurements, you can put all of them into the same topic. If you want to set different covariances for each sensor input, just reflect the values in the covariance field in each message. EKF will read that covariance and calculate the optimal prediction given each observation. The frequency of the sensor input does not matter in the EKF implementation. "
Add option to change gear to PARKING once destination is reached,D_kwDOAnasMc4AQDBJ,2022-07-11T00:04:14Z,VRichardJP,1,Answered,,,
Add option to change gear to PARKING once destination is reached,D_kwDOAnasMc4AQDBJ,2022-07-11T00:04:14Z,VRichardJP,1,Answered,DC_kwDOAnasMc4AOFB9,takayuki5168,"@VRichardJP Thank you for your discussion on another issue.
We've already merged the function.
https://github.com/autowarefoundation/autoware.universe/pull/1818"
Add dynamic memory allocation option in astar_search method,D_kwDOAnasMc4AQDJf,2022-07-11T06:48:40Z,NorahXiong,1,Answered,,,
Add dynamic memory allocation option in astar_search method,D_kwDOAnasMc4AQDJf,2022-07-11T06:48:40Z,NorahXiong,1,Answered,DC_kwDOAnasMc4APbSA,NorahXiong,Implemented in this [PR](https://github.com/autowarefoundation/autoware.universe/pull/2040).
Can't create Detection Area in lanelet2,D_kwDOAnasMc4AQDJ1,2022-07-11T06:56:11Z,Kei-OO,0,Unanswered,,,
"grid_map_utils fails to build with ""error: cannot deduce template arguments for ‘greater’ from ()"" when using gcc 8",D_kwDOAnasMc4AQDbO,2022-07-11T14:57:44Z,sglee-morai,1,Answered,,,
"grid_map_utils fails to build with ""error: cannot deduce template arguments for ‘greater’ from ()"" when using gcc 8",D_kwDOAnasMc4AQDbO,2022-07-11T14:57:44Z,sglee-morai,1,Answered,DC_kwDOAnasMc4AL6XS,sglee-morai,"# Update
I managed to build autoware.universe by excluding _tensorrt_yolo_ and _lidar_centerpoint_, using GCC 9.4.0
**However, I got an error when sourcing install/setup.bash. I'm still figuring out how I can get around this for running Autoware.Universe with Scenario Simulator**

### For build (successful)
```bash
colcon build --packages-skip-up-to [tensorrt_yolo [lidar_centerpoint]] --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release
```

### To run, (error)
```bash
morai-bm01@moraibm01-Sys:~/autoware$ source install/setup.bash
not found: ""/home/morai-bm01/autoware/install/lidar_centerpoint/share/lidar_centerpoint/local_setup.bash""
not found: ""/home/morai-bm01/autoware/install/tensorrt_yolo/share/tensorrt_yolo/local_setup.bash""
```"
Unknown warning in compiling file,D_kwDOAnasMc4AQDeX,2022-07-11T16:20:03Z,EcotronCorp,0,Unanswered,,,
Skipped download issue,D_kwDOAnasMc4AQDfB,2022-07-11T16:37:07Z,EcotronCorp,0,Unanswered,,,
Adding vehicle interface from Autoware.Auto,D_kwDOAnasMc4AQDfI,2022-07-11T16:40:34Z,HaoruXue,5,Answered,,,
Adding vehicle interface from Autoware.Auto,D_kwDOAnasMc4AQDfI,2022-07-11T16:40:34Z,HaoruXue,5,Answered,DC_kwDOAnasMc4AL8as,mitsudome-r,@TakaHoribe Do you have any comments?
Adding vehicle interface from Autoware.Auto,D_kwDOAnasMc4AQDfI,2022-07-11T16:40:34Z,HaoruXue,5,Answered,DC_kwDOAnasMc4AL_FJ,mitsudome-r,"There was also discussion whether there should be a multiplexer function in the vehicle interface to choose between autonomous commands and joystick command.
https://gitlab.com/autowarefoundation/autoware.auto/AutowareAuto/-/merge_requests/1381#note_989753332"
Adding vehicle interface from Autoware.Auto,D_kwDOAnasMc4AQDfI,2022-07-11T16:40:34Z,HaoruXue,5,Answered,DC_kwDOAnasMc4AMJvF,HaoruXue,"I see a complete vehicle_interface design tree [in the doc](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/components/vehicle-interface/), with previous discussions on the specifics linked. However ther have been no issue or PR on it since.

Joystick is listed in the design as an additional input to vehicle_interface. If this architecture is good as it is, then I can go ahead to start working on the vehicle_interface and vesc_interface."
Adding vehicle interface from Autoware.Auto,D_kwDOAnasMc4AQDfI,2022-07-11T16:40:34Z,HaoruXue,5,Answered,DC_kwDOAnasMc4AMVUO,xmfcx,"https://github.com/orgs/autowarefoundation/discussions/2657

This was the arch wg meeting on the vehicle interface, it might help."
Adding vehicle interface from Autoware.Auto,D_kwDOAnasMc4AQDfI,2022-07-11T16:40:34Z,HaoruXue,5,Answered,DC_kwDOAnasMc4AMdPS,HaoruXue,I've made an issue and some additional thoughts about the Autoware.Auto's `vehicle_interface` design here: https://github.com/autowarefoundation/autoware.universe/issues/1451
How ready is the `joy_controller` package,D_kwDOAnasMc4AQDfN,2022-07-11T16:42:49Z,HaoruXue,1,Answered,,,
How ready is the `joy_controller` package,D_kwDOAnasMc4AQDfN,2022-07-11T16:42:49Z,HaoruXue,1,Answered,DC_kwDOAnasMc4AL6_S,shmpwk,"Hi, you can launch joy controller 
`ros2 launch joy_controller joy_controller.launch.xml`
https://github.com/autowarefoundation/autoware.universe/tree/main/control/joy_controller/launch

You can choose joy type from DS4, G29, P65.
https://github.com/autowarefoundation/autoware.universe/blob/main/control/joy_controller/launch/joy_controller.launch.xml#L2"
'CMake Warning' issue,D_kwDOAnasMc4AQDfT,2022-07-11T16:47:25Z,EcotronCorp,0,Unanswered,,,
CMake Warning (dev) at CMakeLists.txt:7 Issue,D_kwDOAnasMc4AQDn7,2022-07-11T22:07:32Z,EcotronCorp,1,Answered,,,
CMake Warning (dev) at CMakeLists.txt:7 Issue,D_kwDOAnasMc4AQDn7,2022-07-11T22:07:32Z,EcotronCorp,1,Answered,DC_kwDOAnasMc4AOFBS,takayuki5168,"This discussion can be merged to the following one.
https://github.com/orgs/autowarefoundation/discussions/2731"
Release of the calibration tools repository for autonomous driving,D_kwDOAnasMc4AQDsd,2022-07-12T01:41:42Z,knzo25,1,Answered,,,
Release of the calibration tools repository for autonomous driving,D_kwDOAnasMc4AQDsd,2022-07-12T01:41:42Z,knzo25,1,Answered,DC_kwDOAnasMc4AM2Ty,armaganarsln,Could you check this link: Map-based lidar-lidar calibration: [Link](https://github.com/tier4/CalibrationTools/blob/tier4/universe/sensor/docs/how_to_extrinsic_auto.md) It looks like unavailable.
Vehicle not avoiding obstacles on road even with sufficient space,D_kwDOAnasMc4AQDu3,2022-07-12T03:26:33Z,MrOCW,1,Answered,,,
Vehicle not avoiding obstacles on road even with sufficient space,D_kwDOAnasMc4AQDu3,2022-07-12T03:26:33Z,MrOCW,1,Answered,DC_kwDOAnasMc4AL7Yh,zulfaqar-azmi-t4,"Hi @MrOCW,
Thank you very much for the question.

If possible, we may need further additional information on your setup. But you can try to check the reason for the avoidance failure by running the following ros2 topic echo command and sharing it with us.

```
ros2 topic echo /planning/scenario_planning/lane_driving/behavior_planning/behavior_path_planner/debug/avoidance_debug_message_array
```

You can also follow the guide on [#how-to-debug](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/behavior_path_planner_avoidance-design/#how-to-debug) for other debug technique that is related to avoidance module.

As for the pedestrian object, the pedestrian object type is not included as an avoidance target for the basic setting. Therefore, the ego will simply stop before pedestrians.

To enable the pedestrian as the avoidable target, set the following [parameter](https://github.com/tier4/autoware_launch/blob/awf-latest/planning_launch/config/scenario_planning/lane_driving/behavior_planning/behavior_path_planner/avoidance/avoidance.param.yaml#:~:text=motorcycle%3A%20false-,pedestrian%3A%20false,-%23%20%2D%2D%2D%2D%2D%2D%2D%2D%2D%2D%20advanced%20parameters) to `true`

Please let us know the details of the echo-ed topic once you have it."
Vehicle not avoiding obstacles on road even with sufficient space,D_kwDOAnasMc4AQDu3,2022-07-12T03:26:33Z,MrOCW,1,Answered,DC_kwDOAnasMc4AL8N0,MrOCW,"Hi @zulfaqar-azmi-t4 , thanks so much for helping out! Really appreciate it. Let me look through the Universe documentation first as I, for some reason, did not come across it and only looked at the Core documentation."
Vehicle not avoiding obstacles on road even with sufficient space,D_kwDOAnasMc4AQDu3,2022-07-12T03:26:33Z,MrOCW,1,Answered,DC_kwDOAnasMc4AL8UL,MrOCW,"@zulfaqar-azmi-t4 I have tried tuning some parameters and now it works but only occasionally. The reason is as shown in the image.
Also, when the planner manages to avoid the obstacle (when to_furthest_linestring_distance>some unknown threshold??), i still get InsufficientLateralMargin
Example:
![image](https://user-images.githubusercontent.com/67644448/178536009-3fa687c1-fcd6-4f87-a56b-5d1cc4861c9e.png)

When the planner manages to avoid and the vehicle is trying to return to the original lane, I will occasionally get the drivable_area wall appear in front of the vehicle and the vehicle stops"
Vehicle not avoiding obstacles on road even with sufficient space,D_kwDOAnasMc4AQDu3,2022-07-12T03:26:33Z,MrOCW,1,Answered,DC_kwDOAnasMc4AL8-o,zulfaqar-azmi-t4,"`to_furthest_linestring` or `to_road_shoulder_distance` shows that you have only 1.967 meters of free space(I apologize for the topic and visualization name differences as it is not updated at the moment). However, from your image above, the right side seems to have more than that. My current guess is it might be related to your lanelet map. Is this the demo map or a custom map?

If it's the demo can, can you point to us the location where you test this? or

If it is a custom map, can you add this [#Showing drivable area boundary](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/behavior_path_planner_avoidance-design/#showing-drivable-area-boundary) marker over here and share it with us? It will visualize the drivable area, which will allow us to see where the road boundaries are.
"
Vehicle not avoiding obstacles on road even with sufficient space,D_kwDOAnasMc4AQDu3,2022-07-12T03:26:33Z,MrOCW,1,Answered,DC_kwDOAnasMc4AL9F0,MrOCW,"@zulfaqar-azmi-t4 I've created another lanelet2 map and now its working well. turns out there was an issue where there was duplicate linestrings on top of each other and the adjacent lanelets were referencing different linestrings. Currently, there is only this issue left. After avoiding, it fails to go back to its lane occasionally.
![image](https://user-images.githubusercontent.com/67644448/178640751-7ec86620-e208-4e5f-878c-467ece39dc40.png)
"
Vehicle not avoiding obstacles on road even with sufficient space,D_kwDOAnasMc4AQDu3,2022-07-12T03:26:33Z,MrOCW,1,Answered,DC_kwDOAnasMc4AL9Hr,zulfaqar-azmi-t4,"I am glad to hear that it is solved. The limitation is documented [here](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/behavior_path_planner_design_limitations/) and we are more than happy to answer if you have any more questions regarding the topic.

Regarding the **fails to go back to its lane occasionally**,  if possible, can you share a video with us. Possibly it would be nice if, in the video, the following [marker](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/behavior_path_planner_avoidance-design/#publishing-visualization-marker) is set as `true`:
1. `p_registered_shift`
2. `p_current_raw_shift`
3. `p_extra_return_shift`
4. `path_shifter_registered_points`
Since the current implementation has several known limitations, we can provide some educated guess on what seems to be the issue.

If it is not a trouble, it would also be nice to open a new discussion, as this new topic might be helpful to others as its own thread."
Vehicle not avoiding obstacles on road even with sufficient space,D_kwDOAnasMc4AQDu3,2022-07-12T03:26:33Z,MrOCW,1,Answered,DC_kwDOAnasMc4AL9Kg,MrOCW,"sure, I'll open a new topic. thanks again @zulfaqar-azmi-t4 for your help!"
Open AD Kit WG Meeting 2022/07/14,D_kwDOAnasMc4AQEBw,2022-07-12T13:09:29Z,Unknown,0,Unanswered,,,
tier4_traffic_light_rviz_plugin Error,D_kwDOAnasMc4AQEMg,2022-07-12T18:12:54Z,EcotronCorp,2,Answered,,,
tier4_traffic_light_rviz_plugin Error,D_kwDOAnasMc4AQEMg,2022-07-12T18:12:54Z,EcotronCorp,2,Answered,DC_kwDOAnasMc4AL9Cz,zulfaqar-azmi-t4,"@EcotronCorp 
These warnings are common, and it is safe to ignore them.
To confirm, however, while you are building Autoware, are these warnings terminate your compilation?"
tier4_traffic_light_rviz_plugin Error,D_kwDOAnasMc4AQEMg,2022-07-12T18:12:54Z,EcotronCorp,2,Answered,DC_kwDOAnasMc4AOFBJ,takayuki5168,"@EcotronCorp Is your question resolved? If so, I will close the discussion.
"
Drivable Area wall when returning to original lane after obstacle avoidance,D_kwDOAnasMc4AQEYz,2022-07-13T04:13:23Z,MrOCW,1,Answered,,,
Drivable Area wall when returning to original lane after obstacle avoidance,D_kwDOAnasMc4AQEYz,2022-07-13T04:13:23Z,MrOCW,1,Answered,DC_kwDOAnasMc4AL9Of,zulfaqar-azmi-t4,"@MrOCW 

My guess is that as the motion considers the ego's kinematic model, there is a potential for the ego to be out of the drivable area when returning to its original lane.

To debug this issue, you can turn on the debug marker on the rviz2 display panel, see whether the footprint of ego (green or yellow rectangle) is out of the lanelet and share the result to us?
![rect291](https://user-images.githubusercontent.com/93502286/178655284-44fd88a4-ad29-4f3f-9c93-c6b6b5e5621b.png) "
Drivable Area wall when returning to original lane after obstacle avoidance,D_kwDOAnasMc4AQEYz,2022-07-13T04:13:23Z,MrOCW,1,Answered,DC_kwDOAnasMc4AL9lw,MrOCW,"![image](https://user-images.githubusercontent.com/67644448/178696753-2b5f0e2a-6dc6-4106-b5a6-818951a08d39.png)
Here it is"
Drivable Area wall when returning to original lane after obstacle avoidance,D_kwDOAnasMc4AQEYz,2022-07-13T04:13:23Z,MrOCW,1,Answered,DC_kwDOAnasMc4AL9uT,zulfaqar-azmi-t4,"@MrOCW 
It does seem like the trajectory is within the lanes.
Sorry for having to trouble you. In addition to the above's debug marker, can you also visualize your drivable area and share it to us?
The drivable area can be visualize 

```
/planning/scenario_planning/lane_driving/behavior_planning/behavior_path_planner/debug/drivable_area
```
"
Drivable Area wall when returning to original lane after obstacle avoidance,D_kwDOAnasMc4AQEYz,2022-07-13T04:13:23Z,MrOCW,1,Answered,DC_kwDOAnasMc4AL90i,MrOCW,"Not a problem at all! thanks for trying to help
![image](https://user-images.githubusercontent.com/67644448/178724184-36f57665-70b3-414b-9ac9-b3ea624237b0.png)


Here's 1 message:
```
header:
  stamp:
    sec: 1657711899
    nanosec: 592358849
  frame_id: map
info:
  map_load_time:
    sec: 1657711899
    nanosec: 592358849
  resolution: 0.10000000149011612
  width: 522
  height: 614
  origin:
    position:
      x: 50.7
      y: -104.9
      z: -1.1808419949404225
    orientation:
      x: 0.0
      y: 0.0
      z: 0.0
      w: 1.0
data:
- 0
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- 100
- '...'
---
```
"
Drivable Area wall when returning to original lane after obstacle avoidance,D_kwDOAnasMc4AQEYz,2022-07-13T04:13:23Z,MrOCW,1,Answered,DC_kwDOAnasMc4AMBZ0,zulfaqar-azmi-t4,"Hi @MrOCW 

The drivable area (grey pixels) doesn't seem to cover both lanes.
Therefore, the backward ""remaining"" paths seem out of the drivable area boundaries. 
Can you send us a video or gif file that shows the behavior of the drivable area during the whole avoidance process(with the [drivable area marker](https://github.com/orgs/autowarefoundation/discussions/2733#discussioncomment-3136403), [motion](https://github.com/orgs/autowarefoundation/discussions/2733#discussioncomment-3134367) marker and behavior path planner's marker turned on in `rviz2`)

For the behavior_path_planner marker, set only the following to true.
![Screenshot from 2022-07-15 11-01-09](https://user-images.githubusercontent.com/93502286/179131842-13ea1de5-8dec-4077-a2eb-457b5de22fab.png)

Meanwhile, we shall try similar scenarios using our own map. I will let you know if we are unable to reproduce them. In that case, we might need your assistance to open an issue and provide the maps and rosbags that will help us investigate the matter."
Drivable Area wall when returning to original lane after obstacle avoidance,D_kwDOAnasMc4AQEYz,2022-07-13T04:13:23Z,MrOCW,1,Answered,DC_kwDOAnasMc4ANP9-,zulfaqar-azmi-t4,"Hi @MrOCW 

With regards to this issue, the fix is already [merged](https://github.com/autowarefoundation/autoware.universe/pull/1688).
So I'll mark question as solved.
But in case you have additional issues, please feel free to open a new question."
Drivable Area wall when returning to original lane after obstacle avoidance,D_kwDOAnasMc4AQEYz,2022-07-13T04:13:23Z,MrOCW,1,Answered,DC_kwDOAnasMc4AOpFT,MrOCW,"@zulfaqar-azmi-t4 
turns out I encountered the same issue again
![image](https://user-images.githubusercontent.com/67644448/194851530-50d9c79f-3108-4c52-aab0-418406117f6e.png)

"
"TILDE, message tracking framework across multiple nodes",D_kwDOAnasMc4AQEbz,2022-07-13T06:26:33Z,nabetetsu,0,Unanswered,,,
Autonomy Software WG Meeting 2022/07/19,D_kwDOAnasMc4AQEyu,2022-07-13T16:05:18Z,BonoloAWF,0,Unanswered,,,
problem with traffic participants when prediction parameters are different,D_kwDOAnasMc4AQFhL,2022-07-14T14:58:38Z,koraykoca,0,Unanswered,,,
Autoware ECU test matrix,D_kwDOAnasMc4AQF7a,2022-07-15T06:39:31Z,Unknown,0,Unanswered,,,
Compilation error on Xavier AGX JetPack 5.0.1,D_kwDOAnasMc4AQHUZ,2022-07-18T03:12:12Z,MrOCW,2,Answered,,,
Compilation error on Xavier AGX JetPack 5.0.1,D_kwDOAnasMc4AQHUZ,2022-07-18T03:12:12Z,MrOCW,2,Answered,DC_kwDOAnasMc4AMOPX,kosuke55,"I'm not sure about the detail of the error, but for avoiding `Werror` how about `colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release -DCMAKE_CXX_FLAGS=""-w"" --packages-select trajectory_follower`?"
Compilation error on Xavier AGX JetPack 5.0.1,D_kwDOAnasMc4AQHUZ,2022-07-18T03:12:12Z,MrOCW,2,Answered,DC_kwDOAnasMc4AMOPf,kosuke55,"And could you please give us the detail of this for reference?
> removing the redundant expressions"
Proposal for Autoware Universe Teleoperation System,D_kwDOAnasMc4AQHov,2022-07-18T13:38:58Z,raminterpl,6,Answered,,,
Proposal for Autoware Universe Teleoperation System,D_kwDOAnasMc4AQHov,2022-07-18T13:38:58Z,raminterpl,6,Answered,DC_kwDOAnasMc4AMG8a,doganulus,"> ...corresponding motion control and other commands being transmitted back to the ego vehicle.

This is a safety-critical feature. What commands do you want to send to the vehicle remotely? 

Direct control would be very unsafe due to network problems.
"
Proposal for Autoware Universe Teleoperation System,D_kwDOAnasMc4AQHov,2022-07-18T13:38:58Z,raminterpl,6,Answered,DC_kwDOAnasMc4AMIHP,mitsudome-r,"TIER IV has developed a service called [AutowareDrive](https://drive.tier4.jp/) which has the function that is proposed here. 
We also have a tech blog that our engineer posted in the past, but it's in Japanese so you would have to use some translation tool to translate the page. https://tech.tier4.jp/entry/2019/01/22/170032

I think we also have some further requirements and know-hows from internally (e.g., including the latency requirements investigation and dealing with network problems), but I don't think we have something that we can share publicly at the moment. "
Proposal for Autoware Universe Teleoperation System,D_kwDOAnasMc4AQHov,2022-07-18T13:38:58Z,raminterpl,6,Answered,DC_kwDOAnasMc4AMcS6,raminterpl,@markacrawfordjr : FYI
Proposal for Autoware Universe Teleoperation System,D_kwDOAnasMc4AQHov,2022-07-18T13:38:58Z,raminterpl,6,Answered,DC_kwDOAnasMc4AMk4l,mitsudome-r,"@raminterpl @markacrawfordjr 
* https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/list/api/operation_mode/
* https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/components/vehicle-interface/

These documentation might relate to your proposal. At least we have some API commands that we are planning to integrate to support selection of different control sources. "
Proposal for Autoware Universe Teleoperation System,D_kwDOAnasMc4AQHov,2022-07-18T13:38:58Z,raminterpl,6,Answered,DC_kwDOAnasMc4ANMUN,raminterpl,"@BonoloAWF @mitsudome-r @markacrawfordjr : Hi Team, As discussed in the last meeting High level Architecture for proposed Teleoperation system is added now and also phase wise implementation proposals for achieving final teleoperation goal is also updated
Could you please discuss with responsible AWF Architecture team and please let us your feedback for deciding the next steps. Thanks!"
Proposal for Autoware Universe Teleoperation System,D_kwDOAnasMc4AQHov,2022-07-18T13:38:58Z,raminterpl,6,Answered,DC_kwDOAnasMc4ANOL6,BonoloAWF,cc (software architects): @xmfcx @angry-crab 
Proposal for Autoware Universe Teleoperation System,D_kwDOAnasMc4AQHov,2022-07-18T13:38:58Z,raminterpl,6,Answered,DC_kwDOAnasMc4ASrMq,mitsudome-r,"Here are the links that you might find useful for doing remote monitoring and remote control for autoware:
* https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/list/
* https://autowarefoundation.github.io/autoware.universe/main/system/default_ad_api/document/operation-mode/"
Calculation of vehicle_velocity_converter package covariance parameters,D_kwDOAnasMc4AQHsH,2022-07-18T15:02:10Z,meliketanrikulu,1,Answered,,,
Calculation of vehicle_velocity_converter package covariance parameters,D_kwDOAnasMc4AQHsH,2022-07-18T15:02:10Z,meliketanrikulu,1,Answered,DC_kwDOAnasMc4AML_W,YamatoAndo,@kminoda Could you please answer this question?
Calculation of vehicle_velocity_converter package covariance parameters,D_kwDOAnasMc4AQHsH,2022-07-18T15:02:10Z,meliketanrikulu,1,Answered,DC_kwDOAnasMc4AMMAp,kminoda,"@meliketanrikulu Thank you for sharing your issue!

May I ask why you want to mitigate the small flicker in the base_link?

> While testing ekf with autoware universe, we saw that there was a small noise (flicker) problem in the base_link when the vehicle was stationary, and the source of the problem was related to [the covariance values](https://github.com/autowarefoundation/autoware.universe/blob/main/sensing/vehicle_velocity_converter/config/vehicle_velocity_converter.param.yaml) in the vehicle velocity converter package we detected.

(Setting aside what is the cause of the problem,) IMHO you should approach the problem in a way other than changing the value of velocity covariance. The covariance value (0.04 & 0.01) is just a sample value, but somewhat a reasonable value as far as we have tested on our various vehicles, and it is likely that the same applies to your vehicle, too. 
I believe we should deal with the flickering problem by adding some postprocessing after EKF (for example like [stop_filter](https://github.com/autowarefoundation/autoware.universe/tree/main/localization/stop_filter)). 


> Could you share with us how you calculated these covariance values?
> Considering that these values will change according to the vehicle, we think that the covariance matrix should be calculated instead of using the default value. What are your thoughts on this?

The parameter set in the [config file you've shared](https://github.com/autowarefoundation/autoware.universe/blob/main/sensing/vehicle_velocity_converter/config/vehicle_velocity_converter.param.yaml) is merely a sample value (for example in case you need a sample config file to launch the package independently for debugging). So yes, it should be (and intended to be) calibrated beforehand for each vehicle or each type of vehicle when you integrate Autoware to any of your vehicles. 

FYI, TIER IV has just made it public a calibration tool for estimating the value (see [here](https://github.com/tier4/CalibrationTools/tree/feature/map_based_calib_update_ground_plane/localization/deviation_estimation_tools) for detail). "
Compiling error with Jetson AGX Orin platform,D_kwDOAnasMc4AQHwP,2022-07-18T16:39:12Z,NilaySener,3,Answered,,,
Compiling error with Jetson AGX Orin platform,D_kwDOAnasMc4AQHwP,2022-07-18T16:39:12Z,NilaySener,3,Answered,DC_kwDOAnasMc4AMHCO,hasanzfdn,I got same problem too
Compiling error with Jetson AGX Orin platform,D_kwDOAnasMc4AQHwP,2022-07-18T16:39:12Z,NilaySener,3,Answered,DC_kwDOAnasMc4AMHiM,Unknown,"@NilaySener Other people have reported being able to build with Jetpack 5.0, so I had a look at old Autoware Universe PRs and issues and found [an issue that mentions this same problem](https://github.com/autowarefoundation/autoware.universe/issues/962
).

The workaround is to add the `-Wno-error=deprecated-declarations` compiler flag to CMakeLists.txt.

For more details on the current library upgrade plan, see @kenji-miyake 's [comment on issue 2428]( https://github.com/autowarefoundation/autoware/issues/2428#issuecomment-1166434664).
"
Compiling error with Jetson AGX Orin platform,D_kwDOAnasMc4AQHwP,2022-07-18T16:39:12Z,NilaySener,3,Answered,DC_kwDOAnasMc4AMIj6,NilaySener,"@LalithVipulananthan , thank you four your reply. I checked the issue and i solved my problem by adding theese compiler flags to  CMakeList.txt of the packages that give error.

   `set(DEPRECATION_FLAG ""-Wno-error=deprecated-declarations"")`
   `set(CMAKE_CXX_FLAGS ""${CMAKE_CXX_FLAGS} ${DEPRECATION_FLAG}"")`
 "
Compiling error with Jetson AGX Orin platform,D_kwDOAnasMc4AQHwP,2022-07-18T16:39:12Z,NilaySener,3,Answered,DC_kwDOAnasMc4AanR9,greensky0802,"        Hello, we have completed the code compilation of Autoware.Universe core modules on the Jetson Orin platform combined with CUDA.
The detailed status of the Orin system is as follow:
        JetPack: 5.1.1 
        L4T: 35.3.1 
        CUDA: 11.4 
        cuDNN: 8.6.0 
        TensorRT: 5.1.1 
        We run a docker (Ubuntu 20.04) released by ROS2 in the Orin system (Ubuntu 20.04), then manually compile the source code of ROS2 Humble, and then manually compile the source code of Autoware. Universe. 
        Finally ensure that that modules of the core link of the Autoware.Universe can be normally started."
2022-07-19 ODD working group weekly meeting (102),D_kwDOAnasMc4AQH68,2022-07-18T21:53:52Z,Igata-ctrl,1,Answered,,,
2022-07-19 ODD working group weekly meeting (102),D_kwDOAnasMc4AQH68,2022-07-18T21:53:52Z,Igata-ctrl,1,Answered,DC_kwDOAnasMc4AMSD_,Igata-ctrl,"As of Wednesday July 20, the[ scenario simulation success ratio in the CI/CD pipeline is 99/107](https://evaluation.tier4.jp/evaluation/reports?project_id=awf) and it was reported to July TSC."
Autonomy Software WG Meeting 2022/07/26,D_kwDOAnasMc4AQINu,2022-07-19T09:11:37Z,BonoloAWF,1,Answered,,,
Autonomy Software WG Meeting 2022/07/26,D_kwDOAnasMc4AQINu,2022-07-19T09:11:37Z,BonoloAWF,1,Answered,DC_kwDOAnasMc4AMVEn,MertClk,Presentation: https://docs.google.com/presentation/d/1ufPHu1E-TKlSF-gKinbdiFwEMLalrBGe1DYcL2UnzI8/edit?usp=sharing
Open AD Kit WG Meeting 2022/07/20,D_kwDOAnasMc4AQIXz,2022-07-19T13:36:00Z,Unknown,0,Unanswered,,,
2022-07-20 Simulation Working Group Meeting,D_kwDOAnasMc4AQI1b,2022-07-20T04:02:13Z,sglee-morai,0,Unanswered,,,
Rosbag replay simulation tutorial. Localization doesn't seem to work.,D_kwDOAnasMc4AQJdA,2022-07-20T19:17:18Z,gayar-helm,9,Answered,,,
Rosbag replay simulation tutorial. Localization doesn't seem to work.,D_kwDOAnasMc4AQJdA,2022-07-20T19:17:18Z,gayar-helm,9,Answered,DC_kwDOAnasMc4AMLV9,gayar-helm,I found this discussion - https://github.com/autowarefoundation/autoware/discussions/2618 and the difference is that in my case I'm using bag provided in the tutorial.
Rosbag replay simulation tutorial. Localization doesn't seem to work.,D_kwDOAnasMc4AQJdA,2022-07-20T19:17:18Z,gayar-helm,9,Answered,DC_kwDOAnasMc4AML35,angry-crab,"From the log, it seems that ndt does not receive input point cloud. Were you able to visualize the pointcloud using rviz? "
Rosbag replay simulation tutorial. Localization doesn't seem to work.,D_kwDOAnasMc4AQJdA,2022-07-20T19:17:18Z,gayar-helm,9,Answered,DC_kwDOAnasMc4AML4n,gayar-helm,"Xinyu Wang, thanks for replying.

I can see the map but not pointcloud. Is there any specific setting I need to turn on?
I also tried to remap point cloud topic for the top lidar like it's shown [here](https://github.com/autowarefoundation/autoware/discussions/2618#discussioncomment-2826662):
`ros2 bag play sample.db3 --remap /localization/util/downsample/pointcloud:=/sensing/lidar/top/velodyne_packets --qos-profile-overrides-path qos.yaml`
but it didn't have any effect."
Rosbag replay simulation tutorial. Localization doesn't seem to work.,D_kwDOAnasMc4AQJdA,2022-07-20T19:17:18Z,gayar-helm,9,Answered,DC_kwDOAnasMc4AML6I,angry-crab,Please try `ros2 bag play ~/Downloads/sample-rosbag/sample.db3 -r 0.2`
Rosbag replay simulation tutorial. Localization doesn't seem to work.,D_kwDOAnasMc4AQJdA,2022-07-20T19:17:18Z,gayar-helm,9,Answered,DC_kwDOAnasMc4AML6V,gayar-helm,"> Please try ros2 bag play ~/Downloads/sample-rosbag/sample.db3 -r 0.2

That's what I tried to get the original result in the log you saw.
Here is a screenshot:
![image](https://user-images.githubusercontent.com/83242562/180130819-cb0d8249-b9a5-47c0-90b4-7388900be9f3.png)

BTW it is driving somewhere but neither pointcloud nor the car itself show up."
Rosbag replay simulation tutorial. Localization doesn't seem to work.,D_kwDOAnasMc4AQJdA,2022-07-20T19:17:18Z,gayar-helm,9,Answered,DC_kwDOAnasMc4AML-q,angry-crab,"It seems that the vehicle module is not properly started. Here are some suggestions:
1. Check if localization components are started. There is a pipeline for processing raw point could messages, if any node fails, no output will be received. 
2. Check if the vehicle module is started correctly. If so, you should be able to see the vehicle in rviz. 
3. Make sure there is no error during building. "
Rosbag replay simulation tutorial. Localization doesn't seem to work.,D_kwDOAnasMc4AQJdA,2022-07-20T19:17:18Z,gayar-helm,9,Answered,DC_kwDOAnasMc4AMNKS,gayar-helm,"Thanks for the suggestions!
1. The only actual error I see in the log is this: 
    
> [system_error_monitor-6] [ERROR] [1658343645.360010809] [system_error_monitor /autoware/localization/node_alive_monitoring]: [Single Point Fault]: Error
[system_error_monitor-6] [ERROR] [1658343645.360025404] [system_error_monitor /autoware/localization/node_alive_monitoring/topic_status/ad_service_state_monitor: localization_topic_status]: [Single Point Fault]: Error
[system_error_monitor-6] [ERROR] [1658343645.360040717] [system_error_monitor /autoware/localization/performance_monitoring/localization_accuracy]: [Single Point Fault]: Error
[system_error_monitor-6] [ERROR] [1658343645.360063038] [system_error_monitor /autoware/localization/performance_monitoring/localization_accuracy/localization_error_monitor: localization_accuracy]: [Single Point Fault]: ellipse size is over the expected range
[system_error_monitor-6] [ERROR] [1658343645.360086813] [system_error_monitor /autoware/localization/performance_monitoring/localization_accuracy/localization_error_monitor: localization_accuracy_lateral_direction]: [Single Point Fault]: ellipse size along lateral direction is over the expected range

See https://gist.github.com/gayar-helm/1d85fa5197ed2a10499a5c297c4f7b7e#file-log_rosbag_replay-txt-L1123

There is a warning preceding that error:
[[gyro_odometer-19] [WARN] [1658343643.058374960] [localization.twist_estimator.gyro_odometer]: Imu msg is not subscribed](https://gist.github.com/gayar-helm/1d85fa5197ed2a10499a5c297c4f7b7e#file-log_rosbag_replay-txt-L1097)


2. The only vehicle related warning I see is this:
    [[component_container_mt-52] [WARN] [1658343643.055631366] [autoware_api.external.vehicle_status]: The velocity topic is not subscribed
](https://gist.github.com/gayar-helm/1d85fa5197ed2a10499a5c297c4f7b7e#file-log_rosbag_replay-txt-L1094)

3. During the build I am getting CMake warnings but not sure how important they are. [For example](https://gist.github.com/gayar-helm/1d85fa5197ed2a10499a5c297c4f7b7e#file-build-log-L528):

> Starting >>> image_projection_based_fusion
--- stderr: velodyne_pointcloud
CMake Warning (dev) at CMakeLists.txt:24 (find_package):
  Policy CMP0074 is not set: find_package uses <PackageName>_ROOT variables.
  Run ""cmake --help-policy CMP0074"" for policy details.  Use the cmake_policy
  command to set the policy and suppress this warning.
  CMake variable PCL_ROOT is set to:
    /usr
  For compatibility, CMake is ignoring the variable.
This warning is for project developers.  Use -Wno-dev to suppress it.
---
Full build log is here: https://gist.github.com/gayar-helm/1d85fa5197ed2a10499a5c297c4f7b7e#file-build-log


"
Rosbag replay simulation tutorial. Localization doesn't seem to work.,D_kwDOAnasMc4AQJdA,2022-07-20T19:17:18Z,gayar-helm,9,Answered,DC_kwDOAnasMc4AMNw3,kminoda,"Hi, @gayar-helm!
Thank you for posting the issue. It's weird... :thinking:  the sample rosbag should work as long as you set up Autoware as per the official tutorial. 

> `[ndt_scan_matcher-18] [WARN] [1658302837.086476315] [localization.pose_estimator.ndt_scan_matcher]: No InputSource`

As @angry-crab mentioned, this warning indicates that the `ndt_scan_matcher` fails to receive the LiDAR measurement input.
In Autoware, given raw LiDAR scan input (`sensing/lidar/top/velodyne_packets`), it performs a sequence of preprocessing before feeding it to `ndt_scan_matcher`. So I assume that somewhere in the preprocessing nodes is failing. I guess some of them are either disconnected or wrongly connected.

Would you check if `/localization/util/downsample/pointcloud` (an input topic to `ndt_scan_matcher`) is properly published?
- If it is published, check if `ndt_scan_matcher` subscribes that node by checking `ros2 node info /localization/pose_estimator/ndt_scan_matcher`. 
- If it is not published, then seek where the cause is among the preprocessing nodes, e.g. by using `ros2 node info ...` and `ros2 topic info -v ...`."
Rosbag replay simulation tutorial. Localization doesn't seem to work.,D_kwDOAnasMc4AQJdA,2022-07-20T19:17:18Z,gayar-helm,9,Answered,DC_kwDOAnasMc4AMN-T,gayar-helm,"Hi, @kminoda!

Thank you for your reply.
The topic `/localization/util/downsample/pointcloud` is not published at all, see:

> ros2 node list | grep /localization
/localization/localization_error_monitor
/localization/pose_estimator/ndt_scan_matcher
/localization/pose_estimator/transform_listener_impl_55652148c1e8
/localization/pose_twist_fusion_filter/ekf_localizer
/localization/pose_twist_fusion_filter/stop_filter
/localization/pose_twist_fusion_filter/twist2accel
/localization/twist_estimator/gyro_odometer
/localization/twist_estimator/transform_listener_impl_55d192014d08
/localization/util/pose_initializer
/localization/util/transform_listener_impl_5590123c5e68

Further investigation showed that `/sensing/lidar/top/velodyne_packets` is consumed by `velodyne_convert_node` node:

> ros2 topic info -v /sensing/lidar/top/velodyne_packets
Type: velodyne_msgs/msg/VelodyneScan
Publisher count: 1
Node name: rosbag2_player
Node namespace: /
Topic type: velodyne_msgs/msg/VelodyneScan
Endpoint type: PUBLISHER
GID: 79.a1.10.01.22.cb.b6.7e.82.e0.6a.d3.00.00.1c.03.00.00.00.00.00.00.00.00
QoS profile:
  Reliability: RELIABLE
  Durability: VOLATILE
  Lifespan: 9223372036854775807 nanoseconds
  Deadline: 9223372036854775807 nanoseconds
  Liveliness: AUTOMATIC
  Liveliness lease duration: 9223372036854775807 nanoseconds
Subscription count: 1
**_Node name: velodyne_convert_node
Node namespace: /sensing/lidar/top_**
Topic type: velodyne_msgs/msg/VelodyneScan
Endpoint type: SUBSCRIPTION
GID: dc.96.10.01.90.46.e7.35.3f.71.8e.e9.00.00.24.04.00.00.00.00.00.00.00.00
QoS profile:
Reliability: BEST_EFFORT
Durability: VOLATILE
Lifespan: 9223372036854775807 nanoseconds
Deadline: 9223372036854775807 nanoseconds
Liveliness: AUTOMATIC
Liveliness lease duration: 9223372036854775807 nanoseconds

but I don't have `/sensing/lidar/top/velodyne_convert_node` running, see:

> ros2 node list | grep velodyne_convert_node
> /sensing/lidar/left/velodyne_convert_node
> /sensing/lidar/rear/velodyne_convert_node
> /sensing/lidar/right/velodyne_convert_node"
Rosbag replay simulation tutorial. Localization doesn't seem to work.,D_kwDOAnasMc4AQJdA,2022-07-20T19:17:18Z,gayar-helm,9,Answered,DC_kwDOAnasMc4AMN-w,gayar-helm,"Here is a error happening when `/sensing/lidar/top/velodyne_convert_node` starts:

[component_container_mt-10] [INFO] [1658461227.695406819] [sensing.lidar.top.velodyne_convert_node]: Number of lasers: 128.
[component_container_mt-10] [INFO] [1658461227.711969817] [sensing.lidar.top.pointcloud_preprocessor.velodyne_node_container]: Load Library: /autoware/install/pointcloud_preprocessor/lib/libpointcloud_preprocessor_filter.so
[component_container-8] [INFO] [1658461227.713979495] [map.map_container]: Load Library: /autoware/install/map_loader/lib/liblanelet2_map_loader_node.so
[component_container-8] [INFO] [1658461227.732650253] [map.map_container]: Found class: rclcpp_components::NodeFactoryTemplate<Lanelet2MapLoaderNode>
[component_container-8] [INFO] [1658461227.732715665] [map.map_container]: Instantiate class: rclcpp_components::NodeFactoryTemplate<Lanelet2MapLoaderNode>
[component_container-13] [INFO] [1658461227.736567506] [sensing.lidar.rear.pointcloud_preprocessor.velodyne_node_container]: Load Library: /autoware/install/velodyne_pointcloud/lib/libcloud_nodelet.so
[INFO] [launch_ros.actions.load_composable_nodes]: Loaded node '/system/system_monitor/cpu_monitor' in container '/system/system_monitor/system_monitor/system_monitor_container'
[component_container-13] [INFO] [1658461227.745926938] [sensing.lidar.rear.pointcloud_preprocessor.velodyne_node_container]: Found class: rclcpp_components::NodeFactoryTemplate<velodyne_pointcloud::Convert>
[component_container-13] [INFO] [1658461227.745982467] [sensing.lidar.rear.pointcloud_preprocessor.velodyne_node_container]: Instantiate class: rclcpp_components::NodeFactoryTemplate<velodyne_pointcloud::Convert>

**_[motion_velocity_smoother-42] [WARN] [1658461227.751030908] [planning.scenario_planning.motion_velocity_smoother]: failed to get transform from map to base_link: ""map"" passed to lookupTransform argument target_frame does not exist._**

[motion_velocity_smoother-42] [INFO] [1658461227.751156428] [planning.scenario_planning.motion_velocity_smoother]: waiting for self pose...

So it looks like post processing node for the top lidar fails to start but same nodes for left/right/rear lidars start fine, at least I don't see the same error for them."
Rosbag replay simulation tutorial. Localization doesn't seem to work.,D_kwDOAnasMc4AQJdA,2022-07-20T19:17:18Z,gayar-helm,9,Answered,DC_kwDOAnasMc4AMOdI,kminoda,"Hmm, ok, thank you for sharing the results!

Here's my results:
```
$ ros2 node list | grep lidar/top 
WARNING: Be aware that are nodes in the graph that share an exact name, this can have unintended side effects.
/sensing/lidar/top/crop_box_filter_mirror
/sensing/lidar/top/crop_box_filter_self
/sensing/lidar/top/pointcloud_preprocessor/transform_listener_impl_7f1730588290
/sensing/lidar/top/pointcloud_preprocessor/transform_listener_impl_7f174400a938
/sensing/lidar/top/pointcloud_preprocessor/transform_listener_impl_7f174c05b810
/sensing/lidar/top/pointcloud_preprocessor/transform_listener_impl_7f17500538c0
/sensing/lidar/top/pointcloud_preprocessor/transform_listener_impl_7f17740139c0
/sensing/lidar/top/pointcloud_preprocessor/transform_listener_impl_7f178c005350
/sensing/lidar/top/pointcloud_preprocessor/transform_listener_impl_7f178c00fa30
/sensing/lidar/top/pointcloud_preprocessor/velodyne_node_container
/sensing/lidar/top/ring_outlier_filter
/sensing/lidar/top/velodyne_convert_node
/sensing/lidar/top/velodyne_driver
/sensing/lidar/top/velodyne_interpolate_node
/sensing/lidar/top/velodyne_monitor
```

```
$ ros2 topic list | grep lidar/top
/sensing/lidar/top/crop_box_filter_mirror/crop_box_polygon
/sensing/lidar/top/crop_box_filter_self/crop_box_polygon
/sensing/lidar/top/mirror_cropped/pointcloud_ex
/sensing/lidar/top/outlier_filtered/pointcloud
/sensing/lidar/top/pointcloud_raw
/sensing/lidar/top/pointcloud_raw_ex
/sensing/lidar/top/rectified/pointcloud
/sensing/lidar/top/rectified/pointcloud_ex
/sensing/lidar/top/self_cropped/pointcloud_ex
/sensing/lidar/top/velodyne_model_marker
/sensing/lidar/top/velodyne_packets
/sensing/lidar/top/velodyne_points_combined_ex
/sensing/lidar/top/velodyne_points_invalid_near
```"
Rosbag replay simulation tutorial. Localization doesn't seem to work.,D_kwDOAnasMc4AQJdA,2022-07-20T19:17:18Z,gayar-helm,9,Answered,DC_kwDOAnasMc4AMOdj,kminoda,"Would you double check your launch command?
FYI here's the command I used:
`ros2 launch autoware_launch autoware.launch.xml vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit map_path:=/home/minoda/data/maps/sample-map-rosbag`

Maybe you can do the following to isolate your problem on sensing modules:
`ros2 launch autoware_launch autoware.launch.xml vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit map_path:=/home/minoda/data/maps/sample-map-rosbag perception:=false localization:=false planning:=false control:=false ...`
"
Rosbag replay simulation tutorial. Localization doesn't seem to work.,D_kwDOAnasMc4AQJdA,2022-07-20T19:17:18Z,gayar-helm,9,Answered,DC_kwDOAnasMc4AMPwu,gayar-helm,"@kminoda thanks fir suggestions. 
This is interesting, the tutorial suggest to run 'logging_simulator.launch.xml` while you are running `autoware.launch.xml`.
When I run your command I do see all the nodes and topics you see:

> root@8e387a5e890d:/autoware# ros2 node list | grep lidar/top
/sensing/lidar/top/crop_box_filter_mirror
/sensing/lidar/top/crop_box_filter_self
/sensing/lidar/top/pointcloud_preprocessor/transform_listener_impl_7f5210062760
/sensing/lidar/top/pointcloud_preprocessor/transform_listener_impl_7f5248069420
/sensing/lidar/top/pointcloud_preprocessor/transform_listener_impl_7f52605e7290
/sensing/lidar/top/pointcloud_preprocessor/transform_listener_impl_7f52b006da80
/sensing/lidar/top/pointcloud_preprocessor/transform_listener_impl_7f5344005258
/sensing/lidar/top/pointcloud_preprocessor/transform_listener_impl_7f5398083870
/sensing/lidar/top/pointcloud_preprocessor/transform_listener_impl_7f53c8082020
/sensing/lidar/top/pointcloud_preprocessor/velodyne_node_container
/sensing/lidar/top/ring_outlier_filter
/sensing/lidar/top/velodyne_convert_node
/sensing/lidar/top/velodyne_driver
/sensing/lidar/top/velodyne_interpolate_node
/sensing/lidar/top/velodyne_monitor

> root@8e387a5e890d:/autoware# ros2 topic list | grep lidar/top
/sensing/lidar/top/crop_box_filter/debug/cyclic_time_ms
/sensing/lidar/top/crop_box_filter/debug/processing_time_ms
/sensing/lidar/top/crop_box_filter_mirror/crop_box_polygon
/sensing/lidar/top/crop_box_filter_self/crop_box_polygon
/sensing/lidar/top/mirror_cropped/pointcloud_ex
/sensing/lidar/top/outlier_filtered/pointcloud
/sensing/lidar/top/pointcloud_raw
/sensing/lidar/top/pointcloud_raw_ex
/sensing/lidar/top/rectified/pointcloud
/sensing/lidar/top/rectified/pointcloud_ex
/sensing/lidar/top/ring_outlier_filter/debug/cyclic_time_ms
/sensing/lidar/top/ring_outlier_filter/debug/processing_time_ms
/sensing/lidar/top/self_cropped/pointcloud_ex
/sensing/lidar/top/velodyne_model_marker
/sensing/lidar/top/velodyne_packets
/sensing/lidar/top/velodyne_points_combined_ex
/sensing/lidar/top/velodyne_points_invalid_near

And finally I'm seeing the car and some lidar poitns:
![image](https://user-images.githubusercontent.com/83242562/180574550-daaec6da-c5ba-42ea-903a-c85371fece1d.png)

However the car isn't moving. The new error I'm seeing is this:

[ndt_scan_matcher-24] [WARN] [1658538045.295612413] [localization.pose_estimator.ndt_scan_matcher]: Validation error. The reference time is 1585897267.550600[sec], but the target time is 0.000000[sec]. The difference is 1585897267.550600[sec] (the tolerance is 1.000000[sec]).
[ndt_scan_matcher-24] [WARN] [1658538045.295718900] [localization.pose_estimator.ndt_scan_matcher]: Validation error. The reference time is 1585897267.550600[sec], but the target time is 1658537937.566759[sec]. The difference is 72640670.016159[sec] (the tolerance is 1.000000[sec]).
[ndt_scan_matcher-24] [WARN] [1658538045.295763441] [localization.pose_estimator.ndt_scan_matcher]: Validation error.
[ublox_gps_node-20] terminate called after throwing an instance of 'std::runtime_error'

Full log is here https://gist.githubusercontent.com/gayar-helm/1d85fa5197ed2a10499a5c297c4f7b7e/raw/cf244b35b71a7b4db08b202420c56c7fc03834b1/runtime_log_2022_07_22.txt"
Rosbag replay simulation tutorial. Localization doesn't seem to work.,D_kwDOAnasMc4AQJdA,2022-07-20T19:17:18Z,gayar-helm,9,Answered,DC_kwDOAnasMc4AMP__,kminoda,"Sorry, my bad. I meant `logging_simulator.launch.xml`. So the correct executing command is 
`ros2 launch autoware_launch autoware.launch.xml vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit map_path:=/home/minoda/data/maps/sample-map-rosbag` (as per the tutorial).

And it seems `/sensing/lidar/top/velodyne_convert_node` appears now with `autoware.launch.xml` :thinking: 

How about the results for this?
`ros2 launch autoware_launch logging_simulator.launch.xml vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit map_path:=/home/minoda/data/maps/sample-map-rosbag perception:=false localization:=false planning:=false control:=false system:=false rviz:=false map:=false`"
Rosbag replay simulation tutorial. Localization doesn't seem to work.,D_kwDOAnasMc4AQJdA,2022-07-20T19:17:18Z,gayar-helm,9,Answered,DC_kwDOAnasMc4AMRvW,gayar-helm,"When I run it with `autoware.launch.xml ` like this:
`ros2 launch autoware_launch autoware.launch.xml map_path:=/autoware/sample-map-rosbag vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit perception:=false localization:=false planning:=false control:=false system:=false rviz:=false map:=false`

All the nodes and topics show up:

> root@8e387a5e890d:/autoware# ros2 node list | grep lidar/top
/sensing/lidar/top/crop_box_filter_mirror
/sensing/lidar/top/crop_box_filter_self
/sensing/lidar/top/pointcloud_preprocessor/transform_listener_impl_7f60ec0786e0
/sensing/lidar/top/pointcloud_preprocessor/transform_listener_impl_7f6128069f80
/sensing/lidar/top/pointcloud_preprocessor/transform_listener_impl_7f61600619f0
/sensing/lidar/top/pointcloud_preprocessor/transform_listener_impl_7f61745e1b60
/sensing/lidar/top/pointcloud_preprocessor/transform_listener_impl_7f61f8070110
/sensing/lidar/top/pointcloud_preprocessor/transform_listener_impl_7f623007d8d0
/sensing/lidar/top/pointcloud_preprocessor/transform_listener_impl_7f62740051e8
/sensing/lidar/top/pointcloud_preprocessor/velodyne_node_container
/sensing/lidar/top/ring_outlier_filter
/sensing/lidar/top/velodyne_convert_node
/sensing/lidar/top/velodyne_driver
/sensing/lidar/top/velodyne_interpolate_node
/sensing/lidar/top/velodyne_monitor

> root@8e387a5e890d:/autoware# ros2 topic list | grep lidar/top
/sensing/lidar/top/crop_box_filter/debug/cyclic_time_ms
/sensing/lidar/top/crop_box_filter/debug/processing_time_ms
/sensing/lidar/top/crop_box_filter_mirror/crop_box_polygon
/sensing/lidar/top/crop_box_filter_self/crop_box_polygon
/sensing/lidar/top/mirror_cropped/pointcloud_ex
/sensing/lidar/top/outlier_filtered/pointcloud
/sensing/lidar/top/pointcloud_raw
/sensing/lidar/top/pointcloud_raw_ex
/sensing/lidar/top/rectified/pointcloud
/sensing/lidar/top/rectified/pointcloud_ex
/sensing/lidar/top/ring_outlier_filter/debug/cyclic_time_ms
/sensing/lidar/top/ring_outlier_filter/debug/processing_time_ms
/sensing/lidar/top/self_cropped/pointcloud_ex
/sensing/lidar/top/velodyne_model_marker
/sensing/lidar/top/velodyne_packets
/sensing/lidar/top/velodyne_points_combined_ex
/sensing/lidar/top/velodyne_points_invalid_near

but if I changed it to `logging_simulator` like this:
`ros2 launch autoware_launch logging_simulator.launch.xml map_path:=/autoware/sample-map-rosbag vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit perception:=false localization:=false planning:=false control:=false system:=false rviz:=false map:=false`

I get only this:

> root@8e387a5e890d:/autoware# ros2 node list | grep lidar/top
root@8e387a5e890d:/autoware# ros2 topic list | grep lidar/top
/sensing/lidar/top/outlier_filtered/pointcloud
/sensing/lidar/top/velodyne_packets

full log for the **_second command_** is [here](https://gist.githubusercontent.com/gayar-helm/1d85fa5197ed2a10499a5c297c4f7b7e/raw/b6c6e16620efa7dc8ca002e598f9c23656497b20/log_2022_07_24.txt)"
Rosbag replay simulation tutorial. Localization doesn't seem to work.,D_kwDOAnasMc4AQJdA,2022-07-20T19:17:18Z,gayar-helm,9,Answered,DC_kwDOAnasMc4AMRxN,kminoda,"Thanks! Then it seems that `tier4_sensing_launch` causes the issue. But I still don't have any idea what the cause is...

BTW did you try updating your autoware workspace? Since the sub-repositories of Autoware are frequently updated, updating the whole workspace often solves the issues.
```
cd WORKSPACE
vcs import src < autoware.repos
vcs pull src
# if necessary: rosdep install -iry --from-paths src --rosdistro $ROS_DISTRO
# if necessary: rm -rf install && rm -rf build
colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release
source install/setup.bash
```"
Rosbag replay simulation tutorial. Localization doesn't seem to work.,D_kwDOAnasMc4AQJdA,2022-07-20T19:17:18Z,gayar-helm,9,Answered,DC_kwDOAnasMc4AMR1G,gayar-helm,"Thanks for suggestion!
I updated the workspace and rebuild everything from scratch but the issue remains the same. 

After the build I see this at the end:

> Summary: 242 packages finished [10min 18s]
  29 packages had stderr output: behavior_tree_plugin elevation_map_loader grid_map_pcl image_projection_based_fusion initial_pose_button_panel lidar_apollo_instance_segmentation lidar_centerpoint livox_tag_filter map_loader map_tf_generator ndt_omp neural_networks_provider openscenario_utility polar_grid pose_initializer scenario_test_runner simple_sensor_simulator simulator_compatibility_test tier4_control_rviz_plugin tier4_datetime_rviz_plugin tier4_localization_rviz_plugin tier4_perception_rviz_plugin tier4_planning_rviz_plugin tier4_screen_capture_rviz_plugin tier4_simulated_clock_rviz_plugin tier4_state_rviz_plugin tier4_traffic_light_rviz_plugin tier4_vehicle_rviz_plugin velodyne_pointcloud

Is this something to worry about?
Full build log is here [build.log](https://gist.githubusercontent.com/gayar-helm/1d85fa5197ed2a10499a5c297c4f7b7e/raw/8a6d7acb0b71141635b58774188b6c7e5f4e13de/build_07_24.txt)"
Rosbag replay simulation tutorial. Localization doesn't seem to work.,D_kwDOAnasMc4AQJdA,2022-07-20T19:17:18Z,gayar-helm,9,Answered,DC_kwDOAnasMc4AMR31,kminoda,"I guess that build log has nothing to do with the issue.

How about trying launching `lidar.launch.xml` in `sample_sensor_kit_launch`? This is the very launch file that launches the `velodyne_convert_node`. (Note that you need to provide appropriate arguments when launching the file directly)"
Rosbag replay simulation tutorial. Localization doesn't seem to work.,D_kwDOAnasMc4AQJdA,2022-07-20T19:17:18Z,gayar-helm,9,Answered,DC_kwDOAnasMc4AMSB_,gayar-helm,"Hmm, not sure if I ran it correctly but this is what I got:

> root@eb1379420f7e:/autoware# ros2 launch sample_sensor_kit_launch sensing.launch.xml map_path:=/autoware/sample-map-rosbag vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit perception:=false loca
lization:=false planning:=false control:=false system:=false rviz:=false map:=false
[INFO] [launch]: All log files can be found below /root/.ros/log/2022-07-25-00-31-56-641982-eb1379420f7e-187781
[INFO] [launch]: Default logging verbosity is set to INFO
Task exception was never retrieved
future: <Task finished name='Task-2' coro=<LaunchService._process_one_event() done, defined at /opt/ros/galactic/lib/python3.8/site-packages/launch/launch_service.py:226> exception=RuntimeError(""Included launch description missing required argument 'vehicle_mirror_param_file' (description: 'path to the file of vehicle mirror position yaml'), given: [map_path, vehicle_model, sensor_model, perception, localization, planning, control, system, rviz, map]"")>
Traceback (most recent call last):
  File ""/opt/ros/galactic/lib/python3.8/site-packages/launch/launch_service.py"", line 228, in _process_one_event
    await self.__process_event(next_event)
  File ""/opt/ros/galactic/lib/python3.8/site-packages/launch/launch_service.py"", line 248, in __process_event
    visit_all_entities_and_collect_futures(entity, self.__context))
  File ""/opt/ros/galactic/lib/python3.8/site-packages/launch/utilities/visit_all_entities_and_collect_futures_impl.py"", line 45, in visit_all_entities_and_collect_futures
    futures_to_return += visit_all_entities_and_collect_futures(sub_entity, context)
  File ""/opt/ros/galactic/lib/python3.8/site-packages/launch/utilities/visit_all_entities_and_collect_futures_impl.py"", line 45, in visit_all_entities_and_collect_futures
    futures_to_return += visit_all_entities_and_collect_futures(sub_entity, context)
  File ""/opt/ros/galactic/lib/python3.8/site-packages/launch/utilities/visit_all_entities_and_collect_futures_impl.py"", line 38, in visit_all_entities_and_collect_futures
    sub_entities = entity.visit(context)
  File ""/opt/ros/galactic/lib/python3.8/site-packages/launch/action.py"", line 108, in visit
    return self.execute(context)
  File ""/opt/ros/galactic/lib/python3.8/site-packages/launch/actions/include_launch_description.py"", line 150, in execute
    raise RuntimeError(
RuntimeError: Included launch description missing required argument 'vehicle_mirror_param_file' (description: 'path to the file of vehicle mirror position yaml'), given: [map_path, vehicle_model, sensor_model, perception, localization, planning, control, system, rviz, map]


I added parameter `vehicle_mirror_param_file:=./install/vehicle_info_util/share/vehicle_info_util/config/vehicle_mirror.param.yaml` and got this:

> root@eb1379420f7e:/autoware# ros2 launch sample_sensor_kit_launch sensing.launch.xml map_path:=/autoware/sample-map-rosbag vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit perception:=false localization:=false planning:=false control:=false system:=false rviz:=false map:=false vehicle_mirror_param_file:=./install/vehicle_info_util/share/vehicle_info_util/config/vehicle_mirror.param.yaml
[INFO] [launch]: All log files can be found below /root/.ros/log/2022-07-25-00-35-22-158557-eb1379420f7e-187785
[INFO] [launch]: Default logging verbosity is set to INFO
Task exception was never retrieved
future: <Task finished name='Task-2' coro=<LaunchService._process_one_event() done, defined at /opt/ros/galactic/lib/python3.8/site-packages/launch/launch_service.py:226> exception=KeyError('front_overhang')>
Traceback (most recent call last):
  File ""/opt/ros/galactic/lib/python3.8/site-packages/launch/launch_service.py"", line 228, in _process_one_event
    await self.__process_event(next_event)
  File ""/opt/ros/galactic/lib/python3.8/site-packages/launch/launch_service.py"", line 248, in __process_event
    visit_all_entities_and_collect_futures(entity, self.__context))
  File ""/opt/ros/galactic/lib/python3.8/site-packages/launch/utilities/visit_all_entities_and_collect_futures_impl.py"", line 45, in visit_all_entities_and_collect_futures
    futures_to_return += visit_all_entities_and_collect_futures(sub_entity, context)
  File ""/opt/ros/galactic/lib/python3.8/site-packages/launch/utilities/visit_all_entities_and_collect_futures_impl.py"", line 45, in visit_all_entities_and_collect_futures
    futures_to_return += visit_all_entities_and_collect_futures(sub_entity, context)
  File ""/opt/ros/galactic/lib/python3.8/site-packages/launch/utilities/visit_all_entities_and_collect_futures_impl.py"", line 45, in visit_all_entities_and_collect_futures
    futures_to_return += visit_all_entities_and_collect_futures(sub_entity, context)
  [Previous line repeated 10 more times]
  File ""/opt/ros/galactic/lib/python3.8/site-packages/launch/utilities/visit_all_entities_and_collect_futures_impl.py"", line 38, in visit_all_entities_and_collect_futures
    sub_entities = entity.visit(context)
  File ""/opt/ros/galactic/lib/python3.8/site-packages/launch/action.py"", line 108, in visit
    return self.execute(context)
  File ""/opt/ros/galactic/lib/python3.8/site-packages/launch/actions/opaque_function.py"", line 75, in execute
    return self.__function(context, *self.__args, **self.__kwargs)
  File ""/autoware/install/common_sensor_launch/share/common_sensor_launch/launch/velodyne_node_container.launch.py"", line 95, in launch_setup
    vehicle_info = get_vehicle_info(context)
  File ""/autoware/install/common_sensor_launch/share/common_sensor_launch/launch/velodyne_node_container.launch.py"", line 35, in get_vehicle_info
    p[""vehicle_length""] = gp[""front_overhang""] + gp[""wheel_base""] + gp[""rear_overhang""]
KeyError: 'front_overhang'
"
Rosbag replay simulation tutorial. Localization doesn't seem to work.,D_kwDOAnasMc4AQJdA,2022-07-20T19:17:18Z,gayar-helm,9,Answered,DC_kwDOAnasMc4AMUPR,kminoda,"It seems that the vehicle parameters should be loaded as well as the sensor parameters. 
Insert the following in `sample_sensor_kit_launch/lidar.launch.xml`
```
  <include file=""$(find-pkg-share global_parameter_loader)/launch/global_params.launch.py"">
    <arg name=""use_sim_time"" value=""true""/>
    <arg name=""vehicle_model"" value=""sample_vehicle""/>
  </include>
```
and then execute the following command:
```
ros2 launch sample_sensor_kit_launch sensing.launch.xml vehicle_mirror_param_file:=./install/vehicle_info_util/share/vehicle_info_util/config/vehicle_mirror.param.yaml 
```"
Rosbag replay simulation tutorial. Localization doesn't seem to work.,D_kwDOAnasMc4AQJdA,2022-07-20T19:17:18Z,gayar-helm,9,Answered,DC_kwDOAnasMc4AMUSB,gayar-helm,"Thanks for the reply!

I am still getting this error:

> root@ff4ea03ce768:/autoware# ros2 launch sample_sensor_kit_launch sensing.launch.xml vehicle_mirror_param_file:=./install/vehicle_info_util/share/vehicle_info_util/config/vehicle_mirror.param.yaml
[INFO] [launch]: All log files can be found below /root/.ros/log/2022-07-26-00-51-29-536867-ff4ea03ce768-48183
[INFO] [launch]: Default logging verbosity is set to INFO
Task exception was never retrieved
future: <Task finished name='Task-2' coro=<LaunchService._process_one_event() done, defined at /opt/ros/galactic/lib/python3.8/site-packages/launch/launch_service.py:226> exception=KeyError('front_overhang')>
Traceback (most recent call last):
  File ""/opt/ros/galactic/lib/python3.8/site-packages/launch/launch_service.py"", line 228, in _process_one_event
    await self.__process_event(next_event)
  File ""/opt/ros/galactic/lib/python3.8/site-packages/launch/launch_service.py"", line 248, in __process_event
    visit_all_entities_and_collect_futures(entity, self.__context))
  File ""/opt/ros/galactic/lib/python3.8/site-packages/launch/utilities/visit_all_entities_and_collect_futures_impl.py"", line 45, in visit_all_entities_and_collect_futures
    futures_to_return += visit_all_entities_and_collect_futures(sub_entity, context)
  File ""/opt/ros/galactic/lib/python3.8/site-packages/launch/utilities/visit_all_entities_and_collect_futures_impl.py"", line 45, in visit_all_entities_and_collect_futures
    futures_to_return += visit_all_entities_and_collect_futures(sub_entity, context)
  File ""/opt/ros/galactic/lib/python3.8/site-packages/launch/utilities/visit_all_entities_and_collect_futures_impl.py"", line 45, in visit_all_entities_and_collect_futures
    futures_to_return += visit_all_entities_and_collect_futures(sub_entity, context)
  [Previous line repeated 10 more times]
  File ""/opt/ros/galactic/lib/python3.8/site-packages/launch/utilities/visit_all_entities_and_collect_futures_impl.py"", line 38, in visit_all_entities_and_collect_futures
    sub_entities = entity.visit(context)
  File ""/opt/ros/galactic/lib/python3.8/site-packages/launch/action.py"", line 108, in visit
    return self.execute(context)
  File ""/opt/ros/galactic/lib/python3.8/site-packages/launch/actions/opaque_function.py"", line 75, in execute
    return self.__function(context, *self.__args, **self.__kwargs)
  File ""/autoware/install/common_sensor_launch/share/common_sensor_launch/launch/velodyne_node_container.launch.py"", line 95, in launch_setup
    vehicle_info = get_vehicle_info(context)
  File ""/autoware/install/common_sensor_launch/share/common_sensor_launch/launch/velodyne_node_container.launch.py"", line 35, in get_vehicle_info
    p[""vehicle_length""] = gp[""front_overhang""] + gp[""wheel_base""] + gp[""rear_overhang""]
KeyError: 'front_overhang'

This is how my [lidar.launch.xml](https://gist.githubusercontent.com/gayar-helm/1d85fa5197ed2a10499a5c297c4f7b7e/raw/de744cad9e8bc4c824af30443961b0b950059c12/lidar.launch.xml) looks like."
Rosbag replay simulation tutorial. Localization doesn't seem to work.,D_kwDOAnasMc4AQJdA,2022-07-20T19:17:18Z,gayar-helm,9,Answered,DC_kwDOAnasMc4AMb6x,kminoda,Would you try launching this one? [lidar.launch.xml](https://gist.github.com/kminoda/f0f0bffbfe927b5e8fa35cca4d038d71)
Rosbag replay simulation tutorial. Localization doesn't seem to work.,D_kwDOAnasMc4AQJdA,2022-07-20T19:17:18Z,gayar-helm,9,Answered,DC_kwDOAnasMc4ANEY4,gayar-helm,"Hi @kminoda ,
Sorry for delayed response. We figured out that there was some issue with Nvidia driver on the test machine and the simulation works now. Thanks a lot for you help!"
Rosbag replay simulation tutorial. Localization doesn't seem to work.,D_kwDOAnasMc4AQJdA,2022-07-20T19:17:18Z,gayar-helm,9,Answered,DC_kwDOAnasMc4ANExO,kminoda,"Good to hear that!
But that's kind of weird... the sensing module in the original autoware.universe does not depend on NVIDIA GPUs."
Proposal for use cases with OpsCons of the Open AD Kit 2.0,D_kwDOAnasMc4AQJog,2022-07-21T03:05:48Z,Unknown,3,Answered,,,
Proposal for use cases with OpsCons of the Open AD Kit 2.0,D_kwDOAnasMc4AQJog,2022-07-21T03:05:48Z,Unknown,3,Answered,DC_kwDOAnasMc4AM2Yi,Unknown,"The bellow spread sheet is the updated use cases that were explained in the WG meeting https://github.com/autowarefoundation/autoware/discussions/2787

[[CR-FY2022-089] Use cases with OpsCons.xlsx](https://github.com/autowarefoundation/autoware/files/9302536/CR-FY2022-089.Use.cases.with.OpsCons.xlsx)"
Proposal for use cases with OpsCons of the Open AD Kit 2.0,D_kwDOAnasMc4AQJog,2022-07-21T03:05:48Z,Unknown,3,Answered,DC_kwDOAnasMc4AM9UA,Unknown,I updated [the use cases](https://github.com/autowarefoundation/autoware/files/9336228/CR-FY2022-089.Use.cases.with.OpsCons_rev.B.xlsx) from [the discussion](https://github.com/orgs/autowarefoundation/discussions/2750#discussioncomment-3374559).
Proposal for use cases with OpsCons of the Open AD Kit 2.0,D_kwDOAnasMc4AQJog,2022-07-21T03:05:48Z,Unknown,3,Answered,DC_kwDOAnasMc4AM33f,kaspermeck-arm,"Hi @d-hashimoto, thanks for putting this together.

I'm a little confused with what is meant by OpsCons, is it the same as use-cases? Could you explain?

I've copied the first column from the spreadsheet below, so I can comment and ask questions.
1. Collect sensing data from the edge (Monitor Fleet Data)
Does this feature exist within Autoware already?
2. Enhance the capability of perception
I see this mentions manually annotating data, this is very labor intense. Who will do this work and on what sensor suite? How do you plan to measure that capability has been enhanced? How can we tell if we've succeeded?
3. Over-the-air update (Update wirelessly)
Is this eSync OTA?
4. Interoperate with MIH APIs
Where can MIH APIs be found? What type of sensor(s)? Are these sensors available to purchase?
5. Simulate scenario and sensors
This is quite vague, could you explain in more detail what you mean by ""simulate Autoware""? What type of simulation? How is the scenario simulated? How are the sensors simulated?

Before this proposal is agreed upon, I think we need more details. Overall, these ideas fit in the context of Open AD Kit, they're reasonable features within the scope. However, Open AD Kit doesn't develop new software features or annotate collected data for ML training, so a lot of collaboration with Autonomy Software and Simulation WGs (maybe some other WG?) is needed, as most of these use-cases you mention resides in these WGs. Are these WGs able to commit to these requests..?"
Proposal for use cases with OpsCons of the Open AD Kit 2.0,D_kwDOAnasMc4AQJog,2022-07-21T03:05:48Z,Unknown,3,Answered,DC_kwDOAnasMc4AM9T1,Unknown,"Hi @kasperornmeck , thank you for your response!

> I'm a little confused with what is meant by OpsCons, is it the same as use-cases? Could you explain?

The OpsCons describes system concepts, and it is more abstracted than use cases. In addition, use cases can have levels according to its abstraction. I attached the image of relationship between OpsCon and use cases.
![CR-FY2022-095  Relationships between ConOps, OpsCon, and UCs drawio](https://user-images.githubusercontent.com/89968601/184610396-12295439-7c1c-434f-b171-3af4f90f93da.png)


And also, I updated the spreadsheet according to the relationship. Please refer to the attached: 
[[CR-FY2022-089] Use cases with OpsCons_rev.B.xlsx](https://github.com/autowarefoundation/autoware/files/9336228/CR-FY2022-089.Use.cases.with.OpsCons_rev.B.xlsx)


> 1. Collect sensing data from the edge (Monitor Fleet Data)
Does this feature exist within Autoware already?

I think the feature has NOT been provided as open source yet. (cc @eratostennis )

> 2. Enhance the capability of perception
I see this mentions manually annotating data, this is very labor intense. 

As you mentioned, manually annotating data must be labor intense. If the WG find or offer a better way, like automated annotation tool, as a open source, the Open AD Kit must be a competitive tool.

> Who will do this work and on what sensor suite? How do you plan to measure that capability has been enhanced? How can we tell if we've succeeded?

I think SDV developers who use the Open AD Kit need to manually annotate data or need to find other solutions.

There is an extreme example to measure the capability:

- Precondition 1: prepare the following two perception components:
  1. a perception component (A) that can recognize vehicles but cannot distinguish ambulances from vehicles
  1. a perception component (B) that can recognize normal vehicles and ambulances
- Precondition 2: there is a sensing data that includes normal vehicles and ambulances
- Step 1: simulate the Autoware that has the perception component (A) with the sensing data -> ambulances can be recognized as a normal vehicle.
- Step 2: change the perception component from (A) to (B)
- Step 3: simulate the Autoware that has the perception component (B) with the sensing data -> ambulance can be recognized as a ambulance.

> 3. Over-the-air update (Update wirelessly)
Is this eSync OTA?

No. This document does NOT focus on specific implementation, but eSync OTA can be one of candidate implementations. The implementations that will be able to satisfy the concepts and use cases should be discussed in the WG.

> 4. Interoperate with MIH APIs
Where can MIH APIs be found? What type of sensor(s)? Are these sensors available to purchase?

Currently MIH APIs details are not established. From my understanding, the scope of Open AD Kit version 2.0 include the MIH demo and it will focus on the compatibility with MIH sensors (APIs).
(@eratostennis  @NaoyoriTanzawa if I misunderstood about the MIH APIs and MIH demo, please let me know)

> 5. Simulate scenario and sensors
This is quite vague, could you explain in more detail what you mean by ""simulate Autoware""? What type of simulation? How is the scenario simulated? How are the sensors simulated?

Sorry for the vague explanation. I would like to mentions cloud-based simulators explained [here](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/): planning simulation, rosbag replay simulation, and digital twin simulation. From my understanding, these verify Autoware's planning algorithm, perception algorithm, and both of them, respectively.

> Before this proposal is agreed upon, I think we need more details. Overall, these ideas fit in the context of Open AD Kit, they're reasonable features within the scope. However, Open AD Kit doesn't develop new software features or annotate collected data for ML training, so a lot of collaboration with Autonomy Software and Simulation WGs (maybe some other WG?) is needed, as most of these use-cases you mention resides in these WGs. Are these WGs able to commit to these requests..?

Yes, the Open AD Kit WG need to more collaborate with other WGs. To obtain collaboration from other WGs, I think we need to create more concrete plan to achieve our goal in the Open AD kit WG and need to propose the plan to the TSC.
"
Proposal for use cases with OpsCons of the Open AD Kit 2.0,D_kwDOAnasMc4AQJog,2022-07-21T03:05:48Z,Unknown,3,Answered,DC_kwDOAnasMc4AM-Rn,kaspermeck-arm,"@d-hashimoto 
Thanks for all the explanations, it makes more sense to me now.

I think that the proposal of the high-level features fit within the scope of Open AD Kit and its vision. My concern is that this proposal is too ambitious for Open AD Kit v2.0. I think that in order to commit to this proposal for the next release, a more detailed plan needs to be created. Else I'm afraid we won't be able to meet the deadline as we won't be able to approximate the amount of work which needs to be done."
Proposal for use cases with OpsCons of the Open AD Kit 2.0,D_kwDOAnasMc4AQJog,2022-07-21T03:05:48Z,Unknown,3,Answered,DC_kwDOAnasMc4AM-ik,Unknown,"@kasperornmeck Thank you for your feedback!

I understand your concerns. The use cases do not care for the current situation. As you mentioned, the scope might be ambitious, and we can narrow the scope for v2.0. I'll also create another compromise plan that is more feasible for us to develop v2.0."
Proposal for use cases with OpsCons of the Open AD Kit 2.0,D_kwDOAnasMc4AQJog,2022-07-21T03:05:48Z,Unknown,3,Answered,DC_kwDOAnasMc4AM-kG,kaspermeck-arm,@d-hashimoto excellent! :)
Proposal for use cases with OpsCons of the Open AD Kit 2.0,D_kwDOAnasMc4AQJog,2022-07-21T03:05:48Z,Unknown,3,Answered,DC_kwDOAnasMc4AM_q8,Unknown,"Please note that the closing date for comments or feedback on this discussion by August 19th. If no other comments have been received by that time, then this proposal will be accepted as is."
Proposal for use cases with OpsCons of the Open AD Kit 2.0,D_kwDOAnasMc4AQJog,2022-07-21T03:05:48Z,Unknown,3,Answered,DC_kwDOAnasMc4ANNuv,Unknown,"@LalithVipulananthan I fixed typos.
[[CR-FY2022-089] Use cases with OpsCons_rev.B.xlsx](https://github.com/autowarefoundation/autoware/files/9414856/CR-FY2022-089.Use.cases.with.OpsCons_rev.B.xlsx)
Thank you.
 "
Redundant publishers in ekf_localizer,D_kwDOAnasMc4AQJxf,2022-07-21T08:11:15Z,IshitaTakeshi,1,Answered,,,
Redundant publishers in ekf_localizer,D_kwDOAnasMc4AQJxf,2022-07-21T08:11:15Z,IshitaTakeshi,1,Answered,DC_kwDOAnasMc4AMMNr,kminoda,"Thanks! I agree with your suggestion.

Furthermore, I guess `debug/measured_pose` and `debug` topics are not necessary either.
`debug/measured_pose` is not necessary since `/localization/pose_estimator/pose_with_covariance` is expected to have the exact same messages (In other words, a set of input poses and a set of poses that are used for EKF update are expected to be the same in the current EKF). A similar argument holds with the `debug` topic."
2022-07-26 ODD working group weekly meeting (103),D_kwDOAnasMc4AQL-q,2022-07-25T10:03:05Z,Igata-ctrl,0,Unanswered,,,
[obstacle_avoidance_planner]: Component constructor threw an exception: expected [bool] got [not set],D_kwDOAnasMc4AQMAt,2022-07-25T11:05:34Z,brian841102,1,Answered,,,
[obstacle_avoidance_planner]: Component constructor threw an exception: expected [bool] got [not set],D_kwDOAnasMc4AQMAt,2022-07-25T11:05:34Z,brian841102,1,Answered,DC_kwDOAnasMc4AMT1D,VRichardJP,"You don't give much details how you launch everything.
Are you using https://github.com/autowarefoundation/autoware.universe/blob/main/launch/tier4_planning_launch/launch/scenario_planning/lane_driving/motion_planning/motion_planning.launch.py ?

The `use_pointcloud_container` option is used to facilitate the deployment of many components from many different launch files into the same container. You will find the following pattern in many launch files:
```python
    compare_map_container = ComposableNodeContainer(
        name=LaunchConfiguration(""container_name""),
        namespace="""",
        package=""rclcpp_components"",
        executable=LaunchConfiguration(""container_executable""),
        composable_node_descriptions=composable_nodes,
        condition=UnlessCondition(LaunchConfiguration(""use_pointcloud_container"")),
        output=""screen"",
    )

    load_composable_nodes = LoadComposableNodes(
        composable_node_descriptions=composable_nodes,
        target_container=LaunchConfiguration(""container_name""),
        condition=IfCondition(LaunchConfiguration(""use_pointcloud_container"")),
    )
```

Basically, if `use_pointcloud_container` is true, a container named after the `container_name` variable is expected to exist and the component will be deployed in it. The actual container is created by https://github.com/autowarefoundation/autoware_launch/blob/main/autoware_launch/launch/pointcloud_container.launch.py (which is included in the `autoware.launch.xml`).  When `use_pointcloud_container` is false, an ad-hoc container is created just for the launch file components."
[obstacle_avoidance_planner]: Component constructor threw an exception: expected [bool] got [not set],D_kwDOAnasMc4AQMAt,2022-07-25T11:05:34Z,brian841102,1,Answered,DC_kwDOAnasMc4AMUAP,VRichardJP,"As for your error, it is most likely the launch script you use to run `obstacle_avoidance_planner` is missing a param. Typically something like`LaunchConfiguration(""some_param"")` where `some_param` has no default value and is left unset."
[obstacle_avoidance_planner]: Component constructor threw an exception: expected [bool] got [not set],D_kwDOAnasMc4AQMAt,2022-07-25T11:05:34Z,brian841102,1,Answered,DC_kwDOAnasMc4AMUjO,brian841102,"![Screenshot 2022-07-26 18:17:58](https://user-images.githubusercontent.com/30545391/180983340-802e6e04-55c0-4b15-ab25-107f84e78a69.png)
I see the problem
obstacle_avoidance_planner.param.yaml exist in two place.
1.planning/obstacle_avoidance_planner/config/obstacle_avoidance_planner.param.yaml
2.launch/tier4_planning_launch/config/scenario_planning/lane_driving/motion_planning/obstacle_avoidance_planner/obstacle_avoidance_planner.param.yaml

The second one miss below parameter thus cause the problem.
plan_from_ego: false
max_plan_from_ego_length: 10.0

Thanks for your kindly reply"
[obstacle_avoidance_planner]: Component constructor threw an exception: expected [bool] got [not set],D_kwDOAnasMc4AQMAt,2022-07-25T11:05:34Z,brian841102,1,Answered,DC_kwDOAnasMc4AMUoU,VRichardJP,"Glad to hear that!
I think the code has been fixed with https://github.com/autowarefoundation/autoware.universe/commit/1495144b8ecaa425fc87e876c80dfca95d1fbf90"
[obstacle_avoidance_planner]: Component constructor threw an exception: expected [bool] got [not set],D_kwDOAnasMc4AQMAt,2022-07-25T11:05:34Z,brian841102,1,Answered,DC_kwDOAnasMc4AMbGr,brian841102,"Sure. I saw it. My branch is updated by 2022.07.04. Because we are porting the code manually, we had to stick with the old branch."
[Discussion] LiDAR Centerpoint Inference Process,D_kwDOAnasMc4AQMpq,2022-07-26T08:43:53Z,twbabyduck,2,Answered,,,
[Discussion] LiDAR Centerpoint Inference Process,D_kwDOAnasMc4AQMpq,2022-07-26T08:43:53Z,twbabyduck,2,Answered,DC_kwDOAnasMc4AMUZp,twbabyduck,"A simple way to test the inference using `lidar_centerpoint` package is shown as follows: (will edit later in this week)

Command
`
ros2 launch lidar_centerpoint lidar_centerpoint.launch.xml input/pointcloud:=/INPUT_TOPIC model_name:=centerpoint
`

Terminal 
```
Loading from /home/$USER/autoware/install/lidar_centerpoint/share/lidar_centerpoint/data/pts_voxel_encoder_centerpoint.engine
Loading from /home/$USER/autoware/install/lidar_centerpoint/share/lidar_centerpoint/data/backbone_neck_head_centerpoint.engine
```

INPUT
`
sensor_msgs::msg::PointCloud2
`

OUTPUT
`
autoware_auto_perception_msgs::msg::DetectedObjects
`

**Note (Expected Result):**
If the lidar point cloud is given then the inference code should be able to publish the DetectedObjects through above commands.

@yukke42 "
[Discussion] LiDAR Centerpoint Inference Process,D_kwDOAnasMc4AQMpq,2022-07-26T08:43:53Z,twbabyduck,2,Answered,DC_kwDOAnasMc4AMUlm,yukkysaito,"Can you confirm to detect objects following [tutorial](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/rosbag-replay-simulation/)? Then, pls confirm [here](https://github.com/autowarefoundation/autoware.universe/blob/main/launch/tier4_perception_launch/launch/perception.launch.xml#L7) the model is centerpoint.
"
[Discussion] LiDAR Centerpoint Inference Process,D_kwDOAnasMc4AQMpq,2022-07-26T08:43:53Z,twbabyduck,2,Answered,DC_kwDOAnasMc4AMUvk,twbabyduck,"@yukkysaito 
There is no issue to follow the tutorial and it can definitely detected the objects. The question is the `lidar_centerpoint` should be able to execute separately. Please confirm that if you can execute and get the detected objects from `lidar_centerpoint` node.
```
ros2 launch lidar_centerpoint lidar_centerpoint.launch.xml input/pointcloud:=/INPUT_TOPIC model_name:=centerpoint
```

"
[Discussion] LiDAR Centerpoint Inference Process,D_kwDOAnasMc4AQMpq,2022-07-26T08:43:53Z,twbabyduck,2,Answered,DC_kwDOAnasMc4AMUyh,yukkysaito,"It need tf (world to base link, base link to sensor frame id) to concatenate multi frame.
So, you need to try with sensing and localization module.

if multi frame is enable, it need tf. 
But now, in single frame mode, it need tf. I think it should be changed not to need tf."
[Discussion] LiDAR Centerpoint Inference Process,D_kwDOAnasMc4AQMpq,2022-07-26T08:43:53Z,twbabyduck,2,Answered,DC_kwDOAnasMc4AMUym,yukkysaito,@yukke42 How about?
[Discussion] LiDAR Centerpoint Inference Process,D_kwDOAnasMc4AQMpq,2022-07-26T08:43:53Z,twbabyduck,2,Answered,DC_kwDOAnasMc4AMUzk,twbabyduck,"Thanks for clarification! As we discussed in Discord, do we want to make a plan to provide single frame mode. "
[Discussion] LiDAR Centerpoint Inference Process,D_kwDOAnasMc4AQMpq,2022-07-26T08:43:53Z,twbabyduck,2,Answered,DC_kwDOAnasMc4AM7Ku,twbabyduck,"As discussed in the discord channel. If developer choose to user their own rosbag to test autoware perception package instead of using the data from this [tutorial](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/rosbag-replay-simulation/) 

They have to check the following steps:
(1) **lanelet2_map.osm** and **pointcloud_map.pcd** for the map
(2) a rosbag recorded at the same place of (1) so that autoware's localization module can publish **tf** information

However, in the step (1) some developers might not have corresponding (.osm) and considering they only want to test perception, it appears that the (.osm) should not be the necessary information. So, in this case should we provide instruction about this?

As for the step (2), what are the related packages have to modify in order to test the perception code so that the `tf` can properly generated from localization and sensing module with their own rosbag? (e.g. Modifications of concatenating point clouds, ...) 
"
[Discussion] LiDAR Centerpoint Inference Process,D_kwDOAnasMc4AQMpq,2022-07-26T08:43:53Z,twbabyduck,2,Answered,DC_kwDOAnasMc4AND-A,twbabyduck,"A simple way to test the inference using `lidar_centerpoint` package is shown as follows: 

Command
`
ros2 launch lidar_centerpoint lidar_centerpoint.launch.xml input/pointcloud:=/INPUT_TOPIC model_name:=centerpoint
`

Terminal 
```
Loading from /home/$USER/autoware/install/lidar_centerpoint/share/lidar_centerpoint/data/pts_voxel_encoder_centerpoint.engine
Loading from /home/$USER/autoware/install/lidar_centerpoint/share/lidar_centerpoint/data/backbone_neck_head_centerpoint.engine
```

INPUT
`
sensor_msgs::msg::PointCloud2
`

OUTPUT
`
autoware_auto_perception_msgs::msg::DetectedObjects
`

**Note (Expected Result):**
If the lidar point cloud is given then the inference code should be able to publish the DetectedObjects through above commands.

**Update**
The original setup in `lidar_centerpoint` by default its **densification** process is enabled, so it means that the input of `lidar_centerpoint` requires the **localization** module to publish  **tf** info

For those who want to test the `lidar_centerpoint` performance, you can use the above commands with the following steps:
(1) Check your input point cloud message's **frame_id** if you want to use **localization** module for the densification process make sure frame_id is `base_link`

(2) If your point cloud simply wants to check `lidar_centerpoint` visualization and ignore thr other setups, just to make sure go into the autoware workspace to enable rviz plugin visualization, then you can check the output topic named `/objects` with the corresponding `frame_id` in your point cloud's topic.

Hope the above description can assist those who want to test the `lidar_centerpoint` separately.
The details of the steps will update soon 😃 

"
[Discussion] LiDAR Centerpoint Inference Process,D_kwDOAnasMc4AQMpq,2022-07-26T08:43:53Z,twbabyduck,2,Answered,DC_kwDOAnasMc4ANE5r,aohsato,"@twbabyduck Thanks for your contribution! This is really helpful for simple testing centerpoint. :)

Additionally @yukke42 and we're re-design centerpoint for simple usecases like you, testing with only lidar pointcloud (in sensor frame) without full autoware system. We'll keep you updated."
[Discussion] LiDAR Centerpoint Inference Process,D_kwDOAnasMc4AQMpq,2022-07-26T08:43:53Z,twbabyduck,2,Answered,DC_kwDOAnasMc4AN5SZ,YueChuCheng,"@twbabyduck  Hi, thanks for your tutorial, but after I run `ros2 launch lidar_centerpoint lidar_centerpoint.launch.xml`, below error message shows up
`package 'lidar_centerpoint' found at '/home/USER/autoware.universe/install/lidar_centerpoint', but libexec directory '/home/USER/autoware.universe/install/lidar_centerpoint/lib/lidar_centerpoint' does not exist`


It seems like an executable file doesn't created after I run `colcon build`. Am I missing something, or how can I fix this?"
[Discussion] LiDAR Centerpoint Inference Process,D_kwDOAnasMc4AQMpq,2022-07-26T08:43:53Z,twbabyduck,2,Answered,DC_kwDOAnasMc4AN5TB,YueChuCheng,"And I'm curious. Can I test lidar_centerpoint with local data? For example, input .pcd or .bin into centerpoint model and output detection result?
"
[Discussion] LiDAR Centerpoint Inference Process,D_kwDOAnasMc4AQMpq,2022-07-26T08:43:53Z,twbabyduck,2,Answered,DC_kwDOAnasMc4AOEkS,yukke42,"@YueChuCheng 
Sorry for the late reply. We now trying to support to inference with rosbag w/o tf or pcd file."
[Discussion] LiDAR Centerpoint Inference Process,D_kwDOAnasMc4AQMpq,2022-07-26T08:43:53Z,twbabyduck,2,Answered,DC_kwDOAnasMc4AOIo6,lhakim85,"@YueChuCheng,
I try this [run with my rosbag](https://github.com/autowarefoundation/autoware.universe/issues/1384), I can get the ouput, but the result not so ok, sometime there is bounding box, sometime, no, maybe because input feed to the lidar centerpoint is raw pointcloud, not the rectified, need to figure it out.
My step
1. ros2 bag play coplace_0.db3 -l --remap /velodyne_points:=/sensing/lidar/top/rectified/pointcloud_ex
2. edit /config/obstacle_segmentation/ground_segmentation/ground_segmentation.param.yaml to include base_frame: velodyne
3. run ros2 launch perception.launch.xml
4. open rviz2, change the fixed frame to velodyne frame
5. add object detection by topic
"
[Discussion] LiDAR Centerpoint Inference Process,D_kwDOAnasMc4AQMpq,2022-07-26T08:43:53Z,twbabyduck,2,Answered,DC_kwDOAnasMc4AOcLw,YueChuCheng,"@lhakim85 Thanks for your reply, but how can you visualize the ""autoware_auto_perception_msgs/msg/DetectedObjects"" topic with rviz2? I mean, I can't find any topic for bbox results.

"
[Discussion] LiDAR Centerpoint Inference Process,D_kwDOAnasMc4AQMpq,2022-07-26T08:43:53Z,twbabyduck,2,Answered,DC_kwDOAnasMc4AOd1t,lhakim85,"@YueChuCheng, for LiDAR Centerpoint, the topic is /perception/object_recognition/detection/centerpoint/objects. 
![image](https://user-images.githubusercontent.com/10070989/193723047-a6c6caf4-cdb8-468b-8767-a8586aa98cd3.png)

"
Open AD Kit WG meeting 2022/07/28,D_kwDOAnasMc4AQM12,2022-07-26T13:46:25Z,Unknown,0,Unanswered,,,
Unable to open lanelet2 map in Autoware.ai,D_kwDOAnasMc4AQOsV,2022-07-27T04:54:14Z,SyahirMuzni,0,Unanswered,,,
Autonomy Software WG Meeting 2022/08/02,D_kwDOAnasMc4AQO92,2022-07-27T12:49:33Z,BonoloAWF,2,Answered,,,
Autonomy Software WG Meeting 2022/08/02,D_kwDOAnasMc4AQO92,2022-07-27T12:49:33Z,BonoloAWF,2,Answered,DC_kwDOAnasMc4AMm4o,MertClk,Leo Drive Bus Project Update: [Presentation](https://docs.google.com/presentation/d/1wG6ecFm3w--_SBGhuglvItV-KO6DU1cCX68fpybo9uM/edit?usp=sharing)
Autonomy Software WG Meeting 2022/08/02,D_kwDOAnasMc4AQO92,2022-07-27T12:49:33Z,BonoloAWF,2,Answered,DC_kwDOAnasMc4AMm8t,hueirutseng,"ITRI Bus Project Update: [Presentation](https://www.dropbox.com/s/lf54zna35pzasdl/ITRI%20ADV%20upgrade%20schedule_status%20update_20220802_v2.pdf?dl=0)
"
Technical Steering Committee (TSC) Meeting #44 (2022/07/20) Minutes,D_kwDOAnasMc4AQPdN,2022-07-28T05:36:02Z,mitsudome-r,0,Unanswered,,,
How to determine the vehicle specific parameters,D_kwDOAnasMc4AQP1S,2022-07-28T16:15:34Z,brkay54,5,Answered,,,
How to determine the vehicle specific parameters,D_kwDOAnasMc4AQP1S,2022-07-28T16:15:34Z,brkay54,5,Answered,DC_kwDOAnasMc4AMgAx,yukkysaito,"> In current autoware universe implementation, every module includes parameters from their own parameter files. Some of the parameters are vehicle specific parameters which would be used by another modules so it causes so many duplicated parameters. For example, both planning and control modules take the minimum-maximum jerk and acceleration parameters from their own parameter files. We want to load this kind of common parameters from one source to prevent confusion. How we should load parameters to modules from one file?

I agree with you. 
When closing to components such as planning or control, it is better to create a config in the each launcher. But some scene modules may want to define each of them. For example, when a red light comes on just before stopline in intersection, the decision to pass should be defined as the maximum_deceleration by ride quality. This cannot be common for other scene module in planning.
https://github.com/autowarefoundation/autoware.universe/tree/main/launch/tier4_planning_launch/config
https://github.com/autowarefoundation/autoware.universe/tree/main/launch/tier4_control_launch/config

If we want to make parameters between different components, it is better to create a config in autoware_launch
https://github.com/autowarefoundation/autoware_launch/tree/main/autoware_launch

>Also there are some module specific parameters (especially in behavior_path_planner and behavior_velocity_planner) like maximum_deceleration while lane changing. Should we assume these parameters as vehicle specific parameters? What should be borders of vehicle specific parameters?
In current universe, parameters are so complicated, I think we need to discuss a new parameter design. So please feel free to share your opinion.

Currently, vehicle specific parameters is  defined foo_vehicle_description pkg. this package is defined the size of the vehicle, the maximum acceleration that the vehicle can, etc.
But, it is dangerous to accelerate to the limit of what the vehicle can do. Also some parameters such as maximum acceleration is difference by each products (cargo, bus, taxi and etc.).
It is better not to include such non vehicle-specific information in vehicle_description.

Therefore, there will be double parameter like maximum_deceleration because it is defined by vehicle specific and product specific.  "
How to determine the vehicle specific parameters,D_kwDOAnasMc4AQP1S,2022-07-28T16:15:34Z,brkay54,5,Answered,DC_kwDOAnasMc4AMm2e,mehmetdogru,"I believe all the vehicle related parameters should be handled from one place. The reason behind it is that if one wants to implement autoware to a custom vehicle then in so many config files so many parameters needs to be changed and it is confusing. When it is said vehicle specific params it includes maximum_deceleration as well. 

So technically all the parameters which it would be needed to be altered in case of an autoware implementation of a different vehicle from the vehicle that subjects to previous odd should be gathered in one place with namespaces if necessary not to get confused with duplicated parameters. Then if you are implementing autoware to any vehicle you would just need to look at one place for vehicle specific configuration without any confusion and without any overlooked parameters."
How to determine the vehicle specific parameters,D_kwDOAnasMc4AQP1S,2022-07-28T16:15:34Z,brkay54,5,Answered,DC_kwDOAnasMc4AMpT9,doganulus,"Here are some of my observations from Autoware and other fields like web design where you have to manage a large number of parameters in the wild. 

- Local (package-wise) solution is relatively easy and flexible. This is good for experimentation. Probably I don't want to add new parameters to a common autoware repo when testing my new planning algorithm. Local parameters should remain in any way.
- True that a central place to manage some common parameters across packages is needed as the original poster explains and I think this is the reason for `global_parameter_loader`. There might be other levels like `vehicle`, `control`, and `planning` below the global level.
- Besides there would be a need to override the global parameter locally. I think the package should be the final decider about a parameter value (debatable but other control mechanisms are already in place to check the package quality --like Core vs Universe). 
- Finally at launch, all parameter values from all packages must constitute __a single mapping__ that can be printed as a JSON/YAML, etc. It is useful to think that all parameters are just a single JSON file. But the keys of this JSON file can be set at different levels (global, package collection, package).

From my experience, the most satisfying solution to handle such large and fluid parameter spaces is to employ a cascadable and hierarchical map data structure. JSON and YAML do the job of the hierarchical map part, but they don't specify a cascade/override mechanism normally (except for some web standards such as JSON Patch and Merge). Some other formats having those features natively are not widely used. 

Cascaded stylesheets (CSS) can also be a source of inspiration in this discussion. You know the browser merges all stylesheets (parameter files) from different levels (system, user, website) and launches the rendering process. I think we need similar functionality."
How to determine the vehicle specific parameters,D_kwDOAnasMc4AQP1S,2022-07-28T16:15:34Z,brkay54,5,Answered,DC_kwDOAnasMc4AM6J6,brkay54,"Hello everyone, I discussed with my colleagues and we want to propose an approach for this topic.

In our opinion, firstly we should divide parameters into two; `vehicle_specific` parameters (or `vehicle_dynamic`) and `module_specific` parameters.

- `vehicle_specific` parameters contain parameters that define vehicles **operational ranges and limitations** such as `max_steering_angle_dps`, `maximum_acceleration`, `maximum_jerk` etc.  These parameters will be loaded by `global_parameter_loader` and nodes can be use these limitations easily without declare them.
- `module_specific` parameters contains the parameters that are not included by `vehicle_specific` parameters.

@yukkysaito 
> I agree with you. When closing to components such as planning or control, it is better to create a config in the each launcher. But some scene modules may want to define each of them. For example, when a red light comes on just before stopline in intersection, the decision to pass should be defined as the maximum_deceleration by ride quality. This cannot be common for other scene module in planning. https://github.com/autowarefoundation/autoware.universe/tree/main/launch/tier4_planning_launch/config https://github.com/autowarefoundation/autoware.universe/tree/main/launch/tier4_control_launch/config

With this approach, we can also define the `module_specific` parameters inside the package. Node still can use this type of parameters. 

> Currently, vehicle specific parameters is defined foo_vehicle_description pkg. this package is defined the size of the vehicle, the maximum acceleration that the vehicle can, etc. But, it is dangerous to accelerate to the limit of what the vehicle can do. Also some parameters such as maximum acceleration is difference by each products (cargo, bus, taxi and etc.). It is better not to include such non vehicle-specific information in vehicle_description.

And, we can define this `vehicle_specific` parameters easily for each product because all product may be run in different operational range.
"
How to determine the vehicle specific parameters,D_kwDOAnasMc4AQP1S,2022-07-28T16:15:34Z,brkay54,5,Answered,DC_kwDOAnasMc4AM7DT,doganulus,"If we look at it closely, there is nothing special about the vehicle parameters. We could have wanted to separate `planning-specific` or `control-specific` parameters if some modules share some parameters (I think they already do). However, soon it would be a burden to do `X-specific` parameters; for example, why don't we have `planning-freespace-specific` parameters when Autoware's freespace capabilities expanded? 

So this is an architectural problem. Needs a generic solution. Otherwise, it will pop out repeatedly. 

The parameter system also affects other parts -- containerization, simulator integration, etc. It would be much easier if we could launch each node with a single YAML file across the system. In the current state, too much logic is embedded/hard-coded into launch files (a problem inherited from ROS); they should be dumber.

Relevant issue: autowarefoundation/autoware_launch#66

"
How to determine the vehicle specific parameters,D_kwDOAnasMc4AQP1S,2022-07-28T16:15:34Z,brkay54,5,Answered,DC_kwDOAnasMc4AM9T5,brkay54,"> If we look at it closely, there is nothing special about the vehicle parameters. We could have wanted to separate `planning-specific` or `control-specific` parameters if some modules share some parameters (I think they already do). However, soon it would be a burden to do `X-specific` parameters; for example, why don't we have `planning-freespace-specific` parameters when Autoware's freespace capabilities expanded?

Yes, they already do. Module specific parameters are same as current implementation. Each package is going to still has own parameter files. We will just put together the parameters that **define vehicles operational ranges and limitations** in `vehicle_specific` (or `vehicle_dynamic`) parameters. 

User should define easily operational limitations. For example, changing the vehicle (Bus to taxi for example), taxi's operational ranges are different from Bus (e.g. maximum longitudinal and lateral accelerations and jerks would be higher). With this structure, user can define the operational ranges easily just like the parameter [file](https://github.com/autowarefoundation/sample_vehicle_launch/blob/main/sample_vehicle_description/config/vehicle_info.param.yaml) in `sample_vehicle_description`. To change vehicle, user just need to update `vehicle_description` and `vehicle_specific` (or `vehicle_dynamic`, naming can be discussed) parameters. 

As Yukihiro-san said, If user want to change parameter to increase ride quality (for example `maximum_deceleration` for red lights), user can still the change this parameter from packages config file.

"
Rosbag replay simulation tutorial. Lidar latency/bandwidth issue.,D_kwDOAnasMc4AQQNR,2022-07-28T22:37:09Z,kasper-helm,1,Answered,,,
Rosbag replay simulation tutorial. Lidar latency/bandwidth issue.,D_kwDOAnasMc4AQQNR,2022-07-28T22:37:09Z,kasper-helm,1,Answered,DC_kwDOAnasMc4AM41y,kasper-helm,Update: I managed to improve this significantly by upgrading to a 32 core machine from a 4 core machine.
2022-08-02 ODD working group weekly meeting (104),D_kwDOAnasMc4AQQhC,2022-07-29T09:16:23Z,Igata-ctrl,0,Unanswered,,,
X Error of failed request:  BadDrawable (invalid Pixmap or Window parameter),D_kwDOAnasMc4AQSHl,2022-08-01T11:47:16Z,Light7Rain,0,Unanswered,,,
Covariance values of ekf input sources should be calculated,D_kwDOAnasMc4AQSNW,2022-08-01T13:58:45Z,meliketanrikulu,3,Answered,,,
Covariance values of ekf input sources should be calculated,D_kwDOAnasMc4AQSNW,2022-08-01T13:58:45Z,meliketanrikulu,3,Answered,DC_kwDOAnasMc4AMmtk,kminoda,"Thank you for the suggestion! Do you have any concrete ideas on how to calculate the covariance dynamically on which sensors?

Currently, there are three input sources in EKF: IMU, odometry, and the results of NDT (=LiDAR Localization).
Among these three, I believe that the covariance of NDT can and should ideally be calculated dynamically, for example as a function of transform probability.
For the other two sensors (IMU & odometry), IMHO it would be a bit more difficult to dynamically change the covariance since the covariance would be hardware-dependant. 

BTW the covariance of IMU and odometry can be calibrated beforehand using the [CalibrationTool](https://github.com/tier4/CalibrationTools) which we, TIER IV, recently made public. Note that this is just a static parameter and does not mean that the covariance can be dynamically calculated onboard."
Covariance values of ekf input sources should be calculated,D_kwDOAnasMc4AQSNW,2022-08-01T13:58:45Z,meliketanrikulu,3,Answered,DC_kwDOAnasMc4AMojd,meliketanrikulu,"Thanks for your reply @kminoda. While working on the vehicle, we detected that the odometry values ​​we received from the vehicle were inaccurate for a short time for the linear velocity and accordingly the position, which is the output of ekf, shifted. Related video is [here](https://youtu.be/_numWgazbkA). In this video, you can see the objects outside the road slide into the road.
![IMG_20220803_020333.jpg](https://user-images.githubusercontent.com/41450930/182488869-59b7a652-0f73-4e6f-a9a9-20fc8b56225d.jpg)
![IMG_20220803_020258.jpg](https://user-images.githubusercontent.com/41450930/182488959-09c0aa65-8e56-4af8-b79a-76942673b3f1.jpg)

  On top of that, we saw that the problem in this region was solved when we set the covariance values ​​related to linear velocity only to very high values ​​(set to 1000).  However, constantly keeping the linear velocity-related covariance values ​​this high naturally caused the position to flicker in the ekf output. Related video is [here](https://youtu.be/v7X8v4GR6AY)

We foresee that short-term errors may occur in ndt pose and imu data like this.  Ekf can tolerate the error in these cases by looking at the covariance values.  

I think the covariance calculations can be done via RMS(root mean square) error.  RMS errors are calculated based on the data distribution, by looking at how far the new incoming data deviates from the mean value. In this way, I think we can get accurate results at least for high frequency odometry and imu data. The sensors we use now also produce error values ​​in a similar way."
Covariance values of ekf input sources should be calculated,D_kwDOAnasMc4AQSNW,2022-08-01T13:58:45Z,meliketanrikulu,3,Answered,DC_kwDOAnasMc4AMokC,meliketanrikulu,Meanwhile we will try your calibration tool and share the results with you. Thanks for your suggestions @kminoda .
Covariance values of ekf input sources should be calculated,D_kwDOAnasMc4AQSNW,2022-08-01T13:58:45Z,meliketanrikulu,3,Answered,DC_kwDOAnasMc4AMonX,kminoda,"Thanks for sharing the interesting results!
> we detected that the odometry values ​​we received from the vehicle were inaccurate for a short time for the linear velocity and accordingly the position

May I ask why you think that the inaccuracy of odometry values caused the problem? It would be much more clear if you would share with us the ROSBAG (and the map, if possible) or the plot of the odometry velocity.

> I think the covariance calculations can be done via RMS(root mean square) error. RMS errors are calculated based on the data distribution, by looking at how far the new incoming data deviates from the mean value. In this way, I think we can get accurate results at least for high frequency odometry and imu data.

Would you elaborate more on the definition of RMS? Do you mean that, for example, setting the covariance of an input data $x(t)$ proportional to $RMS = ||x(t) - \frac{1}{t}\int_{0}^{t}x(t)||$ ?

"
Covariance values of ekf input sources should be calculated,D_kwDOAnasMc4AQSNW,2022-08-01T13:58:45Z,meliketanrikulu,3,Answered,DC_kwDOAnasMc4AMra6,meliketanrikulu,"Thanks for your reply. Here is our data:
[rosbag](https://drive.google.com/drive/folders/1ERw5_dW1WZOhH_9Z5Jo_U5wWtP8wU0kR?usp=sharing)
[map](https://drive.google.com/file/d/1CLJ9acywX_HgM0OAnhoSJs9V8gR82srD/view)"
Covariance values of ekf input sources should be calculated,D_kwDOAnasMc4AQSNW,2022-08-01T13:58:45Z,meliketanrikulu,3,Answered,DC_kwDOAnasMc4AMu_y,kminoda,"Thanks for sharing! So in which period of time in your rosbag did the above issue occur? As I briefly looked into the rosbag, it seems that there's a weird jump around 350[s] / 410[s]. Maybe this caused the issue you've mentioned?

Although no one in TIER IV is working on a similar topic, I guess it is possible to mitigate the adverse effect of such a jumpy behavior in the input data (though I think there are some alternative solutions other than the dynamic covariance estimation). Since it is difficult for us to provide the exact solution for the issue now as it seems strongly dependent on the hardware, I would be glad if you could share with us any concrete ideas or prototypes for the solution.

<img width=""1196"" alt=""スクリーンショット 2022-08-06 14 55 17"" src=""https://user-images.githubusercontent.com/44218668/183236275-d62bd471-3be4-45f3-b246-ed8e47bb85cf.png"">"
Covariance values of ekf input sources should be calculated,D_kwDOAnasMc4AQSNW,2022-08-01T13:58:45Z,meliketanrikulu,3,Answered,DC_kwDOAnasMc4AM0TD,meliketanrikulu,"Hello @kminoda . Thanks for your support . To verify the linear velocity from the instrument in hand, we would compare it with the linear velocity data from gnss-ins and observed that the velocity from the vehicle was always higher than it should have been. At the same time, we observed that the linear velocity data coming from the vehicle was louder. So for now we choose to use linear velocity from gnss-ins.
Here is our video : https://www.youtube.com/watch?v=hPVPqXyqHDA
In this video blue one is gnss-ins based linear velocity and red one is vehicle odometry based linear velocity.
We are currently continuing our tests.

"
Add safety slow down feature for specific crosswalks,D_kwDOAnasMc4AQTDl,2022-08-02T12:28:50Z,mehmetdogru,3,Answered,,,
Add safety slow down feature for specific crosswalks,D_kwDOAnasMc4AQTDl,2022-08-02T12:28:50Z,mehmetdogru,3,Answered,DC_kwDOAnasMc4AMs-m,TakaHoribe,@satoshi-ota FYI. Any comments?
Add safety slow down feature for specific crosswalks,D_kwDOAnasMc4AQTDl,2022-08-02T12:28:50Z,mehmetdogru,3,Answered,DC_kwDOAnasMc4AMs_D,VRichardJP,"If I understand your idea, you want the vehicle to slow down when it gets close to some specific crosswalk. But wouldn't it be simpler to just reduce the max speed on the road lanelet instead?"
Add safety slow down feature for specific crosswalks,D_kwDOAnasMc4AQTDl,2022-08-02T12:28:50Z,mehmetdogru,3,Answered,DC_kwDOAnasMc4AMtOu,mehmetdogru,"@VRichardJP 

Thank you for the input. Of course it would be for me; however not for the user. In such a case user would have to cut the lane before and after the crosswalk (create a separate lanelet) then modify the speed of the lanelet. And to make these changes on existing lanelet2_maps is also very time consuming. 

Also that kind of changes usually are not wanted since they don't have any semantic meaning. The ego vehicle is not slowing down because max speed limit is lower than the other lanes, it is slowing down to take extra precaution for the crosswalk and the decision of slowing down is autoware's to make. What I am trying to say is that I think max speed limits on lanelets should be used only to specify the legal speed limits decided by regulations (eg. speed limit traffic sign) or if it is a matter of the whole road all the way (eg. bumpy road structure). But crosswalk is not about the road itself it is a separate unit."
Add safety slow down feature for specific crosswalks,D_kwDOAnasMc4AQTDl,2022-08-02T12:28:50Z,mehmetdogru,3,Answered,DC_kwDOAnasMc4AMtVl,VRichardJP,"I get the point. Maybe it would make sense to add a `safety_slow_down_distance` parameter aswell? (in a similar fashion than `slow_margin` and `slow_velocity` work in `scene_crosswalk.cpp`)

For example, if we imagine a situation where a pedestrian may be hidden by a wall, the `safety_slow_down_distance` could be adjusted so that the `safety_slow_down_speed` is reached at the location from where the vehicle can finally see behind the wall. The `safety_slow_down_speed` would be maintained until the crosswalk has been passed."
Add safety slow down feature for specific crosswalks,D_kwDOAnasMc4AQTDl,2022-08-02T12:28:50Z,mehmetdogru,3,Answered,DC_kwDOAnasMc4AMtXf,mehmetdogru,Yes actually adding an extra tag as `safety_slow_down_distance` makes sense. Thank you!
Add safety slow down feature for specific crosswalks,D_kwDOAnasMc4AQTDl,2022-08-02T12:28:50Z,mehmetdogru,3,Answered,DC_kwDOAnasMc4AMtZV,mehmetdogru,Related issue: https://github.com/autowarefoundation/autoware.universe/issues/1523
Autonomy Software WG Meeting 2022/08/09,D_kwDOAnasMc4AQTFQ,2022-08-02T13:09:27Z,BonoloAWF,1,Answered,,,
Autonomy Software WG Meeting 2022/08/09,D_kwDOAnasMc4AQTFQ,2022-08-02T13:09:27Z,BonoloAWF,1,Answered,DC_kwDOAnasMc4AM0EU,xmfcx,"# Meeting Notes

## LeoDrive bus integration update

No updates this week,
- Georeferencing issues are being worked on,
- Next week the updates will be shared.


- https://github.com/autowarefoundation/autoware-documentation/issues/175
  - We'll look into this next week.

## Adastec Autoware Universe Field Test Presentation
- They've completed the field test for Autoware Universe
- Mert, Batuhan and Onur are presenting
- ![Screenshot from 2022-08-09 18-11-20](https://user-images.githubusercontent.com/10751153/183687733-015e32c9-eb35-4e47-a395-caa9dacff1d5.png)
- ![Screenshot from 2022-08-09 18-13-12](https://user-images.githubusercontent.com/10751153/183688172-7f93e7c0-3dfe-4a68-9ed3-b14ef4879d0a.png)
- ![Screenshot from 2022-08-09 18-14-09](https://user-images.githubusercontent.com/10751153/183688348-12162b18-a9c1-4556-8490-eff9587ff7b8.png)
- The NDT matcher was tested in 2 maps, one small, other one larger in comparison.
- It works fine on both maps.
- The perception stack of autoware lags behind.
  - https://github.com/orgs/autowarefoundation/discussions/2677

- https://github.com/autowarefoundation/autoware.universe/pull/647
  - @mehmetdogru is working on crosswalk implementation.
  - Once that is finished, this will be worked on.
  - HAD Map annotation method will be revised.
- https://github.com/autowarefoundation/autoware.universe/pull/1066
  - CI will be fixed.
- William He introduced themselves,
  - They work on Cellular Vehicle-to-Everything (C-V2X)
  - They might present on OpenAD-Kit WG
  - They are also using Carla Sim
  - Hatem invited for collaboration working with Carla Sim integration
  - William opened up this discussion: https://github.com/autowarefoundation/autoware/discussions/2784
- https://github.com/autowarefoundation/autoware.universe/pull/1071
  - This will be tested on vehicle before merging.
  - Next week will be tested.
- https://github.com/autowarefoundation/autoware.universe/pull/1159
  - Waiting for updates.
- https://github.com/autowarefoundation/autoware.universe/pull/1181
  - This will be rebased and worked on.
- @Sharrrrk said his colleague has finished working on lidar centerpoint
  - @ambroise-arm asked if he can reach out to him directly for the issues.
- https://github.com/autowarefoundation/autoware.universe/pull/1200#discussion_r915939898
  - The blocker on this task is dependent on finishing up the Point Types discussion.
  - @xmfcx will get back on this task once the documentaion is finished.
- Someone from perception team of Autoware should review these:
  - https://github.com/autowarefoundation/autoware.universe/pull/1351
  - https://github.com/autowarefoundation/autoware.universe/pull/1276
  - https://github.com/autowarefoundation/autoware.universe/pull/1352
- https://github.com/autowarefoundation/autoware.universe/pull/1369
- https://github.com/autowarefoundation/autoware.universe/pull/1401
  - Asked for updates from @yukkysaito 
- https://github.com/autowarefoundation/autoware.universe/pull/1419
  - Semantic PR CI has failed.
- https://github.com/autowarefoundation/autoware.universe/pull/1427
- https://github.com/autowarefoundation/autoware.universe/pull/1436
  - https://github.com/autowarefoundation/autoware.universe/pull/1436#issuecomment-1209596490
- https://github.com/autowarefoundation/autoware.universe/pull/1504
  - We've asked for details and image/result updates for the fix.
- https://github.com/autowarefoundation/autoware.universe/pull/1512/files
  - Is waiting for review from @TakaHoribe 
  - @MertClk: LeoDrive has referenced to Autoware.Auto ne_raptor_interface package while writing the package for Isuzu Bus project.
  - @brkay54 and @Sharrrrk offered help with reviewing.
- https://github.com/autowarefoundation/autoware.universe/pull/1528
  - It'll be merged tomorrow.
- https://github.com/autowarefoundation/autoware.universe/pull/1548

## Discussions

- Dear RosNodeViewer
  - https://github.com/autowarefoundation/autoware/discussions/2781
- TierIV will share some presentations/demos for showing off TILDE, CARET and Dear RosNodeViewer

## Bus ODD [high priority issues](https://github.com/autowarefoundation/autoware.universe/issues?q=is%3Aopen+label%3A%22high+priority%22+-milestone%3A%22Bus+ODD+July-Aug+Milestone%22) not in the current milestone

- https://github.com/autowarefoundation/autoware.universe/issues/1468
  - @mitsudome-r explained how TierIV's fleet management system handles bus stops and scheduling.
  - Instead of modifying the mission planner, maybe the goal pose can be modified by pre-processing it to fit to the box denoting the bus stop so people can turn off this feature if they wanted.
  - @mitsudome-r will talk internally to ask for trial to web.auto for bus odd demo purposes.
- https://github.com/autowarefoundation/autoware.universe/issues/1389
  - Find someone from Autoware Planning team to solve this issue.
- https://github.com/autowarefoundation/autoware.universe/issues/494
  - Asked for data source to replicate."
Failure When Running Digital Twin Simulation,D_kwDOAnasMc4AQTOR,2022-08-02T16:19:38Z,youxiho1,1,Answered,,,
Failure When Running Digital Twin Simulation,D_kwDOAnasMc4AQTOR,2022-08-02T16:19:38Z,youxiho1,1,Answered,DC_kwDOAnasMc4AMpFr,WJaworskiRobotec,"> But after I change the pose estimate in rviz, the car in the awsim simulator won't change to another position. Is that all right?

It does not work like that. Currently the position is predefined in the simulator and setting initial pose should be done in rviz to properly initialize Autoware. I'm working on automation of this process as the simulator knows the exact pose of ego so it could initialize Autoware without interaction of user.

> Besides, after I send the engage message, the car in the awsim won't move and there won't be a highlight red and green planning route in rviz.

Have you set the Goal Pose in rviz ? Please check video of running AWSIM and try to do exactly the same : [link](https://drive.google.com/file/d/1zPpPNDcTDc3ZSn3l64xv48a6SEYzQR3U/view?usp=sharing). Engage is being published all the time in one terminal."
Failure When Running Digital Twin Simulation,D_kwDOAnasMc4AQTOR,2022-08-02T16:19:38Z,youxiho1,1,Answered,DC_kwDOAnasMc4AMpn1,youxiho1,"Ah, thank you! I successfully ran the demo after I watched your video! Thank you for your help!

Btw, any idea about how to change the map and initial position of the car?"
Missing CUDA support in autoware-universe:latest..?,D_kwDOAnasMc4AQTWP,2022-08-02T20:11:29Z,kaspermeck-arm,2,Answered,,,
Missing CUDA support in autoware-universe:latest..?,D_kwDOAnasMc4AQTWP,2022-08-02T20:11:29Z,kaspermeck-arm,2,Answered,DC_kwDOAnasMc4AMokp,kenji-miyake,@kasperornmeck Could you show me the exact commands you executed?
Missing CUDA support in autoware-universe:latest..?,D_kwDOAnasMc4AQTWP,2022-08-02T20:11:29Z,kaspermeck-arm,2,Answered,DC_kwDOAnasMc4AMqgQ,kaspermeck-arm,"@kenji-miyake 

The `ghcr.io/autowarefoundation/autoware-universe:latest` container doesn't have CUDA support, so the ROS packages with CUDA dependencies won't build. When running `sudo apt list --installed | grep cuda` there is no output. After installing CUDA in `ghcr.io/autowarefoundation/autoware-universe:latest` using the [NVIDIA CUDA installation guide](https://developer.nvidia.com/cuda-11.0-download-archive?target_os=Linux&target_arch=x86_64&target_distro=Ubuntu&target_version=2004&target_type=deblocal), CUDA is found and the ROS packages compile properly.

In the [Docker installation](https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/docker-installation/#how-to-set-up-a-workspace) section, there aren't instructions how to compile using CUDA.

Should we add instructions how to compile using CUDA?"
Missing CUDA support in autoware-universe:latest..?,D_kwDOAnasMc4AQTWP,2022-08-02T20:11:29Z,kaspermeck-arm,2,Answered,DC_kwDOAnasMc4AMquB,kenji-miyake,"Ah, the image name has changed. Please use [latest-cuda](https://github.com/autowarefoundation/autoware/pkgs/container/autoware-universe/30821222?tag=latest-cuda) 
 instead.
I'll update the documentation at a later date."
Missing CUDA support in autoware-universe:latest..?,D_kwDOAnasMc4AQTWP,2022-08-02T20:11:29Z,kaspermeck-arm,2,Answered,DC_kwDOAnasMc4AMqu4,kaspermeck-arm,"@kenji-miyake 
Great, thanks! :) "
2022-08-03 Simulation Working Group Meeting,D_kwDOAnasMc4AQTrm,2022-08-03T08:55:28Z,WJaworskiRobotec,0,Unanswered,,,
where does the planner read the velocity from the lanelets of the map?,D_kwDOAnasMc4AQT1b,2022-08-03T13:12:03Z,Gian-Alessio,1,Answered,,,
where does the planner read the velocity from the lanelets of the map?,D_kwDOAnasMc4AQT1b,2022-08-03T13:12:03Z,Gian-Alessio,1,Answered,DC_kwDOAnasMc4AOLck,takayuki5168,"@Gian-Alessio 
The behavior_path_planner package calls `getCenterLinePath` to create the center line path.
In the function, velocity from the map is read and stored in the path.

https://github.com/autowarefoundation/autoware.universe/blob/2970485d533a0d5bc00a2e4601806f921d17e1e6/planning/route_handler/src/route_handler.cpp#L1185"
where does the planner read the velocity from the lanelets of the map?,D_kwDOAnasMc4AQT1b,2022-08-03T13:12:03Z,Gian-Alessio,1,Answered,DC_kwDOAnasMc4AOUnN,takayuki5168,@Gian-Alessio Can I close the discussion?
Is AWSIM open source? How to change the vehicle type/map/sensor of the AWSIM simulator?,D_kwDOAnasMc4AQT2B,2022-08-03T13:20:33Z,youxiho1,1,Answered,,,
Is AWSIM open source? How to change the vehicle type/map/sensor of the AWSIM simulator?,D_kwDOAnasMc4AQT2B,2022-08-03T13:20:33Z,youxiho1,1,Answered,DC_kwDOAnasMc4AMpsk,kosuke55,@YoshinoriTsutake @mackierx111 could you please answer?
Is AWSIM open source? How to change the vehicle type/map/sensor of the AWSIM simulator?,D_kwDOAnasMc4AQT2B,2022-08-03T13:20:33Z,youxiho1,1,Answered,DC_kwDOAnasMc4AMrMY,YoshinoriTsutake,"Thank you for your question. 
AWSIM is supposed to be open source in October. 
Once it has become open source, I will share the link in AWF community. "
Is AWSIM open source? How to change the vehicle type/map/sensor of the AWSIM simulator?,D_kwDOAnasMc4AQT2B,2022-08-03T13:20:33Z,youxiho1,1,Answered,DC_kwDOAnasMc4Abhmb,whbcumtb,AWSIM link: https://github.com/tier4/AWSIM
Lattice planner in autoware.ai,D_kwDOAnasMc4AQT2k,2022-08-03T13:31:36Z,lijiaming5550,0,Unanswered,,,
Open AD Kit WG meeting 2022/08/04,D_kwDOAnasMc4AQT57,2022-08-03T14:54:06Z,Unknown,1,Answered,,,
Open AD Kit WG meeting 2022/08/04,D_kwDOAnasMc4AQT57,2022-08-03T14:54:06Z,Unknown,1,Answered,DC_kwDOAnasMc4AMzvJ,Unknown,Hi @mitsudome-r! Were you able to chat with T4's Web team about how AWS and its various products/services are used within the company?
can't run AWSim in a docker container,D_kwDOAnasMc4AQULl,2022-08-03T23:12:36Z,HuaweiAlgolux,1,Answered,,,
can't run AWSim in a docker container,D_kwDOAnasMc4AQULl,2022-08-03T23:12:36Z,HuaweiAlgolux,1,Answered,DC_kwDOAnasMc4AMrWU,WJaworskiRobotec,"That's a problem:
`error: XDG_RUNTIME_DIR not set in the environment`

looks like you might have a problem with configuration of your docker image to run graphical programs. What docker image do you use ?"
can't run AWSim in a docker container,D_kwDOAnasMc4AQULl,2022-08-03T23:12:36Z,HuaweiAlgolux,1,Answered,DC_kwDOAnasMc4AMsCM,HuaweiAlgolux,just a docker image we created to run Autoware Universe. Are there specific requirements? Where can I find those requirements so that I can fix the issue myself?
can't run AWSim in a docker container,D_kwDOAnasMc4AQULl,2022-08-03T23:12:36Z,HuaweiAlgolux,1,Answered,DC_kwDOAnasMc4AMsKl,WJaworskiRobotec,"I'm not familiar with the docker for Autoware Universe. I think you need to have a GPU accelerated conatiner for running simulation : https://github.com/NVIDIA/nvidia-docker .

But maybe for now it might be easier to run Autoware in the container and Simulation in your local system ? I think ros2 communication should be available"
can't run AWSim in a docker container,D_kwDOAnasMc4AQULl,2022-08-03T23:12:36Z,HuaweiAlgolux,1,Answered,DC_kwDOAnasMc4AMuFb,HuaweiAlgolux,I will try it today. thanks
Gear does not change when vehicle stopped,D_kwDOAnasMc4AQUpo,2022-08-04T13:46:02Z,brkay54,1,Answered,,,
Gear does not change when vehicle stopped,D_kwDOAnasMc4AQUpo,2022-08-04T13:46:02Z,brkay54,1,Answered,DC_kwDOAnasMc4AMwvT,VRichardJP,"I agree. This functionality is easily implemented in `shift_decider` node, by subscribing to `/autoware/state` switching shift to `GearCommand::PARK`  when `AutowareState::ARRIVED_GOAL` is received. Maybe it would be nice to add a `park_on_arrival` option to `shift_decider` node?"
Gear does not change when vehicle stopped,D_kwDOAnasMc4AQUpo,2022-08-04T13:46:02Z,brkay54,1,Answered,DC_kwDOAnasMc4ANvjq,yukkysaito,"> I agree. This functionality is easily implemented in shift_decider node, by subscribing to /autoware/state switching shift to GearCommand::PARK when AutowareState::ARRIVED_GOAL is received. Maybe it would be nice to add a park_on_arrival option to shift_decider node?

I agree. :+1: "
Gear does not change when vehicle stopped,D_kwDOAnasMc4AQUpo,2022-08-04T13:46:02Z,brkay54,1,Answered,DC_kwDOAnasMc4ANvkA,TakaHoribe,"The proposal of @VRichardJP sounds good to me. The `park_on_arrival` option is nice, too."
Gear does not change when vehicle stopped,D_kwDOAnasMc4AQUpo,2022-08-04T13:46:02Z,brkay54,1,Answered,DC_kwDOAnasMc4AOE8R,takayuki5168,"@VRichardJP @brkay54 
The PR has been already merged. I guess this discussion can be closed.
https://github.com/autowarefoundation/autoware.universe/pull/1818"
Questions about autoware.auto repository in github and gitlab,D_kwDOAnasMc4AQVJy,2022-08-05T06:18:27Z,kaola0504,0,Unanswered,,,
Disk usage analysis of CUDA-enabled container image,D_kwDOAnasMc4AQVup,2022-08-06T00:07:02Z,kaspermeck-arm,1,Answered,,,
Disk usage analysis of CUDA-enabled container image,D_kwDOAnasMc4AQVup,2022-08-06T00:07:02Z,kaspermeck-arm,1,Answered,DC_kwDOAnasMc4ANfGr,Sharrrrk,"Hi @kasperornmeck, very good point of view and thank you for the detailed analysis.

As we can see from the disk usage analysis, the major usage is from CUDA and GNU related environment. From production container point of view, there are lots of libs and pkgs are only required for development. 

So for the first step, I looked into 4 CUDA related packages and analyzed the dependencies:
- lidar_apollo_instance_segmentation
- lidar_centerpoint
- tensorrt_yolo
- traffic_light_classifier

From `/usr/local` path, they only rely on two .so files:
```
/usr/local/cuda-11.4/lib64/libcublas.so.11  # 146M
/usr/local/cuda-11.4/lib64/libcublasLt.so.11 # 295M
```
So I'm quite confident that the most disk usage in `/usr/local` path could be removed in runtime environment. 

As a first step, I will try to do more tests on all other  packages and then try to build a runtime docker locally to run Autoware which only integrates run time cuda libraries."
Disk usage analysis of CUDA-enabled container image,D_kwDOAnasMc4AQVup,2022-08-06T00:07:02Z,kaspermeck-arm,1,Answered,DC_kwDOAnasMc4ANjrR,Sharrrrk,I created an issue to follow this task : [issue-2840](https://github.com/autowarefoundation/autoware/issues/2840)
Disk usage analysis of CUDA-enabled container image,D_kwDOAnasMc4AQVup,2022-08-06T00:07:02Z,kaspermeck-arm,1,Answered,DC_kwDOAnasMc4AN0Eo,kaspermeck-arm,"@Sharrrrk 
I'll comment in this issue."
Dear RosNodeViewer: What a cool ROS node viewer !!,D_kwDOAnasMc4AQWur,2022-08-08T09:28:54Z,takeshi-iwanari,0,Unanswered,,,
2022-08-09 ODD working group weekly meeting (105),D_kwDOAnasMc4AQWvm,2022-08-08T09:48:54Z,Igata-ctrl,0,Unanswered,,,
AWSIM: Autoware doesn't plan trajectory,D_kwDOAnasMc4AQW4C,2022-08-08T13:52:52Z,mojomex,5,Answered,,,
AWSIM: Autoware doesn't plan trajectory,D_kwDOAnasMc4AQW4C,2022-08-08T13:52:52Z,mojomex,5,Answered,DC_kwDOAnasMc4AM1GV,shmpwk,"Same things happened for me when launching autoware soon after launching AWSIM.x86_64.
However I succeeded when 
- launching AWSIM.x86_64, waiting until it is ready and launching autoware
- launching autoware first and launching AWSIM.x86_64 after that.

But I don't understand why this happens.

Also, I succeeded to run with my desktop PC, but failed to run with my note PC.

My notePC 
```
$ lscpu
Architecture:                    x86_64
CPU op-mode(s):                  32-bit, 64-bit
Byte Order:                      Little Endian
Address sizes:                   39 bits physical, 48 bits virtual
CPU(s):                          16
On-line CPU(s) list:             0-15
Thread(s) per core:              2
Core(s) per socket:              8
Socket(s):                       1
NUMA node(s):                    1
Vendor ID:                       GenuineIntel
CPU family:                      6
Model:                           141
Model name:                      11th Gen Intel(R) Core(TM) i7-11800H @ 2.30GHz
Stepping:                        1
CPU MHz:                         2300.000
CPU max MHz:                     4600.0000
CPU min MHz:                     800.0000
BogoMIPS:                        4608.00
Virtualization:                  VT-x
L1d cache:                       384 KiB
L1i cache:                       256 KiB
L2 cache:                        10 MiB
L3 cache:                        24 MiB
NUMA node0 CPU(s):               0-15

```
```
$ lspci | grep -i nvidia
01:00.0 VGA compatible controller: NVIDIA Corporation Device 2520 (rev a1)
```


My desktop PC
```
$ lscpu
Architecture:                    x86_64
CPU op-mode(s):                  32-bit, 64-bit
Byte Order:                      Little Endian
Address sizes:                   39 bits physical, 48 bits virtual
CPU(s):                          16
On-line CPU(s) list:             0-15
Thread(s) per core:              2
Core(s) per socket:              8
Socket(s):                       1
NUMA node(s):                    1
Vendor ID:                       GenuineIntel
CPU family:                      6
Model:                           158
Model name:                      Intel(R) Core(TM) i9-9900K CPU @ 3.60GHz
Stepping:                        13
CPU MHz:                         4199.999
CPU max MHz:                     5000.0000
CPU min MHz:                     800.0000
BogoMIPS:                        7200.00
Virtualization:                  VT-x
L1d cache:                       256 KiB
L1i cache:                       256 KiB
L2 cache:                        2 MiB
L3 cache:                        16 MiB
NUMA node0 CPU(s):               0-15

```
```
$ lspci |grep -i nvidia
01:00.0 VGA compatible controller: NVIDIA Corporation TU102 [GeForce RTX 2080 Ti] (rev a1)
```
Do you have any ideas? @WJaworskiRobotec :bow: "
AWSIM: Autoware doesn't plan trajectory,D_kwDOAnasMc4AQW4C,2022-08-08T13:52:52Z,mojomex,5,Answered,DC_kwDOAnasMc4ANdLc,paolacanuto,Is there any update on this? It's also unreliable for me
AWSIM: Autoware doesn't plan trajectory,D_kwDOAnasMc4AQW4C,2022-08-08T13:52:52Z,mojomex,5,Answered,DC_kwDOAnasMc4AORJv,shmpwk,"@mojomex @paolacanuto 
Could you try changing these? It reduces the CPU computation cost.

```
$ git diff autoware/src/universe/autoware.universe/launch/tier4_perception_launch/launch/perception.launch.xml

-  <arg name=""input/pointcloud"" default=""/sensing/lidar/concatenated/pointcloud"" description=""The topic will be used in the detection module""/>
+  <arg name=""input/pointcloud"" default=""/sensing/lidar/top/outlier_filtered/pointcloud"" description=""The topic will be used in the detection module""/>
```

```
$ git diff launch/tier4_perception_launch/launch/obstacle_segmentation/ground_segmentation/ground_segmentation.launch.py
@@ -521,7 +521,7 @@ def generate_launch_description():
     add_launch_arg(""use_pointcloud_container"", ""False"")
     add_launch_arg(""container_name"", ""perception_pipeline_container"")
     add_launch_arg(""tier4_perception_launch_param_path"", ""tier4_perception_launch parameter path"")
-    add_launch_arg(""input/pointcloud"", ""/sensing/lidar/concatenated/pointcloud"")
+    add_launch_arg(""input/pointcloud"", ""/sensing/lidar/top/outlier_filtered/pointcloud"")
```"
AWSIM: Autoware doesn't plan trajectory,D_kwDOAnasMc4AQW4C,2022-08-08T13:52:52Z,mojomex,5,Answered,DC_kwDOAnasMc4AORiO,akorb,Could it be related to this? https://github.com/autowarefoundation/autoware.universe/issues/1009
AWSIM: Autoware doesn't plan trajectory,D_kwDOAnasMc4AQW4C,2022-08-08T13:52:52Z,mojomex,5,Answered,DC_kwDOAnasMc4AORih,shmpwk,"@akorb Yes, exactly it is related thank you. "
AWSIM: Autoware doesn't plan trajectory,D_kwDOAnasMc4AQW4C,2022-08-08T13:52:52Z,mojomex,5,Answered,DC_kwDOAnasMc4AOyfl,shmpwk,"The newest version of Autoware awsim-stable branch has reduced the CPU usage, which leads to adress this problem.

Could you try the newest version of Autoware awsim-stable branch? @mojomex @paolacanuto

FIY, We have published the [AWSIM](https://github.com/tier4/AWSIM) and updated the [documentation](https://tier4.github.io/AWSIM/GettingStarted/QuickStartDemo/)."
C-V2X Enabled Collaborative Autonomous Driving - Simulation Ground (CARLA+ROS2+Autoware),D_kwDOAnasMc4AQW4W,2022-08-08T13:59:36Z,Croquembouche,1,Answered,,,
C-V2X Enabled Collaborative Autonomous Driving - Simulation Ground (CARLA+ROS2+Autoware),D_kwDOAnasMc4AQW4W,2022-08-08T13:59:36Z,Croquembouche,1,Answered,DC_kwDOAnasMc4AMx6t,hatem-darweesh,"Hi @Croquembouche 
I am working on exactly that, perhaps if we collaborate, we can achieve a common goal. 
This is my first results: 
[Video Demo ](https://youtu.be/ELr_BeuxG1s)
[Bridge source](https://github.com/hatem-darweesh/op_bridge/tree/ros2)
[Client source](https://github.com/hatem-darweesh/op_agent/tree/ros2)

Also we can discuss in details in the Autoware-OpenPlanner working group meeting. Next meeting is on Tuesday 9th 4 pm Japan Time. 
we have meeting same time every two weeks. 

Regards, "
C-V2X Enabled Collaborative Autonomous Driving - Simulation Ground (CARLA+ROS2+Autoware),D_kwDOAnasMc4AQW4W,2022-08-08T13:59:36Z,Croquembouche,1,Answered,DC_kwDOAnasMc4AMyos,Croquembouche,Wonderful! Is that ODD group meeting?
C-V2X Enabled Collaborative Autonomous Driving - Simulation Ground (CARLA+ROS2+Autoware),D_kwDOAnasMc4AQW4W,2022-08-08T13:59:36Z,Croquembouche,1,Answered,DC_kwDOAnasMc4AMzC1,hatem-darweesh,"No, It is OpenPlanner working group meeting. "
How to uninstall autware,D_kwDOAnasMc4AQXb5,2022-08-09T08:58:20Z,kenichirohatayama,1,Answered,,,
How to uninstall autware,D_kwDOAnasMc4AQXb5,2022-08-09T08:58:20Z,kenichirohatayama,1,Answered,DC_kwDOAnasMc4AMzcr,kenji-miyake,"@kenichirohatayama Hi, I briefly wrote the steps. Is it clear to you?

## Clean up your workspace

```console
rm -rf ~/autoware
```

## Clean up your .bashrc

Please remove unnecessary lines.

```console
vim ~/.bashrc
```

## Uninstall software installed via `rosdep`

It is difficult to specify the target packages exactly.
I think it's good to remove all ROS packages and re-install ROS.

```console
sudo apt purge ros-$ROS_DISTRO-*
sudo apt install ros-$ROS_DISTRO-desktop
```

## Uninstall software installed via Ansible

Please refer to https://github.com/autowarefoundation/autoware/tree/main/ansible/roles and uninstall each software respectively."
How to uninstall autware,D_kwDOAnasMc4AQXb5,2022-08-09T08:58:20Z,kenichirohatayama,1,Answered,DC_kwDOAnasMc4AMzef,kenichirohatayama,Thank you for your help
Open AD Kit WG meeting 2022/08/11,D_kwDOAnasMc4AQXl5,2022-08-09T13:00:10Z,Unknown,0,Unanswered,,,
"[scenario_selector] trajectory is delayed: scenario = %s, delay = %f, th_max_message_delay = %f",D_kwDOAnasMc4AQYG7,2022-08-10T06:40:41Z,brian841102,1,Answered,,,
"[scenario_selector] trajectory is delayed: scenario = %s, delay = %f, th_max_message_delay = %f",D_kwDOAnasMc4AQYG7,2022-08-10T06:40:41Z,brian841102,1,Answered,DC_kwDOAnasMc4AOE97,takayuki5168,"@brian841102 Sorry to be late.

[AutowareArchitectureProposal.iv](https://github.com/tier4/AutowareArchitectureProposal.iv) has been already archived.
Now, we, Autoware Foundation including TIER IV, supports [autoware](https://github.com/autowarefoundation/autoware) with [autoware.universe](https://github.com/autowarefoundation/autoware.universe).

We're happy if you use autoware and always welcome your question or discussion.
Let me know if you have the same problem with autoware."
Autonomy Software WG Meeting 2022/08/16,D_kwDOAnasMc4AQYMa,2022-08-10T09:10:40Z,BonoloAWF,3,Answered,,,
Autonomy Software WG Meeting 2022/08/16,D_kwDOAnasMc4AQYMa,2022-08-10T09:10:40Z,BonoloAWF,3,Answered,DC_kwDOAnasMc4AM_B8,MertClk,"Leo Drive Bus Project Update: [Presentation](https://docs.google.com/presentation/d/1m2wqfF-cSLaN8pRY1nYrtearKK4TqLfHZFjW4vSmwJs/edit?usp=sharing)

Vehicle Footprint PR: [#1577](https://github.com/autowarefoundation/autoware.universe/pull/1577)"
Autonomy Software WG Meeting 2022/08/16,D_kwDOAnasMc4AQYMa,2022-08-10T09:10:40Z,BonoloAWF,3,Answered,DC_kwDOAnasMc4AM_Gl,hueirutseng,"ITRI Bus Update: [Presentation](https://github.com/autowarefoundation/autoware/files/9348739/ITRI.ADV.upgrade.schedule_status.update_20220816.pdf)
 
Issue Report: Behavior Planner Crash when encounter more than one STOP Line 
https://github.com/orgs/autowarefoundation/discussions/2791"
Autonomy Software WG Meeting 2022/08/16,D_kwDOAnasMc4AQYMa,2022-08-10T09:10:40Z,BonoloAWF,3,Answered,DC_kwDOAnasMc4AM_Hg,xmfcx,@brkay54 to share control evaluation findings next week: https://github.com/autowarefoundation/autoware.universe/issues/567
Location of Perception and Routing Request Files in Autoware,D_kwDOAnasMc4AQYoX,2022-08-10T20:53:28Z,tninja1,1,Answered,,,
Location of Perception and Routing Request Files in Autoware,D_kwDOAnasMc4AQYoX,2022-08-10T20:53:28Z,tninja1,1,Answered,DC_kwDOAnasMc4ANIE0,shmpwk,"A sample record file is rosbag file described in [rosbag-replay-simulation](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/rosbag-replay-simulation/), which includes perception with obstacles.

Also, you can interactively manipulate obstacle with [planning-simulation](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/). See [here](https://github.com/autowarefoundation/autoware.universe/pull/554) or [here](https://github.com/autowarefoundation/autoware.universe/blob/main/common/tier4_perception_rviz_plugin/README.md)."
Behavior Planner Crash when encounter more than one STOP Line,D_kwDOAnasMc4AQY2o,2022-08-11T07:22:42Z,brian841102,1,Answered,,,
Behavior Planner Crash when encounter more than one STOP Line,D_kwDOAnasMc4AQY2o,2022-08-11T07:22:42Z,brian841102,1,Answered,DC_kwDOAnasMc4ANDTI,brian841102,"I find where the issue occurs. This fault has been fixed in commit https://github.com/autowarefoundation/autoware.universe/commit/b190ea75196f981b3155428d6f4904442bd67617
Thanks for reviewing my question."
2022-08-16 ODD working group weekly meeting (106),D_kwDOAnasMc4AQZoM,2022-08-12T08:06:24Z,Igata-ctrl,0,Unanswered,,,
Simulation examples using `docker-compose` and prebuilt images,D_kwDOAnasMc4AQa3U,2022-08-14T21:52:56Z,doganulus,0,Unanswered,,,
How to launch autoware together with LGSVL simulator?,D_kwDOAnasMc4AQbnS,2022-08-16T02:03:33Z,jiangguoding,3,Answered,,,
How to launch autoware together with LGSVL simulator?,D_kwDOAnasMc4AQbnS,2022-08-16T02:03:33Z,jiangguoding,3,Answered,DC_kwDOAnasMc4ANAFy,HuaweiAlgolux,"I don't think it's currently compatible with Autoware Universe, it's compatible with Autoware Auto and Autoware AI"
How to launch autoware together with LGSVL simulator?,D_kwDOAnasMc4AQbnS,2022-08-16T02:03:33Z,jiangguoding,3,Answered,DC_kwDOAnasMc4ANAvR,jiangguoding,Thanks for your info.
How to launch autoware together with LGSVL simulator?,D_kwDOAnasMc4AQbnS,2022-08-16T02:03:33Z,jiangguoding,3,Answered,DC_kwDOAnasMc4ANAGe,HuaweiAlgolux,"Here is a summary of what I've learned. Correct me if I'm wrong.
- AWSim: It's also called TierIV Sim, was started after LGSVL announced sunset, and it's designed to be the default simulator with Autoware Core/Universe instead of LGSVL, Unity game engine 2021.1.7f1 is used in AWSim, you can check [AWSim tutorial](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/digital-twin-simulation/awsim-tutorial/). The first official release is yet to come.

- [Scenario Simulator V2](https://tier4.github.io/scenario_simulator_v2-docs/) (also developed by TierIV, compatible with Autoware Core/Universe, the most mature one, has been used to create and test different scenarios for bus ODD), one can test planning and control, but localization and perception are based on ground truth because there is no sensor simulation. AWSim has simulated sensors, AWSim is for testing the entire autonomous driving stack. That’s the main difference between AWSIM and Scenario Simulator V2. And also SS2 has scenario generation functionality and traffic simulation too

- MORAI SIM: Drive(is also based on Unity game engine, compatible with Autoware Core/Universe https://morai.atlassian.net/wiki/external/1098547535/MTJjMDRmZDlhZDhiNDI2YzhkNzgzMWJiMjNiYTYxMzc), but it’s commercially available, not free.

- Carla: not yet compatible with Autoware Core/Universe, still needs a lot of development to make it fully compatible with Autoware Core/Universe: [ROS bridge Carla](https://github.com/hatem-darweesh/op_bridge/tree/ros2)

- [OSSDC Sim](https://github.com/OSSDC/OSSDC-SIM/releases/tag/OSSDC-SIM-v1.1) (i.e. LGSVL without the WISE cloud) will stop updating when AWSim is ready for end-to-end testing with Autoware Core/Universe. The maintainer's plan is to continue using OSSDC-SIM with Autoware Auto until AWSim is ready for end-to-end testing with Autoware Core/Universe"
How to launch autoware together with LGSVL simulator?,D_kwDOAnasMc4AQbnS,2022-08-16T02:03:33Z,jiangguoding,3,Answered,DC_kwDOAnasMc4ANAvT,jiangguoding,Thanks for you infomation.   Learn a lot. 
How to launch autoware together with LGSVL simulator?,D_kwDOAnasMc4AQbnS,2022-08-16T02:03:33Z,jiangguoding,3,Answered,DC_kwDOAnasMc4ANAvr,jiangguoding,"I detailed my questions as follows.  and wish to get some advices.    Thanks indeed.
1.  I want to launch Autoware with LGSVL simulator by using  logging_simulator.launch.xml.
     So that I can do full AD simu by specifying the source site and dest site in the map.
     1)   Is it OK ?    if not OK,  any suggestion ?  (there are many article about using RuntimeManager. but it is for autoware AI. not for autoware AUTO).
     2)    what is function of the following 3 files.
     
https://github.com/autowarefoundation/autoware_launch.git
      autoware.launch.xml
      logging_simulator.launch.xml
      planning_simulator.lauch.xml


2. There are 4 essntial parameters needed to filled in when using  logging_simulator.launch.xml
Are there any github repositories or resource available for the paramters to be used?     
    map_path
    vehicle_model
    sensor_model
    vehicle_id"
How to launch autoware together with LGSVL simulator?,D_kwDOAnasMc4AQbnS,2022-08-16T02:03:33Z,jiangguoding,3,Answered,DC_kwDOAnasMc4ANA2z,angry-crab,"1. Autoware.Universe is not compatible(officially) with LGSVL. If you want to use LGSVL anyway, please check [Autoware.Auto Doc](https://autowarefoundation.gitlab.io/autoware.auto/AutowareAuto/lgsvl.html). FYI, SVL is no longer maintained according to its github repo. [SVL](https://github.com/lgsvl/simulator)

`autoware.launch.xml` launches required components, sensing, localization, etc. 
`logging_simulator.launch.xml` and `planning_simulator.lauch.xml` have different parameter settings and they pass these parameters to `autoware.launch.xml`

2. Sample bags/maps can be found in the doc. Please check [Autoware.Universe Doc](https://autowarefoundation.github.io/autoware-documentation/main/installation/). "
Avoid obstacles near the center line in behavior_path_planner,D_kwDOAnasMc4AQb0j,2022-08-16T09:44:23Z,shulanbushangshu,3,Answered,,,
Avoid obstacles near the center line in behavior_path_planner,D_kwDOAnasMc4AQb0j,2022-08-16T09:44:23Z,shulanbushangshu,3,Answered,DC_kwDOAnasMc4AM_X_,zulfaqar-azmi-t4,"Hi @shulanbushangshu 

Such design is currently mentioned as limitation, as mentioned here [Improved performance of avoidance target selection](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/behavior_path_planner_avoidance-design/#future-extensions-unimplemented-parts). It is tricky from the perception alone to distinguish between cars that are stopping in the middle (for example waiting for traffic light, etc) or car stopping in the middle due to broken or car stopping in the middle due to parking.
We don't want the avoidance to automatically trigger while waiting for front vehicle to make a turn nearby a junction. 

Maybe we need some kind of logic for it?

> When the center of the obstacle is located on the left side of the center line (very close to the center line), but there are adjacent lanes on the left side (which can be used to avoid obstacles).

On the other hand, for this case, we might also need to think of the impact in terms of the safety? For example, in two lane road, if the adjacent road is opposite direction, we might potentially not be able to see the incoming vehicle."
Avoid obstacles near the center line in behavior_path_planner,D_kwDOAnasMc4AQb0j,2022-08-16T09:44:23Z,shulanbushangshu,3,Answered,DC_kwDOAnasMc4ANAzU,shulanbushangshu,"Hi,@zulfaqar-azmi-t4. 
Thank you for your explanation.Yes, as you said, when dealing with this situation, we need to consider  issues such as waiting for traffic lights, driving safety and intersections.
At present, does the planning module consider handling this situation in  ""avoidance_module"", or develop a new scene model？
"
Avoid obstacles near the center line in behavior_path_planner,D_kwDOAnasMc4AQb0j,2022-08-16T09:44:23Z,shulanbushangshu,3,Answered,DC_kwDOAnasMc4ANLB1,zulfaqar-azmi-t4,"Hi @shulanbushangshu 
As I am not well versed in this matter, I will try and ask to see if there is any information regarding this matter. I'll let you know if there are any updates."
Avoid obstacles near the center line in behavior_path_planner,D_kwDOAnasMc4AQb0j,2022-08-16T09:44:23Z,shulanbushangshu,3,Answered,DC_kwDOAnasMc4ANZt4,satoshi-ota,"Hi @shulanbushangshu cc @TakaHoribe 
I and TIER IV would like to improve following unimplemented parts [in this site](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/behavior_path_planner_avoidance-design/#future-extensions-unimplemented-parts) in the near future (the end of this year :thinking: ):

- Safety Check
- Cancel avoidance when target disappears
- Improved performance of avoidance target selection

> When the center of the obstacle is located on the left side of the center line (very close to the center line), but there are adjacent lanes on the left side (which can be used to avoid obstacles).

Additionally, we'll try to support this situation by fixing avoidance path generation logic and adding safety check logic."
Autonomy Software WG Meeting 2022/08/23,D_kwDOAnasMc4AQb5H,2022-08-16T11:48:56Z,BonoloAWF,1,Answered,,,
Autonomy Software WG Meeting 2022/08/23,D_kwDOAnasMc4AQb5H,2022-08-16T11:48:56Z,BonoloAWF,1,Answered,DC_kwDOAnasMc4ANMCr,MertClk,Leo Drive Bus ODD Update: [Presentation](https://docs.google.com/presentation/d/1faZJJjhyE6u-iGCILPG9hi_U2aumunef30-HbpAQovI/edit?usp=sharing)
2022-08-17 Simulation Working Group Meeting,D_kwDOAnasMc4AQb5x,2022-08-16T12:10:29Z,sglee-morai,0,Unanswered,,,
Open AD Kit WG meeting 2022/08/18,D_kwDOAnasMc4AQb70,2022-08-16T13:11:26Z,armaganarsln,1,Answered,,,
Open AD Kit WG meeting 2022/08/18,D_kwDOAnasMc4AQb70,2022-08-16T13:11:26Z,armaganarsln,1,Answered,DC_kwDOAnasMc4ANEBF,mitsudome-r,"Here's the presentation slide that I shared today: 
[Use of AWS in TIER IV.pdf](https://github.com/autowarefoundation/autoware/files/9375482/Use.of.AWS.in.TIER.IV.pdf)

"
Where is the non linear MPC mentioned in the design document?,D_kwDOAnasMc4AQdA9,2022-08-17T23:09:03Z,sisaha9,1,Answered,,,
Where is the non linear MPC mentioned in the design document?,D_kwDOAnasMc4AQdA9,2022-08-17T23:09:03Z,sisaha9,1,Answered,DC_kwDOAnasMc4ANCr1,kosuke55,"@sisaha9 
That is only in autoware.auto. https://gitlab.com/autowarefoundation/autoware.auto/AutowareAuto/-/blob/master/src/control/mpc_controller/design/mpc_controller-design.md
I am currently updating control's docs.  https://github.com/autowarefoundation/autoware.universe/pull/1591"
can't run Planning simulation,D_kwDOAnasMc4AQdHr,2022-08-18T03:51:02Z,HuaweiAlgolux,2,Answered,,,
can't run Planning simulation,D_kwDOAnasMc4AQdHr,2022-08-18T03:51:02Z,HuaweiAlgolux,2,Answered,DC_kwDOAnasMc4ANNI0,HuaweiAlgolux,This is solved by doing `sudo apt install ufw`  and then `sudo ufw disable`
can't run Planning simulation,D_kwDOAnasMc4AQdHr,2022-08-18T03:51:02Z,HuaweiAlgolux,2,Answered,DC_kwDOAnasMc4ANYaJ,cyn-liu,"hello! I had similar problem when running autoware, rviz2 could not display the sample-map, but when I used my own map, rviz2 successfully displayed the map. I tried to solve this problem using the method you mentioned(sudo apt install ufw, sudo ufw disable) and found that it didn't help me.
the following is what rviz2 look like:
![图片](https://user-images.githubusercontent.com/104069308/187418759-c2d1ac9c-9ec5-4348-bf04-990b878cfd97.png)

the following is what terminal output:
![图片](https://user-images.githubusercontent.com/104069308/187417883-7e93d589-deca-4965-8d4e-2d37aa8ac393.png)"
2022-08-23 ODD working group weekly meeting (107),D_kwDOAnasMc4AQfeQ,2022-08-22T08:05:05Z,Igata-ctrl,0,Unanswered,,,
[proposal] A new pointcloud map interface for dynamic map loading,D_kwDOAnasMc4AQgHp,2022-08-23T04:18:34Z,kminoda,8,Answered,,,
[proposal] A new pointcloud map interface for dynamic map loading,D_kwDOAnasMc4AQgHp,2022-08-23T04:18:34Z,kminoda,8,Answered,DC_kwDOAnasMc4ANdJA,xmfcx,"@kminoda

This proposal is very throughly thought and neatly designed, thanks for the work.

I really like the Proposal B. Proposal A is puts a lot of map loading logic on client side. This makes it hard if people want to add different clients.

## Potential optimizations

I think the further optimizations can be made by providing precomputed voxelgrid structures to the `ndt_matcher`.

https://github.com/autowarefoundation/autoware.universe/blob/main/localization/ndt_scan_matcher/src/ndt_scan_matcher_core.cpp#L431-L433

Here ndt matcher is initialized with the map points:
```cpp
  pcl::shared_ptr<pcl::PointCloud<PointTarget>> map_points_ptr(new pcl::PointCloud<PointTarget>);
  pcl::fromROSMsg(*map_points_msg_ptr, *map_points_ptr);
  new_ndt_ptr->setInputTarget(map_points_ptr);
```

### Bottlenecks

Ignoring the transmission cost, here is the most time consuming part.

#### ROS to PCL conversion

```cpp
  pcl::shared_ptr<pcl::PointCloud<PointTarget>> map_points_ptr(new pcl::PointCloud<PointTarget>);
  pcl::fromROSMsg(*map_points_msg_ptr, *map_points_ptr);
```
Here the conversion of the messages cost some significant milliseconds depending on the size of the point cloud.

#### Voxel grid construction

```cpp
new_ndt_ptr->setInputTarget(map_points_ptr);
```

Here, it calls this function https://github.com/tier4/ndt_omp/blob/tier4/main/include/pclomp/ndt_omp.h#L127-L135

```cpp
inline void
	setInputTarget(const PointCloudTargetConstPtr &cloud)
{
	pcl::Registration<PointSource, PointTarget>::setInputTarget(cloud);
	init();
}
```

I'm guessing the `init()` is the time consuming part here.

And it finally the init() https://github.com/tier4/ndt_omp/blob/tier4/main/include/pclomp/ndt_omp.h#L326-L334 :
```cpp
/** \brief Initiate covariance voxel structure. */
void inline
	init()
{
	target_cells_.setLeafSize(resolution_, resolution_, resolution_);
	target_cells_.setInputCloud(target_);
	// Initiate voxel structure.
	target_cells_.filter(true);
}
```

So if we could precompute these voxel data structures for each grid (from the Proposal B) then this initialization would be near instantaneous.

### How to overcome bottlenecks

As long as we are using native PCL, I think we can't avoid the `ROS to PCL conversion` bottleneck.

And similar can be said for the initialized voxel structure too. But I am open to your opinions on this.

## Proceeding without optimizations first

I think to ensure compatibility with current stack and enable initial implementation quickly, your current plan is sound.

My summary of the `mode=1` aka `Scenario 3`:

```mermaid
graph TD
    NdtClient[""NDT Client""] -->|""Query for point cloud map grids <br> around a 2D pose and a list of currently stored ids""| MapServer[""Map Server""]
    MapServer[""Map Server""] -->|""Deliver a list of point clouds with their ids <br> around that 2D pose <br> excluding the id's client has stored""| NdtClient[""NDT Client""]
```

Extra points:
- How much of a history the client would like to keep would be on the client side configuration. (Like remove by distance, size, time)
- Client to server query can include the metric radius of the required grids too. Like 100m/300m around the vehicle.
- Client to server query can include the shape too (like rectangle / circle) (low priority)

### Simplifying the client implementation

Maybe we can provide a helper class for the client. Role would be to keep track of the id's with the protocol defined in `Scenario 3`. If someone wants to implement a new client like NDT, they would use this class and just call a function like `getPointsAround(Pose pose)` and the complexity would be abstracted away."
[proposal] A new pointcloud map interface for dynamic map loading,D_kwDOAnasMc4AQgHp,2022-08-23T04:18:34Z,kminoda,8,Answered,DC_kwDOAnasMc4ANeU8,kminoda,"Thank you for the comments! Overall, I agree with your points.

> I think to ensure compatibility with current stack and enable initial implementation quickly, your current plan is sound.

We also think it is better to first define the architecture and integrate DML into the system, and then discuss the reduction of computation as needed.

> Simplifying the client implementation

Thank you! We agree that providing a map loading library (or a helper class) would be important to reduce the implementation cost on the client side as much as possible.

--
BTW, as you mentioned in ""potential optimizations"", the voxel grid construction is one of the most time comsuming parts in the current `ndt_scan_matcher` (which is [here in pclomp](https://github.com/tier4/ndt_omp/blob/7fa5fa727ea2b999da925d6ab7dfa1298af521e4/include/pclomp/voxel_grid_covariance_omp_impl.hpp#L122-L264)). So it would be a reasonable solution to compute the voxel grid construction outside of `ndt_scan_matcher` (e.g. `pointcloud_map_loader`) to address the transmission bottleneck.

However, as far as we have experimented with the prototype DML, communication bottlenecks were not a problem even when pub/sub-ing raw point clouds. Rather, your suggestion should be discussed as a solution to the next challenge of reducing memory bandwidth. We know that DML, which involves exchanging and preprocessing raw map point clouds, consumes a fair amount of memory bandwidth. We believe that reducing this memory bandwidth will eventually become important for more efficient DML/Autoware, and we should consider a wide range of solutions, including the measures you have suggested."
[proposal] A new pointcloud map interface for dynamic map loading,D_kwDOAnasMc4AQgHp,2022-08-23T04:18:34Z,kminoda,8,Answered,DC_kwDOAnasMc4AOIyN,yukkysaito,"Thank you for the comment.
We were torn between A and B. I agree with your opinion and Proposal B.

> Potential optimizations

Good idea. 
Continued discussion is needed because we must be careful not to make the interface of the map server exclusive for ndt.
"
[proposal] A new pointcloud map interface for dynamic map loading,D_kwDOAnasMc4AQgHp,2022-08-23T04:18:34Z,kminoda,8,Answered,DC_kwDOAnasMc4ANdLR,xmfcx,"Another way of handling this is to make map loading module a library instead of a node.

Matcher node would use this map loader library to load maps.

Pros:
- No server-client interfacing complexity
- Right now we have to convert from `PCD file -> PCL msg -> ROS msg -> PCL msg`
  - This method would turn this to `PCD file -> PCL msg` only.

Cons:
- Slightly lesser modularity
"
[proposal] A new pointcloud map interface for dynamic map loading,D_kwDOAnasMc4AQgHp,2022-08-23T04:18:34Z,kminoda,8,Answered,DC_kwDOAnasMc4ANml3,kminoda,"Thanks for the proposal!
Although we also considered that solution, we reached to an conclusion that the proposed DML approach is preferred due to the following reasons:
- Directly loading PCD maps in each nodes will solve the transmission bottleneck, but not scalable enough to solve the RAM size bottleneck (thus, even in this case, we will eventually need more scalable solution such as DML in the near future)
- If we consider a use case in which the multiple nodes that need the pcd maps exist, the above solution will somewhat force the users to put all the nodes in one computer, even if they want to use multiple computers to distribute the Autoware nodes."
[proposal] A new pointcloud map interface for dynamic map loading,D_kwDOAnasMc4AQgHp,2022-08-23T04:18:34Z,kminoda,8,Answered,DC_kwDOAnasMc4AOIyM,kminoda,"@yukkysaito @mitsudome-r @YamatoAndo @xmfcx
Do you have any other comments on this?

Currently, I would prefer proposal B, as I believe it is better to focus on making the clients' implementation as simple as possible. If no one has any disagreeing opinion, I would make B as a final decision and close this discussion."
[proposal] A new pointcloud map interface for dynamic map loading,D_kwDOAnasMc4AQgHp,2022-08-23T04:18:34Z,kminoda,8,Answered,DC_kwDOAnasMc4AOIyQ,yukkysaito,I'm ok :+1: I agree with proposal B
[proposal] A new pointcloud map interface for dynamic map loading,D_kwDOAnasMc4AQgHp,2022-08-23T04:18:34Z,kminoda,8,Answered,DC_kwDOAnasMc4AOTwz,xmfcx,"Sorry for late response too, I also agree with B."
[proposal] A new pointcloud map interface for dynamic map loading,D_kwDOAnasMc4AQgHp,2022-08-23T04:18:34Z,kminoda,8,Answered,DC_kwDOAnasMc4AOS61,kminoda,"It seems that there are no other opinions or alternative plans.
We would like to go on and start integrating this new feature in Autoware using proposal B interface.
Related WG log: https://github.com/orgs/autowarefoundation/discussions/2879"
[proposal] A new pointcloud map interface for dynamic map loading,D_kwDOAnasMc4AQgHp,2022-08-23T04:18:34Z,kminoda,8,Answered,DC_kwDOAnasMc4AOquD,simon-t4,"This may be late but to add to the discussion:

- A central node publishing portions of the map also will help to extend to the case where the map is stored in the cloud and loaded/updated to the vehicle as needed. 
- the optimisation is important: perhaps the point cloud loader should be configurable to pre-compute different views of the map (definable by common PCL functions - sub-sampling, voxel grid etc), and then client can select which type of map they request.
- another consideration is the latency in receiving the dynamic map info: is the size of requested area just conservatively estimated (larger) to ensure no latency problem, or is there some logic to predict future needs and ""pre-order"" map info, thus minimising size of requested areas."
[proposal] A new pointcloud map interface for dynamic map loading,D_kwDOAnasMc4AQgHp,2022-08-23T04:18:34Z,kminoda,8,Answered,DC_kwDOAnasMc4AOqzV,kminoda,"Thank you for the interesting comments!

As you've mentioned, I think one of the future development goal for this dynamic map loading is to optimize the performance (the cost for communicating the maps, the cost for computing the preprocessing of the maps, etc). I am not facing such necessity for performance optimization although my current implementation is a very simple one (no ""pre-compute"" nor ""pre-order"" logics). However, I agree that your two advises are both reasonable approach for further optimization, as well as using zero-copy ROS middleware or pre-computing the preprocessed maps beforehand (even before launching Autoware).

I believe that it is better to move on with proposal B for now (as long as the current dynamic map loading functionality is working fine on most of the reference vehicles), and we can discuss how to optimize the performance if necessary."
[proposal] A new pointcloud map interface for dynamic map loading,D_kwDOAnasMc4AQgHp,2022-08-23T04:18:34Z,kminoda,8,Answered,DC_kwDOAnasMc4AVInc,Shin-kyoto,"@yukkysaito @mitsudome-r @xmfcx
We, TIER IV,  would like to implement Proposal A (sending ids as a query) as an interface for the map_loader,  in addition to Proposal B. Can you give us your comment?

# Introduction

Previous discussions only considered scenarios where the client required a spherical area. And we chose proposal B because it makes the clients' implementation as simple as possible.

However, some nodes (e.g. `elevation_map_loader`) need a more flexible map publication architecture to support elevation maps for large-scale maps . Therefore, we would like to implement an interface that allows the client to specify an ID to receive the map, rather than being limited to a spherical shape. This will allow more nodes to handle large-scale maps in Autoware.

# Sequential whole area loading scenario

Here we briefly introduce map loading scenario added from previous discussion.

This scenario considers a case when a node (e.g. `elevation_map_loader`) in initialization step wants a whole area from the available PCD map, the size of which  exceeds the size limit of PCD map. (The size limit of PCD map in the current Autoware is around 2GB which is determined by [the maximum size of a topic message in cycloneDDS](https://github.com/eclipse-cyclonedds/cyclonedds/blob/09a02f5b2b9ba856d7d4c616510252cf9e508ec2/docs/manual/config/config_file_reference.rst#cycloneddsdomaininternalmaxsamplesize). ) So this node can’t use Whole area loading. As an alternative, the node can get PCD map cells one by one, sequentially. We assume that each PCD map cell does not exceed the size limit of PCD map.

![sequential_with_axis_BEV](https://user-images.githubusercontent.com/58775300/230602156-24d93eb3-2031-45b3-a91f-351622aff1e9.gif)

In this scenario,  client node can’t use Partial area loading implemented by Proposal B to get a whole area from the available PCD map because client node does not know the whole area size. We need to pass the information of PCD map to client.

# Proposed architecture

We want to add this architecture, almost equal to proposal A.

A client that want to use the new interface (""client 1"" in the figure) first subscribes a message (see [here](https://github.com/Shin-kyoto/autoware-map-loader-architecture-proposal/blob/main/autoware_map_msgs/msg/PointCloudMapMetaDataArray.msg) for the definition) that contains a dictionary of each grids' ID and its region information.Using this information, the client selects the maps it wants and throw the query to the map_loader with [autoware_map_msgs/srv/GetSelectedPointCloudMap](https://github.com/Shin-kyoto/autoware-map-loader-architecture-proposal/blob/main/autoware_map_msgs/srv/GetSelectedPointCloudMap.srv). map_loader loads the required maps and send them back as a response.


![image](https://user-images.githubusercontent.com/58775300/230294719-4498fa61-854f-4058-ac98-95ef89d852f0.png)


In the Sequential whole area loading scenario, the client node select PCD map cell's ID one by one,  using the given metadata list. Then, the client requests the map ID and map_loader serves PCD map corresponding to PCD map cell's ID.








"
[proposal] A new pointcloud map interface for dynamic map loading,D_kwDOAnasMc4AQgHp,2022-08-23T04:18:34Z,kminoda,8,Answered,DC_kwDOAnasMc4AVIn6,kminoda,"Thank you! I have one small question:
If the above interface being added, why not removing the current interface (proposal B)? Given that all the scenario can be covered solely by proposal A interface, it would be more persuasive if you could share us any reason for leaving the original interface as well as the new one.

(I'm mostly fine with your proposal, but just want to clarify why using both)"
[proposal] A new pointcloud map interface for dynamic map loading,D_kwDOAnasMc4AQgHp,2022-08-23T04:18:34Z,kminoda,8,Answered,DC_kwDOAnasMc4AVJB_,Shin-kyoto,"@kminoda 

Thank you for your comment!

The Common Cases can be handled using the interface provided in Proposal B, and most clients that use differential map loading behave according to this scenario. For example, nodes such as `ndt_scan_matcher`, `pose_initializer`, and `voxel_based_compare_map_filter` all comply with the Common Cases shown in the figure below. In this case, using Proposal B makes implementation easier, and the client does not need to be aware of the specifics of map(e.g. map cell's id, divided cell's width or length)

On the other hand, the `elevation_map_loader` falls into the exceptional cases category. This node needs to read the whole map by specifying PCD map cell with an ID, rather than using a spherical map loading approach. Proposal B cannot handle this case, so Proposal A needs to be introduced.

It is important to note that, **in almost all cases, the interface provided in Proposal B is the optimal solution**. It is easy to implement and does not require the client to be aware of the specifics of the map. Therefore, removing Proposal B is not reasonable.

In summary, my proposal is to use the interface provided in Proposal B for the common case and the interface provided in Proposal A only for exceptional cases.


| case | scenario | example of client node | description | 
| :--- | :--- | :--- | :--- |
| Common Cases | - Partial area loading <br> - Differential area loading<br>  | ndt_scan_matcher <br>  pose_initializer<br>voxel_based_compare_map_filter| - The client node requset maps included in certain area <br>- Loading map spherically<br>-  Almost all scenarios can be covered by this case. <br> e.g. ![differential_area_loading](https://user-images.githubusercontent.com/58775300/230337870-bd980061-fe4c-4e77-8d5c-e47b04beeae6.gif) |
| Exceptional Cases | - Sequential whole area loading | elevation_map_loader |  - The client node requests specific PCD map cell by ID <br> - On rare occasions,  the client node needs to specific PCD map cell. <br> e.g. ![sequential_with_axis_BEV](https://user-images.githubusercontent.com/58775300/230602242-f5662907-448a-4b34-b770-93b355412686.gif)|



"
[proposal] A new pointcloud map interface for dynamic map loading,D_kwDOAnasMc4AQgHp,2022-08-23T04:18:34Z,kminoda,8,Answered,DC_kwDOAnasMc4AVJGi,kminoda,Got the point! Thanks
[proposal] A new pointcloud map interface for dynamic map loading,D_kwDOAnasMc4AQgHp,2022-08-23T04:18:34Z,kminoda,8,Answered,DC_kwDOAnasMc4AVJHd,Shin-kyoto,"@xmfcx
Do you have any other comments on this?
https://github.com/orgs/autowarefoundation/discussions/2812#discussioncomment-5540316"
[proposal] A new pointcloud map interface for dynamic map loading,D_kwDOAnasMc4AQgHp,2022-08-23T04:18:34Z,kminoda,8,Answered,DC_kwDOAnasMc4AVLdy,xmfcx,"Can you use following svg file which is downloaded from [here](https://uxwing.com/car-top-view-outline-icon/) in the gif animation?

<img src=""https://user-images.githubusercontent.com/10751153/230584804-71436803-132e-4c9c-8e44-af431db9fe66.svg"" alt=""SVG image"" width=""100""/>

This will make it clear that it is in birds eye view.
"
[proposal] A new pointcloud map interface for dynamic map loading,D_kwDOAnasMc4AQgHp,2022-08-23T04:18:34Z,kminoda,8,Answered,DC_kwDOAnasMc4AVLqs,Shin-kyoto,"@xmfcx 

Thank you for your comment! I updated fig.

![sequential_with_axis_BEV](https://user-images.githubusercontent.com/58775300/230602317-7d7088c3-224e-4ca2-8698-fdddb0b0c3d2.gif)
"
Subscribe to pacmod_interface in simulation mode,D_kwDOAnasMc4AQgMW,2022-08-23T07:03:57Z,lhakim85,1,Answered,,,
Subscribe to pacmod_interface in simulation mode,D_kwDOAnasMc4AQgMW,2022-08-23T07:03:57Z,lhakim85,1,Answered,DC_kwDOAnasMc4ANLR1,kenji-miyake,"`pacmod_interface` requires a real PACMod device, so it's not supported in planning simulation.

To connect your real vehicle, I think it's good to write your hardware configuration in order to get the right support."
Subscribe to pacmod_interface in simulation mode,D_kwDOAnasMc4AQgMW,2022-08-23T07:03:57Z,lhakim85,1,Answered,DC_kwDOAnasMc4ANLTt,lhakim85,"@kenji-miyake, thanks for your answer.

Base on the picture above, the pacmod_interface is part of the autoware right as my understanding, is that any way to activate it without PACMod device, so that I can see and analyze the output from the autoware"
Subscribe to pacmod_interface in simulation mode,D_kwDOAnasMc4AQgMW,2022-08-23T07:03:57Z,lhakim85,1,Answered,DC_kwDOAnasMc4ANLi2,kenji-miyake,What output do you want to analyze? Please describe more details about your evaluation environment.
Subscribe to pacmod_interface in simulation mode,D_kwDOAnasMc4AQgMW,2022-08-23T07:03:57Z,lhakim85,1,Answered,DC_kwDOAnasMc4ANNHP,lhakim85,"@kenji-miyake 
Our vehicle is normal vehicle and will retrofit with arm/robot to control the steering, paddle brake and accelerator.
Before we deploy the system to the vehicle, we need to test this in the lab, so we need to tap what output from the autoware and so on

Refer to /src/vehicle/external/pacmod_interface/pacmod_interface
![pacmod_interface](https://user-images.githubusercontent.com/10070989/186303717-8c9a338a-133e-4929-9f15-93cbd929d5d1.PNG)

I still can subscribe the pacmod_interface topic right without the pacmod device right?"
Subscribe to pacmod_interface in simulation mode,D_kwDOAnasMc4AQgMW,2022-08-23T07:03:57Z,lhakim85,1,Answered,DC_kwDOAnasMc4ANNJn,kenji-miyake,"If you want to subscribe to the input topics (shown in your image), yes you can. They are also published during the planning simulation.

Regarding the output topics, no you can't. They are from a PACMod device.
![image](https://user-images.githubusercontent.com/31987104/186310483-e1c097f2-93e7-40f5-8b12-ee513cbf1229.png)"
Subscribe to pacmod_interface in simulation mode,D_kwDOAnasMc4AQgMW,2022-08-23T07:03:57Z,lhakim85,1,Answered,DC_kwDOAnasMc4ANNMB,lhakim85,"Thanks @kenji-miyake for the clarification.
For the above pacmod_interface pic, what are the different between /control/command/control_cmd and /vehicle/command/actuation_cmd?
On the topic list, I only see /control/command/control_cmd and not /vehicle/command/actuation_cmd"
Subscribe to pacmod_interface in simulation mode,D_kwDOAnasMc4AQgMW,2022-08-23T07:03:57Z,lhakim85,1,Answered,DC_kwDOAnasMc4ANNQd,kenji-miyake,"In my understanding,
`/control/command/control_cmd` is a high-level command that has velocity and acceleration.
`/vehicle/command/actuation_cmd` is a low-level command that directly controls the accel/brake pedals.

Please refer to the design document. https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-architecture/vehicle/
![image](https://user-images.githubusercontent.com/31987104/186332646-f61e7f07-066f-4f27-9503-9a8aa22152f4.png)

> On the topic list, I only see /control/command/control_cmd and not /vehicle/command/actuation_cmd

It seems `/vehicle/command/actuation_cmd` is published by `raw_vehicle_cmd_converter`, which isn't supported in planning simulation.

If you launch the node like [this](https://github.com/tier4/lexus_description.iv/blob/7c34d514a7ad4120407f79ddacaa14fba46636c7/launch/vehicle_interface.launch.xml#L24-L33), it might be possible to publish `actuation_cmd`, but you have to prepare some map files to calculate correct values."
Subscribe to pacmod_interface in simulation mode,D_kwDOAnasMc4AQgMW,2022-08-23T07:03:57Z,lhakim85,1,Answered,DC_kwDOAnasMc4ANRcU,lhakim85,"@kenji-miyake

![pacmod connection](https://user-images.githubusercontent.com/10070989/186796561-d6251341-c539-4f01-b21e-8eadf5fe513f.png)

Green box in pic above refer to pacmod device right? What is the type of connection (Red cycle) between autoware pc with this device, serial/Can?

Because i'm quite confuse right now, refer to launch file that u share, this node will launch pacmod service and open can0 connection.
![pacmod launch node](https://user-images.githubusercontent.com/10070989/186797292-b3fa1c36-2e2f-494f-b64e-ba23569ea1fa.PNG)


"
Subscribe to pacmod_interface in simulation mode,D_kwDOAnasMc4AQgMW,2022-08-23T07:03:57Z,lhakim85,1,Answered,DC_kwDOAnasMc4ANRfE,kenji-miyake,"> Green box in pic above refer to pacmod device right?

Mm, I guess it expresses both a device and a ROS node.
The ROS node converts CAN messages into `/pacmod/*` topics.

> What is the type of connection (Red cycle) between autoware pc with this device, serial/Can?

I think it's CAN."
Subscribe to pacmod_interface in simulation mode,D_kwDOAnasMc4AQgMW,2022-08-23T07:03:57Z,lhakim85,1,Answered,DC_kwDOAnasMc4ANV7t,lhakim85,"@kenji-miyake,
Thanks for the answer

>It seems /vehicle/command/actuation_cmd is published by raw_vehicle_cmd_converter, which isn't supported in planning simulation.

I try launch raw_vehicle_converter.launch.xml seperately, and can see the topic and also data from that topic.

Then, I try launch pacmod_interface.xml, the topic is there, but no data when subscribe to e.g /pacmod/accel_cmd.
Below topic is from autoware feed to pacmod interface right?
![pacmod_interface1](https://user-images.githubusercontent.com/10070989/187145162-7e816b66-7cb6-400d-bb8e-646c15150676.PNG)

this topic is to feed to pacmod interface then pacmod driver convert it to CAN message right?
Any other node that need to start so that I can read /pacmod/accel_cmd"
Subscribe to pacmod_interface in simulation mode,D_kwDOAnasMc4AQgMW,2022-08-23T07:03:57Z,lhakim85,1,Answered,DC_kwDOAnasMc4ANV-A,kenji-miyake,"I guess you need the real device, and input the necessary data to work pacmod_interface correctly.

Please refer to the following lines.
https://github.com/tier4/pacmod_interface/blob/ea9b7456d5be63bf425208a0405b26ba6a85e2e6/pacmod_interface/src/pacmod_interface/pacmod_interface.cpp#L357
https://github.com/tier4/pacmod_interface/blob/ea9b7456d5be63bf425208a0405b26ba6a85e2e6/pacmod_interface/src/pacmod_interface/pacmod_interface.cpp#L455"
Open AD Kit WG Meeting 2022/8/24,D_kwDOAnasMc4AQgb_,2022-08-23T13:28:43Z,HamburgDave,2,Answered,,,
Open AD Kit WG Meeting 2022/8/24,D_kwDOAnasMc4AQgb_,2022-08-23T13:28:43Z,HamburgDave,2,Answered,DC_kwDOAnasMc4ANOXA,Unknown,"@HamburgDave  Please use the following link for the spreadsheet. (Discussion topic: Use cases and detail level for Open AD Kit 2.0 based on OpsCons)
https://github.com/autowarefoundation/autoware/files/9414856/CR-FY2022-089.Use.cases.with.OpsCons_rev.B.xlsx"
Open AD Kit WG Meeting 2022/8/24,D_kwDOAnasMc4AQgb_,2022-08-23T13:28:43Z,HamburgDave,2,Answered,DC_kwDOAnasMc4ANOia,HamburgDave,"Sorry Fatih just saw this.

Yes, for sure.  That's the one I was actually referring to on call at one point.  I'll add it in the meeting discussion and minutes.

Thanks!

-David


> On Aug 24, 2022, at 11:03 AM, Daisuke Hashimoto ***@***.***> wrote:
> 
> ﻿
> @HamburgDave Please use the following link for the spreadsheet. (Discussion topic: Use cases and detail level for Open AD Kit 2.0 based on OpsCons)
> https://github.com/autowarefoundation/autoware/files/9414856/CR-FY2022-089.Use.cases.with.OpsCons_rev.B.xlsx
> 
> —
> Reply to this email directly, view it on GitHub, or unsubscribe.
> You are receiving this because you were mentioned.
"
[proposal] Localization Covariance Updater,D_kwDOAnasMc4AQgkX,2022-08-23T16:37:13Z,mertyavuz41,4,Answered,,,
[proposal] Localization Covariance Updater,D_kwDOAnasMc4AQgkX,2022-08-23T16:37:13Z,mertyavuz41,4,Answered,DC_kwDOAnasMc4ANMae,mitsudome-r,related issue: https://github.com/autowarefoundation/autoware.universe/issues/1375#issuecomment-1224209334
[proposal] Localization Covariance Updater,D_kwDOAnasMc4AQgkX,2022-08-23T16:37:13Z,mertyavuz41,4,Answered,DC_kwDOAnasMc4ANMgK,meliketanrikulu,"Thanks for your suggestion @mertyavuz41 . Maybe the lanelet can be used for error detection.  However, the localization error must be detected very quickly so that it does not cause any risk.  When the localization is disturbed, it may take a long time for the lanelet to come out of it.

However, can we understand that ndt is broken by following the distance between gnss ins pose and over a certain value?
What do you think about this subject.  thanks for sharing your ideas"
[proposal] Localization Covariance Updater,D_kwDOAnasMc4AQgkX,2022-08-23T16:37:13Z,mertyavuz41,4,Answered,DC_kwDOAnasMc4ANMoz,mertyavuz41,"> However, can we understand that ndt is broken by following the distance between gnss ins pose and over a certain value?
What do you think about this subject. thanks for sharing your ideas

Yes, this is good idea also this approach already used in the first version of the ndt scan matcher implementation of the autoware.AI. (https://github.com/autowarefoundation/autoware_ai_perception/blob/411330c5bb0eb5a963393f869c19d7815bb2dafc/lidar_localizer/nodes/ndt_matching/ndt_matching.cpp#L161)

> Maybe the lanelet can be used for error detection. However, the localization error must be detected very quickly so that it does not cause any risk. When the localization is disturbed, it may take a long time for the lanelet to come out of it.

You are right, it may not solve all unexpected case of the localization, but I think that it is a good approach to observe the a few bad case. Also, the lanelet includes such a good information like position, heading, velocity... We can directy compare closest center point of the lanelet's heading value or velocity with ndt heading value to detect lost. This is just a example but I am respect to your experiance if you say that this usesless idea."
[proposal] Localization Covariance Updater,D_kwDOAnasMc4AQgkX,2022-08-23T16:37:13Z,mertyavuz41,4,Answered,DC_kwDOAnasMc4ANM_3,kminoda,"Thanks for sharing your idea @mertyavuz41!

Would you share a sample data or scenario in which the current localization arch would fail but the proposed algorithm would work? I guess it would be much easier for us to discuss your proposal."
[proposal] Localization Covariance Updater,D_kwDOAnasMc4AQgkX,2022-08-23T16:37:13Z,mertyavuz41,4,Answered,DC_kwDOAnasMc4ANNep,mertyavuz41,Actually I have not a sample data or scenario to demonstrate to the approach. But I can try to prepare a scenario that  represent how I expect to the approach should work.
[proposal] Localization Covariance Updater,D_kwDOAnasMc4AQgkX,2022-08-23T16:37:13Z,mertyavuz41,4,Answered,DC_kwDOAnasMc4AOBk4,mertyavuz41,"Hi,

I throught using the lanelet map information inside the localization architecture,

### Update the scan matcher or any position/oriantation source covariance values:
 * position update:
 
![Drawing(1)](https://user-images.githubusercontent.com/73120336/190931382-816ecb84-2880-4212-9c3d-652388a2794a.png)

The green ones the positions which are the inside lanelet map and red ones are positions on the ouside of the lanelet. We should always expect that we have to be inside lanelet map. Hence, if the scan matcher position fall into outside of the lanelet map for some reason we can increase the covariance value. Same case valid to any position source.

 * orientation update:
 
![Drawing(3)](https://user-images.githubusercontent.com/73120336/190932000-6b13ff9e-916f-47d2-8fab-6eb24396e766.png)
The red triangler represent a car and red arrow is yaw angle of the car. The green points are center points of the lanelet map and I assue that the each center point has yaw angle, if they have not yaw angle, this information easly computable using consecutive center points. Above approach valid for this case too, we have to expect that the vehicle yaw angle have to be almost same according to nearest center point's yaw angle. Let's say that we have a threshhold for alpha angle, if it pass 40 degree, we can update the yaw angle covariance value.

I have only mentioned the yaw angle here, but the same assumption is valid for pitch and roll angles.

Note: In this approach, it does not change the value of any source, but only offers to perform transactions related to its reliability according to our expectations.
"
Autonomy Software WG Meeting 2022/08/30,D_kwDOAnasMc4AQh4Z,2022-08-25T10:53:49Z,BonoloAWF,3,Answered,,,
Autonomy Software WG Meeting 2022/08/30,D_kwDOAnasMc4AQh4Z,2022-08-25T10:53:49Z,BonoloAWF,3,Answered,DC_kwDOAnasMc4ANX0I,kenji-miyake,"@BonoloAWF @xmfcx @mitsudome-r
Hi, I'd like to enable the code-owners feature in AWF repositories.
https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/about-code-owners

The feature can automatically assign appropriate reviewers based on the settings in the `CODEOWNERS`  file. I believe it can make reviews more efficient.
For more detailed behaviors, please refer to this comment: https://github.com/autowarefoundation/autoware.universe/pull/1619#issuecomment-1219188728

The `CODEOWNERS` file is automatically updated using the `maintainer` tags information in `package.xml` like this.
https://github.com/autowarefoundation/autoware.universe/pull/1671/files"
Autonomy Software WG Meeting 2022/08/30,D_kwDOAnasMc4AQh4Z,2022-08-25T10:53:49Z,BonoloAWF,3,Answered,DC_kwDOAnasMc4ANX08,kenji-miyake,"Based on this proposal, I have some requests for the maintainers.
- Please keep the maintainer tags of your package up to date.
- Please link your email address that is used in `package.xml` files to your GitHub account.
  - If it's not linked, the `CODEOWNERS` file raises errors.
    ![image](https://user-images.githubusercontent.com/31987104/187347855-b7aa13e6-92e9-496a-a0f0-6c4d5b5ea416.png)
  - You can link multiple email addresses, so you don't have to remove your personal email.
    ![image](https://user-images.githubusercontent.com/31987104/187347486-e461b902-fe0f-47c4-af2c-e896c25fd2aa.png)"
Autonomy Software WG Meeting 2022/08/30,D_kwDOAnasMc4AQh4Z,2022-08-25T10:53:49Z,BonoloAWF,3,Answered,DC_kwDOAnasMc4ANYD0,hueirutseng,ITRI Bus Project Update: [Presentation](https://www.dropbox.com/s/dia2lk8b9o69wl3/ITRI%20ADV%20upgrade%20schedule_status%20update_20220830_v2.pdf?dl=0)
Autonomy Software WG Meeting 2022/08/30,D_kwDOAnasMc4AQh4Z,2022-08-25T10:53:49Z,BonoloAWF,3,Answered,DC_kwDOAnasMc4ANYca,mitsudome-r,"I have discussed with @ambroise-arm and AWF software architects regarding TVM.
Here's the slides with the minutes: [TVM Status.pdf](https://github.com/autowarefoundation/autoware/files/9452291/TVM.Status.pdf)

Here's the summary:
* Although we have decided to use TVM as inference engine in Autoware in the past [discussion](https://discourse.ros.org/t/unified-ml-inference-in-autoware-a-proposal/14058), we will still make it as a ""recommended"" inference engine until we have enough performance evaluated in Autoware and also have enough developers who can write/review TVM packages.
* Also, we would have to train more developers who can use TVM. As a starting point, @angry-crab will try to learn it. @mitsudome-r will also check CoE if there are anyone who is interested in learning the library as well."
2D Pose Estimation on AWSIM fails,D_kwDOAnasMc4AQiZk,2022-08-26T03:41:46Z,tkm2261,1,Answered,,,
2D Pose Estimation on AWSIM fails,D_kwDOAnasMc4AQiZk,2022-08-26T03:41:46Z,tkm2261,1,Answered,DC_kwDOAnasMc4ANRrD,angry-crab,"`[ndt_scan_matcher-18] [WARN] [1661484927.808689808] [localization.pose_estimator.ndt_scan_matcher]: No InputSource`
This indicates that point cloud input is not detected. Please make sure `sensing components` are publishing point clouds."
2D Pose Estimation on AWSIM fails,D_kwDOAnasMc4AQiZk,2022-08-26T03:41:46Z,tkm2261,1,Answered,DC_kwDOAnasMc4ANRr9,tkm2261,"Thanks. `sensing components` should be on the Autoware side, right?
I will check the node."
sending the output via udp,D_kwDOAnasMc4AQiob,2022-08-26T11:20:06Z,urbansound8K,0,Unanswered,,,
ROS Bag for End-to-End system testing,D_kwDOAnasMc4AQi8s,2022-08-26T19:25:20Z,Torreskai0722,1,Answered,,,
ROS Bag for End-to-End system testing,D_kwDOAnasMc4AQi8s,2022-08-26T19:25:20Z,Torreskai0722,1,Answered,DC_kwDOAnasMc4ANV9G,lhakim85,"> None of them are runnning YOLO detector.

YOLO related to image and video, and autoware exclude it from rosbage because of privacy
![privacy](https://user-images.githubusercontent.com/10070989/187148884-c3300998-0046-4471-b113-1f8a3aecf922.PNG)


"
Performance Analysis Report with CARET,D_kwDOAnasMc4AQkT3,2022-08-29T06:49:09Z,takeshi-iwanari,1,Answered,,,
Performance Analysis Report with CARET,D_kwDOAnasMc4AQkT3,2022-08-29T06:49:09Z,takeshi-iwanari,1,Answered,DC_kwDOAnasMc4Ab2ji,Autostone-c,hi，Can I record data on a machine and use caret_report to analyze the process of autoware and visualized on another machine?
Performance Analysis Report with CARET,D_kwDOAnasMc4AQkT3,2022-08-29T06:49:09Z,takeshi-iwanari,1,Answered,DC_kwDOAnasMc4Ab440,takeshi-iwanari,Sure! I usually create a report on another machine.
Performance Analysis Report with CARET,D_kwDOAnasMc4AQkT3,2022-08-29T06:49:09Z,takeshi-iwanari,1,Answered,DC_kwDOAnasMc4AcGFO,Autostone-c,hi，How can I record the callback_scheduling as an indicator? Have you ever done this job
Performance Analysis Report with CARET,D_kwDOAnasMc4AQkT3,2022-08-29T06:49:09Z,takeshi-iwanari,1,Answered,DC_kwDOAnasMc4AcHBN,takeshi-iwanari,"Sorry, I didn't try it."
Performance Analysis Report with CARET,D_kwDOAnasMc4AQkT3,2022-08-29T06:49:09Z,takeshi-iwanari,1,Answered,DC_kwDOAnasMc4AcIxf,Autostone-c,"hi, this is necessary(export LD_PRELOAD=$(readlink -f ~/ros2_caret_ws/install/caret_trace/lib/libcaret.so)
) when record data . 
and Is this necessary when I am analyzing data on another machine？

![image](https://github.com/autowarefoundation/autoware/assets/50130211/05a14411-bc90-460e-a7b6-9e8fe9b847a6)
"
Performance Analysis Report with CARET,D_kwDOAnasMc4AQkT3,2022-08-29T06:49:09Z,takeshi-iwanari,1,Answered,DC_kwDOAnasMc4AcLeT,takeshi-iwanari,"No.
You only need `source ros2_caret_ws/install/local_setup.bash` when analyzing data."
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,,,
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4ANWNc,isamu-takagi,"Function names are supposed to use snake_case. However, the following exceptions are needed when inheriting classes of external projects such as Qt for rviz plugins.
```
In a class that inherits a class from an external project, follow that naming convention.
```"
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4APIsE,isamu-takagi,https://github.com/autowarefoundation/autoware-documentation/pull/225
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4ANXjI,isamu-takagi,"According to [this PR](https://github.com/autowarefoundation/autoware/pull/2823), constants using constexpr should be lower_snake_case."
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4APIsF,isamu-takagi,https://github.com/autowarefoundation/autoware-documentation/pull/225
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4ANYcF,kenji-miyake,A rationale for the [include order](https://github.com/autowarefoundation/autoware/blob/cb61198b86280bd801e035deefc8eb61dadbb923/.clang-format#L19-L43): https://llvm.org/docs/CodingStandards.html#include-style
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4APIsG,isamu-takagi,https://github.com/autowarefoundation/autoware-documentation/pull/225
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4ANYco,kenji-miyake,"Private header files should be placed under `src/`, not `include/`.
What files to regard as private header files can be discussed. For normal use cases, most header files in an application package (that defines several nodes) can be private.

Reference: https://docs.ros.org/en/rolling/How-To-Guides/Ament-CMake-Documentation.html#adding-files-and-headers

> if you are building a library, put all headers which should be usable by clients and therefore must be installed into a subdirectory of the include folder named like the package,
> while all other files (.c/.cpp and header files which should not be exported) are inside the src folder."
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4APIlJ,isamu-takagi,"Created the PR.
https://github.com/autowarefoundation/autoware-documentation/pull/224"
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4ANYeO,kenji-miyake,"[suffixes of build artifacts]
- `{node_name}`: Node executable
- `{node_name}_core`: Core library (ROS independent)
- `{node_name}_component`: Node component lib
- `{node_name}_node`: Node lib (Not recommended)

Related: https://github.com/autowarefoundation/autoware.universe/pull/1561#discussion_r943183060"
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4APImc,xmfcx,"@kenji-miyake This is totally unrelated topic but, how do you think we should handle logging debug/info messages for the ROS independent libraries?

We use `RCLCPP_INFO, DEBUG, INFO, WARN, ERROR, FATAL` if we have a `rclcpp::Node` but what should we do if we don't have it?

Should we use https://github.com/google/glog or something similar?"
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4ANYgD,kenji-miyake,"We need to define the style for acronyms in CamelCase.

- UserID or UserId
- RoutingAPI or RoutingApi
- etc.

Related:
- https://stackoverflow.com/questions/15526107/acronyms-in-camelcase
- https://google.github.io/styleguide/cppguide.html

Google's guide says:
> For the purposes of the naming rules below, a ""word"" is anything that you would write in English without internal spaces. This includes abbreviations, such as acronyms and initialisms. For names written in mixed case (also sometimes referred to as ""camel case"" or ""Pascal case""), in which the first letter of each word is capitalized, prefer to capitalize abbreviations as single words, e.g., StartRpc() rather than StartRPC().

Microsoft's guide says:
> When using acronyms, use Pascal case or camel case for acronyms more than two characters long. For example, use HtmlButton or htmlButton. However, you should capitalize acronyms that consist of only two characters, such as System.IO instead of System.Io.

I personally think following Google's guide is simple.

I've tried to find a Clang-Tidy rule to fix the naming automatically, but I couldn't find it.
https://releases.llvm.org/14.0.0/tools/clang/tools/extra/docs/clang-tidy/checks/readability-identifier-naming.html"
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4AOMvz,kenji-miyake,Related: ros2/launch_ros follows PEP8 https://github.com/ros2/launch_ros/pull/326
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4AO7EC,kenji-miyake,"@isamu-takagi -san has proposed that ""Since we can't distinguish the words if two acronyms are written successively, it's better to use `RosApi` rather than `ROSAPI`"".
And as mentioned in the [ROS 2's style guidelines](https://docs.ros.org/en/humble/The-ROS2-Project/Contributing/Code-Style-Language-Versions.html#variable-naming), it's important also to consider consistency between programming languages, so I'll check it below.

Although Python follows PEP8, Rust says the following in https://rust-lang.github.io/api-guidelines/naming.html#casing-conforms-to-rfc-430-c-case.
> In UpperCamelCase, acronyms and contractions of compound words count as one word: use Uuid rather than UUID, Usize rather than USize or Stdin rather than StdIn.

Considering Autonomous Driving should be a safe system, I feel it's better to align with Rust, which is a safe language, rather than Python.

So my opinion is, it's good to use the style of `RosApi`.

@xmfcx @yukkysaito @mitsudome-r Do you agree with this comment?"
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4APEN5,kenji-miyake,"There was a good example: `HDDSMARTInfoItem`. cc @ito-san 
https://github.com/autowarefoundation/autoware.universe/blob/3a4845c8b8d2115067579a33e2243732c1f6b6af/system/system_monitor/include/system_monitor/hdd_monitor/hdd_monitor.hpp#L111

It caused a spell-check error.

> system/system_monitor/src/hdd_monitor/hdd_monitor.cpp:80:20 Unknown word (HDDSMART)
"
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4APIsJ,isamu-takagi,https://github.com/autowarefoundation/autoware-documentation/pull/225
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4API3I,xmfcx,"@kenji-miyake I always use CamelCase for acronyms, I didn't know there was a standard for it :D I am on the `HddSmartInfoItem` side."
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4ANZxZ,kenji-miyake,"We should discuss the guideline for ROS interface (topic/service/action) names.
https://github.com/autowarefoundation/autoware.universe/pull/1431#discussion_r959014277"
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4AO96A,kenji-miyake,"About the ROS message guidelines.
https://github.com/autowarefoundation/autoware_adapi_msgs/pull/16#discussion_r1000475824"
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4AO_bZ,kenji-miyake,"Takagi-san's proposal.
https://github.com/autowarefoundation/autoware_adapi_msgs/pull/16#discussion_r1001301323

For an example, refer to https://github.com/autowarefoundation/autoware_adapi_msgs/blob/ac51d9cd88154dfc3d1de8ef8a0b3b4658bfee57/autoware_adapi_v1_msgs/planning/msg/SteeringFactor.msg.

@xmfcx @mitsudome-r @yukkysaito Do you agree?"
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4APESp,kenji-miyake,"TODO: Consider guidelines for message type names and field names.
https://github.com/tier4/tier4_autoware_msgs/pull/61#pullrequestreview-1152660127"
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4AO96q,kenji-miyake,"About the naming convention for enum members.

ROS 2 uses `UpperCamelCase`, but it's not documented in the style guide.
https://docs.ros.org/en/rolling/The-ROS2-Project/Contributing/Code-Style-Language-Versions.html

```cpp
rclcpp/rclcpp/include/rclcpp/qos.hpp
34:enum class HistoryPolicy
35-{
36-  KeepLast = RMW_QOS_POLICY_HISTORY_KEEP_LAST,
--
42:enum class ReliabilityPolicy
43-{
44-  BestEffort = RMW_QOS_POLICY_RELIABILITY_BEST_EFFORT,
--
51:enum class DurabilityPolicy
52-{
53-  Volatile = RMW_QOS_POLICY_DURABILITY_VOLATILE,
--
60:enum class LivelinessPolicy
61-{
62-  Automatic = RMW_QOS_POLICY_LIVELINESS_AUTOMATIC,
--
69:enum class QoSCompatibility
70-{
71-  Ok = RMW_QOS_COMPATIBILITY_OK,
```

In the ROS 1 guide, it uses `UpperCamelCase`, so I guess ROS 2 inherited this.
http://wiki.ros.org/CppStyleGuide

```cpp
enum class Choise
{
    Choice1,
    Choice2,
    Choice3
};
Choise c = Choise::Choice1;
```

And Google uses `UpperCamelCase` with the prefix `k`.
https://google.github.io/styleguide/cppguide.html#Enumerator_Names

```cpp
enum class UrlTableError {
  kOk = 0,
  kOutOfMemory,
  kMalformedInput,
};
```

In C++ Core Guidelines, `ALL_CAPS` is forbidden.
https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#enum5-dont-use-all_caps-for-enumerators"
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4AO-MW,kenji-miyake,"lowercase (snake_case or lowerCamelCase?) in cppreference.com. (and also in examples of C++ Core Guidelines)
https://en.cppreference.com/w/cpp/language/enum"
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4AO-Md,kenji-miyake,"CamelCase in Microsoft.
https://learn.microsoft.com/en-us/cpp/cpp/enumerations-cpp?view=msvc-170"
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4APIsL,isamu-takagi,https://github.com/autowarefoundation/autoware-documentation/pull/225
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4API2o,kenji-miyake,"@xmfcx Let's discuss https://github.com/orgs/autowarefoundation/discussions/2824#discussioncomment-3967388  in another thread.

> how do you think we should handle logging debug/info messages for the ROS independent libraries?
> 
> We use RCLCPP_INFO, DEBUG, INFO, WARN, ERROR, FATAL if we have a rclcpp::Node but what should we do if we don't have it?
> 
> Should we use https://github.com/google/glog or something similar?

I personally think we can depend on `rclcpp/logging.hpp` in ROS-independent libraries, which is easy to remove later if necessary.
But I believe it's good to receive feedback from AutoCore members, who are working on integration with AutoCore.OS.

@Sharrrrk So, do you have any requests to logging in ROS-independent libraries."
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4API5p,xmfcx,"> I personally think we can depend on rclcpp/logger.hpp in ROS-independent libraries

Doesn't the rclcpp loggers depend on passing a logger, which requires a `rclcpp::Node` handle?

I feel it is a burden to add a node handle parameter to all the functions in libraries for simple logging. @kenji-miyake "
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4API6A,kenji-miyake,"> Doesn't the rclcpp loggers depend on passing a logger, which requires a rclcpp::Node handle?

No, just passing a `rclcpp::Logger` handle, which can be replaced with another logger pointer relatively easily.

https://github.com/autowarefoundation/autoware.universe/blob/897794aec2cea28e76663330e2213fda579b506d/perception/front_vehicle_velocity_estimator/include/front_vehicle_velocity_estimator/front_vehicle_velocity_estimator.hpp#L46"
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4API6r,xmfcx,"Still, you need a logger pointer.

With glog you can just log like:
```cpp
LOG(INFO) << ""Found "" << num_cookies << "" cookies"";
// INFO is just a constant.
```
ref: https://github.com/google/glog#getting-started

No outside pointers required."
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4API7C,kenji-miyake,"I see. In that case, I think you can use `rclcpp::get_logger(""logger_name"")` or something like that."
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4API7j,xmfcx,"[rclcpp::get_logger doc](https://docs.ros2.org/latest/api/rclcpp/namespacerclcpp.html#ae7295751947c08312aa69f45fd673171)

So should we specify a name for a global logger name?

For libraries, a generic logger node can be made and they all log to there?"
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4API-G,xmfcx,"Then again, this would require another node to be running in order for logging to work, which is not good. I think we either tell people to use `std::cout`, `std::cerr` (when running multiple threads, outputs will get mixed badly)  etc. or use glog. @kenji-miyake "
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4APJD4,kenji-miyake,"> So should we specify a name for a global logger name?

@xmfcx Yes. A global common name (e.g. autoware_library_logger) or A global library-specific name (e.g. foo_library_logger) can be used. I've tested it using a small sample package.

> For libraries, a generic logger node can be made and they all log to there?

Yes, it's possible.
If you specify a node's logger, it can output to `/rosout`.
If you don't use a node's logger, it only outputs to console.

I've also tested it using a small sample package.

> Then again, this would require another node to be running in order for logging to work, which is not good. I think we either tell people to use std::cout, std::cerr (when running multiple threads, outputs will get mixed badly) etc. or use glog.

Therefore, no, I believe it doesn't require another node.
Or we can consider using other libraries instead. 
However, I personally think `std::cout` and `std::cerr` should be avoided."
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4APJEZ,kenji-miyake,"FYI: To test it, follow the steps below:

```console
# In terminal 1
git clone git@github.com:kenji-miyake/ros2_package_template.git
cd ros2_package_template
# Add RCLCPP_INFO(rclcpp::get_logger(""foo_logger""), ""log""); to `src/package_name.cpp`
# To use a node's logger, replace ""foo_logger"" with ""package_name""
colcon build --symlink-install --cmake-args -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DCMAKE_BUILD_TYPE=Release
source install/setup.bash
ros2 launch package_name package_name.launch.xml

# In terminal 2
ros2 topic pub /package_name/input/data example_interfaces/msg/Int32

# In terminal 3
ros2 topic echo /rosout
```"
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4APJFx,xmfcx,"Thank you, I will reproduce it and see if I have any other concerns. So far it looks well, thanks for showing this."
Autoware code style and guidelines,D_kwDOAnasMc4AQkbA,2022-08-29T09:40:58Z,isamu-takagi,10,Answered,DC_kwDOAnasMc4APJby,xmfcx,"@kenji-miyake  Ok I've tested it and just using `RCLCPP_INFO(rclcpp::get_logger(""dummy_name""), ""log text"");` logs into the console and it has equivalent functionality to the `glog` as far as I can see.

## Using a common logging node
> A global common name (e.g. autoware_library_logger) or A global library-specific name (e.g. foo_library_logger) can be used.

Do you think we should create a global logger node for libraries to output to `/rosout`?

We can launch it before the other nodes, if it runs, we can see logs on `/rosout`, if not, we will see them only on the console.

A node named: `common_logging_rosout_node`

### Advantages
- see the logs on /rosout

### Disadvantages
- if multiple instances are run together, on the console, different library outputs won't be differentiated (all will have same node name)
- we optionally launch `common_logging_rosout_node`, which will cause extra network traffic for /rosout

## What to do?
Should we recommend logging for:
- Parameterized logger name input [like here](https://github.com/autowarefoundation/autoware.universe/blob/897794aec2cea28e76663330e2213fda579b506d/perception/front_vehicle_velocity_estimator/include/front_vehicle_velocity_estimator/front_vehicle_velocity_estimator.hpp#L46)
- ""library_name"" for logger name
- ""common_logging_rosout_node"" for the logger name"
2022-08-30 ODD working group weekly meeting (108),D_kwDOAnasMc4AQkbd,2022-08-29T09:51:42Z,Igata-ctrl,0,Unanswered,,,
Lanelet map convention for static obstacles,D_kwDOAnasMc4AQkcV,2022-08-29T10:16:20Z,maxime-clem,1,Answered,,,
Lanelet map convention for static obstacles,D_kwDOAnasMc4AQkcV,2022-08-29T10:16:20Z,maxime-clem,1,Answered,DC_kwDOAnasMc4ANX5N,angry-crab,"Please correct me if I was wrong. I think most static objects are either considered as obstacles or some symbols to identify road borders. In such cases, the specific type does not matter that much since most logic is same. I guess planning tags sounds better at least for now. "
CARLA Simulator + Autoware Universe Tutorials,D_kwDOAnasMc4AQkuV,2022-08-29T17:59:06Z,hatem-darweesh,9,Answered,,,
CARLA Simulator + Autoware Universe Tutorials,D_kwDOAnasMc4AQkuV,2022-08-29T17:59:06Z,hatem-darweesh,9,Answered,DC_kwDOAnasMc4ANetb,HyunkiKim0407,"![image](https://user-images.githubusercontent.com/90748699/188079918-18e1da86-65fb-4700-b9ac-726a71a55b14.png)
There is problem to run code, do you have any idea?"
CARLA Simulator + Autoware Universe Tutorials,D_kwDOAnasMc4AQkuV,2022-08-29T17:59:06Z,hatem-darweesh,9,Answered,DC_kwDOAnasMc4ANlSW,liuypcoding,"you can google 'sensor_msgs_py', download and put it in opt_bridge. Then set the sensor_msgs_py about absolute address in op_ros2_agent.py . It's  work for me ,good luck！！

"
CARLA Simulator + Autoware Universe Tutorials,D_kwDOAnasMc4AQkuV,2022-08-29T17:59:06Z,hatem-darweesh,9,Answered,DC_kwDOAnasMc4ANlS6,liuypcoding,"![002](https://user-images.githubusercontent.com/46860249/188475119-c9d6a295-d29e-409a-80b1-21df7f85d9e7.png)
![001](https://user-images.githubusercontent.com/46860249/188475137-25e6b329-f531-4b38-a493-412fde140b47.png)
"
CARLA Simulator + Autoware Universe Tutorials,D_kwDOAnasMc4AQkuV,2022-08-29T17:59:06Z,hatem-darweesh,9,Answered,DC_kwDOAnasMc4ANltV,hatem-darweesh,@LubenKim  are you sure you have sourced ros2 and autoware.universe before running the script ? 
CARLA Simulator + Autoware Universe Tutorials,D_kwDOAnasMc4AQkuV,2022-08-29T17:59:06Z,hatem-darweesh,9,Answered,DC_kwDOAnasMc4AOGr3,gaokao123,"you can install sensor_msgs_py package, execute the following command:
sudo apt install ros-galactic-sensor-msgs-py "
CARLA Simulator + Autoware Universe Tutorials,D_kwDOAnasMc4AQkuV,2022-08-29T17:59:06Z,hatem-darweesh,9,Answered,DC_kwDOAnasMc4AOJbq,hatem-darweesh,Can you check the map folder path in start_2.sh 
CARLA Simulator + Autoware Universe Tutorials,D_kwDOAnasMc4AQkuV,2022-08-29T17:59:06Z,hatem-darweesh,9,Answered,DC_kwDOAnasMc4AOKt8,gaokao123,"@hatem-darweesh There is no problem with the map folder path,  my  environment of carla is ""export PYTHONPATH=$PYTHONPATH:${CARLA_ROOT}/PythonAPI/carla/dist/carla-0.9.13-py3.7-linux-x86_64.egghuanj"", and your readme is ""export PYTHONPATH=$PYTHONPATH:${CARLA_ROOT}/PythonAPI/carla/dist/carla-0.9.13-py2.7-linux-x86_64.egghuanj"", is that a problem?"
CARLA Simulator + Autoware Universe Tutorials,D_kwDOAnasMc4AQkuV,2022-08-29T17:59:06Z,hatem-darweesh,9,Answered,DC_kwDOAnasMc4AOK2g,hatem-darweesh,"I don't know, can you test with the original egg first. "
CARLA Simulator + Autoware Universe Tutorials,D_kwDOAnasMc4AQkuV,2022-08-29T17:59:06Z,hatem-darweesh,9,Answered,DC_kwDOAnasMc4AOLMY,gaokao123,"ok，I have found the reason，the encoding of my file was wrong, 
but,I found another mistake
![image](https://user-images.githubusercontent.com/111047949/191933666-f70cd41e-59d1-483b-9186-2db28e666ec9.png)
"
CARLA Simulator + Autoware Universe Tutorials,D_kwDOAnasMc4AQkuV,2022-08-29T17:59:06Z,hatem-darweesh,9,Answered,DC_kwDOAnasMc4AOLWD,hatem-darweesh,Is this related to CARLA bridge ?!
CARLA Simulator + Autoware Universe Tutorials,D_kwDOAnasMc4AQkuV,2022-08-29T17:59:06Z,hatem-darweesh,9,Answered,DC_kwDOAnasMc4AOLXD,gaokao123,which node is CARLA bridge? scenario_runner? how to run?
CARLA Simulator + Autoware Universe Tutorials,D_kwDOAnasMc4AQkuV,2022-08-29T17:59:06Z,hatem-darweesh,9,Answered,DC_kwDOAnasMc4AONQV,yuasabe,"Hello @hatem-darweesh!
I am very impressed by this integration of Carla and Autoware.universe and have tried it to use it myself.
After some time debugging and testing, I have been able to set it up and have it drive autonomously!

I have a question about NPCs (e.g. other vehicles and pedestrians). When I run the Carla script `python3 generate_traffic.py` for example, the actors are spawned into the scene and start moving according to their default NPC behavior. However, when I engage Autoware, the NPCs start to move erratically and crash. It seems like the engagement of Autoware somehow triggers a difference in their movement.

I am suspecting that it has something to do with the clock, and time synchronization issues. I was wondering if you have experienced anything similar or have worked with enabling NPCs. 

Thanks in advance!"
CARLA Simulator + Autoware Universe Tutorials,D_kwDOAnasMc4AQkuV,2022-08-29T17:59:06Z,hatem-darweesh,9,Answered,DC_kwDOAnasMc4AONyH,yuasabe,The command `python3 generate_traffic.py -n 300 --asynch --car-lights-on --safe` seemed to have done the trick. The NPC vehicles are now following their normal trajectories and are acting as usual.
CARLA Simulator + Autoware Universe Tutorials,D_kwDOAnasMc4AQkuV,2022-08-29T17:59:06Z,hatem-darweesh,9,Answered,DC_kwDOAnasMc4AON9F,hatem-darweesh,Thank you for sharing the solution. 
CARLA Simulator + Autoware Universe Tutorials,D_kwDOAnasMc4AQkuV,2022-08-29T17:59:06Z,hatem-darweesh,9,Answered,DC_kwDOAnasMc4ASg6v,lsteinosk,Is there a comparison/benefit to using the op_bridge implementation vs the provided CARLA ROS 2 bridge?
CARLA Simulator + Autoware Universe Tutorials,D_kwDOAnasMc4AQkuV,2022-08-29T17:59:06Z,hatem-darweesh,9,Answered,DC_kwDOAnasMc4AWHVv,ashishrrs,"While running op_bridge,I am not getting the image and the car is always coming parallel to the road.I have attached the image, for you to look over. 
![Screenshot from 2023-05-04 02-35-49](https://user-images.githubusercontent.com/59953881/236061876-ba7ccc4b-8a82-49e2-a42d-153b2ca5026f.png)
"
CARLA Simulator + Autoware Universe Tutorials,D_kwDOAnasMc4AQkuV,2022-08-29T17:59:06Z,hatem-darweesh,9,Answered,DC_kwDOAnasMc4AWJde,hatem-darweesh,"@ashishrrs please review the part in the tutorial for modifying the sample sensor kit https://github.com/autowarefoundation/sample_sensor_kit_launch

to have correct localization specially the start point between autoware and carla, they both must have the same sensor configuration. 
In the carla bridge, this is defined in the sensors function in the op_brige python script. 
In autoware, this is defined in the sensors_kit. 

Regards, "
CARLA Simulator + Autoware Universe Tutorials,D_kwDOAnasMc4AQkuV,2022-08-29T17:59:06Z,hatem-darweesh,9,Answered,DC_kwDOAnasMc4AY33i,Kim-mins,"Hi @hatem-darweesh!
Thank you for the nice work, but I just got one question on lanelet2 map.
How did you get [the map](https://drive.google.com/drive/folders/1cQxiEteKMwZQZSHuotd4Bw1smzfOG67k) for Autoware? I found that the traffic lights, stop lines, speed limit, etc... are not in the map you provided.
Do you have any automatic generation tool for map? or Did you manually generated the map?

Thank you in advance! I think your answer would be a big help for me.."
CARLA Simulator + Autoware Universe Tutorials,D_kwDOAnasMc4AQkuV,2022-08-29T17:59:06Z,hatem-darweesh,9,Answered,DC_kwDOAnasMc4AZCqo,hatem-darweesh,"I used this tool to modify the map manually. 
https://github.com/hatem-darweesh/assuremappingtools"
CARLA Simulator + Autoware Universe Tutorials,D_kwDOAnasMc4AQkuV,2022-08-29T17:59:06Z,hatem-darweesh,9,Answered,DC_kwDOAnasMc4AZEde,Kim-mins,Thank you for the response! I'll try it.
CARLA Simulator + Autoware Universe Tutorials,D_kwDOAnasMc4AQkuV,2022-08-29T17:59:06Z,hatem-darweesh,9,Answered,DC_kwDOAnasMc4AY4UG,J-xinyu,"Hello, this is a great job. Does this job now support running under humble?"
CARLA Simulator + Autoware Universe Tutorials,D_kwDOAnasMc4AQkuV,2022-08-29T17:59:06Z,hatem-darweesh,9,Answered,DC_kwDOAnasMc4AZCqj,hatem-darweesh,"No , due to the python version conflict between CARLA APIs and humble. "
CARLA Simulator + Autoware Universe Tutorials,D_kwDOAnasMc4AQkuV,2022-08-29T17:59:06Z,hatem-darweesh,9,Answered,DC_kwDOAnasMc4AZEZd,Autostone-c,Hi，Is there any other Carla engineering adaptation for Humble？
CARLA Simulator + Autoware Universe Tutorials,D_kwDOAnasMc4AQkuV,2022-08-29T17:59:06Z,hatem-darweesh,9,Answered,DC_kwDOAnasMc4AZCy4,HarryMechatron,"Hi @hatem-darweesh ,
Thank you for the great work, I am trying to replicate the same in Ubuntu 18.04 with autoware 1.14.
Can you please share the launch files and rviz file you used? I couldn't find them anywhere in the github.
"
Autonomy Software WG Meeting 2022/09/06,D_kwDOAnasMc4AQlL-,2022-08-30T09:00:21Z,BonoloAWF,2,Answered,,,
Autonomy Software WG Meeting 2022/09/06,D_kwDOAnasMc4AQlL-,2022-08-30T09:00:21Z,BonoloAWF,2,Answered,DC_kwDOAnasMc4ANoJ5,MertClk,Leo Drive Bus ODD Update: [Presentation](https://docs.google.com/presentation/d/1oSpjxW0sJunYNECRzO5nUgyDtN_shRbtZAILu5MklCg/edit?usp=sharing)
Autonomy Software WG Meeting 2022/09/06,D_kwDOAnasMc4AQlL-,2022-08-30T09:00:21Z,BonoloAWF,2,Answered,DC_kwDOAnasMc4ANoVS,phkarle,"Today's presentation of our prediction algorithm: [Slides](https://syncandshare.lrz.de/getlink/fiVT49jYhqsKSL4xgFsxD5/220906_MixNet_Karle.pdf)
Contact: phillip.karle@tum.de"
Open AD Kit WG meeting 2022/09/01,D_kwDOAnasMc4AQlWT,2022-08-30T13:21:08Z,Unknown,1,Answered,,,
Open AD Kit WG meeting 2022/09/01,D_kwDOAnasMc4AQlWT,2022-08-30T13:21:08Z,Unknown,1,Answered,DC_kwDOAnasMc4ANbES,Unknown,"@LalithVipulananthan For the discussion of Open AD Kit 2.0 use case prioritisation, I prepared the material to show the prioritization. Would you add this material to the agenda?
![CR-FY2022-099_Prioritized_use_cases](https://user-images.githubusercontent.com/89968601/187709397-bf093fbc-a5b3-4c76-8566-f8f26bd455d6.jpg)

"
Convert .osm file of sample map to .xodr,D_kwDOAnasMc4AQlj_,2022-08-30T18:40:41Z,bdcong,1,Answered,,,
Convert .osm file of sample map to .xodr,D_kwDOAnasMc4AQlj_,2022-08-30T18:40:41Z,bdcong,1,Answered,DC_kwDOAnasMc4ANm1p,ralwing,"these files have different not only formats, but also uses.  However, quite a good converter is available https://github.com/hatem-darweesh/assuremappingtools.
The conversion is quite straightforward, just follow the instruction. The converted files has some errors like: they lack information about adjacent roadway lanes, some attributes, junctions, and also paths are duplicated. So You'll need to make some cleanup manually.
Good luck! "
Convert .osm file of sample map to .xodr,D_kwDOAnasMc4AQlj_,2022-08-30T18:40:41Z,bdcong,1,Answered,DC_kwDOAnasMc4ANpsF,bdcong,"thank you, I will try that."
Map from Autoware.Auto AVP demo,D_kwDOAnasMc4AQmIJ,2022-08-31T14:30:27Z,bdcong,0,Unanswered,,,
Can we use statistical outlier filter in radius_search_2d_outlier_filter?,D_kwDOAnasMc4AQmKr,2022-08-31T15:26:51Z,xmfcx,1,Answered,,,
Can we use statistical outlier filter in radius_search_2d_outlier_filter?,D_kwDOAnasMc4AQmKr,2022-08-31T15:26:51Z,xmfcx,1,Answered,DC_kwDOAnasMc4AQSn-,yukkysaito,"I think it is good.
It would be nice to introduce and allow users to set multiple options."
Can we use statistical outlier filter in radius_search_2d_outlier_filter?,D_kwDOAnasMc4AQmKr,2022-08-31T15:26:51Z,xmfcx,1,Answered,DC_kwDOAnasMc4AQSoX,yukkysaito,"![image](https://user-images.githubusercontent.com/8327598/204718037-c721dc4c-f526-4199-86e5-eed0efafc3a5.png)
FYI.
The radius filter will explode the computational cost if the number of point clouds is not more than 1000."
Running lslidar 32C as top lidar,D_kwDOAnasMc4AQn71,2022-09-03T06:29:05Z,lhakim85,2,Answered,,,
Running lslidar 32C as top lidar,D_kwDOAnasMc4AQn71,2022-09-03T06:29:05Z,lhakim85,2,Answered,DC_kwDOAnasMc4AYUy8,TZECHIN6,"Can u show the launch file as well? as there is no 32 launch by default, you might have to copy a example and change some parameters"
Running lslidar 32C as top lidar,D_kwDOAnasMc4AQn71,2022-09-03T06:29:05Z,lhakim85,2,Answered,DC_kwDOAnasMc4AYUzx,TZECHIN6,"https://github.com/autowarefoundation/sample_sensor_kit_launch/tree/main/common_sensor_launch/launch

Here is the reference"
Running lslidar 32C as top lidar,D_kwDOAnasMc4AQn71,2022-09-03T06:29:05Z,lhakim85,2,Answered,DC_kwDOAnasMc4AYWFu,lhakim85,"Thanks @TZECHIN6 for the reply.
We manage to get the C32 run on autoware, but facing few issue:
 1. Slow output rate of the pointcloud although just run the driver node only.
     When run the driver node, the output that we get only 5 to 6 Hz, and the end result at the outlier_filter point autoware only around 1 to 
     2Hz.
     We suspect the hardware bottleneck of our platform, as we try same configuration at newest Gen CPU , and the result much more better.

 2. The pointcloud format is only XYZIRT
     We already contact the manufacturer, and as for now, the format is XYZIRT only for the driver. We had try to change the driver 
     and give dummy data,  but the result at autoware module, not so promising 

and also we track your discussion here for our reference
https://github.com/autowarefoundation/autoware.universe/issues/3827"
Running lslidar 32C as top lidar,D_kwDOAnasMc4AQn71,2022-09-03T06:29:05Z,lhakim85,2,Answered,DC_kwDOAnasMc4AYW6k,TZECHIN6,"For question #1 please config your cycloneDDS as shown in [here](https://autowarefoundation.github.io/autoware-documentation/main/installation/additional-settings-for-developers/#tuning-dds).

For question #2, I am not sure... might be you can try their launch instead of using the official one, just change the model name"
Running lslidar 32C as top lidar,D_kwDOAnasMc4AQn71,2022-09-03T06:29:05Z,lhakim85,2,Answered,DC_kwDOAnasMc4AYW92,TZECHIN6,"https://github.com/autowarefoundation/awf_velodyne/tree/tier4/universe

They have a self-host driver which included those extra information, might be you just create a new launch and launch it from lidar.launch.xml"
error: ‘StepType’ does not name a type,D_kwDOAnasMc4AQoLZ,2022-09-03T17:32:43Z,fightingnoble,1,Answered,,,
error: ‘StepType’ does not name a type,D_kwDOAnasMc4AQoLZ,2022-09-03T17:32:43Z,fightingnoble,1,Answered,DC_kwDOAnasMc4ANhm7,fightingnoble,"Solved. 
I add a statement in the library file.
`class StepType`"
error: ‘StepType’ does not name a type,D_kwDOAnasMc4AQoLZ,2022-09-03T17:32:43Z,fightingnoble,1,Answered,DC_kwDOAnasMc4ANh3d,maxime-clem,"This is a strange issue since `StepType` is not used in the `tier4_simulated_clock_rviz_plugin` package.
The issue seems caused by the qt library. If you have more issues I recommend trying to reinstall the qt library."
2022-09-06 ODD working group weekly meeting (109),D_kwDOAnasMc4AQo9Q,2022-09-05T09:10:12Z,Igata-ctrl,0,Unanswered,,,
Redundant calculation around EKF yaw,D_kwDOAnasMc4AQpFY,2022-09-05T12:51:50Z,IshitaTakeshi,1,Answered,,,
Redundant calculation around EKF yaw,D_kwDOAnasMc4AQpFY,2022-09-05T12:51:50Z,IshitaTakeshi,1,Answered,DC_kwDOAnasMc4ANms4,kminoda,"(Just a minor comment)
What you mean is this, right?
```
yaw + normalizeYaw(yaw - ekf_yaw) + ekf_yaw
```

to 
```
yaw = normalizeYaw(yaw - ekf_yaw) + ekf_yaw
```"
Redundant calculation around EKF yaw,D_kwDOAnasMc4AQpFY,2022-09-05T12:51:50Z,IshitaTakeshi,1,Answered,DC_kwDOAnasMc4ANnBn,IshitaTakeshi,Yes. Thank you for the update
Braking Incosistency in raw_vehicle_cmd_converter,D_kwDOAnasMc4AQpmM,2022-09-06T07:54:12Z,ralwing,2,Answered,,,
Braking Incosistency in raw_vehicle_cmd_converter,D_kwDOAnasMc4AQpmM,2022-09-06T07:54:12Z,ralwing,2,Answered,DC_kwDOAnasMc4AOFEh,takayuki5168,"> So when convert_brake_cmd is true, the desired_brake_cmd command contains positive values, and when it's false the desired_brake_cmd contains negative values.
Braking command should either be negative, or positive, but nevet both.

This makes sense. What do you think? @tkimura4 @TakaHoribe "
Braking Incosistency in raw_vehicle_cmd_converter,D_kwDOAnasMc4AQpmM,2022-09-06T07:54:12Z,ralwing,2,Answered,DC_kwDOAnasMc4AOLcS,ralwing,Merged here https://github.com/autowarefoundation/autoware.universe/pull/1945
2022-09-14 Simulation Working Group Meeting,D_kwDOAnasMc4AQpxW,2022-09-06T12:59:14Z,WJaworskiRobotec,0,Unanswered,,,
Open AD Kit WG meeting 2022/09/08,D_kwDOAnasMc4AQpyM,2022-09-06T13:15:21Z,Unknown,0,Unanswered,,,
Autonomy Software WG Meeting 2022/09/13,D_kwDOAnasMc4AQqZE,2022-09-06T18:29:28Z,BonoloAWF,1,Answered,,,
Autonomy Software WG Meeting 2022/09/13,D_kwDOAnasMc4AQqZE,2022-09-06T18:29:28Z,BonoloAWF,1,Answered,DC_kwDOAnasMc4AN2_X,hueirutseng,"ITRI Bus Project Update: [Presentation](https://www.dropbox.com/s/bvr2sr1yfxhes6p/ITRI%20ADV%20upgrade%20schedule_status%20update_20220913_v2.pdf?dl=0)

Remaining issues needed to be resolved before moving on to on-vehicle testing at ITRI campus: 
- LiDAR Perception:
    1. msg converter | Estimated Completion Date: 9/23
    2. TF converter | Estimated Completion Date: 9/23

- Localization Module
    1. TF converter | Estimated Completion Date: 9/23 "
Dynamically Expanding the Drivable Area,D_kwDOAnasMc4AQqso,2022-09-07T04:43:18Z,maxime-clem,5,Answered,,,
Dynamically Expanding the Drivable Area,D_kwDOAnasMc4AQqso,2022-09-07T04:43:18Z,maxime-clem,5,Answered,DC_kwDOAnasMc4ANqk5,zulfaqar-azmi-t4,"The dynamic drivable area expansion seems more easier to implement, and I would suggest to append the whole side lane instead of length-based. It will make the code more easier to implement and less complexity(?)."
Dynamically Expanding the Drivable Area,D_kwDOAnasMc4AQqso,2022-09-07T04:43:18Z,maxime-clem,5,Answered,DC_kwDOAnasMc4AOgVU,WJaworskiRobotec,"@maxime-clem 

I believe that we should expand the drivable area at the initialization phase of Autoware. It should be mostly expanded on the curves of lanelet and it should depend on the shape of lanelet and  the parameters of the selected Ego vehicle stored in vehicle_info_param.yaml:

_ros__parameters:
    wheel_radius: 0.383 # The radius of the wheel, primarily used for dead reckoning.
    wheel_width: 0.235 # The lateral width of a wheel tire, primarily used for dead reckoning.
    wheel_base: 2.79 # between front wheel center and rear wheel center
    wheel_tread: 1.64 # between left wheel center and right wheel center
    front_overhang: 1.0 # between front wheel center and vehicle front
    rear_overhang: 1.1 # between rear wheel center and vehicle rear
    left_overhang: 0.128 # between left wheel center and vehicle left
    right_overhang: 0.128 # between right wheel center and vehicle right
    vehicle_height: 2.5
    max_steer_angle: 0.70 # [rad]_

Based on these parameters we should be able to calculate the lateral length of vehicle footprint in each place of the lanelet. If my idea is not clear I can prepare some drawings. 

I'm not sure if it's already considered somewhere in the planner, but definitely should be also considered in the drivable area, especially for the long vehicles (like bus)"
Dynamically Expanding the Drivable Area,D_kwDOAnasMc4AQqso,2022-09-07T04:43:18Z,maxime-clem,5,Answered,DC_kwDOAnasMc4AOgYJ,maxime-clem,"I think I understand your point.
- We can calculate if the road is too narrow simply from the lanelet map and the vehicle dimension.
- We can expand the drivable area only in places where the road is too narrow.

I agree this logic works well _as long as there are no obstacles_. Obstacles are not known in advance and can make a road more narrow than expected (e.g., a vehicle is parked on the side of the road). In this case, we need a dynamic way to expand the drivable area.

Please let me know if I misunderstood something."
Dynamically Expanding the Drivable Area,D_kwDOAnasMc4AQqso,2022-09-07T04:43:18Z,maxime-clem,5,Answered,DC_kwDOAnasMc4AOgZG,WJaworskiRobotec,"Yes, I think you understand correctly.

You are in general right about the obstacles. If I start thinking about the situations on the road that requires going off the currently driven lane, I'm having another idea:
- Depending on the situation (parked vehicle, other obstacle, narrow turn etc.) the planned trajectory can differ a lot 
but:
- It should never go outside of the road surface.

Wouldn't it be easier if we consider the entire road surface as drivable and the appropriate path is just handled by a planner ?

I apologize If it's not a valid suggestion, I'm not really familiar with the planning part of Autoware, I've just noticed the problem in simulation based tests of ITRI and trying to help :) 
"
Dynamically Expanding the Drivable Area,D_kwDOAnasMc4AQqso,2022-09-07T04:43:18Z,maxime-clem,5,Answered,DC_kwDOAnasMc4AOgaj,maxime-clem,"Thank you for participating in the discussion. It is very valuable.
I totally agree with your idea and I think it is similar to the ""Soft drivable area"" I proposed.
The planner should prioritize driving in its current lane, but it should also be allowed to drive in other lanes if necessary.
This can be achieved by (1) changing the drivable area to have multiple areas with various costs, and (2) modifying the planners to consider an objective function over the drivable area.
I personally prefer this solution and when I have time I will prepare a more detailed proposal."
Dynamically Expanding the Drivable Area,D_kwDOAnasMc4AQqso,2022-09-07T04:43:18Z,maxime-clem,5,Answered,DC_kwDOAnasMc4APWUA,tleyden,"> Currently, dynamic obstacles are only checked in the current lane.

Out of curiosity, how does this work?  Are the dynamic obstacles detected via lidar, but ignored if their position is determined to be outside of the current lane?"
Dynamically Expanding the Drivable Area,D_kwDOAnasMc4AQqso,2022-09-07T04:43:18Z,maxime-clem,5,Answered,DC_kwDOAnasMc4APWWw,maxime-clem,"They are only ignored by the `obstacle_avoidance_planner` which generates the trajectory around obstacles in the ego lane.
Other planners will detect the dynamic obstacle on the planned trajectory and force a 0 velocity before the collision.
There are known issues with this logic as shown in the video posted in this discussion: https://github.com/orgs/autowarefoundation/discussions/2915"
Dynamically Expanding the Drivable Area,D_kwDOAnasMc4AQqso,2022-09-07T04:43:18Z,maxime-clem,5,Answered,DC_kwDOAnasMc4APcIo,WJaworskiRobotec,"@maxime-clem 
I've discovered that the planning definitely does not work properly for long vehicles : https://github.com/autowarefoundation/autoware.universe/issues/2182 .
I believe that this issue with expanding the drivable area is critical for BusODD scenarios."
Dynamically Expanding the Drivable Area,D_kwDOAnasMc4AQqso,2022-09-07T04:43:18Z,maxime-clem,5,Answered,DC_kwDOAnasMc4APkqi,TakaHoribe,"@maxime-clem @WJaworskiRobotec 
I suggest going with the ""dynamic drivable area (DA) expansion"" to solve the issue https://github.com/autowarefoundation/autoware.universe/issues/2182 because of its simplicity.
The ""Soft DA"" idea looks also good to me, but it has a significant impact on the whole system. We should rethink the overall design of the DA if we are going to do this. It would take a long time.

As @WJaworskiRobotec said, the dynamic DA Expansion can be determined statically from lane structure and vehicle geometry. (Although the DA generation itself is dynamic, so it will be dynamic anyway.)

My specific suggestions are:
- Check the footprint of the vehicle along the centerline defined on the map and if it goes outside the lane boundary, make the area a candidate for expansion. (A margin for the footprint may be provided.)
- If the candidate extension area is really drivable, add the area to the DA. (e.g. the DA shouldn't have a sidewalk even if it is a candidate.) Maybe we can take AND for the areas.

This operation can be implemented in the `behavior_path_planner` which currently makes the DA. The resultant DA is ""driving lane (original)"" + (""footprint along the centerline"" and ""drivable"").

The minor problem is that at the time the DA is generated, the path vehicle follows has not been determined. So, strictly speaking, extending the DA based on an accurate decision is impossible. However, this is a minor issue that can be put off this time."
Dynamically Expanding the Drivable Area,D_kwDOAnasMc4AQqso,2022-09-07T04:43:18Z,maxime-clem,5,Answered,DC_kwDOAnasMc4APnOG,yukkysaito,"> The minor problem is that at the time the DA is generated, the path vehicle follows has not been determined. So, strictly speaking, extending the DA based on an accurate decision is impossible. However, this is a minor issue that can be put off this time.

If DA is not enough when the behavior path planner generates the rough path, does it mean that DA is extended?"
Dynamically Expanding the Drivable Area,D_kwDOAnasMc4AQqso,2022-09-07T04:43:18Z,maxime-clem,5,Answered,DC_kwDOAnasMc4AP0Nr,maxime-clem,"I think this idea is the best for the short term.
> If DA is not enough when the behavior path planner generates the rough path, does it mean that DA is extended?

With this idea, the DA is generated and extended by the `behavior_path_planner`.
I think the point made by TakaHoribe is that the DA + path calculated by the `behavior_path_planner` creates a problem that can be impossible to solve by the motion planner (`obstacle_avoidance_planner`).

I wrote my understanding of the problem and a proposal of this idea here:
[AWF-202211-DynamicDrivableArea.pdf](https://github.com/autowarefoundation/autoware/files/10012666/AWF-202211-DynamicDrivableArea.pdf)

I will present it at the Software Working Group today and, if people like the idea, I will implement it before the end of the year."
More frequent Docker build on Actions?,D_kwDOAnasMc4AQsn0,2022-09-09T04:20:28Z,IshitaTakeshi,2,Answered,,,
More frequent Docker build on Actions?,D_kwDOAnasMc4AQsn0,2022-09-09T04:20:28Z,IshitaTakeshi,2,Answered,DC_kwDOAnasMc4ANvu_,kenji-miyake,"If you request, we can run the workflow using the `workflow_dispatch` event.
I think it's not good to waste resources so much by building Docker images every day."
More frequent Docker build on Actions?,D_kwDOAnasMc4AQsn0,2022-09-09T04:20:28Z,IshitaTakeshi,2,Answered,DC_kwDOAnasMc4ANvwZ,IshitaTakeshi,"I mean not every day, but more frequently, like twice a week.
"
More frequent Docker build on Actions?,D_kwDOAnasMc4AQsn0,2022-09-09T04:20:28Z,IshitaTakeshi,2,Answered,DC_kwDOAnasMc4ANv5b,kenji-miyake,"I don't think it's not necessary due to the following reasons.
- You can update the dependency with an old Docker image. See 3 in https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/docker-installation/#how-to-set-up-a-workspace.
- You can create Docker images in your fork if necessary."
More frequent Docker build on Actions?,D_kwDOAnasMc4AQsn0,2022-09-09T04:20:28Z,IshitaTakeshi,2,Answered,DC_kwDOAnasMc4ANwW6,maxime-clem,"Is it correct that the docker image only needs to be updated when there are changes to the dependencies ?
If so, the image could be rebuilt only when these dependencies change."
More frequent Docker build on Actions?,D_kwDOAnasMc4AQsn0,2022-09-09T04:20:28Z,IshitaTakeshi,2,Answered,DC_kwDOAnasMc4ANyHE,kenji-miyake,"For the development image, yes it's correct.
For the prebuilt image, we can consider building more frequently.
But I believe we have to work on https://github.com/autowarefoundation/autoware/issues/2840 before that."
grid_map_cv package fails to build,D_kwDOAnasMc4AQtUo,2022-09-10T05:05:51Z,MrOCW,2,Answered,,,
grid_map_cv package fails to build,D_kwDOAnasMc4AQtUo,2022-09-10T05:05:51Z,MrOCW,2,Answered,DC_kwDOAnasMc4ANyOp,MrOCW,i commented out the the lines mentioned in the cmake errors and it compiles fine now but not sure if this is the right way to handle this?
grid_map_cv package fails to build,D_kwDOAnasMc4AQtUo,2022-09-10T05:05:51Z,MrOCW,2,Answered,DC_kwDOAnasMc4AOEc8,domajstorovic,"I can confirm this build error. My specs:

- OS: Ubuntu 20.04
- ROS2: Galactic
- Autoware from source"
2022-09-13 ODD working group weekly meeting (110),D_kwDOAnasMc4AQu1S,2022-09-12T22:03:47Z,Igata-ctrl,0,Unanswered,,,
A tool for simulating,D_kwDOAnasMc4AQvC3,2022-09-13T07:49:17Z,lilyrosecarnation,2,Answered,,,
A tool for simulating,D_kwDOAnasMc4AQvC3,2022-09-13T07:49:17Z,lilyrosecarnation,2,Answered,DC_kwDOAnasMc4AN266,takayuki5168,"@yabuta @tkhmy 
Could you answer."
A tool for simulating,D_kwDOAnasMc4AQvC3,2022-09-13T07:49:17Z,lilyrosecarnation,2,Answered,DC_kwDOAnasMc4AOGLD,tkhmy,"@lilyrosecarnation 
HI, that thing is an internal gui tool that used in TIER IV.
We currently do not have plan to open source it yet, but it is under discussion.

If you want to control the autoware, you can use the rviz plugin that is under the [common](https://github.com/autowarefoundation/autoware.universe/tree/main/common) folder
https://github.com/autowarefoundation/autoware.universe/tree/main/common/tier4_state_rviz_plugin
https://github.com/autowarefoundation/autoware.universe/tree/main/common/tier4_traffic_light_rviz_plugin"
Handling lateral tracking error,D_kwDOAnasMc4AQvFE,2022-09-13T08:40:17Z,xmfcx,5,Answered,,,
Handling lateral tracking error,D_kwDOAnasMc4AQvFE,2022-09-13T08:40:17Z,xmfcx,5,Answered,DC_kwDOAnasMc4AN3ER,mehmetdogru,"@xmfcx 

Well currently we use pure pursuit as lateral controller. Since there is no predicted path calculated whatsoever in pure pursuit I think we can implement the idea of predicting a path with current velocity and steering angle for x seconds. It makes sense to me. It is simple and can be implemented fast. 

Then we can check if it collides with an obstacle and if it will drive outside of the drivable area."
Handling lateral tracking error,D_kwDOAnasMc4AQvFE,2022-09-13T08:40:17Z,xmfcx,5,Answered,DC_kwDOAnasMc4AN3H7,xmfcx,"I have a suggestion too on this case.

- Planner calculates both of these routes.
- One for reference path on the center line
- One for extra collision checking, starting from base_link

## Advantages
- This would be more reliable than blind prediction from the vehicle's velocity and steering angle.
- This wouldn't prevent planner providing a stable reference for controller to follow.
- Obstacle avoidance would be strictly handled in the planning stack, not leaking down to control stack."
Handling lateral tracking error,D_kwDOAnasMc4AQvFE,2022-09-13T08:40:17Z,xmfcx,5,Answered,DC_kwDOAnasMc4AN3UE,yukkysaito,"The current design makes the following assumptions as far as I know
- The ideal goal of control module should follow on trajectory without error. Also, the motion planner module should generate a trajectory that can be followed.
- If a lateral error occurs in control module, the possible error should be set in [the motion velocity module](https://github.com/autowarefoundation/autoware.universe/blob/main/planning/obstacle_stop_planner/src/node.cpp#L479).

However, I do not think it is good to have such an implicit understanding between planning and control.
Therefore, I think that the acceptable control error should be included in the type of trajectory. The control module should be able to run within an acceptable control error. If it cannot run within the acceptable control error, it be sent to the emergency handler."
Handling lateral tracking error,D_kwDOAnasMc4AQvFE,2022-09-13T08:40:17Z,xmfcx,5,Answered,DC_kwDOAnasMc4AOFhK,xmfcx,"If the bounding box of the vehicle is tight, even slight deviations from the center line can cause not checking the collisions. So this error can cause issues even if tracking error is low."
Handling lateral tracking error,D_kwDOAnasMc4AQvFE,2022-09-13T08:40:17Z,xmfcx,5,Answered,DC_kwDOAnasMc4AQKE5,yukkysaito,"> If the bounding box of the vehicle is tight, even slight deviations from the center line can cause not checking the collisions. So this error can cause issues even if tracking error is low.

Yes. 
My idea is as follows

1. Include a tolerance for position error as an output of planning (trajectory msg). Within the tolerance, it is guaranteed that there will be no collisions with obstacles.
2. The control module will raise an error if the control error is not within the tolerance. In some cases, the system will stop."
Handling lateral tracking error,D_kwDOAnasMc4AQvFE,2022-09-13T08:40:17Z,xmfcx,5,Answered,DC_kwDOAnasMc4AOKzj,TakaHoribe,"@xmfcx As discussed above, the idea behind the current design is that the planning module checks a collision on the desired path with a certain margin, and the ego vehicle should stop if the tracking error is over the margin. 
(The reason the path is not generated from the ego pose is to provide a stable reference to the controller.)

But I don't think the current approach is a good way. It is too restrictive, especially for not well-tuned controllers. 
The requirement is that ""even if the control is shaky and deviates from the reference path, the vehicle must be able to drive as long as it is safe"". We don't want to care how long the tracking deviation is.

Here is some suggestion.

- In the planning module, calculate the path from the ego, and to perform collision ckeck to the path.
    - This method can ensure a certain degree of safety while keeping planning-control loose coupling. 
    - However, since the route is calculated without knowing the controller's logic, it is not accurate that much.

- The planning module checks the collision for the path calculated by the control module, like predicted path of the MPC.
    - This method can check the future trajectory of the ego vehicle more accurately.
    -  However, as discussed above, some controllers like pure_pursuit cannot calculate the predicted trajectory (although it can be forced to do so by simulation).

I suggest going with the first one. How to predict the future path without knowing the controller is, I think just integrating the current steering and velocity is enough for the first implementation. 

(The ultimate way is to combine planning and control. If control commands can be generated simultaneously with path generation, we do not have to worry about this mismatch between ideal planning and actual behavior. But it is difficult from a modularity standpoint. We need to give up some accuracy or performance to maintain the clean architecture.)
"
Handling lateral tracking error,D_kwDOAnasMc4AQvFE,2022-09-13T08:40:17Z,xmfcx,5,Answered,DC_kwDOAnasMc4AOK0u,TakaHoribe,"This is a rough sketch.
![image](https://user-images.githubusercontent.com/21360593/191899868-0b28c166-e68a-420c-8e53-62b737a438d3.png)
"
Handling lateral tracking error,D_kwDOAnasMc4AQvFE,2022-09-13T08:40:17Z,xmfcx,5,Answered,DC_kwDOAnasMc4AOLJz,xmfcx,"https://github.com/orgs/autowarefoundation/discussions/2859#discussioncomment-3633659 Here I've shared my solution which is similar to your first option.

Basically we still give the green path as reference to the controller.

But calculate blue one for collision checking purposes."
Handling lateral tracking error,D_kwDOAnasMc4AQvFE,2022-09-13T08:40:17Z,xmfcx,5,Answered,DC_kwDOAnasMc4AOLV2,TakaHoribe,"I personally agree with your approach. It would be also good to have an option to check which path the collision check is performed for. Or maybe both. Like this.

```
collision_check_reference_path: true
collisiton_check_predicted_path: true
``` "
Handling lateral tracking error,D_kwDOAnasMc4AQvFE,2022-09-13T08:40:17Z,xmfcx,5,Answered,DC_kwDOAnasMc4AQdPt,brkay54,"Hello everyone, I want to make a suggestion for control module design.

In current implementation of Autoware, control module is not responsible for collision checking, except
obstacle_collision_checker package (It can stop the vehicle just for emergency situations.). Planning module is making
stop planning and collision checking using the reference trajectory.

However, vehicles actual path would be apart from reference trajectory in some cases such as **starting driving with high
lateral error** and at **sharp turns**.

**Starting driving with high lateral error:**

![beginning](https://user-images.githubusercontent.com/45468306/205666925-88c25af5-2228-44b6-a20b-7ca1d267665d.png)

**Vehicle in sharp turns:**

![sharpturn](https://user-images.githubusercontent.com/45468306/205667074-aced74fd-c0aa-499d-90a6-006e766acd97.png)

**NOTE:** White lines are the predicted path of vehicle

In this scenarios, planning may not handle the collision in some part of the path because it does collision checking just
on reference trajectory. I think this is a critical safety issue, because vehicle will be open to collision in some cases.

Because vehicle’s actual path is strictly depend on the controller, I want to suggest that we should add a node (or we can
refactor the obstacle_collision_checker package to add new functionalities) to check obstacle collision on predicted path
and stop the vehicle if the collision was not handled by the planning module. To make stopped the vehicle, node will
use the pause interface (in vehicle_cmd_gate).

**Here is node’s flowchart:**

![Untitled Diagram drawio](https://user-images.githubusercontent.com/45468306/205667597-8291052a-7fd4-4107-a66b-3bf0755b88c0.png)

This node is going to stop the vehicle just for collisions planning can not handle.

**Pros:**
* easy to implement
* modularity of planning and control still can be provided
* more accurate path for collision checking
* less false positive collisions

**Cons:**
* It depends controller’s predicted path

All controllers in autoware can create predicted path. However, this will make creating predicted trajectory mandatory
for new controllers. I think it is not a big problem because even the most basic controller can create predicted path by
using kinematic model of vehicle iteratively (like in pure_pursuit).
"
Handling lateral tracking error,D_kwDOAnasMc4AQvFE,2022-09-13T08:40:17Z,xmfcx,5,Answered,DC_kwDOAnasMc4AQfDF,mehmetdogru,"@brkay54 

Thank you for the proposal. It looks good. 

I am on the side of creating a new separate control node to implement the algorithm you mentioned. And actually there is another reason behind it. 

When the ego vehicle is not able to follow the reference trajectory specifically in such cases where there are sharp turns on the trajectory there might be more things we should consider other than obstacle checking. I think one the most important ones would be if predicted trajectory (estimated ego trajectory by controllers) **is inside the drivable area or not**. Because currently drivable area check is done in `obstacle_avoidance_planner` only on reference trajectory which ego is not always able to follow. 

So I propose creating a separate node on control side which handles not only obstacle checking but also drivable area checking which will be effective only if planner doesn't take action since ego position is laterally off.

In addition to this, to check if planner took action related to drivable area, slowing down or stopping for an obstacle, this node might subscribe to the output topics of related planning nodes. While this node needs to subscribe to the output traj of `obstacle_avoidance_planner` when drivable area check is concerned,  it needs to subscribe to the output traj of `obstacle_stop_planner` when obstacle checking is concerned. And of course other needed inputs such as path(for drivable area), predicted_trajectory, non-ground_points, dynamic obstacles etc.

cc: @TakaHoribe, @xmfcx "
Handling lateral tracking error,D_kwDOAnasMc4AQvFE,2022-09-13T08:40:17Z,xmfcx,5,Answered,DC_kwDOAnasMc4AQjQi,TakaHoribe,"@brkay54 Thank you for your proposal. It looks good to me as well.

> To make stopped the vehicle, node will use the pause interface (in vehicle_cmd_gate).

Because the pause API is (will be) widely used even in the external application, anyone can cancel the pause sent by this module. Since this function is safety-critcal, it should be canceled easily. I suggest to use the smooth stop command as used in [this PR for MRM](https://github.com/autowarefoundation/autoware.universe/pull/2070). 
"
Handling lateral tracking error,D_kwDOAnasMc4AQvFE,2022-09-13T08:40:17Z,xmfcx,5,Answered,DC_kwDOAnasMc4AQjQ1,TakaHoribe,"@mehmetdogru 

> I think one the most important ones would be if predicted trajectory (estimated ego trajectory by controllers) is inside the drivable area or not.

Yes. I totally agree with this. But considering drivable area in the control is costy and it needs large changes in the modules's interface. We need to discuss more about the pros/cons. Instead, i have an opinion that can easily consider the drivable area. Let me write here...

"
Handling lateral tracking error,D_kwDOAnasMc4AQvFE,2022-09-13T08:40:17Z,xmfcx,5,Answered,DC_kwDOAnasMc4AQjTm,TakaHoribe,"The roles of planning and control in this system are as follows:

- Planning: This involves creating a trajectory for the ego vehicle to follow, with the assumption that the vehicle will be able to track the trajectory within a certain level of error.
- Control: This involves following the trajectory in order to keep the tracking error within the acceptable range.
If the tracking error stays within the expected value, the system should work correctly. However, the current problem is that nothing happens when the tracking error exceeds the limitation.

To address this issue, we need to check for collisions or tracking errors in the control (not in planning), taking into account the actual pose of the ego vehicle. Additionally, we can still make improvements to the planning.

For example, in the velocity planning (motion_velocity_smoother), the system can recalculate the velocity plan based on the actual speed of the ego vehicle when the deviation between the actual and planned speeds exceeds a certain threshold. I suggest implementing a similar approach in the path planning (obstacle_avoidance_planner). This may not solve the issue completely, but it could improve the overall behavior of the system."
Handling lateral tracking error,D_kwDOAnasMc4AQvFE,2022-09-13T08:40:17Z,xmfcx,5,Answered,DC_kwDOAnasMc4AQjVl,TakaHoribe,"The overall system is like this. The proposed node from @brkay54 is written as a `predicted_path_checker` in this figure
![image](https://user-images.githubusercontent.com/21360593/206342153-d732ee7f-0f4a-4045-b6b1-4039d1582404.png)
"
Handling lateral tracking error,D_kwDOAnasMc4AQvFE,2022-09-13T08:40:17Z,xmfcx,5,Answered,DC_kwDOAnasMc4AQj9r,brkay54,"@TakaHoribe Thank you for your feedback! I agree with you except this:

> Because the pause API is (will be) widely used even in the external application, anyone can cancel the pause sent by this module. Since this function is safety-critcal, it should be canceled easily. I suggest to use the smooth stop command as used in [this PR for MRM](https://github.com/autowarefoundation/autoware.universe/pull/2070).

I agree with you, using pause_interface causes some safety problems. However, using mrm_comfortable_stop_operator causes changing velocity on trajectory. I think, it can cause conflict between planning and control modules like you said in this [PR](https://github.com/autowarefoundation/autoware.universe/pull/2341#issuecomment-1323260779) .

For video: https://user-images.githubusercontent.com/45468306/203044604-08a24063-2cf5-4ad1-9136-b5891f482539.mp4

I think we can make some changes in pause_interface to avoid problems you mentioned. For example, we can prioritize the SetPause requests or we can declare another pause_interface for only control modules and we can make it prior to other interface.  
"
Handling lateral tracking error,D_kwDOAnasMc4AQvFE,2022-09-13T08:40:17Z,xmfcx,5,Answered,DC_kwDOAnasMc4AQmvf,mehmetdogru,"@TakaHoribe 

Thank you for your inputs.

> I suggest implementing a similar approach in the path planning (obstacle_avoidance_planner)

Isn't this approach [already implemented](https://github.com/autowarefoundation/autoware.universe/blob/469d8927bd7a0c98b9d491d347e111065973e13f/launch/tier4_planning_launch/config/scenario_planning/lane_driving/motion_planning/obstacle_avoidance_planner/obstacle_avoidance_planner.param.yaml#L82-L85) in `obstacle_avoidance_planner` ? If this is what you meant; for smaller values for `max_ego_moving_dist_for_replan` -converges on traj from base_link- does not work quite well."
Handling lateral tracking error,D_kwDOAnasMc4AQvFE,2022-09-13T08:40:17Z,xmfcx,5,Answered,DC_kwDOAnasMc4AQ_Gp,brkay54,"I created [PR](https://github.com/autowarefoundation/autoware.universe/pull/2528) for `predicted_path_checker`. However, I am not sure to how we make the vehicle stop. If there is no more opinion, I am going to make some changes on `pause_interface` (I will share detailed suggestion later)."
Handling lateral tracking error,D_kwDOAnasMc4AQvFE,2022-09-13T08:40:17Z,xmfcx,5,Answered,DC_kwDOAnasMc4ARESk,mitsudome-r,"Conclusion from meeting between @mehmetdogru , @brkay54 , @TakaHoribe: 
* Whenever `predicted_path_checker` detects obstacle on predicted path, it will send pause command through `pause_interface`. It will remove the pause command if obstacle disappears from the predicted path.
* However, since `pause_interface` can be overridden by other modules, `predicted_path_checker` will send emergency state to trigger emergency stop if urgent stop is needed (e.g., if ego is too close to the obstacle). This will not be recovered without human operation."
Run Autoware Universe with only 1 lidar,D_kwDOAnasMc4AQvGN,2022-09-13T09:02:29Z,lhakim85,2,Answered,,,
Run Autoware Universe with only 1 lidar,D_kwDOAnasMc4AQvGN,2022-09-13T09:02:29Z,lhakim85,2,Answered,DC_kwDOAnasMc4AN7Sw,lhakim85,"I try to run the sensing part only on 1 lidar, and edit lidar.lunch.xml, below is the edited file
[lidar.lunch.xml](https://drive.google.com/file/d/127D12qmAyq2u8adsZUPQfRHyQYd6zze-/view?usp=sharing)

When I launch lidar.launch.xml, i get this error
`[component_container-1] Warning: Invalid frame ID ""base_link"" passed to canTransform argument target_frame - frame does not exist
[component_container-1]          at line 156 in /tmp/binarydeb/ros-galactic-tf2-0.17.4/src/buffer_core.cpp
[component_container-1] [ERROR] [1663221599.339065921] [lidar.top.crop_box_filter_self]: [input_indices_callback] timeout tf: velodyne_top->base_link
`
[full error log is here](https://drive.google.com/file/d/18WNOwfDuYjgfLdZZGOq5QaklHaHAar3L/view?usp=sharing)

Any idea?"
Run Autoware Universe with only 1 lidar,D_kwDOAnasMc4AQvGN,2022-09-13T09:02:29Z,lhakim85,2,Answered,DC_kwDOAnasMc4AOIwV,lhakim85,"manage to run with 1 lidar, need to launch_vehicle to true also, as inside this has the robot_state_publisher.
Another question,
1. How to visualize raw pointcloud to autoware rviz
2. For the perception, which topic do i need to feed to perception module if using single lidar, outlier_filter or /rectified/pointcloud - what are diff between this 2 topic?
![image](https://user-images.githubusercontent.com/10070989/191657256-3c772960-cff3-4fed-9ab2-b11db0455dd0.png)
"
Autonomy Software WG Meeting 2022/09/20,D_kwDOAnasMc4AQvGh,2022-09-13T09:08:50Z,BonoloAWF,0,Unanswered,,,
Open AD Kit WG meeting 2022/09/14,D_kwDOAnasMc4AQvQ4,2022-09-13T13:48:57Z,Unknown,1,Answered,,,
Open AD Kit WG meeting 2022/09/14,D_kwDOAnasMc4AQvQ4,2022-09-13T13:48:57Z,Unknown,1,Answered,DC_kwDOAnasMc4AN6DS,Unknown,"@LalithVipulananthan Thank you for the agenda. Could you add the topic to confirm the use cases that we should develop for the version 2.0?
From my understanding, use cases that we should develop is below:

- “**3 Update wirelessly**” <--- MUST
- “**5 Simulate sensors and scenarios**” <--- MUST
- “4 **Interoperate with MIH APIs**” <--- Only for consideration because of the time line with MIH
- “**1 Collect sensing data**” <--- Out of scope
- “**2 Enhance the capability of perception**” <--- Out of scope

But, we have not authorized the scope in the WG.  I think we can agree the scope of the version 2.0 today.

![CR-FY2022-103_Scope-of-Use-cases-version2 0](https://user-images.githubusercontent.com/89968601/190190420-1c6dfa5d-0a74-4146-b8e7-3c0212d95a45.jpg)
"
Open AD Kit WG meeting 2022/09/14,D_kwDOAnasMc4AQvQ4,2022-09-13T13:48:57Z,Unknown,1,Answered,DC_kwDOAnasMc4AN6Dk,Unknown,"@LalithVipulananthan Sorry, I misunderstood the WG time. "
Does Autoware.auto support carla simulation?,D_kwDOAnasMc4AQwAL,2022-09-14T10:18:39Z,AminoACID123,1,Answered,,,
Does Autoware.auto support carla simulation?,D_kwDOAnasMc4AQwAL,2022-09-14T10:18:39Z,AminoACID123,1,Answered,DC_kwDOAnasMc4AN64B,mitsudome-r,"As far as I know, Autoware.Auto only supports LGSVL Simulator."
Unable to generate TRT Engine,D_kwDOAnasMc4AQwnr,2022-09-15T05:41:57Z,MrOCW,2,Answered,,,
Unable to generate TRT Engine,D_kwDOAnasMc4AQwnr,2022-09-15T05:41:57Z,MrOCW,2,Answered,DC_kwDOAnasMc4AN7fV,maxime-clem,Can you share the output of `nvidia-smi` and `nvcc -v` ?
Unable to generate TRT Engine,D_kwDOAnasMc4AQwnr,2022-09-15T05:41:57Z,MrOCW,2,Answered,DC_kwDOAnasMc4AN7pZ,MrOCW,"nvcc -V:
```
nvcc: NVIDIA (R) Cuda compiler driver
Copyright (c) 2005-2022 NVIDIA Corporation
Built on Wed_May__4_00:02:26_PDT_2022
Cuda compilation tools, release 11.4, V11.4.239
Build cuda_11.4.r11.4/compiler.31294910_0
```
nvidia-smi:
`bash: nvidia-smi: command not found` i think it isnt supported on tegra?

I've created a galactic docker container, downgraded cudnn and tensorRT to the versions as stated in the requirements, then built autoware from source without any cuda/cudnn/trt related errors, then tried running centerpoint and yolo which led to the errors"
Unable to generate TRT Engine,D_kwDOAnasMc4AQwnr,2022-09-15T05:41:57Z,MrOCW,2,Answered,DC_kwDOAnasMc4AN76l,maxime-clem,"Thank you. I have not seen such error before. Usually if there are problems they will occur during the build 🤔 
Do you have the nvidia drivers, cuda, and nvcc installed on the _host_ machine ? I believe they also need to be installed on the host in order to be used in a docker image (this is currently missing from the Docker installation instructions and is being discussed here: https://github.com/autowarefoundation/autoware/issues/2821)."
Unable to generate TRT Engine,D_kwDOAnasMc4AQwnr,2022-09-15T05:41:57Z,MrOCW,2,Answered,DC_kwDOAnasMc4AN77O,MrOCW,"Yes, I have it on the host pre installed by nvidia's sdk manager. Both container & host have cuda, the only difference is that the container has downgraded TRT and cuDNN."
Unable to generate TRT Engine,D_kwDOAnasMc4AQwnr,2022-09-15T05:41:57Z,MrOCW,2,Answered,DC_kwDOAnasMc4AN9Nh,maxime-clem,"I don't have many ideas on how to solve that issue :confused: 

Which command do you use to run the image ? The documentation currently recommends running _without_ enabling the GPU (https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/docker-installation/#docker-with-nvidia-gpu-fails-to-start-autoware-on-arm64-devices) but this may be outdated.

Which docker image are you using ? Multiple image versions are available (https://github.com/autowarefoundation/autoware/pkgs/container/autoware-universe/versions?filters%5Bversion_type%5D=tagged) so maybe another version will work in your case ? For example, `galactic-latest-cuda-arm64`."
Unable to generate TRT Engine,D_kwDOAnasMc4AQwnr,2022-09-15T05:41:57Z,MrOCW,2,Answered,DC_kwDOAnasMc4AN9Ua,MrOCW,"I'm using my own docker build as the ones provided by autoware never worked for me, the build always fails for multiple reasons.
I guess I'll try generating my own models and engines and write a separate inference node for now :) Thanks alot for the help!"
Unable to generate TRT Engine,D_kwDOAnasMc4AQwnr,2022-09-15T05:41:57Z,MrOCW,2,Answered,DC_kwDOAnasMc4AN9Vw,MrOCW,"Here's an example of what happens when i try to run the container on my Xavier AGX.
```
docker: Error response from daemon: failed to create shim: OCI runtime create failed: nvidia-container-runtime did not terminate successfully: exit status 1: time=""2022-09-16T11:53:30+08:00"" level=error msg=""failed to create NVIDIA Container Runtime: failed to construct OCI spec modifier: requirements not met: unsatisfied condition: cuda>=11.6 (cuda=11.4)""
: unknown.
```"
Unable to generate TRT Engine,D_kwDOAnasMc4AQwnr,2022-09-15T05:41:57Z,MrOCW,2,Answered,DC_kwDOAnasMc4AN9V_,MrOCW,Can i confirm that the required version of cudnn and tensorrt still requires downgrading my default 8.4.1 to 8.2.4?
Unable to generate TRT Engine,D_kwDOAnasMc4AQwnr,2022-09-15T05:41:57Z,MrOCW,2,Answered,DC_kwDOAnasMc4AOD8x,maxime-clem,"It looks like the [documentation](https://github.com/autowarefoundation/autoware/blob/main/ansible/roles/tensorrt/README.md) is outdated and the [versions installed by ansible](https://github.com/autowarefoundation/autoware/blob/e108b8fa9e47307b1f2573be5d0dde828235bcb0/amd64.env) are the following:
```
cuda_version=11.6
cudnn_version=8.4.1.50-1+cuda11.6
tensorrt_version=8.4.2-1+cuda11.6
```
If possible, can you try using the provided docker image again ? Make sure it is suffixed by `-cuda` (documentation is being updated https://github.com/autowarefoundation/autoware-documentation/pull/198). If this works you should not have to manually install anything."
Unable to generate TRT Engine,D_kwDOAnasMc4AQwnr,2022-09-15T05:41:57Z,MrOCW,2,Answered,DC_kwDOAnasMc4AOEA0,MrOCW,I am using Jetson Xavier AGX JP 5.0.2 which ships with cuda 11.4 only so the cuda versions doesnt match?
Unable to generate TRT Engine,D_kwDOAnasMc4AQwnr,2022-09-15T05:41:57Z,MrOCW,2,Answered,DC_kwDOAnasMc4AOEEi,manato,"Hi, @MrOCW 
According to the error you posted first, your container might not have the right to use GPU. Could you share the followings?
- The commands you use to run your container
  - I'd like to confirm containers are run with options that allow touching GPUs.
- The output of `ls -l /usr/lib/aarch64-linux-gnu/` in your container
  - This directory will be shared and proper symbolic links should exist there. These links are used by TensorRT inference."
Unable to generate TRT Engine,D_kwDOAnasMc4AQwnr,2022-09-15T05:41:57Z,MrOCW,2,Answered,DC_kwDOAnasMc4AOI7p,maxime-clem,"The issue was caused by incorrect version of `cudnn` and `tensorrt`.
This was caused by outdated instructions which have now been updated: https://github.com/autowarefoundation/autoware/pull/2885"
Separate flags for launching rviz and rviz adaptor nodes,D_kwDOAnasMc4AQw5n,2022-09-15T13:19:31Z,akorb,1,Answered,,,
Separate flags for launching rviz and rviz adaptor nodes,D_kwDOAnasMc4AQw5n,2022-09-15T13:19:31Z,akorb,1,Answered,DC_kwDOAnasMc4AN94q,isamu-takagi,Thank you for the comment. I'll move it to autoware_api_launch and add a dedicated launch flag.
Separate flags for launching rviz and rviz adaptor nodes,D_kwDOAnasMc4AQw5n,2022-09-15T13:19:31Z,akorb,1,Answered,DC_kwDOAnasMc4AN96q,isamu-takagi,"@akorb I created a PR. Does this resolve it?
- https://github.com/autowarefoundation/autoware.universe/pull/1900
- https://github.com/autowarefoundation/autoware_launch/pull/88"
Separate flags for launching rviz and rviz adaptor nodes,D_kwDOAnasMc4AQw5n,2022-09-15T13:19:31Z,akorb,1,Answered,DC_kwDOAnasMc4AN98S,akorb,@isamu-takagi Thank you very much! Wouldn't it make sense to forward `launch_default_ad_api` and `launch_rviz_adaptors` from `autoware.launch.xml` to `autoware_api.launch.xml`? :thinking: 
Separate flags for launching rviz and rviz adaptor nodes,D_kwDOAnasMc4AQw5n,2022-09-15T13:19:31Z,akorb,1,Answered,DC_kwDOAnasMc4AN-Ah,isamu-takagi,"> Wouldn't it make sense to forward launch_default_ad_api and launch_rviz_adaptors from autoware.launch.xml to autoware_api.launch.xml?

Does this mean you want to specify launch flags like below? If so, this already works, as the arguments are reflected in the included files as well. (This depends on the forwarding attribute of the group tag.)
```
ros2 launch autoware.launch.xml launch_default_ad_api:=true launch_rviz_adaptors:=false`
"
Separate flags for launching rviz and rviz adaptor nodes,D_kwDOAnasMc4AQw5n,2022-09-15T13:19:31Z,akorb,1,Answered,DC_kwDOAnasMc4AN-Ap,akorb,"Ah I see, thanks! That's what I meant. Then it looks like exactly what we need :+1: "
Deactivate localization during pose initialization,D_kwDOAnasMc4AQxYL,2022-09-16T05:26:31Z,kminoda,0,Unanswered,,,
2022-09-20 ODD working group weekly meeting (111),D_kwDOAnasMc4AQxgv,2022-09-16T09:20:19Z,Igata-ctrl,0,Unanswered,,,
Add utility scripts,D_kwDOAnasMc4AQxki,2022-09-16T10:53:10Z,isamu-takagi,3,Answered,,,
Add utility scripts,D_kwDOAnasMc4AQxki,2022-09-16T10:53:10Z,isamu-takagi,3,Answered,DC_kwDOAnasMc4AN-B8,maxime-clem,"Let me share the script I use:
```bash
#!/bin/bash
CMAKE_ARGS=(""-DCMAKE_CXX_COMPILER_LAUNCHER=ccache -DCMAKE_EXPORT_COMPILE_COMMANDS=1"")
ARGS=(""--symlink-install"") # --executor sequential"")
MAP=$HOME/autoware/maps/planning_simulator_sample_map/
VEHICLE=sample_vehicle SENSOR=sample_sensor_kit
PKG=(grid_map_utils tier4_planning_rviz_plugin)

if [[ $# -gt 1 ]]; then
	PKG=$2
fi

set -x  # print the executed commands
case $1 in
	bag)
		ros2 launch autoware_launch logging_simulator.launch.xml map_path:=""$MAP"" vehicle_model:=""$VEHICLE"" sensor_model:=""$SENSOR"" localization:=false
		;;
	test)
		colcon test --packages-select ""$PKG"" --event-handlers console_direct+
		;;
	sim)
		ros2 launch autoware_launch planning_simulator.launch.xml map_path:=""$MAP"" vehicle_model:=""$VEHICLE"" sensor_model:=""$SENSOR"" use_sim_time:=true
	;;
	debug)
		colcon build --cmake-args ${CMAKE_ARGS[@]} -DCMAKE_BUILD_TYPE=Debug --packages-select ${PKG[@]} ${ARGS[@]}
	;;
	debug2)
		colcon build --cmake-args ${CMAKE_ARGS[@]} -DCMAKE_BUILD_TYPE=RelWithDebInfo --packages-select ${PKG[@]} ${ARGS[@]}
	;;
	clean)
	 	for pkg in ""${PKG[@]}""
		do
			rm -rf install/$pkg build/$pkg
		done
	;;
	build)
		ARGS+=(""--catkin-skip-building-tests"")
		CMAKE_ARGS+=(""-DCMAKE_BUILD_TYPE=Release"")
		CMD=""""
		if [[ $# -gt 1 ]]; then
			CMD=""--packages-up-to ${PKG[@]}""
		fi
		colcon build $CMD --cmake-args ${CMAKE_ARGS[@]} ${ARGS[@]}
	;;
	*)
		if [[ $# -gt 0 ]]; then
			PKG=$@
		fi
		colcon build --cmake-args -DCMAKE_BUILD_TYPE=Release ${CMAKE_ARGS[@]} --packages-select ${PKG[@]} ${ARGS[@]}
	;;
esac
```"
Add utility scripts,D_kwDOAnasMc4AQxki,2022-09-16T10:53:10Z,isamu-takagi,3,Answered,DC_kwDOAnasMc4AN_Vk,kenji-miyake,"For fish shell users, I'd recommend my plugins for better ROS life.

- https://github.com/kenji-miyake/auto-source-setup-bash.fish
- https://github.com/kenji-miyake/colcon-extensions.fish
- https://github.com/kenji-miyake/colcon-abbr.fish
- https://github.com/kenji-miyake/reload.fish
- https://github.com/kenji-miyake/vcd.fish


For example, if you just type `cbr` (means `colcon build release`), the `colcon-abbr` extends it to `colcon build --symlink-install --cmake-args -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DCMAKE_BUILD_TYPE=Release`.
You can customize the options as you like."
Add utility scripts,D_kwDOAnasMc4AQxki,2022-09-16T10:53:10Z,isamu-takagi,3,Answered,DC_kwDOAnasMc4AOD1w,taikitanaka3,"@isamu-takagi 
some scripts to debug is in tier4_debug_toiols I would like you to use this
https://github.com/tier4/debug_tools"
cargo delivery demo,D_kwDOAnasMc4AQy3C,2022-09-19T02:42:04Z,gaokao123,0,Unanswered,,,
AVP with GPU,D_kwDOAnasMc4AQy3R,2022-09-19T02:48:43Z,gaokao123,0,Unanswered,,,
Mapping WG Meeting 21/09/2022,D_kwDOAnasMc4AQzZg,2022-09-19T19:19:41Z,armaganarsln,0,Unanswered,,,
How to bind a stop line to a crosswalk?,D_kwDOAnasMc4AQzqy,2022-09-20T06:49:17Z,NorahXiong,3,Answered,,,
How to bind a stop line to a crosswalk?,D_kwDOAnasMc4AQzqy,2022-09-20T06:49:17Z,NorahXiong,3,Answered,DC_kwDOAnasMc4AOE5_,takayuki5168,"@NorahXiong 
In [planning simulation doc](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation), we have [sample-map-planning](https://drive.google.com/file/d/1499_nsbUbIeturZaDj7jhUownh5fvXHd/view) which has crosswalks.
Is this what you want?

![image](https://user-images.githubusercontent.com/20228327/191261520-fa62a929-6c20-4fe2-9ff5-3d4b232ac491.png)
"
How to bind a stop line to a crosswalk?,D_kwDOAnasMc4AQzqy,2022-09-20T06:49:17Z,NorahXiong,3,Answered,DC_kwDOAnasMc4AOGQO,NorahXiong,"Not exactly. As long as I know, stop lines in this map are related to traffic lights rather than crosswalks."
How to bind a stop line to a crosswalk?,D_kwDOAnasMc4AQzqy,2022-09-20T06:49:17Z,NorahXiong,3,Answered,DC_kwDOAnasMc4AOJ16,takayuki5168,"It seems in TIER IV we are using the map with a crosswalk that does not have a stop line. That means the stop line is calculated automatically.
https://github.com/autowarefoundation/autoware.universe/blob/643645ae9b5dd44b0392050584a381a9a7827ed3/planning/behavior_velocity_planner/src/scene_module/crosswalk/scene_crosswalk.cpp#L250-L254

Do you wanna put a stop line of a crosswalk in the lanelet map?"
How to bind a stop line to a crosswalk?,D_kwDOAnasMc4AQzqy,2022-09-20T06:49:17Z,NorahXiong,3,Answered,DC_kwDOAnasMc4AOKrC,NorahXiong,"I see your point. I just tried to add a crosswalk related stop line to improve the vector map as our test field has the same case. 
I think the Autoware code is ready to deal with both [actual](https://github.com/autowarefoundation/autoware.universe/blob/643645ae9b5dd44b0392050584a381a9a7827ed3/planning/behavior_velocity_planner/src/scene_module/crosswalk/scene_crosswalk.cpp#L237) and virtual stop line. Anyway, the automatically calculated stop line works well in simulator.


"
How to bind a stop line to a crosswalk?,D_kwDOAnasMc4AQzqy,2022-09-20T06:49:17Z,NorahXiong,3,Answered,DC_kwDOAnasMc4AOLP5,takayuki5168,@NorahXiong Was your issue resolved now?
How to bind a stop line to a crosswalk?,D_kwDOAnasMc4AQzqy,2022-09-20T06:49:17Z,NorahXiong,3,Answered,DC_kwDOAnasMc4AOLQZ,NorahXiong,Not yet. I tried to bind the stop_line with crosswalk as the traffic_light. But it doesn't work in that way.
How to bind a stop line to a crosswalk?,D_kwDOAnasMc4AQzqy,2022-09-20T06:49:17Z,NorahXiong,3,Answered,DC_kwDOAnasMc4AOLQ8,takayuki5168,"You mean you wanna know how to bind a stop line with a crosswalk using VMB (Vector Map Builder), right? If so, I guess VMB does not support a crosswalk with a stop line. I will check it internally at TIER IV."
How to bind a stop line to a crosswalk?,D_kwDOAnasMc4AQzqy,2022-09-20T06:49:17Z,NorahXiong,3,Answered,DC_kwDOAnasMc4AOLRp,NorahXiong,"> You mean you wanna know how to bind a stop line with a crosswalk using VMB (Vector Map Builder), right? If so, I guess VMB does not support a crosswalk with a stop line. I will check it internally at TIER IV.

Actually I've never used VMB. I think a sample xml code is enough."
How to bind a stop line to a crosswalk?,D_kwDOAnasMc4AQzqy,2022-09-20T06:49:17Z,NorahXiong,3,Answered,DC_kwDOAnasMc4AOcTv,satoshi-ota,"Hi @NorahXiong 

We can bind the stop line to a crosswalk lanelet by following steps:

1. create `road_marking` regulatory element
  a. refer: `stop_line` (linestring)
  b. referrer: `crosswalk` (lanelet)

2. add optional tag in `stop_line`
  a. tag name: `crosswalk_id`
  b. value: `stop_line` id

---
`road_marking` regulatory element
```xml
  <relation id=""9926"">
    <member type=""way"" role=""refers"" ref=""367""/> (bind `stop_line` to a crosswalk)
    <tag k=""type"" v=""regulatory_element""/>
    <tag k=""subtype"" v=""road_marking""/>
  </relation>
```
`crosswalk` lanelet
```xml
  <relation id=""166"">
    <member type=""way"" role=""left"" ref=""331""/>
    <member type=""way"" role=""right"" ref=""332""/>
    <member type=""relation"" role=""regulatory_element"" ref=""9838""/>
    <member type=""relation"" role=""regulatory_element"" ref=""9926""/> (refer `road_marking` regulatory element)
    <tag k=""type"" v=""lanelet""/>
    <tag k=""subtype"" v=""crosswalk""/>
    <tag k=""speed_limit"" v=""30""/>
    <tag k=""location"" v=""urban""/>
    <tag k=""one_way"" v=""yes""/>
    <tag k=""participant:pedestrian"" v=""yes""/>
  </relation>
```
`stop_line` linestring
```xml
  <way id=""367"">
    <nd ref=""1890""/>
    <nd ref=""2200""/>
    <tag k=""type"" v=""stop_line""/>
    <tag k=""crosswalk_id"" v=""166""/>
  </way>
```

(FYI: the code to find stop line that's related to crosswalk.)
https://github.com/autowarefoundation/autoware.universe/blob/1881f970c9a7873ed6fe2154020843638328e12d/planning/behavior_velocity_planner/src/scene_module/crosswalk/scene_crosswalk.cpp#L237-L248"
How to bind a stop line to a crosswalk?,D_kwDOAnasMc4AQzqy,2022-09-20T06:49:17Z,NorahXiong,3,Answered,DC_kwDOAnasMc4AQCIo,mitsudome-r,"FYI, we are planning to update definition of crosswalks here: https://github.com/orgs/autowarefoundation/discussions/3036"
Autonomy Software WG Meeting 2022/09/27,D_kwDOAnasMc4AQ0HV,2022-09-20T17:15:52Z,BonoloAWF,0,Unanswered,,,
build autoware.universe Error,D_kwDOAnasMc4AQ0jC,2022-09-21T08:05:58Z,gaokao123,2,Answered,,,
build autoware.universe Error,D_kwDOAnasMc4AQ0jC,2022-09-21T08:05:58Z,gaokao123,2,Answered,DC_kwDOAnasMc4AOGvy,kenji-miyake,"@gaokao123 Have you run `rosdep update`?
https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/source-installation/#how-to-set-up-a-workspace"
build autoware.universe Error,D_kwDOAnasMc4AQ0jC,2022-09-21T08:05:58Z,gaokao123,2,Answered,DC_kwDOAnasMc4AOG0n,gaokao123,"yes, already run rosdep update"
build autoware.universe Error,D_kwDOAnasMc4AQ0jC,2022-09-21T08:05:58Z,gaokao123,2,Answered,DC_kwDOAnasMc4AOG0v,kenji-miyake,Would it be possible for you to write the exact and full commands and log?
build autoware.universe Error,D_kwDOAnasMc4AQ0jC,2022-09-21T08:05:58Z,gaokao123,2,Answered,DC_kwDOAnasMc4AOG3C,gaokao123,"my full commands:
1. install the dependencies；
2.git clone https://github.com/autowarefoundation/autoware.git
   cd autoware
   mkdir src
3.vcs import src < autoware.repos
4.source /opt/ros/galactic/setup.bash
  rosdep update
  rosdep install -y --from-paths src --ignore-src --rosdistro $ROS_DISTRO

then i got errors stating
ERROR: the following packages/stacks could not have their rosdep keys resolved
to system dependencies:
tvm_utility: Cannot locate rosdep definition for [tvm_vendor]
carla_pointcloud: Cannot locate rosdep definition for [velodyne_rawdata]
trtexec_vendor: Cannot locate rosdep definition for [tensorrt_cmake_module]
"
build autoware.universe Error,D_kwDOAnasMc4AQ0jC,2022-09-21T08:05:58Z,gaokao123,2,Answered,DC_kwDOAnasMc4AOG8V,kenji-miyake,Could you also paste the log of `rosdep update` and `sudo apt update`?
build autoware.universe Error,D_kwDOAnasMc4AQ0jC,2022-09-21T08:05:58Z,gaokao123,2,Answered,DC_kwDOAnasMc4AOIl4,gaokao123," the log of rosdep update and sudo apt update：

![微信截图_20220922091341](https://user-images.githubusercontent.com/111047949/191637237-8a354348-a809-4914-a9ef-9a8607e9acc8.png)
![微信截图_20220922091552](https://user-images.githubusercontent.com/111047949/191637246-abd43978-64da-4609-a0a4-25417c84dc1d.png)
"
build autoware.universe Error,D_kwDOAnasMc4AQ0jC,2022-09-21T08:05:58Z,gaokao123,2,Answered,DC_kwDOAnasMc4AOImg,kenji-miyake,"Thank you.
It might not be related to this issue, I think this error should be resolved.
![image](https://user-images.githubusercontent.com/31987104/191638296-edea861c-7684-40eb-aa50-51ee3267ea77.png)

And what happens with `apt-cache show ros-galactic-tvm-vendor`?"
build autoware.universe Error,D_kwDOAnasMc4AQ0jC,2022-09-21T08:05:58Z,gaokao123,2,Answered,DC_kwDOAnasMc4AOIoP,gaokao123,"Thank you,  and do you know how to solve this problem?  another, my version of ROS is galactic,  here is the log of apt-cache show ros-galactic-tvm-vendor
![image](https://user-images.githubusercontent.com/111047949/191640713-f1a2961e-0937-4771-8d75-3e84c3aa72c0.png)
"
build autoware.universe Error,D_kwDOAnasMc4AQ0jC,2022-09-21T08:05:58Z,gaokao123,2,Answered,DC_kwDOAnasMc4AOIpw,kenji-miyake,"Ah, sorry. I mistyped `galactic` as `foxy`."
build autoware.universe Error,D_kwDOAnasMc4AQ0jC,2022-09-21T08:05:58Z,gaokao123,2,Answered,DC_kwDOAnasMc4AOIp2,kenji-miyake,"Hmm, so if you run `sudo apt install ros-galactic-tvm-vendor` and other packages, the problem will be resolved for now.
However, those packages should be installed via `rosdep`, so it's strange. :thinking: "
build autoware.universe Error,D_kwDOAnasMc4AQ0jC,2022-09-21T08:05:58Z,gaokao123,2,Answered,DC_kwDOAnasMc4AOIq8,gaokao123,"ok, thanks a lot, I have installed the tvm-vendor with the command of ""sudo apt install ros-galactic-tvm-vendo"", and others packages download from the website of https://github.com/tier4, but only one pakage is velodyne_rawdata.
![image](https://user-images.githubusercontent.com/111047949/191645821-3fa547d4-9af8-4970-afe4-ef6060de0441.png)

"
build autoware.universe Error,D_kwDOAnasMc4AQ0jC,2022-09-21T08:05:58Z,gaokao123,2,Answered,DC_kwDOAnasMc4AOItq,kenji-miyake,"In [this comment](https://github.com/orgs/autowarefoundation/discussions/2881#discussioncomment-3705208), my colleague (@isamu-takagi) found that `galactic` (and also `humble`) aren't updated during `rosdep update`.
![image](https://user-images.githubusercontent.com/31987104/191651461-0c498f3d-d4d9-4f55-a01d-a189e022036c.png)
"
build autoware.universe Error,D_kwDOAnasMc4AQ0jC,2022-09-21T08:05:58Z,gaokao123,2,Answered,DC_kwDOAnasMc4AOIty,kenji-miyake,"It seems the server is different. It uses `gitee.com` instead of `raw.githubusercontent.com`.

My result is the following:

```console
❯ rosdep update
reading in sources list data from /etc/ros/rosdep/sources.list.d
Hit https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/osx-homebrew.yaml
Hit https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/base.yaml
Hit https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/python.yaml
Hit https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/ruby.yaml
Hit https://raw.githubusercontent.com/ros/rosdistro/master/releases/fuerte.yaml
Hit https://s3.amazonaws.com/autonomoustuff-repo/autonomoustuff-public-humble.yaml
Query rosdistro index https://raw.githubusercontent.com/ros/rosdistro/master/index-v4.yaml
Skip end-of-life distro ""ardent""
Skip end-of-life distro ""bouncy""
Skip end-of-life distro ""crystal""
Skip end-of-life distro ""dashing""
Skip end-of-life distro ""eloquent""
Add distro ""foxy""
Add distro ""galactic""
Skip end-of-life distro ""groovy""
Add distro ""humble""
Skip end-of-life distro ""hydro""
Skip end-of-life distro ""indigo""
Skip end-of-life distro ""jade""
Skip end-of-life distro ""kinetic""
Skip end-of-life distro ""lunar""
Add distro ""melodic""
Add distro ""noetic""
Add distro ""rolling""
updated cache in /home/kenji/.ros/rosdep/sources.cache
```"
build autoware.universe Error,D_kwDOAnasMc4AQ0jC,2022-09-21T08:05:58Z,gaokao123,2,Answered,DC_kwDOAnasMc4AOIt0,kenji-miyake,"@gaokao123 Could you check it, please? Probably the mirror server is old.
https://gitee.com/ssonic/rosdistro/"
build autoware.universe Error,D_kwDOAnasMc4AQ0jC,2022-09-21T08:05:58Z,gaokao123,2,Answered,DC_kwDOAnasMc4AOIv8,gaokao123,"@kenji-miyake That's because the Internet is limited,so i replaced the  raw.githubusercontent.com with gitee.com "
build autoware.universe Error,D_kwDOAnasMc4AQ0jC,2022-09-21T08:05:58Z,gaokao123,2,Answered,DC_kwDOAnasMc4AOIwp,kenji-miyake,"I know that, but you have to update the content on gitee.com."
build autoware.universe Error,D_kwDOAnasMc4AQ0jC,2022-09-21T08:05:58Z,gaokao123,2,Answered,DC_kwDOAnasMc4AOI0I,gaokao123,is it gitee.com?I update the content on gitee.com
Open AD Kit WG meeting 2022/09/21,D_kwDOAnasMc4AQ0nA,2022-09-21T09:46:32Z,HamburgDave,1,Answered,,,
Open AD Kit WG meeting 2022/09/21,D_kwDOAnasMc4AQ0nA,2022-09-21T09:46:32Z,HamburgDave,1,Answered,DC_kwDOAnasMc4AOHdI,Unknown,"@HamburgDave Hi David, I'll also use the following material for my agenda ""OAD Kit 2.0 Documentation/scope.""
[Scope Open AD Kit Documentation Site.pdf](https://github.com/autowarefoundation/autoware/files/9617231/Scope.Open.AD.Kit.Documentation.Site.pdf)
"
Autoware.AI Behavior planner overriding velocity on fixed route,D_kwDOAnasMc4AQ0t-,2022-09-21T12:59:11Z,osholsonel20,1,Answered,,,
Autoware.AI Behavior planner overriding velocity on fixed route,D_kwDOAnasMc4AQ0t-,2022-09-21T12:59:11Z,osholsonel20,1,Answered,DC_kwDOAnasMc4APky5,TakaHoribe,"@osholsonel20 If I remember correctly, `pure_pursuit` does not control the velocity. The `pure_pursuit` just get the target velocity on the closest path point and publishes the value as a target velocity command.
So the cause of the velocity loop (osccilation) should be either ""in the velocity planning"" or ""in the velocity controller in the later stage of pure pursuit"".

I would suggest you to check these and see which layer's value is oscillating.

Btw the AWF will officially stop the support of autoware.ai in less than two month. (https://github.com/Autoware-AI)
I recommend you using [autoware.universe](https://github.com/autowarefoundation/autoware.universe) instead. The pure_pursuit pkg is in it as well/"
Technical Steering Committee (TSC) Meeting #45 (2022/08/17) Minutes,D_kwDOAnasMc4AQ1Vx,2022-09-22T07:35:32Z,mitsudome-r,0,Unanswered,,,
Technical Steering Committee (TSC) Meeting #46 (2022/09/14) Minutes,D_kwDOAnasMc4AQ1WI,2022-09-22T07:44:40Z,mitsudome-r,0,Unanswered,,,
Is there any package in Autoware that can control the car directly?,D_kwDOAnasMc4AQ2BO,2022-09-23T06:38:35Z,evshary,1,Answered,,,
Is there any package in Autoware that can control the car directly?,D_kwDOAnasMc4AQ2BO,2022-09-23T06:38:35Z,evshary,1,Answered,DC_kwDOAnasMc4AOK7N,takayuki5168,@evshary We only have teleop and manual controller by rviz as you commented. Keyboard controller is not implemented.
Is there any package in Autoware that can control the car directly?,D_kwDOAnasMc4AQ2BO,2022-09-23T06:38:35Z,evshary,1,Answered,DC_kwDOAnasMc4AOK-Q,evshary,"Thank you for the reply @takayuki5168 !
I also see there is a package [joy_controller](https://github.com/autowarefoundation/autoware.universe/tree/main/control/joy_controller) in autoware.universe. Can I use this to do manual control with joystick?"
Is there any package in Autoware that can control the car directly?,D_kwDOAnasMc4AQ2BO,2022-09-23T06:38:35Z,evshary,1,Answered,DC_kwDOAnasMc4AOLOY,takayuki5168,"Sorry, my explain was not so good.

Right. What I meant by 

> teleop

is the joy_controller package. Even if you don't have a joy controller supported by the joy_controller package, you can use it by implementing your controller's joy_converter code.
https://github.com/autowarefoundation/autoware.universe/tree/main/control/joy_controller/include/joy_controller/joy_converter"
Is there any package in Autoware that can control the car directly?,D_kwDOAnasMc4AQ2BO,2022-09-23T06:38:35Z,evshary,1,Answered,DC_kwDOAnasMc4AOLPO,takayuki5168,"I guess joy_contoller outputs the acceleration (not the velocity) to the vehicle since the main target vehicle with autoware.universe is a car-like vehicle.

Therefore, if you are using not a car-like vehicle (e.g. small robot, which is easier to operate with velocity command), this joy_controller package may be not so useful compared to ROS's cmd_vel.
If the joy_controller package is not so useful to your vehicle, we can discuss the better idea."
Is there any package in Autoware that can control the car directly?,D_kwDOAnasMc4AQ2BO,2022-09-23T06:38:35Z,evshary,1,Answered,DC_kwDOAnasMc4AOLSx,evshary,"@takayuki5168 Thanks for your detailed explanation. I'll take a look at that.
What I want is to emulate controlling the car in RViz remotely.

```
host (Autoware + RViz)  <------wireless------->  host(Joystick / Keyboard to teleop)
```

I'll check whether the joystick can meet my requirements, or maybe I need to develop a package for keyboard control by myself.
"
Odmfuse.sh error,D_kwDOAnasMc4AQ2jk,2022-09-23T22:24:31Z,EcotronCorp,1,Answered,,,
Odmfuse.sh error,D_kwDOAnasMc4AQ2jk,2022-09-23T22:24:31Z,EcotronCorp,1,Answered,DC_kwDOAnasMc4AORb_,mitsudome-r,"@EcotronCorp Could you add more description to your question? This includes:
* What are you trying to do? (installing autoware, running docker, launching autoware modules, etc)
* If you have any instructions that you followed, please paste the link to the instruction. "
[Discussion] LiDAR Localization Process,D_kwDOAnasMc4AQ3Bt,2022-09-25T02:11:30Z,twbabyduck,1,Answered,,,
[Discussion] LiDAR Localization Process,D_kwDOAnasMc4AQ3Bt,2022-09-25T02:11:30Z,twbabyduck,1,Answered,DC_kwDOAnasMc4AOO_M,YamatoAndo,"I think there are many requests to run only localization, so I think it is good idea to provide the documentation.


> [Update]
> If users directly modify input/pointcloud topic name in pose_estimator.launch.xml, the result will be like this which the NDT process cannot converge properly:

Please modify `input/pointcloud` topic name in `localization.launch.xml`.
https://github.com/autowarefoundation/autoware.universe/blob/main/launch/tier4_localization_launch/launch/localization.launch.xml#L3

If you directly modify `input/pointcloud` topic name in `pose_estimator.launch.xml`, processing is slowed because downsampling of the point cloud is not performed."
[Discussion] LiDAR Localization Process,D_kwDOAnasMc4AQ3Bt,2022-09-25T02:11:30Z,twbabyduck,1,Answered,DC_kwDOAnasMc4AORNt,twbabyduck,"Dear @YamatoAndo,

As I described in the original post the `input/pointcloud` topic name in `localization.launch.xml` has already been modified.
The problem is that the `/sensing/lidar/top/outlier_filtered/pointcloud` does not publish as expected and requires some extra steps, could you confirm what missing steps have to be done?

Thanks
"
There is a certain distance between the starting point of global path planning and the position of the car,D_kwDOAnasMc4AQ3Zb,2022-09-26T02:01:45Z,pjj707278870,2,Answered,,,
There is a certain distance between the starting point of global path planning and the position of the car,D_kwDOAnasMc4AQ3Zb,2022-09-26T02:01:45Z,pjj707278870,2,Answered,DC_kwDOAnasMc4AOO1T,takayuki5168,"Is it open_planner's package, right?

@hatem-darweesh Could you answer?"
There is a certain distance between the starting point of global path planning and the position of the car,D_kwDOAnasMc4AQ3Zb,2022-09-26T02:01:45Z,pjj707278870,2,Answered,DC_kwDOAnasMc4AOPFl,hatem-darweesh,"Thank you @takayuki5168 

@pjj707278870 
There could be 3 reasons for this issue: 
1- The resolution of the waypoint in the map. If there is a big distance between lane center line waypoints. 
2- The orientation angle of the ego vehicle. The ego vehicle should be as parallel as  possible to the center line. 
3- Too short lane (smaller than the planning distance). If so, please change the horizon and planning distance parameter to a smaller values than the lane you have. 

Hope this is helpful.  "
2022-09-27 ODD working group weekly meeting (112),D_kwDOAnasMc4AQ3fY,2022-09-26T06:33:38Z,Igata-ctrl,0,Unanswered,,,
NDT scan matcher cant start,D_kwDOAnasMc4AQ3gV,2022-09-26T07:00:08Z,MrOCW,1,Answered,,,
NDT scan matcher cant start,D_kwDOAnasMc4AQ3gV,2022-09-26T07:00:08Z,MrOCW,1,Answered,DC_kwDOAnasMc4AOO9x,YamatoAndo,"@MrOCW Thank you for the report.
Please give us more information.
How did you run Autoware?
What dataset did you use?
Did the Autoware tutorial work well?"
NDT scan matcher cant start,D_kwDOAnasMc4AQ3gV,2022-09-26T07:00:08Z,MrOCW,1,Answered,DC_kwDOAnasMc4AOO-T,YamatoAndo,Have you modified any source code or launch file?
NDT scan matcher cant start,D_kwDOAnasMc4AQ3gV,2022-09-26T07:00:08Z,MrOCW,1,Answered,DC_kwDOAnasMc4AOO-p,MrOCW,"I am using a custom robot with live data.
Initially, everything worked well on a Jetson Xavier AGX, but after migrating to Jetson Orin AGX, this issue appeared. I've built my own docker container and the build succeeded without issues. I've only edited the sensor topics in the launch files to match my sensors"
NDT scan matcher cant start,D_kwDOAnasMc4AQ3gV,2022-09-26T07:00:08Z,MrOCW,1,Answered,DC_kwDOAnasMc4AOO-0,MrOCW,would a bag file be helpful?
NDT scan matcher cant start,D_kwDOAnasMc4AQ3gV,2022-09-26T07:00:08Z,MrOCW,1,Answered,DC_kwDOAnasMc4AOPAp,YamatoAndo,"Yes. Could you send me the bag file and the point cloud map?
Also, could you tell me what you edited the launch files and what Autoware's commit ID you are using?"
NDT scan matcher cant start,D_kwDOAnasMc4AQ3gV,2022-09-26T07:00:08Z,MrOCW,1,Answered,DC_kwDOAnasMc4AOPDt,MrOCW,"there were a few changes here and there which i cant pinpoint anymore. I've also created another util.launch.xml as there were issues with launching pointcloud container. 
autoware universe commit id: bb223ba99f384e131ef8372f7b6807b8ce332fe2
https://drive.google.com/file/d/1vDsg-HHwWVyWri8gG1QpX3GcOGLLDVfA/view?usp=sharing"
NDT scan matcher cant start,D_kwDOAnasMc4AQ3gV,2022-09-26T07:00:08Z,MrOCW,1,Answered,DC_kwDOAnasMc4AOQ5K,YamatoAndo,"@MrOCW Thank you for sharing the data set.
There are some lidar data with the same timestamp in `/os1/voxel_downsampled/points` topic.
I think this is causing the validation error.

```
$ ros2 topic echo /os1/voxel_downsampled/points --field header
stamp:
  sec: 1664179066
  nanosec: 678201239
frame_id: os1_lidar
---
stamp:
  sec: 1664179066
  nanosec: 678201239
frame_id: os1_lidar
---
stamp:
  sec: 1664179066
  nanosec: 678201239
frame_id: os1_lidar
---
stamp:
  sec: 1664179066
  nanosec: 778198519
frame_id: os1_lidar
---
stamp:
  sec: 1664179066
  nanosec: 778198519
frame_id: os1_lidar
---
stamp:
  sec: 1664179066
  nanosec: 878121015
frame_id: os1_lidar
---
stamp:
  sec: 1664179066
  nanosec: 878121015
frame_id: os1_lidar
```"
NDT scan matcher cant start,D_kwDOAnasMc4AQ3gV,2022-09-26T07:00:08Z,MrOCW,1,Answered,DC_kwDOAnasMc4AORCO,MrOCW,ahh okay removed the culprit and its working now. Apologies for the silly error!
roi_cluster_fusion_node warnings,D_kwDOAnasMc4AQ4MG,2022-09-27T04:39:03Z,MrOCW,1,Answered,,,
roi_cluster_fusion_node warnings,D_kwDOAnasMc4AQ4MG,2022-09-27T04:39:03Z,MrOCW,1,Answered,DC_kwDOAnasMc4AOTJ9,lhakim85,"@MrOCW, 
off topic, in your bag, I can see the xsens IMU topic right,may I know which model do you used, as right know we are struggling to implement our xsens mti-7-G into autoware"
Use of pointpainting with centerpoint?,D_kwDOAnasMc4AQ4M6,2022-09-27T05:16:48Z,MrOCW,1,Answered,,,
Use of pointpainting with centerpoint?,D_kwDOAnasMc4AQ4M6,2022-09-27T05:16:48Z,MrOCW,1,Answered,DC_kwDOAnasMc4AORbd,mitsudome-r,@yukkysaito Could you answer his comment?
Autonomy Software WG Meeting 2022/10/04,D_kwDOAnasMc4AQ4jO,2022-09-27T14:53:26Z,BonoloAWF,0,Unanswered,,,
2022-09-28 Simulation Working Group Meeting,D_kwDOAnasMc4AQ4tq,2022-09-27T19:32:41Z,WJaworskiRobotec,0,Unanswered,,,
autoware.universe build failure on ARM platform,D_kwDOAnasMc4AQ4-p,2022-09-28T05:46:05Z,evshary,2,Answered,,,
autoware.universe build failure on ARM platform,D_kwDOAnasMc4AQ4-p,2022-09-28T05:46:05Z,evshary,2,Answered,DC_kwDOAnasMc4AOTqt,evshary,"I guess I found out the root cause.
I have 80 CPU cores in my host (AVA platform) and it'll try to use all the cores while calling ""colcon build"".
Having too many jobs at the same time will run out of the memory, so the solution might be to limit the jobs number in Makefile.
I can build successfully with the following command:

```bash
MAKEFLAGS=""-j4 -l4"" colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release
```
"
autoware.universe build failure on ARM platform,D_kwDOAnasMc4AQ4-p,2022-09-28T05:46:05Z,evshary,2,Answered,DC_kwDOAnasMc4AOUa3,maxime-clem,It is also possible to limit the number of packages being built in parallel by the `colcon` command https://colcon.readthedocs.io/en/released/reference/executor-arguments.html
autoware.universe build failure on ARM platform,D_kwDOAnasMc4AQ4-p,2022-09-28T05:46:05Z,evshary,2,Answered,DC_kwDOAnasMc4APbJg,liuypcoding,"> I followed [the tutorial](https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/source-installation/) to build the autoware.universe, and the build process is terminated. ![Built Failure](https://user-images.githubusercontent.com/456210/192696512-94cc9c3b-39d6-47e4-9032-6bdc2ac21687.png)
> 
> I guess that this is due to lack of memory, and follow the instruction [here](https://autowarefoundation.github.io/autoware-documentation/main/support/troubleshooting/#insufficient-memory) to add swap but still failed. ![Build with OOM](https://user-images.githubusercontent.com/456210/192696724-6a225edc-e87c-4614-b05c-381cb245c7bf.png)
> 
> I have 32 GB memory and 32 GB swap, but I guess it's still not enough. However, I can build successfully on my x86 host with 32 GB memory and 2 GB swap. Does it need more memory while building the autoware.universe in ARM platform?

you can also install a  SD Card and  system migrated to it.  Enable get enough memory ,
[https://blog.csdn.net/qq_41306193/article/details/122502512](url)"
Testing public repos for creating map,D_kwDOAnasMc4AQ5GG,2022-09-28T08:53:11Z,enesadastec,0,Unanswered,,,
Why is the latest covariance used in Mahalanobis gate?,D_kwDOAnasMc4AQ5Ob,2022-09-28T12:01:15Z,IshitaTakeshi,1,Answered,,,
Why is the latest covariance used in Mahalanobis gate?,D_kwDOAnasMc4AQ5Ob,2022-09-28T12:01:15Z,IshitaTakeshi,1,Answered,DC_kwDOAnasMc4AOUER,IshitaTakeshi,@kminoda @TakaHoribe Do you know the reason of this?
velocity planning,D_kwDOAnasMc4AQ5X9,2022-09-28T15:25:11Z,HuaweiAlgolux,2,Answered,,,
velocity planning,D_kwDOAnasMc4AQ5X9,2022-09-28T15:25:11Z,HuaweiAlgolux,2,Answered,DC_kwDOAnasMc4AOUhY,HuaweiAlgolux,@maxime-clem @TakaHoribe 
velocity planning,D_kwDOAnasMc4AQ5X9,2022-09-28T15:25:11Z,HuaweiAlgolux,2,Answered,DC_kwDOAnasMc4AOUms,takayuki5168,"@HuaweiAlgolux 
First, obstacle_avoidance_planner updates the path shape, and does not update the velocity against obstacles.

- run_out module updates the velocity against obstacles which may run into the ego's trajectory.
- surround_obstacle_checker updates the velocity to keep ego vehicle stationary as you said.
- obstacle_stop_planner updates the velocity to obstacles inside the ego's trajectory. (There is also a slow-down function against obstacles besides the ego's trajectory, but it's a temporary function, so let me ignore it).

Like this, each of them has a different function.
As you said, we can put them into one node, but then the node will have too much code which makes it hard for us to read the code, add implementation, debug, ... (less maintainability)

To avoid it, we take an advantage of modularization by creating nodes that have a simple function and concatenating these nodes successively. Then we can add a lot of functions keeping the code not too complex."
velocity planning,D_kwDOAnasMc4AQ5X9,2022-09-28T15:25:11Z,HuaweiAlgolux,2,Answered,DC_kwDOAnasMc4AOUuO,HuaweiAlgolux,"Thank you very much for the explanation. It makes a lot of sense to make it modular. One more question, what's the difference between the slow_down function in the obstacle_stop_planner node and the velocity planning in the behavior_velocity_planning node? When you say the slow_down function is temporary, do you mean that it will be removed in the future? 

The shape of the planned geometric path is already determined in the behavior_path_planner node, and then later the behavior_velocity_planner update velocity along the geometric path,  What is done differently in the obstacle_avoidance_planner compared to behavior_path_planner in terms of path shape? I notice that it calculates path shape under obstacle and drivable area constraints, but I think the avoidance scene module in the behavior_path_planner node has already taken the obstacles and drivable area into consideration, right?"
velocity planning,D_kwDOAnasMc4AQ5X9,2022-09-28T15:25:11Z,HuaweiAlgolux,2,Answered,DC_kwDOAnasMc4AOUzt,HuaweiAlgolux,"obstacle_avoidance_planner updates the shape of the path, doesn't that mean that the work done in behavior_velocity_planner based on the path published by behavior_path_planner becomes futile?"
velocity planning,D_kwDOAnasMc4AQ5X9,2022-09-28T15:25:11Z,HuaweiAlgolux,2,Answered,DC_kwDOAnasMc4AOVdF,takayuki5168,"> what's the difference between the slow_down function in the obstacle_stop_planner node and the velocity planning in the behavior_velocity_planning node? When you say the slow_down function is temporary, do you mean that it will be removed in the future?

First, slow down module was created for the AGV project, and not used for car-like vehicles. For car-like vehicles, we use run_out module to realize slow down.

Slow down module updates the velocity against obstacles besides the ego's trajectory. Run out module updates the velocity against the obstacles which can run into the ego's trajectory. These modules have a slight difference for now, but I guess functions are not split well.
In the future, we will organize these functions, then slow_down module may be removed or concatenated to other modules.

> What is done differently in the obstacle_avoidance_planner compared to behavior_path_planner in terms of path shape?

As you said, behavior_path_planner calculates the path shape considering obstacles with a rule-based algorithm, but sometimes the path is outside the drivable area. It's hard to make path inside the drivable area with a rule-based algorithm.
Obstacle_avoidance_planner assures to make the path inside the drivable area with optimization, mostly for a narrow-road curve.

> obstacle_avoidance_planner updates the shape of the path, doesn't that mean that the work done in behavior_velocity_planner based on the path published by behavior_path_planner becomes futile?

If obstacle_avoidance_planner updates the path shape a lot, you're right. But with the current obstacle_avoidance_planner, the path does not change dramatically meaning that behavior_velocity_planner's velocity planning is not futile."
velocity planning,D_kwDOAnasMc4AQ5X9,2022-09-28T15:25:11Z,HuaweiAlgolux,2,Answered,DC_kwDOAnasMc4AOVeQ,HuaweiAlgolux,Thanks a million. It makes sense to me now.
velocity planning,D_kwDOAnasMc4AQ5X9,2022-09-28T15:25:11Z,HuaweiAlgolux,2,Answered,DC_kwDOAnasMc4AOWcZ,takayuki5168,@HuaweiAlgolux Can I close the discussion?
velocity planning,D_kwDOAnasMc4AQ5X9,2022-09-28T15:25:11Z,HuaweiAlgolux,2,Answered,DC_kwDOAnasMc4AOWxl,HuaweiAlgolux,yes
velocity planning,D_kwDOAnasMc4AQ5X9,2022-09-28T15:25:11Z,HuaweiAlgolux,2,Answered,DC_kwDOAnasMc4AOX0s,takayuki5168,@HuaweiAlgolux It seems I cannot. Could you make this discussion answered please.
velocity planning,D_kwDOAnasMc4AQ5X9,2022-09-28T15:25:11Z,HuaweiAlgolux,2,Answered,DC_kwDOAnasMc4AOX07,maxime-clem,"This is a ""Design"" discussion so it cannot be ""closed"" or ""answered""."
velocity planning,D_kwDOAnasMc4AQ5X9,2022-09-28T15:25:11Z,HuaweiAlgolux,2,Answered,DC_kwDOAnasMc4AOY0r,takayuki5168,"Ahh, I got it. Thanks for your information!"
traffic light recognition question,D_kwDOAnasMc4AQ5kl,2022-09-28T21:03:05Z,EcotronCorp,2,Answered,,,
traffic light recognition question,D_kwDOAnasMc4AQ5kl,2022-09-28T21:03:05Z,EcotronCorp,2,Answered,DC_kwDOAnasMc4APGDA,takayuki5168,"@EcotronCorp Right. The route is published by mission_planner, and it requires map, start/goal pose (and check points if you want)."
traffic light recognition question,D_kwDOAnasMc4AQ5kl,2022-09-28T21:03:05Z,EcotronCorp,2,Answered,DC_kwDOAnasMc4APhNC,takayuki5168,@EcotronCorp Can I close this discussion?
traffic light recognition question,D_kwDOAnasMc4AQ5kl,2022-09-28T21:03:05Z,EcotronCorp,2,Answered,DC_kwDOAnasMc4AP0Z6,takayuki5168,"The question was answered and the questioner gave me :+1:, so I close the discussion."
traffic light recognition question,D_kwDOAnasMc4AQ5kl,2022-09-28T21:03:05Z,EcotronCorp,2,Answered,DC_kwDOAnasMc4APw4F,Madhuvd,can anyone send the reference link or video like how to recognize traffic lights in autoware.ai?
traffic light recognition question,D_kwDOAnasMc4AQ5kl,2022-09-28T21:03:05Z,EcotronCorp,2,Answered,DC_kwDOAnasMc4AP0Zx,takayuki5168,"This discussion is for autoware.universe.
If you wanna ask about autoware.ai, could you please open another discussion?

Btw, AWF will not support autoware.ai from next year. We recommend you to use autoware.core/universe instead.
https://github.com/Autoware-AI"
2022-10-03 ODD working group weekly meeting (113),D_kwDOAnasMc4AQ8HM,2022-10-03T08:07:03Z,Igata-ctrl,0,Unanswered,,,
"Avoidance not happening, furthest linestring distance is measuring the wrong side?",D_kwDOAnasMc4AQ8If,2022-10-03T08:41:49Z,MrOCW,1,Answered,,,
"Avoidance not happening, furthest linestring distance is measuring the wrong side?",D_kwDOAnasMc4AQ8If,2022-10-03T08:41:49Z,MrOCW,1,Answered,DC_kwDOAnasMc4AOcT9,zulfaqar-azmi-t4,"Hi @MrOCW 

The avoidance_module is not designed for avoiding obstacle in the middle of the lane (there is a discussion over [here](https://github.com/orgs/autowarefoundation/discussions/2799#discussioncomment-3513208) that address this), hence based on the image, it seems that you have placed the object at the center and slightly to the right. In this case, it seems that it work as expected and not a bug. 

"
"Avoidance not happening, furthest linestring distance is measuring the wrong side?",D_kwDOAnasMc4AQ8If,2022-10-03T08:41:49Z,MrOCW,1,Answered,DC_kwDOAnasMc4AOcUE,MrOCW,"Yes I am aware that it is not meant to avoid object on the center, but just wondering if it might be a useful feature to have by exposing this value as a parameter"
Autonomy Software WG Meeting 2022/10/11,D_kwDOAnasMc4AQ9Lq,2022-10-04T16:53:15Z,BonoloAWF,0,Unanswered,,,
Difference between ActuationStatus & SteeringStatus,D_kwDOAnasMc4AQ9lK,2022-10-05T08:25:57Z,MrOCW,1,Answered,,,
Difference between ActuationStatus & SteeringStatus,D_kwDOAnasMc4AQ9lK,2022-10-05T08:25:57Z,MrOCW,1,Answered,DC_kwDOAnasMc4AOiOK,takayuki5168,"@MrOCW 
```
~/pilot-auto/src$ grep -R ActuationStatus
vendor/pacmod_interface/pacmod_interface/src/pacmod_interface/pacmod_interface.cpp:    create_publisher<ActuationStatusStamped>(""/vehicle/status/actuation_status"", 1);
vendor/pacmod_interface/pacmod_interface/src/pacmod_interface/pacmod_interface.cpp:    ActuationStatusStamped actuation_status;
vendor/pacmod_interface/pacmod_interface/README.md:  | `/vehicle/status/actuation_status`       | autoware_auto_vehicle_msgs::msg::ActuationStatusStamped | actuation (accel/brake pedal, steering wheel) status |
vendor/pacmod_interface/pacmod_interface/include/pacmod_interface/pacmod_interface.hpp:  using ActuationStatusStamped = tier4_vehicle_msgs::msg::ActuationStatusStamped;
vendor/pacmod_interface/pacmod_interface/include/pacmod_interface/pacmod_interface.hpp:  rclcpp::Publisher<ActuationStatusStamped>::SharedPtr actuation_status_pub_;
autoware/tier4_autoware_msgs/tier4_vehicle_msgs/CMakeLists.txt:  ""msg/ActuationStatus.msg""
autoware/tier4_autoware_msgs/tier4_vehicle_msgs/CMakeLists.txt:  ""msg/ActuationStatusStamped.msg""
autoware/tier4_autoware_msgs/tier4_vehicle_msgs/msg/ActuationStatusStamped.msg:tier4_vehicle_msgs/ActuationStatus status
Binary file autoware/tier4_autoware_msgs/.git/index matches
autoware/universe/vehicle/accel_brake_map_calibrator/accel_brake_map_calibrator/src/accel_brake_map_calibrator_node.cpp:  actuation_status_sub_ = create_subscription<tier4_vehicle_msgs::msg::ActuationStatusStamped>(
autoware/universe/vehicle/accel_brake_map_calibrator/accel_brake_map_calibrator/src/accel_brake_map_calibrator_node.cpp:    std::bind(&AccelBrakeMapCalibrator::callbackActuationStatus, this, _1));
autoware/universe/vehicle/accel_brake_map_calibrator/accel_brake_map_calibrator/src/accel_brake_map_calibrator_node.cpp:void AccelBrakeMapCalibrator::callbackActuationStatus(
autoware/universe/vehicle/accel_brake_map_calibrator/accel_brake_map_calibrator/src/accel_brake_map_calibrator_node.cpp:  const tier4_vehicle_msgs::msg::ActuationStatusStamped::ConstSharedPtr msg)
autoware/universe/vehicle/accel_brake_map_calibrator/accel_brake_map_calibrator/include/accel_brake_map_calibrator/accel_brake_map_calibrator_node.hpp:  rclcpp::Subscription<tier4_vehicle_msgs::msg::ActuationStatusStamped>::SharedPtr
autoware/universe/vehicle/accel_brake_map_calibrator/accel_brake_map_calibrator/include/accel_brake_map_calibrator/accel_brake_map_calibrator_node.hpp:  void callbackActuationStatus(
autoware/universe/vehicle/accel_brake_map_calibrator/accel_brake_map_calibrator/include/accel_brake_map_calibrator/accel_brake_map_calibrator_node.hpp:    const tier4_vehicle_msgs::msg::ActuationStatusStamped::ConstSharedPtr msg);
autoware/universe/vehicle/accel_brake_map_calibrator/accel_brake_map_calibrator/test/sim_actuation_status_publisher.py:from tier4_vehicle_msgs.msg import ActuationStatusStamped
autoware/universe/vehicle/accel_brake_map_calibrator/accel_brake_map_calibrator/test/sim_actuation_status_publisher.py:class ActuationStatusPublisher(Node):
autoware/universe/vehicle/accel_brake_map_calibrator/accel_brake_map_calibrator/test/sim_actuation_status_publisher.py:            ActuationStatusStamped, ""/vehicle/status/actuation_status"", qos_profile
autoware/universe/vehicle/accel_brake_map_calibrator/accel_brake_map_calibrator/test/sim_actuation_status_publisher.py:        data = ActuationStatusStamped()
autoware/universe/vehicle/accel_brake_map_calibrator/accel_brake_map_calibrator/test/sim_actuation_status_publisher.py:    node = ActuationStatusPublisher()
```

It seems the actuation status published by vehicle_interface (pacmod_interface) is only used in the accel_brake_map_calibrator.
I guess the accel_brake_map_calibrator still uses the old message type which is actuation status."
obstacle avoidance does not consider other lane's dynamic obstacles,D_kwDOAnasMc4AQ9o1,2022-10-05T09:47:34Z,MrOCW,1,Answered,,,
obstacle avoidance does not consider other lane's dynamic obstacles,D_kwDOAnasMc4AQ9o1,2022-10-05T09:47:34Z,MrOCW,1,Answered,DC_kwDOAnasMc4AOiN6,takayuki5168,"@MrOCW Right. In the current implementation, we do not see the incoming running vehicle during the avoidance."
obstacle avoidance does not consider other lane's dynamic obstacles,D_kwDOAnasMc4AQ9o1,2022-10-05T09:47:34Z,MrOCW,1,Answered,DC_kwDOAnasMc4AOv8f,MrOCW,are there plans to have this feature?
obstacle avoidance does not consider other lane's dynamic obstacles,D_kwDOAnasMc4AQ9o1,2022-10-05T09:47:34Z,MrOCW,1,Answered,DC_kwDOAnasMc4AOwdM,takayuki5168,@satoshi-ota is currently working on obstacle avoidance. Could you answer.
obstacle avoidance does not consider other lane's dynamic obstacles,D_kwDOAnasMc4AQ9o1,2022-10-05T09:47:34Z,MrOCW,1,Answered,DC_kwDOAnasMc4AOx1z,satoshi-ota,"Hi @MrOCW 
As @takayuki5168 said, I'm working on performance improvement of avoidance maneuver. As part of that, I'm trying to add check safety verification and abort avoidance maneuver. (Those two features will be completed by the end of this year.)"
Timers only running with max 100 Hz,D_kwDOAnasMc4AQ9o-,2022-10-05T09:51:03Z,akorb,0,Unanswered,,,
Open AD Kit WG meeting 2022/10/05,D_kwDOAnasMc4AQ9yw,2022-10-05T13:00:20Z,HamburgDave,0,Unanswered,,,
Tuning Accel / Decel Push Ratios,D_kwDOAnasMc4AQ-HW,2022-10-05T20:25:43Z,osholsonel20,2,Answered,,,
Tuning Accel / Decel Push Ratios,D_kwDOAnasMc4AQ-HW,2022-10-05T20:25:43Z,osholsonel20,2,Answered,DC_kwDOAnasMc4AOiN2,takayuki5168,"@osholsonel20 We have a calibration package here.
https://github.com/autowarefoundation/autoware.universe/tree/main/vehicle/accel_brake_map_calibrator/accel_brake_map_calibrator

But, it's kind of updating accel brake map rathar than initializing the map. So, if we use this calibration for initialization, the accuracy of the map is not so good.
We'are now developing a map initialization package."
Tuning Accel / Decel Push Ratios,D_kwDOAnasMc4AQ-HW,2022-10-05T20:25:43Z,osholsonel20,2,Answered,DC_kwDOAnasMc4AOjOT,osholsonel20,"So this is great when we switch over to ROS2 and Autoware.Universe.

Currently we are using ROS1 and Autoware.AI. I wasn't sure if on the openplanner side in op_common_params.launch. If there was a clean way of finding the value for accel push ratio and brake push ratio vs. giving it arbitrary values and seeing what works."
Tuning Accel / Decel Push Ratios,D_kwDOAnasMc4AQ-HW,2022-10-05T20:25:43Z,osholsonel20,2,Answered,DC_kwDOAnasMc4AOjP5,hatem-darweesh,"@osholsonel20 
if you mean the push values in op_common_params. They are similar to a ""P"" value in the PID controller. 
They are useful when you don't have reliable or delayed feedback from the vehicle. 
Or when you don't have small movement of the vehicle (robot) then the PID error is very small, and It doesn't work as expected. specially when starting from zero. 

So the push value is added to the error value to push the PID one step towards the target signal.

Finally: tuning this value depends on how fast do you want the system to respond to acceleration and braking. 
Start with small value such as max_speed / 10.0 then move up. "
Tuning Accel / Decel Push Ratios,D_kwDOAnasMc4AQ-HW,2022-10-05T20:25:43Z,osholsonel20,2,Answered,DC_kwDOAnasMc4AOjRw,osholsonel20,"Awesome thank you! We are continuing to have this issue where the vehicle is stuck in a ""loop"" of breaking and accelerating at a very low speed, and I think adjusting these params are what we need to give it the ""jumpstart"" it needs"
vision darnet yolov3 doesn't work,D_kwDOAnasMc4AQ-Sg,2022-10-06T04:07:15Z,Minsu-Kim-KNU,0,Unanswered,,,
Running 2 instances of Autoware at the same time,D_kwDOAnasMc4AQ-wI,2022-10-06T16:29:00Z,RalphGarson,1,Answered,,,
Running 2 instances of Autoware at the same time,D_kwDOAnasMc4AQ-wI,2022-10-06T16:29:00Z,RalphGarson,1,Answered,DC_kwDOAnasMc4AOkR8,maxime-clem,"Multiple instances of Autoware can run on the same machine by running each instance in a [Docker container](https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/docker-installation/).
You must also set a different `ROS_DOMAIN_ID` in each container to avoid cross-communication.

UPDATE: a better solution may be to run the containers in completely different networks by starting `rocker` with option `--network none`."
Running 2 instances of Autoware at the same time,D_kwDOAnasMc4AQ-wI,2022-10-06T16:29:00Z,RalphGarson,1,Answered,DC_kwDOAnasMc4AOkih,maxime-clem,"I also tried to run 2 instances of Autoware without Docker by setting different `ROS_DOMAIN_ID` before launching each instance. The 1st instance works fine and is not bothered by the 2nd instance, but the 2nd instance has many errors and cannot generate a path."
Running 2 instances of Autoware at the same time,D_kwDOAnasMc4AQ-wI,2022-10-06T16:29:00Z,RalphGarson,1,Answered,DC_kwDOAnasMc4AOksB,evshary,"I agree with @maxime-clem to use docker and set different `ROS_DOMAIN_ID` for ros2 launch, such as
`ROS_DOMAIN_ID=N ros2 launch autoware_launch planning_simulator.launch.xml map_path:=$HOME/autoware_map/sample-map-planning vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit`
Replace N with your domain number.
I can run successfully with docker but fail without docker."
Running 2 instances of Autoware at the same time,D_kwDOAnasMc4AQ-wI,2022-10-06T16:29:00Z,RalphGarson,1,Answered,DC_kwDOAnasMc4AOwE6,RalphGarson,Thank you for your answers. I'm going to test the solution with Docker. 
Running 2 instances of Autoware at the same time,D_kwDOAnasMc4AQ-wI,2022-10-06T16:29:00Z,RalphGarson,1,Answered,DC_kwDOAnasMc4APAAn,RalphGarson,"I have managed to start two Docker containers, with the following ROS2 configuration:

* Container 1: ROS_DOMAIN_ID=10
* Container 2: ROS_DOMAIN_ID=20


Now, I want to have access to the topics that are published by the two containers. If I use a terminal from inside the container I can access the topics of that container.

But I am looking to access the topics from a host terminal that is outside the container or try to access the topics of one container from the other container. How can I do this?

The code I use to start Docker is:

sudo rocker -e LIBGL_ALWAYS_SOFTWARE=1 --x11 --user --volume $HOME/autoware --volume $HOME/autoware_map – ghcr.io/autowarefoundation/autoware-universe:latest-cuda

And the code in each contaner of autoware:

* Container 1: ROS_DOMAIN_ID=10 ros2 launch autoware_launch planning_simulator.launch.xml map_path:=$HOME/autoware_map/sample-map-planning vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit

* Container 2: ROS_DOMAIN_ID=20 ros2 launch autoware_launch planning_simulator.launch.xml map_path:=$HOME/autoware_map/sample-map-planning vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit"
Running 2 instances of Autoware at the same time,D_kwDOAnasMc4AQ-wI,2022-10-06T16:29:00Z,RalphGarson,1,Answered,DC_kwDOAnasMc4APCl3,maxime-clem,"> access the topics from a host terminal that is outside the container

If you start `rocker` with the option `--network host`, the network will be shared between the container and the host.
https://docs.docker.com/network/#network-drivers

**I could not make this work on my local machine** but this is supposed to be the most straightforward solution.

>access the topics of one container from the other container.

By default, the containers are on the same network, using the `bridge` docker interface. You can verify this by running the following command on the host:
```console
docker network inspect bridge 
[
    {
        ""Name"": ""bridge"",
[...]
        ""Containers"": {
            ""33673aaa46f723e4e693c8888730f15605837496f3ffa396fb6b703726464781"": {
                ""Name"": ""zealous_mcclintock"",
                [...]
            },
            ""5ada0a62103503fbc585d010db30b12f707ce322b64dfdee651962ef2a6f4746"": {
                ""Name"": ""jovial_agnesi"",
                [...]
            }
        },
[...]
]
```
This shows that 2 containers are currently on the `bridge` network. Previously, I recommended setting different `ROS_DOMAIN_ID` for each container to avoid cross-communication. In order to access the topics of the other container, setting the same `ROS_DOMAIN_ID` should be enough.

An **alternative solution without having to set `ROS_DOMAIN_ID`** is to start the containers with `--network none` and manually connect them to a new network (e.g., a network named `autoware`).
- `docker network create autoware`
- `docker network disconnect none CONTAINER1`
- `docker connect autoware CONTAINER1`
- `docker network disconnect none CONTAINER2`
- `docker connect autoware CONTAINER2`

Now CONTAINER1 and CONTAINER2 are on the same network and can access each other's topics."
Running 2 instances of Autoware at the same time,D_kwDOAnasMc4AQ-wI,2022-10-06T16:29:00Z,RalphGarson,1,Answered,DC_kwDOAnasMc4APFa6,RalphGarson,"Thanks again, maxime-clen, your input is very helpful.

I have tried the network configuration that you propose in the previous post but surely I am doing something wrong.

First, I create the two containers and get the following configuration:

```
docker network inspect bridge
[
    {
        “Name”: “bridge”,
[...]
        ""Containers"": {
            ""5f999f992a816285d9a66b13ec837a3f94d06f3562928cb2275ec0e8dbb28007"": {
                ""Name"": ""upbeat_montalcini"",
                [...]
            },
            ""832c45bbdf6ad7a9815a9b6c5560bfafa663bbb0426aab9210351ab9eb6b0db8"": {
                ""Name"": ""heuristic_lalande"",
                [..]
            }
        },
[...]
        },
        ""Labels"": {}
    }
```

Once the containers are created, I run ros2 inside each one:

`ros2 launch autoware_launch planning_simulator.launch.xml map_path:=$HOME/autoware_map/sample-map-planning vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit`

And the two Rviz start.

In a new terminal (host), I create the autoware **network** and disconnect(none)/connect(autoware) the two containers as you told me in the previous post.
But inside this new terminal I execute: 

`source /opt/ros/galactic/setup.bash
`
`ros2 topic list` 

and **I don't see the topics** of the containers here.

Do I have to add something to the ros statement? 
Do I need to declare some variable/ip or something similar to get to see the topics?

The ultimate goal of my project is to grab a ROS topic from container 1 and have it publish to a ROS topic in container 2.

Would it be a good option to create a script (python) that subscribes to topic XX in container 1 and publishes to topic YY in container 2? or is there another way?
"
Running 2 instances of Autoware at the same time,D_kwDOAnasMc4AQ-wI,2022-10-06T16:29:00Z,RalphGarson,1,Answered,DC_kwDOAnasMc4APGHw,maxime-clem,"It sounds like you started Autoware *before* modifying the network of the container.
First, *before starting Autoware or Rviz*, you should disconnect from `bridge` and connect to `autoware` both containers.
Then you can start Autoware from container1 and listen to the topics from container2.

You can make sure this works by simply publishing empty messages to `/rosout` to test communication between containers.
I made a quick video to demonstrate what you should observe.
- I create 3 containers with the default `rocker` command so they are all on the `bridge` network.
- I disconnect 2 containers from `bridge` and connect them to the `autoware` network.
- I run `ros2 topic echo /rosout` in one container on the `autoware` network, as well as on the 3rd container that is still on the `bridge` network.
- I run `ros2 topic pub /rosout rcl_interfaces/msg/Log` on the second `autoware` container (this publishes empty messages to test the network).

Finally, we observe that the container on the `autoware` network (top-left) receives the messages but not the one on the `bridge` network (bot-right).

https://user-images.githubusercontent.com/78338830/197693898-0aecdced-fa85-4a7b-b5f1-bea8cf947d38.mp4

"
Installation issues when no nvidia driver is installed,D_kwDOAnasMc4AQ_I4,2022-10-07T07:56:26Z,Mingyu1991,1,Answered,,,
Installation issues when no nvidia driver is installed,D_kwDOAnasMc4AQ_I4,2022-10-07T07:56:26Z,Mingyu1991,1,Answered,DC_kwDOAnasMc4AOk-C,kenji-miyake,"> Shall we update the Prerequisites?

@Mingyu1991 Sure, could you try submitting a PR? Thank you!"
Installation issues when no nvidia driver is installed,D_kwDOAnasMc4AQ_I4,2022-10-07T07:56:26Z,Mingyu1991,1,Answered,DC_kwDOAnasMc4AOk-f,kenji-miyake,"I think we have two options:
1. Update documentation.
2. Add the installation of NVIDIA driver to Ansible."
Installation issues when no nvidia driver is installed,D_kwDOAnasMc4AQ_I4,2022-10-07T07:56:26Z,Mingyu1991,1,Answered,DC_kwDOAnasMc4AOvtL,Mingyu1991,"This issue is about the docker installation.
Another similar issue is about the source installation using ansible on humble branch.
The script seems to try to install the newest nvidia-driver, which would be nvidia-driver-520,
but it's not compatible with the specified CUDA-11.6.
Maybe it's better to install the correct version of nvidia-driver in the ansible on different branches?"
2022-10-13 Simulation Working Group Meeting,D_kwDOAnasMc4ARAjW,2022-10-10T00:40:54Z,Hyeongseok-Jeon,0,Unanswered,,,
Squeezing through tight areas during avoidance,D_kwDOAnasMc4ARAnv,2022-10-10T04:57:25Z,MrOCW,2,Answered,,,
Squeezing through tight areas during avoidance,D_kwDOAnasMc4ARAnv,2022-10-10T04:57:25Z,MrOCW,2,Answered,DC_kwDOAnasMc4AOx3o,satoshi-ota,(@takayuki5168 Could you answer this question ?)
Squeezing through tight areas during avoidance,D_kwDOAnasMc4ARAnv,2022-10-10T04:57:25Z,MrOCW,2,Answered,DC_kwDOAnasMc4AOzir,takayuki5168,"@MrOCW 
As I said in another discussion, enable_avoidance=True in obstacle_avoidance_planner is not officially supported.

But the performance may be improved with the following tuning.
![image](https://user-images.githubusercontent.com/20228327/195906883-65e6d0b2-4bef-4ba1-8e8e-24ba22ac69fa.png)
"
Squeezing through tight areas during avoidance,D_kwDOAnasMc4ARAnv,2022-10-10T04:57:25Z,MrOCW,2,Answered,DC_kwDOAnasMc4APdov,PaGu3,"Hi @takayuki5168 ,
 Is this autowareAuto or autoware.ai ?, because i am using autoware.ai 1.14.0 and i couldn't find this folder or code in that.
Thanks"
Squeezing through tight areas during avoidance,D_kwDOAnasMc4ARAnv,2022-10-10T04:57:25Z,MrOCW,2,Answered,DC_kwDOAnasMc4APdrY,takayuki5168,"This is in autoware.universe
https://github.com/autowarefoundation/autoware.universe/tree/main/planning/obstacle_avoidance_planner"
Squeezing through tight areas during avoidance,D_kwDOAnasMc4ARAnv,2022-10-10T04:57:25Z,MrOCW,2,Answered,DC_kwDOAnasMc4APdyx,PaGu3,"Thanks @takayuki5168 , but i have a question that is obstacle avoidance possible in autoware.ai (without open planner) ?"
Squeezing through tight areas during avoidance,D_kwDOAnasMc4ARAnv,2022-10-10T04:57:25Z,MrOCW,2,Answered,DC_kwDOAnasMc4APd4t,takayuki5168,"Sorry, I'm not familiar with autoware.ai. AWF will not support autoware.ai from next year. FYI: https://github.com/Autoware-AI
Therefore, I recommend you using autoware.universe. If autoware.universe lacks some functions you were using, please open an issue."
2022-10-10 ODD working group weekly meeting (114),D_kwDOAnasMc4ARA6b,2022-10-10T13:39:41Z,Igata-ctrl,0,Unanswered,,,
Autonomy Software WG Meeting 2022/10/25,D_kwDOAnasMc4ARBpt,2022-10-11T09:28:33Z,BonoloAWF,0,Unanswered,,,
[proposal] Removing NDT implementations other than `ndt_omp`,D_kwDOAnasMc4ARCeb,2022-10-12T09:02:04Z,kminoda,1,Answered,,,
[proposal] Removing NDT implementations other than `ndt_omp`,D_kwDOAnasMc4ARCeb,2022-10-12T09:02:04Z,kminoda,1,Answered,DC_kwDOAnasMc4AO6_d,kminoda,"Since no response was posted here, I would like to close this discussion and move on to remote the `ndt` package."
Open AD Kit WG meeting 2022/10/12,D_kwDOAnasMc4ARCov,2022-10-12T12:03:38Z,HamburgDave,1,Answered,,,
Open AD Kit WG meeting 2022/10/12,D_kwDOAnasMc4ARCov,2022-10-12T12:03:38Z,HamburgDave,1,Answered,DC_kwDOAnasMc4AOuxq,evshary,"This is my presentation slides. Any feedback is welcome.
[2022.10.12 Introduction to Zenoh.pdf](https://github.com/autowarefoundation/autoware/files/9766332/2022.10.12.Introduction.to.Zenoh.pdf)"
Need Some Advice about Stereo Mapping [Mapping WG],D_kwDOAnasMc4ARCs_,2022-10-12T13:44:39Z,StepTurtle,0,Unanswered,,,
Is there any emergency steering function in Autoware?,D_kwDOAnasMc4ARDF4,2022-10-13T02:32:58Z,NorahXiong,1,Answered,,,
Is there any emergency steering function in Autoware?,D_kwDOAnasMc4ARDF4,2022-10-13T02:32:58Z,NorahXiong,1,Answered,DC_kwDOAnasMc4AOx3H,satoshi-ota,"Hi @NorahXiong 
Unfortunately, AEB has not yet been implemented. (But, we TIER IV has plan to develop that feature.)

On the other hand, there is `run_out` module in behavior_velocity_planner. The role of the module is to slow down the ego speed in front of the pedestrian in such cases where there is a risk that he or she may run out onto the roadway. The module documentation is [here](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/run-out-design/), and if you would like to know more about this features, please ask @TomohitoAndo, @mkuri (and @soblin)."
Is there any emergency steering function in Autoware?,D_kwDOAnasMc4ARDF4,2022-10-13T02:32:58Z,NorahXiong,1,Answered,DC_kwDOAnasMc4AOyDR,NorahXiong,"Thanks for your information. There is ambiguity in my discussion text and I mistook emergency stop as AEB.
Besides AEB, do you have any plan about emergency steering funciton?"
Is there any emergency steering function in Autoware?,D_kwDOAnasMc4ARDF4,2022-10-13T02:32:58Z,NorahXiong,1,Answered,DC_kwDOAnasMc4AO2R2,satoshi-ota,(I'm checking whether we TIER IV have plan to develop emergency steering or not. cc @TakaHoribe )
Is there any emergency steering function in Autoware?,D_kwDOAnasMc4ARDF4,2022-10-13T02:32:58Z,NorahXiong,1,Answered,DC_kwDOAnasMc4AO82l,satoshi-ota,"Sorry for late reply. Unfortunately, we TIER IV does **NOT** have plan to develop emergency steering.
However, since the emergency steering would give us more options for the ego's behavior in the above situation, we would welcome the contribute to developing that feature."
drivable_area wall encountered although there is space,D_kwDOAnasMc4ARDJi,2022-10-13T05:13:03Z,MrOCW,1,Answered,,,
drivable_area wall encountered although there is space,D_kwDOAnasMc4ARDJi,2022-10-13T05:13:03Z,MrOCW,1,Answered,DC_kwDOAnasMc4AOwde,takayuki5168,"@MrOCW Did you set enable_avoidance True? Sorry, but I don't understand what happend in this situation. It would be really helpful if you gave me a video."
drivable_area wall encountered although there is space,D_kwDOAnasMc4ARDJi,2022-10-13T05:13:03Z,MrOCW,1,Answered,DC_kwDOAnasMc4AOyEo,MrOCW,"yes it is set to True

[drivable_area.webm](https://user-images.githubusercontent.com/67644448/195749192-bc7052a5-eb44-4f72-bb51-4bc2a6df632f.webm)



"
drivable_area wall encountered although there is space,D_kwDOAnasMc4ARDJi,2022-10-13T05:13:03Z,MrOCW,1,Answered,DC_kwDOAnasMc4AOzON,takayuki5168,"enable_avoidance=True is under deveopment, and not supported.
The cause of this virtual wall of drivable area is that there is a conflict between drivable area generated from the behavior path planner and obstacle avoidance planner's path planning algorithm.

I want to know how much enable_avoidance=True (avoidance not only by rule-based planner of behavior_path_planner but also by optimization of obstacle avoidance planner) is needed.
In your project, you need this function?"
Load `gnss_poser` parameters from `map_path` directory,D_kwDOAnasMc4ARD1S,2022-10-14T00:37:28Z,VRichardJP,0,Unanswered,,,
lidar_centerpoint only uses tiny,D_kwDOAnasMc4ARD89,2022-10-14T05:55:36Z,MrOCW,2,Answered,,,
lidar_centerpoint only uses tiny,D_kwDOAnasMc4ARD89,2022-10-14T05:55:36Z,MrOCW,2,Answered,DC_kwDOAnasMc4AO5TP,kosuke55,cc @yukke42 
lidar_centerpoint only uses tiny,D_kwDOAnasMc4ARD89,2022-10-14T05:55:36Z,MrOCW,2,Answered,DC_kwDOAnasMc4AO60W,yukke42,"@MrOCW Cloud you describe for more detail? At least, we need ""the command you used"", ""the expected behavior"" and ""the actual behavior"" with log.

"
Possible to create a lane that can travel in both directions?,D_kwDOAnasMc4AREFd,2022-10-14T09:45:09Z,MrOCW,1,Answered,,,
Possible to create a lane that can travel in both directions?,D_kwDOAnasMc4AREFd,2022-10-14T09:45:09Z,MrOCW,1,Answered,DC_kwDOAnasMc4AO26u,satoshi-ota,"Hi @MrOCW 
VMB can change `one_way` tag of the lanelets in .osm file, but currently, the indication of the direction (See following figs) does **NOT** change(this bug will be fixed). Additionaly, autoware doesn't support both direction lanelet. yet.

![image](https://user-images.githubusercontent.com/44889564/196149630-f07134c8-029d-45b8-9dd3-6030a3eb25e7.png)
![image](https://user-images.githubusercontent.com/44889564/196149659-6ccab43c-06df-4cbf-b5cc-1570438dce5f.png)
"
2022-10-17 ODD working group weekly meeting (115),D_kwDOAnasMc4AREH4,2022-10-14T10:48:19Z,Igata-ctrl,0,Unanswered,,,
Freespace Planning without Obstacles,D_kwDOAnasMc4AREYj,2022-10-14T18:10:59Z,osholsonel20,1,Answered,,,
Freespace Planning without Obstacles,D_kwDOAnasMc4AREYj,2022-10-14T18:10:59Z,osholsonel20,1,Answered,DC_kwDOAnasMc4AO4g2,TakaHoribe,"Tuning the  [minimum_turning_radius](https://github.com/autowarefoundation/autoware_ai_planning/blob/master/astar_search/src/astar_search.cpp#L33) to fit your vehicle could improve the performance. However, the `astar_search` in the autoware.ai is inefficient because it performs a path search with only one curvature. 


Improvements to `astar_search` are being made in autoware.universe. The latest version allows planning to account for [multiple curvatures](https://github.com/autowarefoundation/autoware.universe/blob/main/planning/freespace_planner/src/freespace_planner/freespace_planner_node.cpp#L292-L293) and has been confirmed to be more efficient in almost all cases. Some test cases are shown in the [readme](https://github.com/autowarefoundation/autoware.universe/tree/main/planning/freespace_planning_algorithms#running-the-standalone-tests-and-visualization).

Note: the `aster_search` package was renamed to `freespace_planning_algorithm` to cover several algorithms like [RRT*](https://github.com/autowarefoundation/autoware.universe/pull/904). 
"
Freespace Planning without Obstacles,D_kwDOAnasMc4AREYj,2022-10-14T18:10:59Z,osholsonel20,1,Answered,DC_kwDOAnasMc4AO5if,osholsonel20,Thank you! Exactly what I needed!
Keyboard controller for Autoware,D_kwDOAnasMc4ARFc_,2022-10-17T02:37:31Z,evshary,2,Answered,,,
Keyboard controller for Autoware,D_kwDOAnasMc4ARFc_,2022-10-17T02:37:31Z,evshary,2,Answered,DC_kwDOAnasMc4AO2TS,takayuki5168,"@evshary Thank your for sharing your nice implementation!

It would be better if we could put joy_controller package and your package into together. The output seems almost the same though joy_controller sends a command via api.

What do you think."
Keyboard controller for Autoware,D_kwDOAnasMc4ARFc_,2022-10-17T02:37:31Z,evshary,2,Answered,DC_kwDOAnasMc4AO2UV,evshary,"Sure, I'm fine to put the implementation into autoware.universe
Would you please share what I should do to put it into autoware.universe? (Maybe need to meet some documentation format?)"
Keyboard controller for Autoware,D_kwDOAnasMc4ARFc_,2022-10-17T02:37:31Z,evshary,2,Answered,DC_kwDOAnasMc4AO2X7,takayuki5168,"I guess it would be better if you could add your implementation to here as a new file keyboard_joy_converter.hpp
https://github.com/autowarefoundation/autoware.universe/tree/main/control/joy_controller/include/joy_controller/joy_converter

Your implementation must be based on this base case.
https://github.com/autowarefoundation/autoware.universe/blob/main/control/joy_controller/include/joy_controller/joy_controller.hpp

If this fix is difficult, let's think about the better idea.


> Would you please share what I should do to put it into autoware.universe?

Actually, there is no organized documentation except for this.
 
https://autowarefoundation.github.io/autoware-documentation/main/contributing/"
Keyboard controller for Autoware,D_kwDOAnasMc4ARFc_,2022-10-17T02:37:31Z,evshary,2,Answered,DC_kwDOAnasMc4AO2lx,shmpwk,"@evshary 
I've once implemented keyboard to joy converter, but it is not finished. You can refer to it if you want!
https://github.com/shmpwk/keyboard_to_joy"
Keyboard controller for Autoware,D_kwDOAnasMc4ARFc_,2022-10-17T02:37:31Z,evshary,2,Answered,DC_kwDOAnasMc4AO2yu,evshary,@takayuki5168 and @shmpwk Thank you! I'll take a look.
Keyboard controller for Autoware,D_kwDOAnasMc4ARFc_,2022-10-17T02:37:31Z,evshary,2,Answered,DC_kwDOAnasMc4AR-dm,marcusvinicius178,"Hi @evshary @takayuki5168 @shmpwk @esteve @tleyden can you assist me to use the joy controller pkg or the keyboard?
I am facing an issue to make joy controller (DS4) work. Please kindly take a look at my issue:
https://github.com/orgs/autowarefoundation/discussions/3204#discussioncomment-4701134

I will be very grateful if you reply me there.

Thanks in advance "
Keyboard controller for Autoware,D_kwDOAnasMc4ARFc_,2022-10-17T02:37:31Z,evshary,2,Answered,DC_kwDOAnasMc4AR-nO,evshary,"Hi @marcusvinicius178 
In fact, I didn't try the joy controller before (No suitable joystick in my hand now).
If you just want to control the vehicle, here are two ways:

1. Use the RViz plugin: tier4_control_rviz_plugin, This is the easiest way to do so.
https://autowarefoundation.github.io/autoware.universe/main/common/tier4_control_rviz_plugin/#usage
2. Use the keyboard controller mentioned below, but you need to build it by yourself (I haven't integrated it into the Autoware.universe)
https://github.com/evshary/autoware_manual_control"
Keyboard controller for Autoware,D_kwDOAnasMc4ARFc_,2022-10-17T02:37:31Z,evshary,2,Answered,DC_kwDOAnasMc4AR_vh,marcusvinicius178,"Hi @evshary thanks a lot! Both approaches worked! Nice Pkg you've developed, congratulations, it helped me a lot!

The joystick, however, still didn't work, as you can check in my issue link (if you be curious to debug)....I am waiting some provided solution from Autoware team, I guess there is something with drivers pkg...I was not able to build it....
"
"driving_log_replayer, a rosbag-based evaluation tool for Autoware",D_kwDOAnasMc4ARFmk,2022-10-17T08:42:59Z,hayato-m126,0,Unanswered,,,
Vector map exported by AutowareADASMap in Unity cannot perform /op_global_planning,D_kwDOAnasMc4ARGOO,2022-10-18T02:59:53Z,timecrisis5,0,Unanswered,,,
How to merge a package licensed under BSD 3-Clause,D_kwDOAnasMc4ARGQx,2022-10-18T04:47:26Z,IshitaTakeshi,2,Answered,,,
How to merge a package licensed under BSD 3-Clause,D_kwDOAnasMc4ARGQx,2022-10-18T04:47:26Z,IshitaTakeshi,2,Answered,DC_kwDOAnasMc4AO7Ex,IshitaTakeshi,@yukkysaito @mitsudome-r How about this?
How to merge a package licensed under BSD 3-Clause,D_kwDOAnasMc4ARGQx,2022-10-18T04:47:26Z,IshitaTakeshi,2,Answered,DC_kwDOAnasMc4APMKG,yukkysaito,@IshitaTakeshi Can you share the discussion result? :pray: 
How to merge a package licensed under BSD 3-Clause,D_kwDOAnasMc4ARGQx,2022-10-18T04:47:26Z,IshitaTakeshi,2,Answered,DC_kwDOAnasMc4APNo7,IshitaTakeshi,"If we apply Apache 2.0 to the package
  * We can apply our Apache 2.0 license to the whole package
  * We add the original BSD 3-Clause license notice to each file in the package 
  * We can apply another license (e.g., Apache 2.0) with the derivative author's name in the following conditions
     * Modification to the original file is large 
     * The additional license does not conflict with the original license
  * It is recommended to add the link to the original package and acknowledgments to README

If we keep using the BSD 3-Clause license 
  * We can just keep the original license
  * We can add the derivative author's name to the author list"
Ray Ground filter not removing all the points on slopes,D_kwDOAnasMc4ARGbX,2022-10-18T09:38:55Z,jfqureshi,0,Unanswered,,,
How does traffic detection system work?,D_kwDOAnasMc4ARH0I,2022-10-18T16:52:20Z,EcotronCorp,3,Answered,,,
How does traffic detection system work?,D_kwDOAnasMc4ARH0I,2022-10-18T16:52:20Z,EcotronCorp,3,Answered,DC_kwDOAnasMc4AO_3E,gurselturkeri,same problem
How does traffic detection system work?,D_kwDOAnasMc4ARH0I,2022-10-18T16:52:20Z,EcotronCorp,3,Answered,DC_kwDOAnasMc4APDX2,satoshi-ota,@yukkysaito @shmpwk Could you answer this question ? (This is likely a bug in traffic light recognition module or awsim :thinking: )
How does traffic detection system work?,D_kwDOAnasMc4ARH0I,2022-10-18T16:52:20Z,EcotronCorp,3,Answered,DC_kwDOAnasMc4APDZD,shmpwk,"@EcotronCorp @gurselturkeri 
Could you share your environment? (map, SVLSimulator model…)
It looks the position of the traffic light is different from the lanelet map and SVLSimulator. The traffic light 2523 shows right side on the lanelet map, but shows left side on the SVLSimulator."
Questions about the coordinate system of the earth frame,D_kwDOAnasMc4ARG6k,2022-10-18T22:47:46Z,rsasaki0109,1,Answered,,,
Questions about the coordinate system of the earth frame,D_kwDOAnasMc4ARG6k,2022-10-18T22:47:46Z,rsasaki0109,1,Answered,DC_kwDOAnasMc4AO84z,rsasaki0109,"I will summarize the details later, but after internal discussion, my understanding was incorrect. It was my understanding that the basic earth frame uses ecef."
Questions about Autoware API,D_kwDOAnasMc4ARHNa,2022-10-19T09:31:26Z,evshary,1,Answered,,,
Questions about Autoware API,D_kwDOAnasMc4ARHNa,2022-10-19T09:31:26Z,evshary,1,Answered,DC_kwDOAnasMc4AO7mT,isamu-takagi,"1. `awapi` was a prototype and not enough discussion. `AD API` is proposed as a formal API for Autoware and is currently in the works. So we are deprecating `awapi` and will replace it with `AD API` in the future.

2. Do you mean [tier4_ad_api_adaptor](https://github.com/tier4/tier4_ad_api_adaptor)? If so, it is the implementation of `awapi`.

3. Yes, `rosbridge` is used to access the ros interface from a browser or a PC without ROS instalation.

4. Please wait while I check it.

5. This requires discussion. I think V2X is an internal interface (component interface in [this page](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/)) rather than an API. 

"
Questions about Autoware API,D_kwDOAnasMc4ARHNa,2022-10-19T09:31:26Z,evshary,1,Answered,DC_kwDOAnasMc4AO9Jj,evshary,"@isamu-takagi  Thank you for the answers.
For question 2, what I mean `AD API` and `autoware api adaptor` is from [autoware_api.launch.xml](https://github.com/autowarefoundation/autoware.universe/blob/main/launch/tier4_autoware_api_launch/launch/autoware_api.launch.xml):

* `AD API` includes the launch file `default_ad_api.launch.py` and `rviz_adaptors.launch.xml`
* `autoware api adaptor` includes `external_api_adaptor.launch.py`, `internal_api_adaptor.launch.py`, and `internal_api_relay.launch.xml`

After reading [tier4_ad_api_adaptor](https://github.com/tier4/tier4_ad_api_adaptor), `tier4_ad_api_adaptor` includes both `awapi (deprecated)` and `autoware api adaptor` here. As you mentioned, `autoware api adaptor` will replace `awapi (deprecated)` in the future.

However, I'm not really sure what is the role `AD API` here. It seems like `rviz_adaptors.launch.xml` provides transformation between RViz topic to Autoware API and `default_ad_api.launch.py` creates a simple web_server to transform requests to ROS topic, something similar to `rosbridge`."
Questions about Autoware API,D_kwDOAnasMc4ARHNa,2022-10-19T09:31:26Z,evshary,1,Answered,DC_kwDOAnasMc4AO_ck,isamu-takagi,"default_ad_api.launch.py mainly launches API node ([here](https://github.com/autowarefoundation/autoware.universe/blob/main/system/default_ad_api/launch/default_ad_api.launch.py#L32-L36)). web_server is currently only for version. Both ROS and rosbridge require you to specify the type name, which is a problem with version APIs."
Questions about Autoware API,D_kwDOAnasMc4ARHNa,2022-10-19T09:31:26Z,evshary,1,Answered,DC_kwDOAnasMc4AO_dc,isamu-takagi,"> 4. What is the development progress of each component? (I'm happy to help if there is something undone)

The component interface (internal interface) is defined [here](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/components/) (currently only planning, control and vehicle in sub-menu). But this is the minimal definition for the current implementation, and is necessary to discuss. If you have any comments or suggestions, please create a discussion or issue.
"
Questions about Autoware API,D_kwDOAnasMc4ARHNa,2022-10-19T09:31:26Z,evshary,1,Answered,DC_kwDOAnasMc4AO_fB,evshary,"> default_ad_api.launch.py mainly launches API node ([here](https://github.com/autowarefoundation/autoware.universe/blob/main/system/default_ad_api/launch/default_ad_api.launch.py#L32-L36)). web_server is currently only for version. Both ROS and rosbridge require you to specify the type name, which is a problem with version APIs.

Great, I'll check that."
Question: LiDAR-SLAM(ROS2) fails to create point cloud map,D_kwDOAnasMc4ARHyO,2022-10-20T01:34:27Z,sfukuta,2,Answered,,,
Question: LiDAR-SLAM(ROS2) fails to create point cloud map,D_kwDOAnasMc4ARHyO,2022-10-20T01:34:27Z,sfukuta,2,Answered,DC_kwDOAnasMc4AO9Gw,sfukuta,"I was able to create the point cloud map.

The cause is that the LiDAR-SLAM (ROS2) input topic `/velodyne points` was not in the rosbag file.
I needed to relay the point cloud information topic  in the rosbag file to the topic used by LiDAR-SLAM (ROS2).

To relay, run the following command.
`ros2 run topic_tools relay <input topic> <output topic>`

execute command:
`ros2 run topic_tools relay /sensing/lidar/concatenated/pointcloud /velodyne_points`"
Question: LiDAR-SLAM(ROS2) fails to create point cloud map,D_kwDOAnasMc4ARHyO,2022-10-20T01:34:27Z,sfukuta,2,Answered,DC_kwDOAnasMc4APT5x,gurselturkeri,How can I reach you? I work on that topic and I have some question.
Question: LiDAR-SLAM(ROS2) fails to create point cloud map,D_kwDOAnasMc4ARHyO,2022-10-20T01:34:27Z,sfukuta,2,Answered,DC_kwDOAnasMc4APYZ2,sfukuta,"If you have a question, could you create a discussion in the Q&A category?"
nvidia-container-cli: requirement error: unsatisfied condition: cuda>=11.6,D_kwDOAnasMc4ARH50,2022-10-20T06:40:10Z,tleyden,1,Answered,,,
nvidia-container-cli: requirement error: unsatisfied condition: cuda>=11.6,D_kwDOAnasMc4ARH50,2022-10-20T06:40:10Z,tleyden,1,Answered,DC_kwDOAnasMc4AO9ci,kenji-miyake,"@tleyden Hello, could you show me the full output of `nvidia-smi` like this?

```console
$ nvidia-smi -L
GPU 0: NVIDIA GeForce RTX 3070 Ti (UUID: GPU-102b5c7b-ccfe-cfcf-002b-d794d1f28465)

$ nvidia-smi
Thu Oct 20 16:07:37 2022
+-----------------------------------------------------------------------------+
| NVIDIA-SMI 515.65.01    Driver Version: 515.65.01    CUDA Version: 11.7     |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|                               |                      |               MIG M. |
|===============================+======================+======================|
|   0  NVIDIA GeForce ...  On   | 00000000:01:00.0  On |                  N/A |
| 30%   45C    P0    71W / 290W |   1957MiB /  8192MiB |      6%      Default |
|                               |                      |                  N/A |
+-------------------------------+----------------------+----------------------+

+-----------------------------------------------------------------------------+
| Processes:                                                                  |
|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |
|        ID   ID                                                   Usage      |
|=============================================================================|
|    0   N/A  N/A      2227      G   /usr/lib/xorg/Xorg               1128MiB |
|    0   N/A  N/A      2612      G   /usr/bin/gnome-shell              215MiB |
|    0   N/A  N/A      3494      G   ...AAAAAAAAA= --shared-files       51MiB |
|    0   N/A  N/A   3735605      G   ...veSuggestionsOnlyOnDemand      136MiB |
|    0   N/A  N/A   3797084      G   ...453594738744663623,131072      146MiB |
|    0   N/A  N/A   3955656    C+G   ...934538869353042071,131072       74MiB |
|    0   N/A  N/A   4151613      G   ...RendererForSitePerProcess      125MiB |
|    0   N/A  N/A   4169197      G   x-terminal-emulator                10MiB |
+-----------------------------------------------------------------------------+
```

And the results of `dpkg -l | grep cuda-` and `dpkg -l | grep nvidia-`, please?

```console
$ dpkg -l | grep cuda-
ii  cuda-cccl-11-4                                     11.4.122-1                              amd64        CUDA CCCL
ii  cuda-cccl-11-6                                     11.6.55-1                               amd64        CUDA CCCL
ii  cuda-command-line-tools-11-4                       11.4.4-1                                amd64        CUDA command-line tools
ii  cuda-command-line-tools-11-6                       11.6.2-1                                amd64        CUDA command-line tools
ii  cuda-compiler-11-4                                 11.4.4-1                                amd64        CUDA compiler
ii  cuda-compiler-11-6                                 11.6.2-1                                amd64        CUDA compiler
ii  cuda-cudart-11-4                                   11.4.148-1                              amd64        CUDA Runtime native Libraries
ii  cuda-cudart-11-6                                   11.6.55-1                               amd64        CUDA Runtime native Libraries
ii  cuda-cudart-dev-11-4                               11.4.148-1                              amd64        CUDA Runtime native dev links, headers
ii  cuda-cudart-dev-11-6                               11.6.55-1                               amd64        CUDA Runtime native dev links, headers
ii  cuda-cuobjdump-11-4                                11.4.120-1                              amd64        CUDA cuobjdump
ii  cuda-cuobjdump-11-6                                11.6.124-1                              amd64        CUDA cuobjdump
ii  cuda-cupti-11-4                                    11.4.120-1                              amd64        CUDA profiling tools runtime libs.
ii  cuda-cupti-11-6                                    11.6.124-1                              amd64        CUDA profiling tools runtime libs.
ii  cuda-cupti-dev-11-4                                11.4.120-1                              amd64        CUDA profiling tools interface.
ii  cuda-cupti-dev-11-6                                11.6.124-1                              amd64        CUDA profiling tools interface.
ii  cuda-cuxxfilt-11-4                                 11.4.120-1                              amd64        CUDA cuxxfilt
ii  cuda-cuxxfilt-11-6                                 11.6.124-1                              amd64        CUDA cuxxfilt
ii  cuda-driver-dev-11-4                               11.4.148-1                              amd64        CUDA Driver native dev stub library
ii  cuda-driver-dev-11-6                               11.6.55-1                               amd64        CUDA Driver native dev stub library
ii  cuda-drivers                                       515.65.01-1                             amd64        CUDA Driver meta-package, branch-agnostic
ii  cuda-drivers-515                                   515.65.01-1                             amd64        CUDA Driver meta-package, branch-specific
ii  cuda-gdb-11-4                                      11.4.120-1                              amd64        CUDA-GDB
ii  cuda-gdb-11-6                                      11.6.124-1                              amd64        CUDA-GDB
ii  cuda-keyring                                       1.0-1                                   all          GPG keyring for the CUDA repository
ii  cuda-libraries-dev-11-4                            11.4.4-1                                amd64        CUDA Libraries 11.4 development meta-package
ii  cuda-libraries-dev-11-6                            11.6.2-1                                amd64        CUDA Libraries 11.6 development meta-package
ii  cuda-memcheck-11-4                                 11.4.120-1                              amd64        CUDA-MEMCHECK
ii  cuda-memcheck-11-6                                 11.6.124-1                              amd64        CUDA-MEMCHECK
ii  cuda-minimal-build-11-4                            11.4.4-1                                amd64        Minimal CUDA 11.4 toolkit build packages.
ii  cuda-minimal-build-11-6                            11.6.2-1                                amd64        Minimal CUDA 11.6 toolkit build packages.
ii  cuda-nvcc-11-4                                     11.4.152-1                              amd64        CUDA nvcc
ii  cuda-nvcc-11-6                                     11.6.124-1                              amd64        CUDA nvcc
ii  cuda-nvdisasm-11-4                                 11.4.152-1                              amd64        CUDA disassembler
ii  cuda-nvdisasm-11-6                                 11.6.124-1                              amd64        CUDA disassembler
ii  cuda-nvml-dev-11-4                                 11.4.120-1                              amd64        NVML native dev links, headers
ii  cuda-nvml-dev-11-6                                 11.6.55-1                               amd64        NVML native dev links, headers
ii  cuda-nvprof-11-4                                   11.4.120-1                              amd64        CUDA Profiler tools
ii  cuda-nvprof-11-6                                   11.6.124-1                              amd64        CUDA Profiler tools
ii  cuda-nvprune-11-4                                  11.4.120-1                              amd64        CUDA nvprune
ii  cuda-nvprune-11-6                                  11.6.124-1                              amd64        CUDA nvprune
ii  cuda-nvrtc-11-4                                    11.4.152-1                              amd64        NVRTC native runtime libraries
ii  cuda-nvrtc-11-6                                    11.6.124-1                              amd64        NVRTC native runtime libraries
ii  cuda-nvrtc-dev-11-4                                11.4.152-1                              amd64        NVRTC native dev links, headers
ii  cuda-nvrtc-dev-11-6                                11.6.124-1                              amd64        NVRTC native dev links, headers
ii  cuda-nvtx-11-4                                     11.4.120-1                              amd64        NVIDIA Tools Extension
ii  cuda-nvtx-11-6                                     11.6.124-1                              amd64        NVIDIA Tools Extension
ii  cuda-sanitizer-11-4                                11.4.120-1                              amd64        CUDA Sanitizer
ii  cuda-sanitizer-11-6                                11.6.124-1                              amd64        CUDA Sanitizer
ii  cuda-toolkit-11-4-config-common                    11.4.148-1                              all          Common config package for CUDA Toolkit 11.4.
ii  cuda-toolkit-11-6-config-common                    11.6.55-1                               all          Common config package for CUDA Toolkit 11.6.
ii  cuda-toolkit-11-config-common                      11.8.89-1                               all          Common config package for CUDA Toolkit 11.
ii  cuda-toolkit-config-common                         11.8.89-1                               all          Common config package for CUDA Toolkit.

$ dpkg -l | grep nvidia-
ii  libnvidia-cfg1-515:amd64                           515.65.01-0ubuntu1                      amd64        NVIDIA binary OpenGL/GLX configuration library
ii  libnvidia-common-515                               515.65.01-0ubuntu1                      all          Shared files used by the NVIDIA libraries
rc  libnvidia-compute-510:amd64                        510.73.05-0ubuntu0.22.04.1              amd64        NVIDIA libcompute package
ii  libnvidia-compute-515:amd64                        515.65.01-0ubuntu1                      amd64        NVIDIA libcompute package
ii  libnvidia-compute-515:i386                         515.65.01-0ubuntu1                      i386         NVIDIA libcompute package
ii  libnvidia-container-tools                          1.11.0-1                                amd64        NVIDIA container runtime library (command-line tools)
ii  libnvidia-container1:amd64                         1.11.0-1                                amd64        NVIDIA container runtime library
ii  libnvidia-decode-515:amd64                         515.65.01-0ubuntu1                      amd64        NVIDIA Video Decoding runtime libraries
ii  libnvidia-decode-515:i386                          515.65.01-0ubuntu1                      i386         NVIDIA Video Decoding runtime libraries
ii  libnvidia-encode-515:amd64                         515.65.01-0ubuntu1                      amd64        NVENC Video Encoding runtime library
ii  libnvidia-encode-515:i386                          515.65.01-0ubuntu1                      i386         NVENC Video Encoding runtime library
ii  libnvidia-extra-515:amd64                          515.65.01-0ubuntu1                      amd64        Extra libraries for the NVIDIA driver
ii  libnvidia-fbc1-515:amd64                           515.65.01-0ubuntu1                      amd64        NVIDIA OpenGL-based Framebuffer Capture runtime library
ii  libnvidia-fbc1-515:i386                            515.65.01-0ubuntu1                      i386         NVIDIA OpenGL-based Framebuffer Capture runtime library
ii  libnvidia-gl-515:amd64                             515.65.01-0ubuntu1                      amd64        NVIDIA OpenGL/GLX/EGL/GLES GLVND libraries and Vulkan ICD
ii  libnvidia-gl-515:i386                              515.65.01-0ubuntu1                      i386         NVIDIA OpenGL/GLX/EGL/GLES GLVND libraries and Vulkan ICD
rc  linux-modules-nvidia-510-5.15.0-25-generic         5.15.0-25.25                            amd64        Linux kernel nvidia modules for version 5.15.0-25
rc  linux-objects-nvidia-510-5.15.0-25-generic         5.15.0-25.25                            amd64        Linux kernel nvidia modules for version 5.15.0-25 (objects)
rc  linux-objects-nvidia-510-5.15.0-27-generic         5.15.0-27.28                            amd64        Linux kernel nvidia modules for version 5.15.0-27 (objects)
rc  linux-objects-nvidia-510-5.15.0-33-generic         5.15.0-33.34                            amd64        Linux kernel nvidia modules for version 5.15.0-33 (objects)
ii  nvidia-compute-utils-515                           515.65.01-0ubuntu1                      amd64        NVIDIA compute utilities
ii  nvidia-container-runtime                           3.11.0-1                                all          NVIDIA container runtime
ii  nvidia-container-toolkit                           1.11.0-1                                amd64        NVIDIA Container toolkit
ii  nvidia-container-toolkit-base                      1.11.0-1                                amd64        NVIDIA Container Toolkit Base
ii  nvidia-dkms-515                                    515.65.01-0ubuntu1                      amd64        NVIDIA DKMS package
ii  nvidia-docker2                                     2.11.0-1                                all          nvidia-docker CLI wrapper
ii  nvidia-driver-515                                  515.65.01-0ubuntu1                      amd64        NVIDIA driver metapackage
ii  nvidia-kernel-common-515                           515.65.01-0ubuntu1                      amd64        Shared files used with the kernel module
ii  nvidia-kernel-source-515                           515.65.01-0ubuntu1                      amd64        NVIDIA kernel source package
ii  nvidia-modprobe                                    520.61.05-0ubuntu1                      amd64        Load the NVIDIA kernel driver and create device files
ii  nvidia-prime                                       0.8.17.1                                all          Tools to enable NVIDIA's Prime
ii  nvidia-settings                                    520.61.05-0ubuntu1                      amd64        Tool for configuring the NVIDIA graphics driver
ii  nvidia-utils-515                                   515.65.01-0ubuntu1                      amd64        NVIDIA driver support binaries
ii  screen-resolution-extra                            0.18.2                                  all          Extension for the nvidia-settings control panel
ii  xserver-xorg-video-nvidia-515                      515.65.01-0ubuntu1                      amd64        NVIDIA binary Xorg driver
```"
nvidia-container-cli: requirement error: unsatisfied condition: cuda>=11.6,D_kwDOAnasMc4ARH50,2022-10-20T06:40:10Z,tleyden,1,Answered,DC_kwDOAnasMc4AO_EZ,tleyden,"@kenji-miyake Here are the outputs, and thanks in advance for looking at this!

### nvidia-smi

```
$ nvidia-smi -L
GPU 0: NVIDIA GeForce GTX 1070 with Max-Q Design (UUID: GPU-afd7d23d-0cd5-ed16-d5b0-975a2a1dee4a)
```

```
$ nvidia-smi
Thu Oct 20 13:38:46 2022       
+-----------------------------------------------------------------------------+
| NVIDIA-SMI 470.141.03   Driver Version: 470.141.03   CUDA Version: 11.4     |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|                               |                      |               MIG M. |
|===============================+======================+======================|
|   0  NVIDIA GeForce ...  Off  | 00000000:01:00.0  On |                  N/A |
| N/A   39C    P8     6W /  N/A |    116MiB /  8119MiB |     20%      Default |
|                               |                      |                  N/A |
+-------------------------------+----------------------+----------------------+
                                                                               
+-----------------------------------------------------------------------------+
| Processes:                                                                  |
|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |
|        ID   ID                                                   Usage      |
|=============================================================================|
|    0   N/A  N/A      1443      G   /usr/lib/xorg/Xorg                 32MiB |
|    0   N/A  N/A      2278      G   /usr/lib/xorg/Xorg                 81MiB |
+-----------------------------------------------------------------------------+

```

### cuda packages

```
$ dpkg -l | grep cuda-
ii  cuda-10-2                                  10.2.89-1                                                             amd64        CUDA 10.2 meta-package
ii  cuda-command-line-tools-10-2               10.2.89-1                                                             amd64        CUDA command-line tools
ii  cuda-compiler-10-2                         10.2.89-1                                                             amd64        CUDA compiler
ii  cuda-cudart-10-2                           10.2.89-1                                                             amd64        CUDA Runtime native Libraries
ii  cuda-cudart-dev-10-2                       10.2.89-1                                                             amd64        CUDA Runtime native dev links, headers
ii  cuda-cufft-10-2                            10.2.89-1                                                             amd64        CUFFT native runtime libraries
ii  cuda-cufft-dev-10-2                        10.2.89-1                                                             amd64        CUFFT native dev links, headers
ii  cuda-cuobjdump-10-2                        10.2.89-1                                                             amd64        CUDA cuobjdump
ii  cuda-cupti-10-2                            10.2.89-1                                                             amd64        CUDA profiling tools runtime libs.
ii  cuda-cupti-dev-10-2                        10.2.89-1                                                             amd64        CUDA profiling tools interface.
ii  cuda-curand-10-2                           10.2.89-1                                                             amd64        CURAND native runtime libraries
ii  cuda-curand-dev-10-2                       10.2.89-1                                                             amd64        CURAND native dev links, headers
ii  cuda-cusolver-10-2                         10.2.89-1                                                             amd64        CUDA solver native runtime libraries
ii  cuda-cusolver-dev-10-2                     10.2.89-1                                                             amd64        CUDA solver native dev links, headers
ii  cuda-cusparse-10-2                         10.2.89-1                                                             amd64        CUSPARSE native runtime libraries
ii  cuda-cusparse-dev-10-2                     10.2.89-1                                                             amd64        CUSPARSE native dev links, headers
ii  cuda-demo-suite-10-2                       10.2.89-1                                                             amd64        Demo suite for CUDA
ii  cuda-documentation-10-2                    10.2.89-1                                                             amd64        CUDA documentation
ii  cuda-driver-dev-10-2                       10.2.89-1                                                             amd64        CUDA Driver native dev stub library
ii  cuda-drivers                               440.64.00-1                                                           amd64        CUDA Driver meta-package
ii  cuda-gdb-10-2                              10.2.89-1                                                             amd64        CUDA-GDB
ii  cuda-libraries-10-2                        10.2.89-1                                                             amd64        CUDA Libraries 10.2 meta-package
ii  cuda-libraries-dev-10-2                    10.2.89-1                                                             amd64        CUDA Libraries 10.2 development meta-package
ii  cuda-license-10-2                          10.2.89-1                                                             amd64        CUDA licenses
ii  cuda-memcheck-10-2                         10.2.89-1                                                             amd64        CUDA-MEMCHECK
ii  cuda-misc-headers-10-2                     10.2.89-1                                                             amd64        CUDA miscellaneous headers
ii  cuda-npp-10-2                              10.2.89-1                                                             amd64        NPP native runtime libraries
ii  cuda-npp-dev-10-2                          10.2.89-1                                                             amd64        NPP native dev links, headers
ii  cuda-nsight-10-2                           10.2.89-1                                                             amd64        CUDA nsight
ii  cuda-nsight-compute-10-2                   10.2.89-1                                                             amd64        NVIDIA Nsight Compute
ii  cuda-nsight-systems-10-2                   10.2.89-1                                                             amd64        NVIDIA Nsight Systems
ii  cuda-nvcc-10-2                             10.2.89-1                                                             amd64        CUDA nvcc
ii  cuda-nvdisasm-10-2                         10.2.89-1                                                             amd64        CUDA disassembler
ii  cuda-nvgraph-10-2                          10.2.89-1                                                             amd64        NVGRAPH native runtime libraries
ii  cuda-nvgraph-dev-10-2                      10.2.89-1                                                             amd64        NVGRAPH native dev links, headers
ii  cuda-nvjpeg-10-2                           10.2.89-1                                                             amd64        NVJPEG native runtime libraries
ii  cuda-nvjpeg-dev-10-2                       10.2.89-1                                                             amd64        NVJPEG native dev links, headers
ii  cuda-nvml-dev-10-2                         10.2.89-1                                                             amd64        NVML native dev links, headers
ii  cuda-nvprof-10-2                           10.2.89-1                                                             amd64        CUDA Profiler tools
ii  cuda-nvprune-10-2                          10.2.89-1                                                             amd64        CUDA nvprune
ii  cuda-nvrtc-10-2                            10.2.89-1                                                             amd64        NVRTC native runtime libraries
ii  cuda-nvrtc-dev-10-2                        10.2.89-1                                                             amd64        NVRTC native dev links, headers
ii  cuda-nvtx-10-2                             10.2.89-1                                                             amd64        NVIDIA Tools Extension
ii  cuda-nvvp-10-2                             10.2.89-1                                                             amd64        CUDA nvvp
ii  cuda-runtime-10-2                          10.2.89-1                                                             amd64        CUDA Runtime 10.2 meta-package
ii  cuda-samples-10-2                          10.2.89-1                                                             amd64        CUDA example applications
ii  cuda-sanitizer-api-10-2                    10.2.89-1                                                             amd64        CUDA Sanitizer API
ii  cuda-toolkit-10-2                          10.2.89-1                                                             amd64        CUDA Toolkit 10.2 meta-package
ii  cuda-tools-10-2                            10.2.89-1                                                             amd64        CUDA Tools meta-package
ii  cuda-visual-tools-10-2                     10.2.89-1                                                             amd64        CUDA visual tools

```

### nvidia packages

```
$ dpkg -l | grep nvidia-
ii  libnvidia-cfg1-470:amd64                   470.141.03-1pop0~1660260989~20.04~d973896~dev                         amd64        NVIDIA binary OpenGL/GLX configuration library
ii  libnvidia-common-440                       470.141.03-1pop0~1660260989~20.04~d973896~dev                         all          Transitional package for libnvidia-common-470
ii  libnvidia-common-470                       470.141.03-1pop0~1660260989~20.04~d973896~dev                         all          Shared files used by the NVIDIA libraries
rc  libnvidia-compute-410:amd64                418.56-0ubuntu1pop1~1555518082~18.04~32b1bc5~dev                      amd64        Transitional package for libnvidia-compute-418
rc  libnvidia-compute-410:i386                 418.56-0ubuntu1pop1~1555518082~18.04~32b1bc5~dev                      i386         Transitional package for libnvidia-compute-418
rc  libnvidia-compute-418:amd64                440.59-1pop1~1584480240~18.04~cd14ef6~dev                             amd64        Transitional package for libnvidia-compute-440
ii  libnvidia-compute-440:amd64                470.141.03-1pop0~1660260989~20.04~d973896~dev                         amd64        Transitional package for libnvidia-compute-470
ii  libnvidia-compute-470:amd64                470.141.03-1pop0~1660260989~20.04~d973896~dev                         amd64        NVIDIA libcompute package
ii  libnvidia-compute-470:i386                 470.141.03-1pop0~1660260989~20.04~d973896~dev                         i386         NVIDIA libcompute package
ii  libnvidia-container-tools                  1.11.0-1                                                              amd64        NVIDIA container runtime library (command-line tools)
ii  libnvidia-container1:amd64                 1.11.0-1                                                              amd64        NVIDIA container runtime library
ii  libnvidia-decode-440:amd64                 470.141.03-1pop0~1660260989~20.04~d973896~dev                         amd64        Transitional package for libnvidia-decode-470
ii  libnvidia-decode-470:amd64                 470.141.03-1pop0~1660260989~20.04~d973896~dev                         amd64        NVIDIA Video Decoding runtime libraries
ii  libnvidia-decode-470:i386                  470.141.03-1pop0~1660260989~20.04~d973896~dev                         i386         NVIDIA Video Decoding runtime libraries
ii  libnvidia-egl-wayland1:amd64               1:1.1.3-1ubuntu1                                                      amd64        Wayland EGL External Platform library -- shared library
ii  libnvidia-encode-440:amd64                 470.141.03-1pop0~1660260989~20.04~d973896~dev                         amd64        Transitional package for libnvidia-encode-470
ii  libnvidia-encode-470:amd64                 470.141.03-1pop0~1660260989~20.04~d973896~dev                         amd64        NVENC Video Encoding runtime library
ii  libnvidia-encode-470:i386                  470.141.03-1pop0~1660260989~20.04~d973896~dev                         i386         NVENC Video Encoding runtime library
ii  libnvidia-extra-470:amd64                  470.141.03-1pop0~1660260989~20.04~d973896~dev                         amd64        Extra libraries for the NVIDIA driver
ii  libnvidia-fbc1-440:amd64                   470.141.03-1pop0~1660260989~20.04~d973896~dev                         amd64        Transitional package for libnvidia-fbc1-470
ii  libnvidia-fbc1-470:amd64                   470.141.03-1pop0~1660260989~20.04~d973896~dev                         amd64        NVIDIA OpenGL-based Framebuffer Capture runtime library
ii  libnvidia-gl-440:amd64                     470.141.03-1pop0~1660260989~20.04~d973896~dev                         amd64        Transitional package for libnvidia-gl-470
ii  libnvidia-gl-470:amd64                     470.141.03-1pop0~1660260989~20.04~d973896~dev                         amd64        NVIDIA OpenGL/GLX/EGL/GLES GLVND libraries and Vulkan ICD
ii  libnvidia-gl-470:i386                      470.141.03-1pop0~1660260989~20.04~d973896~dev                         i386         NVIDIA OpenGL/GLX/EGL/GLES GLVND libraries and Vulkan ICD
ii  libnvidia-ifr1-440:amd64                   470.141.03-1pop0~1660260989~20.04~d973896~dev                         amd64        Transitional package for libnvidia-ifr1-470
ii  libnvidia-ifr1-470:amd64                   470.141.03-1pop0~1660260989~20.04~d973896~dev                         amd64        NVIDIA OpenGL-based Inband Frame Readback runtime library
ii  nvidia-compute-utils-440:amd64             470.141.03-1pop0~1660260989~20.04~d973896~dev                         amd64        Transitional package for nvidia-compute-utils-470
ii  nvidia-compute-utils-470                   470.141.03-1pop0~1660260989~20.04~d973896~dev                         amd64        NVIDIA compute utilities
ii  nvidia-container-runtime                   3.11.0-1                                                              all          NVIDIA container runtime
ii  nvidia-container-toolkit                   1.11.0-1                                                              amd64        NVIDIA Container toolkit
ii  nvidia-container-toolkit-base              1.11.0-1                                                              amd64        NVIDIA Container Toolkit Base
ii  nvidia-dkms-440                            470.141.03-1pop0~1660260989~20.04~d973896~dev                         amd64        Transitional package for nvidia-dkms-470
ii  nvidia-dkms-470                            470.141.03-1pop0~1660260989~20.04~d973896~dev                         amd64        NVIDIA DKMS package
ii  nvidia-docker2                             2.11.0-1                                                              all          nvidia-docker CLI wrapper
ii  nvidia-driver-440                          470.141.03-1pop0~1660260989~20.04~d973896~dev                         amd64        Transitional package for nvidia-driver-470
ii  nvidia-driver-470                          470.141.03-1pop0~1660260989~20.04~d973896~dev                         amd64        NVIDIA driver metapackage
ii  nvidia-kernel-common-440:amd64             470.141.03-1pop0~1660260989~20.04~d973896~dev                         amd64        Transitional package for nvidia-kernel-common-470
ii  nvidia-kernel-common-470                   470.141.03-1pop0~1660260989~20.04~d973896~dev                         amd64        Shared files used with the kernel module
ii  nvidia-kernel-source-440                   470.141.03-1pop0~1660260989~20.04~d973896~dev                         amd64        Transitional package for nvidia-kernel-source-470
ii  nvidia-kernel-source-470                   470.141.03-1pop0~1660260989~20.04~d973896~dev                         amd64        NVIDIA kernel source package
ii  nvidia-modprobe                            465.24.02-1~ubuntu20.04.1                                             amd64        utility to load NVIDIA kernel modules and create device nodes
ii  nvidia-prime                               0.8.16~0.20.04.2                                                      all          Tools to enable NVIDIA's Prime
ii  nvidia-settings                            470.57.01-0ubuntu0.20.04.3                                            amd64        Tool for configuring the NVIDIA graphics driver
ii  nvidia-utils-440:amd64                     470.141.03-1pop0~1660260989~20.04~d973896~dev                         amd64        Transitional package for nvidia-utils-470
ii  nvidia-utils-470                           470.141.03-1pop0~1660260989~20.04~d973896~dev                         amd64        NVIDIA driver support binaries
ii  screen-resolution-extra                    0.18build1                                                            all          Extension for the nvidia-settings control panel
ii  xserver-xorg-video-nvidia-440:amd64        470.141.03-1pop0~1660260989~20.04~d973896~dev                         amd64        Transitional package for xserver-xorg-video-nvidia-470
ii  xserver-xorg-video-nvidia-470              470.141.03-1pop0~1660260989~20.04~d973896~dev                         amd64        NVIDIA binary Xorg driver

```

It seems odd that `CUDA Version: 11.4 ` but that I have the `cuda-10-2 ` package.  Do you recommend upgrading?"
nvidia-container-cli: requirement error: unsatisfied condition: cuda>=11.6,D_kwDOAnasMc4ARH50,2022-10-20T06:40:10Z,tleyden,1,Answered,DC_kwDOAnasMc4AO_Wn,kenji-miyake,"@tleyden Your CUDA version seems to be too old, and CUDA won't be updated by the setup script now.
Related: https://github.com/autowarefoundation/autoware/issues/2821#issuecomment-1241735639

How about installing CUDA (entire, or only CUDA drivers) 11.6?
If you have a trouble when installing it, I recommend you to remove the current version first.
Related: https://autowarefoundation.github.io/autoware-documentation/main/support/troubleshooting/#cuda-related-errors"
nvidia-container-cli: requirement error: unsatisfied condition: cuda>=11.6,D_kwDOAnasMc4ARH50,2022-10-20T06:40:10Z,tleyden,1,Answered,DC_kwDOAnasMc4AO_hy,tleyden,"Thanks, I will give that a shot"
nvidia-container-cli: requirement error: unsatisfied condition: cuda>=11.6,D_kwDOAnasMc4ARH50,2022-10-20T06:40:10Z,tleyden,1,Answered,DC_kwDOAnasMc4AO_h2,tleyden,Should the docs be updated to require CUDA 11.6 or later?
nvidia-container-cli: requirement error: unsatisfied condition: cuda>=11.6,D_kwDOAnasMc4ARH50,2022-10-20T06:40:10Z,tleyden,1,Answered,DC_kwDOAnasMc4AO_7p,kenji-miyake,"Yes, it would be nice! Or preferably, installing the required CUDA version by Ansible is better."
nvidia-container-cli: requirement error: unsatisfied condition: cuda>=11.6,D_kwDOAnasMc4ARH50,2022-10-20T06:40:10Z,tleyden,1,Answered,DC_kwDOAnasMc4APBW0,tleyden,"I was able to get past the original error by updating my nvidia drivers and cuda drivers.

```
# nvidia-smi
Fri Oct 21 16:05:10 2022       
+-----------------------------------------------------------------------------+
| NVIDIA-SMI 510.73.05    Driver Version: 510.73.05    CUDA Version: 11.6     |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|                               |                      |               MIG M. |
|===============================+======================+======================|
|   0  NVIDIA GeForce ...  Off  | 00000000:01:00.0  On |                  N/A |
| N/A   40C    P8     6W /  N/A |    104MiB /  8192MiB |     10%      Default |
|                               |                      |                  N/A |
+-------------------------------+----------------------+----------------------+
                                                                               
+-----------------------------------------------------------------------------+
| Processes:                                                                  |
|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |
|        ID   ID                                                   Usage      |
|=============================================================================|
|    0   N/A  N/A      1422      G   /usr/lib/xorg/Xorg                 32MiB |
|    0   N/A  N/A      2342      G   /usr/lib/xorg/Xorg                 69MiB |
+-----------------------------------------------------------------------------+

```

## cuda packages

```
# dpkg -l | grep cuda-
ii  cuda-11-6                                    11.6.0-1                                                              amd64        CUDA 11.6 meta-package
ii  cuda-cccl-11-6                               11.6.55-1                                                             amd64        CUDA CCCL
ii  cuda-command-line-tools-11-6                 11.6.0-1                                                              amd64        CUDA command-line tools
ii  cuda-compiler-11-6                           11.6.0-1                                                              amd64        CUDA compiler
ii  cuda-cudart-11-6                             11.6.55-1                                                             amd64        CUDA Runtime native Libraries
ii  cuda-cudart-dev-11-6                         11.6.55-1                                                             amd64        CUDA Runtime native dev links, headers
ii  cuda-cuobjdump-11-6                          11.6.55-1                                                             amd64        CUDA cuobjdump
ii  cuda-cupti-11-6                              11.6.55-1                                                             amd64        CUDA profiling tools runtime libs.
ii  cuda-cupti-dev-11-6                          11.6.55-1                                                             amd64        CUDA profiling tools interface.
ii  cuda-cuxxfilt-11-6                           11.6.55-1                                                             amd64        CUDA cuxxfilt
ii  cuda-demo-suite-11-6                         11.6.55-1                                                             amd64        Demo suite for CUDA
ii  cuda-documentation-11-6                      11.6.55-1                                                             amd64        CUDA documentation
ii  cuda-driver-dev-11-6                         11.6.55-1                                                             amd64        CUDA Driver native dev stub library
ii  cuda-drivers                                 510.39.01-1                                                           amd64        CUDA Driver meta-package, branch-agnostic
ii  cuda-drivers-510                             510.39.01-1                                                           amd64        CUDA Driver meta-package, branch-specific
ii  cuda-gdb-11-6                                11.6.55-1                                                             amd64        CUDA-GDB
ii  cuda-libraries-11-6                          11.6.0-1                                                              amd64        CUDA Libraries 11.6 meta-package
ii  cuda-libraries-dev-11-6                      11.6.0-1                                                              amd64        CUDA Libraries 11.6 development meta-package
ii  cuda-memcheck-11-6                           11.6.55-1                                                             amd64        CUDA-MEMCHECK
ii  cuda-nsight-11-6                             11.6.55-1                                                             amd64        CUDA nsight
ii  cuda-nsight-compute-11-6                     11.6.0-1                                                              amd64        NVIDIA Nsight Compute
ii  cuda-nsight-systems-11-6                     11.6.0-1                                                              amd64        NVIDIA Nsight Systems
ii  cuda-nvcc-11-6                               11.6.55-1                                                             amd64        CUDA nvcc
ii  cuda-nvdisasm-11-6                           11.6.55-1                                                             amd64        CUDA disassembler
ii  cuda-nvml-dev-11-6                           11.6.55-1                                                             amd64        NVML native dev links, headers
ii  cuda-nvprof-11-6                             11.6.55-1                                                             amd64        CUDA Profiler tools
ii  cuda-nvprune-11-6                            11.6.55-1                                                             amd64        CUDA nvprune
ii  cuda-nvrtc-11-6                              11.6.55-1                                                             amd64        NVRTC native runtime libraries
ii  cuda-nvrtc-dev-11-6                          11.6.55-1                                                             amd64        NVRTC native dev links, headers
ii  cuda-nvtx-11-6                               11.6.55-1                                                             amd64        NVIDIA Tools Extension
ii  cuda-nvvp-11-6                               11.6.58-1                                                             amd64        CUDA Profiler tools
ii  cuda-repo-ubuntu2004-11-6-local              11.6.0-510.39.01-1                                                    amd64        cuda repository configuration files
ii  cuda-runtime-11-6                            11.6.0-1                                                              amd64        CUDA Runtime 11.6 meta-package
ii  cuda-samples-11-6                            11.6.101-1                                                            amd64        CUDA example applications
ii  cuda-sanitizer-11-6                          11.6.55-1                                                             amd64        CUDA Sanitizer
ii  cuda-toolkit-11-6                            11.6.0-1                                                              amd64        CUDA Toolkit 11.6 meta-package
ii  cuda-toolkit-11-6-config-common              11.6.55-1                                                             all          Common config package for CUDA Toolkit 11.6.
ii  cuda-toolkit-11-config-common                11.6.55-1                                                             all          Common config package for CUDA Toolkit 11.
ii  cuda-toolkit-config-common                   11.6.55-1                                                             all          Common config package for CUDA Toolkit.
ii  cuda-tools-11-6                              11.6.0-1                                                              amd64        CUDA Tools meta-package
ii  cuda-visual-tools-11-6                       11.6.0-1                                                              amd64        CUDA visual tools

```

## nvidia packages

```
# dpkg -l | grep nvidia-
ii  libnvidia-cfg1-510:amd64                     510.73.05-1pop0~1653592955~20.04~4ec3405~dev                          amd64        NVIDIA binary OpenGL/GLX configuration library
ii  libnvidia-common-510                         510.73.05-1pop0~1653592955~20.04~4ec3405~dev                          all          Shared files used by the NVIDIA libraries
ii  libnvidia-compute-510:amd64                  510.73.05-1pop0~1653592955~20.04~4ec3405~dev                          amd64        NVIDIA libcompute package
rc  libnvidia-compute-515:amd64                  515.65.01-1pop0~1663626642~20.04~1f94f41~dev                          amd64        NVIDIA libcompute package
ii  libnvidia-container-tools                    1.11.0-1                                                              amd64        NVIDIA container runtime library (command-line tools)
ii  libnvidia-container1:amd64                   1.11.0-1                                                              amd64        NVIDIA container runtime library
ii  libnvidia-decode-510:amd64                   510.73.05-1pop0~1653592955~20.04~4ec3405~dev                          amd64        NVIDIA Video Decoding runtime libraries
ii  libnvidia-egl-wayland1:amd64                 1:1.1.3-1ubuntu1                                                      amd64        Wayland EGL External Platform library -- shared library
ii  libnvidia-encode-510:amd64                   510.73.05-1pop0~1653592955~20.04~4ec3405~dev                          amd64        NVENC Video Encoding runtime library
ii  libnvidia-extra-510:amd64                    510.73.05-1pop0~1653592955~20.04~4ec3405~dev                          amd64        Extra libraries for the NVIDIA driver
ii  libnvidia-fbc1-510:amd64                     510.73.05-1pop0~1653592955~20.04~4ec3405~dev                          amd64        NVIDIA OpenGL-based Framebuffer Capture runtime library
ii  libnvidia-gl-510:amd64                       510.73.05-1pop0~1653592955~20.04~4ec3405~dev                          amd64        NVIDIA OpenGL/GLX/EGL/GLES GLVND libraries and Vulkan ICD
ii  nvidia-compute-utils-510                     510.73.05-1pop0~1653592955~20.04~4ec3405~dev                          amd64        NVIDIA compute utilities
rc  nvidia-compute-utils-515                     515.65.01-1pop0~1663626642~20.04~1f94f41~dev                          amd64        NVIDIA compute utilities
ii  nvidia-container-toolkit                     1.11.0-1                                                              amd64        NVIDIA Container toolkit
ii  nvidia-container-toolkit-base                1.11.0-1                                                              amd64        NVIDIA Container Toolkit Base
ii  nvidia-dkms-510                              510.73.05-1pop0~1653592955~20.04~4ec3405~dev                          amd64        NVIDIA DKMS package
rc  nvidia-dkms-515                              515.65.01-1pop0~1663626642~20.04~1f94f41~dev                          amd64        NVIDIA DKMS package
ii  nvidia-docker2                               2.11.0-1                                                              all          nvidia-docker CLI wrapper
ii  nvidia-driver-510                            510.73.05-1pop0~1653592955~20.04~4ec3405~dev                          amd64        NVIDIA driver metapackage
ii  nvidia-kernel-common-510                     510.73.05-1pop0~1653592955~20.04~4ec3405~dev                          amd64        Shared files used with the kernel module
rc  nvidia-kernel-common-515                     515.65.01-1pop0~1663626642~20.04~1f94f41~dev                          amd64        Shared files used with the kernel module
ii  nvidia-kernel-source-510                     510.73.05-1pop0~1653592955~20.04~4ec3405~dev                          amd64        NVIDIA kernel source package
ii  nvidia-modprobe                              510.39.01-0ubuntu1                                                    amd64        Load the NVIDIA kernel driver and create device files
ii  nvidia-settings                              510.39.01-0ubuntu1                                                    amd64        Tool for configuring the NVIDIA graphics driver
ii  nvidia-utils-510                             510.73.05-1pop0~1653592955~20.04~4ec3405~dev                          amd64        NVIDIA driver support binaries
ii  screen-resolution-extra                      0.18build1                                                            all          Extension for the nvidia-settings control panel
ii  xserver-xorg-video-nvidia-510                510.73.05-1pop0~1653592955~20.04~4ec3405~dev                          amd64        NVIDIA binary Xorg driver

```

I did hit another error (and found a workaround), but I'll create a new thread for that.  Thanks again for the help!"
nvidia-container-cli: requirement error: unsatisfied condition: cuda>=11.6,D_kwDOAnasMc4ARH50,2022-10-20T06:40:10Z,tleyden,1,Answered,DC_kwDOAnasMc4APWG-,tleyden,"> Yes, it would be nice! Or preferably, installing the required CUDA version by Ansible is better.

@kenji-miyake here is a PR:  https://github.com/autowarefoundation/autoware/pull/2986, can you please review?  Let me know if I should file a separate issue or if this discussion is enough.

By the way it looks like the [ansible version env variable](https://github.com/autowarefoundation/autoware/blob/e108b8fa9e47307b1f2573be5d0dde828235bcb0/amd64.env#L5) is already correct, so I only updated the readme."
nvidia-container-cli: requirement error: unsatisfied condition: cuda>=11.6,D_kwDOAnasMc4ARH50,2022-10-20T06:40:10Z,tleyden,1,Answered,DC_kwDOAnasMc4APWSs,kenji-miyake,@tleyden This discussion is enough. Thank you! :smile:
2022-10-24 ODD working group weekly meeting (116),D_kwDOAnasMc4ARIo1,2022-10-21T05:59:47Z,Igata-ctrl,0,Unanswered,,,
Planning according to traffic sign,D_kwDOAnasMc4ARIvX,2022-10-21T08:54:27Z,gurselturkeri,1,Answered,,,
Planning according to traffic sign,D_kwDOAnasMc4ARIvX,2022-10-21T08:54:27Z,gurselturkeri,1,Answered,DC_kwDOAnasMc4APGCu,takayuki5168,"@gurselturkeri Currently, the route cannot be changed dynamically. Let me know if you want to change the route dynamically.

With the current implementation, to deal with what you want to do, the lanelet with no turn right sign should be removed from the map statically and manually."
Planning according to traffic sign,D_kwDOAnasMc4ARIvX,2022-10-21T08:54:27Z,gurselturkeri,1,Answered,DC_kwDOAnasMc4APIYE,gurselturkeri,"So we can't do route dynamically with traffic sign detection ? 
I saw tensorrt yolo package in folders. What does it do?"
Planning according to traffic sign,D_kwDOAnasMc4ARIvX,2022-10-21T08:54:27Z,gurselturkeri,1,Answered,DC_kwDOAnasMc4APOjl,maxime-clem,"You are right, we cannot do dynamic route replanning based on the traffic sign detection.

> I saw tensorrt yolo package in folders. What does it do?

https://github.com/autowarefoundation/autoware.universe/tree/main/perception/tensorrt_yolo#purpose
> This package detects 2D bounding boxes for target objects e.g., cars, trucks, bicycles, and pedestrians on a image based on YOLO(You only look once) model.

Please open a new [feature request](https://github.com/orgs/autowarefoundation/discussions/categories/feature-requests) if you are interested in dynamic replanning based on traffic sign detection.
I think several big changes would be needed in order to achieve such functionality, but it is an interesting use case and more people may be interested in working on it."
Planning according to traffic sign,D_kwDOAnasMc4ARIvX,2022-10-21T08:54:27Z,gurselturkeri,1,Answered,DC_kwDOAnasMc4AQwdV,HuaweiAlgolux,"> So we can't do route dynamically with traffic sign detection ? I saw tensorrt yolo package in folders. What does it do?

I think that's what behavior path planner does"
trtexec_vendor CmakeList.txt always download tensorrt packages,D_kwDOAnasMc4ARIzq,2022-10-21T10:35:38Z,ln879044,0,Unanswered,,,
Error starting rviz2 from within container - libGL error: MESA-LOADER: failed to retrieve device information,D_kwDOAnasMc4ARJO5,2022-10-21T23:19:36Z,tleyden,1,Answered,,,
Error starting rviz2 from within container - libGL error: MESA-LOADER: failed to retrieve device information,D_kwDOAnasMc4ARJO5,2022-10-21T23:19:36Z,tleyden,1,Answered,DC_kwDOAnasMc4APDnS,evshary,"I tested on two machines with GPU cards by my side. Both are Ubuntu 20.04 (x86)
1. Ubuntu 20.04 + GTX 1050
2. Ubuntu 20.04 + RTX 5000

I met the same issue on GTX 1050 but run successfully on RTX 5000.
I think the problem is that rviz2 does not use NVIDIA GPU but Intel integrated graphics.
You can force to use NVIDIA GPU by the following commands:

```bash
prime-select query
# It should show on-demand by default
sudo prime-select nvidia
# Force to use NVIDIA GPU
```

After reboot, your system will use NVIDIA GPU card by default and rviz2 can run successfully.

Another solution:
If you don't want to use GPU card and want to run with software computation, you can add `LIBGL_ALWAYS_SOFTWARE=1`.
But it causes bad performance and I don't think that is what you want.

```bash
rocker -e LIBGL_ALWAYS_SOFTWARE=1 --x11 --user --volume $HOME/autoware --volume $HOME/autoware_map -- ghcr.io/autowarefoundation/autoware-universe:latest-cuda
```
"
Error starting rviz2 from within container - libGL error: MESA-LOADER: failed to retrieve device information,D_kwDOAnasMc4ARJO5,2022-10-21T23:19:36Z,tleyden,1,Answered,DC_kwDOAnasMc4APFn5,tleyden,"@evshary for some reason it didn't work for me.  Even though `prime-select query` returns `nvidia` after following those instructions and doing a reboot, if I start the container without `--devices /dev/dri`:

```
$ rocker --nvidia --x11 --user --volume $HOME/Development/autoware --volume $HOME/Development/autoware_map -- ghcr.io/autowarefoundation/autoware-universe:latest-cuda
```

running `rviz2` or running the autoware launch file in the container hits the same `libGL error: MESA-LOADER: failed to retrieve device information` errors posted above.  Any idea on how to further debug?  Would switching from a docker to a source install potentially help?

I also noticed that when I run `nvidia-settings`, I don't see the ""PRIME PROFILES"" section in the UI as shown in this [article](https://www.linuxbabe.com/desktop-linux/switch-intel-nvidia-graphics-card-ubuntu), not sure if that makes any difference.

Do you think `LIBGL_ALWAYS_SOFTWARE=1` is a better workaround than `--devices /dev/dri` or is it equivalent?  It sounds like with either approach it won't be using my GPU and will therefore be slow?"
Error starting rviz2 from within container - libGL error: MESA-LOADER: failed to retrieve device information,D_kwDOAnasMc4ARJO5,2022-10-21T23:19:36Z,tleyden,1,Answered,DC_kwDOAnasMc4APGMT,evshary,"@tleyden
> Would switching from a docker to a source install potentially help?

I guess using source install should work, but the problem will be whether it uses NVIDIA GPU or not.
Could you share the result of `nvidia-smi`?

> Do you think LIBGL_ALWAYS_SOFTWARE=1 is a better workaround than --devices /dev/dri or is it equivalent? It sounds like with either approach it won't be using my GPU and will therefore be slow?

No, I'd suggest you use `--devices /dev/dri` instead of `LIBGL_ALWAYS_SOFTWARE=1`. `LIBGL_ALWAYS_SOFTWARE=1` disables all the hardware acceleration, but `--devices /dev/dri` uses your Intel integrated graphics."
Error starting rviz2 from within container - libGL error: MESA-LOADER: failed to retrieve device information,D_kwDOAnasMc4ARJO5,2022-10-21T23:19:36Z,tleyden,1,Answered,DC_kwDOAnasMc4APHMm,tleyden,"
> I guess using source install should work, but the problem will be whether it uses NVIDIA GPU or not. Could you share the result of `nvidia-smi`?

Sure.  On the host:

```
$ nvidia-smi
Tue Oct 25 08:14:06 2022
+-----------------------------------------------------------------------------+
| NVIDIA-SMI 510.73.05    Driver Version: 510.73.05    CUDA Version: 11.6     |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|                               |                      |               MIG M. |
|===============================+======================+======================|
|   0  NVIDIA GeForce ...  Off  | 00000000:01:00.0 Off |                  N/A |
| N/A   36C    P8     5W /  N/A |     11MiB /  8192MiB |      0%      Default |
|                               |                      |                  N/A |
+-------------------------------+----------------------+----------------------+

+-----------------------------------------------------------------------------+
| Processes:                                                                  |
|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |
|        ID   ID                                                   Usage      |
|=============================================================================|
|    0   N/A  N/A      1409      G   /usr/lib/xorg/Xorg                  4MiB |
|    0   N/A  N/A      2328      G   /usr/lib/xorg/Xorg                  4MiB |
+-----------------------------------------------------------------------------+
```

From within a container:

```
$ docker run -it --rm --gpus all nvidia/cuda:11.0.3-base-ubuntu20.04 nvidia-smi
Tue Oct 25 15:16:27 2022
+-----------------------------------------------------------------------------+
| NVIDIA-SMI 510.73.05    Driver Version: 510.73.05    CUDA Version: 11.6     |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|                               |                      |               MIG M. |
|===============================+======================+======================|
|   0  NVIDIA GeForce ...  Off  | 00000000:01:00.0 Off |                  N/A |
| N/A   37C    P8     5W /  N/A |     11MiB /  8192MiB |      0%      Default |
|                               |                      |                  N/A |
+-------------------------------+----------------------+----------------------+

+-----------------------------------------------------------------------------+
| Processes:                                                                  |
|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |
|        ID   ID                                                   Usage      |
|=============================================================================|
+-----------------------------------------------------------------------------+
```

 @evshary if you have a chance, could you run the following commands from within a container to compare the behavior?  

```
$ apt-get install nvidia-prime
$ prime-select query
$ prime-select nvidia
```

Does it match up with the setting on your host?  

When I run these commands in a container created from `docker run -it --rm --gpus all nvidia/cuda:11.0.3-base-ubuntu20.04 /bin/bash`, I see the following output:

```
root@280122db79cd:/$ apt-get install nvidia-prime
... snip ...
root@280122db79cd:/$ prime-select query
on-demand
root@280122db79cd:/$ prime-select nvidia
Error: no integrated GPU detected.
```

whereas on my host `prime-select query` returns `nvidia`, but I'm not sure if `prime-select` is even expected to work within a container.

> No, I'd suggest you use `--devices /dev/dri` instead of `LIBGL_ALWAYS_SOFTWARE=1`. `LIBGL_ALWAYS_SOFTWARE=1` disables all the hardware acceleration, but `--devices /dev/dri` uses your Intel integrated graphics.

Ok thanks, makes sense.

"
Error starting rviz2 from within container - libGL error: MESA-LOADER: failed to retrieve device information,D_kwDOAnasMc4ARJO5,2022-10-21T23:19:36Z,tleyden,1,Answered,DC_kwDOAnasMc4APIPu,evshary,"@tleyden 
> Does it match up with the setting on your host?

I have the same result as yours. I guess `prime-select` might not be able to run in containers.

For the result of `nvidia-smi`, I think we can test whether the NVIDIA GPU works or not.
Can you run `glxinfo | grep vendor` and check whether there is NVIDIA string?
If not, I guess `prime-select` does not work. Follow the command [here](https://forums.developer.nvidia.com/t/prime-select-nvidia-selected-but-not-used/121108/2) to enable `gpu-manager` and try again.

If NVIDIA GPU can work well on the host but not the container, then you can try to run Autoware without docker and see whether it uses NVIDIA GPU or not (by `nvidia-smi`). If it runs successfully, then the problem might be in rocker.
"
Error starting rviz2 from within container - libGL error: MESA-LOADER: failed to retrieve device information,D_kwDOAnasMc4ARJO5,2022-10-21T23:19:36Z,tleyden,1,Answered,DC_kwDOAnasMc4APIWv,tleyden,"> Can you run `glxinfo | grep vendor` and check whether there is NVIDIA string?

Here's the output on the host:

```
$ glxinfo | grep vendor
server glx vendor string: SGI
client glx vendor string: Mesa Project and SGI
OpenGL vendor string: Intel
```

which is surprising since:

```
$ prime-select query
nvidia
```

I will try to enable the `gpu-manager` on the host to see if that helps.

On the container it also shows intel:

```
$ glxinfo | grep vendor
libGL error: MESA-LOADER: failed to retrieve device information
server glx vendor string: SGI
client glx vendor string: Mesa Project and SGI
OpenGL vendor string: Intel Open Source Technology Center
```

I think the `libGL error` could be fixed by passing in `--devices /dev/dri`

"
Error starting rviz2 from within container - libGL error: MESA-LOADER: failed to retrieve device information,D_kwDOAnasMc4ARJO5,2022-10-21T23:19:36Z,tleyden,1,Answered,DC_kwDOAnasMc4APIZ4,tleyden,"If I run `glxinfo` on the host with these env variables as [suggested in this nvidia forums post](https://forums.developer.nvidia.com/t/nvidia-xconfig-doesnt-do-what-i-want-it-to-nor-does-nvidia-settings/107883/7) then it shows nvidia as the vendor:

```
$ __NV_PRIME_RENDER_OFFLOAD=1 __GLX_VENDOR_LIBRARY_NAME=nvidia glxinfo | grep vendor
server glx vendor string: NVIDIA Corporation
client glx vendor string: NVIDIA Corporation
OpenGL vendor string: NVIDIA Corporation
```

but for some reason that only works on the host.  

In the container, it still shows `OpenGL vendor string: Intel Open Source Technology Center` even with the additional env variables."
Error starting rviz2 from within container - libGL error: MESA-LOADER: failed to retrieve device information,D_kwDOAnasMc4ARJO5,2022-10-21T23:19:36Z,tleyden,1,Answered,DC_kwDOAnasMc4APIb4,evshary,"Yes, it can work with `__NV_PRIME_RENDER_OFFLOAD=1 __GLX_VENDOR_LIBRARY_NAME=nvidia`.
Actually, you can run RViz with these environmental variables on the host, and it'll use NVIDIA GPU. (I've tried that and use `nvidia-smi` to check)
That means at least you can run Autoware with NVIDIA GPU on the host.
But for the container, I'm not really sure why it can't.

Maybe you can try to enable `gpu-manager` first to see whether it can solve the issue or not.

```bash
sudo systemctl enable gpu-manager
sudo prime-select nvidia
# reboot
```
"
Error starting rviz2 from within container - libGL error: MESA-LOADER: failed to retrieve device information,D_kwDOAnasMc4ARJO5,2022-10-21T23:19:36Z,tleyden,1,Answered,DC_kwDOAnasMc4APIeN,tleyden,"That's good to know, I will try running autoware from source instead of docker and compare the behavior.

I did try to enable the `gpu-manager` on the host, re-run `prime-select nvidia` and reboot, but it didn't seem to change anything. 

@evshary if you run `__NV_PRIME_RENDER_OFFLOAD=1 __GLX_VENDOR_LIBRARY_NAME=nvidia glxinfo | grep vendor` in a rocker/docker container, does it show nvidia or intel?  

Also did you run rviz2 inside a container or directly on a host?  If it was in a container, were you able to verify that it's using the gpu via `nvidia-smi`?"
Error starting rviz2 from within container - libGL error: MESA-LOADER: failed to retrieve device information,D_kwDOAnasMc4ARJO5,2022-10-21T23:19:36Z,tleyden,1,Answered,DC_kwDOAnasMc4APIvL,evshary,"@tleyden 
> if you run __NV_PRIME_RENDER_OFFLOAD=1 __GLX_VENDOR_LIBRARY_NAME=nvidia glxinfo | grep vendor in a rocker/docker container, does it show nvidia or intel?

While `prime-select on-demand`, it shows Intel, the same as yours.
While `prime-select nvidia`, it shows something like this:

```
server glx vendor string: NVIDIA Corporation
client glx vendor string: Mesa Project and SGI
OpenGL vendor string: Mesa/X.org
```

> Also did you run rviz2 inside a container or directly on a host? If it was in a container, were you able to verify that it's using the gpu via nvidia-smi?

That's a little tricky. `nvidia-smi` does not show the process in the containers by my side, but I can see that the memory and GPU usage changes while running RViz. So, I think it's using GPU.
"
Error starting rviz2 from within container - libGL error: MESA-LOADER: failed to retrieve device information,D_kwDOAnasMc4ARJO5,2022-10-21T23:19:36Z,tleyden,1,Answered,DC_kwDOAnasMc4APWBX,tleyden,"I was able to solve it by setting my host machine to default to the nvidia GPU driver.  

I'm running on a [system76](http://www.system76.com) machine, and they have their own version of nvidia prime-select.  I was able to run this on the host :

```
system76-power graphics nvidia
sudo reboot
```

which basically defaults every GUI app to run on the GPU.  Now when I start an autoware container with this command:

```
rocker --nvidia --x11 --user --volume $HOME/Development/autoware --volume $HOME/Development/autoware_map -- ghcr.io/autowarefoundation/autoware-universe:latest-cuda
```

and run `rviz2`, it is able to run without errors:

```
rviz2
QStandardPaths: XDG_RUNTIME_DIR not set, defaulting to '/tmp/runtime-tleyden'
[INFO] [1667247760.746904715] [rviz2]: Stereo is NOT SUPPORTED
[INFO] [1667247760.747021907] [rviz2]: OpenGl version: 3.1 (GLSL 1.4)
[INFO] [1667247760.767387690] [rviz2]: Stereo is NOT SUPPORTED
```

![2a04df98-90bf-4f09-962f-5ba21fdd00f2](https://user-images.githubusercontent.com/296876/199109295-d4ea77d1-61bf-412d-9802-1a74112fa009.png)

It doesn't show up on nvidia-smi for me either, but I verified it was using the GPU by running several `rviz2` instances and seeing the available GPU memory decrease each time.

I think this approach would work with nvidia prime-select as well, but I don't have a system to test it.

Thanks again @evshary for all the help!"
Do we have any tutorials to use VScode?,D_kwDOAnasMc4ARJ2R,2022-10-23T13:53:47Z,brkay54,3,Answered,,,
Do we have any tutorials to use VScode?,D_kwDOAnasMc4ARJ2R,2022-10-23T13:53:47Z,brkay54,3,Answered,DC_kwDOAnasMc4APFys,kenji-miyake,"@brkay54 Regarding C++ extensions, I think the following ones are mandatory.
- https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools
  - Or instead, https://marketplace.visualstudio.com/items?itemName=llvm-vs-code-extensions.vscode-clangd (But I'm not familiar with clangd.)
- https://marketplace.visualstudio.com/items?itemName=ms-iot.vscode-ros

And optionally, you can consider using the following utility extensions.
- https://marketplace.visualstudio.com/items?itemName=mine.cpplint
- https://marketplace.visualstudio.com/items?itemName=twxs.cmake
- https://marketplace.visualstudio.com/items?itemName=jeff-hykin.better-cpp-syntax
- https://marketplace.visualstudio.com/items?itemName=tdennis4496.cmantic
- https://marketplace.visualstudio.com/items?itemName=Tibotix.definition-autocompletion
- https://marketplace.visualstudio.com/items?itemName=cschlosser.doxdocgen
- https://marketplace.visualstudio.com/items?itemName=VisualStudioExptTeam.vscodeintellicode

For Git, I strongly recommend Git Graph, and optionally GitLens.
- https://marketplace.visualstudio.com/items?itemName=mhutchie.git-graph
- https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens

For other languages, I recommend the following ones (from what I've installed):
- https://marketplace.visualstudio.com/items?itemName=aaron-bond.better-comments
- https://marketplace.visualstudio.com/items?itemName=streetsidesoftware.code-spell-checker
- https://marketplace.visualstudio.com/items?itemName=redhat.ansible
- https://marketplace.visualstudio.com/items?itemName=alefragnani.Bookmarks
- https://marketplace.visualstudio.com/items?itemName=hediet.vscode-drawio
- https://marketplace.visualstudio.com/items?itemName=usernamehw.errorlens
- https://marketplace.visualstudio.com/items?itemName=exiasr.hadolint
- https://marketplace.visualstudio.com/items?itemName=wengerk.highlight-bad-chars
- https://marketplace.visualstudio.com/items?itemName=oderwat.indent-rainbow
- https://marketplace.visualstudio.com/items?itemName=yzhang.markdown-all-in-one
- https://marketplace.visualstudio.com/items?itemName=shd101wyy.markdown-preview-enhanced
- https://marketplace.visualstudio.com/items?itemName=bierner.markdown-mermaid
- https://marketplace.visualstudio.com/items?itemName=goessner.mdmath
- https://marketplace.visualstudio.com/items?itemName=DavidAnson.vscode-markdownlint
- https://marketplace.visualstudio.com/items?itemName=jebbs.plantuml
- https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode
- https://marketplace.visualstudio.com/items?itemName=shardulm94.trailing-spaces
- https://marketplace.visualstudio.com/items?itemName=redhat.vscode-xml
- https://marketplace.visualstudio.com/items?itemName=redhat.vscode-yaml

You can find other useful extensions by googling like ""VSCode best extensions"".
Please let us share if you find useful ones! :smile: "
Do we have any tutorials to use VScode?,D_kwDOAnasMc4ARJ2R,2022-10-23T13:53:47Z,brkay54,3,Answered,DC_kwDOAnasMc4APFy_,kenji-miyake,"@brkay54 Regarding configurations, you can create a sample by the `C/C++` extension.
![image](https://user-images.githubusercontent.com/31987104/197657846-87b5ccaf-6cd4-4bd5-b26c-56cd73103ec2.png)

```json
{
    ""configurations"": [
        {
            ""name"": ""Linux"",
            ""includePath"": [
                ""${workspaceFolder}/**""
            ],
            ""defines"": [],
            ""cStandard"": ""c17"",
            ""intelliSenseMode"": ""linux-clang-x64""
        }
    ],
    ""version"": 4
}
```

And edit as you like. A sample by me (please note that it's not actively maintained now) is https://github.com/kenji-miyake/vscode-utils/blob/3fbfa70988c117e34f51ba41e03aa59c83297a83/c_cpp_properties.json.

I think settings `compileCommands` is important.
To generate `compile_commands.json`, you need to add `--cmake-args -DCMAKE_EXPORT_COMPILE_COMMANDS=ON` like the following.

```bash
colcon build --symlink-install --cmake-args -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DCMAKE_BUILD_TYPE=Release
```"
Do we have any tutorials to use VScode?,D_kwDOAnasMc4ARJ2R,2022-10-23T13:53:47Z,brkay54,3,Answered,DC_kwDOAnasMc4APFzD,kenji-miyake,"@brkay54 For debugging, please refer to https://github.com/ms-iot/vscode-ros."
Do we have any tutorials to use VScode?,D_kwDOAnasMc4ARJ2R,2022-10-23T13:53:47Z,brkay54,3,Answered,DC_kwDOAnasMc4APcN7,brkay54,Thank you for answer!
2022-10-25 Simulation Working Group Meeting,D_kwDOAnasMc4ARLip,2022-10-25T18:37:23Z,WJaworskiRobotec,0,Unanswered,,,
How to use Zenoh in Autoware,D_kwDOAnasMc4ARLyb,2022-10-26T03:21:23Z,evshary,0,Unanswered,,,
How to send waypoints?,D_kwDOAnasMc4ARLyz,2022-10-26T03:32:29Z,MrOCW,1,Answered,,,
How to send waypoints?,D_kwDOAnasMc4ARLyz,2022-10-26T03:32:29Z,MrOCW,1,Answered,DC_kwDOAnasMc4APISD,takayuki5168,@MrOCW We don't officially support such a function.
How to send waypoints?,D_kwDOAnasMc4ARLyz,2022-10-26T03:32:29Z,MrOCW,1,Answered,DC_kwDOAnasMc4APISI,takayuki5168,"We know that waypoints-based driving is required by some developers. You can open an issue as help wanted if you want.
"
How to send waypoints?,D_kwDOAnasMc4ARLyz,2022-10-26T03:32:29Z,MrOCW,1,Answered,DC_kwDOAnasMc4AVFWR,okataka123,"@takayuki5168 
Excuse me for cutting in, I too would like the waypoint-based driving feature to divert waypoint files developed using Autoware.AI. Which repository [autoware](https://github.com/autowarefoundation/autoware) or [autoware.universe](https://github.com/autowarefoundation/autoware.universe) should I open an issue?"
Waypoint-based Driving,D_kwDOAnasMc4ARL2m,2022-10-26T05:33:34Z,MrOCW,2,Answered,,,
Waypoint-based Driving,D_kwDOAnasMc4ARL2m,2022-10-26T05:33:34Z,MrOCW,2,Answered,DC_kwDOAnasMc4APIbN,maxime-clem,"Possible very simple implementation of a `waypoint_manager` node.
- Keep a `waypoints_queue` and a `current_goal`.
- Receive goal poses and add them to the queue.
- If the `current_goal` is not set, set it to `waypoints_queue.pop()` and sends it to the current mission planner.
- If the `current_goal` is reached, unset it.

The issue with this approach is that it requires stopping at each waypoint. Currently, Autoware will disengage if the route is modified at runtime."
Waypoint-based Driving,D_kwDOAnasMc4ARL2m,2022-10-26T05:33:34Z,MrOCW,2,Answered,DC_kwDOAnasMc4APIf8,takayuki5168,"@MrOCW Thank you for your feature requests.
Current autoware strongly depends on the lanelet map. (e.g. behavior_path_planner's output has map information as lane_id, obstacle_avoidance_planner tries to make trajectory footprints inside the lane)

Is it okay for you to use a lanelet map as usual?"
Robot turns very drastically when it fails to follow the path,D_kwDOAnasMc4ARMB3,2022-10-26T10:19:50Z,MrOCW,1,Answered,,,
Robot turns very drastically when it fails to follow the path,D_kwDOAnasMc4ARMB3,2022-10-26T10:19:50Z,MrOCW,1,Answered,DC_kwDOAnasMc4APhM8,takayuki5168,"The issue seems to come from the less controlability. 
The tuning of control or vehicle looks not so good. Therefore, rather than fixing the issue when the vehicle fails to follow the path, how about tuning control and vehicle?

Seems angular velocity's limitation in control is incorrect or the model of conversion from steer angle to twist has error?"
Autonomy Software WG Meeting 2022/11/01,D_kwDOAnasMc4ARMCZ,2022-10-26T10:33:18Z,BonoloAWF,0,Unanswered,,,
Open AD Kit WG meeting 2022/10/26,D_kwDOAnasMc4ARMG5,2022-10-26T12:42:26Z,armaganarsln,0,Unanswered,,,
About the evaluator directory in autoware.universe,D_kwDOAnasMc4ARM8T,2022-10-27T09:35:38Z,yukkysaito,1,Answered,,,
About the evaluator directory in autoware.universe,D_kwDOAnasMc4ARM8T,2022-10-27T09:35:38Z,yukkysaito,1,Answered,DC_kwDOAnasMc4APLnl,kenji-miyake,I agree with @yukkysaito!
About the evaluator directory in autoware.universe,D_kwDOAnasMc4ARM8T,2022-10-27T09:35:38Z,yukkysaito,1,Answered,DC_kwDOAnasMc4APLns,YamatoAndo,I agree with you!
About the evaluator directory in autoware.universe,D_kwDOAnasMc4ARM8T,2022-10-27T09:35:38Z,yukkysaito,1,Answered,DC_kwDOAnasMc4APLoU,yukkysaito,"@djargot @WJaworskiRobotec 
Thanks for the PR. 👍 
How about this suggestion?"
About the evaluator directory in autoware.universe,D_kwDOAnasMc4ARM8T,2022-10-27T09:35:38Z,yukkysaito,1,Answered,DC_kwDOAnasMc4APOLr,djargot,"Thanks for your suggestion! 
We will move it to more appropriate place and create additional PR with proper readme as well.
We can handle it in the first half of November, as we are quite busy right now."
About the evaluator directory in autoware.universe,D_kwDOAnasMc4ARM8T,2022-10-27T09:35:38Z,yukkysaito,1,Answered,DC_kwDOAnasMc4APVaR,yukkysaito,@djargot No problem. Thank you :+1: 
About the evaluator directory in autoware.universe,D_kwDOAnasMc4ARM8T,2022-10-27T09:35:38Z,yukkysaito,1,Answered,DC_kwDOAnasMc4ARwI_,kminoda,@djargot Thank you for your work! Do you have any update on this?
"Behavior Planning container crashes, state stuck at PLANNING",D_kwDOAnasMc4ARNk7,2022-10-28T02:21:35Z,MrOCW,1,Answered,,,
"Behavior Planning container crashes, state stuck at PLANNING",D_kwDOAnasMc4ARNk7,2022-10-28T02:21:35Z,MrOCW,1,Answered,DC_kwDOAnasMc4APNvX,maxime-clem,"I am not able to reproduce the issue with the latest version of Autoware.

If the state is stuck at `PLANNING`, it means the trajectory is not being sent to the controller. If one of the planner is crashing like you reported this is the expected behavior.

My guess is that there is an issue in your current workspace. Maybe you need to fully rebuild the code (`rm install build -rf` before building again), or maybe some of the repositories are outdated (`rm src/* -rf && vcs import src < autoware.repos` before rebuilding)."
"Behavior Planning container crashes, state stuck at PLANNING",D_kwDOAnasMc4ARNk7,2022-10-28T02:21:35Z,MrOCW,1,Answered,DC_kwDOAnasMc4APN4M,maxime-clem,"I had not realized that the issue was happening on a real vehicle. I will investigate the issue.

> Launching planning.launch.xml on its own gives this error: [...] Failed to get parameter 'wheel_radius' [...]

This is because the `wheel_radius` and other vehicle related parameters are loaded globally in the [""root"" launch file](https://github.com/tier4/autoware_launch/blob/awf-latest/autoware_launch/launch/autoware.launch.xml#L17-L19) using the [global_parameter_loader](https://github.com/autowarefoundation/autoware.universe/tree/main/common/global_parameter_loader).
If you launch the `planning.launch.xml` on its own these parameters will be missing.

> Interestingly, looking at the logs from autoware.launch.xml: [...]

From this log file we see that the `behavior_planning_container` crashes but I cannot see any obvious reason. I will try to reproduce the crash with your bag and then debug the issue.
"
"Behavior Planning container crashes, state stuck at PLANNING",D_kwDOAnasMc4ARNk7,2022-10-28T02:21:35Z,MrOCW,1,Answered,DC_kwDOAnasMc4APN5l,MrOCW,"i will rebuild everything and give it another go, will update again"
"Behavior Planning container crashes, state stuck at PLANNING",D_kwDOAnasMc4ARNk7,2022-10-28T02:21:35Z,MrOCW,1,Answered,DC_kwDOAnasMc4APOCl,MrOCW,@maxime-clem rebuilt and it works now strangely. apologies for wasting your time!
Implementing a Collision Safety node,D_kwDOAnasMc4ARN3W,2022-10-28T10:18:13Z,MrOCW,1,Answered,,,
Implementing a Collision Safety node,D_kwDOAnasMc4ARN3W,2022-10-28T10:18:13Z,MrOCW,1,Answered,DC_kwDOAnasMc4APOhL,maxime-clem,"There are already 2 planning modules to avoid collisions:
- https://github.com/autowarefoundation/autoware.universe/tree/main/planning/obstacle_stop_planner
- https://github.com/autowarefoundation/autoware.universe/tree/main/planning/surround_obstacle_checker

However, they only check the planned trajectory and the immediate surrounding of ego.
The case you describe, where ego fails to accurately follow the planned path, is not covered by these modules.

One module that may be useful is the [obstacle_collision_checker](https://github.com/autowarefoundation/autoware.universe/tree/main/control/obstacle_collision_checker) which checks collisions with the predicted path calculated by the controller. Currently this module does not force ego to stop but publishes a diagnostic message to indicate an emergency. Maybe you can connect this diagnostic message with the emergency stop function of your robot ?

If you prefer the approach of Nav2, it should be possible to reuse its [collision monitor](https://navigation.ros.org/tutorials/docs/using_collision_monitor.html#collision-monitor-tutorial) in Autoware."
Control unstable and shaky,D_kwDOAnasMc4ARN3g,2022-10-28T10:24:58Z,MrOCW,1,Answered,,,
Control unstable and shaky,D_kwDOAnasMc4ARN3g,2022-10-28T10:24:58Z,MrOCW,1,Answered,DC_kwDOAnasMc4APOjw,maxime-clem,"There are instructions on [how to tune the parameters of the MPC used by the lateral controller](https://github.com/autowarefoundation/autoware.universe/blob/main/control/trajectory_follower/design/mpc_lateral_controller-design.md#how-to-tune-mpc-parameters).

If despite tuning you cannot get good tracking performance, you may be interesting in a new [Nonlinear MPC controller](https://github.com/autowarefoundation/autoware.universe/pull/2026) that is not yet finalized but can already be tested with Autoware.
"
[AWSIM] Obstacle stop by dust,D_kwDOAnasMc4ARN45,2022-10-28T10:58:58Z,shmpwk,2,Answered,,,
[AWSIM] Obstacle stop by dust,D_kwDOAnasMc4ARN45,2022-10-28T10:58:58Z,shmpwk,2,Answered,DC_kwDOAnasMc4APOjC,maxime-clem,"It is not clear from the picture, but if the points you circled are _higher_ than the height of the car, they should be safely ignored. This can be achieved by [filtering the obstacle pointcloud](https://github.com/autowarefoundation/autoware.universe/blob/main/sensing/pointcloud_preprocessor/docs/passthrough-filter.md) based on the `z` field.
Otherwise, if the tree leaves are at the level of the car, I think it is too dangerous to ignore them."
[AWSIM] Obstacle stop by dust,D_kwDOAnasMc4ARN45,2022-10-28T10:58:58Z,shmpwk,2,Answered,DC_kwDOAnasMc4APOsS,shmpwk,"@maxime-clem 
Thank you! You mean it is [crop box filter](https://github.com/autowarefoundation/autoware.universe/blob/main/sensing/pointcloud_preprocessor/docs/crop-box-filter.md) which removes the points above the car?
Even so, IMO, it is acceptable for ego vehicle to hit the tree leaves. We can encounter such a situation in our daily lives :thought_balloon: 
Also, ignoring larger chunks of points can prevent it from stopping at small insects like dragonflies."
[AWSIM] Obstacle stop by dust,D_kwDOAnasMc4ARN45,2022-10-28T10:58:58Z,shmpwk,2,Answered,DC_kwDOAnasMc4APPJy,maxime-clem,"Sorry my first idea was not good. Filtering points based on the car height would not work if the road is inclined.
By the way you are right about the filtering, a crop box filter is currently used (https://github.com/autowarefoundation/autoware.universe/blob/main/launch/tier4_perception_launch/config/obstacle_segmentation/ground_segmentation/elevation_map_parameters.yaml).

About small insects, I agree with you that they can be ignored. For tree leaves, they may be attached to branches that are hard to detect and which can slightly damage the vehicle so I believe they should be avoided.
Ideally option 1 is the best, but is very hard to implement correctly, so it may be a good idea to explore other solutions.
The risk with option 2 is that small dangerous objects will no longer be detected.

At the planning level we could ignore obstacle points based on the height difference between the closest trajectory point and the obstacle point. This would allow to not stop for obstacles that are higher than the car.
Alternatively, once the planner is able to do obstacle avoidance, the situation in the picture can be solved by driving around the obstacles."
[AWSIM] Obstacle stop by dust,D_kwDOAnasMc4ARN45,2022-10-28T10:58:58Z,shmpwk,2,Answered,DC_kwDOAnasMc4APd-l,shmpwk,"Thank you! After discussing internally, we decided to
1. adjust range of crop box filter 
2. consider other solution if 1 is not good."
[AWSIM] Obstacle stop by dust,D_kwDOAnasMc4ARN45,2022-10-28T10:58:58Z,shmpwk,2,Answered,DC_kwDOAnasMc4APd90,shmpwk,"This problem may comes from [this PR](https://github.com/autowarefoundation/autoware.universe/pull/1899/files).
We are going to change these parameters https://github.com/autowarefoundation/autoware.universe/blob/main/launch/tier4_perception_launch/config/obstacle_segmentation/ground_segmentation/ground_segmentation.param.yaml#L14-L15 .

Before:
```
max_z: 10.7 
min_z: -8.7
```

After
```
max_z: 4.5 # in case 50m continuous slope at 5deg
min_z: -4.5# in case 50m continuous slope at 5deg
```

We are also exploring fundamental solutions."
[AWSIM] Obstacle stop by dust,D_kwDOAnasMc4ARN45,2022-10-28T10:58:58Z,shmpwk,2,Answered,DC_kwDOAnasMc4APoEA,shmpwk,cc. @badai-nguyen 
[AWSIM] Obstacle stop by dust,D_kwDOAnasMc4ARN45,2022-10-28T10:58:58Z,shmpwk,2,Answered,DC_kwDOAnasMc4APqNv,shmpwk,"Reflected it by
https://github.com/tier4/autoware_launch/pull/543
https://github.com/autowarefoundation/autoware.universe/pull/2260"
Proposal for handling goal modification,D_kwDOAnasMc4ARP-M,2022-10-30T13:42:06Z,kosuke55,1,Answered,,,
Proposal for handling goal modification,D_kwDOAnasMc4ARP-M,2022-10-30T13:42:06Z,kosuke55,1,Answered,DC_kwDOAnasMc4APTiR,kosuke55,cc @yukkysaito @mitsudome-r @isamu-takagi 
Proposal for handling goal modification,D_kwDOAnasMc4ARP-M,2022-10-30T13:42:06Z,kosuke55,1,Answered,DC_kwDOAnasMc4APUWc,kosuke55,"@yukkysaito @mitsudome-r @isamu-takagi
Could you please check this proposal?"
Proposal for handling goal modification,D_kwDOAnasMc4ARP-M,2022-10-30T13:42:06Z,kosuke55,1,Answered,DC_kwDOAnasMc4APUyZ,isamu-takagi,It looks good. Let's discuss the details of the message change in the PR.
Proposal for handling goal modification,D_kwDOAnasMc4ARP-M,2022-10-30T13:42:06Z,kosuke55,1,Answered,DC_kwDOAnasMc4APnQy,kosuke55,"> update by adding uuid to existing type
[HADMapRoute](https://github.com/tier4/autoware_auto_msgs/blob/tier4/main/autoware_auto_planning_msgs/msg/HADMapRoute.idl)

It seems that the original auto's should not be changed.

So, I will make a PR that adds two messages(HAPMapRouteWithUUID, PosewithUUID) to https://github.com/autowarefoundation/autoware_msgs/tree/main/autoware_planning_msgs."
Proposal for handling goal modification,D_kwDOAnasMc4ARP-M,2022-10-30T13:42:06Z,kosuke55,1,Answered,DC_kwDOAnasMc4APnSm,kosuke55,"> update by adding uuid to existing type
[HADMapRoute](https://github.com/tier4/autoware_auto_msgs/blob/tier4/main/autoware_auto_planning_msgs/msg/HADMapRoute.idl)

For creating HADMapRouteWithUUID, I have 3 ideas.  Do you think which is better?

- Change auto's HADMapRoute to add uuid
- Include auto's message in autoware_msgs and create HADMapWithUUID.
- Port all necessary msgs of auto for HADMapRouteWithUUID to autowre_msgs"
Proposal for handling goal modification,D_kwDOAnasMc4ARP-M,2022-10-30T13:42:06Z,kosuke55,1,Answered,DC_kwDOAnasMc4APnT7,kosuke55,"I send two PRs
- PoseWithUUID
  - https://github.com/autowarefoundation/autoware_msgs/pull/42
- HADMapRoute ( add uuid)
  -  https://github.com/tier4/autoware_auto_msgs/pull/35
  - > Change auto's HADMapRoute to add uuid
  - please let me know if original msg should not be changed"
Proposal for handling goal modification,D_kwDOAnasMc4ARP-M,2022-10-30T13:42:06Z,kosuke55,1,Answered,DC_kwDOAnasMc4APnVo,yukkysaito,LGTM
Proposal for handling goal modification,D_kwDOAnasMc4ARP-M,2022-10-30T13:42:06Z,kosuke55,1,Answered,DC_kwDOAnasMc4APnZY,isamu-takagi,"HADMapRoute is already ported [here](https://github.com/autowarefoundation/autoware_msgs/tree/main/autoware_planning_msgs/msg) as VectorMapRoute, so you can use it. But, considering the implementation, it's easier to modify existing messages."
Proposal for handling goal modification,D_kwDOAnasMc4ARP-M,2022-10-30T13:42:06Z,kosuke55,1,Answered,DC_kwDOAnasMc4APnZy,isamu-takagi,The string type for uuid is more general because the route can be named and managed by applications.
Proposal for handling goal modification,D_kwDOAnasMc4ARP-M,2022-10-30T13:42:06Z,kosuke55,1,Answered,DC_kwDOAnasMc4APnhK,kosuke55,"OK, thanks I updated https://github.com/autowarefoundation/autoware_msgs/pull/42
- use string for uuid
- add uuid to VectorMapRoute instead of HADMapRoute"
Proposal for handling goal modification,D_kwDOAnasMc4ARP-M,2022-10-30T13:42:06Z,kosuke55,1,Answered,DC_kwDOAnasMc4APnoi,yukkysaito,"I prefer to use uuid type because `ros uuid` has a useful [library](https://github.com/ros-geographic-info/unique_identifier/blob/master/unique_id/include/unique_id/unique_id.h).
Also, uuid is used in perception not string.
"
2022-10-31 ODD working group weekly meeting (117),D_kwDOAnasMc4ARQa1,2022-10-31T09:47:22Z,Igata-ctrl,0,Unanswered,,,
About planning output topic name,D_kwDOAnasMc4ARQpt,2022-10-31T15:36:39Z,yukkysaito,2,Answered,,,
About planning output topic name,D_kwDOAnasMc4ARQpt,2022-10-31T15:36:39Z,yukkysaito,2,Answered,DC_kwDOAnasMc4APVcv,yukkysaito,"Now, number of subscribers is 10.
```
Type: autoware_auto_planning_msgs/msg/Trajectory

Publisher count: 1

Node name: motion_velocity_smoother
Node namespace: /planning/scenario_planning
Topic type: autoware_auto_planning_msgs/msg/Trajectory
Endpoint type: PUBLISHER
GID: 53.84.10.01.c3.9a.07.8d.da.2b.9a.83.00.00.1d.03.00.00.00.00.00.00.00.00
QoS profile:
  Reliability: RELIABLE
  Durability: VOLATILE
  Lifespan: 9223372036854775807 nanoseconds
  Deadline: 9223372036854775807 nanoseconds
  Liveliness: AUTOMATIC
  Liveliness lease duration: 9223372036854775807 nanoseconds

Subscription count: 10

Node name: awapi_awiv_adapter_node
Node namespace: /awapi
Topic type: autoware_auto_planning_msgs/msg/Trajectory
Endpoint type: SUBSCRIPTION
GID: 01.70.10.01.2a.db.90.ff.21.b8.e1.53.00.00.51.04.00.00.00.00.00.00.00.00
QoS profile:
  Reliability: RELIABLE
  Durability: VOLATILE
  Lifespan: 9223372036854775807 nanoseconds
  Deadline: 9223372036854775807 nanoseconds
  Liveliness: AUTOMATIC
  Liveliness lease duration: 9223372036854775807 nanoseconds

Node name: planning_error_monitor
Node namespace: /planning/planning_diagnostics
Topic type: autoware_auto_planning_msgs/msg/Trajectory
Endpoint type: SUBSCRIPTION
GID: 04.1f.10.01.31.a0.f4.c8.df.31.02.91.00.00.17.04.00.00.00.00.00.00.00.00
QoS profile:
  Reliability: RELIABLE
  Durability: VOLATILE
  Lifespan: 9223372036854775807 nanoseconds
  Deadline: 9223372036854775807 nanoseconds
  Liveliness: AUTOMATIC
  Liveliness lease duration: 9223372036854775807 nanoseconds

Node name: ad_service_state_monitor
Node namespace: /system
Topic type: autoware_auto_planning_msgs/msg/Trajectory
Endpoint type: SUBSCRIPTION
GID: 1c.be.10.01.6d.15.33.b8.d3.55.38.35.00.00.1e.04.00.00.00.00.00.00.00.00
QoS profile:
  Reliability: RELIABLE
  Durability: VOLATILE
  Lifespan: 9223372036854775807 nanoseconds
  Deadline: 9223372036854775807 nanoseconds
  Liveliness: AUTOMATIC
  Liveliness lease duration: 9223372036854775807 nanoseconds

Node name: iv_msgs
Node namespace: /autoware_api/internal
Topic type: autoware_auto_planning_msgs/msg/Trajectory
Endpoint type: SUBSCRIPTION
GID: 7a.9b.10.01.96.06.11.07.d0.3b.85.3d.00.00.23.04.00.00.00.00.00.00.00.00
QoS profile:
  Reliability: RELIABLE
  Durability: VOLATILE
  Lifespan: 9223372036854775807 nanoseconds
  Deadline: 9223372036854775807 nanoseconds
  Liveliness: AUTOMATIC
  Liveliness lease duration: 9223372036854775807 nanoseconds

Node name: topic_state_monitor_scenario_planning_trajectory
Node namespace: /system
Topic type: autoware_auto_planning_msgs/msg/Trajectory
Endpoint type: SUBSCRIPTION
GID: 7d.3f.10.01.72.74.70.da.f6.1b.fc.50.00.00.16.04.00.00.00.00.00.00.00.00
QoS profile:
  Reliability: RELIABLE
  Durability: VOLATILE
  Lifespan: 9223372036854775807 nanoseconds
  Deadline: 9223372036854775807 nanoseconds
  Liveliness: AUTOMATIC
  Liveliness lease duration: 9223372036854775807 nanoseconds

Node name: controller_node_exe
Node namespace: /control/trajectory_follower
Topic type: autoware_auto_planning_msgs/msg/Trajectory
Endpoint type: SUBSCRIPTION
GID: 95.20.10.01.01.15.18.44.ff.00.98.29.00.00.22.04.00.00.00.00.00.00.00.00
QoS profile:
  Reliability: RELIABLE
  Durability: VOLATILE
  Lifespan: 9223372036854775807 nanoseconds
  Deadline: 9223372036854775807 nanoseconds
  Liveliness: AUTOMATIC
  Liveliness lease duration: 9223372036854775807 nanoseconds

Node name: lane_departure_checker_node
Node namespace: /control/trajectory_follower
Topic type: autoware_auto_planning_msgs/msg/Trajectory
Endpoint type: SUBSCRIPTION
GID: 95.20.10.01.01.15.18.44.ff.00.98.29.00.00.76.04.00.00.00.00.00.00.00.00
QoS profile:
  Reliability: RELIABLE
  Durability: VOLATILE
  Lifespan: 9223372036854775807 nanoseconds
  Deadline: 9223372036854775807 nanoseconds
  Liveliness: AUTOMATIC
  Liveliness lease duration: 9223372036854775807 nanoseconds

Node name: operation_mode_transition_manager
Node namespace: /control
Topic type: autoware_auto_planning_msgs/msg/Trajectory
Endpoint type: SUBSCRIPTION
GID: 95.20.10.01.01.15.18.44.ff.00.98.29.00.00.d6.04.00.00.00.00.00.00.00.00
QoS profile:
  Reliability: RELIABLE
  Durability: VOLATILE
  Lifespan: 9223372036854775807 nanoseconds
  Deadline: 9223372036854775807 nanoseconds
  Liveliness: AUTOMATIC
  Liveliness lease duration: 9223372036854775807 nanoseconds

Node name: rviz2
Node namespace: /
Topic type: autoware_auto_planning_msgs/msg/Trajectory
Endpoint type: SUBSCRIPTION
GID: 9c.42.10.01.d8.aa.67.99.8c.d0.60.fe.00.00.5d.04.00.00.00.00.00.00.00.00
QoS profile:
  Reliability: RELIABLE
  Durability: VOLATILE
  Lifespan: 9223372036854775807 nanoseconds
  Deadline: 9223372036854775807 nanoseconds
  Liveliness: AUTOMATIC
  Liveliness lease duration: 9223372036854775807 nanoseconds

Node name: simple_planning_simulator
Node namespace: /simulation
Topic type: autoware_auto_planning_msgs/msg/Trajectory
Endpoint type: SUBSCRIPTION
GID: a0.34.10.01.94.26.b8.e7.53.3e.17.34.00.00.20.04.00.00.00.00.00.00.00.00
QoS profile:
  Reliability: RELIABLE
  Durability: VOLATILE
  Lifespan: 9223372036854775807 nanoseconds
  Deadline: 9223372036854775807 nanoseconds
  Liveliness: AUTOMATIC
  Liveliness lease duration: 9223372036854775807 nanoseconds
```"
About planning output topic name,D_kwDOAnasMc4ARQpt,2022-10-31T15:36:39Z,yukkysaito,2,Answered,DC_kwDOAnasMc4APVfL,yukkysaito,"Related PRs
- https://github.com/autowarefoundation/autoware.universe/pull/2184
- https://github.com/tier4/tier4_ad_api_adaptor/pull/76
- https://github.com/autowarefoundation/autoware_launch/pull/105"
About planning output topic name,D_kwDOAnasMc4ARQpt,2022-10-31T15:36:39Z,yukkysaito,2,Answered,DC_kwDOAnasMc4APWQG,kenji-miyake,"I think it's okay, but since some other topics have similar topic names, it would be great if we could have clear criteria for topic names and write design guidelines."
About planning output topic name,D_kwDOAnasMc4ARQpt,2022-10-31T15:36:39Z,yukkysaito,2,Answered,DC_kwDOAnasMc4APWQV,yukkysaito,Yes. I agree with you
About planning output topic name,D_kwDOAnasMc4ARQpt,2022-10-31T15:36:39Z,yukkysaito,2,Answered,DC_kwDOAnasMc4APYy5,yukkysaito,"After TIER IV internal discussion, it is good that if `mission planning` and `scenario planning` were to be adopted as subcomponents, it would be better to keep them.
- mission planning output : /planning/mission_planning/route
- scenario planning output : /planning/scenario_planning/trajectory

Reason 
- Since the route of mission planning is also used as an output of planning, it is strange that planning output has /planning/route and /planning/trajectory.
- When planning is developed and used as a replacement, it would appear that mission planning also needs to be implemented."
Traffic light Detection Question,D_kwDOAnasMc4ARQ3z,2022-10-31T22:13:51Z,EcotronCorp,0,Unanswered,,,
Set multiple goals (gaol -> goal),D_kwDOAnasMc4ARQ4u,2022-10-31T22:57:37Z,gurselturkeri,1,Answered,,,
Set multiple goals (gaol -> goal),D_kwDOAnasMc4ARQ4u,2022-10-31T22:57:37Z,gurselturkeri,1,Answered,DC_kwDOAnasMc4APWMu,satoshi-ota,"Hi @gurselturkeri 
Currently, autoware.universe does not support setting more than one goal at the same time. On the other hand, it supports multiple waypoint, and you can use and set waypoint in Psim.

![Screenshot from 2022-11-01 08-48-29](https://user-images.githubusercontent.com/44889564/199130364-131f2d2d-0c1e-43c3-b764-2120051082bd.png)

Additionaly, with [Fleet Management System](https://docs.web.auto/en/user-manuals/fleet-management-system/fms-console/introduction) (FMS), multiple goals can be registered in the FMS and the next goal can be published from it when the ego reaches the first goal."
Set multiple goals (gaol -> goal),D_kwDOAnasMc4ARQ4u,2022-10-31T22:57:37Z,gurselturkeri,1,Answered,DC_kwDOAnasMc4APWlO,gurselturkeri,"Well can I do that with python script? Let's say we have 3 goal point and we know these data for each 3 goal;





        self.msg.pose.position.x = 3814.866943359375
        self.msg.pose.position.y = 73819.09375
        self.msg.pose.position.z = 0.0

        self.msg.pose.orientation.x = 0.0
        self.msg.pose.orientation.y = 0.0
        self.msg.pose.orientation.z = -0.9689663392140794
        self.msg.pose.orientation.w = 0.2471927051311699`
We publish these data to _/planning/mission_planning/goal_ but it must be in order."
Set multiple goals (gaol -> goal),D_kwDOAnasMc4ARQ4u,2022-10-31T22:57:37Z,gurselturkeri,1,Answered,DC_kwDOAnasMc4APvWL,satoshi-ota,"Yes, I think you can do that. Autoware outputs current state as `/autoware/state` ([msg type](https://github.com/tier4/autoware_auto_msgs/blob/bd162589a837a2c1ecea943f80c035109e1ae594/autoware_auto_system_msgs/msg/AutowareState.idl#L1-L26)), so the next goal should be sent from your script when the state becomes `ARRIVED_GOAL`.

By the way, could you fix the title typo ? :pray:  (gaol -> goal)
"
Vehicle sometimes gets stuck when turning,D_kwDOAnasMc4ARQ6n,2022-11-01T00:27:16Z,tleyden,1,Answered,,,
Vehicle sometimes gets stuck when turning,D_kwDOAnasMc4ARQ6n,2022-11-01T00:27:16Z,tleyden,1,Answered,DC_kwDOAnasMc4APWPx,maxime-clem,"This is a known issue related to the drivable area (i.e., the space where the planned trajectory footprint must be contained).
In your picture, the planner generates a trajectory that exits the drivable area which forces ego to stop.
You are right that this can be solved by expanding the drivable area into the other lane, and there are parameters [here](https://github.com/autowarefoundation/autoware.universe/blob/main/launch/tier4_planning_launch/config/scenario_planning/lane_driving/behavior_planning/behavior_path_planner/drivable_area_expansion.param.yaml) to statically expand the drivable area in different contexts.
I also proposed some ideas to expand the drivable area dynamically here: https://github.com/orgs/autowarefoundation/discussions/2851"
Vehicle sometimes gets stuck when turning,D_kwDOAnasMc4ARQ6n,2022-11-01T00:27:16Z,tleyden,1,Answered,DC_kwDOAnasMc4APWT7,tleyden,"Thanks @maxime-clem, that answers my question!  

It looks like I'm on an older commit from Oct 21 that doesn't contain your [PR](https://github.com/autowarefoundation/autoware.universe/pull/1973/files).   I will try updating my workspace and rebuilding at some point to see if the behavior is improved.  

Which static parameters file should I modify to be automatically be picked up when running `ros2 launch autoware_launch planning_simulator.launch.xml`?
"
Vehicle sometimes gets stuck when turning,D_kwDOAnasMc4ARQ6n,2022-11-01T00:27:16Z,tleyden,1,Answered,DC_kwDOAnasMc4APWWB,maxime-clem,"Prior to my PR, the drivable area could be expanded by updating this file: https://github.com/autowarefoundation/autoware.universe/blob/c1e31268e5c9c6fb3546ef3cd37be2ac8d66ee0e/launch/tier4_planning_launch/config/scenario_planning/lane_driving/behavior_planning/behavior_path_planner/lane_following/lane_following.param.yaml
This is only for the ""lane driving"" context.

After my PR you can set the parameter for each context in this file: https://github.com/autowarefoundation/autoware.universe/blob/main/launch/tier4_planning_launch/config/scenario_planning/lane_driving/behavior_planning/behavior_path_planner/drivable_area_expansion.param.yaml"
Vehicle sometimes gets stuck when turning,D_kwDOAnasMc4ARQ6n,2022-11-01T00:27:16Z,tleyden,1,Answered,DC_kwDOAnasMc4APWcT,tleyden,"What are the units, meters?  Eg, `right_bound_offset: 0.5` means that it can go 0.5 meters across the lane boundary?"
Vehicle sometimes gets stuck when turning,D_kwDOAnasMc4ARQ6n,2022-11-01T00:27:16Z,tleyden,1,Answered,DC_kwDOAnasMc4APWcz,maxime-clem,"Yes, you are correct. "
Vehicle sometimes gets stuck when turning,D_kwDOAnasMc4ARQ6n,2022-11-01T00:27:16Z,tleyden,1,Answered,DC_kwDOAnasMc4ARjgf,cyhunblr,"> PR'den önce, sürülebilir alan şu dosya güncellenerek genişletilebilir: [https://github.com/autowarefoundation/autoware.universe/blob/c1e31268e5c9c6fb3546ef3cd37be2ac8d66ee0e/launch/tier4_planning_launch/config/scenario_planning/lane_driving/behavior_planning/behavior_path_planning/behavior_path_planner/ lane_following.param.yaml](https://github.com/autowarefoundation/autoware.universe/blob/c1e31268e5c9c6fb3546ef3cd37be2ac8d66ee0e/launch/tier4_planning_launch/config/scenario_planning/lane_driving/behavior_planning/behavior_path_planner/lane_following/lane_following.param.yaml) Bu yalnızca ""şeritte sürüş"" bağlamı içindir.
> 
> PR'ımdan sonra, bu dosyadaki her bağlam için parametreyi ayarlayabilirsiniz: [https://github.com/autowarefoundation/autoware.universe/blob/main/launch/tier4_planning_launch/config/scenario_planning/lane_driving/behavior_planning/behavior_path_planner/drivable_area_expansion.param .yaml](https://github.com/autowarefoundation/autoware.universe/blob/main/launch/tier4_planning_launch/config/scenario_planning/lane_driving/behavior_planning/behavior_path_planner/drivable_area_expansion.param.yaml)
Hi again, did you check second link.
"
Autoware docker image build fail for open ad kit,D_kwDOAnasMc4ARQ-J,2022-11-01T03:20:20Z,jason914,3,Answered,,,
Autoware docker image build fail for open ad kit,D_kwDOAnasMc4ARQ-J,2022-11-01T03:20:20Z,jason914,3,Answered,DC_kwDOAnasMc4APWaw,kenji-miyake,"Thank you for reporting this.

> error: failed to solve: failed to load cache key: invalid not-modified ETag: ""983d456a492957dff61261d2e42a15b3""

Hmm, I've never seen this error message. :thinking: 
Related?: https://github.com/moby/buildkit/issues/2832

@jason914 What is your Docker version? Please let me know the output of `docker version`."
Autoware docker image build fail for open ad kit,D_kwDOAnasMc4ARQ-J,2022-11-01T03:20:20Z,jason914,3,Answered,DC_kwDOAnasMc4APWff,jason914,"aadp32-ubuntu-20-04-4:~$ docker version
Client: Docker Engine - Community
 Version:           20.10.9
 API version:       1.41
 Go version:        go1.16.8
 Git commit:        c2ea9bc
 Built:             Mon Oct  4 16:08:32 2021
 OS/Arch:           linux/arm64
 Context:           default
 Experimental:      true

Server: Docker Engine - Community
 Engine:
  Version:          20.10.9
  API version:      1.41 (minimum version 1.12)
  Go version:       go1.16.8
  Git commit:       79ea9d3
  Built:            Mon Oct  4 16:06:44 2021
  OS/Arch:          linux/arm64
  Experimental:     false
 containerd:
  Version:          1.6.9
  GitCommit:        1c90a442489720eec95342e1789ee8a5e1b9536f
 runc:
  Version:          1.1.4
  GitCommit:        v1.1.4-0-g5fd4c4d
 docker-init:
  Version:          0.19.0
  GitCommit:        de40ad0

"
Autoware docker image build fail for open ad kit,D_kwDOAnasMc4ARQ-J,2022-11-01T03:20:20Z,jason914,3,Answered,DC_kwDOAnasMc4APWiF,kenji-miyake,"@jason914 Hmm, a little old (1 year ago).
https://docs.docker.com/engine/release-notes/#20109

Would it be possible for you to try updating it?

My version:

```console
❯ docker version
Client: Docker Engine - Community
 Version:           20.10.21
 API version:       1.41
 Go version:        go1.18.7
 Git commit:        baeda1f
 Built:             Tue Oct 25 18:01:58 2022
 OS/Arch:           linux/amd64
 Context:           default
 Experimental:      true

Server: Docker Engine - Community
 Engine:
  Version:          20.10.21
  API version:      1.41 (minimum version 1.12)
  Go version:       go1.18.7
  Git commit:       3056208
  Built:            Tue Oct 25 17:59:49 2022
  OS/Arch:          linux/amd64
  Experimental:     false
 containerd:
  Version:          1.6.9
  GitCommit:        1c90a442489720eec95342e1789ee8a5e1b9536f
 runc:
  Version:          1.1.4
  GitCommit:        v1.1.4-0-g5fd4c4d
 docker-init:
  Version:          0.19.0
  GitCommit:        de40ad0
```"
Autoware docker image build fail for open ad kit,D_kwDOAnasMc4ARQ-J,2022-11-01T03:20:20Z,jason914,3,Answered,DC_kwDOAnasMc4APWn8,jason914,"I updated to docker version 20.10.21.
I git clone again the [code](https://github.com/autowarefoundation/autoware/tree/openadkit-containers).
But it also have same error when I build the docker image.
Following is the error message and docker version.
[autoware-docker-image-build-fail-v3.txt](https://github.com/autowarefoundation/autoware/files/9907656/autoware-docker-image-build-fail-v3.txt)

Could you give suggestion about the error?
Thank you very much."
Autoware docker image build fail for open ad kit,D_kwDOAnasMc4ARQ-J,2022-11-01T03:20:20Z,jason914,3,Answered,DC_kwDOAnasMc4APWvM,jason914,"@kenji-miyake I used command ""docker system prune"".
It fixed ""invalid not-modified ETag"" problem.
But it have another problem when I build docker image.
Following is the error log.
[autoware-docker-image-build-fail-v4.txt](https://github.com/autowarefoundation/autoware/files/9908101/autoware-docker-image-build-fail-v4.txt)
Could you give me suggestion?
Thank you very much."
Autoware docker image build fail for open ad kit,D_kwDOAnasMc4ARQ-J,2022-11-01T03:20:20Z,jason914,3,Answered,DC_kwDOAnasMc4APW_d,kenji-miyake,"@jason914 What is the commit hash of autoware? I guess it's old because `Upgrade pyOpenSSL` isn't used anymore.
https://github.com/autowarefoundation/autoware/blob/62399f5da8ec2e9a0168907f222507f05d83254b/ansible/roles/plotjuggler/tasks/main.yaml"
Autoware docker image build fail for open ad kit,D_kwDOAnasMc4ARQ-J,2022-11-01T03:20:20Z,jason914,3,Answered,DC_kwDOAnasMc4APYgv,jason914,"@kenji-miyake Yes, you are right. The [openadkit-container branch](https://github.com/autowarefoundation/autoware/blob/openadkit-containers/ansible/roles/plotjuggler/tasks/main.yaml) reserve to use pyOpenSSL.
It fix pyOpenSSL problem after I following your [suggestion](https://github.com/autowarefoundation/autoware/blob/62399f5da8ec2e9a0168907f222507f05d83254b/ansible/roles/plotjuggler/tasks/main.yaml).
But it have another new problem.
Following is the error message.
[autoware-docker-image-build-fail-v5.txt](https://github.com/autowarefoundation/autoware/files/9915289/autoware-docker-image-build-fail-v5.txt)
Could you give me suggestion?
Thank you very much.

"
Autoware docker image build fail for open ad kit,D_kwDOAnasMc4ARQ-J,2022-11-01T03:20:20Z,jason914,3,Answered,DC_kwDOAnasMc4APbI_,kenji-miyake,Seems to be still old. Please update it to use https://github.com/autowarefoundation/autoware/tree/main.
Autoware docker image build fail for open ad kit,D_kwDOAnasMc4ARQ-J,2022-11-01T03:20:20Z,jason914,3,Answered,DC_kwDOAnasMc4APYnv,evshary,"Might be a little off-topic, but I'm curious what is the purpose of ""openadkit-container"" branch. Is it only used by Open AD Kit?
I've already tested building ""main"" branch on my AVA Developer Platform, and I'm able to generate images successfully.
I guess ""openadkit-container"" branch might need to be updated since it's a little outdated.

By the way, In the current Open AD Kit tutorial, it's using the image ""ghcr.io/autowarefoundation/autoware-universe:galactic-20220728-prebuilt-cuda"". Maybe you can use this directly instead of building one by yourself."
Autoware docker image build fail for open ad kit,D_kwDOAnasMc4ARQ-J,2022-11-01T03:20:20Z,jason914,3,Answered,DC_kwDOAnasMc4APZhQ,liuXinGangChina,"Totally agree with you @evshary . 
Amigo， @jason914  Please reference open ad kit’s online guide to quickly setup your autoware dev( in case you are familiar with docker) -- [https://github.com/autowarefoundation/open-ad-kit-docs/blob/main/docs/version-2.0/start-guide/installation/index.md](url).
And of course, there is un alternative way to get there.( download the code -> install ros2 -->install dependency manually--> build the code with colcon). It will take your more time but give you more fun at the same time.

Welcome to Autoware's big family, happy hacking!"
Autoware docker image build fail for open ad kit,D_kwDOAnasMc4ARQ-J,2022-11-01T03:20:20Z,jason914,3,Answered,DC_kwDOAnasMc4APbKz,jason914,"@evshary I downloaded the docker image ""ghcr.io/autowarefoundation/autoware-universe:galactic-20220728-prebuilt-cuda"" after follow your suggestion. Thank you about your information. 
@liuXinGangChina I will follow the version 2.0 of start-guide to install my platform again. Thank you very much. "
Running AWSim inside docker container,D_kwDOAnasMc4ARRBc,2022-11-01T05:34:40Z,tleyden,1,Answered,,,
Running AWSim inside docker container,D_kwDOAnasMc4ARRBc,2022-11-01T05:34:40Z,tleyden,1,Answered,DC_kwDOAnasMc4APqUt,evshary,"Although it might be a little late to your question, I'm just able to run Autoware in docker and with AWSIM on the host.
However, the docker container I used here is the prebuilt one. I have some trouble while using the container built by myself.

1st terminal:

```bash
./AWSIM.x86_64
```

2nd terminal:

```bash
# Download nishishinjuku_autoware_map to ~/autoware_map
rocker --x11 --user --privileged --net host --volume $HOME/autoware_map -- ghcr.io/autowarefoundation/autoware-universe:latest-prebuilt-cuda
ros2 launch autoware_launch e2e_simulator.launch.xml vehicle_model:=sample_vehicle sensor_model:=awsim_sensor_kit map_path:=$HOME/autoware_map/nishishinjuku_autoware_map/
```"
Running AWSim inside docker container,D_kwDOAnasMc4ARRBc,2022-11-01T05:34:40Z,tleyden,1,Answered,DC_kwDOAnasMc4APr6a,tleyden,Ah good to know.  I guess the network is automatically bridged and they can somehow communicate
Running AWSim inside docker container,D_kwDOAnasMc4ARRBc,2022-11-01T05:34:40Z,tleyden,1,Answered,DC_kwDOAnasMc4APsFV,evshary,"I added `--privileged --net host` here, but I can only run the prebuilt Autoware container successfully.
Maybe I'll take a look at what the difference between mine and the prebuilt one is."
"The initial pose orientation is 90 degree rotation, need some help",D_kwDOAnasMc4ARRF_,2022-11-01T08:08:55Z,ydcttt,4,Answered,,,
"The initial pose orientation is 90 degree rotation, need some help",D_kwDOAnasMc4ARRF_,2022-11-01T08:08:55Z,ydcttt,4,Answered,DC_kwDOAnasMc4APZEq,malayjerdi,"I have the same issue
![Screenshot from 2022-11-02 10-03-08](https://user-images.githubusercontent.com/7192123/199449590-ba040e2e-0b28-491b-8a4c-c51b1ab413e2.png)
"
"The initial pose orientation is 90 degree rotation, need some help",D_kwDOAnasMc4ARRF_,2022-11-01T08:08:55Z,ydcttt,4,Answered,DC_kwDOAnasMc4APZd-,liuXinGangChina,"@ydcttt @farhang760 From the image you presented, It is obviously that ndt converged. Vehicle's direction is wrong because the tf between base_link and lidar is wrong. I am 90% sure that you use the default sensor configuration yaml. Please dig into the code and change the yaw bias parameters in the yaml file.
Welcome to Autoware‘s big family, happy hacking!

从你的图片可以看出来，你的ndt定位已经成功了，只是车辆朝向显示不对。90%的概率是因为你使用了autoware默认的传感器外参，请认真的阅读代码，定位到lidar外参的yaml配置文件然后修改yaw的偏移值即可解决这个问题。
欢迎加入Autoware的大家庭，happy hacking!"
"The initial pose orientation is 90 degree rotation, need some help",D_kwDOAnasMc4ARRF_,2022-11-01T08:08:55Z,ydcttt,4,Answered,DC_kwDOAnasMc4APbgK,msanchezvicom,"Hi @ydcttt @farhang760 , 

How did you achieve the integration between Autoware Universe and Carla 0.9.13? I am trying to do that considering the official carla ros bridge package but I am facing some troubles. 

Thank you :) "
"The initial pose orientation is 90 degree rotation, need some help",D_kwDOAnasMc4ARRF_,2022-11-01T08:08:55Z,ydcttt,4,Answered,DC_kwDOAnasMc4APbhD,hatem-darweesh,"This is the missing part from the CARLA-Autoware bridge Tutorials. 
You need to modify the calibration files: 
https://github.com/ZATiTech/open_planner/issues/2#issuecomment-1256142611"
How to add traffic lights to lanelet2 map?,D_kwDOAnasMc4ARRKf,2022-11-01T10:07:47Z,gaokao123,1,Answered,,,
How to add traffic lights to lanelet2 map?,D_kwDOAnasMc4ARRKf,2022-11-01T10:07:47Z,gaokao123,1,Answered,DC_kwDOAnasMc4APYX7,satoshi-ota,"Hi @gaokao123 

There is [documentation](https://github.com/autowarefoundation/autoware_common/blob/main/tmp/lanelet2_extension/docs/lanelet2_format_extension.md) about lanelet format, could you see that ?"
How to add traffic lights to lanelet2 map?,D_kwDOAnasMc4ARRKf,2022-11-01T10:07:47Z,gaokao123,1,Answered,DC_kwDOAnasMc4APYgZ,gaokao123,"yes, I have read this document, but is there any tools to add traffic ligths to the lanelet map? I open the map with vector_map_builder, but there are some mistakes:
![image](https://user-images.githubusercontent.com/111047949/199377857-eaf0c6f0-a7f2-4a08-9c9b-79ea57e5e0a6.png)
my lanelet map is from  [carla](https://bitbucket.org/carla-simulator/autoware-contents/src/master/maps/vector_maps/lanelet2/)"
How to add traffic lights to lanelet2 map?,D_kwDOAnasMc4ARRKf,2022-11-01T10:07:47Z,gaokao123,1,Answered,DC_kwDOAnasMc4APYml,satoshi-ota,"hmm... :thinking: 
I don't know abort the 'carla lanelet map' format. Were you able to run autoware using that map?"
How to add traffic lights to lanelet2 map?,D_kwDOAnasMc4ARRKf,2022-11-01T10:07:47Z,gaokao123,1,Answered,DC_kwDOAnasMc4APYxr,gaokao123,"yes,  I am able to run autoware.universe using that map. Now, I'm trying use Autoware.universe traffic light recognition in carla"
How to add traffic lights to lanelet2 map?,D_kwDOAnasMc4ARRKf,2022-11-01T10:07:47Z,gaokao123,1,Answered,DC_kwDOAnasMc4APuWV,satoshi-ota,"Sorry for late reply. I ask VMB developping team, please wait for it..."
How to add traffic lights to lanelet2 map?,D_kwDOAnasMc4ARRKf,2022-11-01T10:07:47Z,gaokao123,1,Answered,DC_kwDOAnasMc4APwwI,urayuto,"The reason for the loading error is that the map spans multiple MGRS and does not have MGRS in the map.

In order to load this map in VMB, you need to add the tag ""mgrs_code"" to all nodes. You will need to check the correct mgrs_code yourself, but for example, if it is 31NAA, the node will be as follows.

```
  <node id=""1002"" visible=""true"" version=""1"" lat=""-0.0018001081"" lon=""-0.00008482343"">
    <tag k=""mgrs_code"" v=""31NAA""/>
    <tag k=""ele"" v=""0.000000"" />
    <tag k=""local_x"" v=""-9.451601"" />
    <tag k=""local_y"" v=""-199.240942"" />
  </node>
```

Note, however, that when ""mgrs_code"" is added, latitude and longitude are recalculated from it and local_x and local_y, so if local_x and local_y are not correct values, latitude and longitude will also change to incorrect values. The correct local_x and local_y values are those that have the origin of the ""mgrs_code"" set to (0, 0). (For example, if MGRS is 31NAA, the position of the origin is 31NAA0000000000.)"
How to add traffic lights to lanelet2 map?,D_kwDOAnasMc4ARRKf,2022-11-01T10:07:47Z,gaokao123,1,Answered,DC_kwDOAnasMc4AP_Ek,satoshi-ota,"Hi @gaokao123 
Do you still have any problems?"
How to add traffic lights to lanelet2 map?,D_kwDOAnasMc4ARRKf,2022-11-01T10:07:47Z,gaokao123,1,Answered,DC_kwDOAnasMc4AP_ib,gaokao123,"@satoshi-ota 
Thank you for reply,there is no problem, and I will try it in the way above, thanks a lot"
Extracting functions in utils_func.cpp from ndt_scan_matcher as a library called localization_utils,D_kwDOAnasMc4ARRrr,2022-11-02T01:37:26Z,RyuYamamoto,1,Answered,,,
Extracting functions in utils_func.cpp from ndt_scan_matcher as a library called localization_utils,D_kwDOAnasMc4ARRrr,2022-11-02T01:37:26Z,RyuYamamoto,1,Answered,DC_kwDOAnasMc4APYeD,kminoda,"I also think that it would be better to move the functions in `utils_func.cpp` to the other package. 
But maybe it doesn't necessarily have to be `localization_utils` package. Since the functions in the file seems very generic and applicable to other modules, I think adding those functions in `tier4_autoware_utils` may also be a choice."
Extracting functions in utils_func.cpp from ndt_scan_matcher as a library called localization_utils,D_kwDOAnasMc4ARRrr,2022-11-02T01:37:26Z,RyuYamamoto,1,Answered,DC_kwDOAnasMc4APYlz,RyuYamamoto,"thanks for the suggestion!
It certainly sounds like a good idea to move to tier4_autoware_utils.

I will think about proposal."
[proposal] Migrating ndt_omp into Autoware Universe,D_kwDOAnasMc4ARRr1,2022-11-02T01:43:57Z,kminoda,1,Answered,,,
[proposal] Migrating ndt_omp into Autoware Universe,D_kwDOAnasMc4ARRr1,2022-11-02T01:43:57Z,kminoda,1,Answered,DC_kwDOAnasMc4APY9p,kenji-miyake,"> The implementation would include a large modification in ndt_omp package
> would also be highly dependent on Autoware Universe

@kminoda Could you explain these changes more concretely? Without that information, we can't judge whether it's appropriate to manage the package in `autoware.universe`.
I feel it's weird that `ndt_omp`, which is a library, depends on `autoware.universe`, which is a set of applications."
[proposal] Migrating ndt_omp into Autoware Universe,D_kwDOAnasMc4ARRr1,2022-11-02T01:43:57Z,kminoda,1,Answered,DC_kwDOAnasMc4APZAY,kminoda,"Thank you for the opinion! After re-thinking internally, we've decided not to do the migration for now."
Open AD Kit WG meeting 2022/11/02,D_kwDOAnasMc4ARSGB,2022-11-02T13:09:02Z,HamburgDave,0,Unanswered,,,
Q. Running AWSIM and Autoware with two machines,D_kwDOAnasMc4ARSMH,2022-11-02T14:56:58Z,sethut1224,4,Answered,,,
Q. Running AWSIM and Autoware with two machines,D_kwDOAnasMc4ARSMH,2022-11-02T14:56:58Z,sethut1224,4,Answered,DC_kwDOAnasMc4APtZd,HansRobo,"@sethut1224  Thank you for having interest in AWSIM!
But I'm sorry, I don't know how to do it.

@mackierx111 Could you please reply to @.sethut1224 ?"
Q. Running AWSIM and Autoware with two machines,D_kwDOAnasMc4ARSMH,2022-11-02T14:56:58Z,sethut1224,4,Answered,DC_kwDOAnasMc4APwnc,mackierx111,"@sethut1224 
yes. It can run on two machines.
We recommend that you do not set the LOCAL_HOST_ONLY option and connect the two PCs with ethernet cables.
ROS2 environment variables and *dds_config.xml must be set appropriately.
This is a video my friend made.
https://www.youtube.com/watch?v=L2eVASlkblU"
Q. Running AWSIM and Autoware with two machines,D_kwDOAnasMc4ARSMH,2022-11-02T14:56:58Z,sethut1224,4,Answered,DC_kwDOAnasMc4AYJoH,Autostone-c,"Recently, I also ran autoware(awsim-stable branch) on Orin and conducted joint debugging with the AWSIM simulation platform on another x86, but running autoware on Orin was too laggy and too laggy, and path planning and traffic light recognition were basically impossible. Where should I optimize this performance？"
Q. Running AWSIM and Autoware with two machines,D_kwDOAnasMc4ARSMH,2022-11-02T14:56:58Z,sethut1224,4,Answered,DC_kwDOAnasMc4AYK_g,yuasabe,"When running Autoware and AWSIM on separate machines connected via an Ethernet cable, you would need to set up the `*dds_config.xml` file correctly with the `NetworkInterfaceAddress` of the Ethernet adapter explicitly specified. An example of it is shown in the answer below.

Otherwise, if both the Autoware and AWSIM machines are connected on the same Wi-Fi network, for example, they will both try to send ROS 2 data over the lossy Wi-Fi connection. Hence, the ROS 2 messages from AWSIM will be very laggy, making the performance of Autoware seem slow."
Q. Running AWSIM and Autoware with two machines,D_kwDOAnasMc4ARSMH,2022-11-02T14:56:58Z,sethut1224,4,Answered,DC_kwDOAnasMc4AYLr7,Autostone-c,"i will try it？But I have observed that when autoware runs on Orin, the CPU usage of each node is still very high. Have you ever encountered it?"
Q. Running AWSIM and Autoware with two machines,D_kwDOAnasMc4ARSMH,2022-11-02T14:56:58Z,sethut1224,4,Answered,DC_kwDOAnasMc4AYMGn,Autostone-c,"hi，i have made adjustments according to your configuration file, but it still does not work. It is still too laggy. My Orin is ubuntu 20.04, but I am running autoware (awsim-stable branch). I am wondering if it is due to some dependent libraries being unusable? Do you have any good suggestions for this?"
Q. Running AWSIM and Autoware with two machines,D_kwDOAnasMc4ARSMH,2022-11-02T14:56:58Z,sethut1224,4,Answered,DC_kwDOAnasMc4APwyQ,yuasabe,"Thank you @mackierx111 for introducing the video.
Just for reference, I connected the two PCs directly with an Ethernet cable and created two files in each of the two computers: `setup_source` and `cyclonedds.xml`.

`setup_source` file:
```
export CYCLONEDDS_URI=file://$PWD/cyclonedds.xml
export ROS_DOMAIN_ID=1
```

`cyclonedds.xml` file:
Make sure to specify your network interface here.
```xml
<?xml version=""1.0"" encoding=""UTF-8"" ?>
<CycloneDDS xmlns=""https://cdds.io/config"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xsi:schemaLocation=""https://cdds.io/config https://raw.githubusercontent.com/eclipse-cyclonedds/cyclonedds/master/etc/cyclonedds.xsd"">
    <Domain id=""any"">
        <General>
            <NetworkInterfaceAddress>enp3s0</NetworkInterfaceAddress>
        </General>
    </Domain>
</CycloneDDS>
```

Then, I ran the following commands before running Autoware and AWSIM on each of the computers.
```
source setup_source
```

In my case, Autoware and AWSIM ran so much more smoothly (with a higher FPS) than before with two computers so I think I will continue using this setup!"
Q. Running AWSIM and Autoware with two machines,D_kwDOAnasMc4ARSMH,2022-11-02T14:56:58Z,sethut1224,4,Answered,DC_kwDOAnasMc4AYN-a,Autostone-c,hi，have you done this？Orin（autoware）+ x86（awsim）
Q. Running AWSIM and Autoware with two machines,D_kwDOAnasMc4ARSMH,2022-11-02T14:56:58Z,sethut1224,4,Answered,DC_kwDOAnasMc4Aa9uj,whbcumtb,"I encountered the same performance issue when I run autoware on Orin and AWSIM on x86, and I will try the answer from [yuasabe](https://github.com/yuasabe). Thanks in advance."
Autonomy Software WG Meeting 2022/11/08,D_kwDOAnasMc4ARSoR,2022-11-02T22:25:41Z,BonoloAWF,0,Unanswered,,,
Error building system-monitor package,D_kwDOAnasMc4ARSqG,2022-11-02T23:46:39Z,tleyden,1,Answered,,,
Error building system-monitor package,D_kwDOAnasMc4ARSqG,2022-11-02T23:46:39Z,tleyden,1,Answered,DC_kwDOAnasMc4APbES,tleyden,"### Update - fixed

I realized I was sharing the `autoware` directory between my host and docker container, so there may have been some residue from the docker container build that was causing issues.  

After doing a clean and then a rebuild, the problem seems to have gone away:

```
$ rm -rf build/ install/ log/
$ colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release
```

and the `system_monitor` package succeeds now.  

I think going forward I will use separate `autoware` directories for source install vs docker install so there is no interference."
Is Obstacle avoidance in autoware.ai 1.14.0 version possible ?,D_kwDOAnasMc4ARTQc,2022-11-03T14:49:28Z,PaGu3,2,Answered,,,
Is Obstacle avoidance in autoware.ai 1.14.0 version possible ?,D_kwDOAnasMc4ARTQc,2022-11-03T14:49:28Z,PaGu3,2,Answered,DC_kwDOAnasMc4APhMY,takayuki5168,"@PaGu3 (I'm sorry not to answer the question)
FYI: AWF will officially stop the support of autoware.ai in less than two month.
https://github.com/Autoware-AI
I recommend you using autoware.universe instead.

If there are some functions which autoware.ai can but autoware.universe cannot, please let us know via issue or discussion."
Is Obstacle avoidance in autoware.ai 1.14.0 version possible ?,D_kwDOAnasMc4ARTQc,2022-11-03T14:49:28Z,PaGu3,2,Answered,DC_kwDOAnasMc4APkxy,TakaHoribe,"The avoidance path planning is based on the OccupancyGrid. Please make sure the OccupancyGrid is published and the `astar_avoid` receives it.
https://www.youtube.com/watch?v=o_WXfPh9JKA"
Is Obstacle avoidance in autoware.ai 1.14.0 version possible ?,D_kwDOAnasMc4ARTQc,2022-11-03T14:49:28Z,PaGu3,2,Answered,DC_kwDOAnasMc4APlvV,PaGu3,"Hi @TakaHoribe , thanks for the reply but i want to mention that I'm generating OccupancyGrid from costmap_generator and is received from  `astar_avoid` so that's the reason it stopping for an obstacle but it's indefinite till obstacle disappears but i need to achieve avoidance."
Path snaps back to lane although vehicle is not in lane,D_kwDOAnasMc4ARTyX,2022-11-04T07:30:57Z,MrOCW,1,Answered,,,
Path snaps back to lane although vehicle is not in lane,D_kwDOAnasMc4ARTyX,2022-11-04T07:30:57Z,MrOCW,1,Answered,DC_kwDOAnasMc4APd2z,takayuki5168,"@MrOCW I don't understand the situation well, so could you give us the video of the issue.
Also if you change some flags (like enable_avoidance), let us know them."
Path snaps back to lane although vehicle is not in lane,D_kwDOAnasMc4ARTyX,2022-11-04T07:30:57Z,MrOCW,1,Answered,DC_kwDOAnasMc4APd_f,MrOCW,"![image](https://user-images.githubusercontent.com/67644448/199937363-8866f3d6-cffe-4038-8d54-8510a094f625.png)
The path was originally the white lines that i drew, but it snapped to the new modified ""wrong"" path in my original image
Even the modified path collides with the obstacle
enable_avoidance was set to True."
Path snaps back to lane although vehicle is not in lane,D_kwDOAnasMc4ARTyX,2022-11-04T07:30:57Z,MrOCW,1,Answered,DC_kwDOAnasMc4APeEx,takayuki5168,"The reason to be snapped is the ego's CoG goes to the neighour lane. Behavior path planner plans from the lane where ego's CoG position locates.
Still I don't understand what makes this situation."
Path snaps back to lane although vehicle is not in lane,D_kwDOAnasMc4ARTyX,2022-11-04T07:30:57Z,MrOCW,1,Answered,DC_kwDOAnasMc4APeE-,MrOCW,"it is strange though, from the localization in the image, the vehicle's CoG doesnt seem to be on the lane going downwards? in fact its on the lane going upwards so the path shouldnt have modified right?
FYI, the vehicle is supposed to travel downwards, on the right lane"
Path snaps back to lane although vehicle is not in lane,D_kwDOAnasMc4ARTyX,2022-11-04T07:30:57Z,MrOCW,1,Answered,DC_kwDOAnasMc4APg6g,takayuki5168,"In the lane_following module of behavior_path_planner, this snap is enabled, but disabled in the avoidance module of behavior_path_planner.
Therefore, just an image you sent is not too enough to understand what happened.

There is no further discussion only with this image. If you cannot give further information (video, rosbag, method to reproduce, etc), could you close the discussion please."
Path snaps back to lane although vehicle is not in lane,D_kwDOAnasMc4ARTyX,2022-11-04T07:30:57Z,MrOCW,1,Answered,DC_kwDOAnasMc4APg7Q,MrOCW,"will send one when i get the chance to test it again!
"
2022-11-08 ODD working group weekly meeting (118),D_kwDOAnasMc4ARTyY,2022-11-04T07:31:10Z,Igata-ctrl,0,Unanswered,,,
obstacle_segmentation pointcloud frequency low,D_kwDOAnasMc4ARTyh,2022-11-04T07:34:55Z,MrOCW,2,Answered,,,
obstacle_segmentation pointcloud frequency low,D_kwDOAnasMc4ARTyh,2022-11-04T07:34:55Z,MrOCW,2,Answered,DC_kwDOAnasMc4APokj,takayuki5168,@yukke42 
obstacle_segmentation pointcloud frequency low,D_kwDOAnasMc4ARTyh,2022-11-04T07:34:55Z,MrOCW,2,Answered,DC_kwDOAnasMc4APqPy,yukke42,@miursh  @badai-nguyen May I ask you to answer the question?
obstacle_segmentation pointcloud frequency low,D_kwDOAnasMc4ARTyh,2022-11-04T07:34:55Z,MrOCW,2,Answered,DC_kwDOAnasMc4APqRa,shmpwk,@MrOCW Could you share your rosbag?
obstacle_segmentation pointcloud frequency low,D_kwDOAnasMc4ARTyh,2022-11-04T07:34:55Z,MrOCW,2,Answered,DC_kwDOAnasMc4APw_k,miursh,"@MrOCW I'm sorry for my late responce.
If it is because of shortage of CPU power, setting lower resolution (like 512x10) might help.
I haven't run this algorithm on Jetson Orin AGX, so I can't tell about the performance issue on it.
Could you check the cpu and memory usage?
Also if you could share the rosbag, that would help us to investigate this problem."
obstacle_segmentation pointcloud frequency low,D_kwDOAnasMc4ARTyh,2022-11-04T07:34:55Z,MrOCW,2,Answered,DC_kwDOAnasMc4APxJ1,MrOCW,i've changed it to 512x10 and that indeed helped. thank you!
obstacle_segmentation pointcloud frequency low,D_kwDOAnasMc4ARTyh,2022-11-04T07:34:55Z,MrOCW,2,Answered,DC_kwDOAnasMc4AavR3,hzkkk1997,Hello~ May I explain what mode this 1024x20 is? Can it be understood as the resolution of LiDAR?
3D LiDAR Semantic Segmentation for Autoware.Universe,D_kwDOAnasMc4ARVa1,2022-11-07T06:14:38Z,tzu-lin-huang-128,1,Answered,,,
3D LiDAR Semantic Segmentation for Autoware.Universe,D_kwDOAnasMc4ARVa1,2022-11-07T06:14:38Z,tzu-lin-huang-128,1,Answered,DC_kwDOAnasMc4APjDO,yukkysaito,"> Centerpoint Object Detection with Synthetic Dataset (mainly about heavy rain, noise data, occlusion, and low-resolution data perception. Hopefully, I will have some public video clips soon)

I'm looking forward to it very much!

> Semantic Segmentation (Dec. 2022) gonna integrated into Autoware.Universe. (As for Panoptic Segmentation still working in progress probably can commit to Autoware.Universe next year.). The idea is to provide semantic segmentation labels for LiDAR data so that developers can use them for sensor fusion or any other advanced usages. (Example application information will be documented in the same repo)

Very nice :+1: 
There is no semantic segmentation output type as the output of perception component because planning component difficult to use semantic segmentation output type.
Therefore, if we use semantic segmentation or panoptic segmentation output, it would help to improve 3D object recognition(dynamic object) or obstacle segmentation(obstacle pointcloud).
Example : 
- Use as ground remover
- Use as a clustering of dynamic object such as pedestrian, car, bike and etc.
We can support to integrate it."
Autonomy Software WG Meeting 2022/11/15,D_kwDOAnasMc4ARWXQ,2022-11-08T09:57:43Z,BonoloAWF,1,Answered,,,
Autonomy Software WG Meeting 2022/11/15,D_kwDOAnasMc4ARWXQ,2022-11-08T09:57:43Z,BonoloAWF,1,Answered,DC_kwDOAnasMc4AP0ZZ,xmfcx,"# Issues to discuss

## Bus ODD Nov-Dec Milestone
- https://github.com/autowarefoundation/autoware.universe/issues/2125 Hear @mehmetdogru and @beyzanurkaya 's opinions on the current state of discussion.
- Ask for volunteers to tackle the issue: https://github.com/autowarefoundation/autoware.universe/issues/2099
- Ask @maxime-clem on the state of https://github.com/autowarefoundation/autoware.universe/issues/2182 issue.
  - And related PR: https://github.com/autowarefoundation/autoware.universe/pull/2288
- https://github.com/autowarefoundation/autoware.universe/issues/1121 go over the suggestions on the PR related to this issue:
  - https://github.com/autowarefoundation/autoware.universe/pull/2237#issuecomment-1315359697
- https://github.com/autowarefoundation/autoware.universe/issues/1734 the pr should be merged once the ci finishes:
  - https://github.com/autowarefoundation/autoware.universe/pull/1831
- Hear from @angry-crab on the state of the https://github.com/autowarefoundation/autoware.universe/issues/908
- https://github.com/autowarefoundation/autoware.universe/issues/1543 seems to be waiting for response from @kosuke55 maybe @brkay54 can share updates
- https://github.com/autowarefoundation/autoware.universe/issues/2208
  - https://github.com/autowarefoundation/autoware.universe/pull/2209
    - @TakaHoribe shared some feedback, waiting for response from @beyzanurkaya 
- https://github.com/autowarefoundation/autoware.universe/issues/2222
  - a draft PR is created: https://github.com/autowarefoundation/autoware.universe/pull/2290
  - maybe @beyzanurkaya can share her progress
- https://github.com/autowarefoundation/autoware.universe/issues/1253
  - This issue is waiting for this related issue: https://github.com/autowarefoundation/autoware-documentation/issues/231 and action from @mitsudome-r 
- https://github.com/autowarefoundation/autoware.universe/issues/1716
  - Related PR: https://github.com/autowarefoundation/autoware.universe/pull/1999
    - Feedbacks are given by @takayuki5168, @beyzanurkaya is looking into the feedbacks.
- https://github.com/autowarefoundation/autoware.universe/issues/563
  - Related PR: https://github.com/autowarefoundation/autoware-documentation/pull/180
    - waiting for further feedback from @miursh @aohsato and @badai-nguyen 
- https://github.com/autowarefoundation/autoware.universe/issues/611
  - Related PR: https://github.com/autowarefoundation/autoware.universe/pull/647
    - @takayuki5168 [asked](https://github.com/autowarefoundation/autoware.universe/pull/647#issuecomment-1315340205) for @TakaHoribe's opinion on the PR.
- https://github.com/autowarefoundation/autoware.universe/pull/2088
  - Waiting for review from @takayuki5168 and @isamu-takagi 
- https://github.com/autowarefoundation/autoware.universe/issues/2197
  - Related PR: https://github.com/autowarefoundation/autoware.universe/pull/2198
    - @satoshi-ota asks for some clarifications on the PR.

## Bus ODD high priority issues
- https://github.com/autowarefoundation/autoware.universe/issues/2116
  - https://github.com/autowarefoundation/autoware.universe/pull/2127
    - @brkay54 made some updates, requested for another review from @TakaHoribe 
- https://github.com/autowarefoundation/autoware.universe/issues/2044 open discussion for the time being.
- https://github.com/autowarefoundation/autoware.universe/issues/1451
  - waiting for https://github.com/autowarefoundation/autoware-projects/issues/50
  - maybe talk about if we will take any action on this topic.

## PRs waiting for review
- https://github.com/autowarefoundation/autoware.universe/pull/2297
- maybe talk about https://github.com/autowarefoundation/autoware.universe/pull/2296
- talk about https://github.com/autowarefoundation/autoware.universe/pull/2234
- https://github.com/autowarefoundation/autoware.universe/pull/2185
  - requires a manual rebase
- https://github.com/autowarefoundation/autoware.universe/pull/2141
  - a dependent pr is merged, now is waiting for review from @TakaHoribe 
- https://github.com/autowarefoundation/autoware.universe/pull/2127
  - waiting for review from @TakaHoribe 
- https://github.com/autowarefoundation/autoware.universe/pull/2040
  - waiting for response from @TakaHoribe 
- https://github.com/autowarefoundation/autoware.universe/pull/1938
  - waiting for review from @YamatoAndo @yukkysaito 
- https://github.com/autowarefoundation/autoware.universe/pull/1898
  - waiting for actions from @angry-crab 
- https://github.com/autowarefoundation/autoware.universe/pull/1419
  - why is this still not merged :man_facepalming: 
- https://github.com/autowarefoundation/autoware.universe/pull/1401
  - discuss in the meeting
"
2022-11-09 Simulation Working Group Meeting,D_kwDOAnasMc4ARWbO,2022-11-08T11:26:36Z,WJaworskiRobotec,0,Unanswered,,,
2022-11-09 Planning/control meeting,D_kwDOAnasMc4ARWbm,2022-11-08T11:36:11Z,WJaworskiRobotec,0,Unanswered,,,
Running scenario simulator process has died,D_kwDOAnasMc4ARXC9,2022-11-09T03:43:53Z,cyn-liu,2,Answered,,,
Running scenario simulator process has died,D_kwDOAnasMc4ARXC9,2022-11-09T03:43:53Z,cyn-liu,2,Answered,DC_kwDOAnasMc4APnPg,kenji-miyake,"@cyn-liu Thank you for reporting it.
But I'm sorry, I'm not familiar with scenario simulator.

@YoshinoriTsutake Do you know anything?"
Running scenario simulator process has died,D_kwDOAnasMc4ARXC9,2022-11-09T03:43:53Z,cyn-liu,2,Answered,DC_kwDOAnasMc4APnZH,HansRobo,"@cyn-liu Hi, I'm Kotaro Yoshimoto, an engineer of simulation team in TIER IV.

We have confirmed that if the map path described in a scenario is invalid or does not exist, we get errors like reported ones.
Could you please **check the scenario and the map path**?

note:  
I cannot access the autocore registry, so the answer assumes the TIER IV registry as described in the [document](https://github.com/autowarefoundation/open-ad-kit-docs/blob/proposal_v2.0/docs/start-guide/how-to-run-simulators/scenario-simulator/run-on-local-env.md).
I'm sorry, but it's difficult for me to answer if it's an AutoCore's image problem."
Running scenario simulator process has died,D_kwDOAnasMc4ARXC9,2022-11-09T03:43:53Z,cyn-liu,2,Answered,DC_kwDOAnasMc4APnvw,liuXinGangChina,"Hi, yoshimoto san @HansRobo . I'm cun-liu's colleague from autocore team.

Just some addtional comments about our env
pc: docker file from ghcr.io/tier4/scenario_simulator_v2:galactic
nvidia xavier: docker from ghcr.io/autowarefoundation/autoware-universe:galactic-20220728-prebuilt-cuda

docker on xavier has been pull up by ""kubectl apply -f comhpc-deployments"""
Running scenario simulator process has died,D_kwDOAnasMc4ARXC9,2022-11-09T03:43:53Z,cyn-liu,2,Answered,DC_kwDOAnasMc4APny1,cyn-liu,"Thanks @HansRobo .
- I don't think it's a image problem. The Autocore repository from TIER IV repository.

- I check the map path and there is no problem. I set the map path as described in this [document](https://github.com/autowarefoundation/open-ad-kit-docs/blob/proposal_v2.0/docs/start-guide/installation/system-setup-host.md) (I changed the map path in the `t4v2.yaml`  file to my own map path as described in this documentation)."
Running scenario simulator process has died,D_kwDOAnasMc4ARXC9,2022-11-09T03:43:53Z,cyn-liu,2,Answered,DC_kwDOAnasMc4APoCj,HansRobo,"@cyn-liu @liuXinGangChina 
Thank you for providing more information!
I understand that the docker image is out of the scope of the problem now.

However, as long as I follow the instructions in the docs, it works fine for me.
Please let me check the map path again before confirming minor differences such as the difference between my environment and yours.

I would like you to check the path not only human but also by more sure way, for example, executing `cat <map path>` and checking if the map contents are output.

I'm sorry if I'm wrong, but I've wasted so much time on simple mistakes like this that I don't want you to be the same.
For example, It's very confusing, but you need to add not only the user name but also the `map` directory information as follows.
As human beings, we may miss such confusing things.

before : 
```yaml
  RoadNetwork:
    LogicFile:
      filepath: /home/mitsudome-r/Downloads/sample_data/lanelet2_map.osm
    SceneGraphFile:
      filepath: /home/mitsudome-r/Downloads/sample_data/pointcloud_map.pcd
```
after : 
```yaml
  RoadNetwork:
    LogicFile:
      filepath: /home/<user-name>/Downloads/sample_data/map/lanelet2_map.osm
#                                                       ↑ map directory!
    SceneGraphFile:
      filepath: /home/<user-name>/Downloads/sample_data/map/pointcloud_map.pcd
#                                                       ↑ map directory!
```"
Running scenario simulator process has died,D_kwDOAnasMc4ARXC9,2022-11-09T03:43:53Z,cyn-liu,2,Answered,DC_kwDOAnasMc4APpwz,cyn-liu,"Thank you very much @HansRobo  for your patience in answering my questions.
I did ignore the `map`  directory information and when I added  it, the program run successfully.
"
Running scenario simulator process has died,D_kwDOAnasMc4ARXC9,2022-11-09T03:43:53Z,cyn-liu,2,Answered,DC_kwDOAnasMc4APqV_,HansRobo,"Glad you solved the problem!
(I was actually very worried what if I was wrong in my point of view lol)"
which Autoware.AI's functions to port to Autoware.Core/Universe,D_kwDOAnasMc4ARXlo,2022-11-09T16:44:22Z,takayuki5168,0,Unanswered,,,
Data types,D_kwDOAnasMc4ARXm2,2022-11-09T17:04:49Z,xmfcx,2,Answered,,,
Data types,D_kwDOAnasMc4ARXm2,2022-11-09T17:04:49Z,xmfcx,2,Answered,DC_kwDOAnasMc4APpvy,kenji-miyake,"@xmfcx Thank you for opening this thread.

> In Autoware.Auto, we used to use for integer types and typedefs for floating point types.
> Should we follow a similar style for Autoware Core?

I don't think so because in the `B.1 Traceability to MISRA C++:2008` section, `A3–9–2` is not recommended and is replaced by `A3-9-1`.

> What kind of tools can we use to automate these rules?

Seeing AUTOSAR says `Rule M3-9-1 (required, implementation, automated)`, there is a way to automatically check this rule, but I'm not sure what it is.

Maybe CodeQL can check it?
https://github.com/github/codeql-coding-standards/blob/be885f4c26e54748598900ab760a8826f7d4ce00/rules.csv"
Data types,D_kwDOAnasMc4ARXm2,2022-11-09T17:04:49Z,xmfcx,2,Answered,DC_kwDOAnasMc4APqCg,xmfcx,"@kenji-miyake 

> I don't think so because in the B.1 Traceability to MISRA C++:2008 section, A3–9–2 is not recommended and is replaced by A3-9-1.

In [Autosar](https://www.autosar.org/fileadmin/user_upload/standards/adaptive/21-11/AUTOSAR_RS_CPP14Guidelines.pdf) page 70/514 says:

> MISRA C++ 2008 [7]: Rule 3-9-2 typedefs that indicate size and signedness
should be used in place of the basic numerical types.

So for floating type numbers, [until C++23 is out and we can use `#include <stdfloat>`](https://en.cppreference.com/w/cpp/types/floating-point) we might need to wrap `float` and `double` with `float32_t`, `float64_t`.

I've also checked the `B.1 Traceability to MISRA C++:2008 section, A3–9–2` part and I see that they updated the old rule because in [C++11 `<cstdint>` came out to replace some part of it](https://en.cppreference.com/w/cpp/types/integer)."
Data types,D_kwDOAnasMc4ARXm2,2022-11-09T17:04:49Z,xmfcx,2,Answered,DC_kwDOAnasMc4APqFN,kenji-miyake,"@xmfcx For floating-point types, I guess `A0-4-1` covers them.

> Rule A0-4-1 (required, infrastructure / toolchain, non-automated)
Floating-point implementation shall comply with IEEE 754 standard

So I think we don't need a wrapper for C++23 for now. If we create a wrapper, I guess we can't fully support the feature. (std::float16_t, std::float128_t, and std::bfloat16_t)
I feel it's enough that we reconsider it after C++23 is available with Autoware."
Data types,D_kwDOAnasMc4ARXm2,2022-11-09T17:04:49Z,xmfcx,2,Answered,DC_kwDOAnasMc4APrdJ,xmfcx,"> So I think we don't need a wrapper for C++23 for now. If we create a wrapper, I guess we can't fully support the feature. (std::float16_t, std::float128_t, and std::bfloat16_t) I feel it's enough that we reconsider it after C++23 is available with Autoware.

I think `std::float128_t` is `long double` but rest (`std::float16_t`, `std::bfloat16_t`) don't seem to be there (and also not common either).

But I agree that we can postpone floating points to post-C++23 timeline. I also don't like passing these type definitions around with annoying dependencies. Since we don't have MISRA/AUTOSAR compliance requirements for the short term, I think we can postpone it.

@kenji-miyake Do you think we should enforce `<cstdint>` for all the new code in Autoware Core?"
Data types,D_kwDOAnasMc4ARXm2,2022-11-09T17:04:49Z,xmfcx,2,Answered,DC_kwDOAnasMc4APsHQ,kenji-miyake,"@xmfcx I think starting from advisory is fine. We can easily replace it later. If we can introduce a linter for the rule, it's good to enforce it."
Data types,D_kwDOAnasMc4ARXm2,2022-11-09T17:04:49Z,xmfcx,2,Answered,DC_kwDOAnasMc4AP2-U,xmfcx,"What about handling of:
```cpp
using bool8_t = bool;
using char8_t = char;
using uchar8_t = unsigned char;
```

These are not defined in [`<cstdint>`](https://en.cppreference.com/w/cpp/header/cstdint)

Any thoughts?"
Data types,D_kwDOAnasMc4ARXm2,2022-11-09T17:04:49Z,xmfcx,2,Answered,DC_kwDOAnasMc4AP3HX,xmfcx,It seems https://en.cppreference.com/w/cpp/keyword/char8_t is a part of C++20.
Data types,D_kwDOAnasMc4ARXm2,2022-11-09T17:04:49Z,xmfcx,2,Answered,DC_kwDOAnasMc4AP4i1,kenji-miyake,"I think it's enough we enforce the rules after we introduce the automatic check.
So, I mean CI checks should come first for these kinds of issues.
Without that, maintenance costs would extremely increase."
Could not find a connection between 'base_link' and 'map' because they are not part of the same tree.Tf has two or more unconnected trees,D_kwDOAnasMc4ARYDO,2022-11-10T07:47:42Z,lhakim85,4,Answered,,,
Could not find a connection between 'base_link' and 'map' because they are not part of the same tree.Tf has two or more unconnected trees,D_kwDOAnasMc4ARYDO,2022-11-10T07:47:42Z,lhakim85,4,Answered,DC_kwDOAnasMc4APqOC,YamatoAndo,"Thank you for your report.

Please tell us the following information.
- The Commit ID of the latest repo
- The Commit ID of previous repo

If possible, please share the following data
- your rosbag
- your point cloud map

If there are any errors or warnings on the terminal, please share them as well.
"
Could not find a connection between 'base_link' and 'map' because they are not part of the same tree.Tf has two or more unconnected trees,D_kwDOAnasMc4ARYDO,2022-11-10T07:47:42Z,lhakim85,4,Answered,DC_kwDOAnasMc4APqRS,lhakim85,"> The Commit ID of the latest repo

commit 62399f5da8ec2e9a0168907f222507f05d83254b (HEAD -> main, origin/main, origin/HEAD)

> The Commit ID of previous repo

commit 89645b979172ea69cf875a471e58e211d677da1b (HEAD -> main, origin/main, origin/HEAD)

> your rosbag

I'm feed from live lidar 


> your point cloud map

[pcd](https://drive.google.com/file/d/1Swth34PzkimbquYTcGNzke7ZYvkq0cRG/view?usp=share_link)

> If there are any errors or warnings on the terminal, please share them as well.

 [this is the full log after pcd map load in rviz](https://drive.google.com/file/d/19V7P1F7tZxlsqNizCJEBAv7YANeUYiaW/view?usp=share_link)

update:  [here my bag file](https://drive.google.com/file/d/17InFIwIEEZ3ozt5DAHbl1Kn1hHYspqFD/view?usp=share_link)

thanks @YamatoAndo 
"
Could not find a connection between 'base_link' and 'map' because they are not part of the same tree.Tf has two or more unconnected trees,D_kwDOAnasMc4ARYDO,2022-11-10T07:47:42Z,lhakim85,4,Answered,DC_kwDOAnasMc4APqay,YamatoAndo,"Thanks for sharing the info!

It could possibly be due to the lack of vehicle speed information.
The latest Autoware does not allow initial position estimation unless the vehicle is stopped.

Please change the following.
`<arg name=""stop_check_enabled"" value=""true""/>`
->
`<arg name=""stop_check_enabled"" value=""false""/>`
https://github.com/autowarefoundation/autoware.universe/blob/main/launch/tier4_localization_launch/launch/util/util.launch.xml#L19

If it still doesn't work, please share us the result of `ros2 topic echo /service_log topic`.
I would like to check the information in `/service_log` topic."
Could not find a connection between 'base_link' and 'map' because they are not part of the same tree.Tf has two or more unconnected trees,D_kwDOAnasMc4ARYDO,2022-11-10T07:47:42Z,lhakim85,4,Answered,DC_kwDOAnasMc4APsLg,lhakim85,"@YamatoAndo thanks for the reply
The result still the same, cannot find connection between base_link and map

> The latest Autoware does not allow initial position estimation unless the vehicle is stopped.

Means that, the vehicle need in static condition 1st for initial estimation,right? And that is what we test in live feed lidar, the vehicle just park and run the autoware

> If it still doesn't work, please share us the result of ros2 topic echo /service_log topic.

[here is the service log](https://drive.google.com/file/d/1Q3UpMb4uTm5BdGdGRu9SRO-jLKfwBDkM/view?usp=share_link)"
Could not find a connection between 'base_link' and 'map' because they are not part of the same tree.Tf has two or more unconnected trees,D_kwDOAnasMc4ARYDO,2022-11-10T07:47:42Z,lhakim85,4,Answered,DC_kwDOAnasMc4APsUP,lhakim85,"@YamatoAndo,
Manage to get base_link to map transform and autoware to run after feed in gnss sensor and edit like you suggest
Thanks mate"
Import calibration results into Autoware,D_kwDOAnasMc4ARYIc,2022-11-10T09:44:18Z,SyahirMuzni,1,Answered,,,
Import calibration results into Autoware,D_kwDOAnasMc4ARYIc,2022-11-10T09:44:18Z,SyahirMuzni,1,Answered,DC_kwDOAnasMc4APuVV,liuXinGangChina,"Hi, @SyahirMuzni. Since Autoware use sensor description to manage the extrinsic parameters, you can take a look into this repo https://github.com/autowarefoundation/sample_sensor_kit_launch/blob/main/sample_sensor_kit_description/config/sensor_kit_calibration.yaml.

Happy hacking."
Lanelet error when performing simulation,D_kwDOAnasMc4ARaSh,2022-11-14T03:44:45Z,SyahirMuzni,0,Unanswered,,,
Slow down before a tight turn,D_kwDOAnasMc4ARaU5,2022-11-14T05:43:22Z,MrOCW,1,Answered,,,
Slow down before a tight turn,D_kwDOAnasMc4ARaU5,2022-11-14T05:43:22Z,MrOCW,1,Answered,DC_kwDOAnasMc4APwz1,satoshi-ota,"Hi @MrOCW 

`motion_velocity_smoother` limits the maximum speed according to curvature. (See [here](https://autowarefoundation.github.io/autoware.universe/main/planning/motion_velocity_smoother/))

The following parameters should be set properly.

```yaml
    # curve parameters
    max_lateral_accel: 1.0             # max lateral acceleration limit [m/ss]
    min_curve_velocity: 0.5            # min velocity at lateral acceleration limit and steering angle rate limit [m/s]
    decel_distance_before_curve: 3.5   # slow speed distance before a curve for lateral acceleration limit
    decel_distance_after_curve: 2.0    # slow speed distance after a curve for lateral acceleration limit
    min_decel_for_lateral_acc_lim_filter: -2.5  # deceleration limit applied in the lateral acceleration filter to avoid sudden braking [m/ss]
```

https://github.com/autowarefoundation/autoware.universe/blob/642f067e7e5f3fe24d243fed1a6643adb896a28e/launch/tier4_planning_launch/config/scenario_planning/common/motion_velocity_smoother/motion_velocity_smoother.param.yaml#L10-L15"
Slow down before a tight turn,D_kwDOAnasMc4ARaU5,2022-11-14T05:43:22Z,MrOCW,1,Answered,DC_kwDOAnasMc4AP1qT,satoshi-ota,@MrOCW Do you still have any problem? :smiley: 
Slow down before a tight turn,D_kwDOAnasMc4ARaU5,2022-11-14T05:43:22Z,MrOCW,1,Answered,DC_kwDOAnasMc4AP-pz,MrOCW,cant seem to see a difference in my application when changing the parameters but i'm focusing on another issue right now so its fine for now thanks!
Slow down before a tight turn,D_kwDOAnasMc4ARaU5,2022-11-14T05:43:22Z,MrOCW,1,Answered,DC_kwDOAnasMc4AQfP7,brkay54,Also you can decrease the [max_steering_angle_rate](https://github.com/autowarefoundation/autoware.universe/blob/main/launch/tier4_planning_launch/config/scenario_planning/common/motion_velocity_smoother/motion_velocity_smoother.param.yaml#L52) to decrease the velocity of road while turning.
Open AD Kit WG meeting 2022/11/09,D_kwDOAnasMc4ARaiA,2022-11-14T10:33:04Z,armaganarsln,1,Answered,,,
Open AD Kit WG meeting 2022/11/09,D_kwDOAnasMc4ARaiA,2022-11-14T10:33:04Z,armaganarsln,1,Answered,DC_kwDOAnasMc4APxfw,armaganarsln,@kasperornmeck could you let us know the available times you have for the new meeting time? We were planning 07:00 Am UTC & 15:00 Am UTC to move one hour forward.
Open AD Kit WG meeting 2022/11/09,D_kwDOAnasMc4ARaiA,2022-11-14T10:33:04Z,armaganarsln,1,Answered,DC_kwDOAnasMc4AP0_2,kaspermeck-arm,"@armaganarsln 
15:00 UTC on Wednesday is preferable, I could also do 14:00 UTC on Tuesday or Thursday. Thanks!"
2022-11-15 ODD working group weekly meeting (119),D_kwDOAnasMc4ARbEV,2022-11-14T21:59:38Z,Igata-ctrl,0,Unanswered,,,
Best Practices for implement my own GNSS Poser,D_kwDOAnasMc4ARbdf,2022-11-15T11:20:48Z,lionator,0,Unanswered,,,
Tuning of robot control,D_kwDOAnasMc4ARbk7,2022-11-15T14:13:58Z,MrOCW,1,Answered,,,
Tuning of robot control,D_kwDOAnasMc4ARbk7,2022-11-15T14:13:58Z,MrOCW,1,Answered,DC_kwDOAnasMc4AP0dg,takayuki5168,"> FYI: the robot follows the planned path fairly accurate and does not deviate much but still spins out of control during tight turns

@TakaHoribe Do you have any idea about the reason for this."
Autonomy Software WG Meeting 2022/11/22,D_kwDOAnasMc4ARbu6,2022-11-15T17:17:01Z,BonoloAWF,1,Answered,,,
Autonomy Software WG Meeting 2022/11/22,D_kwDOAnasMc4ARbu6,2022-11-15T17:17:01Z,BonoloAWF,1,Answered,DC_kwDOAnasMc4AQB1Z,mitsudome-r,"Bus ODD Nov-Dec Milestone:
* https://github.com/autowarefoundation/autoware.universe/issues/2125 
  * waiting for @mehmetdogru and @beyzanurkaya's proposal on new solution
* https://github.com/autowarefoundation/autoware.universe/issues/2099
  * Still waiting for someone to pick up the task
  * We still have Astar so maybe we can move this to low priority?
* https://github.com/autowarefoundation/autoware.universe/issues/2182
  * Approach is discussed here: https://github.com/orgs/autowarefoundation/discussions/2851
  * Max will move forward with the approach if there are no opposition
* https://github.com/autowarefoundation/autoware.universe/issues/908
  * @angry-crab to provide updates next week in more detail over porting to TVM
* https://github.com/autowarefoundation/autoware.universe/pull/2237
  * Still needs code clean-up (remove unnecessary changes) by @sujithvemi 
* https://github.com/autowarefoundation/autoware.universe/issues/1543
  * Waiting for @kosuke55 to check @brkay54 's branch to investigate the bug
* https://github.com/autowarefoundation/autoware.universe/issues/2208
  * There is a draft PR https://github.com/autowarefoundation/autoware.universe/pull/2209
  * We would like to have updates from @beyzanurkaya 
  * However, it seems @mehmetdogru is having difficulty reproducing the original issue
* https://github.com/autowarefoundation/autoware.universe/issues/1761
  * PR review is ongoing https://github.com/autowarefoundation/autoware.universe/pull/2088
  * waiting for @takayuki5168 to approve PR
* https://github.com/autowarefoundation/autoware.universe/issues/2222
  * @beyzanurkaya created draft pr. We may want to hear some updates
* https://github.com/autowarefoundation/autoware.universe/issues/1716
  * Review is on-going : https://github.com/autowarefoundation/autoware.universe/pull/1999
  * @beyzanurkaya  any comments?
* https://github.com/autowarefoundation/autoware.universe/issues/1253
  *  waiting for @mitsudome-r to finalize document
* https://github.com/autowarefoundation/autoware.universe/issues/563
  * @xmfcx  working on PR https://github.com/autowarefoundation/autoware-documentation/pull/180
  * Agreed to include azimuth and distance as point field
* https://github.com/autowarefoundation/autoware.universe/issues/611
  * PR: https://github.com/autowarefoundation/autoware_common/pull/120
  * PR: https://github.com/autowarefoundation/autoware.universe/pull/647
  * modification on maps are merged. Waiting for review from @takayuki5168 
* https://github.com/autowarefoundation/autoware.universe/issues/2197
  * PR: https://github.com/autowarefoundation/autoware.universe/pull/2198
  * review is on-going between @mehmetdogru, @beyzanurkaya , @satoshi-ota 
* https://github.com/autowarefoundation/autoware.universe/issues/2044
  * @cyn-liu created a PR last week: https://github.com/autowarefoundation/autoware.universe/pull/2312
  * @kminoda reviewing the PR
* https://github.com/autowarefoundation/autoware.universe/issues/2330
  * @xmfcx started to create fix for deprecated codes
## PR's waiting for review with Nov-Dec Milestones
No reactions since previous call
* https://github.com/autowarefoundation/autoware.universe/pull/2088 @TakaHoribe 
* https://github.com/autowarefoundation/autoware.universe/pull/647 @TakaHoribe @takayuki5168 

On-going PRs
* https://github.com/autowarefoundation/autoware.universe/pull/1999 
* https://github.com/autowarefoundation/autoware-documentation/pull/180
* https://github.com/autowarefoundation/autoware.universe/pull/2198
* https://github.com/autowarefoundation/autoware.universe/pull/2312

Remaining PRs from previous call:
* https://github.com/autowarefoundation/autoware.universe/pull/2297
* maybe talk about https://github.com/autowarefoundation/autoware.universe/pull/2296
* talk about https://github.com/autowarefoundation/autoware.universe/pull/2234
* https://github.com/autowarefoundation/autoware.universe/pull/2040
  * waiting for response from @TakaHoribe 
* https://github.com/autowarefoundation/autoware.universe/pull/1938
  * waiting for review from @YamatoAndo @yukkysaito"
Are the traffic light and tensorrt_yolo training datasets available?,D_kwDOAnasMc4ARb-S,2022-11-16T01:28:43Z,tleyden,0,Unanswered,,,
[proposal] define new regulatory element SubType:crosswalk,D_kwDOAnasMc4ARcD7,2022-11-16T04:37:58Z,satoshi-ota,3,Answered,,,
[proposal] define new regulatory element SubType:crosswalk,D_kwDOAnasMc4ARcD7,2022-11-16T04:37:58Z,satoshi-ota,3,Answered,DC_kwDOAnasMc4AP6wd,satoshi-ota,@yukkysaito @mitsudome-r @xmfcx 
[proposal] define new regulatory element SubType:crosswalk,D_kwDOAnasMc4ARcD7,2022-11-16T04:37:58Z,satoshi-ota,3,Answered,DC_kwDOAnasMc4AP_Zw,mitsudome-r,Thanks for the proposal. I think @yukkysaito and I are aligned on this.
[proposal] define new regulatory element SubType:crosswalk,D_kwDOAnasMc4ARcD7,2022-11-16T04:37:58Z,satoshi-ota,3,Answered,DC_kwDOAnasMc4AP7xh,xmfcx,"@satoshi-ota thanks for preparing this improvement proposal.

![Screenshot from 2022-11-18 16-08-49](https://user-images.githubusercontent.com/10751153/202712853-6618899d-655f-4814-807f-3c430a9d2365.png)

I need some clarifications on what will change, it's not clear to me from the images.

- How will a lanelet refer to a crosswalk regulatory element?
- How do you refer to multiple StopLines from the crosswalk regulatory element?"
[proposal] define new regulatory element SubType:crosswalk,D_kwDOAnasMc4ARcD7,2022-11-16T04:37:58Z,satoshi-ota,3,Answered,DC_kwDOAnasMc4AP_Gs,satoshi-ota,"@xmfcx Thanks for comments :smile: 

> How will a lanelet refer to a crosswalk regulatory element?

If there is a crosswalk on the road, I am going to set the ID of the crosswalk regulatory element in the road lanelet as follows.

```xml
  <relation id=""1"">
    ...
    <--! refer the crosswalk regulatory element -->
    <member type=""relation"" role=""regulatory_element"" ref=""4""/>
    <tag k=""type"" v=""lanelet""/>
    <tag k=""subtype"" v=""road""/>
    ...
  </relation>
```

> How do you refer to multiple StopLines from the crosswalk regulatory element?

I am going to set the ID's of StopLine in the crosswalk regulatory element as follow.

```xml
  <relation id=""190343"">
    ...
    <--! refer the crosswalk lanelet -->
    <member type='way' ref='2' role='refers' />
    <--! refer the stop line linestrings -->
    <member type=""way"" role=""ref_line"" ref=""3""/> 
    <member type=""way"" role=""ref_line"" ref=""5""/>
    <tag k=""type"" v=""regulatory_element""/>
    <tag k=""subtype"" v=""crosswalk""/>
    ...
  </relation>
```

![image](https://user-images.githubusercontent.com/44889564/202929841-855832a2-a0c2-4948-aa18-ca8ad254cdb5.png)
"
[proposal] define new regulatory element SubType:crosswalk,D_kwDOAnasMc4ARcD7,2022-11-16T04:37:58Z,satoshi-ota,3,Answered,DC_kwDOAnasMc4AQAKl,xmfcx,@satoshi-ota thanks for the explanations. They are now clear to me. I support this proposal.
[proposal] define new regulatory element SubType:crosswalk,D_kwDOAnasMc4ARcD7,2022-11-16T04:37:58Z,satoshi-ota,3,Answered,DC_kwDOAnasMc4AQBW0,satoshi-ota,"@xmfcx Thank you, too. I'll keep you posted. :smile: "
[proposal] define new regulatory element SubType:crosswalk,D_kwDOAnasMc4ARcD7,2022-11-16T04:37:58Z,satoshi-ota,3,Answered,DC_kwDOAnasMc4AQCCY,mitsudome-r,"@satoshi-ota We have discussed this in ASWG as well. There were no opposition, and I think we can move forward with implementation of new crosswalk format."
Mapping WG Meeting 28/09/2022,D_kwDOAnasMc4ARcIg,2022-11-16T07:07:33Z,n-patiphon,0,Unanswered,,,
Mapping WG Meeting 05/10/2022,D_kwDOAnasMc4ARcJA,2022-11-16T07:24:18Z,n-patiphon,0,Unanswered,,,
Mapping WG Meeting 12/10/2022,D_kwDOAnasMc4ARcLX,2022-11-16T08:07:47Z,n-patiphon,0,Unanswered,,,
Mapping WG Meeting 26/10/2022,D_kwDOAnasMc4ARcL9,2022-11-16T08:21:27Z,n-patiphon,1,Answered,,,
Mapping WG Meeting 26/10/2022,D_kwDOAnasMc4ARcL9,2022-11-16T08:21:27Z,n-patiphon,1,Answered,DC_kwDOAnasMc4AQFZr,rolandvanvenrooy-tomtom,"Presentation TomTom

[TomTom_Corporate_presentation AutoWare Map WG.pdf](https://github.com/autowarefoundation/autoware/files/10075925/TomTom_Corporate_presentation.AutoWare.Map.WG.pdf)
"
Mapping WG Meeting 26/10/2022,D_kwDOAnasMc4ARcL9,2022-11-16T08:21:27Z,n-patiphon,1,Answered,DC_kwDOAnasMc4AQKMw,n-patiphon,@rolandvanvenrooy-tomtom Thank you very much for kindly sharing the slides. I will also copy-paste this link to the [latest meeting notes](https://github.com/orgs/autowarefoundation/discussions/3067).
Mapping WG Meeting 09/11/2022,D_kwDOAnasMc4ARcMe,2022-11-16T08:34:41Z,n-patiphon,0,Unanswered,,,
Open AD Kit WG meeting 2022/11/16,D_kwDOAnasMc4ARcZA,2022-11-16T13:22:00Z,HamburgDave,0,Unanswered,,,
Autoware.Universe gpsins_localizer,D_kwDOAnasMc4ARcgM,2022-11-16T15:37:09Z,osholsonel20,1,Answered,,,
Autoware.Universe gpsins_localizer,D_kwDOAnasMc4ARcgM,2022-11-16T15:37:09Z,osholsonel20,1,Answered,DC_kwDOAnasMc4AP7fZ,YamatoAndo,"Unfortunately, it has not  been ported."
Questions about autoware.universe end-to-end performance issues.,D_kwDOAnasMc4ARc2o,2022-11-17T02:25:48Z,nainaigetuide,1,Answered,,,
Questions about autoware.universe end-to-end performance issues.,D_kwDOAnasMc4ARc2o,2022-11-17T02:25:48Z,nainaigetuide,1,Answered,DC_kwDOAnasMc4AP68L,takeshi-iwanari,"Please refer to the following comment.
https://github.com/tier4/CARET_analyze/issues/203#issuecomment-1318083468"
Subpage design for documentation,D_kwDOAnasMc4ARdNb,2022-11-17T13:59:39Z,enesadastec,1,Answered,,,
Subpage design for documentation,D_kwDOAnasMc4ARdNb,2022-11-17T13:59:39Z,enesadastec,1,Answered,DC_kwDOAnasMc4AP5ge,kenji-miyake,"@enesadastec I believe it's good to submit a PR and deploy a preview site there!
https://autowarefoundation.github.io/autoware-documentation/main/contributing/documentation-guidelines/#how-to-preview-your-modification"
Does the /sensing/pointcloud_preprocessor module use openmp?,D_kwDOAnasMc4ARfZ4,2022-11-21T02:22:50Z,nainaigetuide,1,Answered,,,
Does the /sensing/pointcloud_preprocessor module use openmp?,D_kwDOAnasMc4ARfZ4,2022-11-21T02:22:50Z,nainaigetuide,1,Answered,DC_kwDOAnasMc4AQCFi,YamatoAndo,"@nainaigetuide Thanks for the report.
The ray_ground_filter node used to be in /sensing/pointcloud_preprocessor module and used openmp.
But now the ray_ground_filter node is moved to /perception/ground_segmentation module, so the `find_package(OpenMP)` in /sensing/pointcloud_preprocessor is no longer needed. 

Could you please create a PR?"
2022-11-22 ODD working group weekly meeting (120),D_kwDOAnasMc4ARfiD,2022-11-21T07:40:02Z,Igata-ctrl,0,Unanswered,,,
Test Result Sharing-Comparing the NDT matching scores of two point clouds,D_kwDOAnasMc4ARfmM,2022-11-21T09:16:59Z,cyn-liu,0,Unanswered,,,
Proposal for the New Drivable Area data structure,D_kwDOAnasMc4ARfnY,2022-11-21T09:37:53Z,purewater0901,5,Answered,,,
Proposal for the New Drivable Area data structure,D_kwDOAnasMc4ARfnY,2022-11-21T09:37:53Z,purewater0901,5,Answered,DC_kwDOAnasMc4AP_6f,purewater0901,"## Difficulty with line string
Since we decide the drivable area in behavior path planner, it is difficult for motion planner to change its behavior. In the following example, behavior path planner decided to swerve the obstacle by passing its right side, so motion planner cannot try to avoid it from left side. However, this will not be a big issue in most of the cases.
![image](https://user-images.githubusercontent.com/43805014/203023154-8f951820-03ac-4198-bfcb-176fb208bea5.png)

## Difficulty with Occupancy grid
In the following case, it has to deal with overlapped path. However, it is not easy to find a boundary in the crossed section.
![image](https://user-images.githubusercontent.com/43805014/203025621-fd25e628-ef65-4db7-af92-4ff2c31231d8.png)

"
Proposal for the New Drivable Area data structure,D_kwDOAnasMc4ARfnY,2022-11-21T09:37:53Z,purewater0901,5,Answered,DC_kwDOAnasMc4AQCA1,xmfcx,"![firefox_2022-11-22_11-16-11](https://user-images.githubusercontent.com/10751153/203261065-f55d383d-2d4f-4c84-97fb-f75fa3dd335b.png)

How do you define left and right boundaries for 4-way intersections?

The image I sent is from [Tesla fsd](https://youtu.be/_ZYEjYnmPlA?t=90) and as far as I know they only mark road boundaries. Not as left/right."
Proposal for the New Drivable Area data structure,D_kwDOAnasMc4ARfnY,2022-11-21T09:37:53Z,purewater0901,5,Answered,DC_kwDOAnasMc4AQjnB,yukkysaito,"![image](https://user-images.githubusercontent.com/8327598/206370460-e1fa0fb3-0de6-4d06-bb2a-32c695eace99.png)
The ""right/left bound"" is used by the behavior planner to indicate the possible driving area to the motion planner. In this case, I don't think there is a pattern of indicating four independent sides."
Proposal for the New Drivable Area data structure,D_kwDOAnasMc4ARfnY,2022-11-21T09:37:53Z,purewater0901,5,Answered,DC_kwDOAnasMc4AQCDj,mitsudome-r,I think we are trying to generate something similar to yellow lines in Zoox video: https://www.youtube.com/watch?v=rZ6hH2Frrf4
Proposal for the New Drivable Area data structure,D_kwDOAnasMc4ARfnY,2022-11-21T09:37:53Z,purewater0901,5,Answered,DC_kwDOAnasMc4AQJxW,TakaHoribe,@xmfcx @mitsudome-r We're now thinking to start the implementation of the proposed method. Please let us know if you have any concerns.
Proposal for the New Drivable Area data structure,D_kwDOAnasMc4ARfnY,2022-11-21T09:37:53Z,purewater0901,5,Answered,DC_kwDOAnasMc4AQjoK,yukkysaito,"reference PRs :
- https://github.com/autowarefoundation/autoware.universe/pull/2472
- https://github.com/tier4/autoware_auto_msgs/pull/36
- https://github.com/tier4/autoware_launch/pull/595
- https://github.com/tier4/tier4_autoware_msgs/pull/67 "
autware source code can build and test in Hardware environment like Renesas environment,D_kwDOAnasMc4ARfxb,2022-11-21T13:00:30Z,anilbommareddy,4,Answered,,,
autware source code can build and test in Hardware environment like Renesas environment,D_kwDOAnasMc4ARfxb,2022-11-21T13:00:30Z,anilbommareddy,4,Answered,DC_kwDOAnasMc4AQBtW,harihitode,"@anilbommareddy Hi, I have the same interests to you about porting Autoware to some emdedded platforms.
Dose your target board have Ubuntu or any OS supporting ROS2 stack?"
autware source code can build and test in Hardware environment like Renesas environment,D_kwDOAnasMc4ARfxb,2022-11-21T13:00:30Z,anilbommareddy,4,Answered,DC_kwDOAnasMc4AQNlk,anilbommareddy,@harihitode yes it have Ubuntu packages.
autware source code can build and test in Hardware environment like Renesas environment,D_kwDOAnasMc4ARfxb,2022-11-21T13:00:30Z,anilbommareddy,4,Answered,DC_kwDOAnasMc4AQOHZ,harihitode,"Hi, @anilbommareddy 

Basically you can build Autoware.universe on any Ubuntu-supported platforms except some packages like scenario simulator or tensor-rt based perception packages. They might depend on Intel or nvidia specific libraries.

As @liuXinGangChina says in https://github.com/orgs/autowarefoundation/discussions/3058#discussioncomment-4251563, some tweaks will be required to run object detection without GPGPU. 

YOLO v4 is the NN model for object detection now and it seems compute-intensive. 
There are another detection packages, Euclidean Clustering using LiDAR, but it also takes lots of CPU power.

I have ported Autoware to a non-Intel systems. I am sure you can also do it if your system's CPU power meets your Autoware configurations.
"
autware source code can build and test in Hardware environment like Renesas environment,D_kwDOAnasMc4ARfxb,2022-11-21T13:00:30Z,anilbommareddy,4,Answered,DC_kwDOAnasMc4AQBv0,liuXinGangChina,"Hi, @anilbommareddy .
Currently you can run autoware without build from the source code. Please take look into this [tutorial](https://github.com/autowarefoundation/open-ad-kit-docs/blob/main/docs/version-2.0/start-guide/installation/index.md)

Autoware use yolo(tensor-rt based) for camera based segmentation of pedestrian or obstacle. You may need to implement that part using the unique neural accelerator on your board.

Welcome joining the Autoware big family!
Happy hacking!"
autware source code can build and test in Hardware environment like Renesas environment,D_kwDOAnasMc4ARfxb,2022-11-21T13:00:30Z,anilbommareddy,4,Answered,DC_kwDOAnasMc4AQNrc,arjunshetty955,"@liuXinGangChina @harihitode  @anilbommareddy  I'd also interest in porting Autoware to embedded platforms -multi core envrinoment(CPU) instead of using GPU accelerator.off course GPU accelerator may have better performance compared to multi core environment.And also I would like to contribute and check  feasibility in multi core environment like shared/Distributed environment using OpenMP+OpenMPI.  I'm able successful build autoware branch . Could you please help me how to test the use cases like traffic light detection use case,lidar_centerpoint use case,euclidean_cluster - with using simulator + data sets need to uses  and without using simulator +data set."
autware source code can build and test in Hardware environment like Renesas environment,D_kwDOAnasMc4ARfxb,2022-11-21T13:00:30Z,anilbommareddy,4,Answered,DC_kwDOAnasMc4AQN-r,liuXinGangChina,"hi, @arjunshetty955 
1. For testcase like traffic light detection , you need some work to run NN-models on cpu rather than gpu( like using TVM)
2. For testing, you may consider using autoware's new-released offcial simulator [AWSIM ](https://github.com/tier4/AWSIM)to generate sensor data

Welcome joining the Autoware big family!
Happy hacking"
autware source code can build and test in Hardware environment like Renesas environment,D_kwDOAnasMc4ARfxb,2022-11-21T13:00:30Z,anilbommareddy,4,Answered,DC_kwDOAnasMc4AQOFL,arjunshetty955,"Hi liuXinGangChina  , 
For euclidean_cluster and lidar_centerpoint  use cases also need some work to run NN-Models on CPU.?
is any sample data can be run in Ubuntu(Desktop) environment like hard coded in command line like terminal rather than using Simulator or test tools. ? 
In this link https://autowarefoundation.github.io/autoware-documentation/main/how-to-guides/running-autoware-without-cuda mentioned Running traffic light detection without CUDA-It mean this traffic light dection run in CPU environment ?"
autware source code can build and test in Hardware environment like Renesas environment,D_kwDOAnasMc4ARfxb,2022-11-21T13:00:30Z,anilbommareddy,4,Answered,DC_kwDOAnasMc4AQQHR,liuXinGangChina,"hi, @harihitode 
euclidean_cluster only use cpu to do the math
while lidar_centerpoint is definitely an nn based solution 

yes，any nodes in autoware is developed following the data-driven concept. If you want to test them you have to feed some data into those nodes( eg. data from a rosbag or data from a real sensor or data from a simulator)

Happy hacking!"
autware source code can build and test in Hardware environment like Renesas environment,D_kwDOAnasMc4ARfxb,2022-11-21T13:00:30Z,anilbommareddy,4,Answered,DC_kwDOAnasMc4AQrYF,anilbommareddy,"I'd following the questions on Autoware.it help me on better understanding in CPU environment i.e without using GPU-to implement that part using the unique neural accelerator on your board.

1. for complete use case like 360-degree sensing by the camera-LiDAR fusion or Recognition of dynamic objects or any sample use case-how to understand  code flow & testing flow using Data sets via command line in terminal example:
$ rosbag play --pause ~/shared_dir/sample_moriyama_150324.bag --clock
$roslaunch autoware_quickstart_examples my_map.launch
$roslaunch autoware_quickstart_examples my_sensing.launch
$ roslaunch lidar_localizer ndt_matching_monitor.launch &
$ rostopic echo /ndt_monitor/ndt_status

2.How to build autoware.universe(https://github.com/autowarefoundation/autoware.universe.git) repo only and test .
3.I tried to download below sample data gets and got an error like timeout
wget http://db3.ertl.jp/autoware/sample_data/sample_moriyama_data.tar.gz
$ wget http://db3.ertl.jp/autoware/sample_data/sample_moriyama_150324.tar.gz
4.Euclidean Clustering using LiDAR:Could you please provide a sample data to test via command  line in the terminal.
5.In my environment not able to use AWSIM simulation demo due to GPU drivers issues"
autware source code can build and test in Hardware environment like Renesas environment,D_kwDOAnasMc4ARfxb,2022-11-21T13:00:30Z,anilbommareddy,4,Answered,DC_kwDOAnasMc4AQOKV,arjunshetty955,"hi @Daichi Murakami,
I'm also able to build autoware like
https://github.com/autowarefoundation/autoware.git in the Ubuntu
environment.
Here I'm not able to figure out how to run one sample test case in an
autoware environment to check the behaviour of CPU serial execution(without
using Cuda/GPU) and underon it stand  and try to execute  in openMPI+openMP
environment rather than using Cuda wrt Autoware.

On Mon, Nov 28, 2022 at 4:09 PM Daichi Murakami ***@***.***>
wrote:

> Hi, @anilbommareddy <https://github.com/anilbommareddy>
>
> Basically you can build Autoware.universe on any Ubuntu-supported
> platforms except some packages like scenario simulator or tensor-rt based
> perception packages. They might depend on Intel or nvidia specific
> libraries.
>
> As @liuXinGangChina <https://github.com/liuXinGangChina> says in
> https://github.com/orgs/autowarefoundation/discussions/3058#discussioncomment-4251563,
> some tweaks will be required to run object detection without GPGPU.
>
> YOLO v4 is the NN model for object detection now and it seems
> compute-intensive.
> There are another detection packages, Euclidean Clustering using LiDAR,
> but it also takes lots of CPU power.
>
> I have ported Autoware to a non-Intel systems. I am sure you can also do
> it if your system's CPU power meets your Autoware configurations.
>
> —
> Reply to this email directly, view it on GitHub
> <https://github.com/orgs/autowarefoundation/discussions/3058#discussioncomment-4252121>,
> or unsubscribe
> <https://github.com/notifications/unsubscribe-auth/APVCKAZD2OLY4S4WBX3P3XLWKSDVRANCNFSM6AAAAAASGTZ2RE>
> .
> You are receiving this because you were mentioned.Message ID:
> ***@***.***
> .com>
>
"
autware source code can build and test in Hardware environment like Renesas environment,D_kwDOAnasMc4ARfxb,2022-11-21T13:00:30Z,anilbommareddy,4,Answered,DC_kwDOAnasMc4AQSj5,harihitode,"Hi, @arjunshetty955 

@liuXinGangChina already has commented a helpful answer, but this is just my note ;)

For lidar point segmentation, Autoware.universe has two packages. One is lidar center point  using an NN model and the other is euclidian clustering without NN model.

Now the packages which use NN models are not executed on CPU-only environment. Therefore you can check only euclidian clustering as lidar point segmentation in your case. (Every other NN packages llike traffic light recognition, object detection need GPGPU.)

For dataset to check there functionalities, there seems not to be any rosbag, but you can use [AWSIM](https://tier4.github.io/AWSIM/GettingStarted/QuickStartDemo/)  which is a full-end to end world simulator including LiDAR/Camera sensors.

I'm sure you can generate dataset as you wish using AWSIM. I can actually generate dataset to check traffic-light-recognition successfully. "
autware source code can build and test in Hardware environment like Renesas environment,D_kwDOAnasMc4ARfxb,2022-11-21T13:00:30Z,anilbommareddy,4,Answered,DC_kwDOAnasMc4AQTKr,arjunshetty955,"@harihitode Thank you for sharing your note. I will check on this note in my environment 

@harihitode  and @liuXinGangChina: Instead of using colcon configuration and colcon build, Autoware repos can be build using Cmake-gcc/clang ?"
Allow PR to merge without global code owners' approval,D_kwDOAnasMc4ARgX4,2022-11-22T07:31:03Z,isamu-takagi,4,Answered,,,
Allow PR to merge without global code owners' approval,D_kwDOAnasMc4ARgX4,2022-11-22T07:31:03Z,isamu-takagi,4,Answered,DC_kwDOAnasMc4AQB63,kenji-miyake,@xmfcx Could you comment on this?
Allow PR to merge without global code owners' approval,D_kwDOAnasMc4ARgX4,2022-11-22T07:31:03Z,isamu-takagi,4,Answered,DC_kwDOAnasMc4AQB96,xmfcx,"@isamu-takagi 
So I also had trouble with this in general, so there are 2 solutions we could think of:
- Disable code-owner requirement for merging
- Bypass this requirement by temporarily disabling it with admin rights
- Create a new team [called global code owners](https://github.com/orgs/autowarefoundation/teams/autoware-global-codeowners) that is added to every package in the [CODEOWNERS file](https://github.com/autowarefoundation/autoware.universe/blob/main/.github/CODEOWNERS) with [this workflow setting](https://github.com/autowarefoundation/autoware.universe/blob/main/.github/workflows/update-codeowners-from-packages.yaml#L30)

Even with this, while merging this [simple PR](https://github.com/autowarefoundation/autoware.universe/pull/2342), I had to add @kaancolak to global codeowners, merge it, remove him from the team.

Also another side effect of this team is, any new PR created adds me as reviewer, I get notifications for everything 😢 

Right now I don't know how to achieve this in any other way.

> With the introduction of global code owners, I can no longer merge into packages that I maintain. I used to be able to merge with someone's approve, but now I need global code owner's approve.

Can you show a PR this has occured? I don't think global code owners should affect anything, it is just an extra reviewer for PRs."
Allow PR to merge without global code owners' approval,D_kwDOAnasMc4ARgX4,2022-11-22T07:31:03Z,isamu-takagi,4,Answered,DC_kwDOAnasMc4AQB-g,xmfcx,"@isamu-takagi 
I found a PR: https://github.com/autowarefoundation/autoware.universe/pull/2319

You are the only maintainer of this package https://github.com/autowarefoundation/autoware.universe/blob/main/system/default_ad_api/package.xml#L7

Maybe it's better to add @yukkysaito @kenji-miyake @mitsudome-r as maintainers of the package since they have reviewed it and approved it?"
Allow PR to merge without global code owners' approval,D_kwDOAnasMc4ARgX4,2022-11-22T07:31:03Z,isamu-takagi,4,Answered,DC_kwDOAnasMc4AQB_d,xmfcx,"@isamu-takagi 
This issue will arise for all the packages where the a package has only one maintainer in the [CODEOWNERS](https://github.com/autowarefoundation/autoware.universe/blob/main/.github/CODEOWNERS) and the maintainer tries to make a change to their code.

And solution is either:
- Disable codeowners requirement in general
- Encourage maintainers to add co-maintainers for reviewing
- Ask [autoware-global-codeowners](https://github.com/orgs/autowarefoundation/teams/autoware-global-codeowners) to review your package since you cannot review your own PR

Personally I find codeowners requirement in general too restricting. But @kenji-miyake thinks it is essential to maintaining the code quality, I respect it. What do you think?"
Allow PR to merge without global code owners' approval,D_kwDOAnasMc4ARgX4,2022-11-22T07:31:03Z,isamu-takagi,4,Answered,DC_kwDOAnasMc4AQCBb,isamu-takagi,"Thank you. Adding co-maintainers looks reasonable. I want to use the github group, but I can't write it in package.xml. I'll try to think of a way."
Allow PR to merge without global code owners' approval,D_kwDOAnasMc4ARgX4,2022-11-22T07:31:03Z,isamu-takagi,4,Answered,DC_kwDOAnasMc4AQCCc,xmfcx,"@isamu-takagi You can create a PR to edit all your packages' package.xml files, I will approve it."
Allow PR to merge without global code owners' approval,D_kwDOAnasMc4ARgX4,2022-11-22T07:31:03Z,isamu-takagi,4,Answered,DC_kwDOAnasMc4AQCC0,xmfcx,"@isamu-takagi If you search for `isamu.takagi@tier4.jp @autowarefoundation/autoware-global-codeowners` in [the CODEOWNERS file](https://github.com/autowarefoundation/autoware.universe/blob/main/.github/CODEOWNERS) you can filter the packages that only you are the maintainer.

For now you seem to have 11 packages that you can add more maintainers.

![firefox_2022-11-22_11-30-48](https://user-images.githubusercontent.com/10751153/203264094-5bc77a9f-f081-4849-a641-0feab518333a.png)
"
Allow PR to merge without global code owners' approval,D_kwDOAnasMc4ARgX4,2022-11-22T07:31:03Z,isamu-takagi,4,Answered,DC_kwDOAnasMc4AQU2R,angry-crab,"May I ask what is the decision regarding this problem? I think it is quite common for packages to have a single maintainer. Are we enforcing this global codeowner approval? Personally, I feel it is too strict. "
Allow PR to merge without global code owners' approval,D_kwDOAnasMc4ARgX4,2022-11-22T07:31:03Z,isamu-takagi,4,Answered,DC_kwDOAnasMc4AQU38,kenji-miyake,"@xmfcx Could you comment on this?
Actually, I feel so, too. But as written in https://github.com/orgs/autowarefoundation/discussions/3060#discussioncomment-4202461, I believe requiring codeowners' approval is necessary to keep the package quality.
Can I ask what your problem is, again?"
Allow PR to merge without global code owners' approval,D_kwDOAnasMc4ARgX4,2022-11-22T07:31:03Z,isamu-takagi,4,Answered,DC_kwDOAnasMc4AQU_P,mitsudome-r,"> I believe requiring codeowners' approval is necessary to keep the package quality.

I agree with this as well. We don't want to have unintended change made to packages, and we should have the codeowner to at least have a look. 

I think the following would be the best approach for now:
- There should be at least one maintainer for each package. There can be multiple maintainers assigned per package if necessary.
- When a PR is created to the package, it should have at least one approval from one of the maintainers of the package.
- If the PR includes changes to multiple packages, it should have approval from at least one maintainer from each package.
- Since we do not want to have PRs to be blocked forever, we can merge the PR with other developer's approval if there are no reaction from the maintainer (maybe a week or two)"
Allow PR to merge without global code owners' approval,D_kwDOAnasMc4ARgX4,2022-11-22T07:31:03Z,isamu-takagi,4,Answered,DC_kwDOAnasMc4ASLns,xmfcx,"@angry-crab If it was up to me, I would remove enforcing code-owners in general. But to keep the code quality up, it was decided to have the check.

> Why do we have a global-code-owners team which owns all the packages in Autoware?

We wanted to have a few people with approving any pull request for overdue approvals from the code owners.
There were 2 ways to do it in github:
1) Temporarily edit autoware.universe settings to allow admins to override approvals
  * Pros:
    * Repos with single maintainers can still merge with any reviewer
  * Cons:
    * Need to edit the administrative settings each time you need to approve something
    * It is possible to forget the setting open
    * Risk of changing other dangerous settings increases
2) Create and add global-code-owners team to every package.
  * Pros:
    * Anyone added to the team can approve any PRs
    * Fairly safe
  * Cons:
    * Single maintainers still require global-code-owner approval
    * For members of this team, they get tagged in each new pr is opened. If you stay in the team, you will drown in notifications.
      * For this reason I get in and get out of the group when I need to approve something for the team.

For this situation, I refuse the 1st option because it is unsafe. Therefore we went with 2nd option.

@angry-crab what are your opinions on this matter?"
Allow PR to merge without global code owners' approval,D_kwDOAnasMc4ARgX4,2022-11-22T07:31:03Z,isamu-takagi,4,Answered,DC_kwDOAnasMc4ASqgn,kenji-miyake,"Created a thread on GitHub Community's Discussions.
https://github.com/orgs/community/discussions/46626"
Allow PR to merge without global code owners' approval,D_kwDOAnasMc4ARgX4,2022-11-22T07:31:03Z,isamu-takagi,4,Answered,DC_kwDOAnasMc4AV3aL,kenji-miyake,"@xmfcx @mitsudome-r @isamu-takagi How about this? Can I apply these rules?
https://github.com/orgs/community/discussions/46626#discussioncomment-5731948"
Allow PR to merge without global code owners' approval,D_kwDOAnasMc4ARgX4,2022-11-22T07:31:03Z,isamu-takagi,4,Answered,DC_kwDOAnasMc4AV5lQ,xmfcx,"@kenji-miyake sure, let's try it!

Thanks for investigating the issue :)"
Allow PR to merge without global code owners' approval,D_kwDOAnasMc4ARgX4,2022-11-22T07:31:03Z,isamu-takagi,4,Answered,DC_kwDOAnasMc4AV7zu,kenji-miyake,"I've created two rules.
- https://github.com/autowarefoundation/autoware.universe/settings/rules/7925
- https://github.com/autowarefoundation/autoware.universe/settings/rules/7921

But it seems there is an issue with `Require linear history`. :cry: 
https://github.com/orgs/community/discussions/52652#discussioncomment-5648250"
Allow PR to merge without global code owners' approval,D_kwDOAnasMc4ARgX4,2022-11-22T07:31:03Z,isamu-takagi,4,Answered,DC_kwDOAnasMc4AYCJO,kenji-miyake,"> 4. Bug fixes
Linear merge history could block bypass

@xmfcx Fixed!
https://github.blog/changelog/2023-06-27-repository-rules-public-beta-updates/"
Autonomy Software WG Meeting 2022/11/29,D_kwDOAnasMc4ARgfJ,2022-11-22T09:59:12Z,BonoloAWF,5,Answered,,,
Autonomy Software WG Meeting 2022/11/29,D_kwDOAnasMc4ARgfJ,2022-11-22T09:59:12Z,BonoloAWF,5,Answered,DC_kwDOAnasMc4AQNzP,hueirutseng,[ITRI Bus Status Update ](https://drive.google.com/file/d/1sVSfrVJrS4NqM7txr_VzqjMYLIQGFeHM/view?usp=sharing)
Autonomy Software WG Meeting 2022/11/29,D_kwDOAnasMc4ARgfJ,2022-11-22T09:59:12Z,BonoloAWF,5,Answered,DC_kwDOAnasMc4AQQWg,mehmetdogru,I won't be able to attend ASWG meeting this week. However here is the [link to the table](https://docs.google.com/spreadsheets/d/1lY9tLh685qWQ9LYSwIfB49qE7PL6vpsCd-17ZRE7Lrw/edit?usp=sharing) includes the problems/changes we have made during development phase of the project. Sorry that we didn't create all the issues yet.
Autonomy Software WG Meeting 2022/11/29,D_kwDOAnasMc4ARgfJ,2022-11-22T09:59:12Z,BonoloAWF,5,Answered,DC_kwDOAnasMc4AQRJR,xmfcx,"# Issues to discuss

## Bus ODD Nov-Dec Milestone
- https://github.com/autowarefoundation/autoware.universe/issues/2125
  - No updates.
- https://github.com/autowarefoundation/autoware.universe/issues/2099
  - https://github.com/autowarefoundation/autoware.universe/pull/2350
    - Waiting for review from @TakaHoribe 
- https://github.com/autowarefoundation/autoware.universe/issues/2182
  - https://github.com/autowarefoundation/autoware.universe/pull/2288
    - Review approved, is additional review required?
- https://github.com/autowarefoundation/autoware.universe/issues/1121
  - Old PR was closed, new PR is created: https://github.com/autowarefoundation/autoware.universe/pull/2401
    - Waiting for review.
- https://github.com/autowarefoundation/autoware.universe/issues/1543
  - Waiting for response from @brkay54 
- https://github.com/autowarefoundation/autoware.universe/issues/2208
  - https://github.com/autowarefoundation/autoware.universe/pull/2209
    - Waiting for rosbags from @mehmetdogru 
- https://github.com/autowarefoundation/autoware.universe/issues/1761
  - https://github.com/autowarefoundation/autoware.universe/pull/2088
    - Ongoing discussion.
- https://github.com/autowarefoundation/autoware.universe/issues/2222
  - https://github.com/autowarefoundation/autoware.universe/pull/2290 this is closed, why?
  - Is there a plan for this issue?
- https://github.com/autowarefoundation/autoware.universe/issues/1253
  - https://github.com/autowarefoundation/autoware-documentation/issues/231
    - Waiting for action from @mitsudome-r 
- https://github.com/autowarefoundation/autoware.universe/issues/1716
  - https://github.com/autowarefoundation/autoware.universe/pull/1999
    - Any updates @beyzanurkaya ?
- https://github.com/autowarefoundation/autoware.universe/issues/563
  - https://github.com/autowarefoundation/autoware-documentation/pull/180
    - Ongoing discussion, waiting for response from @xmfcx 
- https://github.com/autowarefoundation/autoware.universe/issues/611
  - https://github.com/autowarefoundation/autoware.universe/pull/647
    - Review is done, waiting for updates from @mehmetdogru 
- https://github.com/autowarefoundation/autoware.universe/issues/2044
  - https://github.com/autowarefoundation/autoware.universe/pull/2312
    - Ongoing discussion.
- https://github.com/autowarefoundation/autoware.universe/issues/2330
  - Waiting for transition to humble.
- https://github.com/autowarefoundation/autoware.universe/issues/2213
  - https://github.com/autowarefoundation/autoware.universe/pull/2296
    - Updates made, waiting for another round of reviews.
- https://github.com/autowarefoundation/autoware.universe/issues/2390
  - Open bug issue.
- https://github.com/autowarefoundation/autoware.universe/issues/2321
  - https://github.com/autowarefoundation/autoware.universe/pull/2333
    - Approved but waiting for action from @beyzanurkaya 
- https://github.com/autowarefoundation/autoware.universe/pull/2297
  - Will be merged.
- https://github.com/autowarefoundation/autoware.universe/issues/1715
  - Ongoing discussion. 

## PRs waiting for review

- https://github.com/autowarefoundation/autoware.universe/pull/2314
  - Being reviewed by @satoshi-ota 
- https://github.com/autowarefoundation/autoware.universe/pull/1794
  - Discuss with @esteve 
- https://github.com/autowarefoundation/autoware.universe/pull/1401
  - Waiting for review from @badai-nguyen 

## [Remaining bugs](https://github.com/autowarefoundation/autoware.universe/issues?q=is%3Aopen+is%3Aissue+label%3Abug+-label%3A%22high+priority%22+-milestone%3A%22Bus+ODD+Nov-Dec+Milestone%22+)
- "
Autonomy Software WG Meeting 2022/11/29,D_kwDOAnasMc4ARgfJ,2022-11-22T09:59:12Z,BonoloAWF,5,Answered,DC_kwDOAnasMc4AQRPw,maxime-clem,"I want to quickly present my progress on https://github.com/autowarefoundation/autoware.universe/issues/2182
- Proposal was presented 2 weeks ago (https://github.com/autowarefoundation/autoware/files/10012666/AWF-202211-DynamicDrivableArea.pdf).
- Prototype is implemented here: https://github.com/maxime-clem/autoware.universe/tree/drivable-area-expander/planning/drivable_area_expander
- I want people to try this prototype to check if it solves their issue with bus vehicles.

<details>
  <summary><h3>Demo videos</h3></summary>

#### Original issue with current Autoware.

https://user-images.githubusercontent.com/78338830/204562155-d55dc256-ca99-4af5-9933-195626f10dc6.mp4

#### Issue fixed with the prototype.

https://user-images.githubusercontent.com/78338830/204562275-bd8ac205-064d-4d7e-9224-a620939424b4.mp4

#### Demo of the different parameters.

https://user-images.githubusercontent.com/78338830/204562343-c765c351-053b-4924-973f-381fa6a5792e.mp4

</details>"
Autonomy Software WG Meeting 2022/11/29,D_kwDOAnasMc4ARgfJ,2022-11-22T09:59:12Z,BonoloAWF,5,Answered,DC_kwDOAnasMc4AQRQ2,angry-crab,I want to present the current tvm pipeline. 
Autonomy Software WG Meeting 2022/11/29,D_kwDOAnasMc4ARgfJ,2022-11-22T09:59:12Z,BonoloAWF,5,Answered,DC_kwDOAnasMc4ATaKQ,guankou,i want to know how do you implement the right-hand driving of vehicles?
Autonomy Software WG Meeting 2022/11/29,D_kwDOAnasMc4ARgfJ,2022-11-22T09:59:12Z,BonoloAWF,5,Answered,DC_kwDOAnasMc4AQRR_,Zeysthingz,I want to present my progress on traffic_light_ssd_fine_detector module.
Autonomy Software WG Meeting 2022/11/29,D_kwDOAnasMc4ARgfJ,2022-11-22T09:59:12Z,BonoloAWF,5,Answered,DC_kwDOAnasMc4AQRVc,xmfcx,"@lchojnack presented the solution demo for:
- https://github.com/autowarefoundation/autoware.universe/issues/2213
- https://github.com/autowarefoundation/autoware.universe/pull/2296"
gnss pose has 90 degree difference from the car,D_kwDOAnasMc4ARglF,2022-11-22T12:09:48Z,malayjerdi,1,Answered,,,
gnss pose has 90 degree difference from the car,D_kwDOAnasMc4ARglF,2022-11-22T12:09:48Z,malayjerdi,1,Answered,DC_kwDOAnasMc4AQJ2o,liuXinGangChina,"Hi, @farhang760 .
It's simply caused by the difference between the gps-heading coordinate system and the ros map coordinate system.
gps-heading coordinate system treat north 0 degree and ros map coordinate system treat east（usually the x-axis of the map）0 degree.
welcome to Autoware big family, happy hacking!

这个是由于地图坐标系和gps坐标系的坐标轴不统一导致的，两者坐标系正好相差90°。
gps的航向角以正北为0°，ros的地图坐标系以正东为0°。
欢迎加入Autoware大家庭，祝你调试成功！"
2022-11-23 Simulation Working Group Meeting,D_kwDOAnasMc4ARgwa,2022-11-22T15:46:31Z,Hyeongseok-Jeon,0,Unanswered,,,
Problems running Autoware with K3s on PCU platform,D_kwDOAnasMc4ARhMQ,2022-11-23T06:58:37Z,cyn-liu,1,Answered,,,
Problems running Autoware with K3s on PCU platform,D_kwDOAnasMc4ARhMQ,2022-11-23T06:58:37Z,cyn-liu,1,Answered,DC_kwDOAnasMc4AQNkS,caiyuexiang,"This error message usually happens when the architecture of container image is not compatible with the host, or there is insufficient disk space left.
Here is some suggestion:
- Check the support platform of container image with the host's architecture.
- Check the free disk size, and make sure it's enough for k3s to run the container images.

PS: If you had all the checks done but the error persists, you can try to deploy k3s and autoware on another SD card."
Problems running Autoware with K3s on PCU platform,D_kwDOAnasMc4ARhMQ,2022-11-23T06:58:37Z,cyn-liu,1,Answered,DC_kwDOAnasMc4AQNlq,cyn-liu,"Thank you @caiyuexiang  for your patient reply.

I checked the container image and there is no problem.
My PCU has a maximum disk space of 64G, so I tried to replace it with a 128G SD card and then reinstalled K3s.
Finally the problem was solved and Autoware was successfully deployed on the PCU via K3s."
using of road_edge in op_local_planner,D_kwDOAnasMc4ARhPw,2022-11-23T08:27:47Z,pjj707278870,1,Answered,,,
using of road_edge in op_local_planner,D_kwDOAnasMc4ARhPw,2022-11-23T08:27:47Z,pjj707278870,1,Answered,DC_kwDOAnasMc4AQGFa,hatem-darweesh,"It doesn't , you need to modify the code to achieve this yourself. 
you can handle this in either op_trajectory_generator or op_trajectory_evaluator 
check these discussions 
https://github.com/hatem-darweesh/autoware.ai.openplanner/issues/6
"
Mapping WG Meeting 23/11/2022,D_kwDOAnasMc4ARhbW,2022-11-23T11:42:06Z,n-patiphon,5,Answered,,,
Mapping WG Meeting 23/11/2022,D_kwDOAnasMc4ARhbW,2022-11-23T11:42:06Z,n-patiphon,5,Answered,DC_kwDOAnasMc4AQFWK,HamedMesri-TomTom,"TomTom Localization Framework paper:
[paper-localization.pdf](https://github.com/autowarefoundation/autoware/files/10075785/paper-localization.pdf)
"
Mapping WG Meeting 23/11/2022,D_kwDOAnasMc4ARhbW,2022-11-23T11:42:06Z,n-patiphon,5,Answered,DC_kwDOAnasMc4AQFuX,HamedMesri-TomTom,"TomTom presentation:
[AutoWare WG DITM collaboration.pdf](https://github.com/autowarefoundation/autoware/files/10076984/AutoWare.WG.DITM.collaboration.pdf)
"
Mapping WG Meeting 23/11/2022,D_kwDOAnasMc4ARhbW,2022-11-23T11:42:06Z,n-patiphon,5,Answered,DC_kwDOAnasMc4AQKMd,n-patiphon,@HamedMesri-TomTom Thank you very much for sharing the slides!
Mapping WG Meeting 23/11/2022,D_kwDOAnasMc4ARhbW,2022-11-23T11:42:06Z,n-patiphon,5,Answered,DC_kwDOAnasMc4AQKM_,n-patiphon,"> Presentation TomTom
> 
> [TomTom_Corporate_presentation AutoWare Map WG.pdf](https://github.com/autowarefoundation/autoware/files/10075925/TomTom_Corporate_presentation.AutoWare.Map.WG.pdf)

Additional materials from [this comment](https://github.com/autowarefoundation/autoware/discussions/3043#discussioncomment-4216427).
"
Mapping WG Meeting 23/11/2022,D_kwDOAnasMc4ARhbW,2022-11-23T11:42:06Z,n-patiphon,5,Answered,DC_kwDOAnasMc4AQS2c,enesadastec,"Hi,

In meeting notes it says next meeting will be on 30/11/2022 but I can not see on calendar. Do we have meeting today?"
Mapping WG Meeting 23/11/2022,D_kwDOAnasMc4ARhbW,2022-11-23T11:42:06Z,n-patiphon,5,Answered,DC_kwDOAnasMc4AQS4g,n-patiphon,Hi @enesadastec. I think many people agreed to have an additional meeting this week because we couldn't finish discussing all the agenda items. But let's confirm in Discord.
Mapping WG Meeting 23/11/2022,D_kwDOAnasMc4ARhbW,2022-11-23T11:42:06Z,n-patiphon,5,Answered,DC_kwDOAnasMc4AQS7A,n-patiphon,"@enesadastec I think you might have seen it on Discord already, but just to confirm once again. We **do not** have a meeting today."
Mapping WG Meeting 23/11/2022,D_kwDOAnasMc4ARhbW,2022-11-23T11:42:06Z,n-patiphon,5,Answered,DC_kwDOAnasMc4AQTCP,enesadastec,Thank you so much.
Mapping WG Meeting 23/11/2022,D_kwDOAnasMc4ARhbW,2022-11-23T11:42:06Z,n-patiphon,5,Answered,DC_kwDOAnasMc4AQS7P,n-patiphon,"> The following agenda items will be discussed in the next meeting which will be on 30/11/2022

My apologies for changing the meeting schedule back and forth here. We **do not** have an additional today. The next meeting will be on 07/12/2022 as initially planned."
install from source code failed,D_kwDOAnasMc4ARiL2,2022-11-24T04:14:43Z,phoenares,1,Answered,,,
install from source code failed,D_kwDOAnasMc4ARiL2,2022-11-24T04:14:43Z,phoenares,1,Answered,DC_kwDOAnasMc4AQGzV,maxime-clem,"This error message usually happens when running out of memory while building.
You can try again with the `--executor sequential` colcon option to build only one package at a time.
Otherwise you need to increase the memory or swap available.
Please be aware that running Autoware with Windows is not supported (as far as I know) and you may run into other issues.

PS: for console output, it is better if you copy and paste the text rather than post a screenshot."
install from source code failed,D_kwDOAnasMc4ARiL2,2022-11-24T04:14:43Z,phoenares,1,Answered,DC_kwDOAnasMc4AQG95,phoenares,"thanks for your reply.
I increased the memory and swap, and build sucessfully"
ros2_foxy  colcon build error,D_kwDOAnasMc4ARjLz,2022-11-25T09:42:09Z,g2181053,2,Answered,,,
ros2_foxy  colcon build error,D_kwDOAnasMc4ARjLz,2022-11-25T09:42:09Z,g2181053,2,Answered,DC_kwDOAnasMc4AQKJh,kenji-miyake,"@g2181053 We're sorry, but ROS 2 Foxy isn't supported in Autoware.
Please ask ROS-related questions on [ROS Answers](https://answers.ros.org/questions/)."
ros2_foxy  colcon build error,D_kwDOAnasMc4ARjLz,2022-11-25T09:42:09Z,g2181053,2,Answered,DC_kwDOAnasMc4AQKmg,evshary,"Just out of curiosity, why do you want to build ROS 2 foxy by yourselves?
If you want to use Autoware, I guess this is not necessary.
You can follow the instruction in [Autoware documentation](https://autowarefoundation.github.io/autoware-documentation/main/installation/), and the instruction will also install the ROS binary for you (Should be galactic or humble).
If the reason you build ROS 2 foxy is for other purposes, I agree with @kenji-miyake that this might be suitable to ask on ROS answers."
2022-11-29 ODD working group weekly meeting (121),D_kwDOAnasMc4ARkiK,2022-11-28T08:22:54Z,Igata-ctrl,0,Unanswered,,,
Does Autoware support multiple cameras/LIDAR attached to the same vehicle?,D_kwDOAnasMc4ARl2Q,2022-11-29T13:53:09Z,MarioAlmelaUMH,1,Answered,,,
Does Autoware support multiple cameras/LIDAR attached to the same vehicle?,D_kwDOAnasMc4ARl2Q,2022-11-29T13:53:09Z,MarioAlmelaUMH,1,Answered,DC_kwDOAnasMc4AQSX1,mitsudome-r,"Yes, you can use multiple lidars/cameras with Autoware. In general, we expect sensors to be publishing their data with different topic names for each sensors, and users should modify launch files to connect appropriate topic for their needs.

If there are multiple lidars, we expect users to provide the following topics:
* PointCloud2 message from each lidar as different topic (e.g., `/sensing/{lidar_name}/pointcloud` )
* concatenated PointCloud2 message from all lidars (e.g., `/sensing/lidar/conatenated/pointcloud` )
Users should modify their launch files for localization/perception modules to choose which ever topic that matches their use cases. For example, user might only want to use the lidar topic that is attached on top of the vehicle for localization if they have enough field of view(less points means less computational costs), whereas for perception you would probably want to use combined points to have less blind spots.
![image](https://user-images.githubusercontent.com/43976834/204685733-ca0c4c78-e142-44b6-8193-b489d708af06.png)


For cameras, there is no point in fusing them so drivers from each camera should be publishing topics in different topic names (`/sensing/camera/{camera_name}/image_raw`). Our default [perception launch](https://github.com/autowarefoundation/autoware.universe/blob/main/launch/tier4_perception_launch/launch/perception.launch.xml) is able to cover up to 8 cameras by giving camera topic names as arguments. It will do camera detection on each camera topic and fuse the detection results within perception module.

"
Does Autoware support multiple cameras/LIDAR attached to the same vehicle?,D_kwDOAnasMc4ARl2Q,2022-11-29T13:53:09Z,MarioAlmelaUMH,1,Answered,DC_kwDOAnasMc4AQS0P,MarioAlmelaUMH,"Thank you very much for your quick answer! I'm starting to work with Autoware and I wasn't sure, but it is clear now."
What is the current development state of RADAR functionality?,D_kwDOAnasMc4ARl2W,2022-11-29T13:54:17Z,MarioAlmelaUMH,1,Answered,,,
What is the current development state of RADAR functionality?,D_kwDOAnasMc4ARl2W,2022-11-29T13:54:17Z,MarioAlmelaUMH,1,Answered,DC_kwDOAnasMc4AR11y,MarioAlmelaUMH,@scepter914 any feedback?
What is the current development state of RADAR functionality?,D_kwDOAnasMc4ARl2W,2022-11-29T13:54:17Z,MarioAlmelaUMH,1,Answered,DC_kwDOAnasMc4AR8aM,scepter914,"@MarioAlmelaUMH 

I'm sorry for the late reply.
I share radar development status in TIER IV.
If you have any questions, please feel free to ask.
Thank you.

### Current status for radar objects pipeline

- [msgs convertor](https://github.com/autowarefoundation/autoware.universe/tree/main/perception/radar_tracks_msgs_converter)
- [radar fusion](https://github.com/autowarefoundation/autoware.universe/tree/main/perception/radar_fusion_to_detected_object)
  - Fusion between objects based on radar outputs and objects based on LiDAR detection.
  - Attach velocity information from radar to Detected objects.
  - Improve the low confidence of detected objects.
- A temporary radar fusion pipeline is implemented. Related launch files are [lidar_radar_based_detection.launch.xml](https://github.com/autowarefoundation/autoware.universe/blob/main/launch/tier4_perception_launch/launch/object_recognition/detection/lidar_radar_based_detection.launch.xml) and [radar_based_detection.launch.xml](https://github.com/autowarefoundation/autoware.universe/blob/main/launch/tier4_perception_launch/launch/object_recognition/detection/radar_based_detection.launch.xml).

### Current status for radar pointcloud pipeline

- According [this proposal](https://github.com/scepter914/autoware-radar-architecture-proposal/blob/main/proposal_radar_sensing.md). we made the prototype package for radar pointcloud as below
  - <https://github.com/autowarefoundation/autoware.universe/tree/main/sensing/radar_scan_to_pointcloud2>
  - <https://github.com/autowarefoundation/autoware.universe/tree/main/sensing/radar_static_pointcloud_filter>
  - <https://github.com/autowarefoundation/autoware.universe/tree/main/sensing/radar_threshold_filter>
- We made radar detection package (Input: radar pointcloud, Output: Detected objects) as a trial, but it's not yet at a level to publish.

### Future development

- Camera-Radar fusion

Now we try Camera-Radar fusion, especially Camera-Radar BEV fusion like [Simple-BEV](https://simple-bev.github.io/), but the specific time plan is undecided.

- LiDAR-Radar fusion

We will try LiDAR-Radar fusion to see long distance (100m over).
The inputs of this LiDAR-Radar fusion will be objects based on radar outputs and LiDAR pointcloud.
The fusion package estimate object shape from pointcloud information for distant objects detected by radar.
"
What is the current development state of RADAR functionality?,D_kwDOAnasMc4ARl2W,2022-11-29T13:54:17Z,MarioAlmelaUMH,1,Answered,DC_kwDOAnasMc4AR8ge,MarioAlmelaUMH,"Ok, thank you for your answer, 田中さん. ありがとうございます."
What is the current development state of RADAR functionality?,D_kwDOAnasMc4ARl2W,2022-11-29T13:54:17Z,MarioAlmelaUMH,1,Answered,DC_kwDOAnasMc4Aaw3i,damodarRohit,"Is there any update on any of the Future development or any plan to publish the 'radar detection package (Input : pointcloud, Output : detected objects)'? I came across the Radar detection pipeline activity in this thread [https://github.com/orgs/autowarefoundation/discussions/3654] but I am not able to see the Slides attached or any related meeting notes."
What is the current development state of RADAR functionality?,D_kwDOAnasMc4ARl2W,2022-11-29T13:54:17Z,MarioAlmelaUMH,1,Answered,DC_kwDOAnasMc4AbKtP,scepter914,"TIER IV focus on finding a radar device with better performance now and plan to use radars by not pointcloud publish mode but object publish mode.
We tried ML-based radar detection like SimpleBEV, but it did not work now because of low accuracy from radar information.
So for now, unfortunately, there is no plan to make radar detection package (Input : radar pointcloud, Output : detected objects)."
Open AD Kit WG meeting 2022/11/29,D_kwDOAnasMc4ARl2q,2022-11-29T13:58:30Z,armaganarsln,0,Unanswered,,,
About Autoware development and documentation,D_kwDOAnasMc4ARl-7,2022-11-29T16:31:06Z,MarioAlmelaUMH,1,Answered,,,
About Autoware development and documentation,D_kwDOAnasMc4ARl-7,2022-11-29T16:31:06Z,MarioAlmelaUMH,1,Answered,DC_kwDOAnasMc4AQSU6,evshary,"@MarioAlmelaUMH I believe [this site](https://autowarefoundation.github.io/autoware-documentation/main/) is the official documentation.

For the version of Autoware, [the tutorial](https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/source-installation/) guides you to use the main branch, which is based on ROS 2 Galatic.
Also, you can use the humble branch, which is based on ROS 2 Humble.

![image](https://user-images.githubusercontent.com/456210/204680795-f96e0028-5fc4-4328-bbd0-eaebbc7096e9.png)

For me, if I want to fix my Autoware environment version, I often use the docker image [here](https://github.com/autowarefoundation/autoware/pkgs/container/autoware-universe). They are fixed by the date.

The development tool I use is vscode, but I'm not sure whether there is another better tool.
You can refer to @kenji-miyake 's answer [here](https://github.com/orgs/autowarefoundation/discussions/2966#discussioncomment-3955884) about the useful extensions in vscode."
About Autoware development and documentation,D_kwDOAnasMc4ARl-7,2022-11-29T16:31:06Z,MarioAlmelaUMH,1,Answered,DC_kwDOAnasMc4AQSwJ,yukkysaito,">I believe [this site](https://autowarefoundation.github.io/autoware-documentation/main/) is the official documentation.

Yes. [autoware-documentation site](https://autowarefoundation.github.io/autoware-documentation/main/) is the official documentation.

>https://github.com/autowarefoundation/autoware.universe, https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-architecture/node-diagram/, https://autoware.readthedocs.io/en/feature-documentation_rtd/index.html

- https://github.com/autowarefoundation/autoware.universe directs to autoware-documentation site.
- https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-architecture/node-diagram/ is part of autoware-documentation site.
- https://autoware.readthedocs.io/en/feature-documentation_rtd/index.html is deprecated site. So, it should be deleted and I'm a maintainer of this site. I'll deprecate soon.

>Also, in https://github.com/autowarefoundation/autoware.universe, I’ve noticed that it is not clear which version of Autoware is the tested, stable one, and which ones are new or in development. How does Autoware’s version system work?

We are discussing version control and the tag will be coming soon.
cc @mitsudome-r 


>Additionally, as an Autoware developer, which development and debugging tools are recommended to work on Autoware (e.g. Visual Studio)?


I think many developers use VScode.
@kenji-miyake 
Miyake-san is the most knowledgeable."
About Autoware development and documentation,D_kwDOAnasMc4ARl-7,2022-11-29T16:31:06Z,MarioAlmelaUMH,1,Answered,DC_kwDOAnasMc4AQSyK,kenji-miyake,"Thank you @evshary and @yukkysaito for your comments!
Though they are almost perfect, I'll add some additional comments.

> https://github.com/autowarefoundation/autoware.universe directs to autoware-documentation site.

To be exact, autoware.universe has another documentation repository, which has detailed information of each node.
https://autowarefoundation.github.io/autoware.universe/main/

> Additionally, as an Autoware developer, which development and debugging tools are recommended to work on Autoware (e.g. Visual Studio)?

I use Visual Studio Code, and I think some developers from LeoDrive use CLion as well."
About Autoware development and documentation,D_kwDOAnasMc4ARl-7,2022-11-29T16:31:06Z,MarioAlmelaUMH,1,Answered,DC_kwDOAnasMc4AQS0B,MarioAlmelaUMH,Thank you all for your comments! I see it clear now. ありがとうございました.
Autonomy Software WG Meeting 2022/12/06,D_kwDOAnasMc4ARl_H,2022-11-29T16:34:34Z,BonoloAWF,3,Answered,,,
Autonomy Software WG Meeting 2022/12/06,D_kwDOAnasMc4ARl_H,2022-11-29T16:34:34Z,BonoloAWF,3,Answered,DC_kwDOAnasMc4AQeu6,mitsudome-r,"November-December Milestones:
- https://github.com/autowarefoundation/autoware.universe/issues/2125
  - waiting for @beyzanurkaya + @mehmetdogru's update
- https://github.com/autowarefoundation/autoware.universe/issues/2099
  - PR ready for review
- https://github.com/autowarefoundation/autoware.universe/issues/2182
  - @maxime-clem  created PR
  - Waiting for LeoDrive/Robotec’s test
- https://github.com/autowarefoundation/autoware.universe/pull/2401
  - review comments made and waiting for @sujithvemi  comment
- https://github.com/autowarefoundation/autoware.universe/issues/1543
  - Discussion on-going between @brkay54 and @kosuke55 
- https://github.com/autowarefoundation/autoware.universe/issues/1761
  - PR is reviewed. Just needs final check by @takayuki5168 
- https://github.com/autowarefoundation/autoware.universe/issues/2222
  - check @beyzanurkaya  for latest status
- https://github.com/autowarefoundation/autoware.universe/issues/1716
  - PR seems to be almost ready for merging
  - ask @maxime-clem what’s remaining
- https://github.com/autowarefoundation/autoware.universe/issues/563
  - ask @xmfcx for the latest status
- https://github.com/autowarefoundation/autoware.universe/issues/611
  - Review on-going by TIER IV
  - We might want to discuss about this comment https://github.com/autowarefoundation/autoware.universe/pull/647#discussion_r1040419574
- https://github.com/autowarefoundation/autoware.universe/issues/2044
  - PR is on-going
  - ask @cyn-liu for current status
- https://github.com/autowarefoundation/autoware.universe/issues/2330
  - waiting for TensorRT to be released
- https://github.com/autowarefoundation/autoware.universe/issues/2213
  - PR is being reviewed by @maxime-clem 
- https://github.com/autowarefoundation/autoware.universe/issues/2354
  - @VRichardJP created PR
  - We may want to split into mission_planner and behavior_path_planner


"
Autonomy Software WG Meeting 2022/12/06,D_kwDOAnasMc4ARl_H,2022-11-29T16:34:34Z,BonoloAWF,3,Answered,DC_kwDOAnasMc4AQexg,hueirutseng,ITRI Autonomous Bus Status Update [Slides](https://drive.google.com/file/d/1u0h7WJrg_2lAo-pXjH52qrnNZXoToMYG/view?usp=sharing)
Autonomy Software WG Meeting 2022/12/06,D_kwDOAnasMc4ARl_H,2022-11-29T16:34:34Z,BonoloAWF,3,Answered,DC_kwDOAnasMc4AQe3y,liuXinGangChina,"AutoCore.ai Status Update 
[AWF ASWG - slide.pdf](https://github.com/autowarefoundation/autoware/files/10164189/AWF.ASWG.-.slide.pdf)
"
Traffic Light Recognition Question,D_kwDOAnasMc4ARmDY,2022-11-29T17:29:10Z,EcotronCorp,0,Unanswered,,,
Rviz2 drops to 1-5fps when enabling pointcloud2 topic in planning simulation tutorial,D_kwDOAnasMc4ARmZ4,2022-11-30T01:48:21Z,TZECHIN6,1,Answered,,,
Rviz2 drops to 1-5fps when enabling pointcloud2 topic in planning simulation tutorial,D_kwDOAnasMc4ARmZ4,2022-11-30T01:48:21Z,TZECHIN6,1,Answered,DC_kwDOAnasMc4AT4yr,TZECHIN6,"After implementating cyclone DDS tuning and ensure export Nvidia environment PATH, its back to normal 30fps lock."
Autoware web controller,D_kwDOAnasMc4ARmgr,2022-11-30T06:33:00Z,yukkysaito,1,Answered,,,
Autoware web controller,D_kwDOAnasMc4ARmgr,2022-11-30T06:33:00Z,yukkysaito,1,Answered,DC_kwDOAnasMc4AQSux,yukkysaito,"Related PRs
- https://github.com/autowarefoundation/autoware_launch/pull/117
- https://github.com/autowarefoundation/autoware.universe/pull/2405"
Autoware web controller,D_kwDOAnasMc4ARmgr,2022-11-30T06:33:00Z,yukkysaito,1,Answered,DC_kwDOAnasMc4AQhLL,yukkysaito,"Since there seems to be no opposition, I will merge them."
Does Localization and Planning  work just with GNSS data (Not lidar/NDT)?,D_kwDOAnasMc4ARnSv,2022-12-01T05:39:31Z,marcusvinicius178,5,Answered,,,
Does Localization and Planning  work just with GNSS data (Not lidar/NDT)?,D_kwDOAnasMc4ARnSv,2022-12-01T05:39:31Z,marcusvinicius178,5,Answered,DC_kwDOAnasMc4AQXAu,kminoda,"Hi, thank you for your interest in Autoware! Feel free to post your work on Autoware Discussion (this discussion would work too, but also feel free to use `show-and-tell` style discussion!). It will definitely be a wonderful contribution for the community.

Let me answer about the localization.

Although the current Autoware Universe implementation assumes you have LiDAR and PCD maps so that you can execute NDT scan matching (LiDAR-based localization method used in Autoware), some simple modification would be enough to perform localization only with GNSS (and maybe IMU + wheel odometry). 
As I can come up with right now, the necessary modification would be as follows:
1. remove `ndt_scan_matcher` from launch file
2. provide GNSS output as `/localization/pose_estimator/pose_with_covariance` so that `ekf_localizer` will fuse it with the other sensors. (or alternatively, you can just stream the GNSS output to `/localization/kinematic_state`, which will be used as a localized result in other components)
3. modify `pose_initializer`, which currently uses `ndt_scan_matcher` to run Monte-Carlo-based initial pose estimation, to provide an initial pose (e.g. manual pose initialization) "
Does Localization and Planning  work just with GNSS data (Not lidar/NDT)?,D_kwDOAnasMc4ARnSv,2022-12-01T05:39:31Z,marcusvinicius178,5,Answered,DC_kwDOAnasMc4AQXKJ,rsasaki0109,"In addition to the above, there is one more thing to do.
The following item in the system_error_monitor package needs to be commented out.
Also, it is better to add some GNSS value in localization.param.yaml.  

```
            matching_score:
              type: diagnostic_aggregator/GenericAnalyzer
              path: matching_score
              contains: [""ndt_scan_matcher""]
              timeout: 1.0
```
https://github.com/autowarefoundation/autoware.universe/blob/main/system/system_error_monitor/config/diagnostic_aggregator/localization.param.yaml#L21-L25
"
Does Localization and Planning  work just with GNSS data (Not lidar/NDT)?,D_kwDOAnasMc4ARnSv,2022-12-01T05:39:31Z,marcusvinicius178,5,Answered,DC_kwDOAnasMc4AQ_yT,lionator,"Hello @kminoda ... Thank you very much. I think i got step 1 and step 2 right, but I don't know exactly what do with step 3. I still got ""waiting for self pose"". 
What I did exactly: 
* I provided GNSS output to `/localization/pose_estimator/pose_with_covariance`
* In the tier4_localization_launch folder i changed the file localization.launch.xml. I commented out the pose_estimator, so it won't start the ndt_scan_matcher.
* I also commented out the matching_score part in the system_error_monitor package.

Can you provide a bit more assistants, that would be very kind.

![Screenshot from 2022-12-20 08-20-02](https://user-images.githubusercontent.com/12926762/208607351-4fb8f96c-ea12-4467-8b25-54cc128ec3b8.png)
![Screenshot from 2022-12-20 08-20-39](https://user-images.githubusercontent.com/12926762/208607353-3b86fe59-1159-41d0-b167-056ac398a10f.png)
![Screenshot from 2022-12-20 08-21-39](https://user-images.githubusercontent.com/12926762/208607356-bd632bc9-1aa1-48a0-bc85-a2fd3fe4d1eb.png)
"
Does Localization and Planning  work just with GNSS data (Not lidar/NDT)?,D_kwDOAnasMc4ARnSv,2022-12-01T05:39:31Z,marcusvinicius178,5,Answered,DC_kwDOAnasMc4ARB2D,kminoda,"It may be that the EKF is not triggered since `pose_initializer` cannot communicate with `ndt_scan_matcher`, which is commented out in your case. Currently, `pose_initializer` is not only a node that publishes the initial pose but kind of a manager for whole localization module, that activate/deactivate other localization components depending on the state of the module (`not initialized`, `initializing`, or `initialized`).

So, as a temporary solution, [setting this value to true](https://github.com/autowarefoundation/autoware.universe/blob/febbc135b8e09e993ed345ee6d3cd7e65b6c1d68/localization/ekf_localizer/src/ekf_localizer.cpp#L63) in `ekf_localizer` may solve the problem. 

In a long term perspective, this is a flaw in the current localization module architecture that we should address somehow."
Does Localization and Planning  work just with GNSS data (Not lidar/NDT)?,D_kwDOAnasMc4ARnSv,2022-12-01T05:39:31Z,marcusvinicius178,5,Answered,DC_kwDOAnasMc4AQXA_,yukkysaito,"Currently, we are developing the following options available.
- camera based localization (including imu and vehicle velocity) @KYabuuchi 
- gnss based localization (including imu and vehicle velocity) @kitsukawa @rsasaki0109 
- combination
  - lidar-gnss-camera based localization
  - lidar-gnss based localization
  - lidar-camera based localization
  - camera-gnss based localization

@KYabuuchi @kitsukawa @rsasaki0109 
Can you share any updates?"
Does Localization and Planning  work just with GNSS data (Not lidar/NDT)?,D_kwDOAnasMc4ARnSv,2022-12-01T05:39:31Z,marcusvinicius178,5,Answered,DC_kwDOAnasMc4AQXE6,KYabuuchi,"Hi, I am developping a camera based localization using vector map.
This method does not require LiDAR and PCD maps, and it performs localization by matching road surface markings.
It is not yet public, but will be released in the future.
"
Does Localization and Planning  work just with GNSS data (Not lidar/NDT)?,D_kwDOAnasMc4ARnSv,2022-12-01T05:39:31Z,marcusvinicius178,5,Answered,DC_kwDOAnasMc4AQXH6,rsasaki0109,"Hello, I work for MAP IV, a subsidiary of TEIR IV, developing [GNSS/IMU based localization](https://github.com/MapIV/eagleye) and integrating it into autoware.
This method does not require LiDAR and PCD maps, but GNSS for localization. Vector maps are needed for planning and LiDAR or cameras for recognition. It will be available next year.
We also plan to work on implementing a combination of LiDAR and GNSS next year."
Does Localization and Planning  work just with GNSS data (Not lidar/NDT)?,D_kwDOAnasMc4ARnSv,2022-12-01T05:39:31Z,marcusvinicius178,5,Answered,DC_kwDOAnasMc4AQXNK,n-patiphon,To further expand on the answer from @rsasaki0109. The plan to integrate [Eagleye](https://github.com/MapIV/eagleye) into Autowrae has been discussed in Mapping WG. You can find the details on the current progress in the [WG meeting notes](https://github.com/orgs/autowarefoundation/discussions/3043).
Does Localization and Planning  work just with GNSS data (Not lidar/NDT)?,D_kwDOAnasMc4ARnSv,2022-12-01T05:39:31Z,marcusvinicius178,5,Answered,DC_kwDOAnasMc4AQc_M,lionator,@rsasaki0109 This sounds good. Do you already know when exactly you release it next year?
Does Localization and Planning  work just with GNSS data (Not lidar/NDT)?,D_kwDOAnasMc4ARnSv,2022-12-01T05:39:31Z,marcusvinicius178,5,Answered,DC_kwDOAnasMc4AQeXm,rsasaki0109,March or so.
Does Localization and Planning  work just with GNSS data (Not lidar/NDT)?,D_kwDOAnasMc4ARnSv,2022-12-01T05:39:31Z,marcusvinicius178,5,Answered,DC_kwDOAnasMc4AQe3B,ajay1606,"> This method does not require LiDAR and PCD maps, but GNSS for localization. Vector maps are needed for planning and LiDAR or cameras for recognition. It will be available next year.
> We also plan to work on implementing a combination of LiDAR and GNSS next year.

@yukkysaito @KYabuuchi @rsasaki0109 
Much awaited, and would be very much helpful, even i am also working on the same. The primary goal is to eliminate the localization dependency on the PointCloud map. And to maintain one single map (Unified) for both localization and Planning, Decision-making module in the entire autoware driving stack. 

It would be great if we can collaborate and start a new group in the Autoware Working Group community. So that we can share and discuss the progress of the new localization module in a very organized way. 

Here are the sample results generated using only IMU and Camera Sensors. Also, we are testing with Autoware continuously. 

![image](https://user-images.githubusercontent.com/29722843/205861009-da518053-47b9-4e4a-bf3e-84258a0caeaf.png)

"
Does Localization and Planning  work just with GNSS data (Not lidar/NDT)?,D_kwDOAnasMc4ARnSv,2022-12-01T05:39:31Z,marcusvinicius178,5,Answered,DC_kwDOAnasMc4AQfAJ,KYabuuchi,"I'm not familiar with starting a new working group. How about attending the map working group?
As mentioned above, they discuss integration of GNSS/IMU based localization into Autoware there.
"
Does Localization and Planning  work just with GNSS data (Not lidar/NDT)?,D_kwDOAnasMc4ARnSv,2022-12-01T05:39:31Z,marcusvinicius178,5,Answered,DC_kwDOAnasMc4AQfIa,ajay1606,@KYabuuchi Thank you I will look into that. 
Does Localization and Planning  work just with GNSS data (Not lidar/NDT)?,D_kwDOAnasMc4ARnSv,2022-12-01T05:39:31Z,marcusvinicius178,5,Answered,DC_kwDOAnasMc4AQed6,marcusvinicius178,"Thanks very much for the reply @rsasaki0109 @kminoda . I have still not tried your solution, I am busy with other issues of University, but I am very grateful for the detailed explanation. "
Does Localization and Planning  work just with GNSS data (Not lidar/NDT)?,D_kwDOAnasMc4ARnSv,2022-12-01T05:39:31Z,marcusvinicius178,5,Answered,DC_kwDOAnasMc4AR_-x,marcusvinicius178,"Hi @kminoda I have done all the modifications you suggested as @lionator did. I've rebuilt the workspace and tested to initialize Autoware.Universe with CARLA just with GPS data. 

However the vehicle was not able to localize itself (without NDT), as you can check in this short video:
https://drive.google.com/file/d/1Yd9bLIFghrpbRLierXmnHRd-Rr13NWAp/view?usp=share_link

I believe that's because I **have not** published GNSS messages into the topics you said: 

- /localization/pose_estimator/pose_with_covariance
- /localization/kinematic_state

Because at this moment I am just training in simulation, I am not using the real GPS streaming data.
I am just reproducing the python script which connects CARLA to Autoware.Universe stack:
From this [tutorial](https://www.youtube.com/watch?v=dxwwNacez7o&t=1120s), I just run 
`bash run_exploration_mode_ros2.sh `

For this reason I am not aware which **coordinates** to use and how to feed the topics you described to make the car localize on Rviz - Carla.

Could you please tell me how to feed these topics (sending an example of **msg** to be published on these topics) that could work in this case? 

Thanks very much for assistance in this case."
Does Localization and Planning  work just with GNSS data (Not lidar/NDT)?,D_kwDOAnasMc4ARnSv,2022-12-01T05:39:31Z,marcusvinicius178,5,Answered,DC_kwDOAnasMc4ASBCd,kminoda,"Thank you for sharing the results :)

In terms of coordinate, it should work as long as the coordinate of `/localization/pose_estimator/pose_with_covariance` data is aligned to the map coordinate. For example, try [the Autoware tutorial](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/rosbag-replay-simulation/) and you can check that the former data has a similar value to the latter one (Note that in this case, `/localization/pose_estimator/pose_with_covariance` is not GNSS but the results of NDT). "
Does Localization and Planning  work just with GNSS data (Not lidar/NDT)?,D_kwDOAnasMc4ARnSv,2022-12-01T05:39:31Z,marcusvinicius178,5,Answered,DC_kwDOAnasMc4ASBNq,kminoda,"@marcusvinicius178 Let me make one point clear. You want to run Autoware only with GNSS just as a quick start, and you are eventually going to integrate LiDAR too, right?

Localization should work only with GNSS, but planning won't work, since they also require the outputs of perception module which currently assumes that you have LiDAR. If you want to run planning modules temporarily, one quick solution I can come up with is to publish dummy perception result messages by e.g. `ros2 topic pub ...`. Also, do note that [these are the only combinations of sensors](https://github.com/orgs/autowarefoundation/discussions/3095#discussioncomment-4288575) we are working on as a localization stack, and localization accuracy only by GNSS may not be enough for planning & control modules to work properly.

Also, as mentioned before, you may need to customize some Autoware packages to make the localization stack run only with GNSS. (which means, it will be a great contribution if you make it run and share the solution with us :smile: )"
Does Localization and Planning  work just with GNSS data (Not lidar/NDT)?,D_kwDOAnasMc4ARnSv,2022-12-01T05:39:31Z,marcusvinicius178,5,Answered,DC_kwDOAnasMc4Ab8ba,tseco15,"Hi everyone, 

I follow exactly the steps indicated by @kminoda  (steps 1 and 2), and the paramter file of the pose initializer (pose_initializer.param.yaml) is configured like this:

/**:
  ros__parameters:
    gnss_enabled: true
    ndt_enabled: false
    ekf_enabled: true
    yabloc_enabled: false
    stop_check_enabled: false

The output of the gnss_poser provides a very good position and orientation ( I am working with a very good gps and imu sensors in Gazebo). This is the input for the ekf_localizer node.

Then, I initialize the position using rviz2 and the localization/initialize service works properly, the ekf is activated but just after the activation, an error about tfs arrise, when the map/base_link tf is published by the EKF (I suppose). You can see in the images all the messages provided by the terminal.

Any suggestions?


![just_after_pose_initialization](https://github.com/autowarefoundation/autoware/assets/125256748/5948742b-c8a4-415d-9b63-76590268ca8b)
![error_just_after_pose_initialization](https://github.com/autowarefoundation/autoware/assets/125256748/bc7324f9-b1c8-46d9-8deb-e96c6df10957)
"
Does Localization and Planning  work just with GNSS data (Not lidar/NDT)?,D_kwDOAnasMc4ARnSv,2022-12-01T05:39:31Z,marcusvinicius178,5,Answered,DC_kwDOAnasMc4Ab8cH,tseco15,Just a comment: I checked the  postion provided by the gnss_poser with the pcb map of the Gazebo environment. 
Does Localization and Planning  work just with GNSS data (Not lidar/NDT)?,D_kwDOAnasMc4ARnSv,2022-12-01T05:39:31Z,marcusvinicius178,5,Answered,DC_kwDOAnasMc4Ab8kP,kminoda,"The tf-related errors are not that informative, and difficult to tell the exact issue here. It would be helpful if you could provide issue you are facing with (the error log about tf itself is not the real issue that you would like to solve, right?)"
Does Localization and Planning  work just with GNSS data (Not lidar/NDT)?,D_kwDOAnasMc4ARnSv,2022-12-01T05:39:31Z,marcusvinicius178,5,Answered,DC_kwDOAnasMc4Ab_em,tseco15,"The main problem was the orientation value provided by the ekf output (/localization/pose_twist_fusion_filter/pose) with nan values. Then, the tf between map and  base_link was not published. 
I found the error: the covariance corresponding to the orientation of the  topic from gnns_poser was zero, due to the rms_rotation zero values of the topic autoware_orientation (autoware_sensing_msgs::msg::GnssInsOrientationStamped). This zero covariance value made that  the orientation value of the ekf output topic were nan values.

Once corrected the rms_rotation values, everything works properly.
Thank you for the support.

"
Does Localization and Planning  work just with GNSS data (Not lidar/NDT)?,D_kwDOAnasMc4ARnSv,2022-12-01T05:39:31Z,marcusvinicius178,5,Answered,DC_kwDOAnasMc4Ab_VO,VRichardJP,"Sorry, I come a bit late to the party. We recently deployed a minicar in an airport for a PoC project, mainly relying on RTK-GNSS for localization (merged with other localization data in EKF). The only localization issue we faced is that from time to time the vehicle would stop because RTK-GNSS is lost or because the error calculated by EKF is a few centimeters too big. In both cases the system was always able to recover.

Our vehicle has a lidar sensor, (for obstacle detection) but NDT performs very badly in most areas because there is simply nothing around but the ground (e.g. on the runway), so I don't think removing the lidar would cause any problem. Actually, it would maybe reduce EKF pose error 🤔

There are a quite few things to change in Autoware if you totally want to get rid of the lidar sensor, but almost everything is already there. It is mostly a matter of configuring things properly."
[Proposal] New architecture for behavior path planner module,D_kwDOAnasMc4ARncF,2022-12-01T09:38:28Z,satoshi-ota,6,Answered,,,
[Proposal] New architecture for behavior path planner module,D_kwDOAnasMc4ARncF,2022-12-01T09:38:28Z,satoshi-ota,6,Answered,DC_kwDOAnasMc4AQWxW,satoshi-ota,@mitsudome-r @yukkysaito @TakaHoribe @xmfcx 
[Proposal] New architecture for behavior path planner module,D_kwDOAnasMc4ARncF,2022-12-01T09:38:28Z,satoshi-ota,6,Answered,DC_kwDOAnasMc4AQeZi,satoshi-ota,@xmfcx Do you have any comments ? :smiley: 
[Proposal] New architecture for behavior path planner module,D_kwDOAnasMc4ARncF,2022-12-01T09:38:28Z,satoshi-ota,6,Answered,DC_kwDOAnasMc4AQfWZ,xmfcx,I will read it today!
[Proposal] New architecture for behavior path planner module,D_kwDOAnasMc4ARncF,2022-12-01T09:38:28Z,satoshi-ota,6,Answered,DC_kwDOAnasMc4AQmPj,xmfcx,"@satoshi-ota Can you explain what approving means?

> The RTC (Request To Cooperate) is a system that asks the operator's approve to change the path (RTC Status), and the operator checks the candidate path and approves the module's path modification (RTC Command). If the path modification is approved, the module outputs the path as Output Path.

But how often are these sent to an operator?

Or is there any other approving mechanism?"
[Proposal] New architecture for behavior path planner module,D_kwDOAnasMc4ARncF,2022-12-01T09:38:28Z,satoshi-ota,6,Answered,DC_kwDOAnasMc4AQmPu,xmfcx,"If we sent every small modification in every small module sent to an operator, operator would have too many requests to evaluate."
[Proposal] New architecture for behavior path planner module,D_kwDOAnasMc4ARncF,2022-12-01T09:38:28Z,satoshi-ota,6,Answered,DC_kwDOAnasMc4AQu_K,satoshi-ota,"Thanks for your comment :+1: 

> Or is there any other approving mechanism?

The approving mechanism already exist in autoware, and documentation is [here](https://autowarefoundation.github.io/autoware.universe/main/planning/rtc_interface/). 
Each module requests approval as soon as it needs **HUGE** path modification. (e.g. execute lane change, avoidance, pull over...) 

Basically, we do **NOT** assume that it requests approval for a small change in routing, such as a 10 cm path shift. 
In addition, [auto approving mechanism](https://autowarefoundation.github.io/autoware.universe/main/planning/rtc_auto_mode_manager/) also exist in current autoware, and we can use it instead of human operator if necessary.

"
[Proposal] New architecture for behavior path planner module,D_kwDOAnasMc4ARncF,2022-12-01T09:38:28Z,satoshi-ota,6,Answered,DC_kwDOAnasMc4AQxSe,TakaHoribe,"@xmfcx The list of modules using the approval mechanism is:
- Lane change
- Avoidance with large path modification
- Pullover/out
- Intersection entry
- Traffic light stop/go
- crosswalk stop/go
- etc...
Actually, it is almost all modules in `behavior_path_planner` and `behavior_velocity planner`.


The purpose of the approval mechanism is to increase safety and efficiency in the development. In detail, it is used for:
- make time for a safety operator to check the decision (whether it is really safe)
  - so the process would be ""autoware requests a behavioral change, operator checks if the autoware's decision is safe and approves, then the vehicle behavior changes"".
- discard unexpected requests, especially requests due to the low performance of the perception. We can then focus on the planning behavior in development.
- Gather data on human decisions.


By default setting, auto-approver exists and it approves every request as soon as it is requested. You can turn off the auto-approve if needed. It can be tested on the planning_simulator.

The concept of the approval should be summarized and writen somewhere in a document, but currently it is not. I'll update the planning design document for the approval."
[Proposal] New architecture for behavior path planner module,D_kwDOAnasMc4ARncF,2022-12-01T09:38:28Z,satoshi-ota,6,Answered,DC_kwDOAnasMc4AQ7Lg,satoshi-ota,"We will wait for comments until next Tuesday :smiley: 
If there are no major concerns, I will implement the prototype :rocket: "
[Proposal] New architecture for behavior path planner module,D_kwDOAnasMc4ARncF,2022-12-01T09:38:28Z,satoshi-ota,6,Answered,DC_kwDOAnasMc4AQ_I0,xmfcx,"Alright, thanks for all the information that you've provided @TakaHoribe and @satoshi-ota !

This change will help Autoware be more flexible and dropping the behavior-tree dependency will reduce the complexity and maybe even reduce the compile/linking times.

Thanks for working on this! \( ^ᵕ^)/"
[Proposal] New architecture for behavior path planner module,D_kwDOAnasMc4ARncF,2022-12-01T09:38:28Z,satoshi-ota,6,Answered,DC_kwDOAnasMc4AR3yp,armaganarsln,"Thank you for all the work and i must say its really exiting to have new architectural changes and design discussions. Although its not my area i am a bit concerned of the timing of this proposal. 

We are about to finish bus ODD in 3 weeks and there are a bunch of issues in path planning as below:
![image](https://user-images.githubusercontent.com/56731289/212473114-8cbbde58-c74d-4247-8471-e83796ef2081.png)

Also after bus odd, there is a plan to start the new ODD for 2023 with so many new challenges in path planning (because the new ODD includes highway multilane driving, roundabouts, underpasses etc.) and where maybe we will have to change or plan to change the architecture in 2-3 months time.

So i want to understand whether the timing is right for this new proposal or we should focus our efforts to finish the bus odd issues and propose the architecture considering the 2023 urban & freeway high traffic ODD."
[Proposal] New architecture for behavior path planner module,D_kwDOAnasMc4ARncF,2022-12-01T09:38:28Z,satoshi-ota,6,Answered,DC_kwDOAnasMc4ASLnC,satoshi-ota,"Hi @armaganarsln Thanks for your comment, and appologize for my late reply.

**I think we should focus our efforts to finish the bus odd issues**, but a few members in TIER IV, are working on developping the new architecture of planner. We TIER IV would like to implement new behavior path planner proto type that based on proposed architecture at 2023 3/E. So we still have few month to improve and fix current issues. In addition, we plan to keep the current behavior path planner we have been using, and we intend to have a transition phase from the previous architecture to the new architecture. cc @TakaHoribe

If you have any other concerns, feel free to comment :smile: 

"
[Proposal] New architecture for behavior path planner module,D_kwDOAnasMc4ARncF,2022-12-01T09:38:28Z,satoshi-ota,6,Answered,DC_kwDOAnasMc4ASMhd,armaganarsln,"My main concerns are two:

1. There are so many path planning related issues some needs help: https://github.com/autowarefoundation/autoware.universe/milestone/9
2. I want everyone to think and decide on the new architecture when they have time. 

Of course everyone free to concentrate on different topics but i think its not fair to the engineers who don't have time to comment on this new architecture module. 

So could we postpone this item to next month or March and focus on bus odd related issues?"
[Proposal] New architecture for behavior path planner module,D_kwDOAnasMc4ARncF,2022-12-01T09:38:28Z,satoshi-ota,6,Answered,DC_kwDOAnasMc4ASNWw,satoshi-ota,"I got it. I would like to plan the new architecture developping, taking into account the impact on BUS ODD. cc @mitsudome-r @xmfcx @angry-crab "
[Proposal] New architecture for behavior path planner module,D_kwDOAnasMc4ARncF,2022-12-01T09:38:28Z,satoshi-ota,6,Answered,DC_kwDOAnasMc4ASQBw,mitsudome-r,"@armaganarsln 
Thanks for the feedback.
I agree that we should wait to make the modification on the current package until Bus ODD project is settled. (or develop as a separate package so that it wouldn't disturb the project if TIER IV has urgent needs).

> Of course everyone free to concentrate on different topics but i think its not fair to the engineers who don't have time to comment on this new architecture module.

This is a valid point. However, this discussion has been there since December 1st. I've also mentioned it in one of the ASWG calls, but we only have Fatih and your reaction so far. If there are engineers who has interest but doesn't have time to look into the details, I would love to see them posting the comment that they want TIER IV to wait for discussion.(Just like you just did in your comment :smile:  ) That way, we know that there are people who are interested in the topic and set a call to have a further discussion when they have time.

@satoshi-ota 
Although we mentioned this discussion in the past ASWG, we only said that we will be working on [prototype](https://github.com/orgs/autowarefoundation/discussions/3097#discussioncomment-4436704) back then, but we never had chance to make conclusion about whether the new architecture is acceptable. Now that we have prototype implementation, it might be better if we have a call either in ASWG or as a separate call to provide your findings and make decision about whether we want to go with this new architecture or not. "
[Proposal] New architecture for behavior path planner module,D_kwDOAnasMc4ARncF,2022-12-01T09:38:28Z,satoshi-ota,6,Answered,DC_kwDOAnasMc4AVLsO,satoshi-ota,"@xmfcx @mitsudome-r @mehmetdogru @TakaHoribe 
Hi, we TIER IV are working on developing new behavior path manager based on this proposal. I guess that few bugs still remain, but the new manager is already merged in main branch, and you can use that by switching [flag](https://github.com/autowarefoundation/autoware.universe/blob/dd69357d87f270c0c2c872e899c02ce82b6b4eef/planning/behavior_path_planner/CMakeLists.txt#L10). This manager makes it possible to execute multiple scene module simultaneously, for example, to execute avoidance maneuver during lane change (:arrow_down_small:  movie) in some situation.

**NOTE**:  BT based manager is used as default.

And, we TIER IV would like to use this manager in autoware as default in near future. Then, I want to ask you about what we should do before that. I suppose that we TIER IV should...

- [x] maintain and update documents about each modules and manager.
- [x] confirm that the new manager PASSes all **TIER IV internal** scenarios that BT based manager already passed.
- [x] confirm that the new manager PASSes all **AWF** scenarios.
- [x] decide whether we continue to support BT based manager.

I want your options about that.

- Do you have any suggestion or concern abot this manager update? 
- When should we do that manager update? Can we update as soon as possible if the above criterion are satisfied?

Please feel free to left comments.

https://user-images.githubusercontent.com/44889564/230601268-22a0008c-a53c-41ec-a68f-9d5ce423499d.mp4"
[Proposal] New architecture for behavior path planner module,D_kwDOAnasMc4ARncF,2022-12-01T09:38:28Z,satoshi-ota,6,Answered,DC_kwDOAnasMc4AVPxI,mehmetdogru,"@satoshi-ota Thank you for working on this!

In my opinion, we can make the new manager default one as soon as it passes all the scenarios as you mentioned. After doing this it is a good idea to support BT based manager as well for sometime (duration to be determined) to have a back-up plan just in case if we will have major issues with the new one in different/more complex real life scenarios than the ones we have for simulations. And so hopefully we can complete the manager update transition without any glitch."
[Proposal] New architecture for behavior path planner module,D_kwDOAnasMc4ARncF,2022-12-01T09:38:28Z,satoshi-ota,6,Answered,DC_kwDOAnasMc4AVP0s,satoshi-ota,"Hi @mehmetdogru Thanks for your positive comments.

> In my opinion, we can make the new manager default one as soon as it passes all the scenarios as you mentioned. After doing this it is a good idea to support BT based manager as well for sometime (duration to be determined) to have a back-up plan just in case if we will have major issues with the new one in different/more complex real life scenarios than the ones we have for simulations.

I completely agree with you. Since this is a large update, we should have an alternative plan to use BT based manager in case problems arise, as you said. On the other hand, I think we also need to be careful to decrease maintenance costs since multiple managers coexits.

First and foremost, I think it is important for everyone to know how the manager works, so I will make it a priority to maintain the documentation about that.

And, I will wait a bit for other member's opinion."
[Proposal] New architecture for behavior path planner module,D_kwDOAnasMc4ARncF,2022-12-01T09:38:28Z,satoshi-ota,6,Answered,DC_kwDOAnasMc4AX1tg,satoshi-ota,"[**AWF SCENARIO TEST RESULTS**](https://evaluation.tier4.jp/evaluation/reports/tables/new?catalog_id=777fc6c4-4c74-4721-afe7-e4c94684b76f&job_id=4d958225-31a0-5def-b492-2a765d9816c0&project_id=awf&suite_id=b5858cd9-7219-4eac-91f1-c13d9e9bef1f&table_config=date&target_ids=34104086-f211-53ee-b405-15c70d9b4352)

- **NEW MANAGER EVALUATION RESULT: 131/138 (ran 2023/06/13)**
- BASE LINE EVALUATION: 128/138 (ran 2023/06/13)

![image](https://github.com/autowarefoundation/autoware/assets/44889564/5157888f-3728-4399-9d37-43a836668947)

I confitmed that new behavior path planner achieve most of all scenarios in awf catalog. And basically, all of the failed scenario that new behavior path planner can't pass are failed on old behavior path planner, too. Then, I think those fails don't related to behavior path planner architecture, and we can transit to new behavior path planner manager. What do you think?"
[Proposal] New architecture for behavior path planner module,D_kwDOAnasMc4ARncF,2022-12-01T09:38:28Z,satoshi-ota,6,Answered,DC_kwDOAnasMc4AVXCO,satoshi-ota,"# How to use the new manager?

For now, we can switch the NEW and BT based manager by [flag](https://github.com/autowarefoundation/autoware.universe/blob/4f0769fd3daa561b6bd3642f14a43cf3a6670290/planning/behavior_path_planner/CMakeLists.txt#L10) in Cmake file. And, BT based is used by default.
If we wanna try to use the new one, please build with flag `COMPILE_WITH_OLD_ARCHITECTURE` setting `FALSE`.

```cmake
cmake_minimum_required(VERSION 3.14)
project(behavior_path_planner)

find_package(autoware_cmake REQUIRED)
autoware_package()

find_package(OpenCV REQUIRED)
find_package(magic_enum CONFIG REQUIRED)

set(COMPILE_WITH_OLD_ARCHITECTURE TRUE)
...
```

# What can we do on the new manager?

Run two scenarios to compare the behavior of NEW manager with BT based one.

## Scenario1. need to execute lane change in avoidance manauver.

### BT based manager

Since BT based manager execute all module execlusively, lane change module can't run while avoidance module is running. Then, lane change module has to wait the end of avoidance module process.

This issue may cause vehicle stuck and over ride (OR) in worst case. For example, in following scene, lane change can do anything despite of the fact that the goal is on the right side lane and the ego is getting closer.

![image](https://user-images.githubusercontent.com/44889564/231650491-952b8ce5-8df9-45aa-8273-ed4e024d3837.png)

![image](https://user-images.githubusercontent.com/44889564/231634784-c0c54bb2-a9ef-495c-ac9f-e92c725649b6.png)

In the end, the remaining distance for lane change quite a bit short.

![image](https://user-images.githubusercontent.com/44889564/231635499-ace5cf4c-f140-40b3-b7c9-5da06a022efd.png)

### new manager

On the other hand, new manager can execute lane change module as soon as the avoidance module decides the output path. So, the ego can execute lane change from the middle of the avoidance path.

https://user-images.githubusercontent.com/44889564/231636673-8e0515ee-495e-4c02-ac85-9faeaabfe80b.mp4

## Scenario2. need to execute avoidance in lane change maneuver.

### BT based manager

As mentioned above, avoidance module can't run while the lane change module is running on BT based manager. In the following scene, the avoidance module do nothing despite of the fact that perception module already detected a parked-vehicle on lane change target lane. And, the avoidance module start running after the ego get quite a bit closer to the vehicle.

![image](https://user-images.githubusercontent.com/44889564/231649726-356746de-9190-4c6a-9957-a8e0b8f590d3.png)

![image](https://user-images.githubusercontent.com/44889564/231637422-aebcfe99-240d-485e-8d69-e0a86d433004.png)

![image](https://user-images.githubusercontent.com/44889564/231637951-bfc4ed89-3811-4610-9ad1-85ad78f5f9c7.png)

### new manager

Avoidance module can run as soon as the perception module detects objects that should be avoid even if it is the lane change maneuver.

![image](https://user-images.githubusercontent.com/44889564/231638893-09a087bb-a76d-4e10-b440-5d0f3bcb7cec.png)

https://user-images.githubusercontent.com/44889564/231639251-6631dc4e-1861-47e7-9c51-6df1b666ce9b.mp4




"
[Proposal] New architecture for behavior path planner module,D_kwDOAnasMc4ARncF,2022-12-01T09:38:28Z,satoshi-ota,6,Answered,DC_kwDOAnasMc4AX1wB,sisaha9,@satoshi-ota Could you expand on behavior differences that would occur with this new behavior planner that can't be achieved by running the old behavior tree architecture but having each node in the behavior tree running a separate action client. This would be very similar to how Navigation2 achieves it and would allow for running nodes without blocking each other (by returning the BT::Running instead of Success or Failure) but still maintain the nice UI of Behavior Tree
[Proposal] New architecture for behavior path planner module,D_kwDOAnasMc4ARncF,2022-12-01T09:38:28Z,satoshi-ota,6,Answered,DC_kwDOAnasMc4AX10H,sisaha9,"> Hierarchies between modules can not be changed in runtime, which can not achieve flexible path generation according to use cases

I guess this point would still be tricky though I could see a way of auto generating the string of an XML file based off current priorities and using the `createTreeFromText` function to change the tree during operation"
[Proposal] New architecture for behavior path planner module,D_kwDOAnasMc4ARncF,2022-12-01T09:38:28Z,satoshi-ota,6,Answered,DC_kwDOAnasMc4AX2Lg,satoshi-ota,"Hi @sisaha9 :hand: 

Thanks for asking and your advice :+1:  cc @TakaHoribe 

> Could you expand on behavior differences that would occur with this new behavior planner that can't be achieved by running the old behavior tree architecture but having each node in the behavior tree running a separate action client.

Actually, we think it is not impossible to construct the logic to achieve complex scenarios on Behavior Tree, as you said.
> I guess this point would still be tricky though I could see a way of auto generating the string of an XML file based off current priorities and using the createTreeFromText file to change the tree during operation

However, if we implement all logic for what we want to do on BT (e.g. change the order of execution between modules according to the situation), the tree would become very complicated and difficult to maitain. Additionaly, we think we can't say that it is definitely appropriate to use BT as an interface for modules, and we have decided to allow designing module and manager specifications without being bound by the BT configuration at one time.
"
[Proposal] New architecture for behavior path planner module,D_kwDOAnasMc4ARncF,2022-12-01T09:38:28Z,satoshi-ota,6,Answered,DC_kwDOAnasMc4AX3ZN,sisaha9,I see. Thanks for the clarification @satoshi-ota 
Buid failed autoware.git -b galactic in ubuntu 20.04,D_kwDOAnasMc4ARoN8,2022-12-02T07:25:32Z,arjunshetty955,2,Answered,,,
Buid failed autoware.git -b galactic in ubuntu 20.04,D_kwDOAnasMc4ARoN8,2022-12-02T07:25:32Z,arjunshetty955,2,Answered,DC_kwDOAnasMc4AQXZw,kenji-miyake,"@arjunshetty955 Thank you for reporting this.
Could you tell me the result (console output) of `sudo apt install ros-galactic-desktop` and `lsb_release -a`?"
Buid failed autoware.git -b galactic in ubuntu 20.04,D_kwDOAnasMc4ARoN8,2022-12-02T07:25:32Z,arjunshetty955,2,Answered,DC_kwDOAnasMc4AQZEw,arjunshetty955,"user:~/autoware$ sudo apt install ros-galactic-desktop
[sudo] password for user: 
Reading package lists... Done
Building dependency tree       
Reading state information... Done
ros-galactic-desktop is already the newest version (0.9.3-2focal.20221016.140407).
0 upgraded, 0 newly installed, 0 to remove and 11 not upgraded.
l/autoware$ lsb_release -a
No LSB modules are available.
Distributor ID:	Ubuntu
Description:	Ubuntu 20.04.5 LTS
Release:	20.04
Codename:	focal




CMake Generate step failed.  Build files cannot be regenerated correctly.
---
Failed   <<< lanelet2_extension [5.34s, exited with code 1]
Aborted  <<< autoware_auto_tf2 [18.6s]                                                                                                              
Aborted  <<< autoware_adapi_v1_msgs [57.4s]                                                                                                          
Aborted  <<< tier4_vehicle_msgs [33.5s]                                                                                                         
Aborted  <<< autoware_auto_vehicle_msgs [1min 8s]                                                                                                    
Aborted  <<< tier4_external_api_msgs [1min 53s]                                            

Summary: 18 packages finished [2min 49s]
  1 package failed: lanelet2_extension
  5 packages aborted: autoware_adapi_v1_msgs autoware_auto_tf2 autoware_auto_vehicle_msgs tier4_external_api_msgs tier4_vehicle_msgs
  1 package had stderr output: lanelet2_extension
  220 packages not process
l/autoware$ lsb_release -a
No LSB modules are available.
Distributor ID:	Ubuntu
Description:	Ubuntu 20.04.5 LTS
Release:	20.04
Codename:	focal
u/autoware$ git log
commit 96bd1b827260d54c57c0af8323f22b0668dced94 (HEAD -> galactic, origin/galactic)
Author: mitsudome-r <ryohsuke.mitsudome@tier4.jp>
Date:   Thu Dec 1 19:42:25 2022 +0900

    chore(autoware.repos): refer to galactic branch for AWF repositories
    
    Signed-off-by: mitsudome-r <ryohsuke.mitsudome@tier4.jp>



build steps followed as mentioned in the link-https://autowarefoundation.github.io/autoware-documentation/galactic/installation/autoware/source-installation/"
Buid failed autoware.git -b galactic in ubuntu 20.04,D_kwDOAnasMc4ARoN8,2022-12-02T07:25:32Z,arjunshetty955,2,Answered,DC_kwDOAnasMc4AQarG,arjunshetty955,"checked with reinstalling packages again like 
(1) sudo dpkg -r --force-all python-rospkg && sudo apt --fix-broken install && sudo apt autoremove ros-* && sudo apt autoremove python-rosdep && sudo apt autoremove python-rosinstall-generator && sudo apt autoremove python-wstool &&  sudo apt-get remove python-rosdep-modules && sudo apt list –upgradable && sudo apt-get purge python-ros*

(2) follwed the steps as mentioned  in  build steps followed as mentioned in the link-https://autowarefoundation.github.io/autoware-documentation/galactic/installation/autoware/source-installation/

(3)  error -- stderr: lanelet2_extension                
CMake Error in CMakeLists.txt:
  Imported target ""lanelet2_core::lanelet2_core"" includes non-existent path

    ""/include""

  in its INTERFACE_INCLUDE_DIRECTORIES.  Possible reasons include:

  * The path was deleted, renamed, or moved to another location.

  * An install or uninstall procedure did not complete successfully.

  * The installation package was faulty and references files it does not


with these steps resolved -the error -TASK [autoware.dev_env.ros2 : Add ROS 2 apt repository to source list] *******************************************************************************
changed: [localhost]"
Buid failed autoware.git -b galactic in ubuntu 20.04,D_kwDOAnasMc4ARoN8,2022-12-02T07:25:32Z,arjunshetty955,2,Answered,DC_kwDOAnasMc4AQev0,kenji-miyake,"@arjunshetty955 @ashkildighin As I've tried the following commands, the build of `lanelet2_extension` succeeded. :thinking: 

```bash
git clone git@github.com:autowarefoundation/autoware.git -b galactic
cd autoware
./docker/build.sh
```

Are you using an `x86_64` machine?

Also, could you tell me the result of `cmake --version`?
And was there no error with `rosdep install -y --from-paths src --ignore-src --rosdistro $ROS_DISTRO`?"
Buid failed autoware.git -b galactic in ubuntu 20.04,D_kwDOAnasMc4ARoN8,2022-12-02T07:25:32Z,arjunshetty955,2,Answered,DC_kwDOAnasMc4AQfnH,arjunshetty955,"@kenji-miyake @ashkildighin 
Yes Im using x86_64 machine
cmake version 3.16.3
No errors observed and ALL successfully with rosdep install -y --from-paths src --ignore-src --rosdistro $ROS_DISTRO


In my environment not able check with docker environment due to SSH restriction.
on/autoware-universe:galactic-latest-prebuilt-cuda
ERROR: invalid empty ssh agent socket: make sure SSH_AUTH_SOCK is set

"
Buid failed autoware.git -b galactic in ubuntu 20.04,D_kwDOAnasMc4ARoN8,2022-12-02T07:25:32Z,arjunshetty955,2,Answered,DC_kwDOAnasMc4AQgNn,kenji-miyake,"Hmm, I'm sorry I have no idea with the cause... :pleading_face: "
Buid failed autoware.git -b galactic in ubuntu 20.04,D_kwDOAnasMc4ARoN8,2022-12-02T07:25:32Z,arjunshetty955,2,Answered,DC_kwDOAnasMc4AQp0B,ashkildighin,"@kenji-miyake and @arjunshetty955 kindly let me know your comments on this:

 I think the problem could with cmake environment, I mean  CMAKE_CURRENT_LIST_DIR with prefix """" instead of /usr of root directory. So I set symbol link like "" ln -s /usr/incude  /inculde""  able to resolve lanelet2_core::lanelet2_core"" includes non-existent path.
 still build got  fails with  directory like BOOST_INCLUDEDIR empty for few features in autoware.universe/sensing(autoware/build/velodyne_driver).So I set  BOOST_INCLUDEDIR=/usr/include in CMakeLists.txt in build failed  cases in autoware.universe.
 Now I'm got an error like ""C++ warnings treat as an error"". "
Buid failed autoware.git -b galactic in ubuntu 20.04,D_kwDOAnasMc4ARoN8,2022-12-02T07:25:32Z,arjunshetty955,2,Answered,DC_kwDOAnasMc4AQp8s,kenji-miyake,"@ashkildighin Hmm, it's weird. We usually don't do such a thing.
Could you show me the compile options by enabling `VERBOSE=1`.

```bash
cd autoware/build/velodyne_driver/
VERBOSE=1 make

# Or
cd autoware/
VERBOSE=1 colcon build --event-handlers console_cohesion+ --packages-up-to velodyne_driver
```

Like this:
```
/usr/lib/ccache/gcc -fPIC -shared -Wl,-soname,velodyne_msgs_s__rosidl_typesupport_c.cpython-310-x86_64-linux-gnu.so -o rosidl_generator_py/velodyne_msgs/velodyne_msgs_s__rosidl_typesupport_c.cpython-310-x86_64-linux-gnu.so CMakeFiles/velodyne_msgs__rosidl_typesupport_c__pyext.dir/rosidl_generator_py/velodyne_msgs/_velodyne_msgs_s.ep.rosidl_typesupport_c.c.o  -Wl,-rpath,/home/kenji/autoware/build/velodyne_msgs/rosidl_generator_py/velodyne_msgs:/home/kenji/autoware/build/velodyne_msgs:/opt/ros/humble/lib: rosidl_generator_py/velodyne_msgs/libvelodyne_msgs__rosidl_generator_py.so /usr/lib/x86_64-linux-gnu/libpython3.10.so libvelodyne_msgs__rosidl_typesupport_c.so /opt/ros/humble/lib/libstd_msgs__rosidl_typesupport_fastrtps_c.so /opt/ros/humble/lib/libstd_msgs__rosidl_typesupport_fastrtps_cpp.so /opt/ros/humble/lib/libstd_msgs__rosidl_typesupport_introspection_c.so /opt/ros/humble/lib/libstd_msgs__rosidl_typesupport_introspection_cpp.so /opt/ros/humble/lib/libstd_msgs__rosidl_typesupport_cpp.so /opt/ros/humble/lib/libstd_msgs__rosidl_generator_py.so /opt/ros/humble/lib/libbuiltin_interfaces__rosidl_typesupport_fastrtps_c.so /opt/ros/humble/lib/libbuiltin_interfaces__rosidl_typesupport_introspection_c.so /opt/ros/humble/lib/libbuiltin_interfaces__rosidl_typesupport_fastrtps_cpp.so /opt/ros/humble/lib/libbuiltin_interfaces__rosidl_typesupport_introspection_cpp.so /opt/ros/humble/lib/libbuiltin_interfaces__rosidl_typesupport_cpp.so /opt/ros/humble/lib/libbuiltin_interfaces__rosidl_generator_py.so /opt/ros/humble/lib/librmw.so /opt/ros/humble/lib/libstd_msgs__rosidl_typesupport_c.so /usr/lib/x86_64-linux-gnu/libpython3.10.so /opt/ros/humble/lib/libbuiltin_interfaces__rosidl_typesupport_c.so libvelodyne_msgs__rosidl_generator_c.so /opt/ros/humble/lib/librosidl_typesupport_fastrtps_c.so /opt/ros/humble/lib/librosidl_typesupport_fastrtps_cpp.so /opt/ros/humble/lib/libfastcdr.so.1.0.24 /opt/ros/humble/lib/librmw.so /opt/ros/humble/lib/libstd_msgs__rosidl_generator_c.so /opt/ros/humble/lib/libbuiltin_interfaces__rosidl_generator_c.so /opt/ros/humble/lib/librosidl_typesupport_introspection_cpp.so /opt/ros/humble/lib/librosidl_typesupport_introspection_c.so /opt/ros/humble/lib/librosidl_typesupport_c.so /opt/ros/humble/lib/librosidl_runtime_c.so /opt/ros/humble/lib/librcutils.so -ldl -Wl,-rpath-link,/opt/ros/humble/lib
```

Also, could you compare your tool versions and environment variables with the ones in the Docker container?

```bash
docker run --rm -it ghcr.io/autowarefoundation/autoware-universe:galactic-latest
gcc --version
echo $PATH
// etc.
```"
Buid failed autoware.git -b galactic in ubuntu 20.04,D_kwDOAnasMc4ARoN8,2022-12-02T07:25:32Z,arjunshetty955,2,Answered,DC_kwDOAnasMc4ARKxC,anilbommareddy,"@arjunshetty955 @kenji-miyake @ashkildighin @esteve @tleyden 
I also faced similar issue with Ubuntu 22.04 and 20.04 but this issue not seen in the docker environment 
issue observed outside the docker environment,
I think when building source code,the cmake sets all your CMAKE_CURRENT_LIST_DIR with prefix """" instead of /usr
this would be problematic and cmake would find no such include folder of such directory. Thus, outputting the question's error message.Firstly, Ubuntu has shortcut to /usr/lib as lib at root directory /, which is the folder /lib.Secondly, Ubuntu's root directory does not have a /include folder that supposed to have all the headers etc.
To cross verify this behavior ,I tried to build in docker environment and build got successfully 

**Docker environment Rood Directory :/root**
**Out side Docker environment Root directory :/home/user**

Docker Steps:
Installation of docker in Ubuntu 22.04 - https://docs.docker.com/engine/install/ubuntu/
 Pull the docker image
	sudo docker pull ubuntu  /for latest 22.04

Create the container from docker image
    sudo docker run -it --name autoware-test-docker ubuntu
	
apt-get update && apt-get -y install sudo
sudo apt-get install -y vim wget curl git

Install vcstool:
===============
curl -s https://packagecloud.io/install/repositories/dirk-thomas/vcstool/script.deb.sh | sudo bash
sudo apt-get update
sudo apt-get install python3-vcstool

Virtual Environment:
===================
mkdir colcon-venv
python3 -m venv colcon-venv
. colcon-venv/bin/activate
pip install -U pip setuptools
mkdir colcon-from-source && cd colcon-from-source
curl --output colcon.repos https://raw.githubusercontent.com/colcon/colcon.readthedocs.org/main/colcon.repos
mkdir src
 /usr/bin/vcs import src < colcon.repos

come out form python-colcon-envirnoment:$deactivate

Build-Autoware
==============
git clone https://github.com/autowarefoundation/autoware.git
cd autoware
./setup-dev-env.sh   */enter Y and install cuda-Y.
mkdir src
vcs import src < autoware.repos
vcs import src < simulator.repos.
rosdep update
source /opt/ros/humble/setup.bash
rosdep install -y --from-paths src --ignore-src --rosdistro $ROS_DISTRO
Build-workspace:
colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release

Please let me know you thoughts to make -autoware build success in outside docker environment.
"
Buid failed autoware.git -b galactic in ubuntu 20.04,D_kwDOAnasMc4ARoN8,2022-12-02T07:25:32Z,arjunshetty955,2,Answered,DC_kwDOAnasMc4AQem2,ashkildighin,"In  fresh Ubuntu environment also observed the same issue i.e Build failed autoware branch galactic in ubuntu 20.04

steps are followed.
install vsctool:


$curl -s https://packagecloud.io/install/repositories/dirk-thomas/vcstool/script.deb.sh | sudo bash
$sudo apt-get update
$sudo apt-get install python3-vcstool

Reference Links:https://github.com/dirk-thomas/vcstool

Virtual Environments:

$ mkdir colcon-venv
$ python3 -m venv colcon-venv
$ . colcon-venv/bin/activate	
$pip install -U pip setuptools
$ mkdir colcon-from-source && cd colcon-from-source
$ curl --output colcon.repos https://raw.githubusercontent.com/colcon/colcon.readthedocs.org/main/colcon.repos
$ mkdir src
$ /usr/bin/vcs import src < colcon.repos

come out form python-colcon-envirnoment:$deactivate

Reference link-https://colcon.readthedocs.io/en/released/developer/bootstrap.html

Build-Autoware:

$git clone https://github.com/autowarefoundation/autoware.git -b galactic
$cd autoware
$./setup-dev-env.sh
$mkdir src
$vcs import src < autoware.repos
$rosdep update
$source /opt/ros/galactic/setup.bash
$rosdep install -y --from-paths src --ignore-src --rosdistro $ROS_DISTRO

Build-workspace:
colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release

Build-Error:
CMake Error in CMakeLists.txt:
Imported target ""lanelet2_core::lanelet2_core"" includes non-existent path

""/include""
in its INTERFACE_INCLUDE_DIRECTORIES. Possible reasons include:

lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description: Ubuntu 20.04.5 LTS
Release: 20.04
Codename: focal
"
Extending Route Lanelets Along Goal Pose Footprint,D_kwDOAnasMc4ARohV,2022-12-02T15:27:50Z,ismetatabay,1,Answered,,,
Extending Route Lanelets Along Goal Pose Footprint,D_kwDOAnasMc4ARohV,2022-12-02T15:27:50Z,ismetatabay,1,Answered,DC_kwDOAnasMc4AQinH,ismetatabay,@takayuki5168 Do you have any comments ? :slightly_smiling_face:
Extending Route Lanelets Along Goal Pose Footprint,D_kwDOAnasMc4ARohV,2022-12-02T15:27:50Z,ismetatabay,1,Answered,DC_kwDOAnasMc4AQvKF,satoshi-ota,@takayuki5168 ping
Extending Route Lanelets Along Goal Pose Footprint,D_kwDOAnasMc4ARohV,2022-12-02T15:27:50Z,ismetatabay,1,Answered,DC_kwDOAnasMc4AQ_gO,takayuki5168,"@ismetatabay 
Sorry to be late.

1) In my opinion, any lanelet after the goal one is acceptable to add in this case since there will be no issue depending on which lanelet to add.
Adding all next lanelets cannot may not work with the current mission_planner and behavior_path_planner like failing to plan a route/path.

2) In behavior path planner, the next lanelet after the goal is added to fix this issue (this issue is that lanelets from the mission_planner do not cover the goal footprint).
This is very temporary implementation, so this should be removed with your implementation in mission_planner.
https://github.com/autowarefoundation/autoware.universe/blob/f67d7337d4975a10925d53e7967a042587b84315/planning/behavior_path_planner/src/utilities.cpp#L1176-L1199"
2022-12-05 ODD working group weekly meeting (122),D_kwDOAnasMc4ARp7F,2022-12-05T08:14:17Z,Igata-ctrl,0,Unanswered,,,
Autoware deployed in Autosar on yocto or QNX?,D_kwDOAnasMc4ARp-n,2022-12-05T09:41:03Z,ashkildighin,0,Unanswered,,,
What is occulusion spot ?,D_kwDOAnasMc4ARqBv,2022-12-05T10:58:34Z,Ryujiyasu,2,Answered,,,
What is occulusion spot ?,D_kwDOAnasMc4ARqBv,2022-12-05T10:58:34Z,Ryujiyasu,2,Answered,DC_kwDOAnasMc4AQcyC,maxime-clem,"You can find a description of what is an occlusion spot here: https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/occlusion-spot-design/
In short: occlusion spots are positions along the path where obstacles might suddenly appear (for example, they may come out from behind an obstacle).

The occlusion spots are only meant to slow down the vehicle, so the issue from your picture is caused by something else. It looks like the motion planner of Autoware is failing to generate a valid trajectory.
Are you able to share your map and vehicle model ?"
What is occulusion spot ?,D_kwDOAnasMc4ARqBv,2022-12-05T10:58:34Z,Ryujiyasu,2,Answered,DC_kwDOAnasMc4AQcye,Ryujiyasu,"[sample-data.zip](https://github.com/autowarefoundation/autoware/files/10153593/sample-data.zip)
[sample_vehicle_launch.zip](https://github.com/autowarefoundation/autoware/files/10153595/sample_vehicle_launch.zip)
"
What is occulusion spot ?,D_kwDOAnasMc4ARqBv,2022-12-05T10:58:34Z,Ryujiyasu,2,Answered,DC_kwDOAnasMc4AQdDk,maxime-clem,"Thank you. I can run your setup locally with the simple planning simulator but cannot reproduce the issue.
The generated trajectory looks okay for me and the vehicle is mostly able to follow it.
![image](https://user-images.githubusercontent.com/78338830/205649809-4c366e6e-e347-47dc-b7c2-d33551de5c86.png)

Maybe the issue from your picture comes from the obstacle points detected by the sensors simulated in Gazebo. From the vehicle description you shared, it looks like you may be using the default sensor configuration which probably does not match your Gazebo model. This could cause some false obstacle detection.
I expect you will also encounter issues with the planners and controllers as they require tuning for the robot model you are using."
What is occulusion spot ?,D_kwDOAnasMc4ARqBv,2022-12-05T10:58:34Z,Ryujiyasu,2,Answered,DC_kwDOAnasMc4AQdMP,Ryujiyasu,thank you answering my question 
What is occulusion spot ?,D_kwDOAnasMc4ARqBv,2022-12-05T10:58:34Z,Ryujiyasu,2,Answered,DC_kwDOAnasMc4AQeS0,Ryujiyasu,"I don't know why, but I changed from awsim-branch to galactic-branch and it fixed it. Thank you very much.
![Screenshot from 2022-12-06 09-32-04](https://user-images.githubusercontent.com/15918865/205778290-69398209-1cd3-4992-a225-ee3451008124.png)
"
Detected objects are wrongly displayed on RViz,D_kwDOAnasMc4ARqRA,2022-12-05T16:10:26Z,msanchezvicom,0,Unanswered,,,
Mapping WG Meeting 07/12/2022,D_kwDOAnasMc4ARqqw,2022-12-06T05:25:51Z,armaganarsln,0,Unanswered,,,
Which parameter determines the width of the planner?,D_kwDOAnasMc4ARqst,2022-12-06T06:23:54Z,Ryujiyasu,2,Answered,,,
Which parameter determines the width of the planner?,D_kwDOAnasMc4ARqst,2022-12-06T06:23:54Z,Ryujiyasu,2,Answered,DC_kwDOAnasMc4AQgwL,satoshi-ota,"Hi @Ryujiyasu 
My team member will check your problem. So, please wait for a while :+1: "
Which parameter determines the width of the planner?,D_kwDOAnasMc4ARqst,2022-12-06T06:23:54Z,Ryujiyasu,2,Answered,DC_kwDOAnasMc4AQu8j,satoshi-ota,"Hi @Ryujiyasu We could run your vehicle in Psim.

> Which parameter determines the width of the planner?

The trajectory width in Psim is changeable by rviz config, but it does not affect vehicle behavior. Basically, as long as vehicle_info.param.yaml is properly set up, there is no problem for planner.

![Screenshot from 2022-12-13 15-10-18](https://user-images.githubusercontent.com/44889564/207244502-cc9ad78a-794f-42ad-bbcb-0173f54496d4.png)

The problem is in your map. Your map has only one torus shape lanelet, but the current autoware cannot set a goal on the same lane as Ego. So, you have to build your environment by multiple lanelets. 
(FYI: the issue already exists, and other contributers try to fix that limitation. https://github.com/autowarefoundation/autoware.universe/issues/2354)

![Screenshot from 2022-12-13 15-13-31](https://user-images.githubusercontent.com/44889564/207240603-4efb63c2-4ba7-4d5a-8eaf-81c449ff04f6.png)

At first, I fixed your lanelet map by [vector map builder](https://docs.web.auto/en/user-manuals/vector-map-builder/release-notes/20221122) as following.

![Screenshot from 2022-12-13 15-23-34](https://user-images.githubusercontent.com/44889564/207242028-85b3705c-cc56-4da6-ab00-c55afbb4c655.png)

[lanelet2_map.zip](https://github.com/autowarefoundation/autoware/files/10232476/lanelet2_map.zip)

Secondly, I changed the parameter `refine_goal_search_radius_range` 7.5 -> 0.3. (the param's detail description is [here](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/#smooth-goal-connection).)

https://github.com/autowarefoundation/autoware.universe/blob/c48b9cfa7074ecd46d96f6dc43679e17bde3a63d/launch/tier4_planning_launch/config/scenario_planning/lane_driving/behavior_planning/behavior_path_planner/behavior_path_planner.param.yaml#L15

I think you have to tune more params, but I can engage your vehicle in Psim by just only the above change.

https://user-images.githubusercontent.com/44889564/207244138-88b389fa-065f-4042-8f07-5db316c4daa9.mp4
"
Which parameter determines the width of the planner?,D_kwDOAnasMc4ARqst,2022-12-06T06:23:54Z,Ryujiyasu,2,Answered,DC_kwDOAnasMc4AQzaB,satoshi-ota,"@Ryujiyasu I upload the above fixed map. 

[lanelet2_map.zip](https://github.com/autowarefoundation/autoware/files/10232482/lanelet2_map.zip)"
Which parameter determines the width of the planner?,D_kwDOAnasMc4ARqst,2022-12-06T06:23:54Z,Ryujiyasu,2,Answered,DC_kwDOAnasMc4AQxVR,Ryujiyasu,thank you for your kindness !!
Autonomy Software WG Meeting 2022/12/13,D_kwDOAnasMc4ARqzx,2022-12-06T09:20:50Z,BonoloAWF,1,Answered,,,
Autonomy Software WG Meeting 2022/12/13,D_kwDOAnasMc4ARqzx,2022-12-06T09:20:50Z,BonoloAWF,1,Answered,DC_kwDOAnasMc4AQwBV,xmfcx,"# Issues to discuss

## Bus ODD Nov-Dec Milestone
- https://github.com/autowarefoundation/autoware.universe/issues/2125
  - No news
- https://github.com/autowarefoundation/autoware.universe/issues/2182
  - https://github.com/autowarefoundation/autoware.universe/pull/2288
    - Waiting for review (approved once)
  - https://github.com/autowarefoundation/autoware.universe/pull/2434
    - Draft
- https://github.com/autowarefoundation/autoware.universe/issues/1121
  - https://github.com/autowarefoundation/autoware.universe/pull/2401
    - 281 changes
- https://github.com/autowarefoundation/autoware.universe/issues/1543
  - https://github.com/autowarefoundation/autoware.universe/pull/2454
    - Draft
- https://github.com/autowarefoundation/autoware.universe/issues/1761
  - https://github.com/autowarefoundation/autoware.universe/pull/2088
    - Just merged
  - Just closed
- https://github.com/autowarefoundation/autoware.universe/issues/2222
  - https://github.com/autowarefoundation/autoware.universe/pull/2290
    - Draft
- https://github.com/autowarefoundation/autoware.universe/issues/1253
  - https://github.com/autowarefoundation/autoware-documentation/issues/231
    - @mitsudome-r is working on this
- https://github.com/autowarefoundation/autoware.universe/issues/1716
  - https://github.com/autowarefoundation/autoware.universe/pull/1999
    - Drivable area changed from grid map to poly-lines
    - Needs to be reworked
- https://github.com/autowarefoundation/autoware.universe/issues/563
  - Waiting for work from @xmfcx
- https://github.com/autowarefoundation/autoware.universe/issues/611
  - https://github.com/autowarefoundation/autoware.universe/pull/647
    - https://github.com/autowarefoundation/autoware.universe/pull/647#discussion_r1044667257
    - Communication problem
- https://github.com/autowarefoundation/autoware.universe/issues/2044
  - https://github.com/autowarefoundation/autoware.universe/pull/2312
    - Waiting for review
- https://github.com/autowarefoundation/autoware.universe/issues/2330
  - Waiting for Nvidia to release ARM64 version of TensorRT
- https://github.com/autowarefoundation/autoware.universe/issues/2213
  - https://github.com/autowarefoundation/autoware.universe/pull/2296
    - Waiting for action from @lchojnack
- https://github.com/autowarefoundation/autoware.universe/pull/2288
  - Needs to be rebased and have conflicts resolved
- https://github.com/autowarefoundation/autoware.universe/issues/2390
  - @xmfcx to check the suggestions and close the issue
- https://github.com/autowarefoundation/autoware.universe/issues/1715
  - https://github.com/autowarefoundation/autoware.universe/issues/2354
    - https://github.com/autowarefoundation/autoware.universe/pull/2424
    - Being worked on, draft

## [Remaining bugs](https://github.com/autowarefoundation/autoware.universe/issues?q=is%3Aopen+is%3Aissue+label%3Abug+-label%3A%22high+priority%22+-milestone%3A%22Bus+ODD+Nov-Dec+Milestone%22+)
- https://github.com/autowarefoundation/autoware.universe/issues/2374
  - Assigned
- https://github.com/autowarefoundation/autoware.universe/issues/2364
  - Assigned
- https://github.com/autowarefoundation/autoware.universe/issues/2353
  - Assigned
- https://github.com/autowarefoundation/autoware.universe/issues/2262
  - New `obstacle_cruise_planner` is recommended, should we close this issue?
- https://github.com/autowarefoundation/autoware.universe/issues/2252
  - Duplicate of https://github.com/autowarefoundation/autoware/discussions/2859
  - Closed
- https://github.com/autowarefoundation/autoware.universe/pull/2341
  - Draft, being discussed
  - https://github.com/orgs/autowarefoundation/discussions/2859
- https://github.com/autowarefoundation/autoware.universe/issues/2251
  - Part of planning architecture restructuring
  - No action
- https://github.com/autowarefoundation/autoware.universe/issues/2095
  - Ongoing discussion
- https://github.com/autowarefoundation/autoware.universe/issues/2052
  - Maybe we should add this detail to the documentation?
- https://github.com/autowarefoundation/autoware.universe/issues/1930
  - Stale, let's discuss
- https://github.com/autowarefoundation/autoware.universe/issues/1913
  - Is this resolved?
- https://github.com/autowarefoundation/autoware.universe/issues/1904
  - No action yet, asked for updates"
Using our own 3D-Environment with AWSIM,D_kwDOAnasMc4ARrAr,2022-12-06T13:38:56Z,nbehrnbehr,2,Answered,,,
Using our own 3D-Environment with AWSIM,D_kwDOAnasMc4ARrAr,2022-12-06T13:38:56Z,nbehrnbehr,2,Answered,DC_kwDOAnasMc4AQmfW,shmpwk,@mackierx111   Could you answer this quiestion?
Using our own 3D-Environment with AWSIM,D_kwDOAnasMc4ARrAr,2022-12-06T13:38:56Z,nbehrnbehr,2,Answered,DC_kwDOAnasMc4AQn6P,mackierx111,"@nbehrnbehr 
hello. I am AWSIM committer.
If `pcd`, `osm`, and `fbx`are already prepared, you can change environments relatively smoothly. And it requires basic knowledge of Unity.

For setups related to the environment, you can open the `AutowareSimualtion.unity` scene and work with the `Nishishinjuku RandomTraffic` GameObject as a reference.
![image](https://user-images.githubusercontent.com/14327102/206723358-03be98b8-26c8-4664-9268-6285d3b5977d.png)

> But we dont get how to exchange the 3D-map in the AWSIM_DEMO

The simplest way is to remove `Nishishinjuku RandomTraffic` GameObject and place any 3D model. Then, give it an `Environment.cs` component and set the MGRS value. copy and place the `Volume` and `Directional Light` GameObjects to make it look better.

> how to export from the AWSIM-Main out of unity.

Do you want to create a Unity binary? 
File -> Build Settings... -> Build 
Please add your scene in Build Settings."
Using our own 3D-Environment with AWSIM,D_kwDOAnasMc4ARrAr,2022-12-06T13:38:56Z,nbehrnbehr,2,Answered,DC_kwDOAnasMc4AQsw5,nbehrnbehr,"Thanks a lot for the quick help! 
So we now got our Mesh into the Simulation and we are able to run it on our Linuxmachine. The only thing we are still struggling with is (probably just a simple thing we have to change in Unity) that our vehicle is still falling through the mesh when starting the executable.

Thank you :)"
Using our own 3D-Environment with AWSIM,D_kwDOAnasMc4ARrAr,2022-12-06T13:38:56Z,nbehrnbehr,2,Answered,DC_kwDOAnasMc4ARndq,mertbacaksiz,How can I get pcd output from my 3d map
Using our own 3D-Environment with AWSIM,D_kwDOAnasMc4ARrAr,2022-12-06T13:38:56Z,nbehrnbehr,2,Answered,DC_kwDOAnasMc4AS9za,mackierx111,"We recommend the following methods
1. Prepare 3d model (fbx)
2. Convert mesh to point cloud in blender or etc.
3. Create a vector map based on the pointcloud created above. Vector Map Builder : https://tools.tier4.jp/feature/vector_map_builder_ll2/
4. Create pcd using AWSIM's mesh2pcd. docs : https://tier4.github.io/AWSIM/Components/Environment/PointCloudMapper/

For now, AWSIM's Mesh2Pcd requires VectorMap."
Using our own 3D-Environment with AWSIM,D_kwDOAnasMc4ARrAr,2022-12-06T13:38:56Z,nbehrnbehr,2,Answered,DC_kwDOAnasMc4AWLfA,zhuyingxiang95,"hello guys, i got the same issue. the vehicle is falling through the mesh when starting executable.   "
Using our own 3D-Environment with AWSIM,D_kwDOAnasMc4ARrAr,2022-12-06T13:38:56Z,nbehrnbehr,2,Answered,DC_kwDOAnasMc4AWY4O,mackierx111,"@zhuyingxiang95 
Which executable file is it?"
Using our own 3D-Environment with AWSIM,D_kwDOAnasMc4ARrAr,2022-12-06T13:38:56Z,nbehrnbehr,2,Answered,DC_kwDOAnasMc4AWZel,zhuyingxiang95,"hi Mackier,
I have fixed the above posted issue yet. Now the issue is when i run the customized scenario in unity, i supposed  to get the ros 2 topics which should be published from AWsim simulator, but i could not seen any topics when i run ros2 topic list."
Using our own 3D-Environment with AWSIM,D_kwDOAnasMc4ARrAr,2022-12-06T13:38:56Z,nbehrnbehr,2,Answered,DC_kwDOAnasMc4AWZfN,zhuyingxiang95," and i have followed  this instruction""The simplest way is to remove Nishishinjuku RandomTraffic GameObject and place any 3D model. Then, give it an Environment.cs component and set the MGRS value. copy and place the Volume and Directional Light GameObjects to make it look better."" and also have uploaded the lanelet 2 map. 
I am not sure which kind of  additional steps should i do to make the autoware and awsim work together."
Using our own 3D-Environment with AWSIM,D_kwDOAnasMc4ARrAr,2022-12-06T13:38:56Z,nbehrnbehr,2,Answered,DC_kwDOAnasMc4AbhyS,whbcumtb,you should add or build mesh collison when importing fbx file into Unity in order to avoid vehicle falling through the mesh
2022-12-07 Simulation Working Group Meeting,D_kwDOAnasMc4ARrPG,2022-12-06T19:38:43Z,WJaworskiRobotec,0,Unanswered,,,
"autoware1.13 access gnss, pcd map and radar point cloud are not in the same plane.",D_kwDOAnasMc4ARrkd,2022-12-07T08:02:52Z,miku54,0,Unanswered,,,
how to launch camera node,D_kwDOAnasMc4ARsXv,2022-12-08T07:02:54Z,xia-ya,0,Unanswered,,,
Source installation failed: ndt_omp,D_kwDOAnasMc4ARvWV,2022-12-08T19:27:51Z,cjffly,5,Answered,,,
Source installation failed: ndt_omp,D_kwDOAnasMc4ARvWV,2022-12-08T19:27:51Z,cjffly,5,Answered,DC_kwDOAnasMc4AQq6M,kenji-miyake,"@cjffly Was your Ubuntu 22.04 clean-installed? Or was upgraded from 20.04? I guess there are some issues with your environment.
My gcc version is also `gcc (Ubuntu 11.3.0-1ubuntu1~22.04) 11.3.0`, but can successfully build ndt_omp."
Source installation failed: ndt_omp,D_kwDOAnasMc4ARvWV,2022-12-08T19:27:51Z,cjffly,5,Answered,DC_kwDOAnasMc4AQq6N,cjffly,"> @cjffly Was your Ubuntu 22.04 clean-installed? Or was upgraded from 20.04? I guess there are some issues with your environment. My gcc version is also `gcc (Ubuntu 11.3.0-1ubuntu1~22.04) 11.3.0`, but can successfully build ndt_omp.

You are right, mine is upgraded from 20.04. Not sure if there is quick fix or I have to reinstall 22.04 from scratch."
Source installation failed: ndt_omp,D_kwDOAnasMc4ARvWV,2022-12-08T19:27:51Z,cjffly,5,Answered,DC_kwDOAnasMc4AQq6O,kenji-miyake,"I guess there is some cache remaining, or your environment variable is wrong. Please check them.
@cjffly If it's not a bug, can I close this issue? Or can I convert this issue to a discussion thread?"
Source installation failed: ndt_omp,D_kwDOAnasMc4ARvWV,2022-12-08T19:27:51Z,cjffly,5,Answered,DC_kwDOAnasMc4AQq6P,cjffly,"> I guess there is some cache remaining, or your environment variable is wrong. Please check them.
> @cjffly If it's not a bug, can I close this issue? Or can I convert this issue to a discussion thread?

Maybe concert into issue would work. I will try to fix my environment and update here later"
Source installation failed: ndt_omp,D_kwDOAnasMc4ARvWV,2022-12-08T19:27:51Z,cjffly,5,Answered,DC_kwDOAnasMc4ARiGR,cjffly,"[update]

After a clean install of popos 22.04, this issue is gone.
@kenji-miyake You may close this issue, thx!"
Source installation failed: ndt_omp,D_kwDOAnasMc4ARvWV,2022-12-08T19:27:51Z,cjffly,5,Answered,DC_kwDOAnasMc4ARiWa,kenji-miyake,"@cjffly Thank you for letting me know it.
Since this is a Q&A thread, I'll mark your comment as an answer."
Which gcc version is supported?,D_kwDOAnasMc4ARs2v,2022-12-08T19:35:32Z,cjffly,2,Answered,,,
Which gcc version is supported?,D_kwDOAnasMc4ARs2v,2022-12-08T19:35:32Z,cjffly,2,Answered,DC_kwDOAnasMc4AQlj5,kenji-miyake,"@cjffly It is recommended to use the default version of the OS listed in https://www.ros.org/reps/rep-2000.html.
Generally, newer versions can be used, but note that sometimes it gets more strict, or due to compatibility issues, it causes some errors."
Which gcc version is supported?,D_kwDOAnasMc4ARs2v,2022-12-08T19:35:32Z,cjffly,2,Answered,DC_kwDOAnasMc4AQlj9,kenji-miyake,"> The ndt_omp package is asking gcc version 9, but on my system gcc is 11.3, is there a work around for this?

Regarding this, I commented [here](https://github.com/autowarefoundation/autoware/issues/3119#issuecomment-1343720820).
I believe `11.3` works correctly."
rviz2 crash when running simulation tutorials,D_kwDOAnasMc4ARvUH,2022-12-11T02:52:14Z,tongyucong,2,Answered,,,
rviz2 crash when running simulation tutorials,D_kwDOAnasMc4ARvUH,2022-12-11T02:52:14Z,tongyucong,2,Answered,DC_kwDOAnasMc4AQq1K,tongyucong,"I don't know if it's the computer configure problem.
lenovo air pro laptop
16.0 GiB
AMD® Ryzen 7 5800h with radeon graphics × 16
AMD® Renoir"
rviz2 crash when running simulation tutorials,D_kwDOAnasMc4ARvUH,2022-12-11T02:52:14Z,tongyucong,2,Answered,DC_kwDOAnasMc4AQq4t,kenji-miyake,"@tongyucong Thank you for sharing detailed information. :+1: 
Although I don't know the cause exactly, I'll write some advice below.
- Launch RViz with the default config to debug it. (Usually just executing `rviz2` without any argument.)
- Set `QT_QPA_PLATFORM=wayland` as shown. (I'm not sure about the effect, but trying it can give further information.)
- Reboot your computer.
- Change the display server.
  - https://linuxconfig.org/how-to-enable-disable-wayland-on-ubuntu-22-04-desktop
- Ask the question also on [ROS Answers](https://answers.ros.org/questions/)."
rviz2 crash when running simulation tutorials,D_kwDOAnasMc4ARvUH,2022-12-11T02:52:14Z,tongyucong,2,Answered,DC_kwDOAnasMc4AQq89,tongyucong,"Thanks for your advice. Exactly, i have test the rviz2 before. There is no error when running rviz2 with the configure of autoware.rviz. "
Add AD API to identify which parameter files have been loaded into Autoware,D_kwDOAnasMc4ARvyH,2022-12-12T02:38:41Z,Youneko,2,Answered,,,
Add AD API to identify which parameter files have been loaded into Autoware,D_kwDOAnasMc4ARvyH,2022-12-12T02:38:41Z,Youneko,2,Answered,DC_kwDOAnasMc4AQulP,isamu-takagi,"Thank you for the API suggestion. To summarize your requirement, the application wants to change a parameter and check if it is reflected. I think there are two approaches to this.

One way is to handle ROS parameters directly. The API lists the parameters that can be set, and the application sets the parameters in the ROS standard method. This uses the ROS parameter function, so it requires less dedicated implementation.

Another way is to handle resource files. Although it is necessary to decide the file transfer method etc., it can be applied to other than parameters such as map files. In addition, the implementation becomes complicated because the processing changes for each resource.

Note that in either method the API does not know whether the parameters are really reflected. The API can get parameters set on the node, but it is implementation dependent whether it is synchronized with internal variables. In the current architecture, it can be achieved by using software startup parameters, but it is not certain."
Add AD API to identify which parameter files have been loaded into Autoware,D_kwDOAnasMc4ARvyH,2022-12-12T02:38:41Z,Youneko,2,Answered,DC_kwDOAnasMc4AQulo,isamu-takagi,"@Youneko I have two questions.
1. Which method, ros parameter directly or resource file, is preferable for your application?
2. It is difficult to check whether the parameters are reflected in the node, so is it enough to know the parameters at startup?"
Add AD API to identify which parameter files have been loaded into Autoware,D_kwDOAnasMc4ARvyH,2022-12-12T02:38:41Z,Youneko,2,Answered,DC_kwDOAnasMc4AQxgJ,Youneko,"@isamu-takagi 

Thank you for your suggestion!
 
> 1. Which method, ros parameter directly or resource file, is preferable for your application?

I think ""ros parameter directly"" method is better. 
Because essentially, what we want to verify is not the difference in the parameter files, but the difference in the parameters themselves.
For example, it is not our intention to have the verification result change depending on the presence or absence of comment lines in the parameter file.

> 2. It is difficult to check whether the parameters are reflected in the node, so is it enough to know the parameters at startup?

Yes, it is enough to check the parameters ONLY at startup.
"
Add AD API to identify which parameter files have been loaded into Autoware,D_kwDOAnasMc4ARvyH,2022-12-12T02:38:41Z,Youneko,2,Answered,DC_kwDOAnasMc4AREEq,isamu-takagi,"As a result of talking directly with @Youneko, I found that the use case is too specific. So I'm holding off development until other common use cases are clear."
about runtime manager,D_kwDOAnasMc4ARv7e,2022-12-12T07:28:58Z,phoenares,1,Answered,,,
about runtime manager,D_kwDOAnasMc4ARv7e,2022-12-12T07:28:58Z,phoenares,1,Answered,DC_kwDOAnasMc4AQ9e8,satoshi-ota,"Hi @phoenares 
The runtime manager (like the one in autoware.ai) don't exist in autoware.universe."
2022-12-12 ODD working group weekly meeting (123),D_kwDOAnasMc4ARv9L,2022-12-12T07:57:30Z,Igata-ctrl,0,Unanswered,,,
Road test: 60 km/h localization,D_kwDOAnasMc4ARwBw,2022-12-12T09:50:18Z,cyn-liu,2,Answered,,,
Road test: 60 km/h localization,D_kwDOAnasMc4ARwBw,2022-12-12T09:50:18Z,cyn-liu,2,Answered,DC_kwDOAnasMc4AQs34,xmfcx,"@cyn-liu first of all, thanks for taking on this task! ٩(^ᴗ^)۶

My suggestion would be following:
Drive at:
- 20 km/h
- 40 km/h
- 60 km/h
on the same route. I know it's impossible to drive on the exact same path but we should try.

This way we can compare how localization performance changes by velocity.

Also like you mentioned:
- calculation time per scan
- ndt score
are ok.

It would be best to compare it to a gnss/ins rtk ground truth (if the environment is open enough for satellite visibility).

But since this data doesn't have it, maybe we can compare the ""60 km/h"" data by 
- running localization in real time
- giving it extra time for each scan to achieve better accuracy (or running some more costly matching algorithms)
to compare how velocity affects the performance."
Road test: 60 km/h localization,D_kwDOAnasMc4ARwBw,2022-12-12T09:50:18Z,cyn-liu,2,Answered,DC_kwDOAnasMc4AQvHc,cyn-liu,Thanks your replay! @xmfcx 
Road test: 60 km/h localization,D_kwDOAnasMc4ARwBw,2022-12-12T09:50:18Z,cyn-liu,2,Answered,DC_kwDOAnasMc4AQvIm,liuXinGangChina,"Hi, Fatih. @xmfcx 
I think your suggestion is pretty resonable. But I think this test is mainly foucs on whether current localization stack is able to handle high speed AD scenarios . If the localization stack can do this, we plan to proceed more high way AD driving test in the future to push Autoware's edge to new horizon.

1. Currently the bag we collected contains several driving scenarios from 0km/h to 60km/h, and of course includes 20km/h and 40km/h. But if you intend to test with constant 20km/h or 40km/h, we haven't got that bag yet.
2. The test road is along a mountain, so the gnss signal is not signal even though we got RTK service by that region. So, we can't use rtk as Ground truth.
3. For the evaluation dimension, I'm totally agree with you
4. Regarding ""running localization in real time under 60 km/h"", i think it's not allowed by local regulation.
5. As for ""giving it extra time for each scan to achieve better accuracy (or running some more costly matching algorithms)"" i think we can try using other pointlcoud registration method provided by Autoware, and compare their performance."
Road test: 60 km/h localization,D_kwDOAnasMc4ARwBw,2022-12-12T09:50:18Z,cyn-liu,2,Answered,DC_kwDOAnasMc4AQvTn,xmfcx,"@liuXinGangChina 

> Currently the bag we collected contains several driving scenarios from 0km/h to 60km/h, and of course includes 20km/h and 40km/h. But if you intend to test with constant 20km/h or 40km/h, we haven't got that bag yet.

It's ok to evaluate with what you've collected for now.

> The test road is along a mountain, so the gnss signal is not signal even though we got RTK service by that region. So, we can't use rtk as Ground truth.

Ok, we need to rely on other point cloud matching algorithms for evaluation then.

> Regarding ""running localization in real time under 60 km/h"", i think it's not allowed by local regulation.

I didn't mean to test it on the vehicle. I've meant, let's play the bag file in real time for analysis of runtime performance.

> As for ""giving it extra time for each scan to achieve better accuracy (or running some more costly matching algorithms)"" i think we can try using other pointcloud registration method provided by Autoware, and compare their performance.

Let's try by giving point clouds more time to align first, if it's not good, we can try other methods like G-ICP or something similar later on. (To make first iteration of this entire evaluation process faster.)"
Road test: 60 km/h localization,D_kwDOAnasMc4ARwBw,2022-12-12T09:50:18Z,cyn-liu,2,Answered,DC_kwDOAnasMc4AQ_tW,cyn-liu,"We recorded two bags with different speeds on the same test road and used these bags to evaluate Autoware's localization performance.

**Point cloud map of test road:**
![MicrosoftTeams-image (1)](https://user-images.githubusercontent.com/104069308/208601476-cf8d604c-f27b-427e-a01c-87d4db015bf4.png)

**Vehicle speed information in bag1:**
![twist-20](https://user-images.githubusercontent.com/104069308/208601533-9c6282d2-f7ec-4ce3-8399-5bb89a3f28bd.png)

**Vehicle speed information in bag2:**
![twist-60](https://user-images.githubusercontent.com/104069308/208601577-b94d76bb-2e22-40d5-9fa9-11a642df3a86.png)

**Localization performance:**
1. NDT matching score(nearest_voxel_transformation_likelihood):
![comp-score](https://user-images.githubusercontent.com/104069308/208601620-1b584b8f-73c9-4fc5-989c-b5973bae2c2a.png)

2. NDT matching iteration number:
![comp-iter](https://user-images.githubusercontent.com/104069308/208601652-c9827c6a-cc26-44c8-a7dd-ea9d27e005e0.png)

3. NDT matching execute time: 
![comp-time](https://user-images.githubusercontent.com/104069308/208601687-a3dfbcf6-5c75-4840-b126-9de1f26a33b6.png)

For detailed test results, please refer to this report:
[Test report - localization performance.pdf](https://github.com/autowarefoundation/autoware/files/10266079/Test.report.-.localization.performance.pdf)
"
Road test: 60 km/h localization,D_kwDOAnasMc4ARwBw,2022-12-12T09:50:18Z,cyn-liu,2,Answered,DC_kwDOAnasMc4AQ_xp,n-patiphon,"@cyn-liu Thank you for sharing the evaluation results! 

From the velocity plots, velocity seems to spike before the ends of both bags.
Were they just noise from odometry or the vehicle really did change its speed abruptly?"
Road test: 60 km/h localization,D_kwDOAnasMc4ARwBw,2022-12-12T09:50:18Z,cyn-liu,2,Answered,DC_kwDOAnasMc4ARAKp,cyn-liu,"This is the speed evaluated by EKF, so there is a lot of noise."
Someone who knows where is the module figure for formula compution？,D_kwDOAnasMc4ARwQo,2022-12-12T14:07:46Z,donnieliu,1,Answered,,,
Someone who knows where is the module figure for formula compution？,D_kwDOAnasMc4ARwQo,2022-12-12T14:07:46Z,donnieliu,1,Answered,DC_kwDOAnasMc4AQujc,takayuki5168,"@donnieliu Can I close this discussion since you opened the duplicated one?
https://github.com/orgs/autowarefoundation/discussions/3130"
Someone who knows where is the module figure for formula compution？,D_kwDOAnasMc4ARwQo,2022-12-12T14:07:46Z,donnieliu,1,Answered,DC_kwDOAnasMc4ARGPP,donnieliu,OK，thanks.
Someone who know the module figure for formular compution?,D_kwDOAnasMc4ARwRx,2022-12-12T14:26:32Z,donnieliu,1,Answered,,,
Someone who know the module figure for formular compution?,D_kwDOAnasMc4ARwRx,2022-12-12T14:26:32Z,donnieliu,1,Answered,DC_kwDOAnasMc4AQujW,takayuki5168,"@donnieliu 
(First of all, it would be much better to add a link for anyone who is not familiar with this document.)
https://autowarefoundation.github.io/autoware.universe/main/planning/obstacle_avoidance_planner/

This will be my task. Currently I'm a bit busy, so I cannot prepare the figure soon. Please wait for a while please."
Someone who know the module figure for formular compution?,D_kwDOAnasMc4ARwRx,2022-12-12T14:26:32Z,donnieliu,1,Answered,DC_kwDOAnasMc4AQum6,donnieliu,"> @donnieliu (First of all, it would be much better to add a link for anyone who is not familiar with this document.) https://autowarefoundation.github.io/autoware.universe/main/planning/obstacle_avoidance_planner/
> 
> This will be my task. Currently I'm a bit busy, so I cannot prepare the figure soon. Please wait for a while please.

OK,thank you for your reply and your attached link."
Someone who know the module figure for formular compution?,D_kwDOAnasMc4ARwRx,2022-12-12T14:26:32Z,donnieliu,1,Answered,DC_kwDOAnasMc4ASXmD,donnieliu,"@takayuki5168 hello, do you have time to update the figrure later ?  Thank you for your help!"
Someone who know the module figure for formular compution?,D_kwDOAnasMc4ARwRx,2022-12-12T14:26:32Z,donnieliu,1,Answered,DC_kwDOAnasMc4ASilU,takayuki5168,"Sorry to be late. Now I'm refactoring the package.
I'll add a doc you want soon in this PR.
https://github.com/autowarefoundation/autoware.universe/pull/2796"
Someone who know the module figure for formular compution?,D_kwDOAnasMc4ARwRx,2022-12-12T14:26:32Z,donnieliu,1,Answered,DC_kwDOAnasMc4AbheK,donnieliu,"@takayuki5168 hello, I'm sorry to disturb you. Do you have time to update the needed figure as to the formulas. I'm blocked  on this matter. Look forward for you help. Thank you!"
error in Cmake while installing autoware in unbuntu 22.04,D_kwDOAnasMc4ARxT9,2022-12-13T13:39:12Z,patelabhay-12,0,Unanswered,,,
Autonomy Software WG Meeting 2022/12/20,D_kwDOAnasMc4ARxbk,2022-12-13T15:55:08Z,BonoloAWF,3,Answered,,,
Autonomy Software WG Meeting 2022/12/20,D_kwDOAnasMc4ARxbk,2022-12-13T15:55:08Z,BonoloAWF,3,Answered,DC_kwDOAnasMc4AQ_sJ,mitsudome-r,"## Nov-Dec Milestones:
- https://github.com/autowarefoundation/autoware.universe/issues/2125
  - no updates (cc. @beyzanurkaya @mehmetdogru )
  - started on creating PR
- https://github.com/autowarefoundation/autoware.universe/issues/2182
  - @maxime-clem working on updating PR https://github.com/autowarefoundation/autoware.universe/issues/2182
  - https://github.com/autowarefoundation/autoware.universe/pull/2288 This needs to be updated by this week as well @maxime-clem 
  - plan to finish this week
- https://github.com/autowarefoundation/autoware.universe/issues/1121
  - PR: https://github.com/autowarefoundation/autoware.universe/pull/2401
  - resolved issue with rebase
- https://github.com/autowarefoundation/autoware.universe/issues/1543
  - https://github.com/autowarefoundation/autoware.universe/pull/2454
  - PR being reviewed. We might want some explanation regarding ""structural change"" from @brkay54 
  - waiting for https://github.com/autowarefoundation/autoware.universe/pull/2432 to be merged
- https://github.com/autowarefoundation/autoware.universe/issues/2222
  - PR ongoing
- https://github.com/autowarefoundation/autoware.universe/issues/1716
  - PR: https://github.com/autowarefoundation/autoware.universe/pull/1999
  - Any updates from @beyzanurkaya?
  - @mehmetdogru to review
- https://github.com/autowarefoundation/autoware.universe/issues/611
  - PR: https://github.com/autowarefoundation/autoware.universe/pull/647
  - Had discussion last week.
  - Waiting for this comment to be resolved: https://github.com/autowarefoundation/autoware.universe/pull/647#discussion_r1052387141
- https://github.com/autowarefoundation/autoware.universe/issues/2044
  - https://github.com/autowarefoundation/autoware.universe/pull/2312
  - If no concern with merging, we can merge this.
- https://github.com/autowarefoundation/autoware.universe/issues/2213
  - https://github.com/autowarefoundation/autoware.universe/pull/2296
  - Any remaining issues before merging?
  - https://github.com/autowarefoundation/autoware.universe/pull/2296#issuecomment-1333701807 needs to be resolved.
- https://github.com/autowarefoundation/autoware.universe/issues/1715
  - @mitsudome-r would like to take different approach (maybe modify mission_planner to break route into different parts and send sequentially.
 "
Autonomy Software WG Meeting 2022/12/20,D_kwDOAnasMc4ARxbk,2022-12-13T15:55:08Z,BonoloAWF,3,Answered,DC_kwDOAnasMc4AQ_1G,hueirutseng,ITRI Autonomous Bus Update [Slides](https://www.dropbox.com/s/ao13rmly6p93b8n/ITRI%20ADV%20upgrade%20schedule_status%20update_20221220.pdf?dl=0)
Autonomy Software WG Meeting 2022/12/20,D_kwDOAnasMc4ARxbk,2022-12-13T15:55:08Z,BonoloAWF,3,Answered,DC_kwDOAnasMc4AQ_1b,liuXinGangChina,"[AWF w52 ASWG.pdf](https://github.com/autowarefoundation/autoware/files/10266428/AWF.w52.ASWG.pdf)
hi, everyone. Above is the slide for today's sync from autocore L4 AD team.
I want to highlight our recently open sourced lidar-camera extrinsic params calibration tool.[https://github.com/autocore-ai/calibration_tools/tree/main/lidar-cam-calib-related#4-calculate-rotation-and-translation](url) please feel free to test and create issues and prs.
thanks, wish everyone a happy healthy day."
Define interfaces between components,D_kwDOAnasMc4ARx8U,2022-12-14T07:53:14Z,isamu-takagi,1,Answered,,,
Define interfaces between components,D_kwDOAnasMc4ARx8U,2022-12-14T07:53:14Z,isamu-takagi,1,Answered,DC_kwDOAnasMc4ARvs2,yukkysaito,"Thanks. I would like to add the following as a component interface, although I think step-by-step is fine.
- RTC
- Topic Hz Specification

Also, to be able to work with external visualization tools, I want to use the component interface for visualization tools such as RViz(except for debug topics)."
Open AD Kit WG meeting 2022/12/14,D_kwDOAnasMc4ARyUO,2022-12-14T11:24:13Z,HamburgDave,0,Unanswered,,,
when colcon build the branch of galactic of autoware package it has  stderr: map_loader,D_kwDOAnasMc4ARy3q,2022-12-15T01:08:24Z,wangxianggang1997,1,Answered,,,
when colcon build the branch of galactic of autoware package it has  stderr: map_loader,D_kwDOAnasMc4ARy3q,2022-12-15T01:08:24Z,wangxianggang1997,1,Answered,DC_kwDOAnasMc4AQ0Hw,kminoda,"It seems like you don't have `fmt` package installed you PC.
How about this?
```
sudo apt-get install -y libfmt-dev
```

Or maybe this would also work.
```
rosdep install -iry --from-paths src --rosdistro $ROS_DISTRO
```"
when colcon build the branch of galactic of autoware package it has  stderr: map_loader,D_kwDOAnasMc4ARy3q,2022-12-15T01:08:24Z,wangxianggang1997,1,Answered,DC_kwDOAnasMc4AYCSh,Autostone-c,"nvidia Orin （ubuntu20.04 ）

hi，I am compiling and building autoware (awsim-stable branch), but I encountered the following error, which shows that there is an error in the system library fmt. How can I solve it?

![image](https://github.com/autowarefoundation/autoware/assets/50130211/ede76a6a-d93f-4480-913f-373f29ed6867)
"
when colcon build the branch of galactic of autoware package it has  stderr: map_loader,D_kwDOAnasMc4ARy3q,2022-12-15T01:08:24Z,wangxianggang1997,1,Answered,DC_kwDOAnasMc4AYCU0,kminoda,"Sorry I have never encountered such issue, and cannot say for sure where the cause is."
when colcon build the branch of galactic of autoware package it has  stderr: map_loader,D_kwDOAnasMc4ARy3q,2022-12-15T01:08:24Z,wangxianggang1997,1,Answered,DC_kwDOAnasMc4AYHdx,mitsudome-r,"@Austone-c If you are using nvidia Orin with ubuntu 20.04, you should at least have to use galactic branch since awsim-stable is for humble branch."
Autoware for boat,D_kwDOAnasMc4ARznn,2022-12-15T20:34:52Z,LiangHuangBC,1,Answered,,,
Autoware for boat,D_kwDOAnasMc4ARznn,2022-12-15T20:34:52Z,LiangHuangBC,1,Answered,DC_kwDOAnasMc4AQ2Am,evshary,"I'm not sure about the possibility of the Autoware boat (Autoware is mainly designed for vehicles), but I guess you use ROS to implement it directly.
There are some talks in [ROSconf 2022](https://roscon.ros.org/2022/) about marine, such as 

* [A ROS-enabled floating hackathon: coordinating multiple marine robots](https://vimeo.com/showcase/9954564/video/767139747)
* [Marine Simulation - From Reality to Gazebo and Back Again](https://vimeo.com/showcase/9954564/video/767140641)

Maybe this might be easier?"
Autoware Universe training series,D_kwDOAnasMc4AR0Ek,2022-12-16T10:32:27Z,xmfcx,0,Unanswered,,,
2022-12-19 ODD working group weekly meeting (124),D_kwDOAnasMc4AR1q1,2022-12-19T06:50:20Z,Igata-ctrl,1,Answered,,,
2022-12-19 ODD working group weekly meeting (124),D_kwDOAnasMc4AR1q1,2022-12-19T06:50:20Z,Igata-ctrl,1,Answered,DC_kwDOAnasMc4ARQx4,fengziHK,您好，关于您的问题 。        我看到后就会回复！！
lidar_centerpoint package run error,D_kwDOAnasMc4AR116,2022-12-19T12:20:14Z,wangxianggang1997,1,Answered,,,
lidar_centerpoint package run error,D_kwDOAnasMc4AR116,2022-12-19T12:20:14Z,wangxianggang1997,1,Answered,DC_kwDOAnasMc4AQ_Us,lhakim85,"@wangxianggang1997 , 
maybe [this thread](https://github.com/autowarefoundation/autoware/discussions/2755) related to you"
Autoware for Offroad,D_kwDOAnasMc4AR2NU,2022-12-19T22:48:02Z,mariosebasco,1,Answered,,,
Autoware for Offroad,D_kwDOAnasMc4AR2NU,2022-12-19T22:48:02Z,mariosebasco,1,Answered,DC_kwDOAnasMc4AQ_Ic,xmfcx,"What will be your sensors?

Will you create a point cloud map of the environment for localization?

Are you allowed to create a lanelet2 map of the road? (Even if it's not an asphalt road)"
Autoware for Offroad,D_kwDOAnasMc4AR2NU,2022-12-19T22:48:02Z,mariosebasco,1,Answered,DC_kwDOAnasMc4ARAzr,mariosebasco,"Thanks for responding.

* The primary sensor we'd be using for navigation/collision avoidance is a 3D Lidar.
* In most cases there may not be many/any features to localize to or we may not know the environment ahead of time, so most likely we'd have to rely on just GPS to follow the path and sensors to avoid any dynamic obstacles.
* We'd likely start with a set of GPS waypoints. But I thought we could convert that into a lanelet2 style xml file that's relatively simple (no traffic signs and such) and use that for navigation."
Autoware for Offroad,D_kwDOAnasMc4AR2NU,2022-12-19T22:48:02Z,mariosebasco,1,Answered,DC_kwDOAnasMc4ARCXX,xmfcx,"If you will rely on GPS, you will need a good GNSS/INS sensor with RTK support. And you need to drive in places with RTK coverage. And car will need to drive in places where it can have unobstructed view of satellites.

You can make use of https://autowarefoundation.github.io/autoware.universe/main/sensing/gnss_poser/ package for gnss/ins based localization. It also feeds into an EKF to smooth it for the vehicle.

And since you will have the waypoints, it means you should create a lanelet2 map and Autoware will be good to go.

Lidar based obstacle avoidance, Autoware supports this.

My only remaining concerns will be, if the GNSS fails, you need a fallback to stay within the road. For this I recommend you develop some solution to detect road edges and stay at least within the road boundaries. For this you might open up a new discussion though."
[Question]Can autoware run in CPU environment i.e  without using GPU?,D_kwDOAnasMc4AR2UF,2022-12-20T03:47:50Z,anilbommareddy,2,Answered,,,
[Question]Can autoware run in CPU environment i.e  without using GPU?,D_kwDOAnasMc4AR2UF,2022-12-20T03:47:50Z,anilbommareddy,2,Answered,DC_kwDOAnasMc4ARJqC,angry-crab,"Theoretically, yes. Some of the perception modules can be implemented with [tvm](https://tvm.apache.org/#about) which supports cpu backend deployment. However, as we have tested, performance cannot be expected. There are some object detection model implemented, ie `lidar_centerpoint_tvm`, `lidar_apollo_segmentation_tvm`, etc. "
[Question]Can autoware run in CPU environment i.e  without using GPU?,D_kwDOAnasMc4AR2UF,2022-12-20T03:47:50Z,anilbommareddy,2,Answered,DC_kwDOAnasMc4ARJ3w,anilbommareddy,"@angry-crab . definitely GPU has better performance compared to CPU.
Could you please let m know for the pull request for lidar_centerpoint_tvm and lidar_apollo_segmentation_tvm.

"
[Question]Can autoware run in CPU environment i.e  without using GPU?,D_kwDOAnasMc4AR2UF,2022-12-20T03:47:50Z,anilbommareddy,2,Answered,DC_kwDOAnasMc4ARKtx,angry-crab,"https://github.com/autowarefoundation/autoware.universe/pull/2385
https://github.com/autowarefoundation/autoware.universe/pull/1181"
[Question]Can autoware run in CPU environment i.e  without using GPU?,D_kwDOAnasMc4AR2UF,2022-12-20T03:47:50Z,anilbommareddy,2,Answered,DC_kwDOAnasMc4ARLDP,anilbommareddy,"@angry-crab  I  followed the below steps.

git clone https://github.com/autowarefoundation/autoware.universe.git
cd autoware
 git checkout 6ef6b548392232a366fa7a4263bb95e8802755a7 (Pull request #2385)
/autoware.universe/perception/lidar_centerpoint_tvm/build# cmake ..
got an error like 
CMake Error at CMakeLists.txt:18 (find_package):
  By not providing ""Findautoware_cmake.cmake"" in CMAKE_MODULE_PATH this
  project has asked CMake to find a package configuration file provided by
  ""autoware_cmake"", but CMake did not find one.

  Could not find a package configuration file provided by ""autoware_cmake""
  with any of the following names:
    autoware_cmakeConfig.cmake

Could you right way build-lidar_centerpoint_tvm/ lidar_apollo_segmentation_tvm and test bin's with sample data or simulator in CPU environment.




"
[Question]Can autoware run in CPU environment i.e  without using GPU?,D_kwDOAnasMc4AR2UF,2022-12-20T03:47:50Z,anilbommareddy,2,Answered,DC_kwDOAnasMc4ARME-,angry-crab,"These packages are well tested. Please follow installation steps in the doc. 
https://autowarefoundation.github.io/autoware-documentation/main/installation/"
[Question]Can autoware run in CPU environment i.e  without using GPU?,D_kwDOAnasMc4AR2UF,2022-12-20T03:47:50Z,anilbommareddy,2,Answered,DC_kwDOAnasMc4ARMFF,angry-crab,"If you are using docker, then run the following command instead. 
`rocker -e LIBGL_ALWAYS_SOFTWARE=1 --x11 --user --volume ~/path-to-autoware-directory -- ghcr.io/autowarefoundation/autoware-universe:humble-latest)`"
[Question]Can autoware run in CPU environment i.e  without using GPU?,D_kwDOAnasMc4AR2UF,2022-12-20T03:47:50Z,anilbommareddy,2,Answered,DC_kwDOAnasMc4ARXuN,ashkildighin,"with this link https://autowarefoundation.github.io/autoware-documentation/main/installation/ able to resolve  few of cmake issues but I still got a CMake issue  as ""unknown CMake command get_neural_network""
https://github.com/autowarefoundation/autoware.universe/blob/main/perception/lidar_centerpoint_tvm/CMakeLists.txt +16
set(MODEL_NAME_ENCODER centerpoint_encoder) /*ModelZoo

set(NN_DEPENDENCY_ENCODER """")
get_neural_network(${MODEL_NAME_ENCODER} ${${PROJECT_NAME}_BACKEND} NN_DEPENDENCY_ENCODER)
* For neural network (tvm_utility ) enabled with Artifacts like colcon build --symlink-install  --cmake-args -DDOWNLOAD_ARTIFACTS=ON
*still cmake issue observed."
[Question]Can autoware run in CPU environment i.e  without using GPU?,D_kwDOAnasMc4AR2UF,2022-12-20T03:47:50Z,anilbommareddy,2,Answered,DC_kwDOAnasMc4ARbkW,anilbommareddy,"@angry-crab I followed steps to build autoware from  source code.
git clone https://github.com/autowarefoundation/autoware.git
cd autoware
./setup-dev-env.sh   */enter Y and install cuda-Y.
mkdir src
vcs import src < autoware.repos
rosdep update
source /opt/ros/humble/setup.bash
rosdep install -y --from-paths src --ignore-src --rosdistro $ROS_DISTRO
Build-workspace:
colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release or colcon build --symlink-install --cmake-args -DDOWNLOAD_ARTIFACTS=ON

Im still not clear (1) how to test lidar_centerpoint_tvm bin's 
(2)https://github.com/autowarefoundation/autoware.universe/blob/main/perception/lidar_centerpoint_tvm/CMakeLists.txt 

 Get neural network.
set(NN_DEPENDENCY_BACKBONE """")
get_neural_network(${MODEL_NAME_BACKBONE} ${${PROJECT_NAME}_BACKEND} NN_DEPENDENCY_BACKBONE)

if((NOT NN_DEPENDENCY_ENCODER STREQUAL """") AND (NOT NN_DEPENDENCY_BACKBONE STREQUAL """"))
  centerpoint_tvm 
  ament_auto_add_library(${PROJECT_NAME} SHARED
    **data/models/${MODEL_NAME_ENCODER}/inference_engine_tvm_config.hpp
    data/models/${MODEL_NAME_BACKBONE}/inference_engine_tvm_config.hpp** /Modelzoo  ML framework to generate?"
[Question]Can autoware run in CPU environment i.e  without using GPU?,D_kwDOAnasMc4AR2UF,2022-12-20T03:47:50Z,anilbommareddy,2,Answered,DC_kwDOAnasMc4ARgO2,angry-crab,"`get_neural_network` will check and download the required model from modelzoo. `inference_engine_tvm_config.hpp` is in the downloaded package. To test `lidar_centerpoint_tvm`, you can try [Rosbag replay tutorial](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/rosbag-replay-simulation/). Change this line
https://github.com/autowarefoundation/autoware.universe/blob/6992bc5b7083229dc6b02ab4fd961d10a126549d/launch/tier4_perception_launch/launch/object_recognition/detection/lidar_based_detection.launch.xml#L68
into
```
 <include file=""$(find-pkg-share lidar_centerpoint_tvm)/launch/lidar_centerpoint_tvm.launch.xml"">
``` "
[Question]Can autoware run in CPU environment i.e  without using GPU?,D_kwDOAnasMc4AR2UF,2022-12-20T03:47:50Z,anilbommareddy,2,Answered,DC_kwDOAnasMc4ARrWG,anilbommareddy,"@angry-crab i followed the above your mention steps but still I'm not clear on inference_engine_tvm_config.hpp
And i think inference_engine_tvm_config.hpp this file not downloaded ."
[Question]Can autoware run in CPU environment i.e  without using GPU?,D_kwDOAnasMc4AR2UF,2022-12-20T03:47:50Z,anilbommareddy,2,Answered,DC_kwDOAnasMc4ARs1b,angry-crab,"@anilbommareddy 
There are a few things you could check.
1. make sure `tvm_utility` is built correctly. `tvm_utility` provides the function to download compiled models.
2. check if the compressed file exists in the following path: `$path_to_lidar_centerpoint_tvm/data/download`. If the tar file exists, ` inference_engine_tvm_config.hpp` will be unzipped to `$path_to_lidar_centerpoint_tvm/data/models/centerpoint_backbone` for example. 
3. make sure you have access to internet while building the work space. "
[Question]Can autoware run in CPU environment i.e  without using GPU?,D_kwDOAnasMc4AR2UF,2022-12-20T03:47:50Z,anilbommareddy,2,Answered,DC_kwDOAnasMc4ARgOD,angry-crab,"@ashkildighin 
Could you try `colcon build --symlink-install --cmake-args -DDOWNLOAD_ARTIFACTS=ON --package-select tvm_utility` to see if `tvm_utility` is built? "
How can i control my real car.,D_kwDOAnasMc4AR2ZQ,2022-12-20T07:32:41Z,HyunkiKim0407,0,Unanswered,,,
Mapping WG Meeting 21/12/2022,D_kwDOAnasMc4AR2Zs,2022-12-20T07:50:45Z,n-patiphon,0,Unanswered,,,
problem with tensorrt_yolo going down in orin(Jetson),D_kwDOAnasMc4AR2a8,2022-12-20T08:29:36Z,kohei-y1123,0,Unanswered,,,
Autonomy Software WG Meeting 2023/01/10,D_kwDOAnasMc4AR2bA,2022-12-20T08:31:14Z,BonoloAWF,1,Answered,,,
Autonomy Software WG Meeting 2023/01/10,D_kwDOAnasMc4AR2bA,2022-12-20T08:31:14Z,BonoloAWF,1,Answered,DC_kwDOAnasMc4ARuX5,xmfcx,"# [Bus ODD Nov-Dec Milestone](https://github.com/autowarefoundation/autoware.universe/milestone/8)

- https://github.com/autowarefoundation/autoware.universe/issues/1121
  - https://github.com/autowarefoundation/autoware.universe/pull/2401
    - Soon will be merged: https://github.com/autowarefoundation/autoware.universe/pull/2401#issuecomment-1377385794
- https://github.com/autowarefoundation/autoware.universe/issues/1253
  - @mitsudome-r is working on it: https://github.com/autowarefoundation/autoware.universe/issues/1253#issuecomment-1377393610
- https://github.com/autowarefoundation/autoware.universe/issues/1716
  - https://github.com/autowarefoundation/autoware.universe/pull/1999
    - Waiting for updates from @beyzanurkaya 
- https://github.com/autowarefoundation/autoware.universe/issues/563
  - https://github.com/autowarefoundation/autoware-documentation/pull/180
    - Waiting for review from @miursh and/or @aohsato
- https://github.com/autowarefoundation/autoware.universe/issues/611
  - https://github.com/autowarefoundation/autoware.universe/pull/647
    - I will merge it as I've confirmed it won't break existing systems (it has a flag to enable/disable the feature added)
    - Further recommendations can be added via opening issues/PRs as suggestions.
- https://github.com/autowarefoundation/autoware.universe/issues/1715
  - Now points to https://github.com/autowarefoundation/autoware.universe/issues/2354
  - Closed.
- https://github.com/autowarefoundation/autoware.universe/issues/2354
  - https://github.com/autowarefoundation/autoware.universe/pull/2424
    - It's being worked on by @VRichardJP

Edit: Update links"
Autonomy Software WG Meeting 2023/01/10,D_kwDOAnasMc4AR2bA,2022-12-20T08:31:14Z,BonoloAWF,1,Answered,DC_kwDOAnasMc4ARxV4,xmfcx,"@BonoloAWF I've merged the completed ones, moved the remaining to the next milestone. :+1: "
"Checking the Obstacle distance , TTB and TTC",D_kwDOAnasMc4AR2hG,2022-12-20T10:52:12Z,pwrcoder1391,0,Unanswered,,,
Traffic Lights MarkerArrays/Perception Lights ON/OFF,D_kwDOAnasMc4AR2jE,2022-12-20T11:48:54Z,KhalilSelyan,1,Answered,,,
Traffic Lights MarkerArrays/Perception Lights ON/OFF,D_kwDOAnasMc4AR2jE,2022-12-20T11:48:54Z,KhalilSelyan,1,Answered,DC_kwDOAnasMc4ARAzL,isamu-takagi,"I think  proposed solution 1 or 2 is better because perception message should not be affected by visualization. ~In addition, it is difficult to implement proposed solution 3. The map_primitive_sphere_id such as 8828, 8879, 8832 is the visualization marker IDs, not the lanelet map IDs. So only lanelet2_map_visualization_node know about this correspondence.~

In the current implementation, the visualization marker ID and lanelet ID are the same. 
https://github.com/autowarefoundation/autoware_common/blob/main/tmp/lanelet2_extension/lib/visualization.cpp#L115"
Traffic Lights MarkerArrays/Perception Lights ON/OFF,D_kwDOAnasMc4AR2jE,2022-12-20T11:48:54Z,KhalilSelyan,1,Answered,DC_kwDOAnasMc4ARA62,isamu-takagi,And I am currently designing a traffic signal interface including V2I. I will make a new discussion soon. Please participate if you like.
Traffic Lights MarkerArrays/Perception Lights ON/OFF,D_kwDOAnasMc4AR2jE,2022-12-20T11:48:54Z,KhalilSelyan,1,Answered,DC_kwDOAnasMc4ARERE,isamu-takagi,"https://github.com/autowarefoundation/autoware.universe/issues/2567

I created an issue about traffic signal interface. For visualization, I think it can be achieved by combining traffic signal status, nearest regulatory element ID, and correspondence between regulatory element ID and light bulbs ID from lanelet map.
"
2022-12-21 Simulation Working Group Meeting,D_kwDOAnasMc4AR2jc,2022-12-20T11:59:08Z,Hyeongseok-Jeon,0,Unanswered,,,
2022-12-21 Simulation Working group Meeting,D_kwDOAnasMc4AR3IM,2022-12-21T08:39:17Z,WJaworskiRobotec,0,Unanswered,,,
Open AD Kit WG meeting 2022/12/21,D_kwDOAnasMc4AR3VH,2022-12-21T14:17:25Z,armaganarsln,1,Answered,,,
Open AD Kit WG meeting 2022/12/21,D_kwDOAnasMc4AR3VH,2022-12-21T14:17:25Z,armaganarsln,1,Answered,DC_kwDOAnasMc4ARDDp,kaspermeck-arm,"Here's the link to the presentation which I presented today:
https://docs.google.com/presentation/d/1hsLgp1myeKhelRjOedA5yi-UK6ZNfwAUxRbvxdSdX_g/edit?usp=sharing"
Sidewalk navigation,D_kwDOAnasMc4AR4Ak,2022-12-22T14:26:44Z,nicolasdec,1,Answered,,,
Sidewalk navigation,D_kwDOAnasMc4AR4Ak,2022-12-22T14:26:44Z,nicolasdec,1,Answered,DC_kwDOAnasMc4ARGeX,mitsudome-r,"As you may know, Autoware is meant for vehicle that drives on roads so it is probably not the optimal solution for your use case. However, if your target is to create a PoC system with smallest effort, you might be able to utilize some of the codes in Autoware (such as planning, perception, localization modules). 

Of course you would still have to fill in the domain gap though which might include:
* developing control module for your robot which can take in Autoware's output as input (velocity, acceleration, steering)
* creating lane maps for sidewalks so that you can virtually treat your robot as vehicle driving on pedestrian walkways
* either creating or training traffic light recognition model for crosswalk traffic lights. "
Autoware Universe + AWSIM,D_kwDOAnasMc4AR4Kq,2022-12-22T17:39:32Z,adnanhaf,1,Answered,,,
Autoware Universe + AWSIM,D_kwDOAnasMc4AR4Kq,2022-12-22T17:39:32Z,adnanhaf,1,Answered,DC_kwDOAnasMc4ARjVs,shmpwk,"@adnanhaf Currently we cannot run auonomous valet parking, but in the future we will."
Autoware Universe AVP Demonstration,D_kwDOAnasMc4AR4K_,2022-12-22T17:45:55Z,adnanhaf,0,Unanswered,,,
Rviz : Separate visualization group for component interface and debug,D_kwDOAnasMc4AR4eW,2022-12-23T03:46:13Z,yukkysaito,0,Unanswered,,,
NEW Tool for Lidar-Camera Fully Automatic Calibration,D_kwDOAnasMc4AR7Bl,2022-12-28T06:08:34Z,JianKangEgon,0,Unanswered,,,
Add Visual SLAM method in mapping and localization pipeline,D_kwDOAnasMc4AR738,2022-12-29T08:17:14Z,StepTurtle,2,Answered,,,
Add Visual SLAM method in mapping and localization pipeline,D_kwDOAnasMc4AR738,2022-12-29T08:17:14Z,StepTurtle,2,Answered,DC_kwDOAnasMc4ARjVc,shmpwk,cc. @KYabuuchi 
Add Visual SLAM method in mapping and localization pipeline,D_kwDOAnasMc4AR738,2022-12-29T08:17:14Z,StepTurtle,2,Answered,DC_kwDOAnasMc4ARjbY,StepTurtle,"**UPDATE:** I want to explain our purpose and road map a little bit more.

With this work, we try to create alternative solution for laser scan mapping and localization (eg. NDT). Our main purpose is create a geo-referenced feature map with ORB_SLAM3. We will calibrate lidar, camera and GNSS/INS sensors and we obtain camera poses from GNSS/INS sensor. When we create feature map with ORB_SLAM3, we use GNSS/INS poses for camera poses. In this way, we avoid driftting and deviating from road. So, if we want to localize on map later, we will use the georeferenced feature map. We think that with this method, we could get better odometry.

**I would like to tell you our road map step by step so that it is clearer:**

**1)** Firstly, we try to figure out how can we feed ORB_SLAM3 with GNSS/INS poses. For this step I will use KITTI dataset and KITTI ground truth. I will use ground truth poses like GNSS/INS poses. When we do this step correctly, we will use GNSS/INS.

**2)** I will calculate transforme between lidar-GNSS/INS and lidar-camera. 

**3)** I will feed ORB_SLAM3 with GNSS/INS poses as I did with KITTI dataset, and I will create Geo-referenced feature map

**4)** I will localize on both feature and laser scan map and I will evaluate the scores.

**5)** If everyone like this work and it works well, we try to implament to Autoware.

I'm waiting for your questions if there are parts that is not clear."
Add Visual SLAM method in mapping and localization pipeline,D_kwDOAnasMc4AR738,2022-12-29T08:17:14Z,StepTurtle,2,Answered,DC_kwDOAnasMc4ARk12,KYabuuchi,"Hi! Thanks for sharing your interesting idea.
I have used ORB_SLAM with modifications in the past, too.

I have some concerns with your plan.

**(1) performance**
ORB_SLAM3_RGBL is said to be superior to ORB_SLAM3 (stereo mode).  However, I wonder if ORB_SLAM3_RGBL is superior to other methods that uses LiDAR.
[In KITTI's benchmark ranking](https://www.cvlibs.net/datasets/kitti/eval_odometry.php), LOAM which uses only LiDAR is much superior to ORB_SLAM2 (stereo mode).

**(2) license**
ORB_SLAM3 is GPL3, while Autoware's license is Apache-2.0. If you plan to incorporate it into Autoware in the future, please be careful about license contamination.

**(3) planning/control**
Autoware requires Lanelet2 map for planning and control. If your goal is to run Autoware with a visual feature map, you need to consider linking Lanelet2 and feature map.

I hope it will go well :)
"
Add Visual SLAM method in mapping and localization pipeline,D_kwDOAnasMc4AR738,2022-12-29T08:17:14Z,StepTurtle,2,Answered,DC_kwDOAnasMc4ARnnL,StepTurtle,"Thank you very much for your valuable feedback.

__For your first concern;__
ORB_SLAM3_RGBL is behind a little bit in terms of translation and rotation errors but it manages to get ahead in terms of speed especially at the start of localization. So we aim to reduce these errors with the geo-referenced (ground truth) feature map we aim to create.

__About your second concern,__ I don't know much about licenses but I'll heed your warning.

__For your third concern;__
We are considering solutions to link it with Lanelet2, if we get the results we want, we will work on the next stage. I also aim to create point cloud map besides the geo-referenced feature map. I think we can use this point cloud map for creating HD map and we can use ORB_SLAM3_RGBL results with Lanelet2.

Thanks you again for your feedback. __^_^__"
"Error Installing Autoware Universe on Ubuntu 20.4 using ROS2 Galactic ""Cannot locate rosdep definition...""",D_kwDOAnasMc4AR8gX,2022-12-30T05:01:58Z,adnanhaf,1,Answered,,,
"Error Installing Autoware Universe on Ubuntu 20.4 using ROS2 Galactic ""Cannot locate rosdep definition...""",D_kwDOAnasMc4AR8gX,2022-12-30T05:01:58Z,adnanhaf,1,Answered,DC_kwDOAnasMc4ARX2D,lhakim85,"@adnanhaf ,
If your setup is Ubuntu 20.04 using ROS2 Galactic, please follow galactic version of setup.

![image](https://user-images.githubusercontent.com/10070989/210042800-8280a710-5c9d-49fa-88f5-7f24ba72138b.png)

then, at the rosdep update,
do rosdep update --include-eol-distros, like 

> [this](https://github.com/autowarefoundation/autoware/discussions/2622#discussioncomment-4375825)
"
"Error Installing Autoware Universe on Ubuntu 20.4 using ROS2 Galactic ""Cannot locate rosdep definition...""",D_kwDOAnasMc4AR8gX,2022-12-30T05:01:58Z,adnanhaf,1,Answered,DC_kwDOAnasMc4ARYhA,adnanhaf,"@lhakim85 Thank you for your suggestion, I apologies, I actually inadvertently typed the wrong URL. I was using the galactic branch for the documentation."
Anonymizing faces and license plates for privacy-preserving,D_kwDOAnasMc4AR8rm,2022-12-30T11:28:49Z,batuhanbeytekin,1,Answered,,,
Anonymizing faces and license plates for privacy-preserving,D_kwDOAnasMc4AR8rm,2022-12-30T11:28:49Z,batuhanbeytekin,1,Answered,DC_kwDOAnasMc4AR1bF,miursh,"@batuhanbeytekin Thanks for sharing your work.
I've been also working on almost same stuff using YoloR with japanese data.
![0](https://user-images.githubusercontent.com/37187849/212263452-26285c38-3143-4271-bb85-23d391172e02.png)
![0](https://user-images.githubusercontent.com/37187849/212263355-5a2b91c4-ee64-4fb5-b88a-21613ff3e0be.png)
"
Anonymizing faces and license plates for privacy-preserving,D_kwDOAnasMc4AR8rm,2022-12-30T11:28:49Z,batuhanbeytekin,1,Answered,DC_kwDOAnasMc4AR1bY,miursh,FYI @manato 
MPC::calcSteerPrediction(),D_kwDOAnasMc4AR-sX,2023-01-02T08:19:34Z,lianbin,1,Answered,,,
MPC::calcSteerPrediction(),D_kwDOAnasMc4AR-sX,2023-01-02T08:19:34Z,lianbin,1,Answered,DC_kwDOAnasMc4ARtbs,satoshi-ota,@TakaHoribe Could you answer this question ?
Define naming convention for topic and service prefixes,D_kwDOAnasMc4ASA12,2023-01-04T13:54:40Z,xmfcx,4,Answered,,,
Define naming convention for topic and service prefixes,D_kwDOAnasMc4ASA12,2023-01-04T13:54:40Z,xmfcx,4,Answered,DC_kwDOAnasMc4ARhFh,xmfcx,"I personally prefer shorter style:
- `~/sub/topic_name`
- `~/pub/topic_name`
- `~/pub/debug/topic_name`
- `~/srv/command_verb`

And `pub`, `sub`, `srv` makes it clear that they are `publisher`, `subscriber` and `service`."
Define naming convention for topic and service prefixes,D_kwDOAnasMc4ASA12,2023-01-04T13:54:40Z,xmfcx,4,Answered,DC_kwDOAnasMc4ARiN9,isamu-takagi,"I agree with that. Since the service has a server and a client, it seems good to have `cli`."
Define naming convention for topic and service prefixes,D_kwDOAnasMc4ASA12,2023-01-04T13:54:40Z,xmfcx,4,Answered,DC_kwDOAnasMc4ARiS1,kenji-miyake,"@xmfcx Thank you for creating this thread! I agree with you two.

```
~/sub/topic_name
~/pub/topic_name
~/pub/debug/topic_name
~/cli/service_name(command_verb)
~/srv/service_name(command_verb)
~/srv/debug/service_name(command_verb) # Might be used Sometimes?
```"
Define naming convention for topic and service prefixes,D_kwDOAnasMc4ASA12,2023-01-04T13:54:40Z,xmfcx,4,Answered,DC_kwDOAnasMc4ARiT0,kenji-miyake,"One concern I have is that what `srv` stands for is ambiguous, `service` or `server`.
Considering the existence of `cli`, is it `server`?"
Define naming convention for topic and service prefixes,D_kwDOAnasMc4ASA12,2023-01-04T13:54:40Z,xmfcx,4,Answered,DC_kwDOAnasMc4ARiWd,mitsudome-r,@xmfcx @kenji-miyake I also agree with your proposal.
Define naming convention for topic and service prefixes,D_kwDOAnasMc4ASA12,2023-01-04T13:54:40Z,xmfcx,4,Answered,DC_kwDOAnasMc4ARicZ,yukkysaito,"@xmfcx @kenji-miyake I agree with you, too"
Define naming convention for topic and service prefixes,D_kwDOAnasMc4ASA12,2023-01-04T13:54:40Z,xmfcx,4,Answered,DC_kwDOAnasMc4ARm7P,xmfcx,"> One concern I have is that what `srv` stands for is ambiguous, `service` or `server`.
Considering the existence of `cli`, is it `server`?

I think this is not a big issue, even ros2 uses service and server almost interchangeably:
- https://docs.ros2.org/latest/api/rclcpp/
- ```
  - Service Client
    - rclcpp::Node::create_client()
    - rclcpp::Client
    - rclcpp/client.hpp
  - Service Server
    - rclcpp::Node::create_service()
    - rclcpp::Service
    - rclcpp/service.hpp
  ```
- There is `create_client` and `create_service` (not `create_server`)."
Define naming convention for topic and service prefixes,D_kwDOAnasMc4ASA12,2023-01-04T13:54:40Z,xmfcx,4,Answered,DC_kwDOAnasMc4ARiU8,kenji-miyake,"Related to this topic, what do you think about the naming convention of interfaces in launch args?
I personally prefer slash because it's easy to copy-and-paste and edit. I mean, it's annoying to replace `/` with `_`.

- Use underscore:
  
  ```xml
    <arg name=""sub_foo"" default=""/path/to/foo""/>
    <arg name=""pub_bar"" default=""/path/to/bar""/>
    <arg name=""cli_baz"" default=""/path/to/baz""/>
    <arg name=""srv_qux"" default=""/path/to/qux""/>
  
    <node ...>
      <remap from=""~/sub/foo"" to=""$(var sub_foo)""/>
      <remap from=""~/pub/bar"" to=""$(var pub_bar)""/>
      <remap from=""~/cli/baz"" to=""$(var cli_baz)""/>
      <remap from=""~/srv/qux"" to=""$(var srv_qux)""/>
    </node>
  ```

- Use slash:
  
  ```xml
    <arg name=""sub/foo"" default=""/path/to/foo""/>
    <arg name=""pub/bar"" default=""/path/to/bar""/>
    <arg name=""cli/baz"" default=""/path/to/baz""/>
    <arg name=""srv/qux"" default=""/path/to/qux""/>

    <node ...>
      <remap from=""~/sub/foo"" to=""$(var sub/foo)""/>
      <remap from=""~/pub/bar"" to=""$(var pub/bar)""/>
      <remap from=""~/cli/baz"" to=""$(var cli/baz)""/>
      <remap from=""~/srv/qux"" to=""$(var srv/qux)""/>
    </node>
  ```

- Others: (Please propose your ideas!)"
Define naming convention for topic and service prefixes,D_kwDOAnasMc4ASA12,2023-01-04T13:54:40Z,xmfcx,4,Answered,DC_kwDOAnasMc4ARm59,xmfcx,I prefer slash too.
Define naming convention for topic and service prefixes,D_kwDOAnasMc4ASA12,2023-01-04T13:54:40Z,xmfcx,4,Answered,DC_kwDOAnasMc4ARiVf,kenji-miyake,"Also, I think we need to define rules for feature flags.

- Whether to add any prefix (such as `flag`).
  
  ```xml
  <arg name=""enable_foo_feature"" default=""true""/>

  <arg name=""flag/enable_foo_feature"" default=""true""/>
  ```

- Which prefix name to use.
  - `enable_`
  - `use_`
  - etc."
Define naming convention for topic and service prefixes,D_kwDOAnasMc4ASA12,2023-01-04T13:54:40Z,xmfcx,4,Answered,DC_kwDOAnasMc4ARm6M,xmfcx,"```xml
<arg name=""enable/foo_feature"" default=""true""/>
```

Do you think we could use it like this?"
Define naming convention for topic and service prefixes,D_kwDOAnasMc4ASA12,2023-01-04T13:54:40Z,xmfcx,4,Answered,DC_kwDOAnasMc4ASBmp,kenji-miyake,"Yes, I think it's possible.
But I personally prefer nouns for the category, for example `feature_flag` or something like that might be good.
Actually, anything is okay if it's defined in the guidelines."
Define naming convention for topic and service prefixes,D_kwDOAnasMc4ASA12,2023-01-04T13:54:40Z,xmfcx,4,Answered,DC_kwDOAnasMc4ASBm5,kenji-miyake,"However, considering https://github.com/orgs/autowarefoundation/discussions/3171#discussioncomment-4615840, I'm not sure what will use these types of args.
So, maybe revisiting this after rough cleaning up would be better?"
Define naming convention for topic and service prefixes,D_kwDOAnasMc4ASA12,2023-01-04T13:54:40Z,xmfcx,4,Answered,DC_kwDOAnasMc4ASLo4,xmfcx,"@kenji-miyake these feature flags can be in the param files.

Looking at https://docs.ros.org/en/foxy/How-To-Guides/Parameters-YAML-files-migration-guide.html#yaml-file-example

```yaml
enable_feature:
  foo: true
```
Something like this can be recommended."
Define naming convention for topic and service prefixes,D_kwDOAnasMc4ASA12,2023-01-04T13:54:40Z,xmfcx,4,Answered,DC_kwDOAnasMc4ASL00,kenji-miyake,"I see. In that case, it's a good idea to define the convention for such parameters!"
Define naming convention for topic and service prefixes,D_kwDOAnasMc4ASA12,2023-01-04T13:54:40Z,xmfcx,4,Answered,DC_kwDOAnasMc4ARiV4,kenji-miyake,"Also, rules for parameters?
I personally think writing as many parameters in `.param.yaml` as possible is good to keep a consistent style.

- No prefix.

  ```xml
  <arg name=""foo_threshold"" default=""1.0""/>
  ```

- Use some prefix such as `param`.

  ```xml
  <arg name=""param/foo_threshold"" default=""1.0""/>
  ```

- Forbid `arg` and define all parameters in `.param.yaml` file. The parameters that must be written in launch files are allowed.

- Others."
Define naming convention for topic and service prefixes,D_kwDOAnasMc4ASA12,2023-01-04T13:54:40Z,xmfcx,4,Answered,DC_kwDOAnasMc4ARicu,yukkysaito,LGTM :+1: 
Define naming convention for topic and service prefixes,D_kwDOAnasMc4ASA12,2023-01-04T13:54:40Z,xmfcx,4,Answered,DC_kwDOAnasMc4ARm6g,xmfcx,"I'd go for 
> Forbid arg and define all parameters in .param.yaml file. The parameters that must be written in launch files are allowed.

Because launch parameter overriding makes things way too complicated as we use more launch files inside others.

Maybe only allow for topic name remapping?"
Define naming convention for topic and service prefixes,D_kwDOAnasMc4ASA12,2023-01-04T13:54:40Z,xmfcx,4,Answered,DC_kwDOAnasMc4ARqJM,cyn-liu,"> I'd go for
> 
> > Forbid arg and define all parameters in .param.yaml file. The parameters that must be written in launch files are allowed.
> 
> Because launch parameter overriding makes things way too complicated as we use more launch files inside others.
> 
> Maybe only allow for topic name remapping?

I agree with this proposal , define the remapping related parameters in the `lunch` file, and other parameters can be defined in the `param.yaml` file.
"
How to generate pcd map from virtual evnironment?,D_kwDOAnasMc4ASCDY,2023-01-05T17:05:39Z,cjffly,1,Answered,,,
How to generate pcd map from virtual evnironment?,D_kwDOAnasMc4ASCDY,2023-01-05T17:05:39Z,cjffly,1,Answered,DC_kwDOAnasMc4ARk2w,shmpwk,"@cjffly 
>  a tool to covert these scenes into point cloud map in pcd format

You can use [PointCloudMapper](https://tier4.github.io/AWSIM/Components/Environment/PointCloudMapper/) as introduced at ""3. Output PCD from Mesh"" in the [AWSIM tutorial](https://tier4.github.io/AWSIM/Components/Environment/AddNewEnvironment/).

After you get pcd map, you can create lanelet2 map with [VectorMapBuilder](https://tools.tier4.jp/feature/vector_map_builder/) as introduced in the tutorial. "
How to generate pcd map from virtual evnironment?,D_kwDOAnasMc4ASCDY,2023-01-05T17:05:39Z,cjffly,1,Answered,DC_kwDOAnasMc4Abhzz,whbcumtb,"[PointCloudMapper](https://autonomalabs.github.io/AWSIM/Components/Environment/PointCloudMapper/) is assumed that both lanelet 2 map and 3d enverenment are ready. If there is not lanelet 2 map, you can calculate some capture pose manually and replace the script of PointCloudMapper by refferring to it, to produce the pcd map."
"Failed to repeat the Rosbag replay simulation tutorial, ros2 daemon problem, No InputSource",D_kwDOAnasMc4ASCuJ,2023-01-06T04:11:17Z,Robotics010,2,Answered,,,
"Failed to repeat the Rosbag replay simulation tutorial, ros2 daemon problem, No InputSource",D_kwDOAnasMc4ASCuJ,2023-01-06T04:11:17Z,Robotics010,2,Answered,DC_kwDOAnasMc4ASIa4,kminoda,"Hi, thank you for the report! I am sorry that I still cannot look into the details of your problem, but let me give you two quick advice.

Did you try updating the Autoware workspace (see [this documentation page](https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/source-installation/#how-to-update-a-workspace))? Since there is not stable version tagged yet in awf/autoware or awf/autoware.universe, Autoware may contain some errors depending on the timing you cloned the repository. 

Also, would you share with us your PC's specs?

Hope this helps.
"
"Failed to repeat the Rosbag replay simulation tutorial, ros2 daemon problem, No InputSource",D_kwDOAnasMc4ASCuJ,2023-01-06T04:11:17Z,Robotics010,2,Answered,DC_kwDOAnasMc4ASMEB,Robotics010,"Hi @kminoda ! Thank you for the advice. I've updated the workspace with [docker instructions](https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/docker-installation/#how-to-update-a-workspace), [clean](https://autowarefoundation.github.io/autoware-documentation/main/how-to-guides/advanced-usage-of-colcon/#cleaning-up-the-build-artifacts) and rebuild code, but I still failed to get ros bag tutorial done as expected.

Here is my PC specs in brief:
![Screenshot from 2023-01-24 10-31-43](https://user-images.githubusercontent.com/16175093/214337744-605ba202-51e1-452a-b09c-5c33c0cfb676.png)

and a full output from `lshw`: [victus-specs.pdf](https://github.com/autowarefoundation/autoware/files/10491566/victus-specs.pdf)

and here is how my system looks like when playing ros bag from tutorial:
![Screenshot from 2023-01-24 11-29-07](https://user-images.githubusercontent.com/16175093/214338094-3e73bb9a-6e22-4b3a-ac0c-e3d7f7270f5e.png)"
"Failed to repeat the Rosbag replay simulation tutorial, ros2 daemon problem, No InputSource",D_kwDOAnasMc4ASCuJ,2023-01-06T04:11:17Z,Robotics010,2,Answered,DC_kwDOAnasMc4ASNGp,kminoda,"Thank you for the update.

I'll also answer the outstanding questions:
1. It does not reproduce in my PC nor my colleagues' with the latest version of Autoware.
2. It is possible that the bigger sensor msgs may be dropped. But again, it does not reproduce at least in my environment.
3. Since I have not encountered the above issue in pub/sub of pointcloud messages, I have not heard of such issue about the ros2 daemon, at least in the context of running Autoware tutorial.

I am very sorry I cannot be helpful. I will give you the other advice if I come up with any."
"Failed to repeat the Rosbag replay simulation tutorial, ros2 daemon problem, No InputSource",D_kwDOAnasMc4ASCuJ,2023-01-06T04:11:17Z,Robotics010,2,Answered,DC_kwDOAnasMc4ASNJ-,Robotics010,Thank you very much for the answers on my questions. So it is just my local problem and it could be assumed that because of ros2 basic broken functionality I can not execute successfully the rosbag replay simulation tutorial.
"Failed to repeat the Rosbag replay simulation tutorial, ros2 daemon problem, No InputSource",D_kwDOAnasMc4ASCuJ,2023-01-06T04:11:17Z,Robotics010,2,Answered,DC_kwDOAnasMc4AS40B,Robotics010,"Well, I've given a try to [Source installation](https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/source-installation/) and it resolves the problems above. Now I can get expected results from the rosbag replay simulation tutorial.

![Screenshot from 2023-02-12 16-55-41](https://user-images.githubusercontent.com/16175093/218337066-4e104250-afbb-4dfe-99d1-13739d044242.png)
"
2023-01-10 ODD working group weekly meeting (125),D_kwDOAnasMc4ASCz0,2023-01-06T07:16:04Z,Igata-ctrl,0,Unanswered,,,
Detect deadline miss of Path (composed of multiple nodes),D_kwDOAnasMc4ASC3e,2023-01-06T08:42:18Z,nabetetsu,4,Answered,,,
Detect deadline miss of Path (composed of multiple nodes),D_kwDOAnasMc4ASC3e,2023-01-06T08:42:18Z,nabetetsu,4,Answered,DC_kwDOAnasMc4ASi8V,nabetetsu,"@mitsudome-r @kenji-miyake @takam5f2
Significant changes have been made to the submission in order to reach agreement on the design policy for the timing violation monitor. Thank you for your patience. I hope you will take the time to review it."
Detect deadline miss of Path (composed of multiple nodes),D_kwDOAnasMc4ASC3e,2023-01-06T08:42:18Z,nabetetsu,4,Answered,DC_kwDOAnasMc4ASmP_,kenji-miyake,"@nabetetsu Thank you for your proposal.
I think @xmfcx -san is working on a similar task here: https://github.com/orgs/autowarefoundation/discussions/3194
What's the comparison between his idea?

Also, I'm not sure what is MessageTrackingTag or etc. yet. So I'm looking forward to your proposal PR to understand more details."
Detect deadline miss of Path (composed of multiple nodes),D_kwDOAnasMc4ASC3e,2023-01-06T08:42:18Z,nabetetsu,4,Answered,DC_kwDOAnasMc4ASnbD,nabetetsu,"@kenji-miyake Thank you for your confirmation.
If we were to add a new message, where would be the appropriate place to put it?

I think it needs to be demonstrated, so for now I am thinking it would be better to place new messages under tier4_system_msgs directory in tier4_autoware_msgs repository.
"
Detect deadline miss of Path (composed of multiple nodes),D_kwDOAnasMc4ASC3e,2023-01-06T08:42:18Z,nabetetsu,4,Answered,DC_kwDOAnasMc4ASniW,nabetetsu,"> I think @xmfcx -san is working on a similar task here: https://github.com/orgs/autowarefoundation/discussions/3194
> What's the comparison between his idea?

First, from an implementation standpoint, the proposal does not replace existing node classes. To minimize impact, the proposal uses existing timestamps.
From a functional standpoint, this proposal monitors the response time of paths and does not check whether a node is alive or dead, nor does it control the node itself."
Detect deadline miss of Path (composed of multiple nodes),D_kwDOAnasMc4ASC3e,2023-01-06T08:42:18Z,nabetetsu,4,Answered,DC_kwDOAnasMc4ASnjh,xmfcx,"Sorry, I've just started reading your proposal.

Meanwhile, could you also check https://github.com/ros-safety/software_watchdogs which uses `QoS Deadline and Liveliness policies` too?"
Detect deadline miss of Path (composed of multiple nodes),D_kwDOAnasMc4ASC3e,2023-01-06T08:42:18Z,nabetetsu,4,Answered,DC_kwDOAnasMc4ASpta,kenji-miyake,"> I think it needs to be demonstrated, so for now I am thinking it would be better to place new messages under tier4_system_msgs directory in tier4_autoware_msgs repository.

@nabetetsu If you want to discuss it within TIER IV, I think `tier4_autoware_msgs` is fine. If you want to discuss it also in AWF, sending a draft PR to `autoware_msgs` would be okay."
Detect deadline miss of Path (composed of multiple nodes),D_kwDOAnasMc4ASC3e,2023-01-06T08:42:18Z,nabetetsu,4,Answered,DC_kwDOAnasMc4ASoMA,xmfcx,"@nabetetsu thanks for creating this proposal and comparing them to some potential implementations.

After carefully inspecting your proposal and the https://github.com/ros-safety/software_watchdogs repository I think it's a good idea to make use of deadline QoS policy.

Your current proposal includes:
- Adding new message type `MessageTrackingTag`
- Adding new publisher of the new message
- Adding new node to monitor timing violation

By using the deadline and liveliness policies, this can be simplified to either of following options, with different dynamics.

### Liveliness

- Set the `liveliness` to `RMW_QOS_POLICY_LIVELINESS_MANUAL_BY_TOPIC` in both pub and sub.
- Set the `liveliness_lease_duration` in both pub and sub.
- Set the `liveliness_callback` for the subscriber like in the [simple_watchdog.cpp](https://github.com/ros-safety/software_watchdogs/blob/main/sw_watchdog/src/simple_watchdog.cpp#L132-L144).
  - The callback publishes the diagnostic message.

### Deadline

- Set the deadline duration in the publisher
- Set a deadline callback `publisher_options.event_callbacks.deadline_callback` [like in this ROS answer](https://answers.ros.org/question/352472/ros2-qos-deadline-usage/?answer=364081#post-id-364081) for the same publisher
  - The callback publishes the diagnostic message.
- Set the deadline duration in the subscriber
- You can also set a deadline callback for the subscriber side, which would achieve the same effect you are going for.

## Comparison and suggestion

The liveliness option helps you to detect if there are any publishers for the subscribers at all with the checks.

The deadline option allows both the subscriber and publisher to monitor themselves.

Configuring a subscriber side callback and setting the `deadline` policies for both subscriber and publisher should have the functionality you are aiming. And I think you don't need to do anything with the `liveliness` policy.

This way you don't need to generate a new message type and a new monitoring node.

Extra information can be found in [ROS QoS - Deadline, Liveliness, and Lifespan](https://design.ros2.org/articles/qos_deadline_liveliness_lifespan.html).
> **For Deadlines,** the Subscriber receives event notifications if it doesn’t receive anything within the deadline and the Publisher receives event notifications if it doesn’t publish anything within the deadline. 
> **For Liveliness,** Subscribers receive events when there are no longer any Publishers alive to assert the topic is alive.

cc. @kenji-miyake "
Detect deadline miss of Path (composed of multiple nodes),D_kwDOAnasMc4ASC3e,2023-01-06T08:42:18Z,nabetetsu,4,Answered,DC_kwDOAnasMc4AStXG,takam5f2,"@xmfcx  
Thank for reply.
I want to add the supplement on behalf of @nabetetsu because the first post may have mislead you.

# What to observe by the Timing violation monitor
## Response time
The timing violation monitor will observe the response time taken by the path, and check if it is expected.  
As mentioned above, a path is a series of multiple ROS 2 nodes. Their callback functions are executed in sequentially.  
A node sends a topic message at the end of its callback execution, and the next node receives the message and executes the callback.  
The response time is the processing time from the start of the first node to the end of the last node.

Let me show you an example that shows a path. The path consists of `Node S` , `Node M`, `Node E`. Each node is executed sequentially. `Node S` is triggered by 10 Hz timer. `Node M` is executed after `Node S` sends a topic message. `Node E` is triggered by a topic message sent by `Node M` as well.

In this example, the path response time is the processing time from `Node S` to `Node E` per cycle, shown by the deep blue dotted lines `<---->` .  When each node costs 20 msec, the path response time is 60 msec. Response time is one of the most important metrics for real-time systems ( see [the page](https://www.cis.upenn.edu/~lee/06cse480/lec-real-time-scheduling.pdf) P.11 also ).

![timing chart-response-time drawio(2)(1)](https://user-images.githubusercontent.com/38586589/217525294-9bd84d04-6108-4547-9611-a372987d3885.png)

## What QoS Deadline checks

What QoS Deadline observes is different from the path response time. QoS Deadline checks the period between one publish execution to the next one. I want to give you another figure to show what period of time is being observed by QoS Deadline with the previous example.

In the following figure, the deep yellow dotted lines `<---->`  show the time period between publishes on `Node E`. The time period is different from the path response time.

![timing chart-qos-deadline drawio(3)(1)](https://user-images.githubusercontent.com/38586589/217525761-0932bd10-93c1-443d-a19e-8d2371956366.png)

## Difference between the response time and the time period

It seems to be sufficient to check only the time period with QoS deadline while the path response time does not need to be checked. However, sometimes the path response time is larger than expected while the time period is reasonable.

Let me revisit the previous example again in the following figure. The response time is 270 msec when each node costs 90 msec. Since the response time in the first example was 60 msec, 270 msec of the response time is hard to ignore.

On the other hand, the deep yellow dotted lines show that the time period is the same even if the response time increases. QoS Deadline setting is unable to detect the increase in response time.

![timing chart-long-duration drawio(2)(1)](https://user-images.githubusercontent.com/38586589/217526154-3147da9a-d892-4086-99a0-e92224a90587.png)

Changes in the response time may affect the time period between publishes. However, I would like to clarify the response time in Autoware, and check if it is expected."
Detect deadline miss of Path (composed of multiple nodes),D_kwDOAnasMc4ASC3e,2023-01-06T08:42:18Z,nabetetsu,4,Answered,DC_kwDOAnasMc4AStXm,takam5f2,"Here I’d like add another supplement to explain why the new message publisher is needed for the timing violation monitor.

#  Supplements of path definition

To avoid confusion, I said that the path started at the beginning of the first node and ended at the end of the last node. That was for clarity of explanation.

I think that the path definition is not limited as explained above. The processing from creating a message to consuming it is considered as the path. 

Let me give you another example to illustrate what I mean. The destination node, `Node E`, of the path has two callback functions that run at different frequencies. I can define two paths that pass `Node E`, the `Path 1` from `Node A` to `Node E` and `Path 2` from `Node C` to `Node D`. `callback_e0` is the callback that only receives the topic message and passes it to `callback_e1`  via the member variable queue.

As well as explained above, the start of `Path 2` is the `callback_c` and the end is `callback_e1` where `callback_e1` sends `/topic_e`. 
On the other hand, the end of `Path 1` has two candidates; `callback_e0` which receives the message and `callback_e1` which consumes it. To carefully check whether Autoware works as expected, we think, `callback_e1` should be the end of `Path 1`.

![timing chart-ndt drawio(1)(1)](https://user-images.githubusercontent.com/38586589/217526979-32a95fb5-6183-4c50-a400-32a51e0844e0.png)

In this example, it is difficult to trace from external when the message is consumed in `callback_e1`. Then, `callback_e1` has to notify consumption of the queued message to external. That’s why we want to introduce a new publisher for this kind of node.

Previously, `callbackInitialPose` callback in NDT Scan Matcher did not run at 50 Hz and it used old data as the given initial pose per cycle. NDT Scan Matcher suffered from increased computation cost due to inefficiency caused by old data, and NDT Scan Matcher sometimes failed in localization function.
"
Detect deadline miss of Path (composed of multiple nodes),D_kwDOAnasMc4ASC3e,2023-01-06T08:42:18Z,nabetetsu,4,Answered,DC_kwDOAnasMc4AStk4,xmfcx,"Ok so this is something completely different.

In this context, we should be thinking about the time data takes as it travels through the pipeline. Like, tracing timings from sensor driver to the control/vehicle nodes.

I will also think about this but give me some time. Meanwhile, could you explain why we can't use [CARET, a performance analysis tool for Autoware](https://github.com/autowarefoundation/autoware/discussions/2630#) for this purpose?

I didn't investigate it completely it seems to be achieving same result, the delay in the pipeline for a given topic chain.
What prevents CARET from running in real time?

The reason I'm asking this is, to know if it's possible to track/trace the timing of the messages without adding extra messages to the pipeline."
Detect deadline miss of Path (composed of multiple nodes),D_kwDOAnasMc4ASC3e,2023-01-06T08:42:18Z,nabetetsu,4,Answered,DC_kwDOAnasMc4ASwIM,nabetetsu,"As you say, our objective is to monitor and check the response time as data moves through the pipeline.

**About CARET:**
CARET hooks into the send/receive function of a pcl or DDS layer and outputs LTTng trace points and additional information specified by CARET.
To get the response time spent on the pipeline, you need to analyze the output data.
In addition, you must write a configuration file, called an architecture file, in which you specify the node latency and the destination path before analyzing the dataset.
Because of this specification, it is not possible to get the path response time when Autoware is running in CARET.

**Regarding the addition of messages:**
One of the time constraints of NDT is up to data consumption, at which point no existing topics are sent.
Therefore, in our opinion, it is necessary to indicate the end of the path in one of two ways.
1. add a publish of an existing message type
2. add a publish of a new message type"
Detect deadline miss of Path (composed of multiple nodes),D_kwDOAnasMc4ASC3e,2023-01-06T08:42:18Z,nabetetsu,4,Answered,DC_kwDOAnasMc4ASwrT,takam5f2,"
>  In this context, we should be thinking about the time data takes as it travels through the pipeline. Like, tracing timings from sensor driver to the control/vehicle nodes.

Exactly.

>  I will also think about this but give me some time. Meanwhile, could you explain why we can't use https://github.com/autowarefoundation/autoware/discussions/2630# for this purpose?
> I didn't investigate it completely it seems to be achieving same result, the delay in the pipeline for a given topic chain.
 What prevents CARET from running in real time?

CARET allows us to observe how much time costs when data takes as it takes for data to travel through the pipeline. We don't have to change any code to do this and we can measure response time in multiple paths. We don't have to specify the paths before we measure the response time.  
CARET is designed as a performance analysis tool, so that it returns the response time outside of Autoware execution, not during execution. The output format is [CTF](https://diamon.org/ctf/) and it takes tens of seconds or minutes to parse the format.  
In my opinion, CARET should be a tool used for integration testing or field testing, but not recommended for production use. CARET adds overhead to  the execution of all components and we don't want to observe timing violations of all of paths and components.


However, we do want to monitor the response time of the important paths even in production. The important paths obviously have timing constraints and their number may not be many.  
We also want to care about the response time when it is larger than expected, but we don't usually have to care about it . Those motivated us to propose the timing violation monitor.  
When Autoware has failed in a certain function after starting the service, we are asked for accountability. The timing violation monitor will help us to explain the failure from the point of view of the response time. It will help us to investigate the cause of the failure. "
Detect deadline miss of Path (composed of multiple nodes),D_kwDOAnasMc4ASC3e,2023-01-06T08:42:18Z,nabetetsu,4,Answered,DC_kwDOAnasMc4ASww_,xmfcx,@nabetetsu @takam5f2 Thank you for the explanations. Could you give me a couple days to think on this a bit more? Or is it urgent?
Detect deadline miss of Path (composed of multiple nodes),D_kwDOAnasMc4ASC3e,2023-01-06T08:42:18Z,nabetetsu,4,Answered,DC_kwDOAnasMc4ASzYv,takam5f2,"@xmfcx  
Thank for checking. 

> Could you give me a couple days to think on this a bit more? 

Yes, of course. 
We are preparing Pull Request for more details."
Detect deadline miss of Path (composed of multiple nodes),D_kwDOAnasMc4ASC3e,2023-01-06T08:42:18Z,nabetetsu,4,Answered,DC_kwDOAnasMc4ATDQb,nabetetsu,"To introduced this feature, it needs three PRs for adding the dedicated message, notifying end of path in `ndt_scan_matcher` and `timing_violation_monitor` node itself.

We created two PR as following:
  - add the dedicated message
    - https://github.com/tier4/tier4_autoware_msgs/pull/74
  - add the `timing_violation_monitor` library and add function to notify end of path
    - https://github.com/autowarefoundation/autoware.universe/pull/2638
    
Remained PR for `timing_violation_monitor` node implementation will be created within next week."
how to use my rosbag to launch perception.launch.xml for fuse lidar and camera?,D_kwDOAnasMc4ASEQu,2023-01-08T06:38:12Z,wangxianggang1997,1,Answered,,,
how to use my rosbag to launch perception.launch.xml for fuse lidar and camera?,D_kwDOAnasMc4ASEQu,2023-01-08T06:38:12Z,wangxianggang1997,1,Answered,DC_kwDOAnasMc4AR1yS,mitsudome-r,"Here's the simplified node structure of perception nodes when you set perception mode to camera_lidar_fusion. (check [here](https://app.diagrams.net/?lightbox=1#Uhttps%3A%2F%2Fautowarefoundation.github.io%2Fautoware-documentation%2Fmain%2Fdesign%2Fautoware-architecture%2Fnode-diagram%2Foverall-node-diagram-autoware-universe.drawio.svg) for full node structure)
I suggest you to check each node one by one to find out which node fails to publish required topic first

![image](https://user-images.githubusercontent.com/43976834/212299897-255b8d4a-8db0-4349-b83c-8b49832693fb.png)
"
launch the perception.launch.xml  failed,D_kwDOAnasMc4ASEVa,2023-01-08T10:34:48Z,wangxianggang1997,1,Answered,,,
launch the perception.launch.xml  failed,D_kwDOAnasMc4ASEVa,2023-01-08T10:34:48Z,wangxianggang1997,1,Answered,DC_kwDOAnasMc4AR1yD,mitsudome-r,"Some of the perception nodes require some global parameter set from [autoware.launch](https://github.com/autowarefoundation/autoware_launch/blob/c84daa2d68e81437871a0336bd22ca5e6bacf78e/autoware_launch/launch/autoware.launch.xml#L42).
If you only want to run perception modules, it might be easier if you launch autoware.lauch with other module's `launch_*` arguments to false. ([here](https://github.com/autowarefoundation/autoware_launch/blob/c84daa2d68e81437871a0336bd22ca5e6bacf78e/autoware_launch/launch/autoware.launch.xml#L12))"
launch the perception.launch.xml  failed,D_kwDOAnasMc4ASEVa,2023-01-08T10:34:48Z,wangxianggang1997,1,Answered,DC_kwDOAnasMc4AR4r5,wangxianggang1997,"I conducted a perception test on perception.launch.xml, using my own ros2bag package, which contains /lidar_ front/points_raw topic.  I remapped the topic/lidar_ front/points_raw:=/sensing/lidar/concatenated/pointcloud, but the running results only output the detection results, and the tracking results do not. I queried the node graph and found that multi_object_tracker node output is an empty list. The previous nodes are running well, but I don't know why? I would appreciate it if anyone could answer"
Autoware Deployment on Real Robot,D_kwDOAnasMc4ASE4s,2023-01-09T08:29:23Z,joewong00,2,Answered,,,
Autoware Deployment on Real Robot,D_kwDOAnasMc4ASE4s,2023-01-09T08:29:23Z,joewong00,2,Answered,DC_kwDOAnasMc4ARqwW,kenji-miyake,"@joewong00 Thank you for asking your question and welcome to the Autoware community! :smile: 

I believe these documents would be your first guides.
- https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-concepts/difference-from-ai-and-auto/
- https://autowarefoundation.github.io/autoware-documentation/main/how-to-guides/integrating-autoware-with-your-vehicle/"
Autoware Deployment on Real Robot,D_kwDOAnasMc4ASE4s,2023-01-09T08:29:23Z,joewong00,2,Answered,DC_kwDOAnasMc4ARqwv,kenji-miyake,Please feel free to ask more questions if something is unclear while you're reading the documents!
Autoware Deployment on Real Robot,D_kwDOAnasMc4ASE4s,2023-01-09T08:29:23Z,joewong00,2,Answered,DC_kwDOAnasMc4ARrat,joewong00,"Hi, thanks for the guides! I am trying to install autoware, however it seems like the latest source installation only supports ubuntu 22.04. May I know if it is okay to install it on Ubuntu 20.04 with ros2 galatic? Or is it better to use docker installation? Thanks!"
Autoware Deployment on Real Robot,D_kwDOAnasMc4ASE4s,2023-01-09T08:29:23Z,joewong00,2,Answered,DC_kwDOAnasMc4ARrdH,evshary,"If you still want to use ROS 2 galactic, you need to switch to galactic branch instead of main
https://github.com/autowarefoundation/autoware/tree/galactic
Since galactic is EOL, you might want to choose docker to use ROS 2 LTS Humble."
Autoware Deployment on Real Robot,D_kwDOAnasMc4ASE4s,2023-01-09T08:29:23Z,joewong00,2,Answered,DC_kwDOAnasMc4ARub7,joewong00,"Hello there, thanks for the advice! Docker installation worked for me. However when I opened up the planning simulations in rviz, it was really laggy. Is it the problem of docker installation? Is it practical to have autoware installed using docker if I were to deploy on real self driving robot? Thanks!

My robot device:
1. Ubuntu 20.04
2. Jetson Xavier NX with Jetpack 5"
Autoware Deployment on Real Robot,D_kwDOAnasMc4ASE4s,2023-01-09T08:29:23Z,joewong00,2,Answered,DC_kwDOAnasMc4ARvkd,evshary,"> Is it the problem of docker installation?

I don't think so. Do you use GPU to run the planning simulation? Also, you can check the resource usage while running (CPU, RAM...).
Your hardware should meet the minimum requirement [here](https://autowarefoundation.github.io/autoware-documentation/main/installation/#minimum-hardware-requirements)

> Is it practical to have autoware installed using docker if I were to deploy on real self driving robot?

I think the answer is yes. Running Autoware w/ or w/o docker should make no difference. It just depends on your system design. Some people think using docker is easier for software development & deploy, and it can keep the same development environment for all developers."
Autoware Deployment on Real Robot,D_kwDOAnasMc4ASE4s,2023-01-09T08:29:23Z,joewong00,2,Answered,DC_kwDOAnasMc4ARwXp,joewong00,"I see. In order to deploy I would have to integrate it to my vehicle, so I have to do all of these (modifying the code, calibrations, etc. ) inside the docker container, right? "
Autoware Deployment on Real Robot,D_kwDOAnasMc4ASE4s,2023-01-09T08:29:23Z,joewong00,2,Answered,DC_kwDOAnasMc4ARxKy,evshary,"Not really. It depends on your configuration. If you use the command from tutorial, it should be something like this
""rocker ..... **--volume $HOME/autoware --volume $HOME/autoware_map** .....""
It means we mount the directory to the container, and you can modify the code on the native host.
"
Autoware  simualtor can send and Receive data(like lidar and Radar) using WebSocket to Application via listen port- TCP/UDP& IP address?,D_kwDOAnasMc4ASFJ_,2023-01-09T14:23:49Z,anilbommareddy,0,Unanswered,,,
Place a vehicle in rviz with a ros publisher,D_kwDOAnasMc4ASGKj,2023-01-10T16:23:06Z,AndriiChumak145,2,Answered,,,
Place a vehicle in rviz with a ros publisher,D_kwDOAnasMc4ASGKj,2023-01-10T16:23:06Z,AndriiChumak145,2,Answered,DC_kwDOAnasMc4ARwTc,YamatoAndo,"@AndriiChumak145 Thank you for the question.
As shown in [this figure](https://autowarefoundation.github.io/autoware.universe/main/system/default_ad_api/document/localization/), it is recommended to use `/api/localization/initialize` service when giving the initial position externally.
For usage, [this PR's Test performed method](https://github.com/autowarefoundation/autoware.universe/pull/1500) may be helpful.

Also, it is not recommended, but it should be possible to give /initialpose topic manually.
If you prefer to use the /initialpose topic, please contact me again.
"
Place a vehicle in rviz with a ros publisher,D_kwDOAnasMc4ASGKj,2023-01-10T16:23:06Z,AndriiChumak145,2,Answered,DC_kwDOAnasMc4AR0r9,AndriiChumak145,"Thank you for the response.
It is not crucial to me on which topic to send a message to, I just wanted to do the same thing as rviz does with the 2D Pose Estimate but automatically.
As I understood, I should create a client to be able to send requests to the `/api/localization/initialize` service. After that, I should create a request with `InitializeLocalization().Request()` but this line fails:
```
[cr2autoware_node-60]     initial_pose_msg = InitializeLocalization().Request()
[cr2autoware_node-60]   File ""/home/andrii/autoware/install/autoware_adapi_v1_msgs/lib/python3.8/site-packages/autoware_adapi_v1_msgs/srv/_initialize_localization.py"", line 336, in __init__
[cr2autoware_node-60]     raise NotImplementedError('Service classes can not be instantiated')
[cr2autoware_node-60] NotImplementedError: Service classes can not be instantiated
```
Did I use the client wrong? Is there maybe an example of how I should correctly use the `/api/localization/initialize`?
 I've also tried manual tests provided by you but they also didn't work:
```
andrii@e738445bf814:~/autoware$ ros2 service call /localization/initialize autoware_ad_api_msgs/srv/InitializeLocalization ""pose: []""
The passed service type is invalid
```

"
Place a vehicle in rviz with a ros publisher,D_kwDOAnasMc4ASGKj,2023-01-10T16:23:06Z,AndriiChumak145,2,Answered,DC_kwDOAnasMc4AR1Dy,YamatoAndo,"> I've also tried manual tests provided by you but they also didn't work:

Perhaps, but I expect that you have not executed the following command before calling the service.
`source <your autoware workspace>/install/setup.bash` ( like `source ~/autoware/install/setup.bash` )"
Place a vehicle in rviz with a ros publisher,D_kwDOAnasMc4ASGKj,2023-01-10T16:23:06Z,AndriiChumak145,2,Answered,DC_kwDOAnasMc4AR1AF,maxime-clem,"I believe you should be able to publish the messages from a node. Just make sure you correctly set `frame_id = ""map""`.

With the command line interface here is the command to set the initial pose:
```yaml
ros2 topic pub --once /initialpose geometry_msgs/msg/PoseWithCovarianceStamped '       
header:
  frame_id: map
pose:
  pose:
    position:
      x: 2220
      y: 41436
      z: 0.0
    orientation:
      x: 0.0
      y: 0.0
      z: 0.39811928626727894
      w: 0.9173336546219333
'
```

Similarly, you can set the goal with the following command:
```yaml
ros2 topic pub --once /planning/mission_planning/goal geometry_msgs/msg/PoseStamped '
header:
  frame_id: map
pose:
  position:
    x: 2260
    y: 41494
    z: 0.0
  orientation:
    x: 0.0
    y: 0.0
    z: 0.4383810887958586
    w: 0.8987891971903965
```

Finally, you can also request to switch to the autonomous mode (in order to make the ego vehicle move to its goal) with the following command:
```
ros2 service call /api/operation_mode/change_to_autonomous autoware_adapi_v1_msgs/srv/ChangeOperationMode
```"
Place a vehicle in rviz with a ros publisher,D_kwDOAnasMc4ASGKj,2023-01-10T16:23:06Z,AndriiChumak145,2,Answered,DC_kwDOAnasMc4AR3sN,AndriiChumak145,Thanks a lot! The problem was that I published the initial pose without the frame_id='map'.
Autonomy Software WG Meeting 2023/01/17,D_kwDOAnasMc4ASGPw,2023-01-10T17:53:33Z,BonoloAWF,1,Answered,,,
Autonomy Software WG Meeting 2023/01/17,D_kwDOAnasMc4ASGPw,2023-01-10T17:53:33Z,BonoloAWF,1,Answered,DC_kwDOAnasMc4AR8aW,MertClk,Leo Drive Bus ODD Update: [Presentation](https://docs.google.com/presentation/d/1ulgpv8_zKg3pNZxVkVlOSNCxvNPigyXwNK1qeMOrsYo/edit?usp=sharing)
Mapping WG Meeting 11/01/2023,D_kwDOAnasMc4ASGvW,2023-01-11T08:22:53Z,n-patiphon,0,Unanswered,,,
Map format for Autoware,D_kwDOAnasMc4ASG2w,2023-01-11T10:57:41Z,HamedMesri-TomTom,2,Answered,,,
Map format for Autoware,D_kwDOAnasMc4ASG2w,2023-01-11T10:57:41Z,HamedMesri-TomTom,2,Answered,DC_kwDOAnasMc4ARwjq,n-patiphon,"I think there already are open-source tools for converting from OpenDrive to Lanelet2. 
These are some of the examples:
1. https://github.com/JHMeusener/osm2xodr
2. https://gitlab.lrz.de/tum-cps/commonroad-scenario-designer.

I have never tried them myself, so I cannot tell if they will work for Autoware out of the box. However, if these tools work, option 1 will be the easiest choice to test your sample maps in Autoware."
Map format for Autoware,D_kwDOAnasMc4ASG2w,2023-01-11T10:57:41Z,HamedMesri-TomTom,2,Answered,DC_kwDOAnasMc4ASVLc,yukkysaito,"I remember that when we used to discuss which map format to adopt as Autoware, OpenDrive was one of the candidates but was ruled out.

Please wait as I look for that thread. The log of that discussion might help."
Map format for Autoware,D_kwDOAnasMc4ASG2w,2023-01-11T10:57:41Z,HamedMesri-TomTom,2,Answered,DC_kwDOAnasMc4ASVLs,yukkysaito,"- https://discourse.ros.org/t/map-library-for-autoware-auto/11720
- https://discourse.ros.org/t/autoware-maps-and-map-formats-working-group-meeting-minutes-24-july-2019/10059/10
"
Open AD Kit WG meeting 2023/1/11,D_kwDOAnasMc4ASHCi,2023-01-11T14:15:39Z,HamburgDave,1,Answered,,,
Open AD Kit WG meeting 2023/1/11,D_kwDOAnasMc4ASHCi,2023-01-11T14:15:39Z,HamburgDave,1,Answered,DC_kwDOAnasMc4ASK5N,Igata-ctrl,"@armaganarsln  @HamburgDave As per brief discussion with David, I've created the meeting invitation group as follows and I took my liberty to add it to the guest list of coming Open AD Kit meetings. You may want to add a note like below to the WG Wiki page and/or the meeting minutes.

Recurring weekly meetings have been scheduled. Please check [Autoware Foundation events calendar](https://calendar.google.com/calendar/embed?src=autoware.org_6lol0ho5ft0217h8c60pi1fm30%40group.calendar.google.com&ctz=Asia%2FTokyo) and add this calendar to your own Google calendar by clicking the right bottom button and/or add your contact to [Open AD Kit WG invitation group](https://groups.google.com/u/0/a/autoware.org/g/open-ad-kit-working-group-meeting-invitations2) to receive invitations for future meetings."
How about adding a new circle configuration to MPT,D_kwDOAnasMc4ASHSY,2023-01-11T18:58:06Z,mehmetdogru,2,Answered,,,
How about adding a new circle configuration to MPT,D_kwDOAnasMc4ASHSY,2023-01-11T18:58:06Z,mehmetdogru,2,Answered,DC_kwDOAnasMc4ARyS5,takayuki5168,"@mehmetdogru Thank you for your suggestion.

In my understanding, each method has pros/cons. For example, in this case with a narrow and tight curve road, the original one is a bit better.
![image](https://user-images.githubusercontent.com/20228327/211951390-d3a19da9-9a1b-4f24-a650-419efac06504.png)

But we cannot estimate the behavior of optimization when changing the condition, so it's fine for me to add the implementation of your idea."
How about adding a new circle configuration to MPT,D_kwDOAnasMc4ASHSY,2023-01-11T18:58:06Z,mehmetdogru,2,Answered,DC_kwDOAnasMc4ARyTG,takayuki5168,"I feel the interval of the circle's center points should be not `vehicle_length / n` but `vehicle_length / (n - 1)`.

![image](https://user-images.githubusercontent.com/20228327/211952051-8265fb58-b9b2-41b0-b76d-44c0ef8ba818.png)
"
How about adding a new circle configuration to MPT,D_kwDOAnasMc4ASHSY,2023-01-11T18:58:06Z,mehmetdogru,2,Answered,DC_kwDOAnasMc4ARzQn,mehmetdogru,"> But we cannot estimate the behavior of optimization when changing the condition, so it's fine for me to add the implementation of your idea.

Thank you for your input. Yes, as you said there are pros/cons related to this topic. Then I will create a PR about this. :smiley: 


> I feel the interval of the circle's center points should be not `vehicle_length / n` but `vehicle_length / (n - 1)`.

Sorry, my mistake! Thank you.



"
How about adding a new circle configuration to MPT,D_kwDOAnasMc4ASHSY,2023-01-11T18:58:06Z,mehmetdogru,2,Answered,DC_kwDOAnasMc4ASqc7,takayuki5168,@mehmetdogru This discussion can be resolved?
How about adding a new circle configuration to MPT,D_kwDOAnasMc4ASHSY,2023-01-11T18:58:06Z,mehmetdogru,2,Answered,DC_kwDOAnasMc4AT5nK,mehmetdogru,"Sorry for the late reply, it certainly can."
How about adding a new circle configuration to MPT,D_kwDOAnasMc4ASHSY,2023-01-11T18:58:06Z,mehmetdogru,2,Answered,DC_kwDOAnasMc4ASAL_,takayuki5168,"@mehmetdogru 
Thank you for creating the PR! I'm curious about which method is better.
If you test and compare the original one and the new one, please let me know the result."
How about adding a new circle configuration to MPT,D_kwDOAnasMc4ASHSY,2023-01-11T18:58:06Z,mehmetdogru,2,Answered,DC_kwDOAnasMc4ASA3C,mehmetdogru,Thank you. Sure will do!
Documentation,D_kwDOAnasMc4ASHnk,2023-01-12T04:19:12Z,peaky-quest,1,Answered,,,
Documentation,D_kwDOAnasMc4ASHnk,2023-01-12T04:19:12Z,peaky-quest,1,Answered,DC_kwDOAnasMc4ARymM,zulfaqar-azmi-t4,"The following page provides the necessary information regarding each modules.
https://autowarefoundation.github.io/autoware.universe/main/"
ROSBAG REPLAY SIMULATION,D_kwDOAnasMc4ASHuL,2023-01-12T07:30:59Z,patelabhay-12,2,Answered,,,
ROSBAG REPLAY SIMULATION,D_kwDOAnasMc4ASHuL,2023-01-12T07:30:59Z,patelabhay-12,2,Answered,DC_kwDOAnasMc4ARy3P,HansRobo,"Thank you for your report!

But, did you confirm weather containts of bagfile is streaming well?

In current implementation of rosbag2, due to the processing order problem, your reporting warning may occur even if the plugin can be loaded normally.

https://github.com/ros2/rosbag2/blob/6e9f918313e999385694cca549600615fb903e23/rosbag2_storage/src/rosbag2_storage/impl/storage_factory_impl.hpp#L180-L190

[This problem is already fixed](https://github.com/ros2/rosbag2/pull/1219) and will be delivered via apt to end users at the next Humble Sync 

"
ROSBAG REPLAY SIMULATION,D_kwDOAnasMc4ASHuL,2023-01-12T07:30:59Z,patelabhay-12,2,Answered,DC_kwDOAnasMc4ARzFH,patelabhay-12,bagfile is streaming very well
ROSBAG REPLAY SIMULATION,D_kwDOAnasMc4ASHuL,2023-01-12T07:30:59Z,patelabhay-12,2,Answered,DC_kwDOAnasMc4ARz0Q,HansRobo,"That's good!
do you have any other problems?"
AWSIM provide interface data like Lidar /Radar(sensor data) to other application(like non ROS users),D_kwDOAnasMc4ASIC3,2023-01-12T15:01:25Z,anilbommareddy,1,Answered,,,
AWSIM provide interface data like Lidar /Radar(sensor data) to other application(like non ROS users),D_kwDOAnasMc4ASIC3,2023-01-12T15:01:25Z,anilbommareddy,1,Answered,DC_kwDOAnasMc4Aa9sy,whbcumtb,"According to my knowledge to AWSIM, there is no interface which you requrired at present. However, AWSIM is open source, and you can develope this function by yourself."
Autoware AI lidar localizer node launch error,D_kwDOAnasMc4ASIGz,2023-01-12T16:03:49Z,joewong00,0,Unanswered,,,
AutowareNode base class for Lifecycle and Monitoring,D_kwDOAnasMc4ASIuk,2023-01-13T10:55:33Z,xmfcx,8,Answered,,,
AutowareNode base class for Lifecycle and Monitoring,D_kwDOAnasMc4ASIuk,2023-01-13T10:55:33Z,xmfcx,8,Answered,DC_kwDOAnasMc4AR2Bx,VRichardJP,"I really would like a nice monitoring tool too. 

I have few questions:
* How would we interact with ACC? Through some cli/GUI application?
* If ACC is used for heartbeat and watchdog monitoring, would we get rid of the current diagnostic aggregator system?
* What do you mean by monitoring subscribers/publishers. Besides basic info such as who subscribe/publish what, could you get data such as frequency, latency, drop rate, etc?

"
AutowareNode base class for Lifecycle and Monitoring,D_kwDOAnasMc4ASIuk,2023-01-13T10:55:33Z,xmfcx,8,Answered,DC_kwDOAnasMc4AR2E7,xmfcx,"@VRichardJP Thanks for reviewing the proposal :)

### GUI interaction

> How would we interact with ACC? Through some cli/GUI application?

For this I see 2 options:
1) ACC provides its own GUI/cli
  - The most efficient way (no additional data transfer)
  - Harder to make it part of existing GUIs
2) ACC provides an interface for GUI tools.
  - We can create a GUI to showcase its capabilities.
  - Anyone can customize the reference GUI or make their own

For sake of flexibility, I will probably go with 2nd option. What do you think?

### What happens to existing tools?

> If ACC is used for heartbeat and watchdog monitoring, would we get rid of the current diagnostic aggregator system?

Yes, this new system would make some of the existing diagnostic tools obsolete.

But my plan is to implement the capabilities step by step.

Current tools that could be affected are:
- https://github.com/autowarefoundation/autoware.universe/tree/main/system/component_state_monitor
- https://github.com/autowarefoundation/autoware.universe/tree/main/system/system_error_monitor
- https://github.com/autowarefoundation/autoware.universe/tree/main/system/topic_state_monitor
- https://github.com/ros/diagnostics/tree/humble/diagnostic_aggregator

I didn't go through how each of them are affected by this proposal yet.

### Monitored publishers, subscribers?

> What do you mean by monitoring subscribers/publishers. Besides basic info such as who subscribe/publish what, could you get data such as frequency, latency, drop rate, etc?

For this I recommend to check https://gitlab.com/autowarefoundation/autoware.auto/AutowareAuto/-/merge_requests/1205/diffs

Basic premise is, we don't want to monitor each topic with an outsider tool
- thus increasing network overhead for large messages
- like [topic_state_monitor](https://github.com/autowarefoundation/autoware.universe/tree/main/system/topic_state_monitor)
Instead, we'd like each subscriber to monitor the topics they subscribe to.
With functionality like:
- Allow subscribers to express what rate range they expect
- What rates a publisher is expected to publish
- If a mismatch occurs, they could report to `ACC`
- If a critical subscriber doesn't have the topics it needs, it could report to `ACC`
- If a topic misses its deadline, the subscriber could initiate a warning state and report to `ACC`
- The deadlines could be set from subscribers maybe?

All of these functionalities can be possible because we can define custom subscribers and publishers and we have a common monitoring tool to report to.

Normally all these would be hard to implement in each node. But with the `AutowareNode` base class, most of the complexity would be hidden and be done automatically.

The users implementing new nodes only define the optional deadlines, expected rates etc."
AutowareNode base class for Lifecycle and Monitoring,D_kwDOAnasMc4ASIuk,2023-01-13T10:55:33Z,xmfcx,8,Answered,DC_kwDOAnasMc4AR3P_,VRichardJP,"* For instance a /acc/status and /acc/command and rqt plugin (like /diagnostics)? or a dedicated non-ROS interface?
* I am not sure how the topic watchdog would work. Would you send a notification on each message published/received?
* If I understand the proposal from autoware auto, each node monitor its own publishers/subscribers and only reports errors when detected. In that case, I think it is not possible to detect when a callback is stuck, and thus the whole pipeline as well.
* Would this work in the case multiple nodes publish on the same topic? (I am not sure there is any in Autoware though.)
* Same question with synchronized subscriptions. Again, I am not sure it is used in Autoware a lot, I have seen it mostly in vehicle interface/driver code. But it is typically part of the pipeline that is worth monitoring."
AutowareNode base class for Lifecycle and Monitoring,D_kwDOAnasMc4ASIuk,2023-01-13T10:55:33Z,xmfcx,8,Answered,DC_kwDOAnasMc4AR49O,xmfcx,"@VRichardJP 

### Interface
> For instance a /acc/status and /acc/command and rqt plugin (like /diagnostics)? or a dedicated non-ROS interface?

For this I'm planning to use service interface of ROS2. For reporting warnings, registering and similar non-continuous calls. These will be handled by asynchronously by the ACC.

### Watchdog
> I am not sure how the topic watchdog would work. Would you send a notification on each message published/received?

 I know how `bondcpp` works, by sending continuous messages and if something is missed, raise a callback.
But I haven't looked into https://github.com/ros-safety/software_watchdogs thoroughly.
Also this will be a watchdog for the node, not each particular topic.

### Monitored subscriber callback getting stuck
> If I understand the proposal from autoware auto, each node monitor its own publishers/subscribers and only reports errors when detected.

True.

>In that case, I think it is not possible to detect when a callback is stuck, and thus the whole pipeline as well.

In the current implementation, yes, it will be. I haven't put too much thought into this but this is one of the challenges in making it work as intended.

One of the solutions that comes to my mind is to have an async watcher get created for each subscriber.
And every time the subscriber receives a message, it notifies the watcher thread.
And watcher notifies ACC if the subscriber it's watching gets stuck or doesn't receive anything for a while.

### Multiple publishers on same topic
> Would this work in the case multiple nodes publish on the same topic? (I am not sure there is any in Autoware though.)

It would ensure a topic is being published in a required rate, but wouldn't be able to confirm if each publishing source is contributing enough. But I think this is not so important for autoware.

### Monitored synchronized subscribers
> Same question with synchronized subscriptions. Again, I am not sure it is used in Autoware a lot, I have seen it mostly in vehicle interface/driver code. But it is typically part of the pipeline that is worth monitoring.

I think monitoring the callback would work the same. If we apply the solution I mentioned above. But I will take a note as an implementation task, thanks for bringing it up!"
AutowareNode base class for Lifecycle and Monitoring,D_kwDOAnasMc4ASIuk,2023-01-13T10:55:33Z,xmfcx,8,Answered,DC_kwDOAnasMc4AR2Kd,ralwing,"This idea sounds really great! I have some suggestions to be considered:

* The `ACC` should allow creating multiple simultaneously working instances. I think that there might be a few instances of it, especially when there'll be a lot of working Nodes. And there also might be a one general ACC, which observes the local ACCs.
* The `AutowareNode` [state](http://design.ros2.org/articles/node_lifecycle.html) `UnConfigured` and `InActive`  may require getting statuses of other nodes. E.g. a group of fully configured nodes would instantly change the state to `Active`. This logic requires some kind of Nodes grouping facility, looks a bit like the `Saga Pattern` 
 "
AutowareNode base class for Lifecycle and Monitoring,D_kwDOAnasMc4ASIuk,2023-01-13T10:55:33Z,xmfcx,8,Answered,DC_kwDOAnasMc4AR2MY,xmfcx,"> The `ACC` should allow creating multiple simultaneously working instances. I think that there might be a few instances of it, especially when there'll be a lot of working Nodes. And there also might be a one general `ACC`, which observes the local `ACC`s.

Why do you think so? What would be the benefit of having multiple `ACC`s?

And for this to work, `ACC` would need to derive from `AutowareNode` too and relaying warning messages higher up could get complicated.

> The `AutowareNode` [state](http://design.ros2.org/articles/node_lifecycle.html) `UnConfigured` and `InActive` may require getting statuses of other nodes. E.g. a group of fully configured nodes would instantly change the state to `Active`. This logic requires some kind of Nodes grouping facility, looks a bit like the `Saga Pattern`

Yes, if implemented correctly, we could add activation-dependencies for `AutowareNode`s.

When everything is launched, the `AutowareNode`s without activation-dependencies gets activated normally.

And as they get activated, they trigger other `AutowareNode`s to activate too.

And if they are not activated, they report to `ACC` for their requirements not met."
AutowareNode base class for Lifecycle and Monitoring,D_kwDOAnasMc4ASIuk,2023-01-13T10:55:33Z,xmfcx,8,Answered,DC_kwDOAnasMc4AR2d3,yukkysaito,"Sounds good.
Please let me check to make sure. 
Does this mean that ACC has the following functions?
- Check that a node has not died using heartbeats.
- Send shutdown command and change state command

Also, what is the use case for this functionality?
I would like to know the future road map after implement this function."
AutowareNode base class for Lifecycle and Monitoring,D_kwDOAnasMc4ASIuk,2023-01-13T10:55:33Z,xmfcx,8,Answered,DC_kwDOAnasMc4AR2ep,xmfcx,"> Does this mean that ACC has the following functions?

Yes.

> Check that a node has not died using heartbeats.

So that when something goes wrong and a node dies, we will know which node has died.

> Send shutdown command and change state command

In ROS1 we could call `rosnode kill /node_name` to kill the node that we like. This could be for debugging purposes generally.

But in ROS2 the alternative is to use the Lifecycle Nodes. This new architecture will enable us to do the same."
AutowareNode base class for Lifecycle and Monitoring,D_kwDOAnasMc4ASIuk,2023-01-13T10:55:33Z,xmfcx,8,Answered,DC_kwDOAnasMc4AR2e7,xmfcx,"For the roadmap, once we discuss the details, I'd like to generate tasks and a timeline.

For now I'm implementing the registration stage in the PR https://github.com/autowarefoundation/autoware.core/pull/57"
AutowareNode base class for Lifecycle and Monitoring,D_kwDOAnasMc4ASIuk,2023-01-13T10:55:33Z,xmfcx,8,Answered,DC_kwDOAnasMc4AR3AI,JWhitleyWork,"@xmfcx What types of functionality do you propose adding to `AutowareNode` that couldn't be acheived by utilizing `rclcpp_lifecycle::LifecycleNode` and enabling Topic Statistics without having to inherit from a custom class? I'm not saying that a custom class is a bad thing (it allows for the flexibility to update most ROS-based functionality from a single class) but it is non-standard and obfuscates the existing ROS2 functionality, thus making it less transparent and harder to enter the ecosystem for newer developers."
AutowareNode base class for Lifecycle and Monitoring,D_kwDOAnasMc4ASIuk,2023-01-13T10:55:33Z,xmfcx,8,Answered,DC_kwDOAnasMc4AR3Dd,xmfcx,"@JWhitleyWork thanks for the comment!

Here are the general expected features:

> - Registering interface for new `AutowareNode`s to the `ACC`
> - Reporting of current `AutowareNode` state to the `ACC`
> - Control `AutowareNode` state from the `ACC`
>   - shut down the node
>   - toggle between active/inactive state (?)
> - Low overhead watchdog monitoring

The `ACC` will be similar to [nav2_lifecycle_manager](https://github.com/ros-planning/navigation2/tree/main/nav2_lifecycle_manager) In some ways.

The most important feature will be the luxury of seeing the list of `AutowareNode`s from a central place.
- Their states (error/warning/dead/inactive)
- Also watchdog monitoring will come automatically for each node.
  - The developer won't need to deal with setting it up.
  - If a node just inherits from the `AutowareNode`, this will be done automatically.

I know that controlling states of the nodes are pure `rclcpp_lifecycle::LifecycleNode` features.

But having these nodes registered to a central place will enable us to control which of these to shutdown in a more managed way.

Also paving way for creating guis for shutting down specific nodes. Similar to a task manager. Right now it is like looking for a needle in a haystack in `htop` if you need to kill a specific node.

## Topic Statistics

From what I see in
- https://docs.ros.org/en/rolling/Concepts/About-Topic-Statistics.html
- https://docs.ros.org/en/rolling/Tutorials/Advanced/Topic-Statistics-Tutorial/Topic-Statistics-Tutorial.html
The topic statistics is very similar to `ros2 topic hz /topic_name` with a bit more time related statistics.

This is not what I need from a `monitored_publisher` or `monitored_subscriber`.

I've listed these features in https://github.com/orgs/autowarefoundation/discussions/3194#discussioncomment-4677947 under title **Monitored publishers, subscribers?**

> Basic premise is, we don't want to monitor each topic with an outsider tool
> - thus increasing network overhead for large messages
> - like [topic_state_monitor](https://github.com/autowarefoundation/autoware.universe/tree/main/system/topic_state_monitor)
> Instead, we'd like each subscriber to monitor the topics they subscribe to.
> With functionality like:
> - Allow subscribers to express what rate range they expect
> - What rates a publisher is expected to publish
> - If a mismatch occurs, they could report to `ACC`
> - If a critical subscriber doesn't have the topics it needs, it could report to `ACC`
> - If a topic misses its deadline, the subscriber could initiate a warning state and report to `ACC`
> - The deadlines could be set from subscribers maybe?
> 
> All of these functionalities can be possible because we can define custom subscribers and publishers and we have a common monitoring tool to report to.
> 
> Normally all these would be hard to implement in each node. But with the `AutowareNode` base class, most of the complexity would be hidden and be done automatically.
> 
> The users implementing new nodes only define the optional deadlines, expected rates etc.

Topic statistics let you publish a `/statistics` topic for each topic and monitor them as it's needed.

If we use it for each topic, it will generate a lot of network traffic.

Instead, if we use `monitored_publisher` and `monitored_subscriber` wrappers, they can monitor their statuses themselves within the `AutowareNode` and they can report only if an anomaly occurs to the `ACC`.

I understand your concerns on how it might make things more complicated for new or even existing developers to develop for Autoware.

But I will try to find a balance on how it will benefit and how it will be easy and intuitive to use."
AutowareNode base class for Lifecycle and Monitoring,D_kwDOAnasMc4ASIuk,2023-01-13T10:55:33Z,xmfcx,8,Answered,DC_kwDOAnasMc4AR3Dv,xmfcx,"Also from the [`nav2` page](https://navigation.ros.org/concepts/index.html#lifecycle-nodes-and-bond)

> Within Nav2, we use a wrapper of LifecycleNodes, nav2_util LifecycleNode. This wrapper wraps much of the complexities of LifecycleNodes for typical applications.
> It also includes a bond connection for the lifecycle manager to ensure that after a server transitions up, it also remains active. 
> If a server crashes, it lets the lifecycle manager know and transition down the system to prevent a critical failure.

So I've also assumed it is ok to do it as long as it's justified."
AutowareNode base class for Lifecycle and Monitoring,D_kwDOAnasMc4ASIuk,2023-01-13T10:55:33Z,xmfcx,8,Answered,DC_kwDOAnasMc4AR3Tk,isamu-takagi,"it's a nice feature. The requirements I think are:
* ACC supports register and unregister function for restarting AutowareNode
* AutowareNode supports reconnection protocol for restarting ACC
* AutowareNode should work with or without ACC so that ACC is not a single point failure
* ACC should be redundant because it cannot detect its own errors
* AutowareNode can also be applied to class modules such as behavior_velocity_planner's scene module, so make it possible to create from existing AutowareNode or rclcpp::Node
"
AutowareNode base class for Lifecycle and Monitoring,D_kwDOAnasMc4ASIuk,2023-01-13T10:55:33Z,xmfcx,8,Answered,DC_kwDOAnasMc4AR47n,xmfcx,"@isamu-takagi thanks for reviewing the proposal!

### De-registering

> - ACC supports register and unregister function for restarting AutowareNode
> - AutowareNode supports reconnection protocol for restarting ACC

Yes, I've thought of the potential run orders like following:
- node starts after acc
- acc starts after node
- another node with same name tries to register
- node registers, then dies
- acc dies after a node registered

### AutowareNode requiring ACC

> AutowareNode should work with or without ACC so that ACC is not a single point failure

My thoughts on this is to go with a flag for AutowareNode named `require_acc` which is by default `false`.
For production, it can be enabled to be used.
But for debugging nodes, it will be disabled, so, it doesn't get in the way.

### ACC Redundancy

> ACC should be redundant because it cannot detect its own errors

I'm not sure if this is practical. My plan was to make it thoroughly tested and if it crashes, the car should stop / give control to the driver.

What would be your recommendations to make this happen?

### Allow some of `AutowareNode` functionality to be used by non-lifecycle nodes

> AutowareNode can also be applied to class modules such as behavior_velocity_planner's scene module, so make it possible to create from existing AutowareNode or rclcpp::Node

This is something I'd like to avoid. I don't want non-lifecycle nodes to be in the Autoware Core.

This single interface will make it easier to maintain for both development and runtime.

Do you have any plans/ideas on why you'd like such a feature?"
AutowareNode base class for Lifecycle and Monitoring,D_kwDOAnasMc4ASIuk,2023-01-13T10:55:33Z,xmfcx,8,Answered,DC_kwDOAnasMc4AR6ax,isamu-takagi,"### AutowareNode requiring ACC

>My thoughts on this is to go with a flag for AutowareNode named require_acc which is by default false.
For production, it can be enabled to be used.

Can AutowareNode continue processing if ACC dies? No problem then.

### ACC Redundancy

> I'm not sure if this is practical. My plan was to make it thoroughly tested and if it crashes, the car should stop / give control to the driver.
What would be your recommendations to make this happen?

In addition to crashes, errors that detect abnormalities but are judged to be normal are also possible. I mentioned redundancy, but if the implementation is simple, there is also the approach of doing enough testing as you said. This depends on the safety analysis.

### Allow some of AutowareNode functionality to be used by non-lifecycle nodes

I made a mistake. It was rclcpp::LifeCycleNode, not rclcpp::Node. My idea is to group monitored interfaces as following.
```
MyNode::MyNode() : AutowareNode()
{
  auto module1 = AutowareNode(this, ""module1"")
  module1.create_subscription(...)  // monitoring results can be filtered by ""module1""
}
```"
AutowareNode base class for Lifecycle and Monitoring,D_kwDOAnasMc4ASIuk,2023-01-13T10:55:33Z,xmfcx,8,Answered,DC_kwDOAnasMc4AR6o0,xmfcx,"> I made a mistake. It was rclcpp::LifeCycleNode, not rclcpp::Node. My idea is to group monitored interfaces as following.

Oh sure, this should be doable with minimal effort! Thanks!"
AutowareNode base class for Lifecycle and Monitoring,D_kwDOAnasMc4ASIuk,2023-01-13T10:55:33Z,xmfcx,8,Answered,DC_kwDOAnasMc4ASi7z,esteve,"@xmfcx one feature we'd like to have at TierIV is the possibility of enabling/disabling nodes. Originally we wanted to do it from `ros2 launch`, but its design doesn't really allow such things. Instead, one option would be so that nodes that inherit from `AutowareNode` have a parameter so that when launched via `ros2 launch`, it can be toggled to enable/disable the node. The Node would still be constructed, but it's run logic wouldn't be triggered."
AutowareNode base class for Lifecycle and Monitoring,D_kwDOAnasMc4ASIuk,2023-01-13T10:55:33Z,xmfcx,8,Answered,DC_kwDOAnasMc4ASi8a,xmfcx,"Yes, that's what the `toggle between active/inactive state` is for from the first post, under **Interface** -> **Between AutowareNodes and ACC** -> **Control AutowareNode state from the ACC**

It'd be possible to run everything at an inactive state and toggle them at will from the ACC."
AutowareNode base class for Lifecycle and Monitoring,D_kwDOAnasMc4ASIuk,2023-01-13T10:55:33Z,xmfcx,8,Answered,DC_kwDOAnasMc4ASi8q,esteve,"Sorry, I missed that part. That sounds good to me."
AutowareNode base class for Lifecycle and Monitoring,D_kwDOAnasMc4ASIuk,2023-01-13T10:55:33Z,xmfcx,8,Answered,DC_kwDOAnasMc4AWTK6,mitsudome-r,@autowarefoundation/autoware-developers-autocore Could you read this proposal and give feedback on this?
AutowareNode base class for Lifecycle and Monitoring,D_kwDOAnasMc4ASIuk,2023-01-13T10:55:33Z,xmfcx,8,Answered,DC_kwDOAnasMc4AWY92,liuXinGangChina,This is a pretty big proposal， let‘s discusse this on next week’s ASWG meeting。
AutowareNode base class for Lifecycle and Monitoring,D_kwDOAnasMc4ASIuk,2023-01-13T10:55:33Z,xmfcx,8,Answered,DC_kwDOAnasMc4AX7bD,Tom-Li-Lee,"It is a very nice feature that provides a flexible monitoring mechanism based on LifecycleNode.

I have a few questions. Please correct me if my understanding is wrong.

1. The monitor procedure is done automatically. Based on LifecycleNode's state callback, AutowareNode can report state to ACC if some transition is triggered. User doesn't need report state directly.

2. How to deploy ACC? It is a universally unique node, and should be started before any other AutowareNodes, right?

3. ACC is not a static node and can be customized. If a node becomes error/warning/dead/inactive and known by ACC, the behavior to do can be customized.

4. Again, Single point failure should be taken into consideration. "
AutowareNode base class for Lifecycle and Monitoring,D_kwDOAnasMc4ASIuk,2023-01-13T10:55:33Z,xmfcx,8,Answered,DC_kwDOAnasMc4AYq4y,xmfcx,"Hi @Tom-Li-Lee , thanks for your interest in the package.
Sorry for this very late reply :bow: , I thought I've sent the reply earlier but I had connectivity issues.

> The monitor procedure is done automatically. Based on LifecycleNode's state callback, AutowareNode can report state to ACC if some transition is triggered. User doesn't need report state directly.

Correct.

> How to deploy ACC? It is a universally unique node, and should be started before any other AutowareNodes, right?

I think it should support all the possibilities on run or crash orderings. Explained more in detail [in here above](https://github.com/orgs/autowarefoundation/discussions/3194#discussioncomment-4689639).

> ACC is not a static node and can be customized. If a node becomes error/warning/dead/inactive and known by ACC, the behavior to do can be customized.

Once we add the behaviors, I think we can add customization features later too.

> Again, Single point failure should be taken into consideration.

The aim is to make ACC simple and indestructible by vigorous testing. And if ACC fails, the vehicle should perform emergency braking or hand over to the driver."
Camera/Lidar Fusion Based Detection Architecture,D_kwDOAnasMc4ASI3M,2023-01-13T13:44:55Z,kaancolak,3,Answered,,,
Camera/Lidar Fusion Based Detection Architecture,D_kwDOAnasMc4ASI3M,2023-01-13T13:44:55Z,kaancolak,3,Answered,DC_kwDOAnasMc4AR2lM,yukkysaito,"Looks good. :+1: 
The reason for the current design is that range spliter is a node that can be used everywhere, including radar fusion, and I did not want to include the same functionality in roi fusion.
However, I agree with the proposal because it is a trade-off for the computational cost."
Camera/Lidar Fusion Based Detection Architecture,D_kwDOAnasMc4ASI3M,2023-01-13T13:44:55Z,kaancolak,3,Answered,DC_kwDOAnasMc4AR6Rm,kaancolak,@yukkysaito thanks for your comment. I will create a PR according to this proposal. 
Camera/Lidar Fusion Based Detection Architecture,D_kwDOAnasMc4ASI3M,2023-01-13T13:44:55Z,kaancolak,3,Answered,DC_kwDOAnasMc4AR8Ey,yukke42,cc @miursh 
Camera/Lidar Fusion Based Detection Architecture,D_kwDOAnasMc4ASI3M,2023-01-13T13:44:55Z,kaancolak,3,Answered,DC_kwDOAnasMc4ASCE9,badai-nguyen,"@kaancolak thanks you for your suggestion.
Actually I am also considering to update camera/lidar fusion pipeline and some points the same as yours so I would like to share.  cc @yukke42 @miursh 
Current architecture in case of using centerpoint for camera_lidar_fusion: 
![before](https://user-images.githubusercontent.com/94814556/213438331-316d5db2-4aa9-43d4-a79c-bdc222638486.png)
After: 
![after](https://user-images.githubusercontent.com/94814556/213438345-1abacf30-d62b-4a26-b6d2-f92030673cbe.png)

Regarding removing object_range_splitter module from ""camera_lidar_fusion_based_detection.launch.xml"", I have compared results based on tensorrt_yolox and centerpoint using some internal datasets. The result shows non-significant degradation, even improved in some cases.  So I also agree to remove it. 

After you remove splitter, the actual fusion range will be extended. Then I suppose skip one of downsamples (at least in far region where pointcloud density is decreased) could improve the accuracy in far-distance range. I am also working on evaluation this point.
"
Camera/Lidar Fusion Based Detection Architecture,D_kwDOAnasMc4ASI3M,2023-01-13T13:44:55Z,kaancolak,3,Answered,DC_kwDOAnasMc4ASJsc,kaancolak,"@badai-nguyen -san, thanks for your comment and detailed explanation.

In your proposal about clustering, giving long-range point clouds directly to euclidean clustering definitely increases the resolution of clustered (unknown) objects and the accuracy of long-range small objects but probably increases computational costs(detailed polygons, more objects,  more nodelet), I'm wondering about evaluation results."
Camera/Lidar Fusion Based Detection Architecture,D_kwDOAnasMc4ASI3M,2023-01-13T13:44:55Z,kaancolak,3,Answered,DC_kwDOAnasMc4ASNHa,badai-nguyen,"@kaancolak I compared about changes on some internal annotated dataset on different distance range and the result shows increase of precision from distance without downsample pointcloud. Since the current long-range detection accuracy still low, the revision shows double-digit of improvement in some testcases.

I also compared the delay time of topics on rosbag with few vehicle in the long-distance on my local machine, however the delay time of clustering/clusters topics right after modification doesn't see any significant affect. One of the comparison result below for reference.
Current :
![image](https://user-images.githubusercontent.com/94814556/214347669-04e293f6-ccb2-469e-84fa-ac56c0c99749.png)

After changing
![image](https://user-images.githubusercontent.com/94814556/214347810-f23d9c22-a6a7-4b74-8f68-f706aad926ce.png)
"
Camera/Lidar Fusion Based Detection Architecture,D_kwDOAnasMc4ASI3M,2023-01-13T13:44:55Z,kaancolak,3,Answered,DC_kwDOAnasMc4ASQGc,badai-nguyen,@kaancolak I created PR[ #2749](https://github.com/autowarefoundation/autoware.universe/pull/2749) for splitting downsample region suggestion above. Could I ask you to review it? 
Camera/Lidar Fusion Based Detection Architecture,D_kwDOAnasMc4ASI3M,2023-01-13T13:44:55Z,kaancolak,3,Answered,DC_kwDOAnasMc4ASQfh,kaancolak,"> @kaancolak I created PR[ #2749](https://github.com/autowarefoundation/autoware.universe/pull/2749) for splitting downsample region suggestion above. Could I ask you to review it? 

Thanks, I would love to review. :)"
Camera/Lidar Fusion Based Detection Architecture,D_kwDOAnasMc4ASI3M,2023-01-13T13:44:55Z,kaancolak,3,Answered,DC_kwDOAnasMc4ATFDQ,kaancolak,"Relevant all proposals merged, I'm closing this discussion."
perception moudle has no tracking objects to output,D_kwDOAnasMc4ASJ0C,2023-01-15T08:48:39Z,wangxianggang1997,1,Answered,,,
perception moudle has no tracking objects to output,D_kwDOAnasMc4ASJ0C,2023-01-15T08:48:39Z,wangxianggang1997,1,Answered,DC_kwDOAnasMc4ASVLR,yukkysaito,"Was the localization working correctly?
Tracking is processed in the map coordinate system, so the base_link and the map coordinate system must be connected."
perception moudle has no tracking objects to output,D_kwDOAnasMc4ASJ0C,2023-01-15T08:48:39Z,wangxianggang1997,1,Answered,DC_kwDOAnasMc4ASpqf,wangxianggang1997,"I want  know how to make base_link and the map coordinate system connect, Whether it is possible to run the following command？
**ros2 run tf2_ros static_transform_publisher 0 0 0 0 0 0 base_link map**"
package failed and packages aborted,D_kwDOAnasMc4ASKG8,2023-01-15T22:34:12Z,mshah72,2,Answered,,,
package failed and packages aborted,D_kwDOAnasMc4ASKG8,2023-01-15T22:34:12Z,mshah72,2,Answered,DC_kwDOAnasMc4AR5ra,isamu-takagi,Can you share the detailed error message that is printed during the build?
package failed and packages aborted,D_kwDOAnasMc4ASKG8,2023-01-15T22:34:12Z,mshah72,2,Answered,DC_kwDOAnasMc4AR79R,mshah72,"`~/autoware$ colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release`
```
Starting >>> autoware_lint_common
Starting >>> autoware_auto_geometry_msgs
Starting >>> autoware_auto_mapping_msgs
Starting >>> tier4_debug_msgs
Starting >>> autoware_common_msgs
Starting >>> autoware_auto_system_msgs
Starting >>> autoware_adapi_v1_msgs
Starting >>> tier4_planning_msgs
Finished <<< autoware_lint_common [1.62s]                                    
Starting >>> autoware_cmake
Finished <<< autoware_cmake [0.31s]    
Starting >>> autoware_utils
Finished <<< autoware_common_msgs [2.01s]
Starting >>> autoware_planning_msgs    
Finished <<< autoware_auto_system_msgs [2.38s]
Starting >>> tier4_system_msgs
Finished <<< autoware_auto_geometry_msgs [2.48s]
Finished <<< autoware_auto_mapping_msgs [2.51s]
Starting >>> autoware_auto_perception_msgs
Starting >>> autoware_auto_planning_msgs
Finished <<< autoware_utils [1.09s]                                      
Starting >>> autoware_auto_control_msgs
Finished <<< tier4_debug_msgs [3.08s]
Starting >>> tier4_control_msgs                                                
Finished <<< autoware_adapi_v1_msgs [4.01s]                                    
Starting >>> tier4_external_api_msgs
Finished <<< autoware_planning_msgs [2.00s]
Starting >>> autoware_auto_common
Finished <<< tier4_planning_msgs [4.49s]                                     
Starting >>> osqp_interface
Finished <<< autoware_auto_common [0.81s]                                  
Starting >>> component_interface_specs
Finished <<< autoware_auto_control_msgs [1.91s]                            
Starting >>> tier4_rtc_msgs
Finished <<< tier4_system_msgs [2.62s]                                     
Starting >>> component_interface_utils
Finished <<< autoware_auto_planning_msgs [2.58s]
Starting >>> autoware_auto_vehicle_msgs 
Finished <<< tier4_control_msgs [2.04s]
Starting >>> lanelet2_extension
Finished <<< osqp_interface [0.80s]     
Starting >>> tier4_vehicle_msgs
Finished <<< component_interface_specs [0.49s]
Starting >>> autoware_point_types
Finished <<< component_interface_utils [0.48s]
Starting >>> tier4_pcl_extensions
Finished <<< autoware_point_types [0.75s]
Starting >>> tier4_localization_msgs
Finished <<< tier4_pcl_extensions [0.67s]
Starting >>> autoware_ad_api_specs      
Finished <<< autoware_auto_perception_msgs [3.98s]
Starting >>> tier4_perception_msgs
Finished <<< autoware_ad_api_specs [0.30s]
Starting >>> autoware_auto_tf2
Finished <<< lanelet2_extension [1.56s] 
Starting >>> tier4_api_msgs
Finished <<< autoware_auto_tf2 [0.54s]  
Starting >>> autoware_map_msgs
Finished <<< tier4_localization_msgs [1.37s]
Starting >>> tier4_v2x_msgs
Finished <<< tier4_rtc_msgs [2.68s]     
Starting >>> velodyne_msgs
Finished <<< tier4_vehicle_msgs [2.85s] 
Starting >>> signal_processing
Finished <<< tier4_perception_msgs [2.25s]
Starting >>> rtc_interface
Finished <<< autoware_map_msgs [1.71s]
Starting >>> kalman_filter
Finished <<< signal_processing [0.68s]  
Starting >>> mussp
Finished <<< tier4_api_msgs [2.23s]     
Starting >>> velodyne_monitor
Finished <<< autoware_auto_vehicle_msgs [3.96s]
Starting >>> tier4_autoware_utils
Finished <<< tier4_v2x_msgs [1.57s]
Finished <<< velodyne_msgs [1.48s]
Starting >>> autoware_auto_geometry      
Starting >>> tier4_auto_msgs_converter
Finished <<< rtc_interface [0.58s]       
Starting >>> velodyne_driver
Finished <<< kalman_filter [0.55s]       
Starting >>> velodyne_pointcloud
Finished <<< mussp [0.52s]
Starting >>> autoware_sensing_msgs
Finished <<< velodyne_monitor [0.55s]    
Starting >>> ndt_omp
Finished <<< tier4_auto_msgs_converter [0.56s]
Starting >>> pointcloud_to_laserscan
Finished <<< autoware_auto_geometry [0.70s]
Starting >>> tier4_simulation_msgs
Finished <<< velodyne_driver [0.66s]     
Starting >>> geo_pos_conv
Finished <<< tier4_autoware_utils [1.02s]
Starting >>> interpolation
Finished <<< ndt_omp [0.64s]             
Starting >>> vehicle_info_util
Finished <<< geo_pos_conv [0.48s]        
Finished <<< tier4_external_api_msgs [6.49s]
Finished <<< pointcloud_to_laserscan [0.80s]
Starting >>> tier4_api_utils
Starting >>> pointcloud_preprocessor
Starting >>> grid_map_utils
Finished <<< velodyne_pointcloud [1.22s]                                      
Starting >>> tvm_utility
Finished <<< vehicle_info_util [0.74s]   
Starting >>> global_parameter_loader
Finished <<< interpolation [0.91s]       
Starting >>> motion_utils
Finished <<< autoware_sensing_msgs [1.72s]
Starting >>> perception_utils
Finished <<< tvm_utility [0.55s]         
Starting >>> raw_vehicle_cmd_converter
Finished <<< tier4_api_utils [0.74s]     
Starting >>> dummy_perception_publisher
Finished <<< grid_map_utils [0.77s]
Starting >>> external_cmd_selector
Finished <<< tier4_simulation_msgs [1.54s]
Starting >>> freespace_planning_algorithms
Finished <<< global_parameter_loader [0.64s]
Starting >>> map_loader                  
Finished <<< external_cmd_selector [0.67s]
Starting >>> shape_estimation
Finished <<< motion_utils [1.03s]
Finished <<< perception_utils [0.96s]    
Starting >>> route_handler
Starting >>> trajectory_follower_base
Finished <<< raw_vehicle_cmd_converter [0.94s]
Starting >>> lane_departure_checker
Finished <<< freespace_planning_algorithms [1.00s]
Starting >>> lidar_centerpoint
Finished <<< map_loader [1.01s]          
Starting >>> motion_velocity_smoother
Finished <<< dummy_perception_publisher [1.70s]
Starting >>> obstacle_avoidance_planner
Finished <<< shape_estimation [1.44s]    
Starting >>> autoware_adapi_version_msgs
Finished <<< pointcloud_preprocessor [3.02s]
Starting >>> compare_map_segmentation
[Processing: autoware_adapi_version_msgs, compare_map_segmentation, lane_departure_checker, lidar_centerpoint, motion_velocity_smoother, obstacle_avoidance_planner, route_handler, trajectory_follower_base]
Finished <<< autoware_adapi_version_msgs [33.7s]                            
Starting >>> tamagawa_imu_driver
Finished <<< route_handler [52.0s]                                           
Starting >>> mission_planner
Finished <<< tamagawa_imu_driver [17.0s]     
Starting >>> velodyne_description
[Processing: compare_map_segmentation, lane_departure_checker, lidar_centerpoint, mission_planner, motion_velocity_smoother, obstacle_avoidance_planner, trajectory_follower_base, velodyne_description]
Finished <<< velodyne_description [33.6s]     
Starting >>> autoware_external_api_msgs
Finished <<< trajectory_follower_base [1min 26s]
Starting >>> mpc_lateral_controller           
--- stderr: lidar_centerpoint
CMake Warning at /home/shahmeet18/ros2_humble/install/ament_cmake_auto/share/ament_cmake_auto/cmake/ament_auto_add_library.cmake:66 (add_library):
  Cannot generate a safe runtime search path for target centerpoint_lib
  because there is a cycle in the constraint graph:

    dir 0 is [/home/shahmeet18/autoware/install/autoware_auto_perception_msgs/lib]
    dir 1 is [/home/shahmeet18/ros2_humble/install/rclcpp_components/lib]
    dir 2 is [/home/shahmeet18/autoware/install/interpolation/lib]
    dir 3 is [/home/shahmeet18/autoware/install/perception_utils/lib]
    dir 4 is [/home/shahmeet18/ros2_humble/install/action_msgs/lib]
    dir 5 is [/home/shahmeet18/autoware/install/autoware_auto_geometry_msgs/lib]
    dir 6 is [/home/shahmeet18/autoware/install/autoware_auto_mapping_msgs/lib]
    dir 7 is [/home/shahmeet18/ros2_humble/install/nav_msgs/lib]
    dir 8 is [/home/shahmeet18/autoware/install/autoware_auto_planning_msgs/lib]
    dir 9 is [/home/shahmeet18/autoware/install/autoware_auto_vehicle_msgs/lib]
    dir 10 is [/home/shahmeet18/ros2_humble/install/diagnostic_msgs/lib]
    dir 11 is [/home/shahmeet18/ros2_humble/install/rclcpp/lib]
      dir 33 must precede it due to runtime library [librclcpp.so]
    dir 12 is [/home/shahmeet18/ros2_humble/install/tf2/lib]
    dir 13 is [/home/shahmeet18/autoware/install/tier4_debug_msgs/lib]
    dir 14 is [/home/shahmeet18/ros2_humble/install/unique_identifier_msgs/lib]
    dir 15 is [/home/shahmeet18/ros2_humble/install/builtin_interfaces/lib]
      dir 33 must precede it due to runtime library [libbuiltin_interfaces__rosidl_generator_c.so]
    dir 16 is [/home/shahmeet18/ros2_humble/install/geometry_msgs/lib]
      dir 33 must precede it due to runtime library [libgeometry_msgs__rosidl_generator_c.so]
    dir 17 is [/home/shahmeet18/ros2_humble/install/sensor_msgs/lib]
      dir 33 must precede it due to runtime library [libsensor_msgs__rosidl_generator_c.so]
    dir 18 is [/home/shahmeet18/ros2_humble/install/std_msgs/lib]
      dir 33 must precede it due to runtime library [libstd_msgs__rosidl_generator_c.so]
    dir 19 is [/home/shahmeet18/ros2_humble/install/rosidl_typesupport_fastrtps_c/lib]
      dir 33 must precede it due to runtime library [librosidl_typesupport_fastrtps_c.so]
    dir 20 is [/home/shahmeet18/ros2_humble/install/rmw/lib]
      dir 33 must precede it due to runtime library [librmw.so]
    dir 21 is [/home/shahmeet18/ros2_humble/install/rosidl_typesupport_fastrtps_cpp/lib]
      dir 33 must precede it due to runtime library [librosidl_typesupport_fastrtps_cpp.so]
    dir 22 is [/home/shahmeet18/ros2_humble/install/rcutils/lib]
      dir 33 must precede it due to runtime library [librcutils.so]
    dir 23 is [/home/shahmeet18/ros2_humble/install/rcpputils/lib]
      dir 33 must precede it due to runtime library [librcpputils.so]
    dir 24 is [/home/shahmeet18/ros2_humble/install/rosidl_typesupport_c/lib]
      dir 33 must precede it due to runtime library [librosidl_typesupport_c.so]
    dir 25 is [/home/shahmeet18/ros2_humble/install/rosidl_typesupport_cpp/lib]
      dir 33 must precede it due to runtime library [librosidl_typesupport_cpp.so]
    dir 26 is [/home/shahmeet18/ros2_humble/install/rosidl_runtime_c/lib]
      dir 33 must precede it due to runtime library [librosidl_runtime_c.so]
    dir 27 is [/home/shahmeet18/ros2_humble/install/rosidl_typesupport_introspection_c/lib]
      dir 33 must precede it due to runtime library [librosidl_typesupport_introspection_c.so]
    dir 28 is [/home/shahmeet18/ros2_humble/install/rosidl_typesupport_introspection_cpp/lib]
      dir 33 must precede it due to runtime library [librosidl_typesupport_introspection_cpp.so]
    dir 29 is [/home/shahmeet18/ros2_humble/install/visualization_msgs/lib]
    dir 30 is [/home/shahmeet18/autoware/install/tier4_autoware_utils/lib]
    dir 31 is [/home/shahmeet18/autoware/build/lidar_centerpoint]
    dir 32 is [/home/shahmeet18/ros2_humble/install/tf2_ros/lib]
    dir 33 is [/opt/ros/humble/lib]
      dir 1 must precede it due to runtime library [libcomponent_manager.so]
      dir 4 must precede it due to runtime library [libaction_msgs__rosidl_generator_c.so]
      dir 7 must precede it due to runtime library [libnav_msgs__rosidl_generator_c.so]
      dir 10 must precede it due to runtime library [libdiagnostic_msgs__rosidl_generator_c.so]
      dir 11 must precede it due to runtime library [librclcpp.so]
      dir 12 must precede it due to runtime library [libtf2.so]
      dir 14 must precede it due to runtime library [libunique_identifier_msgs__rosidl_generator_c.so]
      dir 15 must precede it due to runtime library [libbuiltin_interfaces__rosidl_generator_c.so]
      dir 16 must precede it due to runtime library [libgeometry_msgs__rosidl_generator_c.so]
      dir 17 must precede it due to runtime library [libsensor_msgs__rosidl_generator_c.so]
      dir 18 must precede it due to runtime library [libstd_msgs__rosidl_generator_c.so]
      dir 19 must precede it due to runtime library [librosidl_typesupport_fastrtps_c.so]
      dir 20 must precede it due to runtime library [librmw.so]
      dir 21 must precede it due to runtime library [librosidl_typesupport_fastrtps_cpp.so]
      dir 22 must precede it due to runtime library [librcutils.so]
      dir 23 must precede it due to runtime library [librcpputils.so]
      dir 24 must precede it due to runtime library [librosidl_typesupport_c.so]
      dir 25 must precede it due to runtime library [librosidl_typesupport_cpp.so]
      dir 26 must precede it due to runtime library [librosidl_runtime_c.so]
      dir 27 must precede it due to runtime library [librosidl_typesupport_introspection_c.so]
      dir 28 must precede it due to runtime library [librosidl_typesupport_introspection_cpp.so]
      dir 29 must precede it due to runtime library [libvisualization_msgs__rosidl_generator_c.so]
      dir 32 must precede it due to runtime library [libstatic_transform_broadcaster_node.so]
      dir 34 must precede it due to runtime library [libclass_loader.so]
      dir 35 must precede it due to runtime library [libcomposition_interfaces__rosidl_typesupport_fastrtps_c.so]
      dir 36 must precede it due to runtime library [libmessage_filters.so]
      dir 37 must precede it due to runtime library [librclcpp_action.so]
      dir 38 must precede it due to runtime library [liblibstatistics_collector.so]
      dir 39 must precede it due to runtime library [librosgraph_msgs__rosidl_typesupport_fastrtps_c.so]
      dir 40 must precede it due to runtime library [libstatistics_msgs__rosidl_typesupport_fastrtps_c.so]
      dir 41 must precede it due to runtime library [librcl_action.so]
      dir 42 must precede it due to runtime library [librcl.so]
      dir 43 must precede it due to runtime library [librcl_interfaces__rosidl_typesupport_fastrtps_c.so]
      dir 44 must precede it due to runtime library [librcl_yaml_param_parser.so]
      dir 45 must precede it due to runtime library [libyaml.so]
      dir 46 must precede it due to runtime library [libtracetools.so]
      dir 47 must precede it due to runtime library [librmw_implementation.so]
      dir 48 must precede it due to runtime library [libament_index_cpp.so]
      dir 49 must precede it due to runtime library [librcl_logging_spdlog.so]
      dir 50 must precede it due to runtime library [librcl_logging_interface.so]
      dir 51 must precede it due to runtime library [libtf2_msgs__rosidl_typesupport_fastrtps_c.so]
      dir 52 must precede it due to runtime library [libfastcdr.so.1]
    dir 34 is [/home/shahmeet18/ros2_humble/install/class_loader/lib]
    dir 35 is [/home/shahmeet18/ros2_humble/install/composition_interfaces/lib]
    dir 36 is [/home/shahmeet18/ros2_humble/install/message_filters/lib]
      dir 33 must precede it due to runtime library [libmessage_filters.so]
    dir 37 is [/home/shahmeet18/ros2_humble/install/rclcpp_action/lib]
    dir 38 is [/home/shahmeet18/ros2_humble/install/libstatistics_collector/lib]
    dir 39 is [/home/shahmeet18/ros2_humble/install/rosgraph_msgs/lib]
      dir 33 must precede it due to runtime library [librosgraph_msgs__rosidl_generator_c.so]
    dir 40 is [/home/shahmeet18/ros2_humble/install/statistics_msgs/lib]
      dir 33 must precede it due to runtime library [libstatistics_msgs__rosidl_generator_c.so]
    dir 41 is [/home/shahmeet18/ros2_humble/install/rcl_action/lib]
    dir 42 is [/home/shahmeet18/ros2_humble/install/rcl/lib]
    dir 43 is [/home/shahmeet18/ros2_humble/install/rcl_interfaces/lib]
    dir 44 is [/home/shahmeet18/ros2_humble/install/rcl_yaml_param_parser/lib]
      dir 33 must precede it due to runtime library [librcl_yaml_param_parser.so]
    dir 45 is [/home/shahmeet18/ros2_humble/install/libyaml_vendor/lib]
    dir 46 is [/home/shahmeet18/ros2_humble/install/tracetools/lib]
      dir 33 must precede it due to runtime library [libtracetools.so]
    dir 47 is [/home/shahmeet18/ros2_humble/install/rmw_implementation/lib]
    dir 48 is [/home/shahmeet18/ros2_humble/install/ament_index_cpp/lib]
    dir 49 is [/home/shahmeet18/ros2_humble/install/rcl_logging_spdlog/lib]
    dir 50 is [/home/shahmeet18/ros2_humble/install/rcl_logging_interface/lib]
    dir 51 is [/home/shahmeet18/ros2_humble/install/tf2_msgs/lib]
    dir 52 is [/home/shahmeet18/ros2_humble/install/fastcdr/lib]

  Some of these libraries may not be found correctly.
Call Stack (most recent call first):
  CMakeLists.txt:129 (ament_auto_add_library)


CMake Warning at /home/shahmeet18/ros2_humble/install/ament_cmake_auto/share/ament_cmake_auto/cmake/ament_auto_add_library.cmake:66 (add_library):
  Cannot generate a safe runtime search path for target
  lidar_centerpoint_component because there is a cycle in the constraint
  graph:

    dir 0 is [/home/shahmeet18/autoware/install/interpolation/lib]
    dir 1 is [/home/shahmeet18/autoware/install/perception_utils/lib]
    dir 2 is [/home/shahmeet18/autoware/install/autoware_auto_perception_msgs/lib]
    dir 3 is [/home/shahmeet18/ros2_humble/install/action_msgs/lib]
    dir 4 is [/home/shahmeet18/autoware/install/autoware_auto_geometry_msgs/lib]
    dir 5 is [/home/shahmeet18/autoware/install/autoware_auto_mapping_msgs/lib]
    dir 6 is [/home/shahmeet18/ros2_humble/install/nav_msgs/lib]
    dir 7 is [/home/shahmeet18/autoware/install/autoware_auto_planning_msgs/lib]
    dir 8 is [/home/shahmeet18/autoware/install/autoware_auto_vehicle_msgs/lib]
    dir 9 is [/home/shahmeet18/ros2_humble/install/diagnostic_msgs/lib]
    dir 10 is [/home/shahmeet18/ros2_humble/install/rclcpp/lib]
      dir 32 must precede it due to runtime library [librclcpp.so]
    dir 11 is [/home/shahmeet18/ros2_humble/install/tf2/lib]
    dir 12 is [/home/shahmeet18/autoware/install/tier4_debug_msgs/lib]
    dir 13 is [/home/shahmeet18/ros2_humble/install/unique_identifier_msgs/lib]
    dir 14 is [/home/shahmeet18/ros2_humble/install/builtin_interfaces/lib]
      dir 32 must precede it due to runtime library [libbuiltin_interfaces__rosidl_generator_c.so]
    dir 15 is [/home/shahmeet18/ros2_humble/install/geometry_msgs/lib]
      dir 32 must precede it due to runtime library [libgeometry_msgs__rosidl_generator_c.so]
    dir 16 is [/home/shahmeet18/ros2_humble/install/sensor_msgs/lib]
      dir 32 must precede it due to runtime library [libsensor_msgs__rosidl_generator_c.so]
    dir 17 is [/home/shahmeet18/ros2_humble/install/std_msgs/lib]
      dir 32 must precede it due to runtime library [libstd_msgs__rosidl_generator_c.so]
    dir 18 is [/home/shahmeet18/ros2_humble/install/rosidl_typesupport_fastrtps_c/lib]
      dir 32 must precede it due to runtime library [librosidl_typesupport_fastrtps_c.so]
    dir 19 is [/home/shahmeet18/ros2_humble/install/rmw/lib]
      dir 32 must precede it due to runtime library [librmw.so]
    dir 20 is [/home/shahmeet18/ros2_humble/install/rosidl_typesupport_fastrtps_cpp/lib]
      dir 32 must precede it due to runtime library [librosidl_typesupport_fastrtps_cpp.so]
    dir 21 is [/home/shahmeet18/ros2_humble/install/rcutils/lib]
      dir 32 must precede it due to runtime library [librcutils.so]
    dir 22 is [/home/shahmeet18/ros2_humble/install/rcpputils/lib]
      dir 32 must precede it due to runtime library [librcpputils.so]
    dir 23 is [/home/shahmeet18/ros2_humble/install/rosidl_typesupport_c/lib]
      dir 32 must precede it due to runtime library [librosidl_typesupport_c.so]
    dir 24 is [/home/shahmeet18/ros2_humble/install/rosidl_typesupport_cpp/lib]
      dir 32 must precede it due to runtime library [librosidl_typesupport_cpp.so]
    dir 25 is [/home/shahmeet18/ros2_humble/install/rosidl_runtime_c/lib]
      dir 32 must precede it due to runtime library [librosidl_runtime_c.so]
    dir 26 is [/home/shahmeet18/ros2_humble/install/rosidl_typesupport_introspection_c/lib]
      dir 32 must precede it due to runtime library [librosidl_typesupport_introspection_c.so]
    dir 27 is [/home/shahmeet18/ros2_humble/install/rosidl_typesupport_introspection_cpp/lib]
      dir 32 must precede it due to runtime library [librosidl_typesupport_introspection_cpp.so]
    dir 28 is [/home/shahmeet18/ros2_humble/install/visualization_msgs/lib]
    dir 29 is [/home/shahmeet18/autoware/install/tier4_autoware_utils/lib]
    dir 30 is [/home/shahmeet18/autoware/build/lidar_centerpoint]
    dir 31 is [/home/shahmeet18/ros2_humble/install/tf2_ros/lib]
    dir 32 is [/opt/ros/humble/lib]
      dir 3 must precede it due to runtime library [libaction_msgs__rosidl_generator_c.so]
      dir 6 must precede it due to runtime library [libnav_msgs__rosidl_generator_c.so]
      dir 9 must precede it due to runtime library [libdiagnostic_msgs__rosidl_generator_c.so]
      dir 10 must precede it due to runtime library [librclcpp.so]
      dir 11 must precede it due to runtime library [libtf2.so]
      dir 13 must precede it due to runtime library [libunique_identifier_msgs__rosidl_generator_c.so]
      dir 14 must precede it due to runtime library [libbuiltin_interfaces__rosidl_generator_c.so]
      dir 15 must precede it due to runtime library [libgeometry_msgs__rosidl_generator_c.so]
      dir 16 must precede it due to runtime library [libsensor_msgs__rosidl_generator_c.so]
      dir 17 must precede it due to runtime library [libstd_msgs__rosidl_generator_c.so]
      dir 18 must precede it due to runtime library [librosidl_typesupport_fastrtps_c.so]
      dir 19 must precede it due to runtime library [librmw.so]
      dir 20 must precede it due to runtime library [librosidl_typesupport_fastrtps_cpp.so]
      dir 21 must precede it due to runtime library [librcutils.so]
      dir 22 must precede it due to runtime library [librcpputils.so]
      dir 23 must precede it due to runtime library [librosidl_typesupport_c.so]
      dir 24 must precede it due to runtime library [librosidl_typesupport_cpp.so]
      dir 25 must precede it due to runtime library [librosidl_runtime_c.so]
      dir 26 must precede it due to runtime library [librosidl_typesupport_introspection_c.so]
      dir 27 must precede it due to runtime library [librosidl_typesupport_introspection_cpp.so]
      dir 28 must precede it due to runtime library [libvisualization_msgs__rosidl_generator_c.so]
      dir 31 must precede it due to runtime library [libstatic_transform_broadcaster_node.so]
      dir 33 must precede it due to runtime library [libcomponent_manager.so]
      dir 34 must precede it due to runtime library [libclass_loader.so]
      dir 35 must precede it due to runtime library [libcomposition_interfaces__rosidl_typesupport_fastrtps_c.so]
      dir 36 must precede it due to runtime library [libmessage_filters.so]
      dir 37 must precede it due to runtime library [librclcpp_action.so]
      dir 38 must precede it due to runtime library [liblibstatistics_collector.so]
      dir 39 must precede it due to runtime library [librosgraph_msgs__rosidl_typesupport_fastrtps_c.so]
      dir 40 must precede it due to runtime library [libstatistics_msgs__rosidl_typesupport_fastrtps_c.so]
      dir 41 must precede it due to runtime library [librcl_action.so]
      dir 42 must precede it due to runtime library [librcl.so]
      dir 43 must precede it due to runtime library [librcl_interfaces__rosidl_typesupport_fastrtps_c.so]
      dir 44 must precede it due to runtime library [librcl_yaml_param_parser.so]
      dir 45 must precede it due to runtime library [libyaml.so]
      dir 46 must precede it due to runtime library [libtracetools.so]
      dir 47 must precede it due to runtime library [librmw_implementation.so]
      dir 48 must precede it due to runtime library [libament_index_cpp.so]
      dir 49 must precede it due to runtime library [librcl_logging_spdlog.so]
      dir 50 must precede it due to runtime library [librcl_logging_interface.so]
      dir 51 must precede it due to runtime library [libtf2_msgs__rosidl_typesupport_fastrtps_c.so]
      dir 52 must precede it due to runtime library [libfastcdr.so.1]
    dir 33 is [/home/shahmeet18/ros2_humble/install/rclcpp_components/lib]
    dir 34 is [/home/shahmeet18/ros2_humble/install/class_loader/lib]
    dir 35 is [/home/shahmeet18/ros2_humble/install/composition_interfaces/lib]
    dir 36 is [/home/shahmeet18/ros2_humble/install/message_filters/lib]
      dir 32 must precede it due to runtime library [libmessage_filters.so]
    dir 37 is [/home/shahmeet18/ros2_humble/install/rclcpp_action/lib]
    dir 38 is [/home/shahmeet18/ros2_humble/install/libstatistics_collector/lib]
    dir 39 is [/home/shahmeet18/ros2_humble/install/rosgraph_msgs/lib]
      dir 32 must precede it due to runtime library [librosgraph_msgs__rosidl_generator_c.so]
    dir 40 is [/home/shahmeet18/ros2_humble/install/statistics_msgs/lib]
      dir 32 must precede it due to runtime library [libstatistics_msgs__rosidl_generator_c.so]
    dir 41 is [/home/shahmeet18/ros2_humble/install/rcl_action/lib]
    dir 42 is [/home/shahmeet18/ros2_humble/install/rcl/lib]
    dir 43 is [/home/shahmeet18/ros2_humble/install/rcl_interfaces/lib]
    dir 44 is [/home/shahmeet18/ros2_humble/install/rcl_yaml_param_parser/lib]
      dir 32 must precede it due to runtime library [librcl_yaml_param_parser.so]
    dir 45 is [/home/shahmeet18/ros2_humble/install/libyaml_vendor/lib]
    dir 46 is [/home/shahmeet18/ros2_humble/install/tracetools/lib]
      dir 32 must precede it due to runtime library [libtracetools.so]
    dir 47 is [/home/shahmeet18/ros2_humble/install/rmw_implementation/lib]
    dir 48 is [/home/shahmeet18/ros2_humble/install/ament_index_cpp/lib]
    dir 49 is [/home/shahmeet18/ros2_humble/install/rcl_logging_spdlog/lib]
    dir 50 is [/home/shahmeet18/ros2_humble/install/rcl_logging_interface/lib]
    dir 51 is [/home/shahmeet18/ros2_humble/install/tf2_msgs/lib]
    dir 52 is [/home/shahmeet18/ros2_humble/install/fastcdr/lib]

  Some of these libraries may not be found correctly.
Call Stack (most recent call first):
  CMakeLists.txt:172 (ament_auto_add_library)


CMake Warning at /home/shahmeet18/ros2_humble/install/ament_cmake_auto/share/ament_cmake_auto/cmake/ament_auto_add_library.cmake:66 (add_library):
  Cannot generate a safe runtime search path for target
  single_inference_lidar_centerpoint_component because there is a cycle in
  the constraint graph:

    dir 0 is [/home/shahmeet18/autoware/build/lidar_centerpoint]
    dir 1 is [/home/shahmeet18/autoware/install/interpolation/lib]
    dir 2 is [/home/shahmeet18/autoware/install/perception_utils/lib]
    dir 3 is [/home/shahmeet18/autoware/install/autoware_auto_perception_msgs/lib]
    dir 4 is [/home/shahmeet18/ros2_humble/install/action_msgs/lib]
    dir 5 is [/home/shahmeet18/autoware/install/autoware_auto_geometry_msgs/lib]
    dir 6 is [/home/shahmeet18/autoware/install/autoware_auto_mapping_msgs/lib]
    dir 7 is [/home/shahmeet18/ros2_humble/install/nav_msgs/lib]
    dir 8 is [/home/shahmeet18/autoware/install/autoware_auto_planning_msgs/lib]
    dir 9 is [/home/shahmeet18/autoware/install/autoware_auto_vehicle_msgs/lib]
    dir 10 is [/home/shahmeet18/ros2_humble/install/diagnostic_msgs/lib]
    dir 11 is [/home/shahmeet18/ros2_humble/install/rclcpp/lib]
      dir 32 must precede it due to runtime library [librclcpp.so]
    dir 12 is [/home/shahmeet18/ros2_humble/install/tf2/lib]
    dir 13 is [/home/shahmeet18/autoware/install/tier4_debug_msgs/lib]
    dir 14 is [/home/shahmeet18/ros2_humble/install/unique_identifier_msgs/lib]
    dir 15 is [/home/shahmeet18/ros2_humble/install/builtin_interfaces/lib]
      dir 32 must precede it due to runtime library [libbuiltin_interfaces__rosidl_generator_c.so]
    dir 16 is [/home/shahmeet18/ros2_humble/install/geometry_msgs/lib]
      dir 32 must precede it due to runtime library [libgeometry_msgs__rosidl_generator_c.so]
    dir 17 is [/home/shahmeet18/ros2_humble/install/sensor_msgs/lib]
      dir 32 must precede it due to runtime library [libsensor_msgs__rosidl_generator_c.so]
    dir 18 is [/home/shahmeet18/ros2_humble/install/std_msgs/lib]
      dir 32 must precede it due to runtime library [libstd_msgs__rosidl_generator_c.so]
    dir 19 is [/home/shahmeet18/ros2_humble/install/rosidl_typesupport_fastrtps_c/lib]
      dir 32 must precede it due to runtime library [librosidl_typesupport_fastrtps_c.so]
    dir 20 is [/home/shahmeet18/ros2_humble/install/rmw/lib]
      dir 32 must precede it due to runtime library [librmw.so]
    dir 21 is [/home/shahmeet18/ros2_humble/install/rosidl_typesupport_fastrtps_cpp/lib]
      dir 32 must precede it due to runtime library [librosidl_typesupport_fastrtps_cpp.so]
    dir 22 is [/home/shahmeet18/ros2_humble/install/rcutils/lib]
      dir 32 must precede it due to runtime library [librcutils.so]
    dir 23 is [/home/shahmeet18/ros2_humble/install/rcpputils/lib]
      dir 32 must precede it due to runtime library [librcpputils.so]
    dir 24 is [/home/shahmeet18/ros2_humble/install/rosidl_typesupport_c/lib]
      dir 32 must precede it due to runtime library [librosidl_typesupport_c.so]
    dir 25 is [/home/shahmeet18/ros2_humble/install/rosidl_typesupport_cpp/lib]
      dir 32 must precede it due to runtime library [librosidl_typesupport_cpp.so]
    dir 26 is [/home/shahmeet18/ros2_humble/install/rosidl_runtime_c/lib]
      dir 32 must precede it due to runtime library [librosidl_runtime_c.so]
    dir 27 is [/home/shahmeet18/ros2_humble/install/rosidl_typesupport_introspection_c/lib]
      dir 32 must precede it due to runtime library [librosidl_typesupport_introspection_c.so]
    dir 28 is [/home/shahmeet18/ros2_humble/install/rosidl_typesupport_introspection_cpp/lib]
      dir 32 must precede it due to runtime library [librosidl_typesupport_introspection_cpp.so]
    dir 29 is [/home/shahmeet18/ros2_humble/install/visualization_msgs/lib]
    dir 30 is [/home/shahmeet18/autoware/install/tier4_autoware_utils/lib]
    dir 31 is [/home/shahmeet18/ros2_humble/install/tf2_ros/lib]
    dir 32 is [/opt/ros/humble/lib]
      dir 4 must precede it due to runtime library [libaction_msgs__rosidl_generator_c.so]
      dir 7 must precede it due to runtime library [libnav_msgs__rosidl_generator_c.so]
      dir 10 must precede it due to runtime library [libdiagnostic_msgs__rosidl_generator_c.so]
      dir 11 must precede it due to runtime library [librclcpp.so]
      dir 12 must precede it due to runtime library [libtf2.so]
      dir 14 must precede it due to runtime library [libunique_identifier_msgs__rosidl_generator_c.so]
      dir 15 must precede it due to runtime library [libbuiltin_interfaces__rosidl_generator_c.so]
      dir 16 must precede it due to runtime library [libgeometry_msgs__rosidl_generator_c.so]
      dir 17 must precede it due to runtime library [libsensor_msgs__rosidl_generator_c.so]
      dir 18 must precede it due to runtime library [libstd_msgs__rosidl_generator_c.so]
      dir 19 must precede it due to runtime library [librosidl_typesupport_fastrtps_c.so]
      dir 20 must precede it due to runtime library [librmw.so]
      dir 21 must precede it due to runtime library [librosidl_typesupport_fastrtps_cpp.so]
      dir 22 must precede it due to runtime library [librcutils.so]
      dir 23 must precede it due to runtime library [librcpputils.so]
      dir 24 must precede it due to runtime library [librosidl_typesupport_c.so]
      dir 25 must precede it due to runtime library [librosidl_typesupport_cpp.so]
      dir 26 must precede it due to runtime library [librosidl_runtime_c.so]
      dir 27 must precede it due to runtime library [librosidl_typesupport_introspection_c.so]
      dir 28 must precede it due to runtime library [librosidl_typesupport_introspection_cpp.so]
      dir 29 must precede it due to runtime library [libvisualization_msgs__rosidl_generator_c.so]
      dir 31 must precede it due to runtime library [libstatic_transform_broadcaster_node.so]
      dir 33 must precede it due to runtime library [libcomponent_manager.so]
      dir 34 must precede it due to runtime library [libclass_loader.so]
      dir 35 must precede it due to runtime library [libcomposition_interfaces__rosidl_typesupport_fastrtps_c.so]
      dir 36 must precede it due to runtime library [libmessage_filters.so]
      dir 37 must precede it due to runtime library [librclcpp_action.so]
      dir 38 must precede it due to runtime library [liblibstatistics_collector.so]
      dir 39 must precede it due to runtime library [librosgraph_msgs__rosidl_typesupport_fastrtps_c.so]
      dir 40 must precede it due to runtime library [libstatistics_msgs__rosidl_typesupport_fastrtps_c.so]
      dir 41 must precede it due to runtime library [librcl_action.so]
      dir 42 must precede it due to runtime library [librcl.so]
      dir 43 must precede it due to runtime library [librcl_interfaces__rosidl_typesupport_fastrtps_c.so]
      dir 44 must precede it due to runtime library [librcl_yaml_param_parser.so]
      dir 45 must precede it due to runtime library [libyaml.so]
      dir 46 must precede it due to runtime library [libtracetools.so]
      dir 47 must precede it due to runtime library [librmw_implementation.so]
      dir 48 must precede it due to runtime library [libament_index_cpp.so]
      dir 49 must precede it due to runtime library [librcl_logging_spdlog.so]
      dir 50 must precede it due to runtime library [librcl_logging_interface.so]
      dir 51 must precede it due to runtime library [libtf2_msgs__rosidl_typesupport_fastrtps_c.so]
      dir 52 must precede it due to runtime library [libfastcdr.so.1]
    dir 33 is [/home/shahmeet18/ros2_humble/install/rclcpp_components/lib]
    dir 34 is [/home/shahmeet18/ros2_humble/install/class_loader/lib]
    dir 35 is [/home/shahmeet18/ros2_humble/install/composition_interfaces/lib]
    dir 36 is [/home/shahmeet18/ros2_humble/install/message_filters/lib]
      dir 32 must precede it due to runtime library [libmessage_filters.so]
    dir 37 is [/home/shahmeet18/ros2_humble/install/rclcpp_action/lib]
    dir 38 is [/home/shahmeet18/ros2_humble/install/libstatistics_collector/lib]
    dir 39 is [/home/shahmeet18/ros2_humble/install/rosgraph_msgs/lib]
      dir 32 must precede it due to runtime library [librosgraph_msgs__rosidl_generator_c.so]
    dir 40 is [/home/shahmeet18/ros2_humble/install/statistics_msgs/lib]
      dir 32 must precede it due to runtime library [libstatistics_msgs__rosidl_generator_c.so]
    dir 41 is [/home/shahmeet18/ros2_humble/install/rcl_action/lib]
    dir 42 is [/home/shahmeet18/ros2_humble/install/rcl/lib]
    dir 43 is [/home/shahmeet18/ros2_humble/install/rcl_interfaces/lib]
    dir 44 is [/home/shahmeet18/ros2_humble/install/rcl_yaml_param_parser/lib]
      dir 32 must precede it due to runtime library [librcl_yaml_param_parser.so]
    dir 45 is [/home/shahmeet18/ros2_humble/install/libyaml_vendor/lib]
    dir 46 is [/home/shahmeet18/ros2_humble/install/tracetools/lib]
      dir 32 must precede it due to runtime library [libtracetools.so]
    dir 47 is [/home/shahmeet18/ros2_humble/install/rmw_implementation/lib]
    dir 48 is [/home/shahmeet18/ros2_humble/install/ament_index_cpp/lib]
    dir 49 is [/home/shahmeet18/ros2_humble/install/rcl_logging_spdlog/lib]
    dir 50 is [/home/shahmeet18/ros2_humble/install/rcl_logging_interface/lib]
    dir 51 is [/home/shahmeet18/ros2_humble/install/tf2_msgs/lib]
    dir 52 is [/home/shahmeet18/ros2_humble/install/fastcdr/lib]

  Some of these libraries may not be found correctly.
Call Stack (most recent call first):
  CMakeLists.txt:186 (ament_auto_add_library)


/usr/include/c++/11/bits/std_function.h:435:145: error: parameter packs not expanded with ‘...’:
  435 |         function(_Functor&& __f)
      |                                                                                                                                                 ^ 
/usr/include/c++/11/bits/std_function.h:435:145: note:         ‘_ArgTypes’
/usr/include/c++/11/bits/std_function.h:530:146: error: parameter packs not expanded with ‘...’:
  530 |         operator=(_Functor&& __f)
      |                                                                                                                                                  ^ 
/usr/include/c++/11/bits/std_function.h:530:146: note:         ‘_ArgTypes’
CMake Error at centerpoint_cuda_lib_generated_circle_nms_kernel.cu.o.Release.cmake:280 (message):
  Error generating file
  /home/shahmeet18/autoware/build/lidar_centerpoint/CMakeFiles/centerpoint_cuda_lib.dir/lib/postprocess/./centerpoint_cuda_lib_generated_circle_nms_kernel.cu.o


gmake[2]: *** [CMakeFiles/centerpoint_cuda_lib.dir/build.make:77: CMakeFiles/centerpoint_cuda_lib.dir/lib/postprocess/centerpoint_cuda_lib_generated_circle_nms_kernel.cu.o] Error 1
gmake[1]: *** [CMakeFiles/Makefile2:172: CMakeFiles/centerpoint_cuda_lib.dir/all] Error 2
gmake: *** [Makefile:146: all] Error 2
---
Failed   <<< lidar_centerpoint [1min 26s, exited with code 2]
Aborted  <<< mpc_lateral_controller [0.17s]              
Aborted  <<< autoware_external_api_msgs [1.60s]          
Aborted  <<< obstacle_avoidance_planner [1min 45s]       
Aborted  <<< lane_departure_checker [2min 20s]           
Aborted  <<< compare_map_segmentation [2min 28s]                                                                                                                                               
Aborted  <<< mission_planner [1min 48s]                                                                                                     
Aborted  <<< motion_velocity_smoother [2min 40s]                                            

Summary: 70 packages finished [2min 54s]
  1 package failed: lidar_centerpoint
  7 packages aborted: autoware_external_api_msgs compare_map_segmentation lane_departure_checker mission_planner motion_velocity_smoother mpc_lateral_controller obstacle_avoidance_planner
  2 packages had stderr output: compare_map_segmentation lidar_centerpoint
  155 packages not processed
```
"
package failed and packages aborted,D_kwDOAnasMc4ASKG8,2023-01-15T22:34:12Z,mshah72,2,Answered,DC_kwDOAnasMc4AR8Ai,soblin,"It looks like you have a local build of ROS2 in home/shahmeet18/ros2_humble, and I'm guessing you have sourced both /home/shahmeet18/install/setup.bash and /opt/ros/humble/setup.bash.
If that is the case, I think you can just source either of the workspaces before building autoware workspace."
package failed and packages aborted,D_kwDOAnasMc4ASKG8,2023-01-15T22:34:12Z,mshah72,2,Answered,DC_kwDOAnasMc4ASC9q,mshah72,I didn't understand. Can you please explain in detail?
package failed and packages aborted,D_kwDOAnasMc4ASKG8,2023-01-15T22:34:12Z,mshah72,2,Answered,DC_kwDOAnasMc4ASF4r,maxime-clem,"You have 2 installations of ROS2 Humble on your computer.
- Custom one (`home/shahmeet18/ros2_humble`).
- Default one (`/opt/ros/humble`).

To avoid conflicts, make sure you only use one installation at a time. To tell your terminal to ""use"" an installation of ROS2, you must ""source"" the installation (command `source path/to/installation/setup.sh`).
In your case, I think you only need to `source /opt/ros/humble/setup.bash`.

I guess you currently source both installations in your `~/.bashrc` file. Please remove the custom installation and the issue may go away."
Unable to locate package ros-humble-desktop,D_kwDOAnasMc4ASKHU,2023-01-15T22:45:25Z,mshah72,3,Answered,,,
Unable to locate package ros-humble-desktop,D_kwDOAnasMc4ASKHU,2023-01-15T22:45:25Z,mshah72,3,Answered,DC_kwDOAnasMc4AR5rC,isamu-takagi,"ROS humble is for Ubuntu 22. If you are using Ubuntu20, galactic branch is available."
Unable to locate package ros-humble-desktop,D_kwDOAnasMc4ASKHU,2023-01-15T22:45:25Z,mshah72,3,Answered,DC_kwDOAnasMc4AR79a,mshah72,I am using ROS Galactic but it is still showing this error. Would building on Docker be a good option?
Unable to locate package ros-humble-desktop,D_kwDOAnasMc4ASKHU,2023-01-15T22:45:25Z,mshah72,3,Answered,DC_kwDOAnasMc4AR8C_,isamu-takagi,"> If you are using Ubuntu20, galactic branch is available.

Have you switched to the galactic branch? Since `${rosdistro}` is `humble`, it looks like you are using the main branch."
Unable to locate package ros-humble-desktop,D_kwDOAnasMc4ASKHU,2023-01-15T22:45:25Z,mshah72,3,Answered,DC_kwDOAnasMc4AR8DQ,evshary,"If you are using Ubuntu 20.04, you have two options:
1. using docker installation
2. using Autoware galactic branch, you can follow the tutorial here
https://autowarefoundation.github.io/autoware-documentation/galactic/installation/autoware/source-installation/
"
Unable to locate package ros-humble-desktop,D_kwDOAnasMc4ASKHU,2023-01-15T22:45:25Z,mshah72,3,Answered,DC_kwDOAnasMc4ASC93,mshah72,"The docker installation is stopping at this point -

```
mshah72@b7aa8601f1d5:~/autoware$ colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release
Starting >>> autoware_lint_common
Starting >>> autoware_auto_geometry_msgs
Starting >>> autoware_auto_mapping_msgs
Starting >>> tier4_debug_msgs
Starting >>> autoware_common_msgs
Starting >>> autoware_auto_system_msgs
Starting >>> tier4_planning_msgs
Starting >>> autoware_auto_control_msgs
Starting >>> tier4_external_api_msgs
Starting >>> autoware_adapi_v1_msgs
Starting >>> grid_map_cmake_helpers
Starting >>> tier4_rtc_msgs
Starting >>> tier4_localization_msgs                                  
Starting >>> tier4_v2x_msgs
Starting >>> velodyne_msgs
Starting >>> autoware_map_msgs
Starting >>> mussp
Starting >>> autoware_sensing_msgs
Starting >>> ndt_omp
Starting >>> pointcloud_to_laserscan
--- stderr: autoware_lint_common                                            
make: /opt/cmake/cmake-3.19.4-Linux-x86_64/bin/cmake: No such file or directory
make: *** [Makefile:228: cmake_check_build_system] Error 127
---
Failed   <<< autoware_lint_common [0.37s, exited with code 2]
Aborted  <<< grid_map_cmake_helpers [0.31s]
Aborted  <<< ndt_omp [0.26s]                                                                  
Aborted  <<< mussp [0.28s]
Aborted  <<< pointcloud_to_laserscan [0.28s]
Aborted  <<< autoware_common_msgs [0.39s]
Aborted  <<< tier4_localization_msgs [0.35s]
Aborted  <<< autoware_sensing_msgs [0.36s]
Aborted  <<< velodyne_msgs [0.38s]
Aborted  <<< autoware_auto_geometry_msgs [0.48s]                                              
Aborted  <<< autoware_auto_control_msgs [0.48s]
Aborted  <<< autoware_auto_mapping_msgs [0.51s]
Aborted  <<< autoware_map_msgs [0.46s]
Aborted  <<< tier4_v2x_msgs [0.48s]
Aborted  <<< autoware_auto_system_msgs [0.67s]                                     
Aborted  <<< tier4_rtc_msgs [0.65s]
Aborted  <<< tier4_debug_msgs [0.87s]                                              
Aborted  <<< autoware_adapi_v1_msgs [1.22s]                                           
Aborted  <<< tier4_planning_msgs [1.51s]                                              
Aborted  <<< tier4_external_api_msgs [2.52s]                              

Summary: 0 packages finished [3.47s]
  1 package failed: autoware_lint_common
  19 packages aborted: autoware_adapi_v1_msgs autoware_auto_control_msgs autoware_auto_geometry_msgs autoware_auto_mapping_msgs autoware_auto_system_msgs autoware_common_msgs autoware_map_msgs autoware_sensing_msgs grid_map_cmake_helpers mussp ndt_omp pointcloud_to_laserscan tier4_debug_msgs tier4_external_api_msgs tier4_localization_msgs tier4_planning_msgs tier4_rtc_msgs tier4_v2x_msgs velodyne_msgs
  20 packages had stderr output: autoware_adapi_v1_msgs autoware_auto_control_msgs autoware_auto_geometry_msgs autoware_auto_mapping_msgs autoware_auto_system_msgs autoware_common_msgs autoware_lint_common autoware_map_msgs autoware_sensing_msgs grid_map_cmake_helpers mussp ndt_omp pointcloud_to_laserscan tier4_debug_msgs tier4_external_api_msgs tier4_localization_msgs tier4_planning_msgs tier4_rtc_msgs tier4_v2x_msgs velodyne_msgs
  224 packages not processed

```

What should be done in this case?
"
Move launch parameters from `autoware_launch` to `sample_sensor_kit_launch` and `sample_vehicle_launch` packages,D_kwDOAnasMc4ASKL_,2023-01-16T03:11:16Z,VRichardJP,1,Answered,,,
Move launch parameters from `autoware_launch` to `sample_sensor_kit_launch` and `sample_vehicle_launch` packages,D_kwDOAnasMc4ASKL_,2023-01-16T03:11:16Z,VRichardJP,1,Answered,DC_kwDOAnasMc4AR51T,kminoda,"Thank you for the proposal! I find it very interesting that your idea also implies that we may be able to divide Autoware modules into two individual groups (sensor group that includes sensing, localization, and perception / vehicle group that includes planning and control).

> You may want to tune the localization/control/planning/perception/etc module parameters for each. Unfortunately, with the current design of autoware_launch pkg, if you modify parameters in autoware_launch, all your vehicles are impacted. Of course, you could create a autoware_launch_truck_3_lidar, autoware_launch_golfcart_2 and so on, but it would be difficult to maintain.

This is exactly why we moved parameter files to `autoware_launch`. By isolating parameter files to `autoware_launch`, we just need to fork `autoware_launch` when introducing a new type of vehicle, as like `autoware_launch.truck` or `autoware_launch.golfcart`. In other words, `autoware_launch` works as a parameter repository (Note that there exist some parameters that depends on vehicles, which we currently assumes to be configured in `invidividual_params` repository)."
Move launch parameters from `autoware_launch` to `sample_sensor_kit_launch` and `sample_vehicle_launch` packages,D_kwDOAnasMc4ASKL_,2023-01-16T03:11:16Z,VRichardJP,1,Answered,DC_kwDOAnasMc4AR51a,kminoda,"@VRichardJP 
> Of course, you could create a autoware_launch_truck_3_lidar, autoware_launch_golfcart_2 and so on, but it would be difficult to maintain.

May I ask why you think it is difficult to maintain? Maybe providing a bit more specific scenario cases helps."
Move launch parameters from `autoware_launch` to `sample_sensor_kit_launch` and `sample_vehicle_launch` packages,D_kwDOAnasMc4ASKL_,2023-01-16T03:11:16Z,VRichardJP,1,Answered,DC_kwDOAnasMc4AR56K,VRichardJP,"I find it works rather nicely to have sensing/localization/perception modules parameters tied to the sensor kit, and the planning and control parameters tied to the vehicle package. But as I pointed out it does not work in all cases (e.g. does not take into account the environment), so it would be nice to be able to be as flexible as needed.

I said it is ""hard"" to maintain many `autoware_launch_*`, but it is more that it is annoying to have to backport changes from the original `autoware_launch` launch files to every single `autoware_launch_*` package. At the end of the day, the `autoware_launch` launch files are flexible enough (or can be made flexible enough) so that the same launch files are used for all the vehicles. It makes little sense to duplicate the same files over and over. Only module parameters could differ.

As I think about it, maybe the best solution would be to keep default params in `autoware_launch`, but modify the launch files so that the default parameters could be overridden. For instance, let's say I want to modify only the `resolution` parameter in `ndt_scan_matcher.param.yaml` used in `localization.launch.xml`. By default, the module would load the default parameters (from `autoware_launch/config/localization/ndt_scan_matcher.param.yaml`). Then the module would user specific parameters, from some `individual_parameters` like package. In that case, there would be no need to duplicate anything (neither launch nor param files). However, I am not sure parameter override is a thing in ROS2.
"
Move launch parameters from `autoware_launch` to `sample_sensor_kit_launch` and `sample_vehicle_launch` packages,D_kwDOAnasMc4ASKL_,2023-01-16T03:11:16Z,VRichardJP,1,Answered,DC_kwDOAnasMc4AR58Q,kminoda,"Let me introduce two terms
- Launch parameter (e.g. `autoware_launch/config/localization/ndt_scan_matcher.param.yaml`)
  - A parameter file that may be customized depending on the users or vehicles 
- Node parameter (e.g. `autoware.universe/localization/ndt_scan_matcher/config/ndt_scan_matcher.param.yaml`)
  - A default parameter file

Note that the launch parameter set is a subset of the node parameter set.

A parameter file of a package is added to launch parameter if one of the contributors (e.g. TIER IV) are customizing depending on their vehicle designs. If a parameter on a package can be used universally for all the vehicles, then Autoware will just load the corresponding node parameter. So I guess your proposal is already (partially) addressed in the current configuration. Maybe the problem lies on the fact that the launch parameter set may differ depending on the companies or groups.

( cc: @kenji-miyake @takayuki5168 )"
2023-01-24 ODD working group weekly meeting (126),D_kwDOAnasMc4ASKTQ,2023-01-16T07:54:32Z,Igata-ctrl,0,Unanswered,,,
Avoid stopping vehicle in front of speed bump,D_kwDOAnasMc4ASKmN,2023-01-16T15:32:38Z,lchojnack,1,Answered,,,
Avoid stopping vehicle in front of speed bump,D_kwDOAnasMc4ASKmN,2023-01-16T15:32:38Z,lchojnack,1,Answered,DC_kwDOAnasMc4AR7Qh,kosuke55,"The following came to mind quickly.
- use other ground segmentation algorithms or change the parameters
  - https://autowarefoundation.github.io/autoware.universe/main/perception/ground_segmentation/ 
- improve ground segmentation algorithms
- use vector_map_inside_area_filter
  - https://autowarefoundation.github.io/autoware.universe/main/sensing/pointcloud_preprocessor/docs/vector-map-inside-area-filter/
  - need to support speed_bump tag or create overlapped no_obstacle_segmentation_area
- use crop_box_filter 
  - https://autowarefoundation.github.io/autoware.universe/main/sensing/pointcloud_preprocessor/docs/crop-box-filter/
  - need to convert to 3d bbox
- use compare_map_segmentation
  - https://autowarefoundation.github.io/autoware.universe/main/perception/compare_map_segmentation/
  - the docs is only for elevation_map but we also have a node that compares with pcd map."
Autoware.Universe integrated with CARLA but planning stack stalls,D_kwDOAnasMc4ASKs4,2023-01-16T18:03:17Z,adnanhaf,2,Answered,,,
Autoware.Universe integrated with CARLA but planning stack stalls,D_kwDOAnasMc4ASKs4,2023-01-16T18:03:17Z,adnanhaf,2,Answered,DC_kwDOAnasMc4ASVLG,yukkysaito,"The gif image is stopped in my environment.
Could you please check video again?"
Autoware.Universe integrated with CARLA but planning stack stalls,D_kwDOAnasMc4ASKs4,2023-01-16T18:03:17Z,adnanhaf,2,Answered,DC_kwDOAnasMc4ASg74,lsteinosk,You may need set the `check_external_emergency_heartbeat` parameter used by [vehicle_cmd_gate](https://github.com/autowarefoundation/autoware.universe/tree/galactic/control/vehicle_cmd_gate) to false. This defaults to true from the launch tier4_control_launch setup https://github.com/autowarefoundation/autoware.universe/blob/galactic/launch/tier4_control_launch/launch/control.launch.py#L379
Switch Operation Mode: From Remote to Local,D_kwDOAnasMc4ASKuL,2023-01-16T18:45:09Z,marcusvinicius178,1,Answered,,,
Switch Operation Mode: From Remote to Local,D_kwDOAnasMc4ASKuL,2023-01-16T18:45:09Z,marcusvinicius178,1,Answered,DC_kwDOAnasMc4AR7vO,isamu-takagi,"It seems that the version of AutowareStatePanel is old. The latest looks like this.
![AutowareStatePanel](https://user-images.githubusercontent.com/43976882/212761845-8d5d15ae-7944-4fab-9f82-cd444f2fbc78.png)

Try to call [/api/operation_mode/change_to_local](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/list/api/operation_mode/change_to_local/) API.
```bash
ros2 service call /api/operation_mode/change_to_local autoware_adapi_v1_msgs/srv/ChangeOperationMode 
```

If you are using a version without AD API, change the mode of external_cmd_selector directly with the following command.
```bash
ros2 service call /control/external_cmd_selector/select_external_command tier4_control_msgs/srv/ExternalCommandSelect ""{mode: {data: 1}}""
```
"
Switch Operation Mode: From Remote to Local,D_kwDOAnasMc4ASKuL,2023-01-16T18:45:09Z,marcusvinicius178,1,Answered,DC_kwDOAnasMc4AR9x7,marcusvinicius178,"Hi @isamu-takagi thanks for the reply I was able to change the mode to local:

![image](https://user-images.githubusercontent.com/43826438/212973500-b1808dd5-1b0d-418b-9d33-273b82ccee5a.png)

Afterwards I have launched the node again:

`ros2 launch joy_controller joy_controller.launch.xml
`

Then I have pushed the buttons from DS4, but the car didn't move and I've echoed the topics and nothing is being published.

![image](https://user-images.githubusercontent.com/43826438/212974344-00fec610-6fca-4388-8f4e-91b5937cfb2b.png)

I have also tried to publish messages in the topic, and then the process dies:

![image](https://user-images.githubusercontent.com/43826438/212976197-5f292003-9c1c-41a9-936d-8a6c15813ed9.png)



Some idea why the car on rviz/Carla is not receiving the control cmds?




Thanks in advance"
Switch Operation Mode: From Remote to Local,D_kwDOAnasMc4ASKuL,2023-01-16T18:45:09Z,marcusvinicius178,1,Answered,DC_kwDOAnasMc4AR-Q4,marcusvinicius178,"I am having this message on terminal:

""Waiting for emergency_stop service connection""

That I am aware it comes from this [snnipet of code](https://github.com/autowarefoundation/autoware.universe/blob/0ca53ae4c6c2e667a9d0dd30dcd7f808b1895c49/control/joy_controller/src/joy_controller/joy_controller_node.cpp#L502-L512)

I tired to clear the emergency stop service issuing:

`ros2 service call /system/clear_emergency std_srvs/srv/Trigger`

However I was unable to send joystick (DS4) commands to Autoware

![image](https://user-images.githubusercontent.com/43826438/213022477-f82530d2-59d9-49b8-96a7-4263ed086e8a.png)

What should I do to enable Autoware receive these commands? The topic is still empty:

![image](https://user-images.githubusercontent.com/43826438/213022627-1349153a-a634-45b0-883d-3d5b9d61f017.png)

Do I need to call some specific service from the listed below? If yes, Which value must I feed this topic? Can you write the example please?

![image](https://user-images.githubusercontent.com/43826438/213023289-6a6298ce-6361-44f9-9968-827a0e458890.png)

Thanks for some assistance

I tried to call some services to disable ""emergency_stop service message"", however without success, 

![image](https://user-images.githubusercontent.com/43826438/213024509-ea316014-d0fa-477a-9bda-21fa43c0a345.png)

Calling the service below, the request was accepted, but the joy_controller node keeps sending the ""wating for emergency_stop service"" connection...

![image](https://user-images.githubusercontent.com/43826438/213025607-c4e86194-da06-4473-b47d-fca5a1e57232.png)

Calling this service I have the output below:

![image](https://user-images.githubusercontent.com/43826438/213026111-cf6bee6d-fa8e-409b-a8e9-5f9e454b10f9.png)
"
Switch Operation Mode: From Remote to Local,D_kwDOAnasMc4ASKuL,2023-01-16T18:45:09Z,marcusvinicius178,1,Answered,DC_kwDOAnasMc4AR-m2,isamu-takagi,The `/joy` topic is output when the controller is connected. The [driver](https://github.com/ros-drivers/joystick_drivers/tree/ros2) may not recognize the device.
Switch Operation Mode: From Remote to Local,D_kwDOAnasMc4ASKuL,2023-01-16T18:45:09Z,marcusvinicius178,1,Answered,DC_kwDOAnasMc4AR-n6,isamu-takagi,">I am having this message on terminal:
""Waiting for emergency_stop service connection""

I've tried and found that this service can be use after the pose initialization.
The `service/emergency_stop` is actually named `/api/autoware/set/emergency`. You can see this in the launch file.

```xml
<remap from=""service/emergency_stop"" to=""/api/autoware/set/emergency""/>
```"
Switch Operation Mode: From Remote to Local,D_kwDOAnasMc4ASKuL,2023-01-16T18:45:09Z,marcusvinicius178,1,Answered,DC_kwDOAnasMc4AR_r_,marcusvinicius178,"> The `/joy` topic is output when the controller is connected. The [driver](https://github.com/ros-drivers/joystick_drivers/tree/ros2) may not recognize the device.

Hi @isamu-takagi I have clone the joystick drivers you sent me the link in autoware-universer source folder, however it is not building/compiling. The steps I have done are below:

Create a workspace for the joystick drivers pkg:

```
 cd hatem-repos/carla-autoware-universe/src
 mkdir ros_drivers_ws
 cd ros_drivers_ws
```

Clone the drivers pkg

 `git clone https://github.com/ros-drivers/joystick_drivers.git`

Build the joystick_drivers package

 ```
cd ../..
 colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release
```

My output on terminal:

![image](https://user-images.githubusercontent.com/43826438/213179127-7f840832-6e46-4f62-af32-23ba32c68f0f.png)"
Switch Operation Mode: From Remote to Local,D_kwDOAnasMc4ASKuL,2023-01-16T18:45:09Z,marcusvinicius178,1,Answered,DC_kwDOAnasMc4AR_uu,marcusvinicius178,"> > I am having this message on terminal:
> > ""Waiting for emergency_stop service connection""
> 
> I've tried and found that this service can be use after the pose initialization. The `service/emergency_stop` is actually named `/api/autoware/set/emergency`. You can see this in the launch file.
> 
> ```
> <remap from=""service/emergency_stop"" to=""/api/autoware/set/emergency""/>
> ```

Ok but I have already initialized the pose (using the **Set 2D pose** icon on Rviz) 

![image](https://user-images.githubusercontent.com/43826438/213181997-9b7b60c7-3f2a-4052-8cca-1783d0b2e60b.png)

Then I have requested the **service ""Set Emergency** to disable it (in the renamed topic as you informed me):

`ros2 service call /api/autoware/set/emergency tier4_external_api_msgs/srv/SetEmergency ""{emergency: False}""
`

I got the following output:

![image](https://user-images.githubusercontent.com/43826438/213182394-02b63bad-a8a1-4bc0-ba21-69bc55903a85.png)


Finally I have launched the joystick_controller node:

`ros2 launch joy_controller joy_controller.launch.xml 
`

I have tried two kind of controllers which I have. I will share my output with them

**Playstation 3 Controller:**

![image](https://user-images.githubusercontent.com/43826438/213183473-09bcdd0b-2361-48db-9293-898444801546.png)


**Playstation 4 (DS4) Controller**:

![image](https://user-images.githubusercontent.com/43826438/213183654-203ef98f-6769-4c1f-8a74-b4a91d03a2bb.png)


I have pushed all the jostick buttons, but nothing happened...

As I said I was not able to build the **drivers** pkg you sent me. Is this the issue?

What is strange is that the **joy controller** pkg works well on my NUC with both controllers I have:


![WhatsApp Image 2023-01-17 at 16 38 15](https://user-images.githubusercontent.com/43826438/213184035-ec7d1a46-bed4-4d9b-a381-3ab6afc56b50.jpeg)

What is the issue do you guess and how to fix it?

Thanks in advance



"
Switch Operation Mode: From Remote to Local,D_kwDOAnasMc4ASKuL,2023-01-16T18:45:09Z,marcusvinicius178,1,Answered,DC_kwDOAnasMc4AR_vG,isamu-takagi,The drivers is installed in `/opt/ros/humble/lib/joy` so no need to clone and build. It means to check if the controller is recognized by the OS and joy_node.
Switch Operation Mode: From Remote to Local,D_kwDOAnasMc4ASKuL,2023-01-16T18:45:09Z,marcusvinicius178,1,Answered,DC_kwDOAnasMc4AR_wb,marcusvinicius178,"Well I am using other distro (Galactic)

![image](https://user-images.githubusercontent.com/43826438/213186153-e99928cc-0cf4-42a6-bdf4-b80722b6069d.png)


Maybe is this the issue. As you can see in my previous answer (maybe you didn't check because I posted simultaneously to yours, and can be ""hidden"" because I put 2 replies), the joy_node worked and my joysticks were recognized. They didn't work using **joy_controller** package from Autoware, but the ""standard one"" of ROS distro worked (not with the car/autoware) but for other robots' simulation...

 "
Switch Operation Mode: From Remote to Local,D_kwDOAnasMc4ASKuL,2023-01-16T18:45:09Z,marcusvinicius178,1,Answered,DC_kwDOAnasMc4AR_wc,isamu-takagi,The Playstation 3 Controller seems to work fine and /joy topic is published. The problem is that there are only 6 axes. The joy_controller node in DS4 mode needs [8 axes](https://github.com/autowarefoundation/autoware.universe/blob/main/control/joy_controller/include/joy_controller/joy_converter/ds4_joy_converter.hpp#L68-L75).
Switch Operation Mode: From Remote to Local,D_kwDOAnasMc4ASKuL,2023-01-16T18:45:09Z,marcusvinicius178,1,Answered,DC_kwDOAnasMc4AR_wx,marcusvinicius178,oh that's bad I've Understood. So what should I try? what do you recommend now?
use my own rosbag and logging_simulator.launch to test perception moudle failure,D_kwDOAnasMc4ASKyj,2023-01-16T21:06:57Z,wangxianggang1997,1,Answered,,,
use my own rosbag and logging_simulator.launch to test perception moudle failure,D_kwDOAnasMc4ASKyj,2023-01-16T21:06:57Z,wangxianggang1997,1,Answered,DC_kwDOAnasMc4AS5bh,rsasaki0109,"Are there any tf topics in the rosbag? That can be a bad thing, you might want to play only the topics you need in the topics option."
Related to mpt road clearance parameters,D_kwDOAnasMc4ASK29,2023-01-16T23:47:20Z,mehmetdogru,2,Answered,,,
Related to mpt road clearance parameters,D_kwDOAnasMc4ASK29,2023-01-16T23:47:20Z,mehmetdogru,2,Answered,DC_kwDOAnasMc4AR8d2,mitsudome-r,There seems to be some other parameters that might affect `soft_clearance_from_road`. It might help TIER IV engineers to answer your questions if you can provide values for the parameters listed [here](https://github.com/autowarefoundation/autoware.universe/tree/2eafda6d4af8bd5c044d94cef68781fafe34968d/planning/obstacle_avoidance_planner#other-options). (posting your yaml file would be even better.)
Related to mpt road clearance parameters,D_kwDOAnasMc4ASK29,2023-01-16T23:47:20Z,mehmetdogru,2,Answered,DC_kwDOAnasMc4AR87c,mehmetdogru,"I actually use the default parameters for `obstacle_avoidance_planner`, so **no changes/customization/tuning here**:

```yaml
/**:
  ros__parameters:
    option:
      # publish
      is_publishing_debug_visualization_marker: true
      is_publishing_clearance_map: false # publish clearance map as nav_msgs::OccupancyGrid
      is_publishing_object_clearance_map: false # publish clearance map as nav_msgs::OccupancyGrid
      is_publishing_area_with_objects: false # publish occupancy map as nav_msgs::OccupancyGrid

      is_stopping_if_outside_drivable_area: true # stop if the ego's footprint will be outside the drivable area

      # show
      is_showing_debug_info: false
      is_showing_calculation_time: false

      # other
      enable_avoidance: false # enable avoidance function
      enable_pre_smoothing: true # enable EB
      skip_optimization: false # skip MPT and EB
      reset_prev_optimization: false

    common:
      # sampling
      num_sampling_points: 100 # number of optimizing points

      # trajectory total/fixing length
      trajectory_length: 300.0 # total trajectory length[m]

      forward_fixing_min_distance: 1.0 # number of fixing points around ego vehicle [m]
      forward_fixing_min_time: 0.5 # forward fixing time with current velocity [s]

      backward_fixing_distance: 5.0 # backward fixing length from base_link [m]
      delta_arc_length_for_trajectory: 0.1 # delta arc length for trajectory [m]

      delta_dist_threshold_for_closest_point: 3.0 # delta dist thres for closest point [m]
      delta_yaw_threshold_for_closest_point: 1.046 #M_PI/3.0, delta yaw thres for closest point
      delta_yaw_threshold_for_straight: 0.02 # delta dist thres for straight point

      num_fix_points_for_extending: 50 # number of fixing points when extending
      max_dist_for_extending_end_point: 0.0001 # minimum delta dist thres for extending last point [m]

      enable_clipping_fixed_traj: false
      non_fixed_trajectory_length: 5.0 # length of the trajectory merging optimized mpt trajectory to original(not optimized) trajectory

    object:  # avoiding object
      max_avoiding_objects_velocity_ms: 0.5 # maximum velocity for avoiding objects [m/s]
      max_avoiding_ego_velocity_ms: 6.0 # maximum ego velocity when avoiding objects [m/s]

      avoiding_object_type:
        unknown: true
        car: true
        truck: true
        bus: true
        bicycle: true
        motorbike: true
        pedestrian: true
        animal: true

    # mpt param
    mpt:
      option:
        steer_limit_constraint: true
        fix_points_around_ego: true
        plan_from_ego: true
        max_plan_from_ego_length: 10.0
        visualize_sampling_num: 1
        enable_manual_warm_start: true
        enable_warm_start: true # false
        is_fixed_point_single: false

      common:
        num_curvature_sampling_points: 5 # number of sampling points when calculating curvature
        delta_arc_length_for_mpt_points: 0.5 # delta arc length when generating mpt [m]

      # kinematics:
        # If this parameter is commented out, the parameter is set as below by default.
        # The logic could be `optimization_center_offset = vehicle_info.wheel_base * 0.8`
        # The 0.8 scale is adopted as it performed the best.
        # optimization_center_offset: 2.3 # optimization center offset from base link

    # replanning & trimming trajectory param outside algorithm
    replan:
      max_path_shape_change_dist: 0.3 # threshold of path shape change from behavior path [m]
      max_ego_moving_dist_for_replan: 3.0 # threshold of ego's moving distance for replan [m]
      max_delta_time_sec_for_replan: 1.0 # threshold of delta time for replan [second]

    # advanced parameters to improve performance as much as possible
    advanced:
      eb:
        common:
          num_joint_buffer_points: 3 # number of joint buffer points
          num_offset_for_begin_idx: 2 # number of shifting points for beginning non-fix idx
          delta_arc_length_for_eb: 0.6 # 1.0 # delta arc length when optimizing[m] When the value is around 1.0, overshoot at the corner happens.
          num_sampling_points_for_eb: 95 # number of optimizing points # must be longer than mpt points

        clearance:
          clearance_for_straight_line: 0.05 # minimum optimizing range around straight points
          clearance_for_joint: 0.1 # minimum optimizing range around joint points
          clearance_for_only_smoothing: 0.1 # minimum optimizing range when applying only smoothing

        qp:
          max_iteration: 10000 # max iteration when solving QP
          eps_abs: 1.0e-8 # eps abs when solving OSQP
          eps_rel: 1.0e-10 # eps rel when solving OSQP

      mpt:
        bounds_search_widths: [0.45, 0.15, 0.05, 0.01]

        clearance:  # clearance(distance) between vehicle and roads/objects when generating trajectory
          hard_clearance_from_road: 0.0 # clearance from road boundary[m]
          soft_clearance_from_road: 0.1 # clearance from road boundary[m]
          soft_second_clearance_from_road: 1.0 # clearance from road boundary[m]
          clearance_from_object: 1.0 # clearance from object[m]
          extra_desired_clearance_from_road: 0.0 # extra desired clearance from road

        weight:
          soft_avoidance_weight: 1000.0 # slack weight for lateral error around the middle point
          soft_second_avoidance_weight: 100.0 # slack weight for lateral error around the middle point

          lat_error_weight: 100.0 # weight for lateral error
          yaw_error_weight: 0.0 # weight for yaw error
          yaw_error_rate_weight: 0.0 # weight for yaw error rate
          steer_input_weight: 10.0 # weight for steering input
          steer_rate_weight: 10.0 # weight for steering rate

          obstacle_avoid_lat_error_weight: 3.0 # weight for lateral error
          obstacle_avoid_yaw_error_weight: 0.0 # weight for yaw error
          obstacle_avoid_steer_input_weight: 1000.0 # weight for yaw error
          near_objects_length: 30.0 # weight for yaw error

          terminal_lat_error_weight: 100.0 # weight for lateral error at terminal point
          terminal_yaw_error_weight: 100.0 # weight for yaw error at terminal point
          terminal_path_lat_error_weight: 1000.0 # weight for lateral error at path end point
          terminal_path_yaw_error_weight: 1000.0 # weight for yaw error at path end point

        # check if planned trajectory is outside drivable area
        collision_free_constraints:
          option:
            l_inf_norm: true
            soft_constraint: true
            hard_constraint: false
            # two_step_soft_constraint: false

          vehicle_circles:
            method: ""rear_drive""

            uniform_circle:
              num: 3
              radius_ratio: 0.8

            rear_drive:
              num_for_calculation: 3
              front_radius_ratio: 1.0
              rear_radius_ratio: 1.0

            bicycle_model:
              num_for_calculation: 3
              front_radius_ratio: 1.0
              rear_radius_ratio: 1.0
```
---

Actually only thing I change is expansion of drivable_area parameters:

```yaml
/**:
  ros__parameters:
    avoidance:
      drivable_area_right_bound_offset: 0.0
      drivable_area_left_bound_offset: 0.0
      drivable_area_types_to_skip: [road_border]
    lane_change:
      drivable_area_right_bound_offset: 0.0
      drivable_area_left_bound_offset: 0.0
      drivable_area_types_to_skip: [road_border]
    lane_following:
      drivable_area_right_bound_offset: 2.8
      drivable_area_left_bound_offset: 2.8
      drivable_area_types_to_skip: [road_border]
    pull_out:
      drivable_area_right_bound_offset: 0.0
      drivable_area_left_bound_offset: 0.0
      drivable_area_types_to_skip: [road_border]
    pull_over:
      drivable_area_right_bound_offset: 0.0
      drivable_area_left_bound_offset: 0.0
      drivable_area_types_to_skip: [road_border]
    side_shift:
      drivable_area_right_bound_offset: 0.0
      drivable_area_left_bound_offset: 0.0
      drivable_area_types_to_skip: [road_border]

```


"
Related to mpt road clearance parameters,D_kwDOAnasMc4ASK29,2023-01-16T23:47:20Z,mehmetdogru,2,Answered,DC_kwDOAnasMc4ASqhk,takayuki5168,"@mehmetdogru Sorry to be late. When do you want this problem solved?
The refactored obstacle_avoidance_planner will be merged in a few weeks, and with this refactored one, the problem was solved, if you can wait for a while.
https://github.com/autowarefoundation/autoware.universe/pull/2796"
Related to mpt road clearance parameters,D_kwDOAnasMc4ASK29,2023-01-16T23:47:20Z,mehmetdogru,2,Answered,DC_kwDOAnasMc4ASVMn,yukkysaito,@takayuki5168 can you answer?
Maybe unnecessary avoidance module parameters?,D_kwDOAnasMc4ASK56,2023-01-17T01:10:15Z,mehmetdogru,1,Answered,,,
Maybe unnecessary avoidance module parameters?,D_kwDOAnasMc4ASK56,2023-01-17T01:10:15Z,mehmetdogru,1,Answered,DC_kwDOAnasMc4AR8cV,satoshi-ota,"@mehmetdogru Thanks for your comment.
As you said, the params are no longer needed, and we can remove that. (Maybe I or someone else forgot to erase it.)"
Maybe unnecessary avoidance module parameters?,D_kwDOAnasMc4ASK56,2023-01-17T01:10:15Z,mehmetdogru,1,Answered,DC_kwDOAnasMc4AR8ca,mehmetdogru,Thank you for the answer :pray: I will create a PR regarding this.
Autonomy Software WG Meeting 2023/01/24,D_kwDOAnasMc4ASLN_,2023-01-17T11:18:37Z,BonoloAWF,2,Answered,,,
Autonomy Software WG Meeting 2023/01/24,D_kwDOAnasMc4ASLN_,2023-01-17T11:18:37Z,BonoloAWF,2,Answered,DC_kwDOAnasMc4ASLvT,xmfcx,"## Bus ODD [Jan-Feb Milestone](https://github.com/autowarefoundation/autoware.universe/milestone/9)

- https://github.com/autowarefoundation/autoware.universe/pull/2609 (draft)
- https://github.com/autowarefoundation/autoware.universe/issues/2213
  - https://github.com/autowarefoundation/autoware.universe/pull/2296
    - waiting to be tested on itri simulation
- https://github.com/autowarefoundation/autoware.universe/issues/1543
  - being discussed in https://github.com/autowarefoundation/autoware.universe/pull/2454
- https://github.com/autowarefoundation/autoware.universe/issues/2125
  - no updates
- https://github.com/autowarefoundation/autoware.universe/issues/2390
  - waiting @xmfcx to create docs for this
- https://github.com/autowarefoundation/autoware.universe/issues/2222
  - https://github.com/autowarefoundation/autoware.universe/pull/2290 (draft)
- https://github.com/autowarefoundation/autoware.universe/issues/1253
  - @mitsudome-r working on https://github.com/autowarefoundation/autoware-documentation/pull/278
- https://github.com/autowarefoundation/autoware.universe/issues/563
  - https://github.com/autowarefoundation/autoware-documentation/pull/180
    - @mitsudome-r could you approve please? (it's been 1 month lol)
- https://github.com/autowarefoundation/autoware.universe/issues/2354
  - https://github.com/autowarefoundation/autoware.universe/pull/2424
  - @VRichardJP asks ""Should I wait for the goal modification at runtime feature to be available or should I have a head start on this?""
- https://github.com/autowarefoundation/autoware.universe/issues/2663 (open issue)
- https://github.com/autowarefoundation/autoware.universe/issues/2664 (open issue)
- https://github.com/autowarefoundation/autoware.universe/issues/2665 (open issue)
- https://github.com/autowarefoundation/autoware.universe/issues/2686
  - https://github.com/autowarefoundation/autoware.universe/pull/2687
    - waiting for review from @kosuke55 and @takayuki5168 
- https://github.com/autowarefoundation/autoware.universe/pull/2687
- https://github.com/autowarefoundation/autoware.universe/issues/2688
  - https://github.com/autowarefoundation/autoware.universe/pull/2689
    - waiting for review from @kosuke55 and @takayuki5168 
- https://github.com/autowarefoundation/autoware.universe/issues/2690
  - https://github.com/autowarefoundation/autoware.universe/pull/2691
    - waiting for review from @kosuke55 and @takayuki5168 
- https://github.com/autowarefoundation/autoware.universe/pull/2709
  - needs rebase, waiting for review
- https://github.com/autowarefoundation/autoware.universe/pull/2712
  - merged now
- https://github.com/autowarefoundation/autoware.universe/pull/2528 (draft)


## Bus ODD [high priority issues/PRs](https://github.com/autowarefoundation/autoware.universe/issues?q=is%3Aopen+label%3A%22high+priority%22+-milestone%3A%22Bus+ODD+Jan-Feb+Milestone%22+)

- https://github.com/autowarefoundation/autoware.universe/issues/2597
  - waiting for response from @mikechan0731

## PRs [waiting for review](https://github.com/autowarefoundation/autoware.universe/pulls?q=is%3Apr+is%3Aopen+draft%3Afalse+-milestone%3A%22Bus+ODD+Jan-Feb+Milestone%22+-label%3A%22high+priority%22+review%3Arequired)
- https://github.com/autowarefoundation/autoware.universe/pull/2670
- 

## Autoware.Universe reported [bugs](https://github.com/autowarefoundation/autoware.universe/issues?q=is%3Aopen+is%3Aissue+label%3Abug+-label%3A%22high+priority%22+-milestone%3A%22Bus+ODD+Jan-Feb+Milestone%22+)

- https://github.com/autowarefoundation/autoware.universe/issues/2661
  - discuss on meeting if it's resolved
- https://github.com/autowarefoundation/autoware.universe/issues/2684 (being discussed)
- https://github.com/autowarefoundation/autoware.universe/issues/2706
  - https://github.com/autowarefoundation/autoware.universe/pull/2718 (waiting for review)
- https://github.com/autowarefoundation/autoware.universe/issues/2649 (open issue)"
Autonomy Software WG Meeting 2023/01/24,D_kwDOAnasMc4ASLN_,2023-01-17T11:18:37Z,BonoloAWF,2,Answered,DC_kwDOAnasMc4ASL4f,MertClk,Leo Drive Weekly Update: [Presentation](https://docs.google.com/presentation/d/1rhDFuIqf1sdWDq93biH5rLnypWH_x9IbS0u-mFKTUfQ/edit?usp=sharing)
Coding guideline : When dealing with large data in the output of a function should it be return value or argument with reference?,D_kwDOAnasMc4ASLbY,2023-01-17T16:09:33Z,yukkysaito,4,Answered,,,
Coding guideline : When dealing with large data in the output of a function should it be return value or argument with reference?,D_kwDOAnasMc4ASLbY,2023-01-17T16:09:33Z,yukkysaito,4,Answered,DC_kwDOAnasMc4ASBTY,kenji-miyake,"@yukkysaito Thank you for creating this discussion thread!
I believe this kind of topic is good to be discussed with measurement data. As we investigated this before, I'll share the results.

First, there are several cases that `NRVO` isn't used:
- The return value is unnecessarily wrapped by `std::move()`.
  - This can be detected by the compiler.
- There are multiple `return` statements.

However, even if `NRVO` isn't used, `move` is usually used before `copy`: https://wandbox.org/permlink/H9yFMi7vVLy1bZQf

Also, the performance of `move` is not so bad (`shared_ptr` has a worse performance than I thought): https://quick-bench.com/q/BoCkza8cUfj2Z0esLbJAfdjQGIc
![BoCkza8cUfj2Z0esLbJAfdjQGIc](https://user-images.githubusercontent.com/31987104/213353484-f67ea23e-eb7e-4d98-a315-a829872af360.png)

FYI, with Clang, even `copy` is optimized and `move` is a little faster than `reference`: https://quick-bench.com/q/haJwVQgTB1BHQT5gFoHodfcAoqI)
![haJwVQgTB1BHQT5gFoHodfcAoqI](https://user-images.githubusercontent.com/31987104/213353452-a2835a8c-4bbe-4c36-a2c5-b7a951b6d28e.png)

Based on these results, I recommend using `return values` as recommended in the [C++ Core Guidelines](https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#f20-for-out-output-values-prefer-return-values-to-output-parameters).

Please let me know if there are any mistakes in my investigation methods or results."
Coding guideline : When dealing with large data in the output of a function should it be return value or argument with reference?,D_kwDOAnasMc4ASLbY,2023-01-17T16:09:33Z,yukkysaito,4,Answered,DC_kwDOAnasMc4ASHwh,yukkysaito,"Thank you for comment.
I think these results will be good for the conclusion. 👍 "
Coding guideline : When dealing with large data in the output of a function should it be return value or argument with reference?,D_kwDOAnasMc4ASLbY,2023-01-17T16:09:33Z,yukkysaito,4,Answered,DC_kwDOAnasMc4ASBTv,kenji-miyake,"> Major codes use argument with reference.

Regarding this part, I think it's not fair to only reference the projects mainly written before C++11. They may have guidelines that differ from modern standards."
Coding guideline : When dealing with large data in the output of a function should it be return value or argument with reference?,D_kwDOAnasMc4ASLbY,2023-01-17T16:09:33Z,yukkysaito,4,Answered,DC_kwDOAnasMc4ASBWQ,TakaHoribe,"I have doubts about the potential drawbacks of using return-value. No negative behavior was found in either [the report from @kenji-miyake](https://github.com/orgs/autowarefoundation/discussions/3209#discussioncomment-4723928) or [my investigation](https://github.com/autowarefoundation/autoware.universe/pull/1947#discussion_r1072298578).  (It is known the NRVO is not guaranteed, but the compiler will optimize it anyway, and maybe it calls `move` in that case.)

Additionally, there are some popular guidelines suggesting the use of return-value.
- [C++ Core Guidelines](https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#f20-for-out-output-values-prefer-return-values-to-output-parameters)
- [Google's C++ Style Guide](https://google.github.io/styleguide/cppguide.html#Inputs_and_Outputs)

Unless evidence of a significant problem arises, there seems to be no benefit in deviating from these guidelines and using a different approach.

Note: of cause, there are cases where using reference value is preferred, for example, modifying a few fields in a large object. However, it can not be a reason to prohibit using return-value in all situations. It totally depends on each implementation. "
Coding guideline : When dealing with large data in the output of a function should it be return value or argument with reference?,D_kwDOAnasMc4ASLbY,2023-01-17T16:09:33Z,yukkysaito,4,Answered,DC_kwDOAnasMc4ASHwx,yukkysaito,"In conclusion,  even if the data is large, I would go in the direction of using return values.
Ref : https://github.com/orgs/autowarefoundation/discussions/3209#discussioncomment-4723928
@xmfcx @mitsudome-r Any comments?

cc @sykwer @veqcc @isamu-takagi "
Coding guideline : When dealing with large data in the output of a function should it be return value or argument with reference?,D_kwDOAnasMc4ASLbY,2023-01-17T16:09:33Z,yukkysaito,4,Answered,DC_kwDOAnasMc4ASIDW,xmfcx,"Yeah, I generally go with simple return statements and hope RVO does its job.

Another discussion point could be to talk about handling multiple return values:
- return tuple
- return struct
- return with editing passed references

But I think I'm ok with leaving this to developers to decide."
Error in installing catkin,D_kwDOAnasMc4ASL63,2023-01-18T07:32:24Z,patelabhay-12,1,Answered,,,
Error in installing catkin,D_kwDOAnasMc4ASL63,2023-01-18T07:32:24Z,patelabhay-12,1,Answered,DC_kwDOAnasMc4AR_E9,kenji-miyake,"As it's not an Autoware-related question, I recommend you ask the question on [ROS Answers](http://answers.ros.org/)."
Logging simulator not showing surrounding enviroment updates with Rosbag replay using docker,D_kwDOAnasMc4ASbvB,2023-01-18T07:38:03Z,ahmeddesokyebrahim,1,Answered,,,
Logging simulator not showing surrounding enviroment updates with Rosbag replay using docker,D_kwDOAnasMc4ASbvB,2023-01-18T07:38:03Z,ahmeddesokyebrahim,1,Answered,DC_kwDOAnasMc4ASrSV,ahmeddesokyebrahim,"A video recording : 
https://drive.google.com/file/d/1X2j62EoJqa6QUSsS_RhdnkX3dBkuUscc/view?usp=sharing"
2023-01-18 Simulation Working group Meeting,D_kwDOAnasMc4ASMA2,2023-01-18T09:48:33Z,WJaworskiRobotec,0,Unanswered,,,
Mapping WG Meeting 18/01/2023,D_kwDOAnasMc4ASMBJ,2023-01-18T09:54:24Z,armaganarsln,0,Unanswered,,,
Comparing LiDAR Based SLAM Trajectory Error with GPS/INS Trajectory Error,D_kwDOAnasMc4ASMBt,2023-01-18T10:03:41Z,yvzksgl,1,Answered,,,
Comparing LiDAR Based SLAM Trajectory Error with GPS/INS Trajectory Error,D_kwDOAnasMc4ASMBt,2023-01-18T10:03:41Z,yvzksgl,1,Answered,DC_kwDOAnasMc4AR_Y8,n-patiphon,"Hi, a member of the Mapping WG just evaluated various open-source SLAM algorithms (many of which require only LiDAR) and published the results [here](https://autowarefoundation.github.io/autoware-documentation/main/how-to-guides/creating-maps-for-autoware/open-source-slam/).

The document might be related to this discussion. 😀"
Comparing LiDAR Based SLAM Trajectory Error with GPS/INS Trajectory Error,D_kwDOAnasMc4ASMBt,2023-01-18T10:03:41Z,yvzksgl,1,Answered,DC_kwDOAnasMc4AR_d6,yvzksgl,"Hi, thanks for your contrubition i was already checking there for selecting SLAM algorithm. 😀"
Comparing LiDAR Based SLAM Trajectory Error with GPS/INS Trajectory Error,D_kwDOAnasMc4ASMBt,2023-01-18T10:03:41Z,yvzksgl,1,Answered,DC_kwDOAnasMc4ASadA,n-patiphon,"Also, about the third point on calcuating the trajectory error, MAP IV has open-sourced a simple Python script to calculate and plot error between two or more trajectories (stored in CSV files or ROSBAGs).

This is the [repo](https://github.com/MapIV/localization_evaluation_toolkit), in case you are interested."
Comparing LiDAR Based SLAM Trajectory Error with GPS/INS Trajectory Error,D_kwDOAnasMc4ASMBt,2023-01-18T10:03:41Z,yvzksgl,1,Answered,DC_kwDOAnasMc4ASguq,yvzksgl,In my case ground truth is stored in .csv and .txt files and the trajectory to be compared is a rosbag record. Converting rosbag to .csv file should not be challenging but I am trying to keep it integrated with ROS. Also I was planning to calculate and publish the trajectory error of the SLAM algorithm instantly and publish the overall error at the end of the rosbag record. I would be greatful if there is a suggestion. Thank you.  
Comparing LiDAR Based SLAM Trajectory Error with GPS/INS Trajectory Error,D_kwDOAnasMc4ASMBt,2023-01-18T10:03:41Z,yvzksgl,1,Answered,DC_kwDOAnasMc4ASh03,n-patiphon,"As you said, converting a ROSBAG file to a CSV file would be one way to do it. 

Alternatively, you could convert the ground truth from CSV to ROSBAG (either `geometry_msgs/msg/PoseWithCovarianceStamped` or `nav_msgs/msg/Odometry`) instead. Since [localization_evaluation_toolkit](https://github.com/MapIV/localization_evaluation_toolkit) supports comparing trajectories stored in ROSBAGs, you can directly use it that way. 

You could also [create an issue](https://github.com/MapIV/localization_evaluation_toolkit/issues/new) in the repo regarding this functionality. It might be added in the future.
"
Open AD Kit WG meeting 2023/1/18,D_kwDOAnasMc4ASMOn,2023-01-18T15:05:43Z,armaganarsln,0,Unanswered,,,
colcon build failure 'simulator_compatibility_test' package,D_kwDOAnasMc4ASMs0,2023-01-19T06:19:11Z,leeseho,3,Answered,,,
colcon build failure 'simulator_compatibility_test' package,D_kwDOAnasMc4ASMs0,2023-01-19T06:19:11Z,leeseho,3,Answered,DC_kwDOAnasMc4ASDxR,lhakim85,"Happen to me also on ubuntu20 and galactic.
What I do is downgrade the setuptools-66.0.0 to setuptools-45.2.0.

Can you check which version setuptools yours"
colcon build failure 'simulator_compatibility_test' package,D_kwDOAnasMc4ASMs0,2023-01-19T06:19:11Z,leeseho,3,Answered,DC_kwDOAnasMc4ASNG1,leeseho,Thanks. It works for me !
colcon build failure 'simulator_compatibility_test' package,D_kwDOAnasMc4ASMs0,2023-01-19T06:19:11Z,leeseho,3,Answered,DC_kwDOAnasMc4ASD6J,HansRobo,"This is because the breaking change on `setuptools` version 66.0.0.
https://github.com/pypa/setuptools/issues/3772

Temporary, as already mentioned by @lhakim85, downgrading `setuptools` is a reasonable choice.
But, in long term perspective, it is not good to use `setuptools`, which is deprecated way to resolve pyhton module versions, in Autoware."
colcon build failure 'simulator_compatibility_test' package,D_kwDOAnasMc4ASMs0,2023-01-19T06:19:11Z,leeseho,3,Answered,DC_kwDOAnasMc4ASNG4,leeseho,Thank you for giving some advices!
colcon build failure 'simulator_compatibility_test' package,D_kwDOAnasMc4ASMs0,2023-01-19T06:19:11Z,leeseho,3,Answered,DC_kwDOAnasMc4AS1iq,AviBen96,"Hello ! I am having the same issue, I downgraded setuptools and still facing this... Any tip ?"
colcon build failure 'simulator_compatibility_test' package,D_kwDOAnasMc4ASMs0,2023-01-19T06:19:11Z,leeseho,3,Answered,DC_kwDOAnasMc4AS5U0,leeseho,"I uninstalled setuptools (pip3 uninstall setuptools) and reinstalled it (pip3 install setuptools==47.3.1).
What version have is installed?"
colcon build failure 'simulator_compatibility_test' package,D_kwDOAnasMc4ASMs0,2023-01-19T06:19:11Z,leeseho,3,Answered,DC_kwDOAnasMc4AS5zI,AviBen96,"Thank you for your answer ! I actually realised that my conda env was messing paths to pip installations. When I deactivate it, all ran smoothly :)"
Autoware on multiple pcs,D_kwDOAnasMc4ASMzq,2023-01-19T09:36:24Z,xmfcx,1,Answered,,,
Autoware on multiple pcs,D_kwDOAnasMc4ASMzq,2023-01-19T09:36:24Z,xmfcx,1,Answered,DC_kwDOAnasMc4ASB9_,takam5f2,"@xmfcx  
> Does anyone have any experience running different parts of Autoware on different machines connected to the same local network?
Yes, I have experienced to connect Autoware and camera-based object detection module via Ethernet.

The following file is a sample of CycloneDDS configuration file.  You are able to apply it with `export RMW_IMPLEMENTATION=rmw_cyclonedds_cpp` and `export CYCLONEDDS_URI=file://absolute/path/to/cyclonedds.xml` after creating the XML file.
Please access [CyclonDDS pages](https://github.com/eclipse-cyclonedds/cyclonedds) for further details. 

```xml
<?xml version=""1.0"" encoding=""UTF-8"" ?>
<CycloneDDS xmlns=""https://cdds.io/config"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xsi:schemaLocation=""https://cdds.io/config https://raw.githubusercontent.com/eclipse-cyclonedds/cyclonedds/master/etc/cyclonedds.xsd"">
    <Domain Id=""any"">
        <General>
            <Interfaces>
                <!-- Set your IP addresses via which the host communicate -->
                <NetworkInterface address=""192.168.1.10"" priority=""default"" multicast=""default"" />
            </Interfaces>
            <AllowMulticast>spdp</AllowMulticast>
            <MaxMessageSize>65500B</MaxMessageSize>
        </General>
        <Internal>
            <SocketReceiveBufferSize min=""10MB""/>
        </Internal>
        <!--Tracing>
            <Verbosity>config</Verbosity>
        </Tracing-->
    </Domain>
</CycloneDDS>
```

If you connect multiple network, add other `NetworkInterface` with `address` and appropriate `priority`.

2. More important is setting Kernel parameter for socket buffer and IP fragmentation
Do not forget setting `ROS_DOMAIN_ID` also.

```bash
sudo sysctl -w net.core.rmem_max=2147483647
sudo sysctl net.ipv4.ipfrag_time=3
sudo sysctl net.ipv4.ipfrag_high_thresh=134217728     # (128 MB)
export ROS_DOMAIN_ID=10 # choose the common value on the same network
```

I cannot answer how to configure time synchronization. @drwnz or @manato may answer it."
Moving Point Cloud map to web.auto format (MGRS),D_kwDOAnasMc4ASORb,2023-01-20T11:15:37Z,meliketanrikulu,2,Answered,,,
Moving Point Cloud map to web.auto format (MGRS),D_kwDOAnasMc4ASORb,2023-01-20T11:15:37Z,meliketanrikulu,2,Answered,DC_kwDOAnasMc4ASmzZ,rsasaki0109,"I think this would be helpful.
https://github.com/autowarefoundation/autoware/discussions/3248#discussioncomment-4877506"
Moving Point Cloud map to web.auto format (MGRS),D_kwDOAnasMc4ASORb,2023-01-20T11:15:37Z,meliketanrikulu,2,Answered,DC_kwDOAnasMc4AUWab,meliketanrikulu,"> I think this would be helpful. [#3248 (comment)](https://github.com/orgs/autowarefoundation/discussions/3248#discussioncomment-4877506)

Hello @rsasaki0109 .Can I convert pcd from UTM to MGRS in cloud compare. I looked in the Cloud Compare manual but didn't see it. Thank you"
Moving Point Cloud map to web.auto format (MGRS),D_kwDOAnasMc4ASORb,2023-01-20T11:15:37Z,meliketanrikulu,2,Answered,DC_kwDOAnasMc4AUYIk,rsasaki0109,"In cloud compare, it was assumed that the coordinates of the point cloud would be moved manually. (i.e., absolute coordinates would lose their accuracy).

I don't know of any tool that converts point cloud maps from utm to mgrs.
It may have to be implemented.
"
Moving Point Cloud map to web.auto format (MGRS),D_kwDOAnasMc4ASORb,2023-01-20T11:15:37Z,meliketanrikulu,2,Answered,DC_kwDOAnasMc4AUYOd,meliketanrikulu,"> In cloud compare, it was assumed that the coordinates of the point cloud would be moved manually. (i.e., absolute coordinates would lose their accuracy).
> 
> I don't know of any tool that converts point cloud maps from utm to mgrs.
> 

Okey i understand now. Thank you :)"
Moving Point Cloud map to web.auto format (MGRS),D_kwDOAnasMc4ASORb,2023-01-20T11:15:37Z,meliketanrikulu,2,Answered,DC_kwDOAnasMc4AUYYZ,mitsudome-r,"Do you know the lat/lon of current origin of your pcd map? If you do, you can get the coordinates of the origin in MGRS and transform your origin using that value. "
Moving Point Cloud map to web.auto format (MGRS),D_kwDOAnasMc4ASORb,2023-01-20T11:15:37Z,meliketanrikulu,2,Answered,DC_kwDOAnasMc4AUwxB,meliketanrikulu,I converted using geographiclib. Here is the my package. [pc_utm_to_mgrs_converter](https://github.com/leo-drive/pc_utm_to_mgrs_converter)
Retraining the traffic_light_classifier,D_kwDOAnasMc4ASPBu,2023-01-21T15:01:55Z,xmfcx,4,Answered,,,
Retraining the traffic_light_classifier,D_kwDOAnasMc4ASPBu,2023-01-21T15:01:55Z,xmfcx,4,Answered,DC_kwDOAnasMc4ASJ71,xmfcx,"This is the closest update I could find: 
- https://github.com/autowarefoundation/autoware.universe/issues/1087
- https://github.com/autowarefoundation/autoware.universe/pull/2464

But it doesn't say what was used for training. Or what method to follow for re-training.

@wep21 @yukkysaito @yukke42 @Mingyu1991 @miursh "
Retraining the traffic_light_classifier,D_kwDOAnasMc4ASPBu,2023-01-21T15:01:55Z,xmfcx,4,Answered,DC_kwDOAnasMc4ASKVA,kaancolak," I followed these steps and deploy a re-trained model into the tl_classifier. It looks working.

1. Changed output size of the default model in PyTorch model zoo, and trained it with the custom dataset
2. Export the ONNX model using torch ONNX export
3. Make the input, and output of TensorRT and ONNX compatible, change normalization params

 But my mind was confused at some points. When I look into the architecture of mobilenetV2 ONNX models with [netron.app](https://netron.app/ ); the re-trained model and default model provided by Autoware a little bit different. I'm not so familiar with MobileNetV2. 

In this image, the left image was trained with mobilenetv2, and the right one was the default model in Autoware.Universe:

![Screenshot from 2023-01-24 00-25-40](https://user-images.githubusercontent.com/12658936/214153726-280eb320-997a-4252-b31f-5da275d557dc.png)







 "
Retraining the traffic_light_classifier,D_kwDOAnasMc4ASPBu,2023-01-21T15:01:55Z,xmfcx,4,Answered,DC_kwDOAnasMc4ASU4l,yukkysaito,"For various reasons, the process of developing this one is complicated and has not been sorted out even within the company.
The base model may have been taken from the one provided by chainer-cv or tensor flow.
ref : https://github.com/taichiH/tf_to_trt_image_classification/tree/mobilenetv2_sample
ref : https://github.com/chainer/chainercv

We will discuss this internally on Monday and get back to you.
https://github.com/orgs/autowarefoundation/discussions/3218#discussioncomment-4804079"
Retraining the traffic_light_classifier,D_kwDOAnasMc4ASPBu,2023-01-21T15:01:55Z,xmfcx,4,Answered,DC_kwDOAnasMc4ASXrg,yukkysaito,A temporary learning environment will be created and shared by @miursh by the end of tomorrow.
Retraining the traffic_light_classifier,D_kwDOAnasMc4ASPBu,2023-01-21T15:01:55Z,xmfcx,4,Answered,DC_kwDOAnasMc4ASZ4r,miursh,I have shared a training script to @xmfcx and @kaancolak.
Retraining the traffic_light_classifier,D_kwDOAnasMc4ASPBu,2023-01-21T15:01:55Z,xmfcx,4,Answered,DC_kwDOAnasMc4ASORc,miursh,"@xmfcx @kaancolak 
This is our own implementation.
The training repository has not been updated and is being migrated to a new one.
Please let us discuss what to share with you."
Retraining the traffic_light_classifier,D_kwDOAnasMc4ASPBu,2023-01-21T15:01:55Z,xmfcx,4,Answered,DC_kwDOAnasMc4ASOeo,xmfcx,"I think @kaancolak has managed to train a MobileNetV2 with a different architecture. But we would like to see how the model you trained could be replicated

Even a rough outdated repository would be enough. We don't have enough time to wait for the updated version in Bus ODD time line."
Retraining the traffic_light_classifier,D_kwDOAnasMc4ASPBu,2023-01-21T15:01:55Z,xmfcx,4,Answered,DC_kwDOAnasMc4ASOgN,xmfcx,@miursh If possible we wantnto fine tune the current model. So if you also could share the .pth file so we can fine tune the model on your checkpoint too (if you have trained it on Pytorch)
Retraining the traffic_light_classifier,D_kwDOAnasMc4ASPBu,2023-01-21T15:01:55Z,xmfcx,4,Answered,DC_kwDOAnasMc4ASSB7,miursh,"@xmfcx 
Let me and my team think about sharing current ones for a moment. 
I’ll get back to you as soon as we can."
Retraining the traffic_light_classifier,D_kwDOAnasMc4ASPBu,2023-01-21T15:01:55Z,xmfcx,4,Answered,DC_kwDOAnasMc4ASU3v,yukkysaito,@xmfcx Please wait while we discuss whether we can manage to give it to you on Monday.
Retraining the traffic_light_classifier,D_kwDOAnasMc4ASPBu,2023-01-21T15:01:55Z,xmfcx,4,Answered,DC_kwDOAnasMc4ATA27,sezan92,"hey, i am not sure if this issue is solved. can i start working on it? "
Retraining the traffic_light_classifier,D_kwDOAnasMc4ASPBu,2023-01-21T15:01:55Z,xmfcx,4,Answered,DC_kwDOAnasMc4ATDTl,kaancolak,"Hi @sezan92 , thanks, this issue is solved. "
Get the header of extracted topic from a ros2 bag,D_kwDOAnasMc4ASPRR,2023-01-22T03:49:15Z,marcusvinicius178,1,Answered,,,
Get the header of extracted topic from a ros2 bag,D_kwDOAnasMc4ASPRR,2023-01-22T03:49:15Z,marcusvinicius178,1,Answered,DC_kwDOAnasMc4ASHJq,kosuke55,"Hi, I did not check the detail of the command, but if you make a python script, you can get the header like
https://gist.github.com/kosuke55/3d23165bbc88893eb749074db264911b#file-hz_visualizer-py-L79
note that `msg[0]` is the stamp when the msg was recorded and `msg[1].header` is the raw stamp."
Queries on Route Scenarios,D_kwDOAnasMc4ASQPu,2023-01-23T16:51:30Z,saicsk-deloitte,2,Answered,,,
Queries on Route Scenarios,D_kwDOAnasMc4ASQPu,2023-01-23T16:51:30Z,saicsk-deloitte,2,Answered,DC_kwDOAnasMc4ASOoD,mitsudome-r,"I'm not sure what you mean by ""Route Scenarios"". Could you share the link to the reference material that mentions route scenarios? (e.g., link to source code / issue / documentation)"
Queries on Route Scenarios,D_kwDOAnasMc4ASQPu,2023-01-23T16:51:30Z,saicsk-deloitte,2,Answered,DC_kwDOAnasMc4ASSXs,saicsk-deloitte,"""Route scenarios"" are leaderboard (or also called Routes)
https://leaderboard.carla.org/
https://github.com/carla-simulator/scenario_runner/blob/master/srunner/scenarios/route_scenario.py"
Queries on Route Scenarios,D_kwDOAnasMc4ASQPu,2023-01-23T16:51:30Z,saicsk-deloitte,2,Answered,DC_kwDOAnasMc4ATBPm,mitsudome-r,"Sorry for the late reply.
If you have question about Route Scenarios defiend by CARLA, you should ask them to CARLA community. 
We are not the ones who designed the leaderboard."
How to work localization system?,D_kwDOAnasMc4ASQay,2023-01-23T21:36:31Z,gurselturkeri,1,Answered,,,
How to work localization system?,D_kwDOAnasMc4ASQay,2023-01-23T21:36:31Z,gurselturkeri,1,Answered,DC_kwDOAnasMc4ASKYI,kaancolak,"The long version of ""EKF localizer"" abbreviation ""Extended Kalman Filter Localizer"".  ""NDT Scan Matching"" and ""Gyro Odometry"" packages provide input to EKF. 

In a brief,

**EKF** estimates the position of the vehicle given the measurements over time.

 These measurements come from;

**NDT Scan Matching** matches instant point cloud and Point Cloud Map using normal distribution and provides vehicle position on the Map. 

**Gyro odometer** estimates twist by combining imu and vehicle speed.

You can check the node diagram for the overall workflow : [node diagram ](https://app.diagrams.net/?lightbox=1#Uhttps%3A%2F%2Fautowarefoundation.github.io%2Fautoware-documentation%2Fmain%2Fdesign%2Fautoware-architecture%2Fnode-diagram%2Foverall-node-diagram-autoware-universe.drawio.svg)


"
Changing a message type in Autoware - ObjectClassification,D_kwDOAnasMc4ASQul,2023-01-24T09:50:45Z,pradhanshrijal,3,Answered,,,
Changing a message type in Autoware - ObjectClassification,D_kwDOAnasMc4ASQul,2023-01-24T09:50:45Z,pradhanshrijal,3,Answered,DC_kwDOAnasMc4ASLfp,kosuke55,It might be helpful if you could share how to set the label and which node publishes it as `UNKNOWN`. Some part of the node that handles labels in hard code might convert the new label to `UNKNOWN`.
Changing a message type in Autoware - ObjectClassification,D_kwDOAnasMc4ASQul,2023-01-24T09:50:45Z,pradhanshrijal,3,Answered,DC_kwDOAnasMc4ASN8a,pradhanshrijal,"I am just publishing the message from a custom node, to set the label I use the format as such:

`classification.label = autoware_auto_perception_msgs::msg::ObjectClassification::CARGO;`

Where `CARGO` is the new label that I added. The build is successful and this method has no errors, but when the said topic is actually published, the new labels are converted to `UNKNOWN`. The other variables are sent and published correctly.

Custom Classification Message with type `CARGO` added:
```
module autoware_auto_perception_msgs {
  module msg {
    module ObjectClassification_Constants {
      const uint8 UNKNOWN = 0;
      const uint8 CAR = 1;
      const uint8 TRUCK = 2;
      const uint8 BUS = 3;
      const uint8 TRAILER = 4;
      const uint8 MOTORCYCLE = 5;
      const uint8 BICYCLE = 6;
      const uint8 PEDESTRIAN = 7;
      const uint8 CARGO=8;
    };

    struct ObjectClassification {
      @verbatim (language=""comment"", text=
        "" Valid values for the label field are provided in""
        "" ObjectClassification_Constants."")
      uint8 label;

      @range (min=0.0, max=1.0)
      float probability;
    };
  };
};
```"
Changing a message type in Autoware - ObjectClassification,D_kwDOAnasMc4ASQul,2023-01-24T09:50:45Z,pradhanshrijal,3,Answered,DC_kwDOAnasMc4ASOnR,mitsudome-r,">  when the said topic is actually published, the new labels are converted to UNKNOWN

What do you mean by this exactly? Are you saying that when you run `ros2 topic echo` on the topic published from your custom node has value `0` in label field? "
Changing a message type in Autoware - ObjectClassification,D_kwDOAnasMc4ASQul,2023-01-24T09:50:45Z,pradhanshrijal,3,Answered,DC_kwDOAnasMc4ASOsI,pradhanshrijal,"Sorry for the confusion.

Yes, when I run `ros2 topic echo` the topic published as the value `0` in the label field."
Changing a message type in Autoware - ObjectClassification,D_kwDOAnasMc4ASQul,2023-01-24T09:50:45Z,pradhanshrijal,3,Answered,DC_kwDOAnasMc4ASVKh,yukkysaito,"Try a clean build once. It may be failing to reference the new message type, which is 0 because CARGO is not defined."
Autonomy Software WG Meeting 2023/01/31,D_kwDOAnasMc4ASRE3,2023-01-24T17:28:27Z,BonoloAWF,0,Unanswered,,,
Open AD Kit WG meeting 2023/1/25,D_kwDOAnasMc4ASRxH,2023-01-25T13:38:41Z,HamburgDave,0,Unanswered,,,
Planning based on traffic sign,D_kwDOAnasMc4ASRyx,2023-01-25T14:14:44Z,gurselturkeri,1,Answered,,,
Planning based on traffic sign,D_kwDOAnasMc4ASRyx,2023-01-25T14:14:44Z,gurselturkeri,1,Answered,DC_kwDOAnasMc4ASVK4,yukkysaito,"Dynamic routing will be supported in the future. We are also considering a function to distribute routes from cloud server.
https://github.com/orgs/autowarefoundation/discussions/2983

To this end, we are currently working to define an API for dynamically changing goals and routes from cloud server.
https://github.com/orgs/autowarefoundation/discussions/2464"
Planning based on traffic sign,D_kwDOAnasMc4ASRyx,2023-01-25T14:14:44Z,gurselturkeri,1,Answered,DC_kwDOAnasMc4ASW7Y,gurselturkeri,Thanks for your reply. Also can I create waypoints on the map which is arriving all goals.
Planning based on traffic sign,D_kwDOAnasMc4ASRyx,2023-01-25T14:14:44Z,gurselturkeri,1,Answered,DC_kwDOAnasMc4ASXJD,yukkysaito,"I don't understand the intent, so let me ask a question. :pray: 
What does `the map which is arriving all goals` mean?"
Planning based on traffic sign,D_kwDOAnasMc4ASRyx,2023-01-25T14:14:44Z,gurselturkeri,1,Answered,DC_kwDOAnasMc4ASXty,gurselturkeri,"> I don't understand the intent, so let me ask a question. pray What does `the map which is arriving all goals` mean?

I mean may I decide vehicle planning route? It will not planning based on traffic sign just it will pass all way which I given before then arrive goals."
[Question][help]-Display extended Kalman filter(EKF)- Delta x and Y & RMSE(Root mean Square Error values) in ROS environment.?ROS?,D_kwDOAnasMc4ASR3B,2023-01-25T15:32:51Z,anilbommareddy,1,Answered,,,
[Question][help]-Display extended Kalman filter(EKF)- Delta x and Y & RMSE(Root mean Square Error values) in ROS environment.?ROS?,D_kwDOAnasMc4ASR3B,2023-01-25T15:32:51Z,anilbommareddy,1,Answered,DC_kwDOAnasMc4ASVMY,yukkysaito,"Do you mean you want to know the RMSE of the output of the `Pose Estimator(NDT)` and `Kinematics Fusion Filter(EKF)`?
If possible, it might be better to have them illustrated."
[Question][help]-Display extended Kalman filter(EKF)- Delta x and Y & RMSE(Root mean Square Error values) in ROS environment.?ROS?,D_kwDOAnasMc4ASR3B,2023-01-25T15:32:51Z,anilbommareddy,1,Answered,DC_kwDOAnasMc4ASWWa,anilbommareddy,"Not exactly  RMSE of the output of the Pose Estimator(NDT) and Kinematics Fusion Filter(EKF).

Here I will subscribe sensor/imu data of (lidar/ radar)and on these data, used for internally functionality to   calculate Covariance Matrix(Eigen vectors) and final RMSE values +estimated position x and Y.
Here my question In **ROS environment how to display sensor/imu data of (lidar/radar) and estimated position x and Y**  i.e how to publish these data  like plot graph or gazebo simulation 
INPUT: values provided by the ros 
[""sensor_measurement_IMU_Data""] => the measurement that the simulator observed (either lidar or radar)

OUTPUT: 
[""estimate_x""] <= EKF  estimated position x
[""estimate_y""] <= EKF estimated  position y
For the reference attached snap plot graph
Red-Lidar
Blue-Radar
Green-EKF estimated postion.
![Screenshot from 2023-01-29 19-59-29](https://user-images.githubusercontent.com/49799705/215335003-af7dda8d-a0e7-49ac-887b-824a17de446f.png)
"
[Question][help]-Display extended Kalman filter(EKF)- Delta x and Y & RMSE(Root mean Square Error values) in ROS environment.?ROS?,D_kwDOAnasMc4ASR3B,2023-01-25T15:32:51Z,anilbommareddy,1,Answered,DC_kwDOAnasMc4ASWaF,yukkysaito,"I don't understand much yet. Sorry.
Are you talking about ego-localization? Is it object recognition in perception component?"
[Question][help]-Display extended Kalman filter(EKF)- Delta x and Y & RMSE(Root mean Square Error values) in ROS environment.?ROS?,D_kwDOAnasMc4ASR3B,2023-01-25T15:32:51Z,anilbommareddy,1,Answered,DC_kwDOAnasMc4ASrtg,anilbommareddy,"@yukkysaito  Here is the sample repo for the understanding -https://github.com/cggos/lidar_radar_fusion_ekf_ukf.git
In this repo,Using EKF-output achieved  like 
the predicted state of the system by FusionEKF
(m_x, m_y) - the position value as measured by the sensor converted to cartesian coordinates
(r_x, r_y, r_vx, r_vy) - the real ground truth state of the system(RMSE-Root mean square error)
Similar i would like to check the same behaviour to in ROS environment,
(1)For ROS environment , i think need to use subscribe<sensor_msgs::Imu>(imu/data, 10,sensorCallback) for IMU data.
(2) Abstract lidar/Radar data from IMU like
L(for lidar) m_x m_y t r_x r_y r_vx r_vy
R(for radar) m_rho m_phi m_drho t r_px r_py r_vx r_vy

Where:
(m_x, m_y) - measurements by the lidar
(m_rho, m_phi, m_drho) - measurements by the radar in polar coordinates
(t) - timestamp in unix/epoch time the measurements were taken
(r_x, r_y, r_vx, r_vy) - the real ground truth state of the system
(3) Display the output like estimation and ground truth  in ROS as shown in github linkl."
Containers and Autoware,D_kwDOAnasMc4ASR6B,2023-01-25T16:31:28Z,pukachupenn,1,Answered,,,
Containers and Autoware,D_kwDOAnasMc4ASR6B,2023-01-25T16:31:28Z,pukachupenn,1,Answered,DC_kwDOAnasMc4ASQsG,doganulus,"Indispensable is modularization and having well-defined modules in Autoware (in any complex system indeed). Among other things, I like the idea of splitting Autoware into containers because it would also enforce strict modularization, which is a good thing for system design and safety. But rightfully, @pukachupenn brings up performance and optimization concerns for this idea. Supporting zero-copy among containers may not be feasible currently. 

Yet I would love to see well-defined Autoware components (`perception`, `planning`, `control`, etc.) as if they were to be split into separate containers. One way to achieve this without dedicating ourselves to the idea of multiple containers might be to split build and installation scripts for each component. Then one could make one container or multiple containers out of them easily and actually test both approaches and the granularity in various settings. Thus delaying the original discussion until we have more information on runtime performance implications.

Question:
Do you see any drawback in splitting build and installation scripts for each Autoware component? 
"
Containers and Autoware,D_kwDOAnasMc4ASR6B,2023-01-25T16:31:28Z,pukachupenn,1,Answered,DC_kwDOAnasMc4ASQvb,esteve,"> Question: Do you see any drawback in splitting build and installation scripts for each Autoware component?

This can be easily done by creating metapackages for each component/module that depend on the individual packages, this wouldn't require a priori any extra scripts. In practice, they'd be empty packages that have a package.xml file that point to all its dependencies. So in order to build a component we'd only need to do `colcon build --packages-up-to COMPONENT-METAPACKAGE`"
Containers and Autoware,D_kwDOAnasMc4ASR6B,2023-01-25T16:31:28Z,pukachupenn,1,Answered,DC_kwDOAnasMc4ASQ-m,doganulus,"Thank you, Esteve. Do you know also a way to install runtime dependencies only from ROS packages? "
Containers and Autoware,D_kwDOAnasMc4ASR6B,2023-01-25T16:31:28Z,pukachupenn,1,Answered,DC_kwDOAnasMc4ASQ_9,esteve,"If a package is not part of the rosdistro index, you'd need to write what's called a ""vendor"" package (see https://github.com/ros2/libyaml_vendor/ for an example)

Unfortunately, this is one of many of `rosdep`'s shortcomings, a better solution in my opinion would be to integrate [conan](https://conan.io/ with ROS and get rid of `rosdep`, or add it as a backend for rosdep (see https://discourse.ros.org/t/ros-2-conan-integration/20846?u=esteve for a discussion about  it), but for now `rosdep` is all we have."
Containers and Autoware,D_kwDOAnasMc4ASR6B,2023-01-25T16:31:28Z,pukachupenn,1,Answered,DC_kwDOAnasMc4ASRMk,doganulus,"I have said build and installation scripts above but actually, a single Ansible playbook for each component is what we need. The playbook to install dependencies and call the build tool for the configuration given... Maybe no need for meta-packages as well if dependencies are manually managed in the playbook. I think Ansible-first installation has certain benefits including remote deployment of Autoware."
Containers and Autoware,D_kwDOAnasMc4ASR6B,2023-01-25T16:31:28Z,pukachupenn,1,Answered,DC_kwDOAnasMc4ASRWO,pukachupenn," I am not intimately familiar with each Autoware ROS node, but my guess is that the communications between some nodes would be more verbose and heavier weight than some others. Identifying them first may be a key to decide what could be split across containers without large perf impact vs what would be better off left together."
"is there any way to create map beside  lidarslam_ros2 I tried it I get colcon build error and I couldn't find solution,do anyone know the solution?",D_kwDOAnasMc4ASR9d,2023-01-25T17:26:41Z,Hensbag,2,Answered,,,
"is there any way to create map beside  lidarslam_ros2 I tried it I get colcon build error and I couldn't find solution,do anyone know the solution?",D_kwDOAnasMc4ASR9d,2023-01-25T17:26:41Z,Hensbag,2,Answered,DC_kwDOAnasMc4ASQRM,mitsudome-r,"You can check this page for open source algorithms:
https://autowarefoundation.github.io/autoware-documentation/main/how-to-guides/creating-maps-for-autoware/open-source-slam/"
"is there any way to create map beside  lidarslam_ros2 I tried it I get colcon build error and I couldn't find solution,do anyone know the solution?",D_kwDOAnasMc4ASR9d,2023-01-25T17:26:41Z,Hensbag,2,Answered,DC_kwDOAnasMc4ASTxa,rsasaki0109,"Please submit issues regarding lidarslam_ros2 here
https://github.com/rsasaki0109/lidarslam_ros2/issues"
Is it advised to install dependencies using Ansible? Or should it be done independently?,D_kwDOAnasMc4ASSpy,2023-01-26T15:14:06Z,mshah72,2,Answered,,,
Is it advised to install dependencies using Ansible? Or should it be done independently?,D_kwDOAnasMc4ASSpy,2023-01-26T15:14:06Z,mshah72,2,Answered,DC_kwDOAnasMc4ASRH4,kenji-miyake,"@mshah72 Hi. I personally recommend using Ansible because it's easier and you can be sure whether the required conditions are set up.
However, some developers, especially those who are familiar with setting up the development environment, prefer manual installation because Ansible might break your previous setup."
Is it advised to install dependencies using Ansible? Or should it be done independently?,D_kwDOAnasMc4ASSpy,2023-01-26T15:14:06Z,mshah72,2,Answered,DC_kwDOAnasMc4ASRH8,kosuke55,"The setup documentation is [here](https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/source-installation/)
`./setup-dev-env.sh` will install all dependencies
However, depending on the software already installed, some parts may fail (especially cuda-related)
If the above does not work and you only want to use planning, it is also a good idea to leave that package and msg and just run `rosdep install -y --from-paths src --ignore-src --rosdistro $ROS_DISTRO`.  This command will install the dependencies listed in package.xml."
Set vehicle velocity and acceleration via ros publisher,D_kwDOAnasMc4ASTj4,2023-01-27T17:45:59Z,AndriiChumak145,1,Answered,,,
Set vehicle velocity and acceleration via ros publisher,D_kwDOAnasMc4ASTj4,2023-01-27T17:45:59Z,AndriiChumak145,1,Answered,DC_kwDOAnasMc4ASVMC,yukkysaito,"Do you mean you want manual control about velocity?

If so, please refer to [this page](https://github.com/autowarefoundation/autoware.universe/tree/main/common/tier4_control_rviz_plugin).


![image](https://user-images.githubusercontent.com/8327598/215285103-86adf8b2-d0ce-4007-83a8-337139f24098.png)
![image](https://user-images.githubusercontent.com/8327598/215285110-54e4b5da-d78e-44dd-8366-73aa057f3c18.png)
"
Set vehicle velocity and acceleration via ros publisher,D_kwDOAnasMc4ASTj4,2023-01-27T17:45:59Z,AndriiChumak145,1,Answered,DC_kwDOAnasMc4ASeiA,AndriiChumak145,Thank you for the answer. I tried to use it and it looks like if I set the velocity of the vehicle manually then it needs some time to accelerate. My problem is that I am trying to simulate scenarios where the vehicle starts planning already in movement at a given speed and acceleration. Is there an option to set the velocity immediately without waiting for the car to accelerate?
Set vehicle velocity and acceleration via ros publisher,D_kwDOAnasMc4ASTj4,2023-01-27T17:45:59Z,AndriiChumak145,1,Answered,DC_kwDOAnasMc4AStwm,mitsudome-r,"It seems like simple_planning_simulator is listening to intialtwist topic. Maybe you can publish the geometry_msgs/msg/TwistStamped msg to the topic and see if you can set the initial velocity.
If you are running the simulator according to the [documentation](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/) the topic is `/simulation/input/initialtwist`"
Vehicle front width,D_kwDOAnasMc4ASUDK,2023-01-28T15:54:13Z,YusufDALAK,1,Answered,,,
Vehicle front width,D_kwDOAnasMc4ASUDK,2023-01-28T15:54:13Z,YusufDALAK,1,Answered,DC_kwDOAnasMc4ASVKO,yukkysaito,"
The vehicle information is described [here](https://github.com/autowarefoundation/sample_vehicle_launch/blob/main/sample_vehicle_description/config/vehicle_info.param.yaml) and each module uses these values.

Please try to modify these value.

Also, the meaning of each value is described [here](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/components/vehicle-dimensions/).
"
Vehicle front width,D_kwDOAnasMc4ASUDK,2023-01-28T15:54:13Z,YusufDALAK,1,Answered,DC_kwDOAnasMc4ASV8g,YusufDALAK,"> The vehicle information is described [here](https://github.com/autowarefoundation/sample_vehicle_launch/blob/main/sample_vehicle_description/config/vehicle_info.param.yaml) and each module uses these values.
> 
> Please try to modify these value.
> 
> Also, the meaning of each value is described [here](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/components/vehicle-dimensions/).

I have edited `sample_vehicle_launch/sample_vehicle_description/config/vehicle_info.param.yaml` file but I could not see any changes on vehicle dimension. What should I do? Also I have .STL extension vehcile I converted to .dae but I can not add in planning sim `https://autowarefoundation.github.io/autoware-documentation/main/how-to-guides/integrating-autoware-with-your-vehicle/` this documentation not explanatory. Thank you"
Vehicle front width,D_kwDOAnasMc4ASUDK,2023-01-28T15:54:13Z,YusufDALAK,1,Answered,DC_kwDOAnasMc4ASWS7,yukkysaito,"The visualized stl model and the vehicle width used inside autoware are different.
Changing the stl model only changes the visualization.

If you want to visualize vehicle width used inside autoware with rviz, you can check the following topic.
```
/planning/scenario_planning/lane_driving/motion_planning/obstacle_stop_planner/debug/marker
```
![image](https://user-images.githubusercontent.com/8327598/215334196-e99b87e5-becb-434a-ae43-4f58207d58d0.png)
The green polygon represents the size of the vehicle moving in one step.
If you change the vehicle width, the width of this polygon should change."
Vehicle front width,D_kwDOAnasMc4ASUDK,2023-01-28T15:54:13Z,YusufDALAK,1,Answered,DC_kwDOAnasMc4ASXGE,YusufDALAK,"> The visualized stl model and the vehicle width used inside autoware are different. Changing the stl model only changes the visualization.
> 
> If you want to visualize vehicle width used inside autoware with rviz, you can check the following topic.
> 
> ```
> /planning/scenario_planning/lane_driving/motion_planning/obstacle_stop_planner/debug/marker
> ```
> 
> ![image](https://user-images.githubusercontent.com/8327598/215334196-e99b87e5-becb-434a-ae43-4f58207d58d0.png) The green polygon represents the size of the vehicle moving in one step. If you change the vehicle width, the width of this polygon should change.

Thank you very much for your reply. Solved."
Vehicle front width,D_kwDOAnasMc4ASUDK,2023-01-28T15:54:13Z,YusufDALAK,1,Answered,DC_kwDOAnasMc4ASXI6,yukkysaito,Good :+1: 
[Question] Autoware with AWSIM tutorial's is happen two errors.,D_kwDOAnasMc4ASUQR,2023-01-29T01:54:37Z,nitro6206,3,Answered,,,
[Question] Autoware with AWSIM tutorial's is happen two errors.,D_kwDOAnasMc4ASUQR,2023-01-29T01:54:37Z,nitro6206,3,Answered,DC_kwDOAnasMc4ASVm-,shmpwk,"@nitro6206 

> Is it a problem that should be ignored in the first place?

Yes it is ignorable but should disappear when 'map' and 'base_link' are connected.
However, when it does not disappear, something is wrong with it. 
I have no idea what the problem is at the moment, so
- could you share your environment information: Ubuntu, ROS2 and AWSIM version?
- could you try [planning simulation](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/) and [rosbag replay simulation](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/rosbag-replay-simulation/) to confirm if Autoware itself can work as we expected?"
[Question] Autoware with AWSIM tutorial's is happen two errors.,D_kwDOAnasMc4ASUQR,2023-01-29T01:54:37Z,nitro6206,3,Answered,DC_kwDOAnasMc4ASVqZ,nitro6206,"Thank you for reply.
My environment is ...
・ubuntu 22.04
・ROS2: humble
・AWSIM ver 1.1.0
I'm sorry, but I'm an amateur and I don't know what else to tell you.

plannning simulation and rosbag replay simulation is success. 
I didn't get any TF errors.
From this, it can be inferred that it was an error on the map side of AWSIM.
Thank you."
[Question] Autoware with AWSIM tutorial's is happen two errors.,D_kwDOAnasMc4ASUQR,2023-01-29T01:54:37Z,nitro6206,3,Answered,DC_kwDOAnasMc4ASVqn,shmpwk,"@nitro6206  

> My environment is ...
・ubuntu 22.04
・ROS2: humble
・AWSIM ver 1.1.0

> plannning simulation and rosbag replay simulation is success.
I didn't get any TF errors.


Thank you for your clarification and it has no problem.

Could you try the following pattern?
- launch AWSIM -> (wait 10 seconds) -> launch Autoware
- launch Autoware -> (wait 10 seconds) -> launch AWSIM

I heard the simulation is so heavy that sometimes it fails to launch it."
[Question] Autoware with AWSIM tutorial's is happen two errors.,D_kwDOAnasMc4ASUQR,2023-01-29T01:54:37Z,nitro6206,3,Answered,DC_kwDOAnasMc4ASVvl,nitro6206,"Thank you for reply.
I have tried this.
But both were useless.
"
[Question] Autoware with AWSIM tutorial's is happen two errors.,D_kwDOAnasMc4ASUQR,2023-01-29T01:54:37Z,nitro6206,3,Answered,DC_kwDOAnasMc4ASV0Y,shmpwk,"@nitro6206 
Could you share your log of Autoware from the start to repeating TF error part?"
[Question] Autoware with AWSIM tutorial's is happen two errors.,D_kwDOAnasMc4ASUQR,2023-01-29T01:54:37Z,nitro6206,3,Answered,DC_kwDOAnasMc4ASV2o,nitro6206,"Thank you for reply.
[log.txt](https://github.com/autowarefoundation/autoware/files/10529301/log.txt)

That is log text.
This error is 1480~。"
[Question] Autoware with AWSIM tutorial's is happen two errors.,D_kwDOAnasMc4ASUQR,2023-01-29T01:54:37Z,nitro6206,3,Answered,DC_kwDOAnasMc4ASWOx,shmpwk,"I searched errors and found that your CUDA environment is broken
```
$ cat ~/Downloads/log.txt |grep error
[INFO] [system_error_monitor-20]: process started with pid [173328]
[INFO] [localization_error_monitor-39]: process started with pid [173749]
[INFO] [planning_error_monitor-63]: process started with pid [174118]
[lidar_centerpoint_node-44]   what():  std::bad_alloc: cudaErrorUnknown: unknown error
[component_container_mt-52] [TRT_COMMON][WARNING]: CUDA initialization failure with error: 999. Please check your CUDA installation:  http://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html
[INFO] [localization_error_monitor-39]: process has finished cleanly [pid 173749]
[INFO] [planning_error_monitor-63]: process has finished cleanly [pid 174118]
[INFO] [system_error_monitor-20]: process has finished cleanly [pid 173328]
[planning_error_monitor-63] [INFO] [1674978885.125049370] [rclcpp]: signal_handler(signum=2)
[component_container-28]   what():  Failed to get information by topic for publishers:rcl node's context is invalid, at ./src/rcl/node.c:428: error not set
[localization_error_monitor-39] [INFO] [1674978885.130272052] [rclcpp]: signal_handler(signum=2)
[awapi_awiv_adapter-69] terminate called after throwing an instance of 'std::runtime_error'
[system_error_monitor-20] [INFO] [1674978885.149586736] [rclcpp]: signal_handler(signum=2)
[relay-73]   what():  Failed to get information by topic for publishers:rcl node's context is invalid, at ./src/rcl/node.c:428: error not set
```

```
$ cat ~/Downloads/log.txt |grep die
[ERROR] [lidar_centerpoint_node-44]: process has died [pid 173875, exit code -6, cmd '/home/labuser/autoware/install/lidar_centerpoint/lib/lidar_centerpoint/lidar_centerpoint_node --ros-args -r __node:=lidar_centerpoint -r __ns:=/perception/object_recognition/detection/centerpoint -p use_sim_time:=True -p wheel_radius:=0.383 -p wheel_width:=0.235 -p wheel_base:=2.79 -p wheel_tread:=1.64 -p front_overhang:=1.0 -p rear_overhang:=1.1 -p left_overhang:=0.128 -p right_overhang:=0.128 -p vehicle_height:=2.5 -p max_steer_angle:=0.7 --params-file /tmp/launch_params_4z0mx071 --params-file /tmp/launch_params_pj2to23s --params-file /tmp/launch_params_q1kyu_tj --params-file /tmp/launch_params_4dmua69q --params-file /tmp/launch_params_eqm1g3av --params-file /tmp/launch_params_wq24tgk5 --params-file /tmp/launch_params_rj7pjlct --params-file /tmp/launch_params_y1rwt3cn --params-file /tmp/launch_params_4r1fec0c --params-file /home/labuser/autoware/install/lidar_centerpoint/share/lidar_centerpoint/config/centerpoint_tiny.param.yaml --params-file /home/labuser/autoware/install/lidar_centerpoint/share/lidar_centerpoint/config/detection_class_remapper.param.yaml -r ~/input/pointcloud:=/sensing/lidar/concatenated/pointcloud -r ~/output/objects:=objects'].
[ERROR] [component_container_mt-52]: process has died [pid 173948, exit code -11, cmd '/opt/ros/humble/lib/rclcpp_components/component_container_mt --ros-args -r __node:=traffic_light_node_container -r __ns:=/perception/traffic_light_recognition -p use_sim_time:=True -p wheel_radius:=0.383 -p wheel_width:=0.235 -p wheel_base:=2.79 -p wheel_tread:=1.64 -p front_overhang:=1.0 -p rear_overhang:=1.1 -p left_overhang:=0.128 -p right_overhang:=0.128 -p vehicle_height:=2.5 -p max_steer_angle:=0.7'].
[ERROR] [component_container-28]: process has died [pid 173444, exit code -6, cmd '/opt/ros/humble/lib/rclcpp_components/component_container --ros-args -r __node:=velodyne_node_container -r __ns:=/sensing/lidar/right/pointcloud_preprocessor -p use_sim_time:=True -p wheel_radius:=0.383 -p wheel_width:=0.235 -p wheel_base:=2.79 -p wheel_tread:=1.64 -p front_overhang:=1.0 -p rear_overhang:=1.1 -p left_overhang:=0.128 -p right_overhang:=0.128 -p vehicle_height:=2.5 -p max_steer_angle:=0.7'].
[ERROR] [awapi_awiv_adapter-69]: process has died [pid 174228, exit code -6, cmd '/home/labuser/autoware/install/awapi_awiv_adapter/lib/awapi_awiv_adapter/awapi_awiv_adapter --ros-args -r __ns:=/awapi -p use_sim_time:=True -p wheel_radius:=0.383 -p wheel_width:=0.235 -p wheel_base:=2.79 -p wheel_tread:=1.64 -p front_overhang:=1.0 -p rear_overhang:=1.1 -p left_overhang:=0.128 -p right_overhang:=0.128 -p vehicle_height:=2.5 -p max_steer_angle:=0.7 --params-file /tmp/launch_params_ioeocnsf --params-file /tmp/launch_params_jr27kwdl --params-file /tmp/launch_params__38vbe75 --params-file /tmp/launch_params_qiu01snr --params-file /tmp/launch_params_xmh8fpb1 --params-file /tmp/launch_params_ok1b7mvl --params-file /tmp/launch_params_q1oo2fqq -r input/steer:=/vehicle/status/steering_status -r input/vehicle_cmd:=/control/command/control_cmd -r input/turn_indicators:=/vehicle/status/turn_indicators_status -r input/hazard_lights:=/vehicle/status/hazard_lights_status -r input/odometry:=/localization/kinematic_state -r input/gear:=/vehicle/status/gear_status -r input/battery:=/vehicle/status/battery_charge -r input/nav_sat:=/sensing/gnss/ublox/nav_sat_fix -r input/autoware_state:=/api/iv_msgs/autoware/state -r input/control_mode:=/vehicle/status/control_mode -r input/gate_mode:=/control/current_gate_mode -r input/mrm_state:=/system/fail_safe/mrm_state -r input/hazard_status:=/system/emergency/hazard_status -r input/stop_reason:=/planning/scenario_planning/status/stop_reasons -r input/v2x_command:=/planning/scenario_planning/status/infrastructure_commands -r input/v2x_state:=/system/v2x/virtual_traffic_light_states -r input/diagnostics:=/diagnostics_agg -r input/lane_change_available:=/planning/scenario_planning/lane_driving/lane_change_available -r input/lane_change_ready:=/planning/scenario_planning/lane_driving/lane_change_ready -r input/lane_change_candidate_path:=/planning/scenario_planning/lane_driving/lane_change_candidate_path -r input/obstacle_avoid_ready:=/planning/scenario_planning/lane_driving/obstacle_avoidance_ready -r input/obstacle_avoid_candidate_path:=/planning/scenario_planning/lane_driving/obstacle_avoidance_candidate_trajectory -r input/max_velocity:=vehicle/put/velocity -r input/current_max_velocity:=/planning/scenario_planning/current_max_velocity -r input/temporary_stop:=vehicle/put/stop -r input/autoware_trajectory:=/planning/scenario_planning/trajectory -r output/vehicle_status:=vehicle/get/status -r output/autoware_status:=autoware/get/status -r output/lane_change_status:=lane_change/get/status -r output/obstacle_avoid_status:=object_avoidance/get/status -r output/max_velocity:=/planning/scenario_planning/max_velocity_default -r output/v2x_command:=/awapi/tmp/infrastructure_commands -r output/v2x_state:=/awapi/tmp/virtual_traffic_light_states'].
[ERROR] [relay-73]: process has died [pid 174305, exit code -6, cmd '/opt/ros/humble/lib/topic_tools/relay /api/autoware/set/traffic_signals /external/traffic_light_recognition/traffic_signals --ros-args -r __node:=traffic_signals -r __ns:=/autoware_api/internal -p use_sim_time:=True -p wheel_radius:=0.383 -p wheel_width:=0.235 -p wheel_base:=2.79 -p wheel_tread:=1.64 -p front_overhang:=1.0 -p rear_overhang:=1.1 -p left_overhang:=0.128 -p right_overhang:=0.128 -p vehicle_height:=2.5 -p max_steer_angle:=0.7'].
[ERROR] [rviz2-78]: process has died [pid 174505, exit code -15, cmd '/opt/ros/humble/lib/rviz2/rviz2 -d /home/labuser/autoware/install/autoware_launch/share/autoware_launch/rviz/autoware.rviz -s /home/labuser/autoware/install/autoware_launch/share/autoware_launch/rviz/image/autoware.png --ros-args -r __node:=rviz2 -p use_sim_time:=True -p wheel_radius:=0.383 -p wheel_width:=0.235 -p wheel_base:=2.79 -p wheel_tread:=1.64 -p front_overhang:=1.0 -p rear_overhang:=1.1 -p left_overhang:=0.128 -p right_overhang:=0.128 -p vehicle_height:=2.5 -p max_steer_angle:=0.7'].
```

Could you share the results of 
```
dpkg -l |grep cuda
```
```
dpkg -l |grep nvidia
```
```
nvidia-smi
```"
[Question] Autoware with AWSIM tutorial's is happen two errors.,D_kwDOAnasMc4ASUQR,2023-01-29T01:54:37Z,nitro6206,3,Answered,DC_kwDOAnasMc4ASWPG,shmpwk,"If you have mixed version of cuda and its related library, I recommend you to remove all and install one by `./setup-dev-env.sh` as described in the tutorial."
[Question] Autoware with AWSIM tutorial's is happen two errors.,D_kwDOAnasMc4ASUQR,2023-01-29T01:54:37Z,nitro6206,3,Answered,DC_kwDOAnasMc4ASWP6,nitro6206,"Thank you for reply.
These result is ...
[grepCuda.txt](https://github.com/autowarefoundation/autoware/files/10529952/grepCuda.txt)
[grepNvidia.txt](https://github.com/autowarefoundation
[nvidiaSmi.txt](https://github.com/autowarefoundation/autoware/files/10529954/nvidiaSmi.txt)
/autoware/files/10529953/grepNvidia.txt)

But I don't see any problem with these.

so I would like to try ""./setup-dev-env.sh"" again."
[Question] Autoware with AWSIM tutorial's is happen two errors.,D_kwDOAnasMc4ASUQR,2023-01-29T01:54:37Z,nitro6206,3,Answered,DC_kwDOAnasMc4ASWQt,nitro6206,"Sorry, I wasn't sent grepNvidia.txt.
I'll resend.
[grepNvidia.txt](https://github.com/autowarefoundation/autoware/files/10529981/grepNvidia.txt)

"
[Question] Autoware with AWSIM tutorial's is happen two errors.,D_kwDOAnasMc4ASUQR,2023-01-29T01:54:37Z,nitro6206,3,Answered,DC_kwDOAnasMc4ASWRu,yukkysaito,Looks like nvidia-driver doesn't work correctly from nvidiaSmi.txt
[Question] Autoware with AWSIM tutorial's is happen two errors.,D_kwDOAnasMc4ASUQR,2023-01-29T01:54:37Z,nitro6206,3,Answered,DC_kwDOAnasMc4ASVrb,yukkysaito,"@nitro6206 
The `map` and `base_link` is not  connected.
Normally, the position estimation is automatically initialized using GNSS.
If it is not done automatically, try to initialize the position estimation manually.
https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/#2-set-an-initial-pose-for-the-ego-vehicle"
[Question] Autoware with AWSIM tutorial's is happen two errors.,D_kwDOAnasMc4ASUQR,2023-01-29T01:54:37Z,nitro6206,3,Answered,DC_kwDOAnasMc4ASVwB,nitro6206,"Thank you for reply.
I have tried this.
But it were useless.
[Screencast from 2023年01月29日 14時30分47秒.webm](https://user-images.githubusercontent.com/123562573/215307145-c87a4e47-b58e-4f82-990a-876ee41daed7.webm)

I can't set the initial pose even if I follow the instructions.

And I can do to [planning simulation](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/).
So I'm thinking that maybe there is a problem with the downloaded map."
[Question] Autoware with AWSIM tutorial's is happen two errors.,D_kwDOAnasMc4ASUQR,2023-01-29T01:54:37Z,nitro6206,3,Answered,DC_kwDOAnasMc4ASV3I,yukkysaito,"@nitro6206 The ros time under the video is not working. In other words, the topic communication itself is not working between Autoware and AWSIM.

Could you check the network settings ?
https://autowarefoundation.github.io/autoware-documentation/pr-306/support/troubleshooting/#runtime-issues

It is just being described in the [Pull request](https://github.com/autowarefoundation/autoware-documentation/pull/306). 


"
[Question] Autoware with AWSIM tutorial's is happen two errors.,D_kwDOAnasMc4ASUQR,2023-01-29T01:54:37Z,nitro6206,3,Answered,DC_kwDOAnasMc4ASV4b,nitro6206,"Thank you for reply.

That is my networking settings.

# enable programmable completion features (you don't need to enable
# this, if it's already enabled in /etc/bash.bashrc and /etc/profile
# sources /etc/bash.bashrc).
if ! shopt -oq posix; then
  if [ -f /usr/share/bash-completion/bash_completion ]; then
    . /usr/share/bash-completion/bash_completion
  elif [ -f /etc/bash_completion ]; then
    . /etc/bash_completion
  fi
fi
export CUDA_PATH=/usr/local/cuda-11.7
export LD_LIBRARY_PATH=/usr/local/cuda-11.7/lib64:${LD_LIBRARY_PATH}
export PATH=/usr/local/cuda-11.7/bin:${PATH}
export ROS_LOCALHOST_ONLY=1
export ROS_DOMAIN_ID=1
export RMW_IMPLEMENTATION=rmw_cyclonedds_cpp

if [ ! -e /tmp/cycloneDDS_configured ]; then
    sudo sysctl -w net.core.rmem_max=2147483647
    sudo ip link set lo multicast on
    touch /tmp/cycloneDDS_configured
fi

# Created by `pipx` on 2023-01-28 05:22:28
export PATH=""$PATH:/home/labuser/.local/bin""
source /opt/ros/humble/setup.bash
export PATH=""/usr/local/cuda/bin:$PATH""
export LD_LIBRARY_PATH=""/usr/local/cuda/lib64:$LD_LIBRARY_PATH""



[bashrc.txt](https://github.com/autowarefoundation/autoware/files/10529331/bashrc.txt)

And I tried ""echo $RMW_IMPREMENTATION"".
That reply is ""rmw_cyclonedds_cpp"".

 



"
[Question] Autoware with AWSIM tutorial's is happen two errors.,D_kwDOAnasMc4ASUQR,2023-01-29T01:54:37Z,nitro6206,3,Answered,DC_kwDOAnasMc4ASV4q,yukkysaito,"@nitro6206 The setting may have been overwritten by `source /opt/ros/humble/setup.bash`.
Can you try to use this [bashrc.txt](https://github.com/autowarefoundation/autoware/files/10529357/bashrc.txt)?
Then, you need to restart the terminal.

"
[Question] Autoware with AWSIM tutorial's is happen two errors.,D_kwDOAnasMc4ASUQR,2023-01-29T01:54:37Z,nitro6206,3,Answered,DC_kwDOAnasMc4ASWHl,nitro6206,"Thank you for reply.
After executing ""source ~/.bashrc"", is it do to execute ""ros2 launch autoware_launch e2e_simulator.launch.xml vehicle_model:=sample_vehicle sensor_model:=awsim_sensor_kit map_path:=/home/labuser/nishishinjuku_autoware_map""?

I tried that, but it didn't change the situation."
[Question] Autoware with AWSIM tutorial's is happen two errors.,D_kwDOAnasMc4ASUQR,2023-01-29T01:54:37Z,nitro6206,3,Answered,DC_kwDOAnasMc4ASWRd,yukkysaito,"@nitro6206 If you launch only awsim and type the following command, what is the output?
```
ros2 topic list
```"
[Question] Autoware with AWSIM tutorial's is happen two errors.,D_kwDOAnasMc4ASUQR,2023-01-29T01:54:37Z,nitro6206,3,Answered,DC_kwDOAnasMc4ASWRv,nitro6206,"Thank you for reply.
I did that command, and reply for ...
/parameter_events
/rosout
"
[Question] Autoware with AWSIM tutorial's is happen two errors.,D_kwDOAnasMc4ASUQR,2023-01-29T01:54:37Z,nitro6206,3,Answered,DC_kwDOAnasMc4ASWR2,yukkysaito,"@nitro6206 AWSIM is not working well.
The results here show that AWSIM is not working because the nvidia driver is not working properly.
https://github.com/orgs/autowarefoundation/discussions/3236#discussioncomment-4809722

Can you reboot the Computer?"
[Question] Autoware with AWSIM tutorial's is happen two errors.,D_kwDOAnasMc4ASUQR,2023-01-29T01:54:37Z,nitro6206,3,Answered,DC_kwDOAnasMc4ASWU2,nitro6206,"Thank you for reply.
So I try to introduce nvidia-driver in my computer.
I try to do ""setup-dev-env.sh"", but freeze it that prossess 
""   TASK [autoware.dev_env.cuda : Install CUDA libraries except for cuda-drivers] ***   "".
And Anything related to nvidia is skipped.
I should introduce to should I put it in separately?
"
[Question] Autoware with AWSIM tutorial's is happen two errors.,D_kwDOAnasMc4ASUQR,2023-01-29T01:54:37Z,nitro6206,3,Answered,DC_kwDOAnasMc4ASWYI,yukkysaito,"@nitro6206 
Please remove cuda, cuDNN and tensorRT once as shown here.
https://autowarefoundation.github.io/autoware-documentation/pr-306/support/troubleshooting/#cuda-related-errors

Then pls install only nvidia-driver and confirm that GPU is correctly recognized by nvidia-smi.
After that, please follow the instructions here.
https://autowarefoundation.github.io/autoware-documentation/pr-306/installation/autoware/source-installation/

`setup-dev-env.sh` installs CUDA, cuDNN, and TensorRT automatically. But, GPU driver is not."
[Question] Autoware with AWSIM tutorial's is happen two errors.,D_kwDOAnasMc4ASUQR,2023-01-29T01:54:37Z,nitro6206,3,Answered,DC_kwDOAnasMc4ASfsI,fadimecetiner,"Hello
I have encountered same problem and created an issue on AWSIM. But it is still open. You can check here: [Vehicle init pose: failed to get transform from map to base_link ](https://github.com/tier4/AWSIM/issues/76)
"
2023-01-31 ODD working group weekly meeting (127),D_kwDOAnasMc4ASU9h,2023-01-30T08:31:05Z,Igata-ctrl,0,Unanswered,,,
Obstacle Avoidance Problem for Our Custom Map,D_kwDOAnasMc4ASWQn,2023-01-31T14:34:38Z,YusufDALAK,1,Answered,,,
Obstacle Avoidance Problem for Our Custom Map,D_kwDOAnasMc4ASWQn,2023-01-31T14:34:38Z,YusufDALAK,1,Answered,DC_kwDOAnasMc4ASc15,zulfaqar-azmi-t4,"Just checking, can you enable the maximum drivable area marker (following the instruction here: [Visualizing Maximum Drivable Area](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/behavior_path_planner_drivable_area/#visualizing-maximum-drivable-area-debug)) to check whether the ego's current lanelet and the adjacent lanelet shares the same linestring ID? 

If the linestring is shared, then please share the log of the debug message (following the instruction here: [Echoing debug message to find out why the objects were ignored](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/behavior_path_planner_avoidance-design/#echoing-debug-message-to-find-out-why-the-objects-were-ignored))"
Obstacle Avoidance Problem for Our Custom Map,D_kwDOAnasMc4ASWQn,2023-01-31T14:34:38Z,YusufDALAK,1,Answered,DC_kwDOAnasMc4ASdGq,YusufDALAK,"> Just checking, can you enable the maximum drivable area marker (following the instruction here: [Visualizing Maximum Drivable Area](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/behavior_path_planner_drivable_area/#visualizing-maximum-drivable-area-debug)) to check whether the ego's current lanelet and the adjacent lanelet shares the same linestring ID?
> 
> If the linestring is shared, then please share the log of the debug message (following the instruction here: [Echoing debug message to find out why the objects were ignored](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/behavior_path_planner_avoidance-design/#echoing-debug-message-to-find-out-why-the-objects-were-ignored))

I tested that you said. How can I fix that?

**ORJINAL MAP:**
![WhatsApp Image 2023-02-01 at 10 27 10 (1)](https://user-images.githubusercontent.com/122669003/215981941-fa902398-666d-4209-82f9-a13762d63ed6.jpeg)
Topic echo:
```
 ---
header:
  stamp:
    sec: 1675235932
    nanosec: 269119582
  frame_id: ''
avoidance_info:
- object_id: 81034a1b60907172f838540cb25aca76
  allow_avoidance: true
  longitudinal_distance: 22.232489662142093
  lateral_distance_from_centerline: 0.30162288681847066
  to_furthest_linestring_distance: 3.9211308303777375
  max_shift_length: 3.0431308303777374
  required_jerk: 0.008525564223226055
  maximum_jerk: 1.0
  failed_reason: ''
---
```
**OUR CUSTOM MAP:**
![WhatsApp Image 2023-02-01 at 10 27 10](https://user-images.githubusercontent.com/122669003/215982361-1089f66e-746c-4fbc-8a57-bff615be9dc8.jpeg)
Topic echo:
```
---
header:
  stamp:
    sec: 1675236448
    nanosec: 954752940
  frame_id: ''
avoidance_info:
- object_id: efa09ea2d6d5f2a27d5879593c4d2b05
  allow_avoidance: false
  longitudinal_distance: 17.888371735462968
  lateral_distance_from_centerline: -0.2695881854391767
  to_furthest_linestring_distance: 0.8905207664968495
  max_shift_length: 0.012520766496849522
  required_jerk: 0.0
  maximum_jerk: 0.0
  failed_reason: InsufficientLateralMargin
---
```"
Obstacle Avoidance Problem for Our Custom Map,D_kwDOAnasMc4ASWQn,2023-01-31T14:34:38Z,YusufDALAK,1,Answered,DC_kwDOAnasMc4ASdPq,zulfaqar-azmi-t4,"To fix that You have to make sure the linestring that connects the current lane with adjacent lane is shared. Which means the left linestring's id of ego's current lane in you map is equal to the right linestring of the adjacent lane. To do that you have to edit you map manually.

You can compare it with the example map as a guide.
(guide for making lanelet: https://docs.web.auto/en/user-manuals/vector-map-builder/how-to-use/edit-maps)"
Obstacle Avoidance Problem for Our Custom Map,D_kwDOAnasMc4ASWQn,2023-01-31T14:34:38Z,YusufDALAK,1,Answered,DC_kwDOAnasMc4ASgnX,YusufDALAK,"> To fix that You have to make sure the linestring that connects the current lane with adjacent lane is shared. Which means the left linestring's id of ego's current lane in you map is equal to the right linestring of the adjacent lane. To do that you have to edit you map manually.
> 
> You can compare it with the example map as a guide. (guide for making lanelet: https://docs.web.auto/en/user-manuals/vector-map-builder/how-to-use/edit-maps)

It works. Thank you very much."
2023-02-01 Simulation Working group Meeting,D_kwDOAnasMc4ASWY-,2023-01-31T16:56:03Z,WJaworskiRobotec,0,Unanswered,,,
Open AD Kit WG meeting 2023/2/01,D_kwDOAnasMc4ASWck,2023-01-31T18:16:13Z,armaganarsln,0,Unanswered,,,
Mapping WG Meeting 01/02/2023,D_kwDOAnasMc4ASWsh,2023-02-01T01:59:11Z,n-patiphon,1,Answered,,,
Mapping WG Meeting 01/02/2023,D_kwDOAnasMc4ASWsh,2023-02-01T01:59:11Z,n-patiphon,1,Answered,DC_kwDOAnasMc4ASfWk,n-patiphon,"[SBGTRAUTO.pdf](https://github.com/autowarefoundation/autoware/files/10564368/SBGTRAUTO.pdf)
The test reports of SBGTRAUTO shared by Armağan in Discord."
Autonomy Software WG Meeting 2023/02/07,D_kwDOAnasMc4ASW6B,2023-02-01T09:01:33Z,BonoloAWF,0,Unanswered,,,
Does pcd map has global coordinates?,D_kwDOAnasMc4ASZSO,2023-02-04T00:24:53Z,cjffly,2,Answered,,,
Does pcd map has global coordinates?,D_kwDOAnasMc4ASZSO,2023-02-04T00:24:53Z,cjffly,2,Answered,DC_kwDOAnasMc4ASmzC,rsasaki0109,"You can use vector_map_builder to display the point cloud and vector map at the same time.
You may want to browse the coordinates of lanelet2.osm in your editor and check the coordinates of the point cloud in cloudcompare.

You can transform the coordinates of pcd by Edit/Apply transformation of cloud_compare or pcl_transform_point_cloud of pcl-tools.

vector_map_builder
https://tools.tier4.jp/vector_map_builder_ll2/
cloud_compare
https://www.danielgm.net/cc/"
Does pcd map has global coordinates?,D_kwDOAnasMc4ASZSO,2023-02-04T00:24:53Z,cjffly,2,Answered,DC_kwDOAnasMc4ASoaT,cjffly,"Thanks for the suggestion.

I've tried the vector_map_builder, there is a critical bug which prevent me using it: if the osm file's node id is located around lat/log 0, for example, node 1 has lat=0.00000001, node 2 has lat=-0.00000001, while they are physically close to each other, the tool will report `Map exists over multiple grid-zones""."
Does pcd map has global coordinates?,D_kwDOAnasMc4ASZSO,2023-02-04T00:24:53Z,cjffly,2,Answered,DC_kwDOAnasMc4ASpVS,rsasaki0109,"The vector_map_builder does not support maps that still have multiple mgrs grids, so you would have to modify the map, but I am not familiar with it.
@mitsudome-r Do you know how to handle this?"
Does pcd map has global coordinates?,D_kwDOAnasMc4ASZSO,2023-02-04T00:24:53Z,cjffly,2,Answered,DC_kwDOAnasMc4ASt0Y,mitsudome-r,"In autoware, all the coordinates are handled in euclidean space (x,y,z). 
* For PCD, it will load the x,y,z values in the file directly.
* For Lanelet2 maps, it will do the projection from lat/lon coordinates to x,y,z coordinates with given origin when loading the map. (e.g., using UTM projection or MGRS projection)

In order to have lanelet2 and pcd to be loaded in the same coordinate, you either have to:
* transform pcd so that it will have the same x,y,z value with loaded lanelet2 map, or 
* modify the origin of the lanelet2 projection so that projected value would have the same value with pcd.

I'm not sure how you created your maps, but if you know the lat/lon value for the origin of pcd, easiest way is to set projector type to UTM and set lat/lon origin in [lanelet2_map_loader](https://github.com/autowarefoundation/autoware.universe/blob/main/map/map_loader/config/lanelet2_map_loader.param.yaml) parameter.

```
/**:
  ros__parameters:
    lanelet2_map_projector_type: UTM  # Options: MGRS, UTM
    latitude: 40.816617984672746        # Latitude of map_origin, using in UTM
    longitude: 29.360491808334285       # Longitude of map_origin, using in UTM
```"
Trajectory maker does not work.,D_kwDOAnasMc4ASZkC,2023-02-04T15:04:54Z,YusufDALAK,2,Answered,,,
Trajectory maker does not work.,D_kwDOAnasMc4ASZkC,2023-02-04T15:04:54Z,YusufDALAK,2,Answered,DC_kwDOAnasMc4ASmyn,maxime-clem,"Do you mean it takes 5 minutes between (a) setting the goal point and (b) the trajectory (bright color in rviz) being published ?
If yes, it is not normal and may be caused by your custom vector map (either the map has an issue, or it reveals a bug in the router).
Can you share your custom map and PCD in order to reproduce the issue ?"
Trajectory maker does not work.,D_kwDOAnasMc4ASZkC,2023-02-04T15:04:54Z,YusufDALAK,2,Answered,DC_kwDOAnasMc4AS6V3,YusufDALAK,"> Do you mean it takes 5 minutes between (a) setting the goal point and (b) the trajectory (bright color in rviz) being published ?
> If yes, it is not normal and may be caused by your custom vector map (either the map has an issue, or it reveals a bug in the router).
> Can you share your custom map and PCD in order to reproduce the issue ?

I'm sorry for the late reply. Could you share your email address with me so that I can share the pcd map with you."
Trajectory maker does not work.,D_kwDOAnasMc4ASZkC,2023-02-04T15:04:54Z,YusufDALAK,2,Answered,DC_kwDOAnasMc4AS6Xs,maxime-clem,"Please send the lanelet and PCD maps to maxime.clement@tier4.jp
I will see if I can reproduce the issue."
Trajectory maker does not work.,D_kwDOAnasMc4ASZkC,2023-02-04T15:04:54Z,YusufDALAK,2,Answered,DC_kwDOAnasMc4AS9Lr,YusufDALAK,"> I will see if I can reproduce the issue.

I sent the necessary files to you via email. Thank you."
Trajectory maker does not work.,D_kwDOAnasMc4ASZkC,2023-02-04T15:04:54Z,YusufDALAK,2,Answered,DC_kwDOAnasMc4AS9dN,maxime-clem,"Thank you. With your map I was able to generate a crash of the behavior planner and I will investigate it.
Outside of these crashes, planning was working fine and Autoware generated a trajectory without any big delay.
Please let me know if you found a way to consistently reproduce the issue where the trajectory takes 4-5 minutes to appear."
Trajectory maker does not work.,D_kwDOAnasMc4ASZkC,2023-02-04T15:04:54Z,YusufDALAK,2,Answered,DC_kwDOAnasMc4AS_wZ,maxime-clem,"I find the cause of the crashes: some adjacent points of the linestring are in same position.
Can you try fixing these points to see if it fixes your issue with the planner ?


If you open your lanelet map with https://tools.tier4.jp/vector_map_builder_ll2/, you can see this as some of the listed problems.
![image](https://user-images.githubusercontent.com/78338830/218953278-96d0539e-42a8-450e-900c-83dca5f9e31f.png)

"
Path is not changing when road is blocked by bus,D_kwDOAnasMc4ASZ_t,2023-02-05T14:40:52Z,gurselturkeri,1,Answered,,,
Path is not changing when road is blocked by bus,D_kwDOAnasMc4ASZ_t,2023-02-05T14:40:52Z,gurselturkeri,1,Answered,DC_kwDOAnasMc4ASm8l,maxime-clem,"Currently, Autoware does not support dynamic routing. To solve your problem, I think 2 things would need to be implemented:
- Dynamic update of the routing graph: based on the perception (e.g., bus stuck on the road, road sign, ...), update the routing graph to add/remove some graph edges.
   - In your example, we would want the 2 lanes blocked by the bus to be removed from the routing graph.
- Dynamic rerouting: when the routing graph is updated, the route is recalculated.
   - In your example, this would be recalculated to the green line you drew.

This is just a quick idea and the real implementation may be much more complicated."
2023-02-06 ODD working group weekly meeting (128),D_kwDOAnasMc4ASaQB,2023-02-06T01:14:13Z,Igata-ctrl,0,Unanswered,,,
Autonomy Software WG Meeting 2023/02/14,D_kwDOAnasMc4ASbw2,2023-02-07T17:34:57Z,BonoloAWF,1,Answered,,,
Autonomy Software WG Meeting 2023/02/14,D_kwDOAnasMc4ASbw2,2023-02-07T17:34:57Z,BonoloAWF,1,Answered,DC_kwDOAnasMc4ASwKj,BonoloAWF,"## ITRI Bus ODD Meeting 9 Feb 2023
Present: Bonolo, CJ, Fatih, Huei-Ru, Mike, Ryohsuke, Tseng, Xinyu, Yi Ling, Yu-Heng

### Update on status of bus integration
- See slides for details
    - Working on localisation issue. Steer control longitudinal/lateral control tests are done. 
    - Demo scenarios could be completed by end of Feb (assuming other module tests pass)
    - LGSVL simulation of bus
    - AWF demo will be done using the middle sized bus

Ryohsuke (R) - how were control tests done if localisation is failing? Huei-Ru (H) - this was initial testing since localisation is unstable. Control system is working and once position issue is resolved, the rest of the testing can be done. 

R - have you tested planning and perception modules on the vehicle? H - that is current work. R - localisation is fundamental and required to test the other modules. There is a risk that issues could be discovered in other components once the localisation is integrated. Check the issues reported by Leodrive on Github for examples. Accurate timelines can be estimated once the bus can at least drive autonomously in a loop. End of Feb seems ambitious for resolving localisation issues and testing the remaining modules. H - I agree, there is a risk for evaluating the whole demo scenario by end of Feb since localisation is fundamental. We are focusing our resources on resolving localisation issues.  

### Re-align time frames for completion of the integration and demo 
- Leodrive Bus ODD video demo shoot is scheduled for 25-26 Feb. 
- Accurate timelines can be estimated once the ITRI bus can at least drive autonomously in a loop. 
- ITRI video demo shoot will be in:
    - Feb if integration and testing is completed. In this case, the editing could be done together with the Leodrive video to be released around March timeframe.
    - March if there are delays due to issues identified post localisation testing. In this case, the ITRI Bus ODD video demo will be published around April as a follow-up to the first Bus ODD video. A combined longer video could also be created to demonstrate Autoware running on different hardware platforms in Turkey and Taiwan by different teams.   

### Define the scope of the demo (what is feasible, in what time frame)  
Scenarios to be demonstrated for the ITRI Bus ODD include:
- traffic light and bus stop detection
- precision docking
- pedestrian or motorcycle detection/navigation
- path prediction around objects "
Autonomy Software WG Meeting 2023/02/14,D_kwDOAnasMc4ASbw2,2023-02-07T17:34:57Z,BonoloAWF,1,Answered,DC_kwDOAnasMc4ASwz7,samet-kutuk,"Let me comment on the demo aspect.

First of all, sorry for missing the meeting. It was a bit too early for CET, and I couldn't make it.

As mentioned above, we've set the demo dates for the Leo Drive demo to the 25th and 26th of February.
We're going to be shooting video in two different places:

- Isuzu factory for the 360-degree shooting around the vehicle
- Gebze Technical University for the demonstration of autonomous bus capabilities.

This video will be quite a professional movie; therefore, I can not see a possibility of editing the Leo Drive demo and ITRI demo into one video.

If you look at the previous ODD demos (https://www.youtube.com/watch?v=mjibEToagkw and https://www.youtube.com/watch?v=0vtvaOf4Hbo), you can see that some video production efforts were made.

How will the video shooting be done at the ITRI demo? If you can give me some information, I can better transfer some of the preparations we've done for the Leo Drive demo."
"Proposal to integrate Eagleye, a GNSS/IMU-based localizer, into Autoware",D_kwDOAnasMc4ASb42,2023-02-07T20:23:35Z,rsasaki0109,4,Answered,,,
"Proposal to integrate Eagleye, a GNSS/IMU-based localizer, into Autoware",D_kwDOAnasMc4ASb42,2023-02-07T20:23:35Z,rsasaki0109,4,Answered,DC_kwDOAnasMc4ASsNZ,yukkysaito,"Nice activity 👍  If you have any problems, I will do our best to support you, so please feel free to ask anything."
"Proposal to integrate Eagleye, a GNSS/IMU-based localizer, into Autoware",D_kwDOAnasMc4ASb42,2023-02-07T20:23:35Z,rsasaki0109,4,Answered,DC_kwDOAnasMc4ASzQk,rsasaki0109,"I submitted pull requests.
https://github.com/autowarefoundation/autoware/pull/3261
https://github.com/autowarefoundation/autoware_launch/pull/200
https://github.com/autowarefoundation/autoware.universe/pull/2848"
"Proposal to integrate Eagleye, a GNSS/IMU-based localizer, into Autoware",D_kwDOAnasMc4ASb42,2023-02-07T20:23:35Z,rsasaki0109,4,Answered,DC_kwDOAnasMc4ASzSA,mitsudome-r,"@rsasaki0109 It would be nice if you can also create PR to Autoware Documentation under ""How to Guide"" to explain how people can use Eagleye."
"Proposal to integrate Eagleye, a GNSS/IMU-based localizer, into Autoware",D_kwDOAnasMc4ASb42,2023-02-07T20:23:35Z,rsasaki0109,4,Answered,DC_kwDOAnasMc4ASzS2,rsasaki0109,"That's important, I would like to create a PR.

Work is in progress on the following branches
https://github.com/MapIV/autoware-documentation/tree/add_eagleye_in_how-to-guides
PR
https://github.com/autowarefoundation/autoware-documentation/pull/334"
"Proposal to integrate Eagleye, a GNSS/IMU-based localizer, into Autoware",D_kwDOAnasMc4ASb42,2023-02-07T20:23:35Z,rsasaki0109,4,Answered,DC_kwDOAnasMc4AV4m8,rsasaki0109,PRs merged except docment.
"Proposal to integrate Eagleye, a GNSS/IMU-based localizer, into Autoware",D_kwDOAnasMc4ASb42,2023-02-07T20:23:35Z,rsasaki0109,4,Answered,DC_kwDOAnasMc4ATCz2,n-patiphon,"Hi @meliketanrikulu! To follow up on your question last night, I checked with the developer (@rsasaki0109), and it seems like there won't be any changes to the EKF localizer in this integration. However, I've just heard that there are some modifications needed in `pose_initializer` to keep AD API working properly."
"Proposal to integrate Eagleye, a GNSS/IMU-based localizer, into Autoware",D_kwDOAnasMc4ASb42,2023-02-07T20:23:35Z,rsasaki0109,4,Answered,DC_kwDOAnasMc4ATDS1,meliketanrikulu,"Hello @n-patiphon . Thanks for information. Yes, pose_initializer may need to be changed to trigger EKF."
"Proposal to integrate Eagleye, a GNSS/IMU-based localizer, into Autoware",D_kwDOAnasMc4ASb42,2023-02-07T20:23:35Z,rsasaki0109,4,Answered,DC_kwDOAnasMc4AUCLx,rsasaki0109,"I have addressed this issue.
https://github.com/autowarefoundation/autoware.universe/pull/2904"
"Proposal to integrate Eagleye, a GNSS/IMU-based localizer, into Autoware",D_kwDOAnasMc4ASb42,2023-02-07T20:23:35Z,rsasaki0109,4,Answered,DC_kwDOAnasMc4AV5Db,VRichardJP,"Hi!
Sorry to dig out an old discussion. Have you made any comparison between the following setups:
1. eagleye Twist & pose -> EKF
2. eagleye Twist + NDT pose -> EKF
3. gyro odom Twist + NDT pose -> EKF (default autoware)
4. GNSS pose + gyro odom Twist + NDT pose -> EKF (not implemented in autoware EKF, but it is not difficult to add)

In particular, I am curious how 2. and 4. differ, as localization would use the same data but with different algorithms.

Thanks!"
"Proposal to integrate Eagleye, a GNSS/IMU-based localizer, into Autoware",D_kwDOAnasMc4ASb42,2023-02-07T20:23:35Z,rsasaki0109,4,Answered,DC_kwDOAnasMc4AV5E-,rsasaki0109,"@VRichardJP 
For setups 1-3, we have conducted detailed evaluations and plan to share the results eventually (perhaps in Mapping WG). Setup 4 is also currently under evaluation.

For setup 2, compared to setup 3, the performance of Twist is improved, which results in a better localization outcome. This is particularly helpful in environments with fewer distinctive features, where NDT can become unstable. The improved Twist helps reduce the number of iterations needed for NDT.

As for setup 4, while it is indeed possible, it is currently under investigation with an estimated completion timeline around September. For example, issues such as misaligned absolute coordinates in the point cloud map may cause the localization to not work properly. If this combination works well, I believe it will enable more robust localization."
camera and lidar fusion perception,D_kwDOAnasMc4AScZz,2023-02-08T11:38:35Z,wangxianggang1997,2,Answered,,,
camera and lidar fusion perception,D_kwDOAnasMc4AScZz,2023-02-08T11:38:35Z,wangxianggang1997,2,Answered,DC_kwDOAnasMc4AS5bN,rsasaki0109,"Parameters may be incorrectly set.

https://github.com/autowarefoundation/autoware.universe/blob/main/perception/image_projection_based_fusion/src/fusion_node.cpp#L47-L66"
camera and lidar fusion perception,D_kwDOAnasMc4AScZz,2023-02-08T11:38:35Z,wangxianggang1997,2,Answered,DC_kwDOAnasMc4ATTqG,yukkysaito,"Please confirm following parameters
https://github.com/autowarefoundation/autoware.universe/blob/main/perception/image_projection_based_fusion/launch/roi_cluster_fusion.launch.xml#L2-L23

README : 
- https://github.com/autowarefoundation/autoware.universe/tree/main/perception/image_projection_based_fusion
- https://github.com/autowarefoundation/autoware.universe/blob/main/perception/image_projection_based_fusion/docs/roi-cluster-fusion.md"
Open AD Kit WG meeting 2023/2/8,D_kwDOAnasMc4AScfg,2023-02-08T13:37:48Z,HamburgDave,0,Unanswered,,,
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,,,
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4ASukA,kaspermeck-arm,"Also, see slides 9 and 10 on [Open AD Kit - DevOps Dojos](https://docs.google.com/presentation/d/1hsLgp1myeKhelRjOedA5yi-UK6ZNfwAUxRbvxdSdX_g/edit#slide=id.g206156d16a3_0_0)."
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4ASzbh,angry-crab,"Hi, I cannot access the slides. "
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4AS1g8,kaspermeck-arm,Please request access and it'll be granted!
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4ASzbq,angry-crab,"<del> Personally, I think 2 is better. Maybe it could be done with a simple parser and reflection. <del/>

Please correct me if I'm wrong. For option 2, are you suggesting that we should implement a parameter parser and wrap the `declare_parameter(...) ` calls? 

btw, 1 still uses `declare_parameter(...) ` anyway. I think the only difference is the functions calls are automatically generated. "
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4AS1iP,kaspermeck-arm,"For Option 2, the idea is to remove _default_value_ from _declare_parameter(...)_ to enforce that the parameter file contains all parameters which the node expects. No wrapper should be needed.

I haven't yet tried Option 1 myself, I'll update the initial comment with corrections if I got anything wrong."
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4AS2UH,kenji-miyake,"Oh, if you meant so, I misunderstood one thing. I thought as if we're going to define the parameter structures in some original format.
In that case, it's a good start as the first step.
And we can try out PickNik's library in parallel to find better solutions."
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4ASz2L,doganulus,"Option 1 is brittle. My experience is that the code generation approach (as in Option 1) is harder to maintain and test for all parties involved. Also complicates the build process even when `cmake` scripts are provided. I would be more enthusiastic to use it if implemented as a plain `C++` library.


"
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4AS3mT,xmfcx,"Option 1 eliminates a lot of manual labor of:
- declaring parameters
- defining and enforcing bounds
- automatically generating set-callbacks for parameters
- generating yaml config files from config, [this one is possible but it's in the issue stage](https://github.com/PickNikRobotics/generate_parameter_library/issues/8)

To achieve all these, one would need to either 
- make fundamental changes to ROS2's internal parameter handling infrastructure (too costly)
- use c++ macros in very challenging ways (uglier than current solution, restrictive(outputing a .yaml file would make it awkward))
to get the same result as this library.

The fact that it can eliminate a lot of boilerplate code, I think it is a quite valuable tool.

And it can have many more features like [these listed in its issues](https://github.com/PickNikRobotics/generate_parameter_library/issues):
- option to print params
- async set-callbacks for parameters

I also understands the concerns about the code maintainability. But most of the hard parts are already done and updating it shouldn't be that hard at this stage, just editing and playing around with these [jinja_templates](https://github.com/PickNikRobotics/generate_parameter_library/tree/main/generate_parameter_library_py/generate_parameter_library_py/jinja_templates) should be enough to maintain some ROS 2 version cycles.

And for what it brings, the organization that is actively maintaining it, its readily availability, to me, the pros outweigh the cons. There will always be trade-offs, as long as we weigh our options carefully, we should be on the right path.

For this, @kasperornmeck will create a small demo using this library for a simple package ([stop_filter](https://github.com/autowarefoundation/autoware.universe/tree/4dba2edc7eed1079e172e07e6e063a85ca1b3932/localization/stop_filter)) in the Autoware Universe and see how it performs.

And of course we can coordinate and help PickNikRobotics team with the features we also want there to be too."
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4AS0SD,kenji-miyake,"I think option 1 is ideal as a long-term approach because option 2 sounds like reinventing the wheel.
(Edited: There was a misunderstanding about option 2. It was not as complicated as I thought, so it's not reinventing the wheel but a minimal solution. See https://github.com/orgs/autowarefoundation/discussions/3260#discussioncomment-4941063.)

However, there are several caveats:
- If we adopt PickNikRobotics's library, we should contribute to it and push the library to become the de facto standard of ROS 2.
- There is no need to force all nodes to use the library. We can still allow raw `declare_parameter` styles as well, especially for Autoware Universe (not Core)."
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4AS0fa,doganulus,Not sure about its long term prospects. That library is essentially a hack around the limitations of ROS parameters. One should touch the design of ROS parameters based on cloud native tooling best-practices. These dojos would serve the community better than many people recognize.
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4AS1ld,kenji-miyake,"@doganulus Thank you for your comment. I'm sorry but I don't understand your opinion exactly yet. Could you elaborate on that, please?

For example:
- What is a hack, concretely?
- What are the limitations of ROS parameters?
- Why can't we contribute to the project and fix the hack/limitations?
- What are the ""cloud native tooling best-practices"" here?
- What do you mean by ""These dojos would serve the community better than many people recognize.""?"
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4AS1xh,doganulus,"The Picknik's library already recognizes the limitations of current ROS parameters design. This should be the reason why they have implemented such a library at the first place. More declarative, more flexible, supporting nested objects, validation, and other attributes. I consider it obvious. Yet I don't know why they do not contribute to the ROS parameters codebase and go for a code generation approach on top of it. I won't speculate here but that's another layer of complications as I explained above.

This should be clearer when we look at the existing solutions for the config management in the industry. For example, the library Viper (https://github.com/spf13/viper) for Golang is the defacto standard for Go applications. This is a good example for us (not saying we should implement similar). Also I agree with you for having a standard ROS2 config solution is definitely desired. But instead coming up a better design, another extra layer on top of the inadequate design is proposed to make it pretty. Probably we all know we should not construct buildings on top of bad soil on earthquake zones. The same is here for software. 

So I see these Dojos as an oppurtunity to work on these topics together with all these experts. I hope I convey my point better now.
"
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4AS2TH,kenji-miyake,"> Yet I don't know why they do not contribute to the ROS parameters codebase and go for a code generation approach on top of it.

I guess it's because it's just faster to prototype something at this stage.
If I were in the same situation, I would follow the same approach. And if I were them, I would statto proposing it to the ROS codebase from now on.

I think https://discourse.ros.org/t/declarative-ros-2-parameters/26754/1 is the first step for that.
Although it's just my guess, they're not only announcing the library here but also finding partners to push the library to the ROS official together.
And definitely, we can be a partner.

As evidence of the possibility of partnership, I'll introduce a similar example below.
There is a tool for publishing ROS packages as APT packages, developed by a member of PickNik: https://github.com/jspricke/ros-deb-builder-action
The function is also important for Autoware and Open AD Kit because it makes the installation of Autoware easier and more flexible.

The author was open to discussing literally everything.
For more details, see https://github.com/autowarefoundation/autoware/issues/3222, and issues/PRs on the tool's repository.

Also, he's contributing to https://github.com/ros-infrastructure/bloom, an official tool around APT release. That means, he's trying to improve the ROS codebase itself as well.

Why don't we make more collaborations with them? We have similar issues and similar motivations.

> I won't speculate here but that's another layer of complications as I explained above.

I think it's good to ask them the reason. Why don't you do so? Please don't give up thinking, let's make more communications.
It's obvious that we have the same goal that all parameters should be more declarative, to make it more efficient or to prevent wrong usages.
I believe THAT is exactly the sense of software-defined, which is one of the cloud-native tooling best practices that you mentioned.

> Also I agree with you for having a standard ROS2 config solution is definitely desired. But instead coming up a better design, another extra layer on top of the inadequate design is proposed to make it pretty. Probably we all know we should not construct buildings on top of bad soil on earthquake zones. The same is here for software.

Ah okay, I probably understand what you said, and what the gaps between us are.
Are you thinking about the ideal state in the future, right?
I agree that we eventually need clean and stable solutions that don't use hacks.
However, there is no need to start thinking of it again from scratch.
Thankfully, PickNik has already done it as a pioneer, instead of us. We can learn a lot from their work.

I'm not saying that it's completed by just adopting PickNik's library.
My opinion is that we should adopt the library in order to understand the issues more efficiently.
That enables us to propose changes for the ideal state of the ROS codebase faster.

> So I see these Dojos as an oppurtunity to work on these topics together with all these experts. I hope I convey my point better now.

Yeah, thank you so much!
Talking about ""experts"", I believe PickNik's members are the most experts on this topic so far.
How about making collaborations with them? I believe there are open to that and it'd be a nice experience."
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4AS2pV,doganulus,"Sure I also do not want to start from scratch. But it is important to recognize robotics and ROS libraries are lagging behind in this business. When it comes to parameter management, I prefer the experience of web developers rather than roboticists. A huge experience is there as a result of many failures/endeavors. We should try to avoid the same mistakes web developers did (and now roboticists are doing those) as much as we can."
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4AS3n0,xmfcx,"> But it is important to recognize robotics and ROS libraries are lagging behind in this business.

I think it can be constructive if you can provide
- what prospects/features of ROS 2 are lagging behind, 
- how these affect us negatively,
- what can be done about them,
- what are the alternatives, competitor solutions?

> When it comes to parameter management, I prefer the experience of web developers rather than roboticists.

What aspects of the web developers' parameter management experiences do you like compared to roboticists? Could you provide more concrete examples on your expectations?

We are using ROS 2 and we will use ROS 2 for the Autoware. We have some hard constraints that comes from the fact that we are using this middleware. The best we can do is to accept these constraints and do our best to keep a healthy codebase.

And if it's in our budget of developer resources, and if we agree it'll be worth to spend some of this resource on overcoming some of the shortcomings that you describe, As long as we have a good plan/proposal, we can work on improving it too.

And again, we have the trade off of weighing our priorities. Would the developer time spent on creating something better than _what PickNik already put together_ really be worth it? Or could this precious developer time be spent on something more important for autoware to function?"
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4AS4Aa,doganulus,"I will quote from the recent interview with the CEO of Intrinsic (Tan White) and the ex-CEO of the OpenRobotics (Brian Gerkey):
> ... what Brian was finding at Open Robotics is that he was starting to get that pull to build to that level, and then ended up building loads of customized things on top of ROS when really what was needed was a more industrialized platform. But he didn’t want to force the ROS community into that alone.

... ended up building loads of customized things on top of ROS
... loads of customized things on top of ROS
... loads of customized things

This is the problem. 

And PickNik's solution is another customized thing, another layer of complications. Really you gonna lose more developer time when adopting such custom tooling. Already lost many hours on the Autoware project because of such dependency problems. This must be one of the main concerns of the software architecture team. 

See the PickNik's repo and what the issues are. Python dependency, CMake dependency, soon Jinja dependency, more dependency to 'clang-tidy' Cmake macros, or perhaps also it will work with any code analyzers because code is generated on the fly. Discussions to add generated code or not. Again losing precious developer time. Please show me how the tool is tested. How error is handled? Code generation is a super hard problem once you want to make it right, do you think Picknik is a compiler maker?

So what is the solution? The solution is to do proper C++ development and libraries as everyone does. Custom tooling is detrimental and unstable, especially if you are talking about developer resources. Believe me that even doing nothing is better than adopting fragile tooling.

Please don't be more royalist than the Queen.
"
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4AS4HN,xmfcx,"> ... loads of customized things

Software world is built upon dependencies, like anything else in life. Reducing overall [coupling](https://codedocs.org/what-is/coupling-computer-programming) and [connascence](https://en.wikipedia.org/wiki/Connascence) are very important while developing good software. But so is [DRY](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself). Right now doing  nothing corresponds to a lot of repeated, boilerplate code created by the developers.

> The solution is to do proper C++ development and libraries as everyone does.

Implementing the functionalities provided in these [jinja templates](https://github.com/PickNikRobotics/generate_parameter_library/tree/main/generate_parameter_library_py/generate_parameter_library_py/jinja_templates) would require heavily templated c++ codes and a lot of c++ macros, which fall into the same code generation category. And it wouldn't be a clean solution too.

If you have an idea on how this can be done elegantly, I expect the ROS2 community could benefit from it too.

> Please show me how the tool is tested. How error is handled?

As it is in their plans, https://github.com/PickNikRobotics/generate_parameter_library/issues/25 some integration tests can solve this problem. And since what code does it well known, well defined, it should be fairly easy to cover most of the test cases.

> Believe me that even doing nothing is better than adopting fragile tooling.

Doing nothing would be to keep writing boilerplate code. I think to see how much this tool can simplify, you'd need to write a node
- which takes in multiple types of parameters
- all their ranges are validated
- they can be updated asynchronously via parameter service calls
And this would make you realize how this tool can simplify your workflow.

As long as a tool is properly tested, and its functionality can be improved with clear pathways, I see no problem in adopting it.

> Please don't be more royalist than the Queen.

Sorry, I don't understand what you mean in here."
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4AS4Lw,esteve,"@doganulus it'd be really helpful if you took the time to answer @xmfcx questions with something more specific that we can look into. I know nothing about web development and it seems you have more experience. Please try to focus on this discussion so that we can understand better your case and what you're proposing, so I'm pasting @xmfcx 's questions here again. Thanks.

> > But it is important to recognize robotics and ROS libraries are lagging behind in this business.
> 
> I think it can be constructive if you can provide
> 
>     * what prospects/features of ROS 2 are lagging behind,
> 
>     * how these affect us negatively,
> 
>     * what can be done about them,
> 
>     * what are the alternatives, competitor solutions?
> 
> 
> > When it comes to parameter management, I prefer the experience of web developers rather than roboticists.
> 
> What aspects of the web developers' parameter management experiences do you like compared to roboticists? Could you provide more concrete examples on your expectations?"
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4AS4MJ,doganulus,"> As long as a tool is properly tested, and its functionality can be improved with clear pathways, I see no problem in adopting it.

No. The functionality is just one part of the system design. But-it-works approach will ruin the project sooner or later. I see it in the Autoware project and many other ROS projects. ROS2 crashed 2-3 years ago as far as I can see. And now the team has exited. I mean these decisions kill projects slowly. Better prepared.

> Doing nothing would be to keep writing boilerplate code.

Yes, writing boilerplate code is better than code generation. Much less headache. Keep an eye on Picknik's repos, they will withdraw or reimplement it as a proper library. As I said above, I would not say much if they had it as a C++ library. This is what robotics or C++ needs actually. 

> Please don't be more royalist than the Queen.

ROS is the queen. But it is important to switch a view that ROS is just a C++ library (or better an interface) for pub-sub and nothing more. I am saying you give too much credit to anything coming from the ROS community and that affects the sanity of design decisions. Otherwise, I do not understand why we discuss a repo so much, which has a single unit test only (and promises from months ago) and create a dependency on it from every part of Autoware. "
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4AS0Yu,isamu-takagi,">single source parameter file
which will be used for: ROS node configuration, web documentation and ROS launch

This is a parameter definition file created for each node. The existing parameter files are created for each configuration and will continue to be used. Is this right?"
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4AS1hu,kaspermeck-arm,"Each node will have a parameter file with populated default values, along with some other attributes. The parameter file structure will be the same across all nodes, so that the parameter file can rendered into a table to be used in the web documentation."
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4AS8Dy,kaspermeck-arm,"Thanks everyone for contributing to the discussion! :) 

My assessment of how to proceed is to keep it simple but not to prevent potential future more complex/sophisticated implementations. I am leaning towards that we go with Option 2 and define a yaml file layout in such a way which doesn't prohibit Option 1 (or other solution) further down the road. I see Option 2 as a stepping stone and allows us to make progress!

What has been decided:
- single source node parameter file (one file per node), which will be used for:
  - node configuration
  - web documentation
  - launch files
- parameter file path: _autoware.universe/.../config/*.param.yaml_
  - ""..."" is feature/function and package
  - ""*"" is the node
  - E.g., [autoware.universe/localization/ndt_scan_matcher/config/ndt_scan_matcher.param.yaml](https://github.com/autowarefoundation/autoware.universe/blob/main/localization/ndt_scan_matcher/config/ndt_scan_matcher.param.yaml)
- _default_value_ not to be used in _declare_parameter(...)_ and all parameters in the parameter yaml file are declared in the node
  - this enforces 1-to-1 alignment between node and parameter file
- each parameter in the node parameter file has following attributes:
  - _name_
  - _type_
  - _default_value_
  - _description_
  - _bounds_

Pending:
- the node parameter yaml file layout
  - requirements:
    - 1-to-1 alignment with the node parameter declaration(s)
    - parameter attributes should be rendered/interpreted into an MD table for web documentation

Please have a think of the proposal above and we can discuss in the next Open AD Kit meeting!

@armaganarsln, @HamburgDave could you add this to the agenda for next week? (as we're skipping this week due to the TSC) Thanks!"
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4ATBdB,esteve,"@kasperornmeck maybe I misunderstood, but I got the impression that the consensus was towards using PickNick's https://github.com/PickNikRobotics/generate_parameter_library, at least that's what I gathered from @kenji-miyake and @xmfcx 's responses, correct me if I'm wrong. The parameters API in `rclcpp` is really lacking, features like validators and schemas should definitely be part of it."
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4ATBer,xmfcx,"- Enforcing the `param.yaml` files to be used instead of launch file arguments
- Making parameter declarations' default values empty in nodes
- Rendering parameters in markdown automatically

These can be done regardless of whether we use PickNik's library or not. And I support these.

So it's ok to take action to realize them.

And for PickNick's library, in the last Software WG meeting, @kasperornmeck agreed to create a small demo using [generate_parameter_library](https://github.com/PickNikRobotics/generate_parameter_library) for a simple package ([stop_filter](https://github.com/autowarefoundation/autoware.universe/tree/4dba2edc7eed1079e172e07e6e063a85ca1b3932/localization/stop_filter)) in the Autoware Universe and see how it performs."
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4ATBjX,esteve,"@xmfcx ah, sorry, I forgot about that, makes total sense."
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4ATCSD,isamu-takagi,"How can node users configure parameters when this is introduced? Is it possible to use conventional way (param tags and param files), or does it need to create a dedicated parameter file?"
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4ATCTu,xmfcx,"@isamu-takagi the reason we are coming up with this enforcement comes from launch file chains. They can override arguments and it is hard to track what parameters passed to the node.

So there should be at least one default `params.yaml` for the node. And the launch file (if it exists) should pass it to the node.

As for the user running the node on their local machine, they can do it however they like, [for example](https://docs.ros.org/en/rolling/How-To-Guides/Node-arguments.html#parameters):
- `ros2 run demo_nodes_cpp parameter_blackboard --ros-args --params-file demo_params.yaml`
- `ros2 run demo_nodes_cpp parameter_blackboard --ros-args -p some_int:=42 -p ""a_string:=Hello world"" -p ""some_lists.some_integers:=[1, 2, 3, 4]"" -p ""some_lists.some_doubles:=[3.14, 2.718]""`

Also there can be multiple `params.yaml` files in the params/config(?) folder for testing the node or for different configurations."
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4ATFaN,kaspermeck-arm,"@xmfcx 

I know I committed to creating a working example for the _stop_filter_ using the PickNikRobotic's generate parameter library. I don't have bandwidth for this right now and would like to postpone that effort to focus on getting things done faster. Is this OK?

@ambroise-arm and I looked at how we can adopt the yaml file layout which is used in PickNikRobotic's library. This proposed approach will work with minor modifications to _declare_parameter(...)_. For example using [lidar_apollo_segmentation_tvm_nodes](https://github.com/autowarefoundation/autoware.universe/tree/main/perception/lidar_apollo_segmentation_tvm_nodes) as a base and making modifications:

lidar_apollo_segmentation_tvm.param.yaml
```
/**:
  ros__parameters:
    range: {
      type: int,
      default_value: 90,
      description: ""The range of the 2D grid with respect to the origin."",
      validation: {
        bounds<>: []
      }
    }
...
```

lidar_apollo_segmentation_tvm_node.cpp

```
...
    declare_parameter(""range.default_value"", DEFINE_HOW_TO_INSERT_TYPE),
...
```

Notice that we need to add _.defalt_value_ in the _declare_parameter(...)_ function. Also, as we're removing the default value which also defined the type, we need to replace **DEFINE_HOW_TO_INSERT_TYPE** above with a way to align _range.type_. This can be done in various ways."
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4ATIO7,doganulus,"Here are some comments on the layout design started at https://github.com/orgs/autowarefoundation/discussions/3260#discussioncomment-5002893.

1. Better layout keys and parameter names use standard identifier naming rules. I think PickNik's `<>` suffix for some keys would be problematic for parsers and text editors. This doesn't look good in dot notation.
2. Currently single scalar values must be passed as arrays to validation keys in PickNik's layout. It may ease the implementation but is inconvenient for users and error-prone. The key-value pair `gt<>: [0]` is cleaner when written `gt: 0`. 
3. A top-level `version` key might be helpful to ease migrations later. 

Btw do you know anyone who uses JSON schema for `node_name.ros__parameters` by chance?

"
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4ATIrL,kenji-miyake,"> I think PickNik's <> suffix for some keys would be problematic for parsers and text editors. This doesn't look good in dot notation.

Could you show some concrete examples to discuss it more clearly?

> The key-value pair gt<>: [0] is cleaner when written gt: 0.

It might be true. I guess it's coming from the simplicity of implementation.
If you create an issue and send a pull request, the maintainers might consider accepting it.

> A top-level version key might be helpful to ease migrations later.

It might be good as well. How about proposing it in their repository?

> Btw do you know anyone who uses JSON schema for node_name.ros__parameters by chance?

I'm sorry, I'm not familiar with that. :cry: "
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4ATWXg,kenji-miyake,"FYI: There is a little related discussion https://github.com/orgs/autowarefoundation/discussions/3281, which is about the directory structure."
ROS Node Configuration,D_kwDOAnasMc4ASczH,2023-02-08T20:25:32Z,kaspermeck-arm,9,Answered,DC_kwDOAnasMc4ATeAD,kaspermeck-arm,Closing this discussion. Please find final proposal here: https://github.com/orgs/autowarefoundation/discussions/3288
Rviz display panel is blank when running Planning simulation tutorial,D_kwDOAnasMc4ASc5D,2023-02-08T23:29:43Z,kasper-helm,3,Answered,,,
Rviz display panel is blank when running Planning simulation tutorial,D_kwDOAnasMc4ASc5D,2023-02-08T23:29:43Z,kasper-helm,3,Answered,DC_kwDOAnasMc4ASvd_,maxime-clem,"Can you try running `rviz2` ? With the default configuration, you are supposed to at least see a grid.
![image](https://user-images.githubusercontent.com/78338830/217691207-f8679cf0-f819-484b-8155-1e4c59fd012b.png)

If you do not see anything, this is a display issue.
If you see the grid, this could an issue with the rviz configuration of Autoware, or with the map/localization where the camera is not centered on the map."
Rviz display panel is blank when running Planning simulation tutorial,D_kwDOAnasMc4ASc5D,2023-02-08T23:29:43Z,kasper-helm,3,Answered,DC_kwDOAnasMc4ASvfl,kasper-helm,"Thank you for your quick response, Maxime.
Unfortunately, it seems to be a display driver issue since I do not see a grid in `rviz2`
![image](https://user-images.githubusercontent.com/102066312/217694107-073ba797-eb1e-4ff4-a8a5-5f0ba7c4422f.png)

Note that I did not have this problem when I tried it in ~July 2022, using the same host system. This was around cuda 11.4 or so. See [here](https://github.com/autowarefoundation/autoware/discussions/2761)."
Rviz display panel is blank when running Planning simulation tutorial,D_kwDOAnasMc4ASc5D,2023-02-08T23:29:43Z,kasper-helm,3,Answered,DC_kwDOAnasMc4ASvip,maxime-clem,It looks like several people are encountering a similar issue but I am not sure if it is the same as yours: https://github.com/ros2/rviz/issues/948
Rviz display panel is blank when running Planning simulation tutorial,D_kwDOAnasMc4ASc5D,2023-02-08T23:29:43Z,kasper-helm,3,Answered,DC_kwDOAnasMc4ASxXk,kasper-helm,I believe this has been listed as an issue in https://github.com/autowarefoundation/autoware.universe/issues/2789
Rviz display panel is blank when running Planning simulation tutorial,D_kwDOAnasMc4ASc5D,2023-02-08T23:29:43Z,kasper-helm,3,Answered,DC_kwDOAnasMc4AS2S7,kasper-helm,"I believe this issue was caused by some configuration parameter for X server I was using to view Rviz. I was using the below config file, and assume that there is something preventing the Rviz window from automatically resizing. Or it could be one of the refresh rate parameters is incompatible with Rviz. My working solution is to run X server without the config file arugment.
```
Section ""Monitor""
  Identifier ""Monitor0""
  HorizSync 28.0-80.0
  VertRefresh 48.0-75.0
  # https://arachnoid.com/modelines/
  # 1920x1080 @ 60.00 Hz (GTF) hsync: 67.08 kHz; pclk: 172.80 MHz
  Modeline ""1920x1080_60.00"" 172.80 1920 2040 2248 2576 1080 1081 1084 1118 -HSync +Vsync
EndSection
Section ""Device""
  Identifier ""Card0""
  Driver ""dummy""
  VideoRam 256000
EndSection
Section ""Screen""
  DefaultDepth 24
  Identifier ""Screen0""
  Device ""Card0""
  Monitor ""Monitor0""
  SubSection ""Display""
    Depth 24
    Modes ""1920x1080_60.00""
  EndSubSection
EndSection
```"
Rosbag replay simulation: localization fails to initialize [NDT align server failed],D_kwDOAnasMc4ASfVX,2023-02-11T01:54:16Z,kasper-helm,1,Answered,,,
Rosbag replay simulation: localization fails to initialize [NDT align server failed],D_kwDOAnasMc4ASfVX,2023-02-11T01:54:16Z,kasper-helm,1,Answered,DC_kwDOAnasMc4AS2Td,kminoda,"Hi, thanks for the report!

The log ""No InputSource"" indicates that the LiDAR scan input is not properly sent to ndt_scan_matcher.  I guess investigating the messages around the NDT node would be a good start."
Pose initializer did not run when launch localization moudle,D_kwDOAnasMc4ASf6r,2023-02-12T08:22:41Z,wangxianggang1997,1,Answered,,,
Pose initializer did not run when launch localization moudle,D_kwDOAnasMc4ASf6r,2023-02-12T08:22:41Z,wangxianggang1997,1,Answered,DC_kwDOAnasMc4AS5b2,rsasaki0109,"The Runtime Monitor in rqt may be able to tell you the cause of the problem.
Can you give me a screenshot of it?"
CMake Warning  during colcon built,D_kwDOAnasMc4ASgE7,2023-02-12T14:45:41Z,AviBen96,1,Answered,,,
CMake Warning  during colcon built,D_kwDOAnasMc4ASgE7,2023-02-12T14:45:41Z,AviBen96,1,Answered,DC_kwDOAnasMc4AS5GM,zulfaqar-azmi-t4,"Hi @AviBen96 
Thank you very much for asking.
Under normal circumstances, `stderr` warnings can be ignored, as it might be generated due to the code from the library that is included.

Is there any issues occured when you ran the planning simulator?"
CMake Warning  during colcon built,D_kwDOAnasMc4ASgE7,2023-02-12T14:45:41Z,AviBen96,1,Answered,DC_kwDOAnasMc4AS6jF,AviBen96,"Thank you very much for your quick answer ! So I should be able to safely ignore those 22 packages warning ? 

I am still on very basing uses but everything seems to build and work fine for the moment ! Thank you :)
"
CMake Warning  during colcon built,D_kwDOAnasMc4ASgE7,2023-02-12T14:45:41Z,AviBen96,1,Answered,DC_kwDOAnasMc4AS89P,zulfaqar-azmi-t4,"> So I should be able to safely ignore those 22 packages warning

Yes. It is safe to ignore them for normal use cases.
A few of these are compiler related warnings which warns about code quality etc.

We tried to reduced them on Autoware side by performing clang-tidy check etc."
CMake Warning  during colcon built,D_kwDOAnasMc4ASgE7,2023-02-12T14:45:41Z,AviBen96,1,Answered,DC_kwDOAnasMc4AS-LH,AviBen96,Great thank you very much ! 
2023-02-13 ODD working group weekly meeting (129),D_kwDOAnasMc4ASghu,2023-02-13T05:51:41Z,Igata-ctrl,0,Unanswered,,,
Software WG Meeting 2023/02/21,D_kwDOAnasMc4AShof,2023-02-14T08:20:49Z,BonoloAWF,1,Answered,,,
Software WG Meeting 2023/02/21,D_kwDOAnasMc4AShof,2023-02-14T08:20:49Z,BonoloAWF,1,Answered,DC_kwDOAnasMc4ATUP5,maxime-clem,"Here are the slides for the presentation about integrating  PRODRIVERⓇ with Autoware.
[EmbotechIntegration_SoftwareWG_2023_02.pdf](https://github.com/autowarefoundation/autoware/files/10793572/EmbotechIntegration_SoftwareWG_2023_02.pdf)
"
2023-02-15 Simulation Working group Meeting,D_kwDOAnasMc4ASiv6,2023-02-15T09:42:13Z,WJaworskiRobotec,1,Answered,,,
2023-02-15 Simulation Working group Meeting,D_kwDOAnasMc4ASiv6,2023-02-15T09:42:13Z,WJaworskiRobotec,1,Answered,DC_kwDOAnasMc4ATTNk,Hyeongseok-Jeon,"@WJaworskiRobotec 

I have checked internally for the highway model. Unfortunately, this map has copyright issue in sharing with any other entity and this map has to be used internal purpose. But as Tier IV, we can generated virtual highway environment (digital twin also feasible if the data exists) including LL2."
[Question][help]how to subscribe Lidar  Radar and real ground truth state of the system  in ROS for EKF.,D_kwDOAnasMc4ASjKw,2023-02-15T17:51:33Z,arjunshetty955,0,Unanswered,,,
Introduction of a library for the replacement of heap allocation in Autoware,D_kwDOAnasMc4ASjpl,2023-02-16T08:25:17Z,sykwer,4,Answered,,,
Introduction of a library for the replacement of heap allocation in Autoware,D_kwDOAnasMc4ASjpl,2023-02-16T08:25:17Z,sykwer,4,Answered,DC_kwDOAnasMc4ATyVi,sykwer,Added to `autoware.repos` in https://github.com/autowarefoundation/autoware/pull/3306
Introduction of a library for the replacement of heap allocation in Autoware,D_kwDOAnasMc4ASjpl,2023-02-16T08:25:17Z,sykwer,4,Answered,DC_kwDOAnasMc4AT8dI,sykwer,Roadmap to stable debian package:  https://github.com/autowarefoundation/autoware/issues/3310
Introduction of a library for the replacement of heap allocation in Autoware,D_kwDOAnasMc4ASjpl,2023-02-16T08:25:17Z,sykwer,4,Answered,DC_kwDOAnasMc4AT8ig,mgarnett21,"unsubscribe
















At 2023-03-07 21:38:21, ""Takahiro Ishikawa"" ***@***.***> wrote:

Roadmap to stable debian package: #3310

—
Reply to this email directly, view it on GitHub, or unsubscribe.
You are receiving this because you are subscribed to this thread.Message ID: ***@***.***>"
Introduction of a library for the replacement of heap allocation in Autoware,D_kwDOAnasMc4ASjpl,2023-02-16T08:25:17Z,sykwer,4,Answered,DC_kwDOAnasMc4AWXE4,xmfcx,"@sykwer thanks a lot for working on this.

I've merged https://github.com/autowarefoundation/autoware/pull/3306

> Where to manage the documentation

Could you create the steps to set up, run and adjust the parameters in the [how-to-guides](https://github.com/autowarefoundation/autoware-documentation/tree/a15b5deebd0fdc6e5bdccafb99614120bec4f5ae/docs/how-to-guides) folder?

I think `configuring-heaphook.md` could be a good file name. Once it's created, we can relocate it if necessary.

> Needs Tests?

Once the documentation is out, we would like to test it on Leo Drive's vehicles to evaluate its performance.

For the unit tests, I think for this repo and the way it's integrated, integration tests (where multiple nodes run together in the test) could be suitable. But it's not too high priority just yet.

Do you have any specific nodes you'd like to run unit tests with it?

### Launch file integration

Do you have plans to make it a part of [autoware.universe launch files](https://github.com/autowarefoundation/autoware.universe/tree/main/launch)?"
Handling invalid / out of ODD areas,D_kwDOAnasMc4ASj-H,2023-02-16T15:13:10Z,ahmeddesokyebrahim,6,Answered,,,
Handling invalid / out of ODD areas,D_kwDOAnasMc4ASj-H,2023-02-16T15:13:10Z,ahmeddesokyebrahim,6,Answered,DC_kwDOAnasMc4ATXCZ,xmfcx,"Hi @ahmeddesokyebrahim ,

Thank you for your proposal on how to handle disabled areas for a Lanelet2 map for the planning stack. I appreciate your creativity and effort in finding a solution for this challenge.

Your idea of generating artificial stop lines at the boundaries of the ODD-excluded areas is interesting and could potentially prevent vehicles from entering those areas. However, If the vehicle is already inside a disabled area, it might not see the virtual stop lines and could move.

In order to prevent this scenario, we could add a new ""odd_excluded"" [tag to the Lanelet2 map](https://github.com/fzi-forschungszentrum-informatik/Lanelet2/blob/master/lanelet2_core/doc/LaneletAndAreaTagging.md) and a new [`scene_module`](https://github.com/autowarefoundation/autoware.universe/tree/main/planning/behavior_velocity_planner/src/scene_module) for the `behavior_velocity_planner` package that would stop the vehicle in the areas marked with this tag and create an RTC(request to cooperate) for the driver to take over.
The new module could be named ""odd_excluded"" too.

cc. @TakaHoribe @mitsudome-r @mehmetdogru @taikitanaka3 "
Handling invalid / out of ODD areas,D_kwDOAnasMc4ASj-H,2023-02-16T15:13:10Z,ahmeddesokyebrahim,6,Answered,DC_kwDOAnasMc4AT1LA,ahmeddesokyebrahim,"Following up the discussion ...
- I have created an [issue](https://github.com/autowarefoundation/autoware/issues/3308) to implement this idea
- Till now, there are several PRs in different repos: 
  - [autoware_universe](https://github.com/autowarefoundation/autoware.universe/pull/3000)
  - [autoware_launch](https://github.com/autowarefoundation/autoware_launch/pull/235)
  - [autoware_adapi_msgs](https://github.com/autowarefoundation/autoware_adapi_msgs/pull/27)
  - [tier4/tier4_autoware_msgs](https://github.com/tier4/tier4_autoware_msgs/pull/76)
  
Next Steps ... 
- Implement RTC(request to cooperate) for the driver to take over.
- Annotating the mentioned part of Gebza map and mark it as invalid lanelet.
- Test the implementation as mentioned in [autoware_universe](https://github.com/autowarefoundation/autoware.universe/pull/3000) --> Test performed
"
Handling invalid / out of ODD areas,D_kwDOAnasMc4ASj-H,2023-02-16T15:13:10Z,ahmeddesokyebrahim,6,Answered,DC_kwDOAnasMc4AUNuo,TakaHoribe,"Hi @ahmeddesokyebrahim, thank you for your nice work for out of ODD handling. And sorry to comment on the discussion posted a month ago, but please let me post this as a memo.

I agree with the concept of stopping at the virtual stop line when deviating from ODD. And as @xmfcx suggested in the comment above, the tag ""virtual_stop_line"" alone may not clearly show what it means. It would be better to add more explicit information indicating that it is outside ODD.

Alternatively, it could be a good idea to use something like a geofence, which is frequently used in drone applications. In the HDMap, define a geofence area (or a prohibited area) and when crossing it, stop at the corresponding (or automatically generated) stop line and notify the driver. It may be easier for developers to design by enclosing drivable or non-drivable areas with polygons, rather than tagging all lanelets. Moreover, this approach can be used when autonomous vehicle drives in areas where lanes are not defined in the future. This is an advanced option, so I would appreciate if we can continue discussing this."
Handling invalid / out of ODD areas,D_kwDOAnasMc4ASj-H,2023-02-16T15:13:10Z,ahmeddesokyebrahim,6,Answered,DC_kwDOAnasMc4AUhPe,ahmeddesokyebrahim,"The following PRs in these mentioned repos will be intended for review after today's ASWG 21st March meeting : 
  

- [x]  [autoware_documentation](https://github.com/autowarefoundation/autoware-documentation/pull/337) [no code change - just diagram]
- [x]  [autoware_common - part I](https://github.com/autowarefoundation/autoware_common/pull/175) [no code change - just documentation]
- [x]  [autoware_common - part II](https://github.com/autowarefoundation/autoware_common/pull/188) [no code change - just documentation refactoring]
  
:exclamation: **Merge sequence must follow this order** :exclamation: 

- [x]  [tier4/tier4_autoware_msgs - part I](https://github.com/tier4/tier4_autoware_msgs/pull/76) 
- [x] [tier4/tier4_autoware_msgs - part II](https://github.com/tier4/tier4_autoware_msgs/pull/87)
- [x]  [autoware_adapi_msgs](https://github.com/autowarefoundation/autoware_adapi_msgs/pull/27)
- [x]  [autoware_launch](https://github.com/autowarefoundation/autoware_launch/pull/235)
- [x]  [autoware_universe - part I](https://github.com/autowarefoundation/autoware.universe/pull/3000)
- [x]  [autoware_universe - part II](https://github.com/autowarefoundation/autoware.universe/pull/3967) [refactoring updates]
- [ ] ~[tier4/tier4_ad_api_adaptor](https://github.com/tier4/tier4_ad_api_adaptor/pull/95)~"
Handling invalid / out of ODD areas,D_kwDOAnasMc4ASj-H,2023-02-16T15:13:10Z,ahmeddesokyebrahim,6,Answered,DC_kwDOAnasMc4AV2cX,mitsudome-r,"@ahmeddesokyebrahim  Could you also add updates to documentation in autoware_common?
I would like to collect information about Autoware's custom tags in lanelet2_extension package.
https://github.com/autowarefoundation/autoware_common/blob/main/tmp/lanelet2_extension/docs/lanelet2_format_extension.md#optional-taggings"
Handling invalid / out of ODD areas,D_kwDOAnasMc4ASj-H,2023-02-16T15:13:10Z,ahmeddesokyebrahim,6,Answered,DC_kwDOAnasMc4AV3CG,ahmeddesokyebrahim,"Thanks @mitsudome-r san for your comment.
I have updated [autoware_common](https://github.com/autowarefoundation/autoware_common/pull/175) lanelet2_format_extention documentation with the new optional invalid lanelet tag. "
Handling invalid / out of ODD areas,D_kwDOAnasMc4ASj-H,2023-02-16T15:13:10Z,ahmeddesokyebrahim,6,Answered,DC_kwDOAnasMc4AUiCz,ahmeddesokyebrahim,"The following videos show the current progress with invalid lanelet : 
- Approaching and stopping before invalid lanelet with RTC : 
  - https://www.youtube.com/watch?v=Mf5VHlo8UBU
- Started inside invalid lanelet and not moving with RTC
  - https://www.youtube.com/watch?v=lWZgFIjI7Hk"
Handling invalid / out of ODD areas,D_kwDOAnasMc4ASj-H,2023-02-16T15:13:10Z,ahmeddesokyebrahim,6,Answered,DC_kwDOAnasMc4AUiD0,ahmeddesokyebrahim,"This file includes lanelets with invalid tag added with value 'yes'.
It can be used for testing : https://drive.google.com/file/d/1OwrIjSwxcvhes2ngDKhe2iL5s3TWPzUz/view?usp=sharing
"
Handling invalid / out of ODD areas,D_kwDOAnasMc4ASj-H,2023-02-16T15:13:10Z,ahmeddesokyebrahim,6,Answered,DC_kwDOAnasMc4AWMKN,ahmeddesokyebrahim,"The following video shows a working demo after changing the module name from `invalid_lanelet` to `no_drivable_lane` based on the [review comment](https://github.com/autowarefoundation/autoware.universe/pull/3000#discussion_r1186151837) suggested by @yukkysaito san.

https://youtu.be/XKDQn2bcMPQ

As well, the following map file can be used for testing after changing the tag name.

https://drive.google.com/file/d/1oH9Q0Sk9pm-ttF34Vx-bceQCx9Ja-xmS/view?usp=share_link"
null pointer error for awsim,D_kwDOAnasMc4ASkbV,2023-02-17T03:20:06Z,joseph16388,1,Answered,,,
null pointer error for awsim,D_kwDOAnasMc4ASkbV,2023-02-17T03:20:06Z,joseph16388,1,Answered,DC_kwDOAnasMc4ATx0I,maxime-clem,This issue is being discussed in the AWSIM repository: https://github.com/tier4/AWSIM/issues/92
How to reverse car from autoware algorithm,D_kwDOAnasMc4ASkbb,2023-02-17T03:24:04Z,joseph16388,1,Answered,,,
How to reverse car from autoware algorithm,D_kwDOAnasMc4ASkbb,2023-02-17T03:24:04Z,joseph16388,1,Answered,DC_kwDOAnasMc4ATWSM,satoshi-ota,"Hi @joseph16388 :smiley: 
Thanks for comment, but could you tell us more details about your question?

You want to know the algorithm for backward driving, right?"
Connection problem between AWSIM and autoware,D_kwDOAnasMc4ASkkL,2023-02-17T07:38:29Z,nitro6206,1,Answered,,,
Connection problem between AWSIM and autoware,D_kwDOAnasMc4ASkkL,2023-02-17T07:38:29Z,nitro6206,1,Answered,DC_kwDOAnasMc4ATHDL,evshary,"Not sure why the content disappears after your editing, but for your original question, ""e2e_simulator.launch.xml"" should get the vehicle pose automatically.
Maybe you can try the following configuration (This works for me)

Set once time only:
```bash
sudo sysctl -w net.core.rmem_max=2147483647
sudo ip link set lo multicast on
```
Run this for every new terminal (You can put it into bashrc)
```bash
# Limit the DDS traffic internally
export ROS_LOCALHOST_ONLY=1
# Avoid conflicting with other ROS program
export ROS_DOMAIN_ID=1
export RMW_IMPLEMENTATION=rmw_cyclonedds_cpp
```

Also, you can check whether another Autoware is running on your machine and stop it (I forgot to close the old Autoware sometimes...)
If still can't work, maybe you can provide more log.
"
Connection problem between AWSIM and autoware,D_kwDOAnasMc4ASkkL,2023-02-17T07:38:29Z,nitro6206,1,Answered,DC_kwDOAnasMc4ATHb6,nitro6206,"Sorry, I deleted it when I was trying to change the content because it was resolved.
Thank you very much for your reply."
Connection problem between AWSIM and autoware,D_kwDOAnasMc4ASkkL,2023-02-17T07:38:29Z,nitro6206,1,Answered,DC_kwDOAnasMc4ATHhL,evshary,"Congrats! I think that's OK to leave your original question here, and you can add your solution.
I think it'll help others who might have the same question as you."
Connection problem between AWSIM and autoware,D_kwDOAnasMc4ASkkL,2023-02-17T07:38:29Z,nitro6206,1,Answered,DC_kwDOAnasMc4ATHhu,nitro6206,"Thenk you for reply.
You're right.
So I returned it.
Thank you very much."
2023-02-20 ODD working group weekly meeting (130),D_kwDOAnasMc4ASmiQ,2023-02-20T04:56:34Z,Igata-ctrl,0,Unanswered,,,
"Rename modules ""config"" directory to ""sample_config"" or the config files to ""sampler_*.params.yaml""?",D_kwDOAnasMc4ASnlJ,2023-02-21T08:10:00Z,VRichardJP,2,Answered,,,
"Rename modules ""config"" directory to ""sample_config"" or the config files to ""sampler_*.params.yaml""?",D_kwDOAnasMc4ASnlJ,2023-02-21T08:10:00Z,VRichardJP,2,Answered,DC_kwDOAnasMc4ATWTa,kenji-miyake,"@VRichardJP I think it might be a good idea. I'll ask other developers in TIER IV about it.

Regarding the last option, I feel it's not good because it would be confusing when we sync parameters in `autoware.universe` and `autoware_launch` like this: https://github.com/autowarefoundation/autoware_launch/pull/161
I mean, the comment in the sample parameter file will also be in the actual parameter file.

Note: If we do this, we must update https://autowarefoundation.github.io/autoware-documentation/main/contributing/coding-guidelines/ros-nodes/parameters/."
"Rename modules ""config"" directory to ""sample_config"" or the config files to ""sampler_*.params.yaml""?",D_kwDOAnasMc4ASnlJ,2023-02-21T08:10:00Z,VRichardJP,2,Answered,DC_kwDOAnasMc4ATWUL,kminoda,"I agree to both @VRichardJP and @kenji-miyake, it's a good idea to specify that it is merely a default parameter.

(brainstorming)
1. `autoware.universe/.../sample_config/ndt_scan_matcher.param.xml`
2. `autoware.universe/.../config/sample_ndt_scan_matcher.param.xml`
3. `autoware.universe/.../config/ndt_scan_matcher.sample.param.xml`
4. `autoware.universe/.../config/sample.ndt_scan_matcher.param.xml`

IMHO it's better to use `default` rather than `sample`, but would like to hear other opinions, too."
"Rename modules ""config"" directory to ""sample_config"" or the config files to ""sampler_*.params.yaml""?",D_kwDOAnasMc4ASnlJ,2023-02-21T08:10:00Z,VRichardJP,2,Answered,DC_kwDOAnasMc4ATWVh,kenji-miyake,"[Memo]
nav2: params
https://github.com/ros-planning/navigation2/tree/main/nav2_bringup/params

moveit: config / default_configs
https://github.com/ros-planning/moveit2/tree/main/moveit_kinematics/cached_ik_kinematics_plugin/config
https://github.com/ros-planning/moveit2/tree/main/moveit_configs_utils/default_configs

> IMHO it's better to use default rather than sample, but would like to hear other opinions, too.

If we specify the parameter file in the sample node-launch file (if it's the default), I think `default` is natural."
"Rename modules ""config"" directory to ""sample_config"" or the config files to ""sampler_*.params.yaml""?",D_kwDOAnasMc4ASnlJ,2023-02-21T08:10:00Z,VRichardJP,2,Answered,DC_kwDOAnasMc4ATWXm,mitsudome-r,"In my understanding, both parameter files are just samples and meant to be modified by the user.
The parameter file in a node package is a sample parameter to run the node alone, whereas the parameter in the launch file are sample to be used in a launch file which might be tuned to be aligned with other nodes.

However, it is true that there are parameter files with the same name in different places so I agree to rename one of them to avoid confusion. (I don't mind using either `sample` or `default`)"
"Rename modules ""config"" directory to ""sample_config"" or the config files to ""sampler_*.params.yaml""?",D_kwDOAnasMc4ASnlJ,2023-02-21T08:10:00Z,VRichardJP,2,Answered,DC_kwDOAnasMc4ATW4d,doganulus,"There might be multiple levels to set those parameters: Node, launch, container, CLI. I think the ability to modify/override parameters at different levels is a modern practice that boosts agility.

The lowest (node) level must be understood as default values. I am not sure whether that should be specified explicitly by the filename (but could be). When levels and merge order are well-defined, the confusion would be much less though. 

Hence, I am up for not giving too much importance to filenames, but standardizing individual parameter names and a well-defined overriding mechanism at launch.
"
Colcon build failure,D_kwDOAnasMc4ASnzI,2023-02-21T12:43:45Z,izzetbasli,2,Answered,,,
Colcon build failure,D_kwDOAnasMc4ASnzI,2023-02-21T12:43:45Z,izzetbasli,2,Answered,DC_kwDOAnasMc4ATUSN,maxime-clem,"Some packages output warnings when built and this can usually be safely ignored.
This is mostly caused by external headers not complying with the static analyzer used by Autoware.

Probably related to https://github.com/autowarefoundation/autoware/discussions/3269"
Colcon build failure,D_kwDOAnasMc4ASnzI,2023-02-21T12:43:45Z,izzetbasli,2,Answered,DC_kwDOAnasMc4ATUXT,izzetbasli,"> Some packages output warnings when built and this can usually be safely ignored. This is mostly caused by external headers not complying with the static analyzer used by Autoware.
> 
> Probably related to #3269

Thanks for your answer. 
You are right but there is a point, it is not configure with AWSIM because of these failed packages. Is there any recommended version of these external headers ?

[here](https://imgur.com/a/FH2fvLo) you can access screenshot of failes.
"
Colcon build failure,D_kwDOAnasMc4ASnzI,2023-02-21T12:43:45Z,izzetbasli,2,Answered,DC_kwDOAnasMc4ATb_Z,maxime-clem,"Thank you for sharing screenshots.
Can you explain the issue in more details ? The `No transform from [...] to [map]`  messages may just mean that you did not set an initial pose.

When you built Autoware, what was the summary ? E.g., the following summary indicates 4 packages with stderr but they still built completely and can be used (unless stated otherwise in the error message).
```
Summary: 295 packages finished [1min 10s]
  4 packages had stderr output: foa_hazard_monitor foa_quick openscenario_utility scenario_test_runner
```
In case of failure, you will see a summary like:
```
Summary: 294 packages finished [21.2s]
  1 package failed: failing_package
  5 packages had stderr output: foa_hazard_monitor foa_quick openscenario_utility failing_package scenario_test_runner
```

Also, are you able to run the planning simulator following the [tutorial](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/) ?"
Colcon build failure,D_kwDOAnasMc4ASnzI,2023-02-21T12:43:45Z,izzetbasli,2,Answered,DC_kwDOAnasMc4ATcPy,izzetbasli,"when i build these packages, the output seems like that:
` 16 packages had stderr output: bag_time_manager_rviz_plugin elevation_map_loader lidar_apollo_instance_segmentation lidar_apollo_segmentation_tvm lidar_apollo_segmentation_tvm_nodes lidar_centerpoint_tvm livox_tag_filter map_tf_generator ndt_omp ndt_scan_matcher obstacle_velocity_limiter pacmod_interface system_monitor trtexec_vendor tvm_utility velodyne_pointcloud`

Also, i am able to run simulator, all tutorials works cleanly. But it doesn't work with AWSIM. The vehicle and its position doesn't initialize.
Btw:
My GPU: RTX A5000"
Colcon build failure,D_kwDOAnasMc4ASnzI,2023-02-21T12:43:45Z,izzetbasli,2,Answered,DC_kwDOAnasMc4ATcQS,maxime-clem,"Thank you for clarifying the issue.
I assume you are following the [AWSIM tutorial](https://tier4.github.io/AWSIM/GettingStarted/QuickStartDemo/) then ? 
Typically, issue with localization can be caused by an issue with the map files. Please confirm the paths are correct.
If the problem persists, please open an issue on https://github.com/tier4/AWSIM/ and post more details about the issue (you can try to prepare the same information that were requested for https://github.com/tier4/AWSIM/issues/76)."
Colcon build failure,D_kwDOAnasMc4ASnzI,2023-02-21T12:43:45Z,izzetbasli,2,Answered,DC_kwDOAnasMc4ATUc2,fadimecetiner,"I have same issue. 
How can i fix this issue?"
Software WG Meeting 2023/02/28,D_kwDOAnasMc4ASoGy,2023-02-21T17:43:45Z,BonoloAWF,0,Unanswered,,,
2023-02-16 Racking Working Group Meeting,D_kwDOAnasMc4ASoL_,2023-02-21T19:23:19Z,QZJGeorge,0,Unanswered,,,
compile autoware in ubuntu2204 with ros humble fails in step to source the environment,D_kwDOAnasMc4ASof6,2023-02-22T04:24:55Z,wutianze,1,Answered,,,
compile autoware in ubuntu2204 with ros humble fails in step to source the environment,D_kwDOAnasMc4ASof6,2023-02-22T04:24:55Z,wutianze,1,Answered,DC_kwDOAnasMc4ATWeU,ktro2828,"@wutianze Are there any `stderr` around trtexec_vedor and tensorrt_common while building? like following
```
--- stderr: trtexec_vendor                           
CUDA_TOOLKIT_ROOT_DIR not found or specified
CMake Warning at CMakeLists.txt:21 (message):
  cuda, cudnn, tensorrt libraries are not found
```"
compile autoware in ubuntu2204 with ros humble fails in step to source the environment,D_kwDOAnasMc4ASof6,2023-02-22T04:24:55Z,wutianze,1,Answered,DC_kwDOAnasMc4ATWfB,wutianze,"Thanks for your reply.
Yes, when the colcon build start, there shows a long list like: 
`[0.610s] WARNING:colcon.colcon_ros.prefix_path.ament:The path '/home/user0/autoware/install/vls_description' in the environment variable AMENT_PREFIX_PATH doesn't exist`
Then, during the build, some warnings happens( cuda, xxx not found included). But everything went well before the colcon building
"
compile autoware in ubuntu2204 with ros humble fails in step to source the environment,D_kwDOAnasMc4ASof6,2023-02-22T04:24:55Z,wutianze,1,Answered,DC_kwDOAnasMc4ATWfm,wutianze,"> @wutianze Are there any `stderr` around trtexec_vedor and tensorrt_common while building? like following
> 
> ```
> --- stderr: trtexec_vendor                           
> CUDA_TOOLKIT_ROOT_DIR not found or specified
> CMake Warning at CMakeLists.txt:21 (message):
>   cuda, cudnn, tensorrt libraries are not found
> ```

And I do remember last time I run colcon build, the build process finished successfully, which I think it means the cuda stuff is installed successfully. However, this time(I rerun the whole process to check the stderr you pointed out) the building finishes with some stderrs"
compile autoware in ubuntu2204 with ros humble fails in step to source the environment,D_kwDOAnasMc4ASof6,2023-02-22T04:24:55Z,wutianze,1,Answered,DC_kwDOAnasMc4ATWf1,wutianze,"> > @wutianze Are there any `stderr` around trtexec_vedor and tensorrt_common while building? like following
> > ```
> > --- stderr: trtexec_vendor                           
> > CUDA_TOOLKIT_ROOT_DIR not found or specified
> > CMake Warning at CMakeLists.txt:21 (message):
> >   cuda, cudnn, tensorrt libraries are not found
> > ```
> 
> And I do remember last time I run colcon build, the build process finished successfully, which I think it means the cuda stuff is installed successfully. However, this time(I rerun the whole process to check the stderr you pointed out) the building finishes with some stderrs

I run the colcon build again(based on the first build without deleting anything), this time it shows that all 235 packages finished, and only one warning shows:
`[25.137s] WARNING:colcon.colcon_cmake.task.cmake.build:Could not run installation step for package 'tensorrt_yolox' because it has no 'install' target`"
compile autoware in ubuntu2204 with ros humble fails in step to source the environment,D_kwDOAnasMc4ASof6,2023-02-22T04:24:55Z,wutianze,1,Answered,DC_kwDOAnasMc4ATWh2,wutianze,"I am quite confused. I delete the install dir and colcon build again, this time, the long warning list shows again:
```
[0.610s] WARNING:colcon.colcon_ros.prefix_path.ament:The path '/home/user0/autoware/install/vls_description' in the environment variable AMENT_PREFIX_PATH doesn't exist
......
```
and the only warning during the build is `[38.772s] WARNING:colcon.colcon_cmake.task.cmake.build:Could not run installation step for package 'tensorrt_yolox' because it has no 'install' target`
Finally, the build finished with Summary: `235 packages finished [44.1s]`
But then I source the autoware/install/setup.bash again, two warnings are still there: 
```
not found: ""/home/usr0/autoware/install/tensorrt_common/share/tensorrt_common/local_setup.bash""
not found: ""/home/usr0/autoware/install/trtexec_vendor/share/trtexec_vendor/local_setup.bash""
```

"
compile autoware in ubuntu2204 with ros humble fails in step to source the environment,D_kwDOAnasMc4ASof6,2023-02-22T04:24:55Z,wutianze,1,Answered,DC_kwDOAnasMc4ATWjL,ktro2828,"> I delete the install dir and colcon build again

It you deleted only install dir,  please try re-build after `rm -rf build/ install/ log/` or colcon build with `--cmake-clean-first`

Also, check cuda has been installed with `$ nvcc --version`"
compile autoware in ubuntu2204 with ros humble fails in step to source the environment,D_kwDOAnasMc4ASof6,2023-02-22T04:24:55Z,wutianze,1,Answered,DC_kwDOAnasMc4ATWlo,wutianze,"> > I delete the install dir and colcon build again
> 
> It you deleted only install dir, please try re-build after `rm -rf build/ install/ log/` or colcon build with `--cmake-clean-first`
> 
> Also, check cuda has been installed with `$ nvcc --version`

Yes, cuda is installed. I tried again with clean, the result is like the first time build:
```
Summary: 235 packages finished [15min 43s]
  28 packages had stderr output: compare_map_segmentation costmap_generator detection_by_tracker elevation_map_loader euclidean_cluster front_vehicle_velocity_estimator ground_segmentation image_projection_based_fusion lanelet2_map_preprocessor lidar_apollo_instance_segmentation lidar_apollo_segmentation_tvm lidar_apollo_segmentation_tvm_nodes lidar_centerpoint lidar_centerpoint_tvm map_loader map_tf_generator ndt_omp ndt_scan_matcher obstacle_collision_checker obstacle_stop_planner obstacle_velocity_limiter occupancy_grid_map_outlier_filter pacmod_interface pointcloud_preprocessor probabilistic_occupancy_grid_map static_centerline_optimizer system_monitor velodyne_pointcloud
```"
compile autoware in ubuntu2204 with ros humble fails in step to source the environment,D_kwDOAnasMc4ASof6,2023-02-22T04:24:55Z,wutianze,1,Answered,DC_kwDOAnasMc4ATWtP,ktro2828,"It's OK you ignore these warnings as similar to #3282 #3269
Do you still get same errors, when `source instatall/setup.bash` ?"
compile autoware in ubuntu2204 with ros humble fails in step to source the environment,D_kwDOAnasMc4ASof6,2023-02-22T04:24:55Z,wutianze,1,Answered,DC_kwDOAnasMc4ATX7p,wutianze,"> It's OK you ignore these warnings as similar to #3282 #3269 Do you still get same errors, when `source instatall/setup.bash` ?

Thank you so much. I clear all the dirs and build it from the very beginning, and it worked. I think it is important to reboot the PC after installing the cuda stuff. Also, the opengl may not work sometimes which cause the failure of RViz"
Open AD Kit WG meeting 2023/2/22,D_kwDOAnasMc4ASo5s,2023-02-22T14:30:19Z,HamburgDave,0,Unanswered,,,
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,,,
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4ATmF-,kenji-miyake,"> parameter file path: autoware.universe/.../config/*.param.yaml

There is a related discussion: https://github.com/orgs/autowarefoundation/discussions/3281
It suggests changing the directory name from `config` to `default_config` or something."
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4ATrnE,kaspermeck-arm,"@kenji-miyake 

I think having `default` in the name of the parameter file would make more sense, as there might be multiple parameter configurations for a single node, i.e., more than one parameter file. Adding `default` would make the parameter file name even longer and I don't know how much value this would actually add. An alternative is that the parameter file which has the name of the node is the default one."
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4ATr-7,kenji-miyake,"@kasperornmeck Thank you!
Would it be possible for you to write the comment also in the linked discussion thread, with some examples like the format of https://github.com/orgs/autowarefoundation/discussions/3281#discussioncomment-5072139?"
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4ATmGP,kenji-miyake,"> Please note, the library as a whole will not be adopted as this is quite an invasive change.

@kasperornmeck Do you mean like this by this sentence? In that case, it may be a good point of compromise.

```mermaid
flowchart TD
    ParameterDefinitionFile[Parameter definition file\n with PickNik's format]
    SampleParameterFile[Sample parameter file\nin autoware.universe]
    RealParameterFile[Real parameter file\nin autoware_launch]
    RuntimeLibrary[Runtime parameter-loading code]
    Node[Node]

    ParameterDefinitionFile -->|Generate| SampleParameterFile
    ParameterDefinitionFile -->|Generate| RuntimeLibrary
    SampleParameterFile --> |Copy the file, and modify it if nessary| RealParameterFile
    SampleParameterFile --> |Load as default| Node
    RealParameterFile --> |Load if overridden| Node
    RuntimeLibrary -.-> |Not used| Node
```"
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4ATmXU,isamu-takagi,"I'm not sure about `default_value`. The original proposal looks like using `X.default_value` instead of parameter `X` and rewrite the code so. It is necessary to change the parameter file created by node users as follows.
```
# my_config.param.yaml
ros__parameters:
  range: { default_value: 90 }
```

But according to @kenji-miyake 's diagram, it looks like a following sample parameter file is generated from a parameter definition file using default_value. No code changes required and node users can continue to use their current parameter files.
```
# sample.param.yaml and my_config.param.yaml
ros__parameters:
  range: 90
```"
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4ATrna,kaspermeck-arm,"@kenji-miyake 

We would only use the layout which PicNikRobotic's are using, see an example here: [Parameter File](https://github.com/PickNikRobotics/generate_parameter_library#create-yaml-parameter-codegen-file). We wouldn't actually use any of their code generation library or any generate functions."
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4ATrnz,kaspermeck-arm,"@isamu-takagi 

The proposal requires modifications to the `*.param.yaml` file and to the `declare_parameter(...)` function in the ROS node."
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4ATsAF,kenji-miyake,"> and to the declare_parameter(...) function in the ROS node.

@kasperornmeck Hmm, this would be a significant change. We should consider some other alternative methods such as `extending the ""param"" action in launch` (implemented around https://github.com/ros2/launch_ros/blob/6daacbce4bade7ed40f86f16a30a08b4d7ee9272/launch_ros/launch_ros/actions/node.py#L277-L303).
I mean, we need more architectural discussions on this decision.
cc @xmfcx @mitsudome-r @yukkysaito "
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4ATtpf,kaspermeck-arm,"@kenji-miyake 

Hmm, I don't quite understand. What exactly makes this a significant change?"
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4ATtq8,kenji-miyake,"Ah, you just meant like removing default values from `declare_parameter(...)`? If so, I misunderstood that you meant adding modifications to the internal implementation of `declare_parameter`.
But in that case, you need to consider how to load parameters from the PickNik's format file. I believe it's not supported yet. So you need either offline parameter conversion or extending the launch action."
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4ATt0r,mitsudome-r,"@kenji-miyake We had extra discussion in Open AD Kit.

> But in that case, you need to consider how to load parameters from the PickNik's format file. I believe it's not supported yet. So you need either offline parameter conversion or extending the launch action.

I think you have some misunderstanding.
Kasper's intention is not to use Picniks' format directly, but to use a similar format which can be consumed as normal ROS parameter as shown in the ""Layout"" section in the proposal. However, only `default_value` is actually read from `declare_parameter` and  ""description"", ""type"", and ""validation"" would be ignored. He doesn't want to make it a comment but as a readable value in YAML format so that we can also use it to generate a table in README.md"
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4ATt1o,mitsudome-r,"I personally feel uncomfortable to add parameters that won't be used in a ROS node, but it is less intrusive than make modification to declare_parameter() function or forcing a dependency to external package."
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4ATu62,kenji-miyake,"@mitsudome-r I see. Thank you for the additional information. It's clear to me now.
If it works correctly, it seems to be okay. But I'm curious about how/when to validate the parameters. I'd like to discuss it at a later date. (Probably it's during generating the documentation?)"
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4ATw-k,kaspermeck-arm,"@mitsudome-r @kenji-miyake 

There is a full section on validation from PickNikRobotic's found here: https://github.com/PickNikRobotics/generate_parameter_library#parameter-definition

I have updated the proposal to exchange `bounds` with `validation`. After talking to @ambroise-arm today, not all parameters require validation, e.g., the range of `int64_t` could be bounds for a parameter and this would then be determined by the `type`."
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4ATvlH,kenji-miyake,"@kasperornmeck With the information from @mitsudome-r in https://github.com/orgs/autowarefoundation/discussions/3288#discussioncomment-5168427, I was able to clear my misunderstanding.

However, I have several concerns then.

1. Parameters in autoware_launch aren't validated.

I understood that your proposal only loads the parameters online, not validates them.
Regarding the parameter files in `autoware.universe`, we can validate them, for example during automatic document generation.
But it's difficult to validate parameter files in `autoware_launch` because it's located in a different repository.

It can be permissible for a while, but in the future, we need some validations to ensure system quality.
For example, online validation, or an external tool that compares the parameter file in `autoware_launch` with the parameter definition in `autoware.universe`.

2. Parameters in autoware_launch contain unnecessary information.

When we copy parameter files from `autoware.universe` to `autoware_launch`, I think the fields other than `default_value` are redundant.

```yaml
  version: '1.0' // Not used
  ros__parameters:
    range: {
      type: int, // Not used
      default_value: 90,
      description: ""The range of the 2D grid with respect to the origin"", // Not used
      validation: {
        bounds<>: [MIN_VALUE, MAX_VALUE] // Not used
      }
    }
```

If you write as follows, it's not so redundant but a little weird.
Also, it would be difficult to maintain the parameter files because you need to modify the content after copying the file. (But this can be automated if we develop a tool.)

```yaml
  ros__parameters:
    range: {
      default_value: 90,
    }
```

---

Therefore, we'd like to consider other alternatives as well.
TIER IV will discuss it next week and write ideas here if we could come up with any good ideas."
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4ATwE2,ambroise-arm,"> in the future, we need some validations to ensure system quality.

Exactly, but this is only a proposal for the first step of reworking the configuration files. Having the validation would be a second step. By having the same yaml format as the one used by PickNikRobotics, we don't close the door to using it in the future if we want to. Or if we don't want to, we can develop our own checker, but the fundamental information would still be there, ready to be used.

> I think the fields other than `default_value` are redundant

The fields other than `default_value` are not used in the Autoware code **at the moment**, but they provide information that resides nowhere else. So they are not redundant. Except for the type, which could be inferred from the default_value.

I personally don't see a problem with having information in the yaml file that is not used in the code, as it is still valuable information for the user. But I understand the concern."
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4AT4nA,doganulus,"Parameter files discussed here and the proposal are conceptually more general than the currently used ones. This is the main pain point and misunderstanding between the AWSG and OpenADKit groups. 

This is a declarative _specification_ of your nodes and their parameters. And it is desired to make it executable by allowing it to be loaded at launch as well as generating documentation. Therefore, the concept we talk about here is an _executable specification._ Parameter validation is another application that uses this specification. We also need this (default) specification to be overridden at upper levels as many modern software systems implement. See this is a powerful concept and relatively easy to adopt.

On the other hand, the current concept only deals with loading parameter values from an external source. Hence, it may seem redundant if you look at only that angle. 

And do not be confused by both concepts having been implemented by yaml files. Previously you had a single use case and writing yaml files for that. Now you write a yaml specification and use it for multiple use cases. 

Hope I was able to clarify.

"
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4AT84_,kaspermeck-arm,"@doganulus 

Can you come with a concrete example of what you think the parameter file should look like?"
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4AT8E1,kenji-miyake,"@kasperornmeck cc @mitsudome-r @xmfcx 
TIER IV has discussed this today, and the result was that there might be a better alternative solution for this purpose. I'll explain it below.

First, I think your primary purposes are the following two.
1. Automatically generate documentation from the parameter definition file.
2. Remove default_value from declare_parameter, and ensure every parameter is listed in the parameter file.

For 1, it's enough if we put a parameter definition file aside from the existing normal parameter files.
Regarding the consistency between the parameter file and its definition, we can develop a simple tool if necessary. (But ideally, it would be better to be validated online.)

For 2, it can also be done with other solutions such as https://github.com/autowarefoundation/autoware.universe/pull/2945 or using PickNik's library.

Therefore, we'd like to propose another approach: start just newly placing PickNik's parameter definition files. (No need to use the generated parameter library code.)

The approach has several advantages.
- There is no change to the existing parameter files; we can reuse them. (No need to add ""default_value"" to all files.)
  - Actually, changing the parameter format has a big impact on third-party tools that depend on the current format. (for example, a parameter management/distribution service.)
- Those who want to use PickNik's library can use it easily.

Of course, it's possible to generate documentation from the definition files if we develop a tool.

---

That's the overview of our proposal.
Since it's a little complicated, we'd like to explain this to you in more detail interactively. How about discussing it on a meeting of Open AD Kit WG or another separate meeting?
Thank you!"
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4AT8Lm,doganulus,"What @kenji-miyake describes as a parameter definition file is known as a _schema_. 

If the schema solution is the intention of TierIV, then I would suggest using [JSON Schema](https://json-schema.org/draft/2020-12/json-schema-validation.html) to define current parameter files rather than PickNik's custom format. It is standard, battle-tested, and has already many validator implementations."
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4AT8vq,kenji-miyake,"Yes, it's like that. I also think JSON Schema is useful, but I think it's not that we necessarily need to write them manually. I guess we can convert from PickNik's format to JSON Schema, for example."
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4AT84E,kaspermeck-arm,"@kenji-miyake, I'm not quite sure what you are suggesting. Do you want to use `JSON` format instead of `yaml` format?

From https://json-schema.org/#benefits

> ![image](https://user-images.githubusercontent.com/30662532/223462155-c5fc6184-2c82-4717-a286-d434d075a405.png)

Which aligns with what we're trying to achieve. 

```
/**:
  ros__parameters:
    range: {
      type: int64_t,
      default_value: 90,
      description: ""The range of the 2D grid with respect to the origin"",
      validation: {
        bounds<>: [MIN_VALUE, MAX_VALUE]
      }
    }
```

In attempt to make this into a `JSON` schema.
```
""type"": ""object"",
  ""properties"": {
    ""type"": {""type"", ""string""},
    ""default_value"": {""type"", ""number""},
    ""description"": {""type"": ""string""},
    ""validation"": {""type"": ""array""}
  }
```

Is this what you mean? If not, can you give a concrete example?

From https://json-schema.org/understanding-json-schema/about.html:
> You may have noticed that the JSON Schema itself is written in JSON. It is data itself, not a computer program. It’s just a declarative format for “describing the structure of other data”. This is both its strength and its weakness (which it shares with other similar schema languages). It is easy to concisely describe the surface structure of data, and automate validating data against it. However, since a JSON Schema can’t contain arbitrary code, there are certain constraints on the relationships between data elements that can’t be expressed. Any “validation tool” for a sufficiently complex data format, therefore, will likely have two phases of validation: one at the schema (or structural) level, and one at the semantic level. The latter check will likely need to be implemented using a more general-purpose programming language.

Specifically, **It’s just a declarative format for “describing the structure of other data”.**. So if we create a `JSON` schema, the feature we get is to ensure that all parameter files are structured correctly. Then, **The latter check will likely need to be implemented using a more general-purpose programming language.** referring to the validation."
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4AT89Z,doganulus,"Hi @kasperornmeck, I have suggested using JSON Schema if the intention is to go with a separate parameter definition file (suggested by TierIV). JSON Schema can validate both JSON and YAML documents. In this case, schemas would be used to define and validate existing `*.param.yaml` files. 

Below is an example.

```yaml
# ROS parameter file to be validated
node_name:
  ros__parameters:
    range: 90
```

And this is a JSON Schema for `node_name.param.yaml` 
```json
{
  ""$id"": ""https://www.autoware.org/schemas/node_name.schema.json"",
  ""$schema"": ""https://json-schema.org/draft/2020-12/schema"",
  ""title"": ""NodeName Schema"",
  ""type"": ""object"",
  ""properties"": {
    ""node_name"": {
      ""type"": ""object"",
      ""properties"": {
        ""ros__parameters"": {
          ""type"": ""object"",
          ""properties"": {
            ""range"": {
              ""type"": ""integer"",
              ""minimum"": 80,
              ""maximum"": 100,
              ""default"": 90
            }
          }
        }
      }
    }
  }
}
```"
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4AT9Ib,kenji-miyake,"> I'm not quite sure what you are suggesting. Do you want to use JSON format instead of yaml format?

No, but I think JSON schema can be supported in addition to YAML format.
(But it's not a big issue now.)

> Is this what you mean? If not, can you give a concrete example?

No, my proposal is just to use [PickNik's format](https://github.com/PickNikRobotics/generate_parameter_library#create-yaml-parameter-codegen-file).
Your proposal is slightly different from this format.
I believe it's good to separate the definition (PickNik's file) and the real parameters (the existing parameter files).

@kasperornmeck "
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4AT9wr,kaspermeck-arm,"@kenji-miyake 

It would really help me if you put together a complete counter-proposal with exactly what you mean, similar to the one I created at the top of this discussion.

Currently I don't understand.
- What is meant by the real parameters?
- Do you want to have two different files for the parameters?"
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4AT-Q4,kenji-miyake,"> It would really help me if you put together a complete counter-proposal with exactly what you mean, similar to the one I created at the top of this discussion.

I will describe it later.

> What is meant by the real parameters?

@kasperornmeck Mm, I'm sorry for my bad word choice. Maybe ""actual"" is a better word? :thinking: 
I meant the existing parameters that are loaded to nodes like https://github.com/autowarefoundation/autoware.universe/blob/b2a43c72979969dc07b015be1a2b9004479f7fd5/planning/behavior_path_planner/config/behavior_path_planner.param.yaml.

> Do you want to have two different files for the parameters?

Yes, the definition and the actual parameters.
It's a standard way, PickNik also supports it."
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4AT9ha,kaspermeck-arm,Edit: accidentally put the a comment as a new reply.
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4AT_Jk,kenji-miyake,"@kasperornmeck This is our proposal. Is it clear to you?

Our purposes:
- Validate parameter files.
- Remove duplicates in code.
  - declare_parameter
  - Dynamic parameter update
  - Definition of parameter structures
- Generate parameter documents automatically.
- Accomplish the above with minimal changes and minimal effort 
  - Having no API break is preferred.

TIER IV's proposal:
- Keep the existing parameter files and reuse them.
- Newly create parameter definition (schema) files.
  - Either PickNik or JSON Schema is okay, but considering Autoware is ROS-based, PickNik would be better for now.
- Those who want to use PickNik use it.
  - It can make the code around parameters efficient.
- Those who don't want to use PickNik just remove default values like https://github.com/autowarefoundation/autoware.universe/pull/2945.

What we need to do for the proposal:
- Package maintainers will create the parameter definition files of nodes.
- Package maintainers will do either:
  - Apply PickNik.
  - Remove default values from declare_parameter.
- Tool developers will develop a document generation tool.
  -  Optionally, they can also develop an offline parameter validation tool, etc.

![image](https://user-images.githubusercontent.com/31987104/223676049-0a84d36b-456f-4bba-926c-b5047df37e10.png)
"
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4AT_7G,kaspermeck-arm,"@kenji-miyake 

Thanks for the explanation.

How does your proposal address the documentation requirement?
- be rendered as a table to be used in the web documentation, similar to [NDT Scan Matcher](https://autowarefoundation.github.io/autoware.universe/main/localization/ndt_scan_matcher/#core-parameters)"
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4AT_99,kenji-miyake,"@kasperornmeck I'm not sure if I understand your question correctly, but since the format is almost the same as your proposal, I believe our proposal can do what your proposal can do."
ROS Node Configuration - Final Proposal,D_kwDOAnasMc4ASrFV,2023-02-24T19:01:36Z,kaspermeck-arm,7,Answered,DC_kwDOAnasMc4AUBXL,kaspermeck-arm,New updated discussion https://github.com/autowarefoundation/autoware/discussions/3325.
How to analysis localization using rosbag replay?,D_kwDOAnasMc4ASrV6,2023-02-25T06:38:14Z,cjffly,1,Answered,,,
How to analysis localization using rosbag replay?,D_kwDOAnasMc4ASrV6,2023-02-25T06:38:14Z,cjffly,1,Answered,DC_kwDOAnasMc4ATkAe,cjffly,"[update] OK, I intentionally shift (pcl_transform_point_cloud) the pcd map, then I launch autoware, and the rosbag replay didn't match the map. Seem a simple rosbag replay doesn't trigger any localization?

![image](https://user-images.githubusercontent.com/11035640/221687160-773a33d0-9371-47b2-8ac4-df9ea510fd35.png)
"
Question about initial positioning when integrating the vehicle with the autoware,D_kwDOAnasMc4ASshO,2023-02-27T08:06:50Z,jbyang1,1,Answered,,,
Question about initial positioning when integrating the vehicle with the autoware,D_kwDOAnasMc4ASshO,2023-02-27T08:06:50Z,jbyang1,1,Answered,DC_kwDOAnasMc4ATmGG,jbyang1,Solved
Question about initial positioning when integrating the vehicle with the autoware,D_kwDOAnasMc4ASshO,2023-02-27T08:06:50Z,jbyang1,1,Answered,DC_kwDOAnasMc4AT-iR,wangxianggang1997,could you please tell me how to solve this issue? thank you very much.
Add Rviz2 Plugins for Localization Metrics,D_kwDOAnasMc4ASsrD,2023-02-27T09:50:36Z,StepTurtle,2,Answered,,,
Add Rviz2 Plugins for Localization Metrics,D_kwDOAnasMc4ASsrD,2023-02-27T09:50:36Z,StepTurtle,2,Answered,DC_kwDOAnasMc4AXTxK,meliketanrikulu,"Last status of plugin : 
![Screenshot_from_2023-05-22_17-11-17](https://github.com/autowarefoundation/autoware/assets/41450930/3e4fcdb6-f987-44dc-8606-3cc05b875e8e)
 We added gps status as a text"
Add Rviz2 Plugins for Localization Metrics,D_kwDOAnasMc4ASsrD,2023-02-27T09:50:36Z,StepTurtle,2,Answered,DC_kwDOAnasMc4AXUwt,mitsudome-r,"There are also other tools like [plotjuggler](https://github.com/facontidavide/PlotJuggler) already available if you just want to see the values, but I don't mind adding the plugin if you want to show it on the rviz.
I'm not sure if we want to have them turned on as a default, though.

Regarding the porting of jsk_plugins to ROS 2, what is your plan? Do you plan to
- merge directly to autoware.universe,
- create a fork in AWF(or in LeoDrive GitHub), or 
- do you plan to push it to the upstream? (It looks like the authors are welcoming anyone helping them port to ROS 2. https://github.com/jsk-ros-pkg/jsk_visualization/issues/779)"
Add Rviz2 Plugins for Localization Metrics,D_kwDOAnasMc4ASsrD,2023-02-27T09:50:36Z,StepTurtle,2,Answered,DC_kwDOAnasMc4AXjg_,StepTurtle,"When we do localization tests, we prefer to display Gnss & Localization metrics in RViz instead of plotjuggler. A additional GUI for plotjuggler is not a desirable situation for us. Because of that, we want to add  plugin to RViz.

If autoware don't want to merge to autoware.universe or universe/external we will think work on our fork (in Leo Drive organization)."
Add Rviz2 Plugins for Localization Metrics,D_kwDOAnasMc4ASsrD,2023-02-27T09:50:36Z,StepTurtle,2,Answered,DC_kwDOAnasMc4AYvJV,kminoda,What is the status of this Discussion? Maybe is it OK to mark your comment as an answer and close this?
2023-02-27 ODD working group weekly meeting (131),D_kwDOAnasMc4AStFi,2023-02-27T13:59:18Z,Igata-ctrl,0,Unanswered,,,
Software WG Meeting 2023/03/07,D_kwDOAnasMc4ASuNN,2023-02-28T08:36:46Z,BonoloAWF,0,Unanswered,,,
Open AD Kit WG meeting 2023/2/28,D_kwDOAnasMc4ASvIv,2023-02-28T18:48:22Z,armaganarsln,0,Unanswered,,,
2023-03-02 Racing Working Group Meeting,D_kwDOAnasMc4ASvNN,2023-02-28T20:14:23Z,QZJGeorge,1,Answered,,,
2023-03-02 Racing Working Group Meeting,D_kwDOAnasMc4ASvNN,2023-02-28T20:14:23Z,QZJGeorge,1,Answered,DC_kwDOAnasMc4ATuH_,jacksilb,"Autoware Sponsorship follow-up for AKS. Yes, we will have a night for networking and we can create a banner with the Autoware logo name on it. 
Autoware to provide pizza during the presentation network. And $1K as a sponsor if possible to help pay for the Ad-Promo and miscellaneous.
"
2023-03-02 Racing Working Group Meeting,D_kwDOAnasMc4ASvNN,2023-02-28T20:14:23Z,QZJGeorge,1,Answered,DC_kwDOAnasMc4ATuIP,jacksilb,"AKS meeting moving from every other week to weekly starting next week Mar 10.
This is the time time to provide feedback on the rules.
"
Mapping WG Meeting 15/02/2023,D_kwDOAnasMc4ASvhx,2023-03-01T06:39:23Z,armaganarsln,0,Unanswered,,,
Integration of PRODRIVER® with Autoware,D_kwDOAnasMc4ASvjQ,2023-03-01T07:21:44Z,maxime-clem,1,Answered,,,
Integration of PRODRIVER® with Autoware,D_kwDOAnasMc4ASvjQ,2023-03-01T07:21:44Z,maxime-clem,1,Answered,DC_kwDOAnasMc4ATvqB,doganulus,"Hi Maxime, the integration of complex pieces always sounds great. 

How can I find more information about test process, test scenarios, test properties you have been looking in simulation traces? These are from the ODD scenarios? 
 
"
Integration of PRODRIVER® with Autoware,D_kwDOAnasMc4ASvjQ,2023-03-01T07:21:44Z,maxime-clem,1,Answered,DC_kwDOAnasMc4ATwGq,maxime-clem,"Tests were performed using TIER IV's own test vehicle and scenarios which cannot be shared publicly. If you own a PRODRIVER® licence, you can reproduce similar tests following the instructions from the repository. If you want to use the [scenario simulator](https://github.com/tier4/scenario_simulator_v2), there are a few extra steps needed to make the integration work. If needed I can write instructions on the additional changes needed.
Many of the simulation scenarios we used in our tests are similar to the [AWF](https://evaluation.tier4.jp/evaluation/scenarios?project_id=awf) and  [OpenAD Kit](https://evaluation.tier4.jp/evaluation/scenarios?project_id=open_ad_kit) scenarios that can be accessed on https://evaluation.tier4.jp/ (a free account is needed)."
Mapping WG Meeting 01/03/2023,D_kwDOAnasMc4ASvk9,2023-03-01T08:10:08Z,n-patiphon,0,Unanswered,,,
Traffic Light Recognition for multi-camera system,D_kwDOAnasMc4ASwVs,2023-03-02T02:22:35Z,Mingyu1991,3,Answered,,,
Traffic Light Recognition for multi-camera system,D_kwDOAnasMc4ASwVs,2023-03-02T02:22:35Z,Mingyu1991,3,Answered,DC_kwDOAnasMc4AT84S,xmfcx,"Hello, thanks for the proposal!

What are done in the `post-process` and `Merger` blocks?"
Traffic Light Recognition for multi-camera system,D_kwDOAnasMc4ASwVs,2023-03-02T02:22:35Z,Mingyu1991,3,Answered,DC_kwDOAnasMc4AT_TZ,miursh,"@Mingyu1991 Could you show the updated diagram? 
Also, if you can, could you write the role of each node?"
Traffic Light Recognition for multi-camera system,D_kwDOAnasMc4ASwVs,2023-03-02T02:22:35Z,Mingyu1991,3,Answered,DC_kwDOAnasMc4AUTQe,Mingyu1991,"@xmfcx 
Hello, Sorry for late reply.
Please kindly check the follow figure for updated diagram.
![image](https://user-images.githubusercontent.com/115005477/225320388-3cf814e9-86ed-4966-bdb2-4e607ae82b35.png)

Let me briefly introduce the new nodes and functions in the diagram:
1. **post process in Classifier**
We plan to implement status machine in this part to prevent from some false detection.
For example, if the traffic light from last frame is green and detected as red, it would be processed as yellow.
The detailed algorithm is not decided yet
2. **traffic_light_merger**
This node is designed to receive and fusion the results of different cameras on the same traffic light.
3. **traffic_signal_arbitrator**(name might be updated in following implementation)
This node is to receive and fusion the traffic lights of the same group in the cross.
"
Traffic Light Recognition for multi-camera system,D_kwDOAnasMc4ASwVs,2023-03-02T02:22:35Z,Mingyu1991,3,Answered,DC_kwDOAnasMc4AUVqJ,xmfcx,"Thanks for detailing the proposal!

I've used ChatGPT for finding a name for these 2 nodes with following prompt:

> In Autoware, we are creating following 2 nodes for classification of the traffic lights:
> 
> Node 1: It combines the classification results from multiple camera classification pipelines and outputs a final classification result for the traffic light.
> 
> Node 2: It combines classification results that belong to the same traffic light group and outputs a single classification result for the given group that covers the same lanes.
> 
> How should we name these 2 nodes?

And from the responses:

**Node 1:**

- Multi-camera Traffic Light Classifier
- Camera Fusion Traffic Light Classifier
- Multi-View Traffic Light Detector
- Vision-Based Traffic Light Aggregator
- Multi-Pipeline Traffic Signal Recognizer
- Image Ensemble Traffic Light Classifier

**Node 2:**

- Traffic Light Group Classifier
- Lane-Level Traffic Light Group Classifier
- Roadway-Specific Traffic Signal Classifier
- Grouped Traffic Light Classification Node
- Intersection-Based Traffic Light Detector
- Aggregate Traffic Signal Classifier

My favorite node names are:
- **Node 1:** ~~Multi-camera Traffic Light Classifier~~
- **Node 2:** ~~Traffic Light Group Classifier~~

What do you think about the naming choices?

cc: @yukkysaito @Mingyu1991 

Edit: I will update my choices to emphasize fusion over classification:
- **Node 1:** Multi-camera Traffic Light Fusion
- **Node 2:** Traffic Light Group Fusion"
Traffic Light Recognition for multi-camera system,D_kwDOAnasMc4ASwVs,2023-03-02T02:22:35Z,Mingyu1991,3,Answered,DC_kwDOAnasMc4AUV9e,Mingyu1991,"I like the idea of fusion.
Considering the traffic light nodes names are all  like:
**traffic_light_map_based_detector**, **traffic_light_fine_detector**, **traffic_light_classifier**,
can we find some word like **fusionner** (it's Franch, although)?"
Traffic Light Recognition for multi-camera system,D_kwDOAnasMc4ASwVs,2023-03-02T02:22:35Z,Mingyu1991,3,Answered,DC_kwDOAnasMc4AWRIb,Mingyu1991,"Sorry for late update.
Let me share my discussion result with @xmfcx:
1. The proposed interface is OK.
2. The fusion algorithm should consider truncation, the credibility of detection.

I have submitted the PR in
https://github.com/autowarefoundation/autoware.universe/pull/3442
So let me close this comment."
Simulating a delivery robot with AWSEIM,D_kwDOAnasMc4ASwwX,2023-03-02T13:16:29Z,jediofgever,1,Answered,,,
Simulating a delivery robot with AWSEIM,D_kwDOAnasMc4ASwwX,2023-03-02T13:16:29Z,jediofgever,1,Answered,DC_kwDOAnasMc4ATwmR,amadeuszsz,"Hi,

As a developer outside TIER IV without any experience with Unity, I can tell you that it's quite easy to tune AWSIM project to my own requirements (lab classes about racing). Here is short demo, still without map, under development:

https://user-images.githubusercontent.com/37396312/222454333-69f131b4-18d4-43d5-b722-7d7a4027fe3f.mp4


Possibility? Sure! For custom sensors I guess you may need to write specific C# plugins. Imo it would be better to wait for someone from AWSIM contributors for more details.
"
Simulating a delivery robot with AWSEIM,D_kwDOAnasMc4ASwwX,2023-03-02T13:16:29Z,jediofgever,1,Answered,DC_kwDOAnasMc4ATwrF,jediofgever,"Thank you for your reply!
That looks awesome, is the demo robot you posted open-source? 
If so, It will be very helpful for me to understand what a configuration for a custom robot looks like.

Was there a tutorial you followed to import this robot model to awsim ? 

"
Simulating a delivery robot with AWSEIM,D_kwDOAnasMc4ASwwX,2023-03-02T13:16:29Z,jediofgever,1,Answered,DC_kwDOAnasMc4ATw2C,amadeuszsz,"Just [Setup Unity Project](https://tier4.github.io/AWSIM/GettingStarted/SetupUnityProject/). I suggest open the project, check assets inside and try to follow it in your custom vehicle model, attaching scripts, colliders etc - I did it that way. To load models (.glb in my case) I used [Sketchfab](https://assetstore.unity.com/packages/tools/input-management/sketchfab-for-unity-14302) plugin. I will share the project when I finish."
Simulating a delivery robot with AWSEIM,D_kwDOAnasMc4ASwwX,2023-03-02T13:16:29Z,jediofgever,1,Answered,DC_kwDOAnasMc4ATxRJ,jediofgever,"many thanks !, I have a better picture of it now. "
Simulating a delivery robot with AWSEIM,D_kwDOAnasMc4ASwwX,2023-03-02T13:16:29Z,jediofgever,1,Answered,DC_kwDOAnasMc4Aap1u,whbcumtb,"I am a simulation developer from JingDong company, and the following picture shows our delivery robot.
![image](https://github.com/autowarefoundation/autoware/assets/48005627/ceee469b-8c9a-4dee-9526-a35a58b18d46)
I am using AWSIM and Autoware universe to simulate, and as a result, it works! 
However, there are some challeges such as customed 3D environment, lanelet map production. logistic scenario edition and so on.
Would you like to join us?
"
Simulating a delivery robot with AWSEIM,D_kwDOAnasMc4ASwwX,2023-03-02T13:16:29Z,jediofgever,1,Answered,DC_kwDOAnasMc4Aaqqd,jediofgever,"@whbcumtb  That’s great. Is the development of this robot in a private fork of AWSIM ? 

"
Simulating a delivery robot with AWSEIM,D_kwDOAnasMc4ASwwX,2023-03-02T13:16:29Z,jediofgever,1,Answered,DC_kwDOAnasMc4AasID,Autostone-c,hi，i am using AWSIM and autoware. I am very interested in this and look forward to joining your project
Simulating a delivery robot with AWSEIM,D_kwDOAnasMc4ASwwX,2023-03-02T13:16:29Z,jediofgever,1,Answered,DC_kwDOAnasMc4Abhk0,whbcumtb,"@jediofgever, it is not in a private fork of AWSIM yet, we are building this car model in AWSIM and will test our logistical ODD cases by using the autoware.universe and show the results at the end of this year in our plan."
Suggestion: Add instruction on how to use pointcloud_map_loader,D_kwDOAnasMc4ASxGn,2023-03-02T20:33:44Z,cjffly,1,Answered,,,
Suggestion: Add instruction on how to use pointcloud_map_loader,D_kwDOAnasMc4ASxGn,2023-03-02T20:33:44Z,cjffly,1,Answered,DC_kwDOAnasMc4AU1cT,n-patiphon,"Hi, thank you for your suggestion and a working command!

Would you be interested to open a PR to autoware documentation?"
Getting rid of the Point Cloud Library (PCL),D_kwDOAnasMc4ASxcr,2023-03-03T08:21:47Z,kminoda,2,Answered,,,
Getting rid of the Point Cloud Library (PCL),D_kwDOAnasMc4ASxcr,2023-03-03T08:21:47Z,kminoda,2,Answered,DC_kwDOAnasMc4ATygA,sykwer,"Pros: We can avoid unnecessary copies as much as possible.

The entire Autoware system needs to be designed such that all the large-data instances are singletons in terms of physical memory."
Getting rid of the Point Cloud Library (PCL),D_kwDOAnasMc4ASxcr,2023-03-03T08:21:47Z,kminoda,2,Answered,DC_kwDOAnasMc4ATynO,RyuYamamoto,"Pros: 
It is easy to improve algorithms, introduce new features, code readability and performance can be improved.
not affected by external releases.

Cons:
Maintenance costs may be higher, because Autoware has a lot of PCL dependencies.

I think we need to investigate the scope of impact.
"
Position of lidar on vehicle,D_kwDOAnasMc4ASzkX,2023-03-05T17:42:24Z,gurselturkeri,1,Answered,,,
Position of lidar on vehicle,D_kwDOAnasMc4ASzkX,2023-03-05T17:42:24Z,gurselturkeri,1,Answered,DC_kwDOAnasMc4AT-51,maxime-clem,This page explains how to calibrate the sensors: https://autowarefoundation.github.io/autoware-documentation/main/how-to-guides/calibrating-your-sensors/
use navigation2 planners for Autoware free space planning?,D_kwDOAnasMc4ASz_9,2023-03-06T08:39:23Z,VRichardJP,1,Answered,,,
use navigation2 planners for Autoware free space planning?,D_kwDOAnasMc4ASz_9,2023-03-06T08:39:23Z,VRichardJP,1,Answered,DC_kwDOAnasMc4AVFmu,TakaHoribe,The planning algorithms for freespace in mobile robots and car-type vehicles are similar. It would be beneficial if Autoware could run navigation stack plugins independently from Autoware's core implementation. Using a wrapper is a good option.
AWSIM camera and lidar topic latency,D_kwDOAnasMc4AS0ld,2023-03-06T20:24:09Z,kasper-helm,1,Answered,,,
AWSIM camera and lidar topic latency,D_kwDOAnasMc4AS0ld,2023-03-06T20:24:09Z,kasper-helm,1,Answered,DC_kwDOAnasMc4AT8Y5,mgarnett21,"unsubscribe
















At 2023-03-07 04:24:49, ""kasper-helm"" ***@***.***> wrote:

I have been running AWSIM with the Autoware stack as per the Quick Start Demo. I have been using a dual Docker container setup as per tier4/AWSIM#81. When I run the AWSIM_demo.x86_64 executable on its own, I see that the camera and lidar topics are publishing at approximately 9hz and 10hz respectively. When I launch the autoware stack and start the simulation running, I see that the camera and lidar topic frequencies drop to 4hz and 6hz respectively. Looking at my system stats, I can see that my 32 CPU cores are around 50% and my GPU is around 30%.

+-----------------------------------------------------------------------------+
| NVIDIA-SMI 525.60.13    Driver Version: 525.60.13    CUDA Version: 12.0     |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|                               |                      |               MIG M. |
|===============================+======================+======================|
|   0  Tesla T4            Off  | 00000000:00:04.0 Off |                    0 |
| N/A   77C    P0    84W /  70W |   5713MiB / 15360MiB |     31%      Default |
|                               |                      |                  N/A |
+-------------------------------+----------------------+----------------------+

+-----------------------------------------------------------------------------+
| Processes:                                                                  |
|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |
|        ID   ID                                                   Usage      |
|=============================================================================|
|    0   N/A  N/A     10674      G   /usr/lib/xorg/Xorg                 36MiB |
|    0   N/A  N/A     17130    C+G   ..._v1.1.0/AWSIM_demo.x86_64     4548MiB |
|    0   N/A  N/A     38593      C   ...nt/lidar_centerpoint_node      862MiB |
|    0   N/A  N/A     38726      C   ...ts/component_container_mt      252MiB |


In addition to the simulation visualization being choppy, I am seeing that the camera and lidar representations of moving objects are out of alignment. In the attached clip, you can see the lidar points of the car moving in the opposite direction are lagging behind the camera image.

https://user-images.githubusercontent.com/102066312/223222194-4225c92e-6867-43b3-8e78-791a395d8b2d.mov

Has anyone else encountered something similar? How might I go about root causing this?

—
Reply to this email directly, view it on GitHub, or unsubscribe.
You are receiving this because you are subscribed to this thread.Message ID: ***@***.***>"
AWSIM camera and lidar topic latency,D_kwDOAnasMc4AS0ld,2023-03-06T20:24:09Z,kasper-helm,1,Answered,DC_kwDOAnasMc4AaprA,whbcumtb,"I also encountered this. Maybe one computer is not powerful enough and you can try to setup AWSIM on one graphic workstation and  to run Autoware stack on another computer, with ros2 comunication. However, I did not try this solution yet."
AWSIM camera and lidar topic latency,D_kwDOAnasMc4AS0ld,2023-03-06T20:24:09Z,kasper-helm,1,Answered,DC_kwDOAnasMc4AatCJ,cycyc1949,It seems that the calculation time is too long to be aligned
2023-03-07 ODD working group weekly meeting (132),D_kwDOAnasMc4AS0qT,2023-03-06T22:27:47Z,Igata-ctrl,0,Unanswered,,,
Installing autoware ROS2 Humble version on Ubuntu 20.04.,D_kwDOAnasMc4AS0q6,2023-03-06T22:46:17Z,damodarRohit,1,Answered,,,
Installing autoware ROS2 Humble version on Ubuntu 20.04.,D_kwDOAnasMc4AS0q6,2023-03-06T22:46:17Z,damodarRohit,1,Answered,DC_kwDOAnasMc4AT67Z,evshary,"I've not tried Autoware with Jetson AGX Orin on Ubuntu 20.04 before, but I think in this case, docker might be a better solution.
You can refer to the [docker installation](https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/docker-installation/) on the official tutorial.
If you just want to have a quick test, [using prebuilt docker image](https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/docker-installation-prebuilt/) is a good idea."
Installing autoware ROS2 Humble version on Ubuntu 20.04.,D_kwDOAnasMc4AS0q6,2023-03-06T22:46:17Z,damodarRohit,1,Answered,DC_kwDOAnasMc4AUMa1,damodarRohit,"@evshary Thanks for the inputs

Jetson Orin is arm64 architecture and the docker installation document says Nvidia GPU cannot be used with Docker on arm64 architecture. Is this issue resolved? I am trying to have a setup for development and not testing using prebuilt image.
Is there any documentation on source installation? Are there any known issues for installing Autoware ROS2 Humble version from source on Ubuntu 20.04 on an arm64/ Jetson architecture-based device?"
Installing autoware ROS2 Humble version on Ubuntu 20.04.,D_kwDOAnasMc4AS0q6,2023-03-06T22:46:17Z,damodarRohit,1,Answered,DC_kwDOAnasMc4AUNdn,evshary,"If you want to use ROS 2 Humble on Ubuntu 20.04, you'll have some dependency issues. First of all, you need to build ROS 2 Humble by yourself (I believe there'll be many issues). Then, you can build Autoware main branch based on the ROS 2 Humble. Since the ansible script for installing prerequisites is based on Ubuntu 22.04, you might need some changes there. IMHO, I don't suggest doing so, because it might take some time to do the modification. Maybe you can try the Autoware Galactic branch first before moving forward to the main branch.

For docker installation, I believe running docker with GPU is feasible, but I don't know too much about running Autoware in docker with GPU. I'm not sure how much effort you need to do so. I found someone is discussing about this, and you can take a look:
https://github.com/orgs/autowarefoundation/discussions/3319
"
Programmatically Trigger Emergency Stop,D_kwDOAnasMc4AS1KC,2023-03-07T08:12:39Z,benrbray,1,Answered,,,
Programmatically Trigger Emergency Stop,D_kwDOAnasMc4AS1KC,2023-03-07T08:12:39Z,benrbray,1,Answered,DC_kwDOAnasMc4AT-vm,maxime-clem,"To replicate the ""Set Emergency"" button found in rviz, the correct service call is:
```
ros2 service call /api/autoware/set/emergency tier4_external_api_msgs/srv/SetEmergency ""emergency: true"" 
```

I think `/system/mrm_emergency_stop_operator/operate` requires some preconditions to be satisfied and is not meant to be called externally."
Programmatically Trigger Emergency Stop,D_kwDOAnasMc4AS1KC,2023-03-07T08:12:39Z,benrbray,1,Answered,DC_kwDOAnasMc4AUBdV,benrbray,"Perfect, it works, thanks!"
About the criterion of shape_estimation in perception module,D_kwDOAnasMc4AS1KT,2023-03-07T08:17:17Z,HMX2013,0,Unanswered,,,
Simulate the possible driver mistake scenarios,D_kwDOAnasMc4AS1cZ,2023-03-07T14:04:05Z,beyzanurkaya,3,Answered,,,
Simulate the possible driver mistake scenarios,D_kwDOAnasMc4AS1cZ,2023-03-07T14:04:05Z,beyzanurkaya,3,Answered,DC_kwDOAnasMc4AT8-i,armaganarsln,"I found this one: https://www.hasnerlaw.com/atlanta-car-accident-attorney/common-scenarios-causes-determining-fault/
"
Simulate the possible driver mistake scenarios,D_kwDOAnasMc4AS1cZ,2023-03-07T14:04:05Z,beyzanurkaya,3,Answered,DC_kwDOAnasMc4AT9GJ,maxime-clem,"Ideally we would want a way to automatically generate these _adversarial_ scenarios. For example like this: https://www.cim.mcgill.ca/~mrl/adversarial_driving_scenarios/

But I think in your case handcrafted scenarios would be enough. However, as far as I know, the scenario simulator is limited to ""nice"" NPCs that follow the road and traffic rules.
With the `simple_planner_simulator` you can [spawn NPCs and move them however you want](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/#placing-dummy-objects) but it is tedious to do by hand."
Simulate the possible driver mistake scenarios,D_kwDOAnasMc4AS1cZ,2023-03-07T14:04:05Z,beyzanurkaya,3,Answered,DC_kwDOAnasMc4AUVeh,beyzanurkaya,"In this pic EGO is driving in its lane, but another vehicle enters the road even though it is in the opposite direction:

![npc-opposite-driving](https://user-images.githubusercontent.com/32412808/225558186-2d6e6d7e-8570-4293-9795-762e70b6e5ab.png)
"
Jetson Orin: Autoware Docker Installation,D_kwDOAnasMc4AS1hl,2023-03-07T14:50:34Z,albiim,1,Answered,,,
Jetson Orin: Autoware Docker Installation,D_kwDOAnasMc4AS1hl,2023-03-07T14:50:34Z,albiim,1,Answered,DC_kwDOAnasMc4AT-5m,maxime-clem,"When following the install instructions (https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/source-installation/#installing-dependencies-using-ansible), many dependencies are automatically installed, including NVIDIA libraries.
Is it possible that this step deletes some packages on the Jetson Orin but fails to install their replacement ?
My suggestion is to try to check in detail the output of the installation script, or to install dependencies manually to clearly understand at which step did the display drivers get removed."
Jetson Orin: Autoware Docker Installation,D_kwDOAnasMc4AS1hl,2023-03-07T14:50:34Z,albiim,1,Answered,DC_kwDOAnasMc4AUBpd,liuXinGangChina,"Hi, @albiim. Thanks for your hard work.
As far as I know, once you flash your orin with nvidia sdk-manager, you only need to do step one ""Installing dependencies "" manually
![图片](https://user-images.githubusercontent.com/90366790/223921130-91088bfb-9616-412b-8c5c-8ca711a32fc9.png)
Then you can fellow this [video ](https://youtu.be/3KUhEFkEbI8) ,which is record by our docker expert.
If you still encounter any trouble.please feel free to leave your message."
Jetson Orin: Autoware Docker Installation,D_kwDOAnasMc4AS1hl,2023-03-07T14:50:34Z,albiim,1,Answered,DC_kwDOAnasMc4AUKrj,liuXinGangChina,"hi @albiim ,what is your status now, have you run autoware successfully?"
Jetson Orin: Autoware Docker Installation,D_kwDOAnasMc4AS1hl,2023-03-07T14:50:34Z,albiim,1,Answered,DC_kwDOAnasMc4AUMGP,albiim,Hello @maxime-clem and @liuXinGangChina for your replies and comments. I am currently investigating this issue and will try to report back with updates as soon as possible by replying in post.
Jetson Orin: Autoware Docker Installation,D_kwDOAnasMc4AS1hl,2023-03-07T14:50:34Z,albiim,1,Answered,DC_kwDOAnasMc4AUXEl,sudhsrik,"Hi,
@maxime-clem @liuXinGangChina, Thanks for your help! I was able to install autoware on docker in jetson orin and run simulations without any display issues. I installed the dependencies and followed the instructions specified in the video linked in the previous comment."
Jetson Orin: Autoware Docker Installation,D_kwDOAnasMc4AS1hl,2023-03-07T14:50:34Z,albiim,1,Answered,DC_kwDOAnasMc4AUXFa,albiim,"Hello everyone,

As Sudharsan @sudhsrik solved the issue following the suggestions and as him and I are at the same place, I will close this discussion. I will also try this myself and ask him for any detail. Thank you for your help, everyone!"
Software WG Meeting 2023/03/14,D_kwDOAnasMc4AS1nC,2023-03-07T16:23:10Z,BonoloAWF,3,Answered,,,
Software WG Meeting 2023/03/14,D_kwDOAnasMc4AS1nC,2023-03-07T16:23:10Z,BonoloAWF,3,Answered,DC_kwDOAnasMc4AUCIE,BonoloAWF,"## Meeting minutes - AWF/ITRI Bus ODD 9 March 2023
- Present: Huei-Ru, Fatih, Bonolo, Ryohsuke, Samet, Mike, Yi Ling, Xinyu

### Progress on fixing localisation issues
- Mike shared rosbags with Fatih (who will try to replicate the issues)
- Downsampling in EKF filter could be the cause of some of the issues 

### New bus platform
- Bus platform has changed 
    - Platform and modules are the same on the new bus
    - Physical computers were moved to the new platform
    -  Sensor configurations are almost identical, number of sensors are the same. Sensor calibration is required
    - BMS upgrade is completed. Renovation of interior is ongoing (bus to be delivered to ITRI after renovations)

### Timelines (see slides for details)
- Internal renovations (March)
- Power distribution (April)
- Sensor and IPC integration (April)
- Autonomous integration (May)
- Bus ODD demo (August) 

### Possible options (Huei-Ru)
- Option 1: medium size bus running ROS 1 on a public road
- Option 2: Long 12m bus running ROS 1 (with ROS 2 Docker for some modules) on ITRI campus
- Option 3: Upgrade new bus platform to ROS 2 and demo on ITRI campus

Samet - the narrative of the Leo Drive demo video was to demonstrate Autoware on public road
Ryohsuke - the goal of the Bus ODD is to show Autoware is hardware agnostic. It is better to have a ROS 2 demo video (even if on a private campus) to demonstrate Autoware Universe on 2 different platforms. Autoware.AI is already archived. 
Fatih - The main discussion is Autoware.AI vs. Autoware Universe and timing. The ROS 2 videos would probably be around August time-frame. 
Huei-Ru - ITRI has a long term plan to upgrade to ROS 2 

### Proposal for demo video
Three options were proposed :
1. Video 1 = Leo Drive ROS 2 (demo recording completed)
2. Video 2 = ITRI ROS 1 + Leo Drive ROS 2 (short clip showing private and public roads)
3. Video 3 = ITRI ROS 2 (ITRI campus, possibly extended to public road subject to approvals)

Ryohsuke - we could skip Video 2 
Huei-Ru - we can have only 2 videos (1 and 3). Video 3 can be in August. Video 2 on a public road with Autoware.AI could be confusing. 

### Conclusion
- The consensus was that combining Autoware.AI and Autoware Universe in one video would be confusing for the viewer
- ITRI demo video recording is delayed to August 
- The final decision about the demo video and timelines will be taken by the AWF TSC and Board. "
Software WG Meeting 2023/03/14,D_kwDOAnasMc4AS1nC,2023-03-07T16:23:10Z,BonoloAWF,3,Answered,DC_kwDOAnasMc4AUK5y,hueirutseng,ITRI Bus ODD update on Mar.9 [Slide](https://drive.google.com/file/d/1kuxrrmRmDK0R3-_TmvcZnEw3lQFs2XWW/view?usp=sharing)
Software WG Meeting 2023/03/14,D_kwDOAnasMc4AS1nC,2023-03-07T16:23:10Z,BonoloAWF,3,Answered,DC_kwDOAnasMc4AUOCT,liuXinGangChina,"[AWF w63 ASWG.pdf](https://github.com/autowarefoundation/autoware/files/10966063/AWF.w63.ASWG.pdf)
"
Software WG Meeting 2023/03/14,D_kwDOAnasMc4AS1nC,2023-03-07T16:23:10Z,BonoloAWF,3,Answered,DC_kwDOAnasMc4AUOCY,liuXinGangChina,Please help us to accelerate the review
Standalone Localization via NDT Matching,D_kwDOAnasMc4AS15D,2023-03-07T23:32:42Z,cjffly,1,Answered,,,
Standalone Localization via NDT Matching,D_kwDOAnasMc4AS15D,2023-03-07T23:32:42Z,cjffly,1,Answered,DC_kwDOAnasMc4AT-eZ,maxime-clem,"If I understand correctly, you want the following:
- Inputs:
  - Lidar data coming from ROS bag.
  - PCD map loaded from file.
- Output:
  - pose estimation.

This is exactly the interface of the [`ndt_scan_matcher`](https://autowarefoundation.github.io/autoware.universe/main/localization/ndt_scan_matcher/)  node.
I think it should be possible to achieve what you want simply by playing your bag while running the following two nodes:
- [`pointcloud_map_loader`](https://github.com/autowarefoundation/autoware.universe/tree/main/map/map_loader) (to load the [pointcloud map file](https://github.com/autowarefoundation/autoware.universe/blob/main/map/map_loader/launch/pointcloud_map_loader.launch.xml#L8)).
- [`ndt_scan_matcher`](https://github.com/autowarefoundation/autoware.universe/tree/main/localization/ndt_scan_matcher).

You also need to publish the initial pose estimate (`ekf_pose_with_covariance`) and the localization should start working."
Standalone Localization via NDT Matching,D_kwDOAnasMc4AS15D,2023-03-07T23:32:42Z,cjffly,1,Answered,DC_kwDOAnasMc4AT-ht,cjffly,"Thanks! That's what I am trying to do just now, I just don't know how to publish the ekf_pose_with_covariance. In the autoware.ai video, it use the rviz plug in '2D Pose Estimate' to do so. Any suggestion on how to do that for autoware universe without the rviz?"
Standalone Localization via NDT Matching,D_kwDOAnasMc4AS15D,2023-03-07T23:32:42Z,cjffly,1,Answered,DC_kwDOAnasMc4AT-jN,maxime-clem,"You can use Rviz and change the topic use by the `2D Pose Estimate`.
![image](https://user-images.githubusercontent.com/78338830/223624291-60bef403-e113-436a-91a5-21c04b32354d.png)


If you cannot use Rviz you can manually publish it using `ros2 topic pub`:
```bash
ros2 topic pub /localization/ekf_pose_with_covariance geometry_msgs/msg/PoseWithCovarianceStamped ""
header:
  frame_id: map
pose:
  pose:
    position:
      x: 3760.6396484375
      y: 73756.34375
      z: 0.0
    orientation:
      x: 0.0
      y: 0.0
      z: 0.8186420291387927
      w: 0.5743041251179728

""
```
Make sure you set the correct topic name and correct values for the `frame_id` (`map`), position, and orientation."
Standalone Localization via NDT Matching,D_kwDOAnasMc4AS15D,2023-03-07T23:32:42Z,cjffly,1,Answered,DC_kwDOAnasMc4AT-v8,cjffly,"Thanks for the suggestion, one step closer!

 I have tried the `topic pub` method, but seems there is still something missing, the ndt_scan_matcher node has the following error:
```
[ndt_scan_matcher-1] [WARN] [1678259352.045353962] [ndt_scan_matcher]: ""base_link"" passed to lookupTransform argument target_frame does not exist. 
[ndt_scan_matcher-1] [ERROR] [1678259352.045444842] [ndt_scan_matcher]: Please publish TF base_link to ego_vehicle/lidar
```

Also, I assume the ekf_pose_with_covariance only needs to published once?"
Standalone Localization via NDT Matching,D_kwDOAnasMc4AS15D,2023-03-07T23:32:42Z,cjffly,1,Answered,DC_kwDOAnasMc4AT-zC,maxime-clem,"I forgot about one thing ! `ndt_scan_matcher` needs the transform information from the lidar sensor frame to the `base_link` frame.
I think the easiest solution is to run the vehicle launch file such that these transforms are published. 
```
ros2 launch tier4_vehicle_launch vehicle.launch.xml launch_vehicle_interface:=false vehicle_model:=YOUR_VEHICLE sensor_model:=YOUR_VEHICLE
```

And yes the initial pose should only need to be published once for initialization."
Standalone Localization via NDT Matching,D_kwDOAnasMc4AS15D,2023-03-07T23:32:42Z,cjffly,1,Answered,DC_kwDOAnasMc4AUAqO,cjffly,"The rog bag I have is captured from Carla, which I don't have setup the vehicle/sensor model for autoware yet. But the bag did have /tf information, which has this part:
```
---
transforms:
- header:
    stamp:
      sec: 312
      nanosec: 677264515
    frame_id: ego_vehicle
  child_frame_id: ego_vehicle/lidar
  transform:
    translation:
      x: 0.0
      y: 0.0
      z: 2.4
    rotation:
      x: 0.0
      y: 0.0
      z: 0.0
      w: 1.0
---
```
I guess that frame_id 'ego_vehicle' is equivalent to the base_link?  I am not a ROS expert, I did not find a good way to map that ego_vehilce to base_link. What I did is modifying the source code of the ndt_scan_matcher_core.cpp, change `base_frame_(""base_link"")` to ` base_frame_(""ego_vehicle"")`. And then rebuild. 

Now the ndt_scan_matcher no longer report errors while I play the ros bag. The problem is the node does not generate any output...
```
[INFO] [ndt_scan_matcher-1]: process started with pid [123995]
[ndt_scan_matcher-1] [INFO] [1678303025.511931535] [ndt_scan_matcher]: points_queue_size: 1
[ndt_scan_matcher-1] [INFO] [1678303025.512044057] [ndt_scan_matcher]: base_frame_id: ego_vehicle
[ndt_scan_matcher-1] [INFO] [1678303025.512118833] [ndt_scan_matcher]: ndt_base_frame_id: ndt_base_link
[ndt_scan_matcher-1] [INFO] [1678303025.512224641] [ndt_scan_matcher]: trans_epsilon: 0.010000, step_size: 0.100000, resolution: 2.000000, max_iterations: 30
[ndt_scan_matcher-1] [initCompute] No input set.
```

I am not sure if this modification is the correct path. Any suggestions?@maxime-clem"
Standalone Localization via NDT Matching,D_kwDOAnasMc4AS15D,2023-03-07T23:32:42Z,cjffly,1,Answered,DC_kwDOAnasMc4AUB1X,maxime-clem,"Your change is good I think.
You do not need to modify the code and instead can change the frame through parameters (https://github.com/autowarefoundation/autoware_launch/blob/main/autoware_launch/config/localization/ndt_scan_matcher.param.yaml#L7).

It looks like the node needs to be ""activated"" before it can accept an initial pose (https://github.com/autowarefoundation/autoware.universe/blob/main/localization/ndt_scan_matcher/src/ndt_scan_matcher_core.cpp#L103).
After starting the node and publishing the pointcloud, please try running the following command. (the service name `/trigger_node` may be different depending on the namespaces you use).
```
ros2 service call /trigger_node std_srvs/srv/SetBool ""{data: true}""
```
After that, it should accept an initial pose and (hopefully) perform localization."
Standalone Localization via NDT Matching,D_kwDOAnasMc4AS15D,2023-03-07T23:32:42Z,cjffly,1,Answered,DC_kwDOAnasMc4AUDwj,cjffly,"You are right, change the param in the yaml file is much easier, thus I don't need to rebuild the whole workspace. 
> Your change is good I think. You do not need to modify the code and instead can change the frame through parameters (https://github.com/autowarefoundation/autoware_launch/blob/main/autoware_launch/config/localization/ndt_scan_matcher.param.yaml#L7).
> 

This did work! at least it starts accepting input. 
> It looks like the node needs to be ""activated"" before it can accept an initial pose (https://github.com/autowarefoundation/autoware.universe/blob/main/localization/ndt_scan_matcher/src/ndt_scan_matcher_core.cpp#L103). After starting the node and publishing the pointcloud, please try running the following command. (the service name `/trigger_node` may be different depending on the namespaces you use).
> 
> ```
> ros2 service call /trigger_node std_srvs/srv/SetBool ""{data: true}""
> ```
> 
> After that, it should accept an initial pose and (hopefully) perform localization.


After the above steps, a few things I notice are:
* My rosbag `/tf` contains time stamp that starts from 312 sec, which leads to a validation error. (I can change the `initial_pose_timeout_sec` parameter from 1.0 to 350.0 to avoid this warning, but not sure if this will affect the results?)
* The iterations quickly reached its limit

 
```
[ndt_scan_matcher-1] [WARN] [1678388591.055468289] [ndt_scan_matcher]: No Pose!
[ndt_scan_matcher-1] [WARN] [1678388591.304884107] [ndt_scan_matcher]: Validation error. The reference time is 313.127265[sec], but the target time is 0.000000[sec]. The difference is 313.127265[sec] (the tolerance is 1.000000[sec]).
[ndt_scan_matcher-1] [WARN] [1678388591.304923960] [ndt_scan_matcher]: Validation error. The reference time is 313.127265[sec], but the target time is 0.000000[sec]. The difference is 313.127265[sec] (the tolerance is 1.000000[sec]).
[ndt_scan_matcher-1] [WARN] [1678388591.304933057] [ndt_scan_matcher]: Validation error.
[ndt_scan_matcher-1] [WARN] [1678388591.395455272] [ndt_scan_matcher]: The number of iterations has reached its upper limit. The number of iterations: 32, Limit: 32
[ndt_scan_matcher-1] [WARN] [1678388591.395479167] [ndt_scan_matcher]: Not Converged

```


If the iterations reaches limit, does that mean my initial pose maybe too far/different than what the bag reports, thus the ndt cannot find a local optimal solution?"
Standalone Localization via NDT Matching,D_kwDOAnasMc4AS15D,2023-03-07T23:32:42Z,cjffly,1,Answered,DC_kwDOAnasMc4AUEj_,maxime-clem,"> My rosbag /tf contains time stamp that starts from 312 sec, which leads to a validation error.

The solution to that is to use the `/clock` topic recorded in the ROS bag.
- Replay the bag with option `--clock` (`ros2 bag play --clock PATH_TO_BAG_FILE`).
- Set parameter `use_sim_time:=true` when starting your nodes.

> The iterations quickly reached its limit

You can try to increase the maximum number of iterations (https://github.com/autowarefoundation/autoware_launch/blob/main/autoware_launch/config/localization/ndt_scan_matcher.param.yaml#L23) but this should not be necessary.
Like you said, maybe your initial pose is quite different from the actual pose. Are you setting a correct orientation ? If possible I recommend using rviz as it makes setting the initial pose much easier than through the command line."
Standalone Localization via NDT Matching,D_kwDOAnasMc4AS15D,2023-03-07T23:32:42Z,cjffly,1,Answered,DC_kwDOAnasMc4AYROV,Tanishq30052002,"Hi @maxime-clem, I am trying to do the same thing but it is still not able to initialize it. could you please look )'


![image](https://github.com/autowarefoundation/autoware/assets/78026976/0983e6d3-0994-4efc-acfc-b2a8b26c6780)



These 3 errors are coming
"
Standalone Localization via NDT Matching,D_kwDOAnasMc4AS15D,2023-03-07T23:32:42Z,cjffly,1,Answered,DC_kwDOAnasMc4AYRQg,maxime-clem,Did you try publishing the initial pose ? Is your vehicle stopped while you are setting the initial pose ?
perception_benchmark_tool running fail,D_kwDOAnasMc4AS2Ud,2023-03-08T11:50:48Z,jason914,2,Answered,,,
perception_benchmark_tool running fail,D_kwDOAnasMc4AS2Ud,2023-03-08T11:50:48Z,jason914,2,Answered,DC_kwDOAnasMc4AUdrE,mitsudome-r,@kaancolak Could you answer this question?
perception_benchmark_tool running fail,D_kwDOAnasMc4AS2Ud,2023-03-08T11:50:48Z,jason914,2,Answered,DC_kwDOAnasMc4AUfBp,kaancolak,"Hi @jason914 ,

pip package of waymo-open-dataset is not written correctly, and there are some dependencies problems.  For ubuntu 20, it's possible to install a method that provided a readme file. But for ubuntu 22, it's not working.  Currently, a google developer working on it, probably after this issue was resolved, we can install it without any problem. autoware's latest docker image using ubuntu 22.  

Relevant issue : [https://github.com/waymo-research/waymo-open-dataset/issues/603](https://github.com/waymo-research/waymo-open-dataset/issues/603)

The second problem is probably about the path of the .tfrecord files, maybe some paths will be set wrong."
perception_benchmark_tool running fail,D_kwDOAnasMc4AS2Ud,2023-03-08T11:50:48Z,jason914,2,Answered,DC_kwDOAnasMc4AUgys,jason914,"Hi @kaancolak ,

Thank you for your reply.

It fixed my second problem after modifying the dataset_path of benchmark_runner.launch.py.
I attach my benchmark_runner.launch.py.
[benchmark_runner.launch.zip](https://github.com/autowarefoundation/autoware/files/11025355/benchmark_runner.launch.zip)

Following command runs successfully.
_ros2 launch perception_benchmark_tool benchmark_runner.launch.py_
I attach my log.
[2023-03-21-benchmark_result-empty.txt](https://github.com/autowarefoundation/autoware/files/11025379/2023-03-21-benchmark_result-empty.txt)

But I can’t find any file under _/root/benchmark_result_.
So, I can’t run README step 5 “_Evaluate tracking result_”
Why is the _/root/benchmark_result_ is empty?
Could you give me suggestions?

I attached the RVIZ result.
![waymo_rviz_1](https://user-images.githubusercontent.com/4769651/226530116-24f6eb34-8145-4ee7-9496-2d35b0bdd710.png)
Is the RVIZ result correct?
If it is correct. What does green and red mean on the right side of RVIZ?

Best regards

-Jason






"
perception_benchmark_tool running fail,D_kwDOAnasMc4AS2Ud,2023-03-08T11:50:48Z,jason914,2,Answered,DC_kwDOAnasMc4AUhtl,kaancolak,"If it was worked correctly, red ones should be ground truths, green ones should be predictions but bounding boxes and point cloud doesn't show on your screen.

Recently autoware's config file placement moved to autoware_launch. Today, I have updated `perception_benchmark_tool`, Could you test it again with the latest version?  "
perception_benchmark_tool running fail,D_kwDOAnasMc4AS2Ud,2023-03-08T11:50:48Z,jason914,2,Answered,DC_kwDOAnasMc4AUncg,jason914,"Hi @kaancolak ,

Thank you for your update.
I downloaded the _perception_benchmark_tool_ again.

The _validation_0000.tar_ uncompress to _/root/waymo_dataset_.
There are 25 _tfreord_ files under _/root/waymo_dataset_.

Q1:
Following command runs successfully.
_ros2 launch perception_benchmark_tool benchmark_runner.launch.py_

I added some debug code in _waymo_player_node.py._
I attached my log and _waymo_player_node.py_.
[2023-03-23-benchmark_result-empty-v2.txt](https://github.com/autowarefoundation/autoware/files/11049998/2023-03-23-benchmark_result-empty-v2.txt)
[waymo_player_node.zip](https://github.com/autowarefoundation/autoware/files/11050001/waymo_player_node.zip)

The debug message _“***********5”_ only print one time.
There is only one _tfrecord_ file to be used when _perception_benchmark_tool_ is running.
Is It correct?

Q2:
I attached the RVIZ mp4 and png result.

https://user-images.githubusercontent.com/4769651/227185569-e7c19790-5493-4b64-9f1a-51e340bca7a1.mp4
![waymo-rviz-v2](https://user-images.githubusercontent.com/4769651/227185638-8073f42f-09da-46ea-81e5-38f3735286f6.png)

RVIZ shows 3D red results very short.
Is It correct?

Q3:
I can’t find any file under _/root/benchmark_result_.
The _/root/benchmark_result_ still is empty.
Could you give me suggestions?


Best regards

-Jason



"
Open AD Kit WG meeting 2023/3/8,D_kwDOAnasMc4AS2Y3,2023-03-08T13:26:27Z,HamburgDave,0,Unanswered,,,
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,,,
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUBdb,kenji-miyake,"@kasperornmeck Thank you for summarizing it.
It generally looks good to me!

I have one small favor for you.
Although code generation isn't in the scope yet, related to the purpose ""allow developers and users of Autoware to become more productive as less time will be spent on trivial tasks."" that you mentioned, there is a possibility that TIER IV will introduce code generation by ourselves as another activity aside from the Open AD Kit WG.
(Open AD Kit doesn't need to work on the task.)

This is because any improvement should be allowed as long as it doesn't interfere with the freedom of Open AD Kit WG and any others.

I ask for your understanding of that. :bow:
Thank you!"
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUC0W,kaspermeck-arm,"@kenji-miyake 

I don't see any issues with further improving the parameter configuration process through code generation. Is it the PickNikRobotic's code generation library you want to introduce? (If that's the case, the work done in this DevOps Dojo would be a stepping stone)"
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUEBl,kenji-miyake,"> Is it the PickNikRobotic's code generation library you want to introduce?

Yes. I've tried it and felt it is almost a perfect solution for us."
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUCAM,doganulus,"I also carry my suggestion using JSON Schema here under this proposal.

If we use JSON Schema rather than modified Picknik format, we can also use a large set of tooling without much effort:
- Editor support such as https://marketplace.visualstudio.com/items?itemName=redhat.vscode-yaml
- CI actions such as (https://github.com/marketplace/actions/yaml-file-validation-using-a-remote-json-schema
- Many validator implementations in different languages such as https://pypi.org/project/jsonschema/

Those are all excellent practices for cloud-native development. Using a well-adopted format and suggesting it to the ROS community would be better for the cloud-native development of robotics, which aligns with Open AD Kit objectives. I think this is what we are interested in under this working group."
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUC0G,kaspermeck-arm,"@doganulus 

Do you suggest we use a JSON Schema to validate the ROS parameter definition files?"
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUDFk,doganulus,"JSON Schema to validate the ROS parameter file. Not the ROS parameter definition file.

JSON Schema will replace the parameter definition file in the proposal. "
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUEGX,kenji-miyake,"Please do not replace the parameter definition file but try to support both formats instead. It's because the current format is necessary for PickNik's library that enables developers to improve implementation efficiency extremely.
Also, supporting a wide range of solutions is reasonable considering the concept of Autoware Core/Universe which is open to extensions.

I believe we can make a converter between the two formats, or if necessary, please consider suggesting PickNik to change their format.

If PickNik's format will be removed, I'm firmly against that. It's definitely necessary at least for now."
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUFDz,doganulus,"Hi @kenji-miyake, supporting both formats is a waste of resources for the same definition. If you want Autoware extensible as we all do--- then we must build the system on firm and simple foundations, not on extremely efficient software hacks having a single test case in their repo. Please compare JSON Schema and PickNik's format in terms of features, maturity, userbase, adoption, implementations, and ecosystem. Do you really think PickNik is better now or will be soon? This is an honest question for all. 

Surely I can have no objection if you want to develop JSON Schema->Picknik format converter as your personal project but why would you do that as well? It's you or the software group who have brought the topic here. If you think it is a good idea, suggest PickNik to use Schema as well. But, sorry, the burden is on you guys.
"
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUFNG,kenji-miyake,"@doganulus If you are going to act in the autoware community, you must first understand the concepts and values in order to discuss things effectively with other contributors.
If you disagree with the policy and want to change it,  you should escalate it to the TSC or somewhere appropriate through a proper path.
I'm sorry for using a strong expression, but please DO NOT invade our freedom that was approved in an appropriate place."
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUFOb,doganulus,"Thank you @kenji-miyake, I understand. What do you expect from the Open AD Kit then? 

Now I am confused. Maybe this is the question for the TSC."
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUFWL,kenji-miyake,"@doganulus Thank you for your understanding. :smile:

> What do you expect from the Open AD Kit then?

Any proposal is welcome, but please note that it shouldn't interfere with other activities.
Software WG works on some projects, such as the Bus ODD, and many other contributors develop Autoware components. They have their own missions, no one has the right to block them.
If some activities conflict, we should solve it by passing a resolution at the TSC.

> Now I am confused. Maybe this is the question for the TSC.

What's your question? Shall we discuss it in other places, such as Discord or another discussion thread?"
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUFoN,doganulus,"It is fine to discuss here.

The problem is the mission of the OpenAD Kit and its relations with the Software work group. I am interested in the cloud-native development and testing. This is described in the objectives of the working group as well as the open ecosystem related to the SOAFEE initiative. You know this covers a wide range of topics, tooling, best practices, etc. This is about the big software world outside of the ROS ecosystem.

We know you cannot find every solution in the ROS ecosystem. And even when there is, they are limited, untested, and undermaintained. Not only to PickNik's tool, but this also applies to the core ROS tooling as well. That's objectively bad tooling, sorry. So the whole idea of the OpenAD Kit is to address the problem and bring good practices and tooling into Autoware and hopefully into ROS itself. Of course, they will be foreign to the current ROS users. Some proposals are, and will be, apparently in a clash with the current existing practices in ROS. I am in favor of not giving compromises here under the OpenAD Kit. So I would ask you openly to allow us to explore without archaic ROS tooling. Can we do that?

But maybe I have misunderstood the OpenAD Kit and its objectives. So a clarification from the TSC would be great. @mitsudome-r"
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUFog,mitsudome-r,"Here is my opinion:
- I personally don't mind choosing either JSON schema or Picknik's format as a standard parameter config file for Autoware packages at this point. They both seem to satisfy the requirement that Kasper proposed to have single source of file to maintain parameter information.
- If there are big controversy over which one to use among developers and cannot be solved with discussion, we can have a vote among Open AD Kit or TSC members as final option
- Once the format is selected, all ROS Nodes in Autoware should have it's parameter configuration format along side with their source code within that format. This work should be done by Open AD Kit WG members and Software WG members
- If there are people who wish to convert the config file into the un-selected format to meet their demand, then it would be the package's code-owners decision to whether or not to allow such change to their package. (For Core packages, we might have a restriction for this though)"
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUF5C,mitsudome-r,"@doganulus 

> But maybe I have misunderstood the OpenAD Kit and its objectives. So a clarification from the TSC would be great. @mitsudome-r

The Vision and Goals haven't changed from the initial proposal: https://github.com/autowarefoundation/autoware-projects/wiki/Open-AD-Kit-working-group.

You are correct that Open AD Kit would play a significant role to connect different communities to form an ecosystem for autonomous driving technologies. However, I believe ROS is also part of that ecosystem as well, at least with current Autoware development status. There will be people from different communities/organizations in the ecosystem who have different demands and requirements, which also mean that they might have different preference about the tool they use. 

Therefore, my proposal above is to choose a format that is mandatory for all the packages so that we have standardized format between all Autoware users, but allow extension(or conversion) on top of that format for people who wish to use different libraries if they wish to."
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUIC2,doganulus,"There are a few style details for writing schemas. 

Please find an example param+schema configuration for `ndt_scan_matcher` node here:
https://github.com/doganulus/autoware-schema/tree/main/localization/ndt_scan_matcher/config

Some style choices I have made:
- Write the node name `ndt_scan_matcher` explicitly instead of `/**`. Problem? Explicit is better?
- Use schema version `draft-07`. This is the most recent one that has a large tooling support.
- Use schema definitions and references to avoid the nesting caused by `namespace` and `ros__parameters`. 
- Not set `additionalProperties: false` to restrict extra keys. Shall we set?
- Test `redhat.vscode-yaml` extension for VSCode. This extension adds validation support in the editor, parameter explanation based on parameter descriptions, and code completion based on parameter names and default values. "
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUmCC,kaspermeck-arm,"Thanks for putting the example together.

AFAIK `/**` is the required format for the ROS node to properly interpret the input parameter file."
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUnCd,doganulus,I thought `/**` is a regular expression to select all namespaces.
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUn2A,kaspermeck-arm,"If that's the case and with the assumption it doesn't break anything, then I think being more explicit is preferable.

@kenji-miyake @ambroise-arm 
Would there be any issues if we change
```yml
/**:
  ros__parameters:
    range: 90
    ...
```
to
```yml
lidar_apollo_segmentation_tvm_nodes:
  ros__parameters:
    range: 90
    ...
```
?"
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUn59,xmfcx,"About `/**` usage, I think it's to let parameters work even when [the node names are changed or remapped](https://design.ros2.org/articles/static_remapping.html). I didn't make tests by adding namespaces to the node names but it might also allow when the node names gain some namespace prefixes.

In one of my first MRs in Autoware.Auto, Josh suggested me to use `/**` explicitly: https://gitlab.com/autowarefoundation/autoware.auto/AutowareAuto/-/merge_requests/961#note_579686071

Also see: https://answers.ros.org/question/304346/ros2-yaml-config-file-without-node-name/"
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUn8K,kaspermeck-arm,"One comment regarding the naming convention in your [repo](https://github.com/doganulus/autoware-schema/tree/main/localization/ndt_scan_matcher/config).

From [Understanding JSON Schema](http://json-schema.org/understanding-json-schema/):
> JSON Schema is a powerful tool for validating the structure of JSON data.

which I interpret as `ndt_scan_matcher.schema.json` should be changed to `ndt_scan_matcher.param.def.json` as the schema used for JSON data is:
> ""$schema"": ""http://json-schema.org/draft-07/schema#""

Would this be accurate?"
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUoAz,xmfcx,"@doganulus I've used your [autoware_schema repository](https://github.com/doganulus/autoware-schema) and I really like the editor support and tooltips it adds.

So for this to work, every `.param.yaml` file needs to be accompanied by a `.schema.json` file with the same name right?

This will add an additional file to maintain for each `.param.yaml` file. Even in side repositories like [autoware_launch](https://github.com/autowarefoundation/autoware_launch/blob/main/autoware_launch/config/localization/crop_box_filter_measurement_range.param.yaml) where there are copies of these parameter files.

I am ok with having these `.schema.json` files along the usual parameter files. But I think in the future, we can also auto-generate these files from Picknik's library to assist the yaml files. It would generate matching pairs for the IDE comfort.

This still doesn't bring the runtime validation and many other features Picknik's library bring. So my suggestion is to 
- remove default parameter values from the cpp files (mandatory)
- allow having these `.schema.json` files along with `.param.yaml` files (optional)
- allow developers to use https://github.com/PickNikRobotics/generate_parameter_library (optional)

And in future, we can also focus on:
- Generating `.param.yaml` and `.schema.json` files automatically from the [source parameter yaml file](https://github.com/PickNikRobotics/generate_parameter_library/blob/main/example/src/parameters.yaml) 

cc: @kenji-miyake @kasperornmeck "
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUoME,doganulus,"@xmfcx The mapping between the YAML file and its schema has been done explicitly in the `.vscode` settings as [here](https://github.com/doganulus/autoware-schema/blob/main/.vscode/settings.json). The names may be different but it is good to keep them the same, I think.

```json
{
    ""yaml.schemas"": {
        ""./localization/ndt_scan_matcher/config/ndt_scan_matcher.schema.json"": [
            ""ndt_scan_matcher.param.yaml""
        ],
    }
}
```
The tooling supports remote locations as well as local system locations. In the future, Autoware Foundation may want to publish these schemas online and we can refer to their remote locations as `https://autoware.org/schemas/core/v1/localization/ndt_scan_matcher.schema.json`. That would be a good feature to enhance the cloud-native claim of Autoware.

Also, I will not do it but you may want to suggest PickNik to generate their `cpp` files from schemas. That way it feels more natural. They would not need to maintain a custom format when there is already a standard format if they want to generate code. Being slightly less verbose doesn't justify having a competing format in my eyes."
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUoUx,doganulus,"@kasperornmeck There is an active proposal to standardize the extensions `.json` and `.schema.json` for JSON Schema documents (both allowed). Not using any extension is also common but I don't think we would go for that. 

If you want to read the proposal, it is [here](https://www.ietf.org/archive/id/draft-ietf-httpapi-rest-api-mediatypes-03.html#name-media-type-application-sche), see Section 2.2.5."
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUo2o,kaspermeck-arm,"@doganulus
I think I understand where the confusion lays... from my experience, a schema is used to validate a data file to ensure that, e.g., bounds are met. Is it common practice to define the actual value for the parameter in the JSON Schema?
See https://restfulapi.net/json-schema/ under ""JSON Schema Validation Example"" as an example."
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUo-Q,kaspermeck-arm,"@doganulus 
I followed this guide https://medium.com/@joshuaavalon/intellisense-for-json-and-yaml-in-vs-code-f626fc733426 to understand how JSON Schema works in VSC. I added the following in my `settings.json` file found through `Ctrl + ,` under `JSON: Schemas`. I added these lines (replacing USER):
```
""json.schemas"": [
  {
    ""fileMatch"": [""data.json""],
    ""url"": ""/home/USER/fun/project/address.schema.json""
  }
]
```
and created `data.json`. Hovering, autocomplete, etc works great! 

As we'll have a unique schema for each ROS node, there will be a lot of schemas (100+). Do you have any idea how to do this at scale? Do we need 100+ entries in the `settings.json` file like the one I added above?"
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUmDt,kaspermeck-arm,"@kenji-miyake @mitsudome-r @doganulus 

I've been catching up on the discussion and I thank everyone involved for their engagement!

Below I've listed the scope for the parameter definition file.
- the parameter definition file **will** be used for the following:
  - generate the parameter file
  - markdown table for web documentation
- the parameter definition file **might** be used for the following:
  - parameter validation
  - code generation

I think the focus when determining the file format should be on how suitable it is in the context in which it'll be used. The ROS community uses `python`, `XML` and `YAML` formats for node configuration/launch, so the community is already familiar with the `YAML` format, see [Launch-file-different-formats](https://docs.ros.org/en/humble/How-To-Guides/Launch-file-different-formats.html). Using the `YAML` format leaves the door open for code generation. It is because of these two reasons which I am suggesting use the `YAML` format.

I would like for us to move on to the execution phase and start working on other _dojos_, we have lots of fun tasks to get done! I hope and wish that we can come to an agreement soon."
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUnAR,doganulus,"The reuse of existing cloud-native tooling is one of the benefits that @kasperornmeck hasn't listed above once we agreed to separate the parameter definition (schema) file after TierIV's proposal. The custom YAML format would prevent that. In the example, I have given [an example](https://github.com/orgs/autowarefoundation/discussions/3325#discussioncomment-5275830) about JSON Schema in this discussion, we can have free parameter definition, validation, and description tooltips in our editors today plus standard validation via CLI or libraries. If the problem is JSON vs YAML, the difference is not sharp. This must be a non-issue. A modern cloud-native developer is proficient in these formats. 

Moreover, one of the future Dojos is about the improving developer environment using containers and VSCode, which I do greatly care about. The use of JSON Schema brings all the parameters into that editor. The RedHat plugin adds red squishes if the parameter is not validated, and immediately warns the developer. Provides code completion based on default values. Shows the description to the Autoware developer immediately. This is my ideal developer experience between developers and parameters. This can be done today by adopting a well-known format. Please try the solution and think why Autoware or ROS developers could not have these goodies today. This is a great service for the ROS community when you evaluate it fairly. 

So I find the opposite ROS community argument weak when I compared it all. Please feel to give an estimate of when Autoware (or ROS) will have all these features if the custom YAML format is chosen. I estimate it will never happen but feel free to give your opinion. 

Overall more opinions on the topic would be healthier. 
"
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUoBm,xmfcx,"Following up from [my previous comment on this page](https://github.com/orgs/autowarefoundation/discussions/3325#discussioncomment-5406771), my suggestion is to 
- remove default parameter values from the `.cpp` files (mandatory)
- allow having these `.schema.json` files along with `.param.yaml` files (optional)
- allow developers to use https://github.com/PickNikRobotics/generate_parameter_library (optional)

And in future, we can also focus on:
- Generating `.param.yaml` and `.schema.json` files automatically from the [source parameter yaml file](https://github.com/PickNikRobotics/generate_parameter_library/blob/main/example/src/parameters.yaml) "
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUpdv,kenji-miyake,"I almost agree with @xmfcx, but have several supplemental comments.

> allow having these .schema.json files along with .param.yaml files (optional)
allow developers to use https://github.com/PickNikRobotics/generate_parameter_library (optional)

I think ""to allow"" these things are mandatory, ""to apply"" these are optional and up to package maintainers.

> Generating .param.yaml and .schema.json files automatically from the [source parameter yaml file](https://github.com/PickNikRobotics/generate_parameter_library/blob/main/example/src/parameters.yaml)

I think the direction can be opposite: `.schema.json` -> `parameters.yaml` and `.param.yaml`
And for long-term, `parameters.yaml` might be unified with `.schema.json` because:
- The editor support feature is definitely helpful. So `.schema.json` is mandatory.
- `generate_parameter_library` is also definitely helpful. So `parameters.yaml` is mandatory **for now**.
- But having multiple similar formats is inefficient. So it's better to unify the formats, or at least, the maintenance process should be automated.

We need to discuss the format with PickNik's developers."
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUqja,xmfcx,"We've discussed with @kenji-miyake and also reading @doganulus 's [latest message about multiple schema files above](https://github.com/orgs/autowarefoundation/discussions/3325#discussioncomment-5415017), here is my next proposal to have everyone aligned:

- Remove default parameter values from the `.cpp` files (mandatory)
- Allow having these `.schema.json` files along with `.param.yaml` files (up to developers)
  - create a `schema` folder in the package directory:
    - `package/schema/default_node_name.schema.json`
    - `package/config/default_node_name.param.yaml`
    - This way of partitioning will help users not confuse the actual parameters and the schemas.
    - In future we can let Picknik's library use this folder's contents as default.
    - In future, we can create a script to create a `.vscode/settings.json` file for automatic association.
- Allow developers to use https://github.com/PickNikRobotics/generate_parameter_library as it is (up to developers) 

And in future, we can also focus on:
- Generating `package/config/default_node_name.param.yaml` automatically with a CI action from [PickNik's library](https://github.com/PickNikRobotics/generate_parameter_library)
- Make [PickNik's library](https://github.com/PickNikRobotics/generate_parameter_library) use the `package/schema/default_node_name.schema.json` instead of the `package/src/default_node_name.yaml` file.
- Propose [PickNik's library](https://github.com/PickNikRobotics/generate_parameter_library) to not use the default values set in the `package/src/default_node_name.yaml` file.
  - Because it doesn't match with single source of truth proposal.
  - Propose it as an option

@kasperornmeck @doganulus @kenji-miyake Do you agree with this end proposal? I think it should satisfy all of our points that are raised. (Apart from also allowing Picknik's tooling that uses code-gen)"
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUq-n,kenji-miyake,@xmfcx Thank you for the summary. I totally agree with your proposal.
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUq_K,doganulus,@xmfcx @kenji-miyake  I also agree with this summary. Thanks for your efforts!
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUr39,kaspermeck-arm,"@xmfcx @kenji-miyake @doganulus 
Thanks for the discussion and capturing the suggested changes.

I think there is only one aspect left to decide on. Should the JSON Schema also act as the JSON document? I.e., do we want to include the `default_value` for each parameter in the JSON Schema file?
Discussion points:
- if we don't include a `default_value`, we cannot generate the `node.param.yaml` file from the `node.schema.json` file
- common definition (https://www.mongodb.com/basics/json-schema-examples) of a schema
  - > JSON Schema is a model that represents the format and structure of a common group of JSON documents.
- pros/cons with separation of schema and document; what's best practice?

I will create a Final3 proposal to ensure we are aligned once we've determined how we wish to do with the schema/document topic."
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUtvr,doganulus,"> Do we want to include the default value for each parameter in the JSON Schema file? If we don't include a default_value, we cannot generate the `node.param.yaml` file from the `node.schema.json` file

We may not need to. Generation can be done based on types if `default` is missing in the schema. Say, booleans get `false`, numbers get zero, and strings/arrays/objects get the empty. Alternatively, just generate all with `null` values. That won't be valid, of course.

> common definition of a schema, pros/cons with separation of schema and document; what's best practice?

I would prefer the word _specification_ here. It is the specification of parameter files. Technically it falls under the category of formal specifications, which is considered as a good practice for safety-critical system design (see ISO 26262 for example). Separating _specification_ and _verification_ is another good practice in general. 

"
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUxPp,kaspermeck-arm,"> > Do we want to include the default value for each parameter in the JSON Schema file? If we don't include a default_value, we cannot generate the `node.param.yaml` file from the `node.schema.json` file
> 
> We may not need to. Generation can be done based on types if `default` is missing in the schema. Say, booleans get `false`, numbers get zero, and strings/arrays/objects get the empty. Alternatively, just generate all with `null` values. That won't be valid, of course.

I think the default value should be a valid and tested value for the ROS node.

> 
> > common definition of a schema, pros/cons with separation of schema and document; what's best practice?
> 
> I would prefer the word _specification_ here. It is the specification of parameter files. Technically it falls under the category of formal specifications, which is considered as a good practice for safety-critical system design (see ISO 26262 for example). Separating _specification_ and _verification_ is another good practice in general.

In Final3 Proposal I'll add terminology to align the community. When you say to separate _specification_ from _validation_, does that mean we shouldn't include, e.g., `exclusiveMinimum` from [Draft 07 Schema](http://json-schema.org/draft-07/schema#) in the JSON Schema specification?"
ROS Node Configuration - Final2 Proposal,D_kwDOAnasMc4AS24u,2023-03-09T01:58:07Z,kaspermeck-arm,5,Answered,DC_kwDOAnasMc4AUxv4,kaspermeck-arm,New proposal found here: https://github.com/orgs/autowarefoundation/discussions/3371.
2023-03-16 Racing Working Group Meeting,D_kwDOAnasMc4AS26z,2023-03-09T02:56:32Z,QZJGeorge,0,Unanswered,,,
Adding grid coordinate information in `load_partial_pointcloud_map` interface in `pointcloud_map_loader`,D_kwDOAnasMc4AS36s,2023-03-10T04:47:32Z,kminoda,4,Answered,,,
Adding grid coordinate information in `load_partial_pointcloud_map` interface in `pointcloud_map_loader`,D_kwDOAnasMc4AS36s,2023-03-10T04:47:32Z,kminoda,4,Answered,DC_kwDOAnasMc4AUE_x,badai-nguyen,"@kminoda  Thank your for your open the discussion,
I agree that it's better to include the x&y coordinates of map grids into map_loader service's response.
As I'm working on compare_map filter and it can be precisely defined which map grid that pointcloud belong to as well as no need to re-compute boundary points. "
Adding grid coordinate information in `load_partial_pointcloud_map` interface in `pointcloud_map_loader`,D_kwDOAnasMc4AS36s,2023-03-10T04:47:32Z,kminoda,4,Answered,DC_kwDOAnasMc4AUVmd,mayacarla2070,"@kminoda @badai-nguyen Could you please help, how to enable partial map loading in autoware universe.
Which are the files we need to change and what changes we need to make in order for it to work.
"
Adding grid coordinate information in `load_partial_pointcloud_map` interface in `pointcloud_map_loader`,D_kwDOAnasMc4AS36s,2023-03-10T04:47:32Z,kminoda,4,Answered,DC_kwDOAnasMc4AUVnm,badai-nguyen,"@mayacarla2070 For current Autoware, I think the simplest way, you can add pointcloud_map_file:=pointcloud_map to make partial map loading work.
Here is command I use: 
`ros2 launch autoware_launch logging_simulator.launch.xml map_path:=$HOME/autoware_map/sample-map-rosbag_split vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit control:=false planning:=false pointcloud_map_file:=pointcloud_map`"
Adding grid coordinate information in `load_partial_pointcloud_map` interface in `pointcloud_map_loader`,D_kwDOAnasMc4AS36s,2023-03-10T04:47:32Z,kminoda,4,Answered,DC_kwDOAnasMc4AUVsF,mayacarla2070,@badai-nguyen map_path will point to the directory with split .pcd files and lanelet2.osm file right?
Adding grid coordinate information in `load_partial_pointcloud_map` interface in `pointcloud_map_loader`,D_kwDOAnasMc4AS36s,2023-03-10T04:47:32Z,kminoda,4,Answered,DC_kwDOAnasMc4AUVtb,kminoda,"@mayacarla2070 In the above case, `$HOME/autoware_map/sample-map-rosbag_split/pointcloud_map` will store all the divided pcd files.
- `$HOME/autoware_map/sample-map-rosbag_split/pointcloud_map/00.pcd` 
- `$HOME/autoware_map/sample-map-rosbag_split/pointcloud_map/01.pcd`
- ... "
Adding grid coordinate information in `load_partial_pointcloud_map` interface in `pointcloud_map_loader`,D_kwDOAnasMc4AS36s,2023-03-10T04:47:32Z,kminoda,4,Answered,DC_kwDOAnasMc4AUV1q,mayacarla2070,"@kminoda @badai-nguyen Thanks a lot for the help. Autoware is able to merge the split .pcd files as a complete map in Rviz.
I have another query is it possible to load the split .pcd files as per need as shown here.(https://autowarefoundation.github.io/autoware.universe/main/localization/ndt_scan_matcher/#dynamic-map-loading).

Also, here https://autowarefoundation.github.io/autoware.universe/main/map/map_loader/ it refers to some .srv files."
Adding grid coordinate information in `load_partial_pointcloud_map` interface in `pointcloud_map_loader`,D_kwDOAnasMc4AS36s,2023-03-10T04:47:32Z,kminoda,4,Answered,DC_kwDOAnasMc4AUYyk,kminoda,"Yes, ndt_scan_matcher will automatically load the split map dynamically if the map is already split?"
Adding grid coordinate information in `load_partial_pointcloud_map` interface in `pointcloud_map_loader`,D_kwDOAnasMc4AS36s,2023-03-10T04:47:32Z,kminoda,4,Answered,DC_kwDOAnasMc4AUYzh,mayacarla2070,"@kminoda Yes the map is already split. but it loads full map. I am not able to get the partial map loading to work, could there be anything I might be missing?
"
Adding grid coordinate information in `load_partial_pointcloud_map` interface in `pointcloud_map_loader`,D_kwDOAnasMc4AS36s,2023-03-10T04:47:32Z,kminoda,4,Answered,DC_kwDOAnasMc4AUYz7,kminoda,@mayacarla2070 How did you confirm that ndt_scan_matcher loads the full map?
Adding grid coordinate information in `load_partial_pointcloud_map` interface in `pointcloud_map_loader`,D_kwDOAnasMc4AS36s,2023-03-10T04:47:32Z,kminoda,4,Answered,DC_kwDOAnasMc4AUY0W,kminoda,"BTW it may be better to create another discussion, as this topic is a bit irrelevant from this discussion. It would also be more helpful when someone else has similar issue in the future."
Adding grid coordinate information in `load_partial_pointcloud_map` interface in `pointcloud_map_loader`,D_kwDOAnasMc4AS36s,2023-03-10T04:47:32Z,kminoda,4,Answered,DC_kwDOAnasMc4AUY35,kminoda,"IMHO proposal A sounds good. The yaml file would look like this:

```
x_coord: x_0, x_1, x_2, ..., x_m
y_coord: y_0, y_1, y_2, ..., y_n
A.pcd: [0, 0]   # -> x_0 < x < x_1, y_0 < y < y_1
B.pcd: [0, 1]   # -> x_0 < x < x_1, y_1 < y < y_2
C.pcd: [0, 5]   # -> x_0 < x < x_1, y_5 < y < y_6
D.pcd: [1, 1]   # -> x_1 < x < x_2, y_1 < y < y_2
...
```

What do you think? @yukkysaito "
Adding grid coordinate information in `load_partial_pointcloud_map` interface in `pointcloud_map_loader`,D_kwDOAnasMc4AS36s,2023-03-10T04:47:32Z,kminoda,4,Answered,DC_kwDOAnasMc4AUdk0,kminoda,"I created several options and their pros & cons. I think III is the most flexible while keeping the users from providing invalid inputs. 

### I. List dividing coordinates for each pcd file
```
# metadata.yaml
# name: [x_min, x_max, y_min, y_max]
A.pcd: [x_a_min, x_a_max, y_a_min, y_a_max]
B.pcd: [x_b_min, x_b_max, y_b_min, y_b_max]
C.pcd: [x_c_min, x_c_max, y_c_min, y_c_max]
D.pcd: [x_d_min, x_d_max, y_d_min, y_d_max]
...
```
Pros
- Simple expression and easy to understand

Cons
- Too sufficient information

### II. List dividing coordinates for each pcd file
```
# metadata.yaml
x_resolution: 100.0
y_resolution: 150.0
A.pcd: [1200, 2500]   # -> 1200 < x < 1300, 2500 < y < 2650
B.pcd: [1300, 2500]   # -> 1300 < x < 1400, 2500 < y < 2650
C.pcd: [1200, 2650]   # -> 1200 < x < 1300, 2650 < y < 2800
D.pcd: [1400, 2650]   # -> 1400 < x < 1500, 2650 < y < 2800
...
```

Pros
- Also simple expression and easy to understand
- Avoid users setting uneven resolution (which can also be cons)

Cons
- Too sufficient information (same as I.)

### III. List dividing coordinates for x and y in an yaml file.

```
# metadata.yaml
x_0: 1200.0
y_0: 2500.0
resolution_x: 100.0
resolution_y: 150.0
A.pcd: [i, j]   # -> x_0 + i * res_x < x < x_0 + (i + 1) * res_x, y_0 + j * res_y < y < y_0 + (j + 1) * res_y
B.pcd: [0, 1]
C.pcd: [0, 5] 
D.pcd: [1, 1]
...
```

Pros
- Contains necessary and sufficient information for grid coordinates
  - For example, we can avoid users providing A.pcd and B.pcd with some overlap to Autoware (while I and II cannot)

Cons
- Bit more tricky to understand compared to I?



### IV. Use name convention
```
$ ls pointcloud_map/
100_120_900_920.pcd
120_140_900_920.pcd
140_160_900_920.pcd
100_120_920_940.pcd
...
```
Pros
- No additional metafile required

Cons
- May conflict with other naming conventions (such as a requirement from Vector Map Builder or Fleet Management System)
"
Adding grid coordinate information in `load_partial_pointcloud_map` interface in `pointcloud_map_loader`,D_kwDOAnasMc4AS36s,2023-03-10T04:47:32Z,kminoda,4,Answered,DC_kwDOAnasMc4AUdqV,mitsudome-r,The first option seems to be the simplest and intuitive
Adding grid coordinate information in `load_partial_pointcloud_map` interface in `pointcloud_map_loader`,D_kwDOAnasMc4AS36s,2023-03-10T04:47:32Z,kminoda,4,Answered,DC_kwDOAnasMc4AUeyA,yukkysaito,"With proposal I, there is too much flexibility and the size of each grid may be different. In that case, index access may not be possible on the map server side.
I would suggest II for simplicity and index access."
Adding grid coordinate information in `load_partial_pointcloud_map` interface in `pointcloud_map_loader`,D_kwDOAnasMc4AS36s,2023-03-10T04:47:32Z,kminoda,4,Answered,DC_kwDOAnasMc4AUjUX,kminoda,"OK, thank you for the comments.
If you are all OK, I would go for II.
( @YamatoAndo @mitsudome-r @yukkysaito )"
Adding grid coordinate information in `load_partial_pointcloud_map` interface in `pointcloud_map_loader`,D_kwDOAnasMc4AS36s,2023-03-10T04:47:32Z,kminoda,4,Answered,DC_kwDOAnasMc4AU_2R,kminoda,Addressed here: https://github.com/autowarefoundation/autoware.universe/pull/3205
"Is there a recommended CARLA-Autoware bridge? If not, should we have it?",D_kwDOAnasMc4AS4wp,2023-03-11T04:25:39Z,Robotics010,0,Unanswered,,,
API for AWSIM,D_kwDOAnasMc4AS5T-,2023-03-12T08:05:08Z,Kim-mins,1,Answered,,,
API for AWSIM,D_kwDOAnasMc4AS5T-,2023-03-12T08:05:08Z,Kim-mins,1,Answered,DC_kwDOAnasMc4AUNuW,mitsudome-r,"As far as I know, there are limited API to manipulate AWSIM's simulation environment from external software.

The ones I know are:
* ROS topics to control ego vehicle's movement: https://tier4.github.io/AWSIM/Components/ROS2/ROS2TopicList/
* Defining NPC pedestrians and NPC vehicles through .cs scripts: https://tier4.github.io/AWSIM/Components/Traffic/NPC/NPC%20Pedestrian/

I know that the developers of AWSIM are trying to support simulation with Open Scenario files so they might have some more APIs to be added in the future though. 

@mackierx111 any comments?"
API for AWSIM,D_kwDOAnasMc4AS5T-,2023-03-12T08:05:08Z,Kim-mins,1,Answered,DC_kwDOAnasMc4AUOmN,Kim-mins,"Thank you for the response! It is really helpful!
Actually, my goal is to spawn and manipulate NPC vehicles/pedestrians via script(written in python, C# or whatever) and simulate Autoware on that modified environment.
I'm not that skillful to ROS, so I think I can try your second suggestion (using AWSIM's C# modules directly via my C# script).
After some investigations on AWSIM github repository, I think I can achieve my goal by writing my own C# script, but I cannot sure. Do you think it is possible?
If so, do you know any tutorial or reference regarding the script for spawning/manipulating NPCs?"
API for AWSIM,D_kwDOAnasMc4AS5T-,2023-03-12T08:05:08Z,Kim-mins,1,Answered,DC_kwDOAnasMc4AUTMr,Kim-mins,"I followed an installation instruction [here](https://tier4.github.io/AWSIM/GettingStarted/SetupUnityProject/) to write C# script, and I tried to modify the file [RandomTrafficSimulator.cs](https://github.com/tier4/AWSIM/blob/main/Assets/AWSIM/Scripts/RandomTraffic/RandomTrafficSimulator.cs), which seems like the script runs on Demo.
I tested **whether I can spawn a NPC Vehicle to the location relative to the ego vehicle(e.g., 10cm behind of the ego vehicle(maybe cm is not the correct scale in Unity))**, but I concluded myself that, it is impossible because I should provide a specific `lane` and a `waypoint` ([reference](https://github.com/tier4/AWSIM/blob/0bd1d45005c42f335e0045050db5443dd9cf29e9/Assets/AWSIM/Scripts/RandomTraffic/RandomTrafficSimulator.cs#L78)), which cannot be retrieved from the ego vehicle itself.
I don't know about the `lane` and the `waypoint` well, but I thought that way since I cannot know which lane the ego vehicle is on.
Could you please tell me if my understanding is correct or not?

*Edit
I can spawn NPC vehicle to the specific point by changing position and forward of `NPCVehicleSpawnPoint`([code here](https://github.com/tier4/AWSIM/blob/a4c6bd552643d1a38b3067a70e17267c9f18bfa5/Assets/AWSIM/Scripts/RandomTraffic/NPCVehicle/NPCVehicleSpawner.cs#L9)), while `Lane` and `WaypointIndex` are unchanged, but NPC Vehicle does not move properly([video link](https://user-images.githubusercontent.com/50267797/225802367-9802b87e-97aa-473a-b780-a0f72b402037.webm)). Is this due to the improper `Lane` and `WaypointIndex`?..
"
API for AWSIM,D_kwDOAnasMc4AS5T-,2023-03-12T08:05:08Z,Kim-mins,1,Answered,DC_kwDOAnasMc4AUp6Y,mackierx111,"@Kim-mins 
Random traffic NPCs in AWSIM move along waypoints. It is possible to spawn npc behind the ego vehicle by editing the waypoint used for random traffic.
Also, if you want a scenario that random traffic cannot support, you will need to write it in C#. At that time, the NPC can be moved to any desired position by using the `SetPosition()` and `SetRotation()` methods. When doing own customized simulations, I find it more flexible and scalable to open UnityEditor and write C# rather than using an external API such as python.
We would like to support open scenarios in the future, but it will take some time.

"
API for AWSIM,D_kwDOAnasMc4AS5T-,2023-03-12T08:05:08Z,Kim-mins,1,Answered,DC_kwDOAnasMc4AUqMP,Kim-mins,"@mackierx111
Thank you for the response! 
Then I have one question. When I want to simulate Autoware on scenarios other than RandomTraffic, I should write the code in C# (open AWSIM project with Unity Editor) and build the project for each simulation. Is my understanding correct?"
API for AWSIM,D_kwDOAnasMc4AS5T-,2023-03-12T08:05:08Z,Kim-mins,1,Answered,DC_kwDOAnasMc4AUv-X,mackierx111,"@Kim-mins 
Your understanding is probably correct. In the meantime, it is possible to run the simulation just by running UnityEditor without building it. (However, the performance load is high.) 
Building is certainly a hassle, but in the case of many automated driving simulators users want to make their own customizations. It is better to have a full-scratch, custom premise than to have a subtle API available. If you have any complaints or suggestions for AWSIM class design, etc., we would love to hear them!
"
API for AWSIM,D_kwDOAnasMc4AS5T-,2023-03-12T08:05:08Z,Kim-mins,1,Answered,DC_kwDOAnasMc4AUyE_,Kim-mins,"@mackierx111 
Thank you! Now everything is clear to me! I really appreciate to your help!"
2023-03-14 ODD working group weekly meeting (133),D_kwDOAnasMc4AS6OP,2023-03-13T07:26:12Z,Igata-ctrl,0,Unanswered,,,
AWSIM and autoware 2d goal no route,D_kwDOAnasMc4AS6Uk,2023-03-13T09:46:58Z,yangjiameng,2,Answered,,,
AWSIM and autoware 2d goal no route,D_kwDOAnasMc4AS6Uk,2023-03-13T09:46:58Z,yangjiameng,2,Answered,DC_kwDOAnasMc4Aapwp,whbcumtb,"Can you provide some screenshots?
According to my knowledge, you can run ""ros2 topic list"" to check if there are 22 topics with AWSIM running as shown as follows:
          $ ros2 topic list
          /awsim/ground_truth/vehicle/pose   
          /clock    
          /control/command/control_cmd
          /control/command/emergency_cmd
          /control/command/gear_cmd
          /control/command/hazard_lights_cmd
          /control/command/turn_indicators_cmd
          /parameter_events
          /rosout
          /sensing/camera/traffic_light/camera_info
          /sensing/camera/traffic_light/image_raw
          /sensing/gnss/pose
          /sensing/gnss/pose_with_covariance
          /sensing/imu/tamagawa/imu_raw
          /sensing/lidar/top/pointcloud_raw
          /sensing/lidar/top/pointcloud_raw_ex
          /vehicle/status/control_mode
          /vehicle/status/gear_status
          /vehicle/status/hazard_lights_status
          /vehicle/status/steering_status
          /vehicle/status/turn_indicators_status
          /vehicle/status/velocity_status
If the topic count is enough, run ""ros2 topic hz  /sensing/lidar/top/pointcloud_raw"" and ""ros2 topic hz /sensing/gnss/pose"" to see the frequency  of topic data, where the former is about 100 Hz while the other is about 10 Hz."
AWSIM and autoware 2d goal no route,D_kwDOAnasMc4AS6Uk,2023-03-13T09:46:58Z,yangjiameng,2,Answered,DC_kwDOAnasMc4AavKM,villaoningfootball,you can check planning's output on the terminal
Connecting Traffic Lights from AWSIM (unity) to Autoware RVIZ,D_kwDOAnasMc4AS6d3,2023-03-13T12:57:00Z,Nick79919030,1,Answered,,,
Connecting Traffic Lights from AWSIM (unity) to Autoware RVIZ,D_kwDOAnasMc4AS6d3,2023-03-13T12:57:00Z,Nick79919030,1,Answered,DC_kwDOAnasMc4AUNvO,mitsudome-r,"Is your intention to recognize the traffic light result through camera attached to the simulated vehicle?
-> In this case, you should check if the image topic is published in `/sensing/camera/traffic_light/image_raw` and is connected to Autoware's traffic light recognition nodes.

Or are you expecting to have ground truth result of traffic light states coming out of AWSIM directly?
-> I'm not certain if the traffic light states are published from AWSIM with current version. 
"
Connecting Traffic Lights from AWSIM (unity) to Autoware RVIZ,D_kwDOAnasMc4AS6d3,2023-03-13T12:57:00Z,Nick79919030,1,Answered,DC_kwDOAnasMc4AUOqv,Nick79919030,Thanks a lot! We just made it work just had a Problem with the Position of the Traffic Light in the Lanelet2.
Custom generated pcd map points not displaying in rviz,D_kwDOAnasMc4AS6pg,2023-03-13T16:44:02Z,damodarRohit,1,Answered,,,
Custom generated pcd map points not displaying in rviz,D_kwDOAnasMc4AS6pg,2023-03-13T16:44:02Z,damodarRohit,1,Answered,DC_kwDOAnasMc4AUNF4,rsasaki0109,"@damodarRohit 

Are the `map_path` and `pointcloud_map_file` entered when starting autoware correct?
https://github.com/autowarefoundation/autoware.universe/blob/main/launch/tier4_map_launch/README.md#usage

You can also check if the map was loaded correctly with ""AUTOWARE_RUN_COMMAND | grep pointcloud_map_loader"".
example termanl output)
```
[component_container-56] [INFO] [1678744310.349630416] [map.map_container]: Load Library: /home/autoware/install/map_loader/lib/libpointcloud_map_loader_node.so
[component_container-56] [INFO] [1678744310.604625318] [map.pointcloud_map_loader]: Load /media/autoware/ssd/tokyo/tokyo_map/pointcloud_map.pcd (1 out of 1)
[INFO] [launch_ros.actions.load_composable_nodes]: Loaded node '/map/pointcloud_map_loader' in container '/map/map_container'
```"
Custom generated pcd map points not displaying in rviz,D_kwDOAnasMc4AS6pg,2023-03-13T16:44:02Z,damodarRohit,1,Answered,DC_kwDOAnasMc4AUNH2,damodarRohit,Thanks! I was not providing the pcd file name correctly. Changing the file name solved the issue.
2023-03-15 Simulation Working group Meeting,D_kwDOAnasMc4AS74z,2023-03-14T19:05:24Z,WJaworskiRobotec,0,Unanswered,,,
Use of 'use_pointcloud_container' & 'pointcloud_container_name' arguments in autoware_launch.xml file,D_kwDOAnasMc4AS78A,2023-03-14T20:23:34Z,damodarRohit,1,Answered,,,
Use of 'use_pointcloud_container' & 'pointcloud_container_name' arguments in autoware_launch.xml file,D_kwDOAnasMc4AS78A,2023-03-14T20:23:34Z,damodarRohit,1,Answered,DC_kwDOAnasMc4AUSX-,liuzf1988,"> I am trying to run autoware_launch and I see pointcloud_container argument. Can someone help me understand what the pointcloud_container is used for?

[Component](https://docs.ros.org/en/humble/Tutorials/Intermediate/Composition.html) is a mechanism provided by ROS 2 to composing multiple nodes in a single process. From `autoware.launch.xml` we know the `pointcloud_container` is just the default component container name used in Autoware. All the pointcloud preprocessor related components can be added to this container to reduce communication overhead."
Open AD Kit WG meeting 2023/3/15,D_kwDOAnasMc4AS8qP,2023-03-15T14:59:08Z,armaganarsln,0,Unanswered,,,
Build issue,D_kwDOAnasMc4AS8rY,2023-03-15T15:16:47Z,zhuyingxiang95,1,Answered,,,
Build issue,D_kwDOAnasMc4AS8rY,2023-03-15T15:16:47Z,zhuyingxiang95,1,Answered,DC_kwDOAnasMc4AUTqC,mitsudome-r,"It means you are missing PCL library used by some of the packages in Autoware.
It should be automatically installed when you run rosdep by:
```
cd ~/autoware
source /opt/ros/humble/setup.bash
rosdep install -y --from-paths src --ignore-src --rosdistro $ROS_DISTRO
```

I won't be able to provide any more suggestion with the given information.
Whenever you post a question, it would help if you provide more information for us to reproduce your problem. For example:
- Which ROS version you are using (galactic, humble, etc.)
- What version of autoware you are using (main branch, any tags, etc.)
- Which instruction you are following (steps to reproduce)
- What kind of PC you are using (arm or x86/x64)

"
Build issue,D_kwDOAnasMc4AS8rY,2023-03-15T15:16:47Z,zhuyingxiang95,1,Answered,DC_kwDOAnasMc4AUTrn,zhuyingxiang95,sorry for the  format of the question. I am using ubuntu 20.04 with ROS galactic and i follow the steps in this tutorial https://github.com/tier4/AWSIM/blob/v1.0.2/docs/GettingStarted/QuickStartDemo/index.md. 
Build issue,D_kwDOAnasMc4AS8rY,2023-03-15T15:16:47Z,zhuyingxiang95,1,Answered,DC_kwDOAnasMc4AUTsd,zhuyingxiang95,"![issue](https://user-images.githubusercontent.com/74554419/225365286-2fb84c3a-ffc1-4516-9ff3-35b20f0b2a2f.png)
and i have checked the step you have mentioned. it seems that all libraries are installed. "
Build issue,D_kwDOAnasMc4AS8rY,2023-03-15T15:16:47Z,zhuyingxiang95,1,Answered,DC_kwDOAnasMc4AUVSJ,mitsudome-r,">  I am using ubuntu 20.04 with ROS galactic and i follow the steps in this tutorial

FYI, ROS 2 Galactic has reached its EOL, and I would suggest you to latest version of AWSIM on Ubuntu 22.04: https://tier4.github.io/AWSIM/GettingStarted/QuickStartDemo/

> and i have checked the step you have mentioned. it seems that all libraries are installed.

Hmm, I see. Could you also check and make sure that pcl is installed e.g., by running ` apt list --installed | grep pcl`.
Also, it would be nice if you can also provide which package is outputting the build error."
Build issue,D_kwDOAnasMc4AS8rY,2023-03-15T15:16:47Z,zhuyingxiang95,1,Answered,DC_kwDOAnasMc4AUYhQ,zhuyingxiang95,"thank you a lot for your kind help. the package which always build failed is grid_map_cv.
![Screenshot from 2023-03-17 10-17-14](https://user-images.githubusercontent.com/74554419/225863338-3b2f7532-ff7f-40e2-9bbf-7ecc17ee53bd.png)
 "
Build issue,D_kwDOAnasMc4AS8rY,2023-03-15T15:16:47Z,zhuyingxiang95,1,Answered,DC_kwDOAnasMc4AUYka,mitsudome-r,"According to your log, `autoware_point_types` is the package that is failing. 
```
1 packages failed: autoware_point_types
```

I would like you to try:
1. delete autoware_point_types build logs: `rm autoware/build/autoware_point_types` and try running colcon build again.
2. if it still doesn't work, try adding `find_package(PCL REQUIRED COMPONENTS common)` after [line5](https://github.com/autowarefoundation/autoware.universe/blob/ec35bb43d1b8e732aa91d7d9dfc0eb5c7f16f645/common/autoware_point_types/CMakeLists.txt#L5) in CMakeLists.txt of `autoware_point_types`"
Build issue,D_kwDOAnasMc4AS8rY,2023-03-15T15:16:47Z,zhuyingxiang95,1,Answered,DC_kwDOAnasMc4AUYwK,zhuyingxiang95,"thanks for your suggestions. the autoware_point _type package seems successfully built. but the grid_map_cv package failed as before 
![Screenshot from 2023-03-17 11sds-47-46](https://user-images.githubusercontent.com/74554419/225884548-84b477f1-420c-4c3e-8254-d223e2631db2.png)
 "
Build issue,D_kwDOAnasMc4AS8rY,2023-03-15T15:16:47Z,zhuyingxiang95,1,Answered,DC_kwDOAnasMc4AUYw0,zhuyingxiang95,and the error is : ‘class grid_map::InpaintFilter<grid_map::GridMap>’ has no member named ‘logging_interface_’
Build issue,D_kwDOAnasMc4AS8rY,2023-03-15T15:16:47Z,zhuyingxiang95,1,Answered,DC_kwDOAnasMc4AUdzs,mitsudome-r,I've tried building autoware in Ubuntu 20.04 without any issues. Have you also tried using docker installation?  https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/docker-installation-devel/
Build issue,D_kwDOAnasMc4AS8rY,2023-03-15T15:16:47Z,zhuyingxiang95,1,Answered,DC_kwDOAnasMc4AUhiA,zhuyingxiang95,"thanks a lot for your kind reply, i have fixed this issue by reinstall ros. but now i am facing another building issue which is related to the grid_map_utils. can you take a look at it .
![buildissue](https://user-images.githubusercontent.com/74554419/226597689-d81f402d-8c10-4932-be22-121fede2987f.png)
 "
Build issue,D_kwDOAnasMc4AS8rY,2023-03-15T15:16:47Z,zhuyingxiang95,1,Answered,DC_kwDOAnasMc4AUiGW,mitsudome-r,"Have you tried using docker? As I mentioned earlier, ROS 2 Galactic version of Autoware is not officially supported anymore, and it doesn't worth for you to spend time fixing the build package by package."
Software WG Meeting 2023/03/21,D_kwDOAnasMc4AS8uq,2023-03-15T16:12:41Z,BonoloAWF,0,Unanswered,,,
Manage autoware docker container,D_kwDOAnasMc4AS86m,2023-03-15T20:57:45Z,zillur-av,2,Answered,,,
Manage autoware docker container,D_kwDOAnasMc4AS86m,2023-03-15T20:57:45Z,zillur-av,2,Answered,DC_kwDOAnasMc4AUU0y,evshary,"Hi @zillur-av 

1. Yes, it's what docker should be like. rocker is the wrapper of docker, and it won't save any modification after exit. However, the tutorial guides you to add `--volume`. That means the folder `$HOME/autoware` and `$HOME/autoware_map` will be mounted inside the docker, and you can modify them on your host and the files inside the docker will also be changed.
2. I think you missed some steps. You can take a look at [the demo simulation](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/#preparation). The tutorial guides you to download the necessary map data."
Manage autoware docker container,D_kwDOAnasMc4AS86m,2023-03-15T20:57:45Z,zillur-av,2,Answered,DC_kwDOAnasMc4AUVN4,zillur-av,"> Hi @zillur-av
> 
> 1. Yes, it's what docker should be like. rocker is the wrapper of docker, and it won't save any modification after exit. However, the tutorial guides you to add `--volume`. That means the folder `$HOME/autoware` and `$HOME/autoware_map` will be mounted inside the docker, and you can modify them on your host and the files inside the docker will also be changed.
> 2. I think you missed some steps. You can take a look at [the demo simulation](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/#preparation). The tutorial guides you to download the necessary map data.

1. Thanks for the clarification about the rocker. It creates a new container every time I run it. So, how to best handle this? Let's say I build a ROS package of my own inside the container. After I exit, it will be gone along with executables. And even if I add that package to the volume from within my host machine, I will have to build it every time. How about using ```docker exec -it CONTAINER_ID bash```? I see it starts the same container in a new terminal.
2. I see the [demo link](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/#preparation) you provided is not included in the [docker setup guidelines](https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/docker-installation-devel/). It should be included."
Manage autoware docker container,D_kwDOAnasMc4AS86m,2023-03-15T20:57:45Z,zillur-av,2,Answered,DC_kwDOAnasMc4AUXzo,evshary,"1. I think the better practice will be you put your ROS package under the folder `$HOME/autoware`, which should be mounted in the docker. So, after colcon build, the build/install folder will be under this mounted point. Of course, you can mount another folder for your own package. Just to remember to mount it with the option `--volume` when you run the docker.
2. I agree with you. I guess this is just because the video is added after the tutorial is complete. In fact, the original tutorial only mentions about how to install with docker, and the demo parts are put on another page. But since now the video mentions the demo, maybe can add some prompts to link to the demo page."
Manage autoware docker container,D_kwDOAnasMc4AS86m,2023-03-15T20:57:45Z,zillur-av,2,Answered,DC_kwDOAnasMc4AUxaB,zillur-av,"> 1. I think the better practice will be you put your ROS package under the folder `$HOME/autoware`, which should be mounted in the docker. So, after colcon build, the build/install folder will be under this mounted point. Of course, you can mount another folder for your own package. Just to remember to mount it with the option `--volume` when you run the docker.
> 
>     2. I agree with you. I guess this is just because the video is added after the tutorial is complete. In fact, the original tutorial only mentions about how to install with docker, and the demo parts are put on another page. But since now the video mentions the demo, maybe can add some prompts to link to the demo page.

Do you know how to save the updates? I see ```sudo apt-get update && sudo apt-get upgrade``` is not being saved."
Manage autoware docker container,D_kwDOAnasMc4AS86m,2023-03-15T20:57:45Z,zillur-av,2,Answered,DC_kwDOAnasMc4AU37a,evshary,"If you want to save the state of containers, you should run without `--rm`, and also [docker commit](https://docs.docker.com/engine/reference/commandline/commit/) the changes,
However, in my opinion, I don't prefer to save the state of containers after some modification. I'd like to use Dockerfile to generate docker image to meet my requirements.
Just FYI"
Manage autoware docker container,D_kwDOAnasMc4AS86m,2023-03-15T20:57:45Z,zillur-av,2,Answered,DC_kwDOAnasMc4AU6M3,albiim,"@zillur-av 

1. For the first paragraph you are running a docker image to start a docker container. If you install anything to this docker container you need to save this new customized container into a new image using `docker commit` command: https://docs.docker.com/engine/reference/commandline/commit/ . Then you will need to run the same command but this time with the image that you just created and not the ghcr.io/autowarefoundation/autoware-universe:latest-cuda image. 
2. For the second paragraph, if the ~/autoware_map is empty then try to use the `docker cp` command: https://docs.docker.com/engine/reference/commandline/cp/ . This will allow you to transfer the files from your pc to the docker container. 

Please let me know if this solves your issues. "
Manage autoware docker container,D_kwDOAnasMc4AS86m,2023-03-15T20:57:45Z,zillur-av,2,Answered,DC_kwDOAnasMc4AU8ug,zillur-av,"> @zillur-av
> 
>     1. For the first paragraph you are running a docker image to start a docker container. If you install anything to this docker container you need to save this new customized container into a new image using `docker commit` command: https://docs.docker.com/engine/reference/commandline/commit/ . Then you will need to run the same command but this time with the image that you just created and not the ghcr.io/autowarefoundation/autoware-universe:latest-cuda image.
> 
>     2. For the second paragraph, if the ~/autoware_map is empty then try to use the `docker cp` command: https://docs.docker.com/engine/reference/commandline/cp/ . This will allow you to transfer the files from your pc to the docker container.
> 
> 
> Please let me know if this solves your issues.

I did what you said. My current container ID is : `0c4be77dbaf7` which I got through `docker ps` command. Then I run 
``` 
zrahman@tokka:~$ docker commit 0c4be77dbaf7 autoware/testimage:version3
sha256:4b825a758134ba487ae2703923863eecb91000dd5c4469219152499a12f8be18
zrahman@tokka:~$
```

If I check now
```
zrahman@tokka:~$ docker images
REPOSITORY                                                                            TAG                                                              IMAGE ID       CREATED         SIZE
autoware/testimage                                                                    version3                                                         4b825a758134   7 seconds ago   17.5GB
```
Then I run rocker command and whenever I try to run a ros node, it throws the same error while the same node is working on my previous container.
```
zrahman@tokka:~$ rocker --nvidia --x11 --user --volume $HOME/autoware --volume $HOME/autoware_map --volume $HOME/ros2_ws -- autoware/testimage:version3


bash-5.1$ 
bash-5.1$ pwd
/home/zrahman
bash-5.1$ ls
autoware  autoware_map	ros2_ws
bash-5.1$ 
bash-5.1$ 
bash-5.1$ ros2 run turtlesim turtlesim_node 
QStandardPaths: XDG_RUNTIME_DIR not set, defaulting to '/tmp/runtime-zrahman'
[ERROR] [1680282852.676622172] [rclcpp]: rcl context unexpectedly not shutdown during cleanup
terminate called after throwing an instance of 'rclcpp::exceptions::RCLError'
  what():  failed to configure logging: Failed to create log directory: /home/zrahman/.ros/log, at ./src/rcl_logging_spdlog.cpp:90
[ros2run]: Aborted
bash-5.1$ 

```"
Change the name of Detection Area,D_kwDOAnasMc4AS9Qt,2023-03-16T08:20:25Z,xmfcx,2,Answered,,,
Change the name of Detection Area,D_kwDOAnasMc4AS9Qt,2023-03-16T08:20:25Z,xmfcx,2,Answered,DC_kwDOAnasMc4AUVwF,isamu-takagi,"I think the word ""stop"" is too specific, as it may only decelerate when it detects an object. I can't think of a suitable name, but something like ""attention"", ""careful"", and ""affect"" are close to my understanding."
Change the name of Detection Area,D_kwDOAnasMc4AS9Qt,2023-03-16T08:20:25Z,xmfcx,2,Answered,DC_kwDOAnasMc4AUW1W,mehmetdogru,"@xmfcx I think it is a good idea to refactor this module's name. 

I personally think as well that the word ""stop"" shouldn't be included in the name. I would vote for:

- Attention Zone/Area
- Safety Control Zone/Area"
Change the name of Detection Area,D_kwDOAnasMc4AS9Qt,2023-03-16T08:20:25Z,xmfcx,2,Answered,DC_kwDOAnasMc4AUXyh,xmfcx,"I think Attention Zone is a good name.

It still doesn't make it clear that this is an annotated map feature. But I think it's the best option so far."
Change the name of Detection Area,D_kwDOAnasMc4AS9Qt,2023-03-16T08:20:25Z,xmfcx,2,Answered,DC_kwDOAnasMc4AUX55,kenji-miyake,"+1 for Attention Zone/Area! It sounds clear.
Also, it might be possible to add some words that means we can customize the zones by editing the vector map.
For example, Arbitrary Attention Zone, Customizable Attention Zone, or something like that."
Change the name of Detection Area,D_kwDOAnasMc4AS9Qt,2023-03-16T08:20:25Z,xmfcx,2,Answered,DC_kwDOAnasMc4AUYAx,takayuki5168,I agree with Attention Zone/Area too.
Change the name of Detection Area,D_kwDOAnasMc4AS9Qt,2023-03-16T08:20:25Z,xmfcx,2,Answered,DC_kwDOAnasMc4AVLdG,xmfcx,Let's use `Attention Area` name then! I will create an issue for this.
surround_obstacle_checker,D_kwDOAnasMc4AS9Uw,2023-03-16T09:40:32Z,Bistuwwh,1,Answered,,,
surround_obstacle_checker,D_kwDOAnasMc4AS9Uw,2023-03-16T09:40:32Z,Bistuwwh,1,Answered,DC_kwDOAnasMc4AUVtp,maxime-clem,"Can you please provide more details ? A video or screenshot would be helpful in better understand your issue.

The [`surround_obstacle_checker`](https://autowarefoundation.github.io/autoware.universe/main/planning/surround_obstacle_checker/) will prevent the vehicle from moving if an obstacle is detected very close to the vehicle.
For example in simulation: 
![image](https://user-images.githubusercontent.com/78338830/225580722-cc335889-ab70-4839-8749-48101b232525.png)

On a real vehicle, one possible issue could come from a noisy sensor that detects an obstacle point very close to the vehicle."
surround_obstacle_checker,D_kwDOAnasMc4AS9Uw,2023-03-16T09:40:32Z,Bistuwwh,1,Answered,DC_kwDOAnasMc4AUWbW,maxime-clem,"If your pointcloud is noisy, you can try to filter it with the [`voxel_grid_outlier_filter`](https://autowarefoundation.github.io/autoware.universe/main/sensing/pointcloud_preprocessor/docs/voxel-grid-outlier-filter/)"
Streeing Calibration for the vehicle,D_kwDOAnasMc4AS-N1,2023-03-17T08:53:52Z,Narendarselva,0,Unanswered,,,
Not able to get Dynamic Map loading to work in Autoware,D_kwDOAnasMc4AS-Wy,2023-03-17T11:52:46Z,mayacarla2070,4,Answered,,,
Not able to get Dynamic Map loading to work in Autoware,D_kwDOAnasMc4AS-Wy,2023-03-17T11:52:46Z,mayacarla2070,4,Answered,DC_kwDOAnasMc4AUY5M,kminoda,"That's an intended behavior. `ndt_scan_matcher` do use dynamic map loading feature, but RViz doesn't.

If you want to visualize the map loaded in `ndt_scan_matcher`, visualize `/localization/pose_estimator/debug/loaded_pointcloud_map`."
Not able to get Dynamic Map loading to work in Autoware,D_kwDOAnasMc4AS-Wy,2023-03-17T11:52:46Z,mayacarla2070,4,Answered,DC_kwDOAnasMc4AUY5o,mayacarla2070,@kminoda okay okay got it. How do I vizualize /localization/pose_estimator/debug/loaded_pointcloud_map ?
Not able to get Dynamic Map loading to work in Autoware,D_kwDOAnasMc4AS-Wy,2023-03-17T11:52:46Z,mayacarla2070,4,Answered,DC_kwDOAnasMc4AUcxA,sayondeep,"@kminoda 
![image](https://user-images.githubusercontent.com/29782956/226191280-6b65e15a-581b-4f84-ad26-0edab8ee7240.png)
I am not able to see pose_estimator under localization to create vizualization"
Not able to get Dynamic Map loading to work in Autoware,D_kwDOAnasMc4AS-Wy,2023-03-17T11:52:46Z,mayacarla2070,4,Answered,DC_kwDOAnasMc4AUcyB,mayacarla2070,"@kminoda @sayondeep 
![Screenshot 2023-03-19 222008](https://user-images.githubusercontent.com/126861209/226191890-dd196d7f-e088-4545-ad9b-4692ca3b5983.png)
I can find the required topic on using logging_simulation launch file but can not create a vehicle for simulation"
Not able to get Dynamic Map loading to work in Autoware,D_kwDOAnasMc4AS-Wy,2023-03-17T11:52:46Z,mayacarla2070,4,Answered,DC_kwDOAnasMc4AUddJ,kminoda,"@mayacarla2070 @sayondeep 
I briefly took a simple demo for visualizing the loaded map using a (split) sample map. Hope this helps :+1: 


[Screencast from 2023年03月20日 11時51分55秒.webm](https://user-images.githubusercontent.com/44218668/226235816-7b7abfec-92a1-4f00-8c81-d7825d54c2a3.webm)
"
Not able to get Dynamic Map loading to work in Autoware,D_kwDOAnasMc4AS-Wy,2023-03-17T11:52:46Z,mayacarla2070,4,Answered,DC_kwDOAnasMc4AbWZQ,mayacarla2070,"@kminoda Hi,
Could you please help me with the contents of the XML file you are using to get that above dynamic map loading? I am running ros2 commands directly hence I need the contents of the XML file.
Thank you!"
Not able to get Dynamic Map loading to work in Autoware,D_kwDOAnasMc4AS-Wy,2023-03-17T11:52:46Z,mayacarla2070,4,Answered,DC_kwDOAnasMc4AbWZh,kminoda,"@mayacarla2070 Sorry, I didn't get what you meant by XML. 
Please refer to the readme of map loader: https://github.com/autowarefoundation/autoware.universe/tree/main/map/map_loader. You may use https://github.com/MapIV/pointcloud_divider for dividing the map, since it will also generate the metadata YAML file as well. Also, as stated in readme, you may also use one single map instead of divided map if it's small enough (If the single pointcloud map is larger than approximately 2GB, depending on the DDS settings, you would need to use the divided map)"
Not able to get Dynamic Map loading to work in Autoware,D_kwDOAnasMc4AS-Wy,2023-03-17T11:52:46Z,mayacarla2070,4,Answered,DC_kwDOAnasMc4AbWzQ,mayacarla2070,"Hi @kminoda,
I am sorry for the confusion. I mean the XML file that is used while launching Autoware.
For example: ros2 launch autoware_launch **logging_simulator.launch.xml** map_path:=$HOME/autoware_map/split_new/ vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit

I have the file: **logging_simulator.launch.xml**. But, I am not able to do localization with this. When I use **planning_simulator.launch.xml**  I am able to do localization, but I am not able to visualize this topic for dynamic map loading as pointed by you in above: /localization/pose_estimator/debug/loaded_pointcloud_map
 
I wanted an XML file which would allow me to do both. Thank you!"
Not able to get Dynamic Map loading to work in Autoware,D_kwDOAnasMc4AS-Wy,2023-03-17T11:52:46Z,mayacarla2070,4,Answered,DC_kwDOAnasMc4AbWz9,kminoda,"Make sense! 
Launch file itself is fine and the Autoware should work without editing those files, but you may need to change the launch arguments e.g. `map_path` or `pointcloud_map_file` depending on your map structure.
Again, please read the readme of map_loader carefully and follow the instruction. Let me know if the problem persists."
Not able to get Dynamic Map loading to work in Autoware,D_kwDOAnasMc4AS-Wy,2023-03-17T11:52:46Z,mayacarla2070,4,Answered,DC_kwDOAnasMc4AbW7e,mayacarla2070,"Hi @kminoda 
This is my directory structure and the contents of the metadata file in the map path directory:

![image](https://github.com/autowarefoundation/autoware/assets/126861209/8c964e0e-46f3-4104-b9eb-c52229ffc3eb)
![image](https://github.com/autowarefoundation/autoware/assets/126861209/9e0a360a-933b-4a84-877d-5dcc3a591e78)
![image](https://github.com/autowarefoundation/autoware/assets/126861209/0df473fe-6571-4d7c-b70e-417351edbcec)
![image](https://github.com/autowarefoundation/autoware/assets/126861209/cee6fe64-85da-49ef-971e-9099711f249c)


After this, I run this command: **ros2 launch autoware_launch planning_simulator.launch.xml map_path:=$HOME/autoware_map/split_new/ vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit** and do not see the topic you mentioned in the drop down. I can see it in when I launch it with **logging_simultor.launch.yaml**

[Screencast from 03-10-23 11:09:06 AM IST.webm](https://github.com/autowarefoundation/autoware/assets/126861209/8609dfe8-d7f6-4855-abf3-8f88ce05479d)

Also, I reverted all the changed I made to the above XML file as suggested by you."
Not able to get Dynamic Map loading to work in Autoware,D_kwDOAnasMc4AS-Wy,2023-03-17T11:52:46Z,mayacarla2070,4,Answered,DC_kwDOAnasMc4AbZjK,mayacarla2070,"@kminoda Hi,
Do you see any trivial issue here from my end?"
Not able to get Dynamic Map loading to work in Autoware,D_kwDOAnasMc4AS-Wy,2023-03-17T11:52:46Z,mayacarla2070,4,Answered,DC_kwDOAnasMc4Aban3,kminoda,"@mayacarla2070 Planning simulation does not use dynamic point cloud map loading.

"
Not able to get Dynamic Map loading to work in Autoware,D_kwDOAnasMc4AS-Wy,2023-03-17T11:52:46Z,mayacarla2070,4,Answered,DC_kwDOAnasMc4AbbNk,mayacarla2070,"@kminoda Hi,
I am using **logging_simulator.launch.xml**, but I cannot do localization with that. It throws this error(log snippet):
 
[log_snippet.txt](https://github.com/autowarefoundation/autoware/files/12805978/log_snippet.txt)

How do I get both localization and dynamic point cloud map loading? Please share your thoughts and insights. "
Not able to get Dynamic Map loading to work in Autoware,D_kwDOAnasMc4AS-Wy,2023-03-17T11:52:46Z,mayacarla2070,4,Answered,DC_kwDOAnasMc4AbcEz,kminoda,"Thanks for sharing the log. Would you share the log from the beginning? (it can be long)
What I would like to see is the output from ndt_scan_matcher and map_loader"
Not able to get Dynamic Map loading to work in Autoware,D_kwDOAnasMc4AS-Wy,2023-03-17T11:52:46Z,mayacarla2070,4,Answered,DC_kwDOAnasMc4AbfQg,mayacarla2070,"Hi @kminoda ,
Please find the complete log output when running this command(**ros2 launch autoware_launch logging_simulator.launch.xml map_path:=$HOME/autoware_map/split_new/ vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit**) and trying to do localization.

[output_oct6.log](https://github.com/autowarefoundation/autoware/files/12827480/output_oct6.log)

Thanks!"
Not able to get Dynamic Map loading to work in Autoware,D_kwDOAnasMc4AS-Wy,2023-03-17T11:52:46Z,mayacarla2070,4,Answered,DC_kwDOAnasMc4AbfXw,kminoda,"Thanks!
Let me check: Does the log include all the outputs of Autoware? It seems that the map_loader starts loading the map according to 
```
[component_container-24] [INFO] [1696570825.814278583] [map.pointcloud_map_loader]: Load /home/sayon/autoware_map/split_new//pointcloud_map.pcd/100_3600_73700.pcd (1 out of 16)
```

And also the metadata
```
[component_container-24] [INFO] [1696570825.933459486] [map.pointcloud_map_loader]: Loaded PCD metadata: /home/sayon/autoware_map/split_new//pointcloud_map_metadata.yaml
```

But seemingly there is not output from map_projection_loader, which is incorporated into Autoware just recently. 
Maybe it's better to share your map data and the Autoware version as well.

(BTW, please be aware that my help might not be quick, so I would recommend to investigate on your own as much as possible. Thank you for your understanding :bow: )"
IV2023 Autoware Tutorial Discussion,D_kwDOAnasMc4AS-o0,2023-03-17T17:35:43Z,QZJGeorge,1,Answered,,,
IV2023 Autoware Tutorial Discussion,D_kwDOAnasMc4AS-o0,2023-03-17T17:35:43Z,QZJGeorge,1,Answered,DC_kwDOAnasMc4AU-3u,sisaha9,@QZJGeorge Will there be recordings of the Tutorials mentioned in the tutorials page?
IV2023 Autoware Tutorial Discussion,D_kwDOAnasMc4AS-o0,2023-03-17T17:35:43Z,QZJGeorge,1,Answered,DC_kwDOAnasMc4AVCUh,QZJGeorge,"Yes the tutorials will be recorded when we present it on June 4-7 at IV2023 Anchorage, Alaska."
IV2023 Autoware Tutorial Discussion,D_kwDOAnasMc4AS-o0,2023-03-17T17:35:43Z,QZJGeorge,1,Answered,DC_kwDOAnasMc4AXfLF,sisaha9,@QZJGeorge Any updates on where we can see the recordings?
IV2023 Autoware Tutorial Discussion,D_kwDOAnasMc4AS-o0,2023-03-17T17:35:43Z,QZJGeorge,1,Answered,DC_kwDOAnasMc4AXiQ_,QZJGeorge,"We tried recordings but the live demo is noisy. Now we are back from the conference, will make new recordings in a quiet environment and publish that on the website in the next two weeks."
IV2023 Autoware Tutorial Discussion,D_kwDOAnasMc4AS-o0,2023-03-17T17:35:43Z,QZJGeorge,1,Answered,DC_kwDOAnasMc4AYHRW,sisaha9,@QZJGeorge Thanks for the update! I am particularly interested in Session's 3 and 4. Are there any links to their recordings now?
IV2023 Autoware Tutorial Discussion,D_kwDOAnasMc4AS-o0,2023-03-17T17:35:43Z,QZJGeorge,1,Answered,DC_kwDOAnasMc4AY7v7,lntsh854,"where we can see the recordings of the five parts?
Introduction: Autoware Software and Development
Session I: Autoware on Scaled Platforms
Session II: Autoware on Custom delivery vehicles
Session III: Autoware Development Environment
Session IV: Pointcloud and HD Maps generation for Autoware"
IV2023 Autoware Tutorial Discussion,D_kwDOAnasMc4AS-o0,2023-03-17T17:35:43Z,QZJGeorge,1,Answered,DC_kwDOAnasMc4AY8JY,sisaha9,Yup. Even the noisy demos would work
IV2023 Autoware Tutorial Discussion,D_kwDOAnasMc4AS-o0,2023-03-17T17:35:43Z,QZJGeorge,1,Answered,DC_kwDOAnasMc4AY-xC,J-xinyu,"I can't open the tutorial, can you provide a new link please @QZJGeorge "
How to manipulate AWSIM as a simulator / Set a destination of Autoware via command line,D_kwDOAnasMc4AS-9M,2023-03-18T07:50:56Z,Kim-mins,1,Answered,,,
How to manipulate AWSIM as a simulator / Set a destination of Autoware via command line,D_kwDOAnasMc4AS-9M,2023-03-18T07:50:56Z,Kim-mins,1,Answered,DC_kwDOAnasMc4AXOHr,evshary,"Although it's a little too late....
Maye you can refer to [the discussion](https://github.com/orgs/autowarefoundation/discussions/3545) for how to set destination via command line."
How to manipulate AWSIM as a simulator / Set a destination of Autoware via command line,D_kwDOAnasMc4AS-9M,2023-03-18T07:50:56Z,Kim-mins,1,Answered,DC_kwDOAnasMc4AXOli,Kim-mins,"Thanks a lot!
I'm not currently using Autoware universe so maybe I'll try it later... but thank you!
"
Possible ways to run simulation Autoware Universe on Carla with ROS2 humble,D_kwDOAnasMc4AS--U,2023-03-18T08:43:17Z,Kim-mins,1,Answered,,,
Possible ways to run simulation Autoware Universe on Carla with ROS2 humble,D_kwDOAnasMc4AS--U,2023-03-18T08:43:17Z,Kim-mins,1,Answered,DC_kwDOAnasMc4AXN_O,Autostone-c,"Hi, I have the same problem. Do you already have a solution？"
Possible ways to run simulation Autoware Universe on Carla with ROS2 humble,D_kwDOAnasMc4AS--U,2023-03-18T08:43:17Z,Kim-mins,1,Answered,DC_kwDOAnasMc4AXODS,Kim-mins,No I cannot run until now..
Possible ways to run simulation Autoware Universe on Carla with ROS2 humble,D_kwDOAnasMc4AS--U,2023-03-18T08:43:17Z,Kim-mins,1,Answered,DC_kwDOAnasMc4AXOI5,evshary,"I've developed a bridge for integrating Autoware and Carla with the help of Zenoh.
https://github.com/evshary/autoware_carla_launch/tree/humble
Although my original goal is to show multiple vehicles demo, it still can run a single vehicle...
I still run in Ubuntu 20.04, but use a container to run Autoware Universe in ROS 2 Humble."
Possible ways to run simulation Autoware Universe on Carla with ROS2 humble,D_kwDOAnasMc4AS--U,2023-03-18T08:43:17Z,Kim-mins,1,Answered,DC_kwDOAnasMc4AXOmE,Kim-mins,"> I've developed a bridge for integrating Autoware and Carla with the help of Zenoh. https://github.com/evshary/autoware_carla_launch/tree/humble Although my original goal is to show multiple vehicles demo, it still can run a single vehicle... I still run in Ubuntu 20.04, but use a container to run Autoware Universe in ROS 2 Humble.

This would help us to simulate Autoware universe on Carla!
Many thanks to your hard work! I'll try it soon!"
Possible ways to run simulation Autoware Universe on Carla with ROS2 humble,D_kwDOAnasMc4AS--U,2023-03-18T08:43:17Z,Kim-mins,1,Answered,DC_kwDOAnasMc4AXOz2,doganulus,">  I still run in Ubuntu 20.04, but use a container to run Autoware Universe in ROS 2 Humble.

@evshary I have a question: What would you suggest if we want to run the bridge inside a dedicated container that listens both Autoware and Carla containers? Is it a plausible thing to ask?"
Possible ways to run simulation Autoware Universe on Carla with ROS2 humble,D_kwDOAnasMc4AS--U,2023-03-18T08:43:17Z,Kim-mins,1,Answered,DC_kwDOAnasMc4AXQH7,evshary,"@doganulus  Actually, this is my topology right now, but my Carla is not running in the container due to some GPU issue.
```
Carla (native host) ----- bridge (container) ----- Autoware (container)
```
The reason why I use containers for Bridge and Autoware respectively is that I want to avoid some version issues.
That is, I want to keep track of [the latest version of Autoware](https://github.com/autowarefoundation/autoware/pkgs/container/autoware-universe/versions?filters%5Bversion_type%5D=tagged) but not affect the bridge working."
Unable to initialize localization module,D_kwDOAnasMc4ATAe3,2023-03-20T08:09:08Z,ajay1606,2,Answered,,,
Unable to initialize localization module,D_kwDOAnasMc4ATAe3,2023-03-20T08:09:08Z,ajay1606,2,Answered,DC_kwDOAnasMc4AUd5l,YamatoAndo,"From the warn/error messages, it seems that the ndt scan matcher node is not loading the point cloud map."
Unable to initialize localization module,D_kwDOAnasMc4ATAe3,2023-03-20T08:09:08Z,ajay1606,2,Answered,DC_kwDOAnasMc4AUd6O,kminoda,"@ajay1606 Thanks for the report! Could you share us the following?
- The exact command you used for launching simulator
- The map you use (is it a sample one from tutorial?)"
Unable to initialize localization module,D_kwDOAnasMc4ATAe3,2023-03-20T08:09:08Z,ajay1606,2,Answered,DC_kwDOAnasMc4AUd65,ajay1606,"@kminoda Thank you for response.

- The exact command you used for launching simulator
`ros2 launch autoware_launch logging_simulator.launch.xml map_path:=$HOME/autoware/map/myfolder vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit`

- The map you use (is it a sample one from tutorial?)
Tested with sample map, it works fine with sample bag without any issues. But with custom map, error reported"
Unable to initialize localization module,D_kwDOAnasMc4ATAe3,2023-03-20T08:09:08Z,ajay1606,2,Answered,DC_kwDOAnasMc4AUePi,kminoda,"Weird🤔 
Could you show the output of both ndt_scan_matcher and pointcloud_map_loader in the terminal (e.g. by `ros2 launch ... | grep -e ndt_scan_matcher -e pointcloud_map_loader`)?

And I also would like to see ros2 node info of the above two nodes."
Unable to initialize localization module,D_kwDOAnasMc4ATAe3,2023-03-20T08:09:08Z,ajay1606,2,Answered,DC_kwDOAnasMc4AUfFF,ajay1606,"For the command: `ros2 launch ndt_scan_matcher ndt_scan_matcher.launch.xml | grep -e ndt_scan_matcher`

![Screenshot from 2023-03-20 23-20-16](https://user-images.githubusercontent.com/29722843/226369718-a962125f-0d6f-4fbf-a46f-4d0faf77f3a6.png)

For the command: `ros2 launch map_loader pointcloud_map_loader.launch.xml | grep -e pointcloud_map_loader`

![image](https://user-images.githubusercontent.com/29722843/226370049-68de26a9-9f09-4581-abec-58dd23deaac5.png)



"
Unable to initialize localization module,D_kwDOAnasMc4ATAe3,2023-03-20T08:09:08Z,ajay1606,2,Answered,DC_kwDOAnasMc4AUgwY,ajay1606,"@kminoda After few work around able to initiate initialize module without error. But there is another issue causing localization module still inactive.
I just down-sampled point cloud map size, initially it was around **230 MB** and it is reduced to **65 MB**. With down sampled point cloud map, i tried initializing localization module and looks like this.

![Screenshot from 2023-03-21 14-34-25](https://user-images.githubusercontent.com/29722843/226526447-aeb506be-8a6e-482d-b453-8013ed88a6cb.png)

Output of commands:

`ros2 topic echo /sensing/lidar/top/outlier_filtered/pointcloud` and `ros2 topic echo /sensing/lidar/top/outlier_filtered/pointcloud --field header` Shows data in the topic with frame id `base_link`. But still unable to activate localization module.

In the termnal it shows ROS info messages like below:

![Screenshot from 2023-03-21 14-34-51](https://user-images.githubusercontent.com/29722843/226526808-7f8d200d-5398-4318-95c6-a96adb19012e.png)

Certainly, am not connected GNSS module, hoping to execute NDT module normal functioning, and later i will enable GNSS module.

Would please help me !
"
Unable to initialize localization module,D_kwDOAnasMc4ATAe3,2023-03-20T08:09:08Z,ajay1606,2,Answered,DC_kwDOAnasMc4AUjUG,kminoda,"Hmm, weird that reducing the pointcloud map size somehow worked :thinking: . 230Mb should be small enough for Autoware.

The error message from RViz is not helpful for solving the problem. Could you do the same approach I've mentioned before? ( `ros2 launch ... | grep -e ndt_scan_matcher -e pointcloud_map_loader` )"
Unable to initialize localization module,D_kwDOAnasMc4ATAe3,2023-03-20T08:09:08Z,ajay1606,2,Answered,DC_kwDOAnasMc4AUd6i,ajay1606,"@YamatoAndo Thank for the quick response, but with ros2 topic echo /map/pointcloud_map am able to see the data.

Also RVIZ shows map data. 


![image](https://user-images.githubusercontent.com/29722843/226287585-fd99b1d1-32d9-4a52-8f09-8a9ecc2a5c7a.png)

Is there anything that need to check to make it sure point map loading properly. ? 

By the way, without any code modification, am able run example demonstration with autoware map and sample bag.

"
Unable to initialize localization module,D_kwDOAnasMc4ATAe3,2023-03-20T08:09:08Z,ajay1606,2,Answered,DC_kwDOAnasMc4AUjUB,kminoda,Please refer to here for how to visualize the pointcloud map loaded in `ndt_scan_matcher` https://github.com/orgs/autowarefoundation/discussions/3345#discussioncomment-5363529
Unable to initialize localization module,D_kwDOAnasMc4ATAe3,2023-03-20T08:09:08Z,ajay1606,2,Answered,DC_kwDOAnasMc4AUjbb,ajay1606,"@kminoda Thank you so much, its very much useful. And i have checked the map loaded in there or not in `ndt_scan_matcher`

![image](https://user-images.githubusercontent.com/29722843/226788929-c9a9ffcb-f4ac-4722-82bc-37845ef31b34.png)

But there was no map found, would you please suggest me any work around ?
I will also go through this, step by step and update you.
"
Unable to initialize localization module,D_kwDOAnasMc4ATAe3,2023-03-20T08:09:08Z,ajay1606,2,Answered,DC_kwDOAnasMc4AUjgo,kminoda,"You mean that `ndt_scan_matcher` does not exists? I guess this will also be solved if the issue mentioned in the another thread is also solved too.
"
Unable to initialize localization module,D_kwDOAnasMc4ATAe3,2023-03-20T08:09:08Z,ajay1606,2,Answered,DC_kwDOAnasMc4AUjvH,ajay1606,"@kminoda I have checked other thread and followed instructions to visualize `/localization/pose_estimator/debug/loaded_pointcloud_map` But strangely, I cant visualize data in **RVIZ** in `base_link` frame, but i can see data output at terminal by using `ros2 topic echo /localization/pose_estimator/debug/loaded_pointcloud_map` something like this. 

![Screenshot from 2023-03-22 15-34-10](https://user-images.githubusercontent.com/29722843/226821458-79e6e495-7330-485d-8b19-c8fbefa68da6.png)

Also, currently `ndt_scan_matcher` unable to output pose because of this variable `initial_pose_msg_ptr_array_.size() =0`

Lines of code at ([autoware.universe](https://github.com/autowarefoundation/autoware.universe)/[localization](https://github.com/autowarefoundation/autoware.universe/tree/main/localization)/[ndt_scan_matcher](https://github.com/autowarefoundation/autoware.universe/tree/main/localization/ndt_scan_matcher)/[src](https://github.com/autowarefoundation/autoware.universe/tree/main/localization/ndt_scan_matcher/src)/ndt_scan_matcher_core.cpp)

![image](https://user-images.githubusercontent.com/29722843/226822252-c2412d42-4015-40ee-ae14-daddb69bdf1a.png)

Though in RVIZ status indicator shows ""INITIALIZED"" but `initial_pose_msg_ptr_array_` remains at 0.

![Screenshot from 2023-03-22 15-41-26](https://user-images.githubusercontent.com/29722843/226823007-4bfc6ce3-4816-41ac-be76-096fa186ecb6.png)


Any thoughts on this please ?
"
Unable to initialize localization module,D_kwDOAnasMc4ATAe3,2023-03-20T08:09:08Z,ajay1606,2,Answered,DC_kwDOAnasMc4AUjvV,kminoda,"Can you check if `ekf_localizer` is launched properly? 
(e.g. by `ros2 node info /localization/pose_twist_fusion_filter/ekf_localizer`)"
Unable to initialize localization module,D_kwDOAnasMc4ATAe3,2023-03-20T08:09:08Z,ajay1606,2,Answered,DC_kwDOAnasMc4AUjvv,ajay1606,"
Here it shows `ros2 node info /localization/pose_twist_fusion_filter/ekf_localizer`
![image](https://user-images.githubusercontent.com/29722843/226823736-ac396c0c-830d-4ebf-9367-35e8f50e8173.png)
"
Unable to initialize localization module,D_kwDOAnasMc4ATAe3,2023-03-20T08:09:08Z,ajay1606,2,Answered,DC_kwDOAnasMc4AUjwK,kminoda,"Hmm, seems OK. How about ros2 node info of ndt_scan_matcher?

Why I ask this is because the above error indicates that ndt_scan_matcher cannot receive the pose information from ekf_localizer properly, which will be used as a initial pose when performing a pose optimization in ndt_omp."
Unable to initialize localization module,D_kwDOAnasMc4ATAe3,2023-03-20T08:09:08Z,ajay1606,2,Answered,DC_kwDOAnasMc4AUj04,ajay1606,"Here it shows like this for `ros2 node info /localization/pose_estimator/ndt_scan_matcher`
![image](https://user-images.githubusercontent.com/29722843/226830763-a003a8e3-a341-4e6f-8a46-8fa200bb2009.png)

By the way, currently there is no data input from this topic` /vehicle/status/velocity_status`, I mean, we have not yet included **IMU** data at the moment. Is it not relating with above issue ?"
Unable to initialize localization module,D_kwDOAnasMc4ATAe3,2023-03-20T08:09:08Z,ajay1606,2,Answered,DC_kwDOAnasMc4AUj56,kminoda,"Sorry, do you mean you only have IMU? Or only velocity?"
Unable to initialize localization module,D_kwDOAnasMc4ATAe3,2023-03-20T08:09:08Z,ajay1606,2,Answered,DC_kwDOAnasMc4AUj6P,ajay1606,"At this moment we have only **input velocity** (Vehicle Twist), there is no **imu/data**."
2023-03-21 ODD working group weekly meeting (134),D_kwDOAnasMc4ATAgp,2023-03-20T08:43:05Z,Igata-ctrl,0,Unanswered,,,
my autoware.universe is always planning can't work,D_kwDOAnasMc4ATBQW,2023-03-21T02:42:20Z,yaoweixiao-ux,0,Unanswered,,,
Sharing of localization verification results based on humble,D_kwDOAnasMc4ATBRN,2023-03-21T03:19:17Z,cyn-liu,0,Unanswered,,,
Loading georeferenced maps,D_kwDOAnasMc4ATBbK,2023-03-21T08:29:41Z,enesadastec,2,Answered,,,
Loading georeferenced maps,D_kwDOAnasMc4ATBbK,2023-03-21T08:29:41Z,enesadastec,2,Answered,DC_kwDOAnasMc4AUnB5,mitsudome-r,"If you are using default autoware.launch.xml, it should be launching map_tf_generator which publishes ""viewer"" tf frame at the centroid of the loaded map for visualization. By default, it is launching `VectorMapTFGeneratorNode` which uses lanelet2 map to generate the tf, but you can change it to `PcdMapTFGeneratorNode` if you want to generate the tf from point cloud map.
https://github.com/autowarefoundation/autoware.universe/blob/1469f52c1a738e6512437317e2588561bc024c60/launch/tier4_map_launch/launch/map.launch.py#L99

Then, you can specify ""viewer"" frame in RVIZ to visualize the map.
![image](https://user-images.githubusercontent.com/43976834/227153789-f30a26cd-3091-497b-9661-22fe7bee8db5.png)"
Loading georeferenced maps,D_kwDOAnasMc4ATBbK,2023-03-21T08:29:41Z,enesadastec,2,Answered,DC_kwDOAnasMc4AWWhn,enesadastec,"As i mentioned on the meeting, this method is not working for georeferenced maps which has coordinates like 4.000.000. Because ""map_tf_generator"" package is reading .pcd files as pcl::PointXYZ which is float and not supports bigger coordinates.
![image](https://github.com/autowarefoundation/autoware/assets/94836003/9cd2fe2d-febd-4324-8429-2b7df65ab7e0)

Here is coordinates of my georeferenced maps:
![image](https://github.com/autowarefoundation/autoware/assets/94836003/26c851a5-3f03-493e-9fee-05612abe5f2d)


Also we can not visualize georeferenced maps on RVIZ, because also RVIZ supports float points only
![image](https://github.com/autowarefoundation/autoware/assets/94836003/84909f04-e97f-4e76-8a78-dfff618f90ab)


**My suggested solution is that;**
We should add an option to map_loader/pointcloud_map_loader to get origin of the map points and substract them from other coordinates to convert georeferenced maps to local maps before visualizing them. 
https://github.com/autowarefoundation/autoware.universe/blob/1469f52c1a738e6512437317e2588561bc024c60/map/map_loader/config/lanelet2_map_loader.param.yaml#L1

While doing that, we might need to define our own custom pcl point type which has double type to read bigger coordinates like here;
![image](https://github.com/autowarefoundation/autoware/assets/94836003/493c8e9b-cfce-4658-a1b7-cc7ec671fb2c)
"
Loading georeferenced maps,D_kwDOAnasMc4ATBbK,2023-03-21T08:29:41Z,enesadastec,2,Answered,DC_kwDOAnasMc4AWY33,mitsudome-r,"@enesadastec 
Do you think it makes sense to convert the coordinates beforehand rather than subtracting at load time?
In order do match with Lanelet2 map coordinates, the user should be aware of what coordinates they should be using for the origin anyways.

I think defining a custom PCL point type is a good idea, but we would also have to create our own implementations for some of PCL library functions in that case since some only supports float point types.
"
Loading georeferenced maps,D_kwDOAnasMc4ATBbK,2023-03-21T08:29:41Z,enesadastec,2,Answered,DC_kwDOAnasMc4AW11O,enesadastec,"I think every way that converts georeferenced coordinates to local coordinates are makes sense. We can think about how we can convert to local coordinates beforehand rather than load time. Im not sure it will match with lanelet2 coordinates if we convert to local coordinates.

Rather than editing all PCL implementations, maybe we can create a node that converts georeferenced map to local coordinates and publishes. With this way, without editing the other nodes we can use local map on another nodes as usual.

"
Loading georeferenced maps,D_kwDOAnasMc4ATBbK,2023-03-21T08:29:41Z,enesadastec,2,Answered,DC_kwDOAnasMc4AU2A-,meliketanrikulu,"> Rather than doing this steps manually, is it possible to add this feature to map_loader?

What is your projection type here. Are you using UTM or MGRS. We are using MGRS. Its includes global coordinates and there is no problem there. "
Loading georeferenced maps,D_kwDOAnasMc4ATBbK,2023-03-21T08:29:41Z,enesadastec,2,Answered,DC_kwDOAnasMc4AVRzY,enesadastec,"> > Rather than doing this steps manually, is it possible to add this feature to map_loader?
> 
> What is your projection type here. Are you using UTM or MGRS. We are using MGRS. Its includes global coordinates and there is no problem there.

I was trying to load UTM coordinates to RVIZ. Because of the data structure (float32) of the RVIZ, some UTM maps can not visualized on RVIZ and CloudCompare's global shifting feature is solution for that problem."
Loading georeferenced maps,D_kwDOAnasMc4ATBbK,2023-03-21T08:29:41Z,enesadastec,2,Answered,DC_kwDOAnasMc4AXQNt,kminoda,"This may be an overlapping question, but why not using MGRS? As long as [the operating area is within MGRS](https://mgrs-mapper.com/app) (10km x 10km at maximum), it should work fine without changing the map loader. Most of the map in TIER IV is indeed handled in MGRS grid coordinate, and it is working fine. 

Is it because you don't want to subtract the coordinate beforehand?"
Unable to launch perception module,D_kwDOAnasMc4ATBgK,2023-03-21T10:21:38Z,beginningfan,2,Answered,,,
Unable to launch perception module,D_kwDOAnasMc4ATBgK,2023-03-21T10:21:38Z,beginningfan,2,Answered,DC_kwDOAnasMc4AUpmf,lhakim85,"@beginningfan, much more easier to launch perception module, and you need to include this in your perception script if run standalone
`  <include file=""$(find-pkg-share global_parameter_loader)/launch/global_params.launch.py"">
    <arg name=""use_sim_time"" value=""false""/>
    <arg name=""vehicle_model"" value=""sample_vehicle""/>
  </include>  `
"
Unable to launch perception module,D_kwDOAnasMc4ATBgK,2023-03-21T10:21:38Z,beginningfan,2,Answered,DC_kwDOAnasMc4AUqP6,beginningfan,"In which file should I add these codes, ""tier4_perception_component.launch.xml""? I tried adding in that file. It still takes a very long command to start, but it's much better than before."
Unable to launch perception module,D_kwDOAnasMc4ATBgK,2023-03-21T10:21:38Z,beginningfan,2,Answered,DC_kwDOAnasMc4AUvJg,lhakim85,"@beginningfan, you also can edit code in the **module to be launched section** if  want to launch specific module
https://github.com/autowarefoundation/autoware_launch/blob/a8f47625d6267c557ab53c41029ba4c16e9357bd/autoware_launch/launch/autoware.launch.xml#L11
then launch full autoware command like example given"
Unable to launch perception module,D_kwDOAnasMc4ATBgK,2023-03-21T10:21:38Z,beginningfan,2,Answered,DC_kwDOAnasMc4AUx7K,beginningfan,"I saw this method in #3178, but it's not very well to launch some smaller nodes like ground_segmentation"
Unable to launch perception module,D_kwDOAnasMc4ATBgK,2023-03-21T10:21:38Z,beginningfan,2,Answered,DC_kwDOAnasMc4AUx9p,lhakim85,"this one maybe related to u [#1384](https://github.com/autowarefoundation/autoware.universe/issues/1384), but still u need to edit few line of code to make it work, there is no straigh way if want to run it standalone."
Unable to launch perception module,D_kwDOAnasMc4ATBgK,2023-03-21T10:21:38Z,beginningfan,2,Answered,DC_kwDOAnasMc4AUyBN,beginningfan,It seems there is no better solution
Deviation in trajectory wrt to lateral movement (steering angle and rate).,D_kwDOAnasMc4ATBxw,2023-03-21T14:44:06Z,Narendarselva,0,Unanswered,,,
Software WG Meeting 2023/03/28,D_kwDOAnasMc4ATB50,2023-03-21T16:39:12Z,BonoloAWF,0,Unanswered,,,
Open AD Kit WG Meetimg 23/3/22,D_kwDOAnasMc4ATCwr,2023-03-22T14:26:08Z,HamburgDave,0,Unanswered,,,
Yolo Node on Jetson Xavier NX Failed to Run,D_kwDOAnasMc4ATDMD,2023-03-23T01:02:41Z,QZJGeorge,0,Unanswered,,,
the acceleration of the target output detected and tracked by the perception module is all 0,D_kwDOAnasMc4ATDaf,2023-03-23T08:20:17Z,wangxianggang1997,1,Answered,,,
the acceleration of the target output detected and tracked by the perception module is all 0,D_kwDOAnasMc4ATDaf,2023-03-23T08:20:17Z,wangxianggang1997,1,Answered,DC_kwDOAnasMc4AUyS_,maxime-clem,"This is one of the [known limits](https://autowarefoundation.github.io/autoware.universe/main/perception/map_based_prediction/#assumptions-known-limits) of the `map_based_prediction`.
> In the prediction, the vehicle motion is assumed to be a constant velocity due to a lack of acceleration information.
"
can't initialize pose in rviz while running autoware.launch.xml,D_kwDOAnasMc4ATEDy,2023-03-23T19:48:19Z,Hensbag,2,Answered,,,
can't initialize pose in rviz while running autoware.launch.xml,D_kwDOAnasMc4ATEDy,2023-03-23T19:48:19Z,Hensbag,2,Answered,DC_kwDOAnasMc4AUpWY,damodarRohit,"I am also having a similar issue. I am trying to run autoware_launch with one VLP-16.

Terminal output

![image](https://user-images.githubusercontent.com/122939583/227390442-7a7a25f7-81a8-4697-be2f-8763931045d8.png)
"
can't initialize pose in rviz while running autoware.launch.xml,D_kwDOAnasMc4ATEDy,2023-03-23T19:48:19Z,Hensbag,2,Answered,DC_kwDOAnasMc4AUpeg,lhakim85,"I'm also facing similar issue. Cannot do 2D pose estimate in RVIZ.
autoware branch: df54cf6403ce0dad65db05ddb27819a6b7de888f
ROS2 humble

When echo /service_log, 
> yaml: ""status:\n  success: false\n  code: 1\n  message: \""The vehicle is not stopped.\""\n""

Already try to edit 
https://github.com/autowarefoundation/autoware.universe/blob/main/localization/pose_initializer/config/pose_initializer.param.yaml#L6
from true ->false, but same error

@HasanEnesBagci @damodarRohit can u show on your /service_log output 
"
can't initialize pose in rviz while running autoware.launch.xml,D_kwDOAnasMc4ATEDy,2023-03-23T19:48:19Z,Hensbag,2,Answered,DC_kwDOAnasMc4AUq1V,Hensbag,"I guess it's same problem



> node: /localization/util/default_ad_api/helpers/automatic_pose_initializer

> yaml: ""status:\n  success: false\n  code: 1\n  message: \""The vehicle is not stopped.\""\n""
"
can't initialize pose in rviz while running autoware.launch.xml,D_kwDOAnasMc4ATEDy,2023-03-23T19:48:19Z,Hensbag,2,Answered,DC_kwDOAnasMc4AUrU9,damodarRohit,"All the pose_intializer.param values are set to false in my case. You might want to look at this yaml file at : https://github.com/autowarefoundation/autoware_launch/blob/main/autoware_launch/config/localization/pose_initializer_common.param.yaml

My service_log is as follows :

-- Before setting initial pose:

![image](https://user-images.githubusercontent.com/122939583/227579655-79ff1aaa-7f6f-423a-aa53-7cfbc56b1890.png)

-- After setting initial pose using RViz :

![image](https://user-images.githubusercontent.com/122939583/227580167-e8d41092-41e0-4ba8-aeee-1db87744eecd.png)

![image](https://user-images.githubusercontent.com/122939583/227580717-57ba8596-e36b-4d3d-bb56-0f14eb154089.png)

-- While setting goal pose using RViz :

![image](https://user-images.githubusercontent.com/122939583/227580501-4b0b339f-a944-4f20-a107-f441f0986cbb.png)
"
can't initialize pose in rviz while running autoware.launch.xml,D_kwDOAnasMc4ATEDy,2023-03-23T19:48:19Z,Hensbag,2,Answered,DC_kwDOAnasMc4AUrj9,damodarRohit,@lhakim85 What is the output of your /vehicle/status/velocity_status. Is the vehicle moving while initialising pose?
can't initialize pose in rviz while running autoware.launch.xml,D_kwDOAnasMc4ATEDy,2023-03-23T19:48:19Z,Hensbag,2,Answered,DC_kwDOAnasMc4AUsrA,Hensbag,"well the output of the /vehicle/status/velocity_status is blank 
Also I should have tell you that I am using galactic branch"
can't initialize pose in rviz while running autoware.launch.xml,D_kwDOAnasMc4ATEDy,2023-03-23T19:48:19Z,Hensbag,2,Answered,DC_kwDOAnasMc4AUvIe,lhakim85,"manage to work it out, I'm add
`<param name=""ekf_enabled"" value=""true""/>
    <param name=""ndt_enabled"" value=""true""/>
    <param name=""stop_check_enabled"" value=""false""/>
    <param name=""stop_check_duration"" value=""3.0""/>
    <param name=""gnss_enabled"" value=""true""/>
    <param name=""gnss_pose_timeout"" value=""3.0""/>` 

to the below line of this code
https://github.com/autowarefoundation/autoware.universe/blob/b38eae6bb8ac56a3b00e0eb8b0c3ed354df6ea82/localization/pose_initializer/launch/pose_initializer.launch.xml#L7


"
can't initialize pose in rviz while running autoware.launch.xml,D_kwDOAnasMc4ATEDy,2023-03-23T19:48:19Z,Hensbag,2,Answered,DC_kwDOAnasMc4AUxdR,Hensbag,"Well, still no use . I guess I haven't done well the integration to vehicle ""https://autowarefoundation.github.io/autoware-documentation/main/how-to-guides/integrating-autoware-with-your-vehicle/"" .Do you know any other sources to integrate Car to Autoware universe, I think I don't have enough skills to integrate to the vehicle. I have a VLP-16, using galactic version of ros and I can't set initial pose on the map that is I created on autoware.launch.xml."
can't initialize pose in rviz while running autoware.launch.xml,D_kwDOAnasMc4ATEDy,2023-03-23T19:48:19Z,Hensbag,2,Answered,DC_kwDOAnasMc4AUx5o,lhakim85,"@HasanEnesBagci, galactic version already eol, better to move to humble

Base on your terminal output, no lidar input

![image](https://user-images.githubusercontent.com/10070989/228107076-c8b455ea-56f9-45c2-a828-063991944da3.png)
So need to check on the input feed from your lidar

> Do you know any other sources to integrate Car to Autoware universe

As for now, this discussion and autoware github are my main info
"
can't initialize pose in rviz while running autoware.launch.xml,D_kwDOAnasMc4ATEDy,2023-03-23T19:48:19Z,Hensbag,2,Answered,DC_kwDOAnasMc4AUz_K,damodarRohit,@HasanEnesBagci  The pacmod_interface and the sample_vehicle_interface packages might be good references for implementing your vehicle interface.
Launching/Running Multiple Rviz Instances,D_kwDOAnasMc4ATGKQ,2023-03-26T15:46:35Z,saicsk-deloitte,3,Answered,,,
Launching/Running Multiple Rviz Instances,D_kwDOAnasMc4ATGKQ,2023-03-26T15:46:35Z,saicsk-deloitte,3,Answered,DC_kwDOAnasMc4AUuyx,maxime-clem,">  My aim is to run two different scenarios (of two different towns of Carla) in Autoware.

I think your issue comes from running 2 instances of every component (Carla, bridge, Autoware, rviz). This requires very careful configurations to avoid one instance interfering with another (i.e., messages from scenario 1 being used by a component for scenario 2, and vice versa).
For Carla and the bridge, I am not sure if it is possible to achieve what you want and you should ask on the corresponding repositories.
For Autoware and Rviz, please check the following discussion: https://github.com/orgs/autowarefoundation/discussions/2925"
Launching/Running Multiple Rviz Instances,D_kwDOAnasMc4ATGKQ,2023-03-26T15:46:35Z,saicsk-deloitte,3,Answered,DC_kwDOAnasMc4AUvVp,saicsk-deloitte,Hello @maxime-clem . Thanks for your reply. Will check the link u have provided 
Launching/Running Multiple Rviz Instances,D_kwDOAnasMc4ATGKQ,2023-03-26T15:46:35Z,saicsk-deloitte,3,Answered,DC_kwDOAnasMc4AUvBZ,Robotics010,"Could you add a command with which you are launching multiple Rviz instances? Based on the previous discussions you are not just launching rviz, but the whole autoware stack with it (sensing, localization, perception and so on). If so, I don't think it is going to work just that.

Could you also describe why do you need to run two different scenarios simultaneously in the first place? Why can't you launch one, end it and then launch the second one?"
Launching/Running Multiple Rviz Instances,D_kwDOAnasMc4ATGKQ,2023-03-26T15:46:35Z,saicsk-deloitte,3,Answered,DC_kwDOAnasMc4AUvVe,saicsk-deloitte,"Thanks @Robotics010 for ur reply.

- Actually I'm using the following _command_ for running rviz:

_ros2 launch /home/ubuntu/Documents/carla_aw_repos/carla-autoware-universe/autoware.universe.openplanner/src/universe/external/open_planner/op_launch/autoware-carla.launch.xml map_path:=/home/ubuntu/Downloads/map/${map_name} vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit_

Coming to the next question ( why do you need to run two different scenarios simultaneously):

- In-order to run huge no. of scenarios, it consumes a lot of time, hence I'm aiming for parallel execution (where I can run 2 scenarios parallelly using some pytest-parallel plugin), for which i'm firstly checking by running 2 scenarios

"
Launching/Running Multiple Rviz Instances,D_kwDOAnasMc4ATGKQ,2023-03-26T15:46:35Z,saicsk-deloitte,3,Answered,DC_kwDOAnasMc4AUz4l,Robotics010,"It is a good solution option is to use docker containerization (as suggested by Maxime above). But do you really need whole CARLA for that? Are you testing/estimating just a Planning module response or Control module as well? If just Planning, then you don't really need CARLA and could use any light-weight simulator for planning purposes, such as Autoware's [planning_simulator](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/) for instance."
Launching/Running Multiple Rviz Instances,D_kwDOAnasMc4ATGKQ,2023-03-26T15:46:35Z,saicsk-deloitte,3,Answered,DC_kwDOAnasMc4AXlKv,saicsk-deloitte,Thanks @maxime-clem & @Robotics010 for suggesting Docker containerization (to achieve Parallel Execution). It worked fine for me.
Unable to maneuver vehicle through sharp curve based on Humble,D_kwDOAnasMc4ATGot,2023-03-27T03:32:58Z,JianKangEgon,1,Answered,,,
Unable to maneuver vehicle through sharp curve based on Humble,D_kwDOAnasMc4ATGot,2023-03-27T03:32:58Z,JianKangEgon,1,Answered,DC_kwDOAnasMc4AUvMN,takayuki5168,I will look into it.
Unable to maneuver vehicle through sharp curve based on Humble,D_kwDOAnasMc4ATGot,2023-03-27T03:32:58Z,JianKangEgon,1,Answered,DC_kwDOAnasMc4AUybn,takayuki5168,"@JianKangEgon 
Before I look into it, could you investigate which part in obstacle_avoidance_planner seems weird based on the following visualization?
https://autowarefoundation.github.io/autoware.universe/main/planning/obstacle_avoidance_planner/docs/debug/"
Unable to maneuver vehicle through sharp curve based on Humble,D_kwDOAnasMc4ATGot,2023-03-27T03:32:58Z,JianKangEgon,1,Answered,DC_kwDOAnasMc4AUydH,JianKangEgon,"@takayuki5168 
Thanks for the reply. I'll take it and have a try."
Unable to maneuver vehicle through sharp curve based on Humble,D_kwDOAnasMc4ATGot,2023-03-27T03:32:58Z,JianKangEgon,1,Answered,DC_kwDOAnasMc4AU1Vd,takayuki5168,"In my environment with the latest autoware.universe, it's working well.
![image](https://user-images.githubusercontent.com/20228327/228433332-f4f87350-fb86-4df0-b478-81bd06f33c83.png)
"
Unable to maneuver vehicle through sharp curve based on Humble,D_kwDOAnasMc4ATGot,2023-03-27T03:32:58Z,JianKangEgon,1,Answered,DC_kwDOAnasMc4AU1WN,takayuki5168,"It seems your version is 2 month ago.
I guess the problem was fixed with the latest version

https://github.com/autowarefoundation/autoware/pkgs/container/autoware-universe/versions?filters%5Bversion_type%5D=tagged&page=2
![image](https://user-images.githubusercontent.com/20228327/228434242-ffffa7be-1e3a-45f4-af0a-bc5b21baf1a0.png)
"
Unable to maneuver vehicle through sharp curve based on Humble,D_kwDOAnasMc4ATGot,2023-03-27T03:32:58Z,JianKangEgon,1,Answered,DC_kwDOAnasMc4AU1kE,JianKangEgon,"@takayuki5168 
very helpful, thanks very much! "
Unable to maneuver vehicle through sharp curve based on Humble,D_kwDOAnasMc4ATGot,2023-03-27T03:32:58Z,JianKangEgon,1,Answered,DC_kwDOAnasMc4AVB2D,takayuki5168,Please make this discussion answered if the problem was resolved.
Unable to maneuver vehicle through sharp curve based on Humble,D_kwDOAnasMc4ATGot,2023-03-27T03:32:58Z,JianKangEgon,1,Answered,DC_kwDOAnasMc4AVDaX,JianKangEgon,"OK, this topic is still ongoing, will perform road test afterwards. I'll close this discussion when everything done. "
Unable to maneuver vehicle through sharp curve based on Humble,D_kwDOAnasMc4ATGot,2023-03-27T03:32:58Z,JianKangEgon,1,Answered,DC_kwDOAnasMc4AVK6D,JianKangEgon,"@takayuki5168 , hi, I've tried the docker tag ""[humble-latest-prebuilt-amd64](https://github.com/orgs/autowarefoundation/packages/container/autoware-universe/82122238?tag=humble-latest-prebuilt-amd64)"", but is still not good as expected. Does this have something to do with trajectory planning? Have you ever changed some params in planning module? much appreciate it if any idea."
Unable to maneuver vehicle through sharp curve based on Humble,D_kwDOAnasMc4ATGot,2023-03-27T03:32:58Z,JianKangEgon,1,Answered,DC_kwDOAnasMc4AVMOq,takayuki5168,"> Does this have something to do with trajectory planning?

Yes, it's related to obstacle_avoidance_planner.

> Have you ever changed some params in planning module?

Since I reported that it worked well, I didn't change. I don't have any idea for now.
"
2023-03-28 ODD working group weekly meeting (135),D_kwDOAnasMc4ATGsB,2023-03-27T05:38:31Z,Igata-ctrl,0,Unanswered,,,
DevOps Dojo: ROS Node Configuration - Final3 Proposal,D_kwDOAnasMc4ATHaa,2023-03-27T23:56:38Z,kaspermeck-arm,4,Answered,,,
DevOps Dojo: ROS Node Configuration - Final3 Proposal,D_kwDOAnasMc4ATHaa,2023-03-27T23:56:38Z,kaspermeck-arm,4,Answered,DC_kwDOAnasMc4AUx0M,VRichardJP,"- Just to be pedantic, I think the [`PARAMETER_BYTE_ARRAY` should use `uint8_t`](https://docs.ros2.org/dashing/api/rclcpp/classrclcpp_1_1Parameter.html#a7562c9abba4c99c2e1e570ac68d11f12), not `unsigned char`. 

> generate the .param.yaml file during build

Does it mean the param.yaml files will be removed from individual packages?

> the generated .param.yaml file will be copied to the [Autoware Launch](https://github.com/autowarefoundation/autoware_launch) repository

I thought `autoware_launch` is supposed to override the parameters. What is the purpose of the copy? validate the params in `autoware_launch`?"
DevOps Dojo: ROS Node Configuration - Final3 Proposal,D_kwDOAnasMc4ATHaa,2023-03-27T23:56:38Z,kaspermeck-arm,4,Answered,DC_kwDOAnasMc4AUx1S,kaspermeck-arm,"@VRichardJP, thanks for your comment!

> * Just to be pedantic, I think the [`PARAMETER_BYTE_ARRAY` should use `uint8_t`](https://docs.ros2.org/dashing/api/rclcpp/classrclcpp_1_1Parameter.html#a7562c9abba4c99c2e1e570ac68d11f12), not `unsigned char`.
> 

Nice catch, I'll update accordingly!

> 
> > generate the .param.yaml file during build
> 
> Does it mean the param.yaml files will be removed from individual packages?
> 

Yes. However, I don't love the idea of not having the `param.yaml` file in the package and this idea might be legacy since we moved to using a schema. An alternative could be:
- create the `*.param.yaml` according to the schema's default parameter values
  - see my video clip how easy this is in VSC

This would work if we decide to have `default` as an attribute in the schema.

> > the generated .param.yaml file will be copied to the [Autoware Launch](https://github.com/autowarefoundation/autoware_launch) repository
> 
> I thought `autoware_launch` is supposed to override the parameters. What is the purpose of the copy? validate the params in `autoware_launch`?

This one I'm not sure about as I don't yet know the relationship between the Autoware.Universe and Autoware Launch repositories. If we just want validation (not runtime) and auto-complete the schema could be copied over or utilized in some way. Suggestions/ideas are very welcome!"
DevOps Dojo: ROS Node Configuration - Final3 Proposal,D_kwDOAnasMc4ATHaa,2023-03-27T23:56:38Z,kaspermeck-arm,4,Answered,DC_kwDOAnasMc4AUx4K,VRichardJP,"If the param files are removed from the packages, I am afraid it makes tinkering/tuning more difficult. 

At the moment, If I want to test and tune a package, I can modify the package params.yaml located in the `src/` directory. To be precise, the param file that matters when a package node is launched is the one in `install/` directory, but when `--symlink-install` is used to compile autoware (and this is the recommended way), the param file in `install/` points to the original one in `src/`. Whatever I do to the `install/` directory (clean, rebuild the package), any temporary change I have made to the params.yaml is kept (and tracked by git).
If the params file are only generated at build time, it has 2 consequences:
- If the param files are modified in `install/` dir, changes are not tracked and temporary tuning would be erased if the package/project is rebuilt.
- If the param files are modified from the schema side, it is necessary to recompile the package.

I also checked the video. Is there any way to add the schema rules automatically in the `.vscode` directory? or a magic one line rule that would on all packages at the same time?"
DevOps Dojo: ROS Node Configuration - Final3 Proposal,D_kwDOAnasMc4ATHaa,2023-03-27T23:56:38Z,kaspermeck-arm,4,Answered,DC_kwDOAnasMc4AUz12,kaspermeck-arm,"@VRichardJP, we definitely don't want to make it more difficult for the developer to tinker/tune. I'll add 
- `param.yaml` file discussion

to the agenda for Thursday's meeting.

> If the param files are removed from the packages, I am afraid it makes tinkering/tuning more difficult.
> 
> At the moment, If I want to test and tune a package, I can modify the package params.yaml located in the `src/` directory. To be precise, the param file that matters when a package node is launched is the one in `install/` directory, but when `--symlink-install` is used to compile autoware (and this is the recommended way), the param file in `install/` points to the original one in `src/`. Whatever I do to the `install/` directory (clean, rebuild the package), any temporary change I have made to the params.yaml is kept (and tracked by git). If the params file are only generated at build time, it has 2 consequences:
> 
>     * If the param files are modified in `install/` dir, changes are not tracked and temporary tuning would be erased if the package/project is rebuilt.
> 
>     * If the param files are modified from the schema side, it is necessary to recompile the package.

Does the `param.yaml` file have to live in `src/` for it to exist in `install/` after compilation?

> I also checked the video. Is there any way to add the schema rules automatically in the `.vscode` directory? or a magic one line rule that would on all packages at the same time?

I wanted to ensure that it was possible to use the tooling in an IDE and I assume that there is a smarter automated way to do this. The work related to this topic would be done in
- https://github.com/autowarefoundation/autoware.universe/issues/2653"
DevOps Dojo: ROS Node Configuration - Final3 Proposal,D_kwDOAnasMc4ATHaa,2023-03-27T23:56:38Z,kaspermeck-arm,4,Answered,DC_kwDOAnasMc4AU1Cb,VRichardJP,"> Does the param.yaml file have to live in src/ for it to exist in install/ after compilation?

It depends if Autoware is compiled with `--symlink-install` or not. For developers this is a very convenient option, as any change to the parameter or launch files in the package source code takes effect immediately (no need to rebuild anything).

Let's take `ekf_localizer` as example. The package contains `config/ekf_localizer.param.yaml` and `launch/ekf_localizer.launch.xml` [which are installed in the package `share` directory](https://github.com/autowarefoundation/autoware.universe/blob/main/localization/ekf_localizer/CMakeLists.txt#L79). As I use the symlink install option, this gives this on my machine:
```bash
$ ll install/ekf_localizer/share/ekf_localizer/config/
total 4.0K
lrwxrwxrwx 1 vrichard vrichard 108 Mar 27 18:09 ekf_localizer.param.yaml -> /home/sig/autoware/src/universe/autoware.universe/localization/ekf_localizer/config/ekf_localizer.param.yaml
$ ll install/ekf_localizer/share/ekf_localizer/launch
total 4.0K
lrwxrwxrwx 1 vrichard vrichard 108 Mar 27 18:09 ekf_localizer.launch.xml -> /home/sig/autoware/src/universe/autoware.universe/localization/ekf_localizer/launch/ekf_localizer.launch.xml
```
When I launch the `ekf_localizer` node (e.g. `ros2 launch ekf_localizer ekf_localizer.launch.xml`), ROS2 actually uses the launch and params files from the package source. If I didn't use symlink install options, the file would have been copied instead.

This ""trick"" is widely used in ROS2 projects, it is not just a thing of Autoware.

I don't see how we could keep this behavior if the yaml parameters are generated at build time from the schema. In other words, I think the yaml params should still exist in the package source code. To go even further, if we keep the yaml file instead of generating it with the schema, then I am not sure it makes sense to keep the ""default"" field in the schema (since the param file would be the ""default"")."
DevOps Dojo: ROS Node Configuration - Final3 Proposal,D_kwDOAnasMc4ATHaa,2023-03-27T23:56:38Z,kaspermeck-arm,4,Answered,DC_kwDOAnasMc4AU1DA,kaspermeck-arm,"@VRichardJP 

Thanks, that answers my question. I see you have the `*.param.yaml` file in the `config/` folder, so the path of the `*.param.yaml` file in the current proposal doesn't need to change. 

The purpose of having `default` attribute in the schema would be to provide the developer with a recommended/tested value. It is also useful as it auto-populates values for all the parameters which is quite convenient (as shown in the video with the parameter `range`)."
DevOps Dojo: ROS Node Configuration - Final3 Proposal,D_kwDOAnasMc4ATHaa,2023-03-27T23:56:38Z,kaspermeck-arm,4,Answered,DC_kwDOAnasMc4AU1E4,kaspermeck-arm,I removed the topic of _launch_ in the proposal as it is a discussion better had in _DevOps Dojo: ROS Launch Configuration_.
DevOps Dojo: ROS Node Configuration - Final3 Proposal,D_kwDOAnasMc4ATHaa,2023-03-27T23:56:38Z,kaspermeck-arm,4,Answered,DC_kwDOAnasMc4AU3-A,kaspermeck-arm,"To discuss in meeting March 30th.

I forgot to take Fatih's reason why not to define the node name in the files into account, see https://github.com/orgs/autowarefoundation/discussions/3325#discussioncomment-5406333. This is a good motivation why we would keep the `/**` and not replace it with, e.g., `lidar_apollo_segmentation_tvm_nodes`."
DevOps Dojo: ROS Node Configuration - Final3 Proposal,D_kwDOAnasMc4ATHaa,2023-03-27T23:56:38Z,kaspermeck-arm,4,Answered,DC_kwDOAnasMc4AU5cN,kaspermeck-arm,"### Notes from Open AD Kit meeting on March 30th

The AWF community has **one week to object** to the _Final3 Proposal_. If there are no objections, then the proposal is officially approved and execution phase can begin. This will be discussed in the March 6th meeting.

Tasks to be done in other _dojos_:
- _DevOps Dojo: CI_
  - `*.schema.json` validation which ensures that the JSON Schema format is valid
  - `*.param.yaml` validation using the format and requirements outlined in `*.schema.json`
- _DevOps Dojo: Developer_
  - add a `.vscode` folder with a `setting.json` file associating the with the `*.param.yaml` and `*.schema.json`"
DevOps Dojo: ROS Node Configuration - Final3 Proposal,D_kwDOAnasMc4ATHaa,2023-03-27T23:56:38Z,kaspermeck-arm,4,Answered,DC_kwDOAnasMc4AVJgY,kaspermeck-arm,"Additional tasks:
* Documentation
  * JSON Schema to md-table for documentation
  * Contributing guidelines
    * https://autowarefoundation.github.io/autoware-documentation/main/contributing/coding-guidelines/ros-nodes/parameters/"
DevOps Dojo: ROS Node Configuration - Final3 Proposal,D_kwDOAnasMc4ATHaa,2023-03-27T23:56:38Z,kaspermeck-arm,4,Answered,DC_kwDOAnasMc4AVJhN,kaspermeck-arm,Final3 Proposal has been approved (Open AD Kit meeting on April 6th)!
The planner cannot plan the correct path in some cases,D_kwDOAnasMc4ATHjQ,2023-03-28T04:48:25Z,shulanbushangshu,3,Answered,,,
The planner cannot plan the correct path in some cases,D_kwDOAnasMc4ATHjQ,2023-03-28T04:48:25Z,shulanbushangshu,3,Answered,DC_kwDOAnasMc4AU1by,mitsudome-r,@shulanbushangshu Are you testing in planning simulator? It would be nice if you can add reproducing steps for your issue.
The planner cannot plan the correct path in some cases,D_kwDOAnasMc4ATHjQ,2023-03-28T04:48:25Z,shulanbushangshu,3,Answered,DC_kwDOAnasMc4AVLAJ,shulanbushangshu,"Yes,I test in planning simulator by the test map.
Simulation steps:
(1)replace the map by the test map
(2)run the planning simulator
(3)set the start position in the  lane(id=1)
(3)set the target  position in the lane (id=30)
    You can set the target  position near the begin or end  of the lane(id=30) "
The planner cannot plan the correct path in some cases,D_kwDOAnasMc4ATHjQ,2023-03-28T04:48:25Z,shulanbushangshu,3,Answered,DC_kwDOAnasMc4AVlg7,shulanbushangshu,I test the newest code.It is fixed.
Output the fusion perception tracking target results within a given range,D_kwDOAnasMc4ATHkI,2023-03-28T05:22:07Z,wangxianggang1997,3,Answered,,,
Output the fusion perception tracking target results within a given range,D_kwDOAnasMc4ATHkI,2023-03-28T05:22:07Z,wangxianggang1997,3,Answered,DC_kwDOAnasMc4AUyM-,yukke42," @wangxianggang1997 
autoware have only one package to filter objects by range ([object_range_splitter](https://github.com/autowarefoundation/autoware.universe/tree/main/perception/object_range_splitter)), but this don't support to show only in front of the vehicle.

The point_cloud_range param in lidar_centerpoint shuld not be chnged, since this param depends on the inference model.

"
Output the fusion perception tracking target results within a given range,D_kwDOAnasMc4ATHkI,2023-03-28T05:22:07Z,wangxianggang1997,3,Answered,DC_kwDOAnasMc4AUyX8,beginningfan,"If you want to limit the output of the fusion module, you should add restrictions [here](https://github.com/autowarefoundation/autoware.universe/blob/1ef312bcac0f851e17530240cb597fec7e3409a4/perception/image_projection_based_fusion/launch/roi_cluster_fusion.launch.xml#L31). The parameters such as minx and maxx are the positions of each object under base_link. Let minx>0 to keep only the objects in front of the ego vehicle."
Output the fusion perception tracking target results within a given range,D_kwDOAnasMc4ATHkI,2023-03-28T05:22:07Z,wangxianggang1997,3,Answered,DC_kwDOAnasMc4AUyaY,beginningfan,"This method only limits the display of fusion, and the fusion process still involves all objects @wangxianggang1997 "
Output the fusion perception tracking target results within a given range,D_kwDOAnasMc4ATHkI,2023-03-28T05:22:07Z,wangxianggang1997,3,Answered,DC_kwDOAnasMc4AVlNE,liuXinGangChina,"@mitsudome-r ,Hi, mit-san.
I think solution has been provided by @beginningfan , so can we mark this as answered and close it?"
Sharing localization road test results based on humble,D_kwDOAnasMc4ATH-F,2023-03-28T12:32:54Z,cyn-liu,0,Unanswered,,,
2023-03-29 Simulation Working group Meeting,D_kwDOAnasMc4ATIEs,2023-03-28T14:32:54Z,WJaworskiRobotec,0,Unanswered,,,
What is the recommended pipeline to deploy autoware on a vehicle in an on road environment,D_kwDOAnasMc4ATISj,2023-03-28T19:32:18Z,sisaha9,1,Answered,,,
What is the recommended pipeline to deploy autoware on a vehicle in an on road environment,D_kwDOAnasMc4ATISj,2023-03-28T19:32:18Z,sisaha9,1,Answered,DC_kwDOAnasMc4AU7Qb,maxime-clem,"I think this is a fine plan but I you are missing a few things. I suggest checking the following pages:
- https://autowarefoundation.github.io/autoware-documentation/main/how-to-guides/integrating-autoware-with-your-vehicle/
- https://autowarefoundation.github.io/autoware-documentation/main/how-to-guides/calibrating-your-sensors/

> Develop a PCD map (not sure which Autoware package helps in this)

Check this page: https://autowarefoundation.github.io/autoware-documentation/main/how-to-guides/creating-maps-for-autoware/"
What is the recommended pipeline to deploy autoware on a vehicle in an on road environment,D_kwDOAnasMc4ATISj,2023-03-28T19:32:18Z,sisaha9,1,Answered,DC_kwDOAnasMc4AU7S_,sisaha9,Got it. Thanks!
Unable to view Velodyne points in RViz map,D_kwDOAnasMc4ATIXP,2023-03-28T21:38:29Z,damodarRohit,1,Answered,,,
Unable to view Velodyne points in RViz map,D_kwDOAnasMc4ATIXP,2023-03-28T21:38:29Z,damodarRohit,1,Answered,DC_kwDOAnasMc4AU1Vw,mitsudome-r,How are you publishing tf? Are you publishing base_link->velodyne_tf as static_tf?
Unable to view Velodyne points in RViz map,D_kwDOAnasMc4ATIXP,2023-03-28T21:38:29Z,damodarRohit,1,Answered,DC_kwDOAnasMc4AU2hi,damodarRohit,"The tf is being published by robot_state_publisher, as used in the sample_vehicle_interface. ANd yes, the base_link -> velodyne tf is published as static_tf.
I can see that after the initial pose is set in RViz GUI, the velodyne concatenated pointclouds topic doesnot publish any value at all."
Unable to view Velodyne points in RViz map,D_kwDOAnasMc4ATIXP,2023-03-28T21:38:29Z,damodarRohit,1,Answered,DC_kwDOAnasMc4AU3Bj,damodarRohit,"After pose initialisation, the container died with exit code 11. Sharing the launch log for reference.

![image](https://user-images.githubusercontent.com/122939583/228609614-418b609c-e068-4ac2-984d-5c83090c51f3.png)

[launch.log](https://github.com/autowarefoundation/autoware/files/11103248/launch.log)

One component dies and following is the output of ros2 component list before and after doing pose initialisation.

![image](https://user-images.githubusercontent.com/122939583/228649363-e86f77a9-16fc-4c11-af9c-d8d962a7c435.png)

"
Unable to view Velodyne points in RViz map,D_kwDOAnasMc4ATIXP,2023-03-28T21:38:29Z,damodarRohit,1,Answered,DC_kwDOAnasMc4AU3sV,damodarRohit,"I was able to trace the error to [distortion_corrector_node](https://github.com/autowarefoundation/autoware.universe/blob/main/sensing/pointcloud_preprocessor/src/distortion_corrector/distortion_corrector.cpp).

I am not using an IMU and the node takes in imu and vehicle_velocity data. I set the use_imu parameter to false and the fault was still present. 

The undistortPointCloud(...) function is causing the error. The fault is not raised if the function is commented out. Can someone help figure out what might be going wrong?

![image](https://user-images.githubusercontent.com/122939583/228680515-c6101c11-9240-4469-a04f-0cbe19e1752e.png)


"
Mapping WG Meeting 29/03/2023,D_kwDOAnasMc4ATIlu,2023-03-29T06:13:06Z,n-patiphon,0,Unanswered,,,
How to deploy my own training centerpoint model with autoware inference architecture,D_kwDOAnasMc4ATIo0,2023-03-29T07:13:28Z,ryanyej,1,Answered,,,
How to deploy my own training centerpoint model with autoware inference architecture,D_kwDOAnasMc4ATIo0,2023-03-29T07:13:28Z,ryanyej,1,Answered,DC_kwDOAnasMc4AU7Ru,maxime-clem,"Do you want to to replace the [lidar_centerpoint_tvm](https://autowarefoundation.github.io/autoware.universe/main/perception/lidar_centerpoint_tvm/) node ?
If so, you just need to write a new node (you can probably copy the node code from the `lidar_centerpoint_tvm`) which receives the pointcloud and outputs the detected objects."
Can anyone help me about integration to vehicle.,D_kwDOAnasMc4ATJYc,2023-03-29T16:53:06Z,Hensbag,3,Answered,,,
Can anyone help me about integration to vehicle.,D_kwDOAnasMc4ATJYc,2023-03-29T16:53:06Z,Hensbag,3,Answered,DC_kwDOAnasMc4AU3rw,damodarRohit,@Hensbag What vehicle are you using? Does it have any existing ROS based packages for control/ Drive by wire?
Can anyone help me about integration to vehicle.,D_kwDOAnasMc4ATJYc,2023-03-29T16:53:06Z,Hensbag,3,Answered,DC_kwDOAnasMc4AU3v7,Hensbag,"I use electrical vehicle which is have different motors for accel/brake/steering , I use microcontrollers to control them.
Also in brake system i use stepper motor."
Can anyone help me about integration to vehicle.,D_kwDOAnasMc4ATJYc,2023-03-29T16:53:06Z,Hensbag,3,Answered,DC_kwDOAnasMc4AU37J,evshary,"Have you tried the steps in [this documentation](https://autowarefoundation.github.io/autoware-documentation/main/how-to-guides/integrating-autoware-with-your-vehicle/)? Maybe you can follow these steps, and provide more detailed information if you met any problems."
Can anyone help me about integration to vehicle.,D_kwDOAnasMc4ATJYc,2023-03-29T16:53:06Z,Hensbag,3,Answered,DC_kwDOAnasMc4AU39F,kminoda,"Please follow the instructions in the link @evshary posted.
In addition, (although it depends on the exact problem you are facing, but) providing the below information may be a good starting point:
- The exact problem you are facing (whether its a certain build errors, runtime error, sensor issue, no idea how to install autoware, etc)
- Computer configuration (OS, RAM, CPU specs, GPU, etc)
- Sensor configuration (Anything other than VLP-16 LIDAR, e.g. IMU, wheel odometry, etc)
- Vehicle configuration (where the sensor is mounted, how large the vehicle is, etc. Maybe a single picture would help if you can share)
- Use cases you want to achieve"
Can anyone help me about integration to vehicle.,D_kwDOAnasMc4ATJYc,2023-03-29T16:53:06Z,Hensbag,3,Answered,DC_kwDOAnasMc4AU49A,Hensbag,"Hi @kminoda, firstly in rviz screen I would like to use currently ego vehicle because of my real vehcile has not URDF file yet so I used available   `sample_vehicle_launch` package but I have edited all parameters in `vehicle_info.param.yaml` to my vehicle dimensions then tested it by visualize `/planning/scenario_planning/lane_driving/motion_planning/obstacle_stop_planner/debug/marker` topic and I saw changing on marker because of changing in track_width.
In sample_sensor_kit_launch I have edited lidar.launch.xml in this file just top lidar exist I deleted all other (left, right) lidar configurations. And I have deleted  `/sensing/lidar/left/outlier_filtered/pointcloud ` and ` /sensing/lidar/right/outlier_filtered/pointcloud` in input topics prameters in `pointcloud_preprocessor.launch.py`

- I have just a vlp-16 lidar
- Using galactic branch of universe
Which step I failed? **The main idea is seeing my vehicle in rviz in map which I created then set goal pose and publish steering and velocity data to microcontroller to control my vehcile**

"
Running autoware rocker on gpu in Jetson Orin or arm64 devices in general,D_kwDOAnasMc4ATJYw,2023-03-29T17:00:15Z,sudhsrik,5,Answered,,,
Running autoware rocker on gpu in Jetson Orin or arm64 devices in general,D_kwDOAnasMc4ATJYw,2023-03-29T17:00:15Z,sudhsrik,5,Answered,DC_kwDOAnasMc4AU3Ml,amadeuszsz,"You just need to pull rocker repo and build. However, I couldn't run docker container with dev branch as well - rocker tool generates invalid command syntax for Jetson boards (at least in my case).  You can pull my [changes](https://github.com/osrf/rocker/pull/211)  and force rocker valid syntax:
* change `--nvidia` to `--nvidia runtime`
* add `--group-add video`
"
Running autoware rocker on gpu in Jetson Orin or arm64 devices in general,D_kwDOAnasMc4ATJYw,2023-03-29T17:00:15Z,sudhsrik,5,Answered,DC_kwDOAnasMc4AVB3A,sudhsrik,"I tried pulling your rocker changes and installing. The below command works now,

`rocker --nvidia runtime  --group-add video --x11 --user --volume $HOME/autoware --volume $HOME/autoware_map -- ghcr.io/autowarefoundation/autoware-universe:latest-cuda`

But I am facing a few other issues as mentioned below,

- I am not able to run device query to verify docker container communication with nvidia driver because the deviceQuery dir is not present (I am not seeing the samples directory either) in the cuda directories in the docker container. When I tried downloading deviceQuery from the git repo, I get errors when I run 'make'.
- I get errors when I try to launch autoware nodes that use the gpu such as 'lidar_centerpoint' 

I have verified that the nvidia drivers are installed correctly in the Jetson by running deviceQuery (directly on Jetson, not through docker). 
Please let me know how I can resolve these issues and make the docker container communicate with the GPU drivers."
Running autoware rocker on gpu in Jetson Orin or arm64 devices in general,D_kwDOAnasMc4ATJYw,2023-03-29T17:00:15Z,sudhsrik,5,Answered,DC_kwDOAnasMc4AVGrg,amadeuszsz,`deviceQuery` script is just for validating GPU. You can copy it directly to your autoware dir and run it inside docker.
Running autoware rocker on gpu in Jetson Orin or arm64 devices in general,D_kwDOAnasMc4ATJYw,2023-03-29T17:00:15Z,sudhsrik,5,Answered,DC_kwDOAnasMc4AVHdh,sudhsrik,"deviceQuery works now and shows result as pass on docker, but I am seeing errors when I run autoware nodes that require GPU such as lidar_centerpoint. The error message is posted below,

`root@33d0fea68744:/autoware# ros2 launch lidar_centerpoint single_inference_lidar_centerpoint.launch.xml pcd_pa
th:=/home/danlaw/autoware_map/sample-map-planning/pointcloud_map.pcd detections_path:=test_detections.ply
[INFO] [launch]: All log files can be found below /root/.ros/log/2023-04-05-13-56-30-701459-33d0fea68744-59484
[INFO] [launch]: Default logging verbosity is set to INFO
[INFO] [single_inference_lidar_centerpoint_node-1]: process started with pid [59485]
[INFO] [lidar_centerpoint_visualizer.py-2]: process started with pid [59487]
[lidar_centerpoint_visualizer.py-2] /usr/bin/env: ‘python’: No such file or directory
[ERROR] [lidar_centerpoint_visualizer.py-2]: process has died [pid 59487, exit code 127, cmd '/autoware/install/lidar_centerpoint/lib/lidar_centerpoint/lidar_centerpoint_visualizer.py --ros-args -r __node:=lidar_centerpoint_visualizer --params-file /tmp/launch_params_86xk6_t3 --params-file /tmp/launch_params_amdqj2w0'].
[single_inference_lidar_centerpoint_node-1] terminate called after throwing an instance of 'thrust::system::detail::bad_alloc'
[single_inference_lidar_centerpoint_node-1]   what():  std::bad_alloc: cudaErrorUnsupportedPtxVersion: the provided PTX was compiled with an unsupported toolchain.
[ERROR] [single_inference_lidar_centerpoint_node-1]: process has died [pid 59485, exit code -6, cmd '/autoware/install/lidar_centerpoint/lib/lidar_centerpoint/single_inference_lidar_centerpoint_node --ros-args -r __node:=lidar_centerpoint --params-file /tmp/launch_params_xx5vk2_q --params-file /tmp/launch_params_i28web0t --params-file /tmp/launch_params_apxjxqtd --params-file /tmp/launch_params_utw30f4d --params-file /tmp/launch_params_dlk5g4pw --params-file /tmp/launch_params_ze6410l7 --params-file /tmp/launch_params_wlg6ppp6 --params-file /tmp/launch_params_jr05j5vv --params-file /tmp/launch_params_n624x18s --params-file /tmp/launch_params_ylne7j3d --params-file /autoware/install/lidar_centerpoint/share/lidar_centerpoint/config/centerpoint_tiny.param.yaml --params-file /autoware/install/lidar_centerpoint/share/lidar_centerpoint/config/detection_class_remapper.param.yaml --params-file /tmp/launch_params_89x3bxgh --params-file /tmp/launch_params_7jsyd42g'].`



"
Running autoware rocker on gpu in Jetson Orin or arm64 devices in general,D_kwDOAnasMc4ATJYw,2023-03-29T17:00:15Z,sudhsrik,5,Answered,DC_kwDOAnasMc4AVHx0,amadeuszsz,"I guess you need an [alias](https://stackoverflow.com/questions/35435517/creating-an-alias-for-python3). Regarding perception modules, you didn't mention if you are using Jetson Orin AGX or NX. NX for sure will struggle with neural networks due to not sufficient vram. You can monitor GPU usage while running Autoware. As i remember, `nvidia-smi` command won't work, try `sudo tegrastats` to see if there is vram available during Autoware stack execution."
Running autoware rocker on gpu in Jetson Orin or arm64 devices in general,D_kwDOAnasMc4ATJYw,2023-03-29T17:00:15Z,sudhsrik,5,Answered,DC_kwDOAnasMc4AVH2X,sudhsrik,"I am using Jetson Orin AGX to run Autoware. I tried running `sudo tegrastats` and the planning simulator mentioned in the Autoware tutorials. It doesn't look like Autoware is exhausting the VRAM. But still, since I am running only one single component [lidar_centerpoint], it shouldn't be possible to overload the VRAM, right?"
Running autoware rocker on gpu in Jetson Orin or arm64 devices in general,D_kwDOAnasMc4ATJYw,2023-03-29T17:00:15Z,sudhsrik,5,Answered,DC_kwDOAnasMc4AVIFw,amadeuszsz,"I just noticed PTX error. Even though you fixed alias error, `lidar_centerpoint` ONNX models will not work in its form with Jetson boards and there can be multiple reasons [[1]](https://docs.nvidia.com/deploy/cuda-compatibility/#application-considerations)[[2]](https://onnxruntime.ai/docs/execution-providers/TensorRT-ExecutionProvider.html)."
Running autoware rocker on gpu in Jetson Orin or arm64 devices in general,D_kwDOAnasMc4ATJYw,2023-03-29T17:00:15Z,sudhsrik,5,Answered,DC_kwDOAnasMc4AatBf,cycyc1949,"I tried to run it on orin, but it took a long time on the cpu"
Running autoware rocker on gpu in Jetson Orin or arm64 devices in general,D_kwDOAnasMc4ATJYw,2023-03-29T17:00:15Z,sudhsrik,5,Answered,DC_kwDOAnasMc4AZ97_,kaspermeck-arm,"# Run lidar centerpoint on Orin

I've been working to get the lidar centerpoint node to work on the Orin as well. Collaborating technically with @oguzkaganozt and @ahuazuipiaoliang. Find our discussion in the [IROS 2023 thread](https://discord.com/channels/953808765935816715/1139166899222093886) under the _#openad-kit_ Discord channel.

@sudhsrik @amadeuszsz - sharing my experience here below!

## Bring-up steps
1. Clean JetPack 5.1.2 installation using SDK Manager
2. Installed all software (including dev tools) using SDK Manager
3. Update driver from `CUDA 11.4` to `CUDA 11.8`
4. Test `deviceQueryDrv`
5. Test `deviceQueryDrv` inside container
6. Test `deviceQueryDrv` inside Autoware container 
7. Run lidar centerpoint inside Autoware container 

Step 7 **does not** work.

## Logs

### CUDA 11.8 driver
```
ubuntu@orin:~/cuda-samples/Samples/1_Utilities/deviceQueryDrv$ LD_LIBRARY_PATH=/usr/local/cuda-11.8/compat:$LD_LIBRARY_PATH ./deviceQueryDrv
```
Note: `LD_LIBRARY_PATH` needs to point to `CUDA 11.8` compat

### CUDA 11.8 driver inside container

```
ubuntu@orin:~/cuda-samples/Samples/1_Utilities/deviceQueryDrv$ docker run -it --rm --runtime nvidia --gpus all -v $(pwd):$(pwd) -w $(pwd) -v /usr/local/cuda-11.8:/usr/local/cuda-11.8 -e LD_LIBRARY_PATH=/usr/local/cuda-11.8/compat:$LD_LIBRARY_PATH ubuntu:20.04 /bin/bash
root@cda1b8869f72:/home/ubuntu/cuda-samples/Samples/1_Utilities/deviceQueryDrv# ./deviceQueryDrv 
./deviceQueryDrv Starting...

CUDA Device Query (Driver API) statically linked version 
Detected 1 CUDA Capable device(s)

Device 0: ""Orin""
  CUDA Driver Version:                           11.8
...
```

Note: set `-e` as explained above, share `/usr/local/cuda-11.8`, set `--runtime nvidia` and `--gpus all`

### Lidar centerpoint inside Autoware container
**RUN AUTOWARE CONTAINER**
```
ubuntu@orin:~$ docker run -it --rm --runtime nvidia --gpus all -v /usr/local/cuda-11.8:/usr/local/cuda-11.8 -e LD_LIBRARY_PATH=/usr/local/cuda-11.8/compat:$LD_LIBRARY_PATH ghcr.io/autowarefoundation/autoware-universe:humble-latest-prebuilt-cuda-arm64 /bin/bash
```

**(INSIDE CONTAINER) RUN LIDAR CENTERPOINT**
```
root@8686fb329f7e:/autoware# ros2 launch lidar_centerpoint lidar_centerpoint.launch.xml
[INFO] [launch]: All log files can be found below /root/.ros/log/2023-08-23-14-45-12-092084-8686fb329f7e-77
[INFO] [launch]: Default logging verbosity is set to INFO
[INFO] [lidar_centerpoint_node-1]: process started with pid [78]
[lidar_centerpoint_node-1] [I] [TRT] [MemUsageChange] Init CUDA: CPU +221, GPU +0, now: CPU 239, GPU 4351 (MiB)
[lidar_centerpoint_node-1] [I] [TRT] [MemUsageChange] Init CUDA: CPU +0, GPU +0, now: CPU 258, GPU 4351 (MiB)
[lidar_centerpoint_node-1] [I] [TRT] [MemUsageChange] Init builder kernel library: CPU +357, GPU +135, now: CPU 615, GPU 4487 (MiB)
[lidar_centerpoint_node-1] [INFO] [1692802653.034101415] [lidar_centerpoint]: Using TensorRT FP16 Inference
[lidar_centerpoint_node-1] [I] [TRT] ----------------------------------------------------------------
[lidar_centerpoint_node-1] [I] [TRT] Input filename:   /autoware/install/lidar_centerpoint/share/lidar_centerpoint/data/pts_voxel_encoder_centerpoint_tiny.onnx
[lidar_centerpoint_node-1] [I] [TRT] ONNX IR version:  0.0.6
[lidar_centerpoint_node-1] [I] [TRT] Opset version:    11
[lidar_centerpoint_node-1] [I] [TRT] Producer name:    pytorch
[lidar_centerpoint_node-1] [I] [TRT] Producer version: 1.9
[lidar_centerpoint_node-1] [I] [TRT] Domain:           
[lidar_centerpoint_node-1] [I] [TRT] Model version:    0
[lidar_centerpoint_node-1] [I] [TRT] Doc string:       
[lidar_centerpoint_node-1] [I] [TRT] ----------------------------------------------------------------
[lidar_centerpoint_node-1] [W] [TRT] onnx2trt_utils.cpp:369: Your ONNX model has been generated with INT64 weights, while TensorRT does not natively support INT64. Attempting to cast down to INT32.
[lidar_centerpoint_node-1] [INFO] [1692802653.051628950] [lidar_centerpoint]: Applying optimizations and building TRT CUDA engine (/autoware/install/lidar_centerpoint/share/lidar_centerpoint/data/pts_voxel_encoder_centerpoint_tiny.onnx) ...
[lidar_centerpoint_node-1] [I] [TRT] [MemUsageChange] Init cuBLAS/cuBLASLt: CPU +212, GPU +715, now: CPU 827, GPU 5202 (MiB)
[lidar_centerpoint_node-1] [I] [TRT] [MemUsageChange] Init cuDNN: CPU +95, GPU +482, now: CPU 922, GPU 5684 (MiB)
[lidar_centerpoint_node-1] [I] [TRT] Local timing cache in use. Profiling results in this builder pass will not be stored.
[lidar_centerpoint_node-1] [E] [TRT] 1: [ltWrapper.cpp::plainGemm::505] Error Code 1: Cublas (CUBLAS_STATUS_EXECUTION_FAILED)
[lidar_centerpoint_node-1] [E] [TRT] 2: [builder.cpp::buildSerializedNetwork::636] Error Code 2: Internal Error (Assertion engine != nullptr failed. )
[lidar_centerpoint_node-1] [ERROR] [1692804430.047830235] [lidar_centerpoint]: Failed to create serialized network
[lidar_centerpoint_node-1] [ERROR] [1692804430.208273221] [lidar_centerpoint]: Failed to create context: Engine was not created
[ERROR] [lidar_centerpoint_node-1]: process has died [pid 78, exit code -11, cmd '/autoware/install/lidar_centerpoint/lib/lidar_centerpoint/lidar_centerpoint_node --ros-args -r __node:=lidar_centerpoint --params-file /tmp/launch_params_m45jkl4x --params-file /tmp/launch_params_tp6wo9sx --params-file /tmp/launch_params_70g9020r --params-file /tmp/launch_params_imesky53 --params-file /tmp/launch_params_36qrk24t --params-file /tmp/launch_params_ugmojf28 --params-file /tmp/launch_params_ls7ms3e7 --params-file /tmp/launch_params_e8tez3s7 --params-file /tmp/launch_params_bqep4lwr --params-file /tmp/launch_params_x8akwfk1 --params-file /autoware/install/lidar_centerpoint/share/lidar_centerpoint/config/centerpoint_tiny.param.
```

It took a really long time for this to start running before it failed. The lidar centerpoint node works on the AADP + NVIDIA GPU, so it is confirmed that it can work on Arm64, but I was using `CUDA 12.2` driver. This shouldn't matter as Autoware only requires `CUDA 11.6`, the driver is backwards compatible. I have not had time to debug the issue. Any ideas?"
Running autoware rocker on gpu in Jetson Orin or arm64 devices in general,D_kwDOAnasMc4ATJYw,2023-03-29T17:00:15Z,sudhsrik,5,Answered,DC_kwDOAnasMc4AZ_gb,chishengshih,"Hi, 

Here is the alternative to run centerpoint on Orin. The following steps execute ceterpoint_tvm, which uses CPU, and you should expect performance degradation. 

There have been discussions on deploying Autoware dockers on nVidia Orin. Rohit from DanLaw tried and succeeded. You may try the instructions provided by Rohit. 

1. Setup the base OS (Ubuntu 20 based Jetson Linux) - We are loading this on an SSD so that we can easily swap it out for demo / development versions without many issues.

2. Install dependencies required (docker and rocker installation) - [discussion thread](https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/docker-installation/)

3. Use the Autoware official docker file.
	i. While running the docker, we are still having issues with enabling the GPU.  The following command from Autoware is used.
	
		`rocker -e LIBGL_ALWAYS_SOFTWARE=1 --x11 --user --volume $HOME/autoware -- ghcr.io/autowarefoundation/autoware-universe:latest-cuda`
		
		
	ii. Once the docker file is setup, the source code needs to be modified for lidar_centerpoint_tvm needs to be enabled instead of lidar_centerpoint package since GPU is not enabled. The steps to do this can be found at this [discussion thread](https://github.com/orgs/autowarefoundation/discussions/3146#discussioncomment-4588470).

Daniel SHIH


"
Running autoware rocker on gpu in Jetson Orin or arm64 devices in general,D_kwDOAnasMc4ATJYw,2023-03-29T17:00:15Z,sudhsrik,5,Answered,DC_kwDOAnasMc4AZ_n9,MrOCW,"I am using the arm64 docker image to run everything except lidar_centerpoint, and created a separate JetPack image with the default CUDA11.4 for running the lidar_centerpoint. The topics in rqt seems to flow through correctly"
Running autoware rocker on gpu in Jetson Orin or arm64 devices in general,D_kwDOAnasMc4ATJYw,2023-03-29T17:00:15Z,sudhsrik,5,Answered,DC_kwDOAnasMc4AZ_zJ,kaspermeck-arm,"@MrOCW - thanks for this info!

* could you share your commands and the output log from when lidar centerpoint successfully runs on the Orin?
* do you have any idea what the errors we get mean?

Error (copied from above)
```
[lidar_centerpoint_node-1] [E] [TRT] 1: [ltWrapper.cpp::plainGemm::505] Error Code 1: Cublas (CUBLAS_STATUS_EXECUTION_FAILED)
[lidar_centerpoint_node-1] [E] [TRT] 2: [builder.cpp::buildSerializedNetwork::636] Error Code 2: Internal Error (Assertion engine != nullptr failed. )
[lidar_centerpoint_node-1] [ERROR] [1692804430.047830235] [lidar_centerpoint]: Failed to create serialized network
[lidar_centerpoint_node-1] [ERROR] [1692804430.208273221] [lidar_centerpoint]: Failed to create context: Engine was not created
[ERROR] [lidar_centerpoint_node-1]: process has died [pid 78, exit code -11, cmd '/autoware/install/lidar_centerpoint/lib/lidar_centerpoint/lidar_centerpoint_node --ros-args -r __node:=lidar_centerpoint --params-file /tmp/launch_params_m45jkl4x --params-file /tmp/launch_params_tp6wo9sx --params-file /tmp/launch_params_70g9020r --params-file /tmp/launch_params_imesky53 --params-file /tmp/launch_params_36qrk24t --params-file /tmp/launch_params_ugmojf28 --params-file /tmp/launch_params_ls7ms3e7 --params-file /tmp/launch_params_e8tez3s7 --params-file /tmp/launch_params_bqep4lwr --params-file /tmp/launch_params_x8akwfk1 --params-file /autoware/install/lidar_centerpoint/share/lidar_centerpoint/config/centerpoint_tiny.param.
```

Thanks in advance!"
Running autoware rocker on gpu in Jetson Orin or arm64 devices in general,D_kwDOAnasMc4ATJYw,2023-03-29T17:00:15Z,sudhsrik,5,Answered,DC_kwDOAnasMc4AaBTx,MrOCW,"From what I understand, those are TensorRT errors. You might want to look into running trtexec outside for better debugging options"
Running autoware rocker on gpu in Jetson Orin or arm64 devices in general,D_kwDOAnasMc4ATJYw,2023-03-29T17:00:15Z,sudhsrik,5,Answered,DC_kwDOAnasMc4AaBT7,MrOCW,"From all the attempts at getting Autoware's docker images to work with Orin, it seems likley that the CUDA that autoware provides in their image are not compatible with Jetson's embedded GPU"
Running autoware rocker on gpu in Jetson Orin or arm64 devices in general,D_kwDOAnasMc4ATJYw,2023-03-29T17:00:15Z,sudhsrik,5,Answered,DC_kwDOAnasMc4AaGnD,oguzkaganozt,"You're right maybe this can be the problem. Right now Autoware shipped with CUDA 11.6 by default and ORIN  only supports 11.4. And we are manually updating CUDA to 12.2 using `cuda-compat` libraries. I will try to build Autoware image with 12.2 CUDA try out on ORIN. 

Also as @kaspermeck-arm said It should not be about the arm64 architecture, the only thing remains NVIDIA driver differences, CUDA and TensorRT version differences."
Running autoware rocker on gpu in Jetson Orin or arm64 devices in general,D_kwDOAnasMc4ATJYw,2023-03-29T17:00:15Z,sudhsrik,5,Answered,DC_kwDOAnasMc4AatBc,JonasHablitzel,"Hello, 
i am currently running Autoware inside a docker where i build everything from a l4t base container. What i found in the Dockerfile sources for the ""normal"" Cuda and l4t containers was that the cuda repos differ. So i think the guess from @MrOCW  holds true for the different Cuda-driver. For reference:

[l4t-docker](https://gitlab.com/nvidia/container-images/l4t-base/-/tree/master?ref_type=heads)
[cuda-docker](https://gitlab.com/nvidia/container-images/cuda/-/blob/master/dist/11.4.3/ubuntu2004/base/Dockerfile?ref_type=heads)

```bash
# in l4t
RUN echo ""deb https://repo.download.nvidia.com/jetson/common $RELEASE main"" >> /etc/apt/sources.list

# in cuda
echo ""deb https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2004/${NVARCH} /"" > /etc/apt/sources.list.d/cuda.list 
```
so it could maybe be a solution to have the repo as variable in the cuda-ansible playbook and provide there the orin/l4t repo
[cuda-ansible-autoware](https://github.com/autowarefoundation/autoware/tree/main/ansible/roles/cuda)
"
Running autoware rocker on gpu in Jetson Orin or arm64 devices in general,D_kwDOAnasMc4ATJYw,2023-03-29T17:00:15Z,sudhsrik,5,Answered,DC_kwDOAnasMc4Aa2yG,kaspermeck-arm,@JonasHablitzel - are you able to run lidar centerpoint inside your l4t base container on Orin targeting the GPU? 
Running autoware rocker on gpu in Jetson Orin or arm64 devices in general,D_kwDOAnasMc4ATJYw,2023-03-29T17:00:15Z,sudhsrik,5,Answered,DC_kwDOAnasMc4Aa3pY,JonasHablitzel,"yes i am able to, what was a blocker that i needed to compile PCL by my own (Targeting 1.12.1). 

The Performace is not great. In max-settings i get around 4-5FPS. After profiling i found that the main problem is the pointsToVoxels, wich takes around 0,2s for me. The inference time  for the centerpoint-tiny NN is around 0.06s, including copy from and to the device. 

I'm currently loking into using the shared memory of the ORIN ```(cudaHostAlloc(cpuPtr, size, cudaHostAllocMapped))``` instead of copying to target, wich could improve the inference time but should have no impact on the pointsToVoxels."
Running autoware rocker on gpu in Jetson Orin or arm64 devices in general,D_kwDOAnasMc4ATJYw,2023-03-29T17:00:15Z,sudhsrik,5,Answered,DC_kwDOAnasMc4Aa4_E,kaspermeck-arm,"@JonasHablitzel 
From your analysis, can you tell if the `pointsToVoxel` function is issuing SIMD instructions? "
Running autoware rocker on gpu in Jetson Orin or arm64 devices in general,D_kwDOAnasMc4ATJYw,2023-03-29T17:00:15Z,sudhsrik,5,Answered,DC_kwDOAnasMc4AaIQo,Autostone-c,anybody has fix this ERROR to make lidar_centerpoint_node work on Orin?
Running autoware rocker on gpu in Jetson Orin or arm64 devices in general,D_kwDOAnasMc4ATJYw,2023-03-29T17:00:15Z,sudhsrik,5,Answered,DC_kwDOAnasMc4Aao1Q,kaspermeck-arm,"@Autostone-c - unfortunately not. The next release of JetPack with newer default CUDA driver will be necessary. Here's my attempt to summarize the issue
* https://discord.com/channels/953808765935816715/1139166899222093886/1151224135633092689"
Running autoware rocker on gpu in Jetson Orin or arm64 devices in general,D_kwDOAnasMc4ATJYw,2023-03-29T17:00:15Z,sudhsrik,5,Answered,DC_kwDOAnasMc4Aadzf,mitsudome-r,"It's not Orin and it's not lidar_centerpoint, but it seems you can run tensorrt_yolox using Jetson AGX Xavier based ECU by following [this instruction](https://github.com/tier4/edge-auto/blob/main/docs/tutorials/02_installation.md#2-2-jetson-based-ecu)"
Running autoware rocker on gpu in Jetson Orin or arm64 devices in general,D_kwDOAnasMc4ATJYw,2023-03-29T17:00:15Z,sudhsrik,5,Answered,DC_kwDOAnasMc4AaqdL,oguzkaganozt,"I followed this documentation and it appears that in order to install cuda, cudnn and tensorrt dependencies we need to use Jetson packages rather than standart arm64-sbsa packages for ORIN. Because architecture and GPU bindings seem different.

So as a solution; 
- using NVIDIA Jetson Containers as a base(for cuda, cudnn and tensorrt dependencies)
- installing Autoware dependencies 
- finally building Autoware from scratch inside the container

This will take hours to validate but I will try to validate the solution."
Running autoware rocker on gpu in Jetson Orin or arm64 devices in general,D_kwDOAnasMc4ATJYw,2023-03-29T17:00:15Z,sudhsrik,5,Answered,DC_kwDOAnasMc4Aa20h,Autostone-c,"Based on your statement, can autoware(humble-branch) only be run in Orin's Docker environment and cannot be run on the host computer?"
Running autoware rocker on gpu in Jetson Orin or arm64 devices in general,D_kwDOAnasMc4ATJYw,2023-03-29T17:00:15Z,sudhsrik,5,Answered,DC_kwDOAnasMc4Aa4qp,oguzkaganozt,"By default, ORIN Jetpack comes with Ubuntu 20.04, ROS-humble requires 22.04 and it also comes with an insufficient CUDA version of 11.4. To tackle those problems I have created a container with Ubuntu 22.04 and tried updating CUDA inside the container by following https://developer.nvidia.com/blog/simplifying-cuda-upgrades-for-nvidia-jetson-users/ but it didn't work."
How to set the tf transform from base_link(vehicle frame) to velodyne_top(sensor frame)?,D_kwDOAnasMc4ATJmd,2023-03-29T22:46:23Z,damodarRohit,3,Answered,,,
How to set the tf transform from base_link(vehicle frame) to velodyne_top(sensor frame)?,D_kwDOAnasMc4ATJmd,2023-03-29T22:46:23Z,damodarRohit,3,Answered,DC_kwDOAnasMc4AU7PL,maxime-clem,"Everything is set to `0.0` in your calibration. This does not look correct and could be the cause of your issue.
Are you following [this page](https://autowarefoundation.github.io/autoware-documentation/main/how-to-guides/integrating-autoware-with-your-vehicle/) ?"
How to set the tf transform from base_link(vehicle frame) to velodyne_top(sensor frame)?,D_kwDOAnasMc4ATJmd,2023-03-29T22:46:23Z,damodarRohit,3,Answered,DC_kwDOAnasMc4AU815,damodarRohit,"Yes, I was following the instructions in that page. But it doesnot specifically say where to set the calibration values.
1. My LIDAR is right above the vehicle center/base_link. So should my calibration x & y not be 0. My understanding was I should only specify a z values, which is the height of the Velodyne from the base_link point.
2. Also, I have set the values to 0, but the transforms being published shows a different value and the same in RViz. The base_link and velodyne frames are rotated by 90degrees wrt each other and also there is a shift in x & y. 
I am trying to understand why this is happening.
I am following the Integrating Autoware On Vehicle guide. Is there any guide on calibrating the Lidar wrt to the vehicle base_link frame?
"
How to set the tf transform from base_link(vehicle frame) to velodyne_top(sensor frame)?,D_kwDOAnasMc4ATJmd,2023-03-29T22:46:23Z,damodarRohit,3,Answered,DC_kwDOAnasMc4AU9a8,maxime-clem,"1. Yes `x = 0.0` and `y = 0.0` should be correct in your case.
2. For calibration, you can follow this page: https://autowarefoundation.github.io/autoware-documentation/main/how-to-guides/calibrating-your-sensors/

If the published TF does not correspond to your configuration, here are some possible explanations:
- You are modifying the ""source"" configuration files but the ones installed are used.
   - You can either build with the `--symlink-install` option (recommended, see https://answers.ros.org/question/371822/what-is-the-use-of-symlink-install-in-ros2-colcon-build/), or directly modify the configuration files installed in your `install` folder (not recommended as your configuration will be erased every time you re-build).
- You are launching Autoware with the wrong `sensor_model` (for example `sensor_model:=sample_sensor_kit`)."
How to set the tf transform from base_link(vehicle frame) to velodyne_top(sensor frame)?,D_kwDOAnasMc4ATJmd,2023-03-29T22:46:23Z,damodarRohit,3,Answered,DC_kwDOAnasMc4AVE9t,damodarRohit,"@maxime-clem 
I am running the build with --symlink-install everytime I make the changes. Other changes I make to the source code are reflected everywhere. It is only this config file changes that are not reflecting as expected.
I am giving the argument as sample_sensor_kit and the changes I am making are the two calibration files at this location : https://github.com/autowarefoundation/sample_sensor_kit_launch/tree/main/sample_sensor_kit_description/config"
How to set the tf transform from base_link(vehicle frame) to velodyne_top(sensor frame)?,D_kwDOAnasMc4ATJmd,2023-03-29T22:46:23Z,damodarRohit,3,Answered,DC_kwDOAnasMc4AVJsJ,yukkysaito,"umm...
I think the cause could be one of two things.
- Something is wrong with the build cache.
- Something is wrong with the environment variables.


**To solve wrong with the cache.**
```bash
# cd to autoware directory 
rm -rf ./install ./build ./log
colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release
#edit
code ./src/sensor_kit/sample_sensor_kit_launch/sample_sensor_kit_description/config/sensor_kit_calibration.yaml
#edit
code ./src/sensor_kit/sample_sensor_kit_launch/sample_sensor_kit_description/config/sensors_calibration.yaml
```

**To solve wrong with the environment variables.**
```bash
# restart terminal
# cd to autoware directory 
source ./install/setup.bash
```"
How to set the tf transform from base_link(vehicle frame) to velodyne_top(sensor frame)?,D_kwDOAnasMc4ATJmd,2023-03-29T22:46:23Z,damodarRohit,3,Answered,DC_kwDOAnasMc4AVKzk,maxime-clem,"I tried in my environment and also could not get the changes in the `sample_sensor_kit_description` to be applied when running Autoware.
I printed the `xacro` command used in `src/universe/autoware.universe/launch/tier4_vehicle_launch/launch/vehicle.launch.xml` by adding this line:
```xml
    <executable cmd=""echo xacro $(var model_file) vehicle_model:=$(var vehicle_model) sensor_model:=$(var sensor_model) config_dir:=$(var config_dir)"" output=""screen""/>
``` 
The output I got is the following:
```
[echo-1] xacro /home/mclement/autoware/autoware/install/tier4_vehicle_launch/share/tier4_vehicle_launch/urdf/vehicle.xacro vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit config_dir:=/home/mclement/autoware/autoware/install/individual_params/share/individual_params/config/default/sample_sensor_kit
```
So the actual configuration files used are the one in `param/autoware_individual_params/individual_params/config/default/sample_sensor_kit` (from repo https://github.com/autowarefoundation/autoware_individual_params). Changing these files is now properly reflected in the `/tf_static` when launching Autoware."
How to set the tf transform from base_link(vehicle frame) to velodyne_top(sensor frame)?,D_kwDOAnasMc4ATJmd,2023-03-29T22:46:23Z,damodarRohit,3,Answered,DC_kwDOAnasMc4AU926,Hensbag,@damodarRohit Can you share your sensor_kit ? I need a reference to arrange my sensor kit.
How to set the tf transform from base_link(vehicle frame) to velodyne_top(sensor frame)?,D_kwDOAnasMc4ATJmd,2023-03-29T22:46:23Z,damodarRohit,3,Answered,DC_kwDOAnasMc4AU931,maxime-clem,You can find an example here: https://github.com/autowarefoundation/sample_sensor_kit_launch
How to set the tf transform from base_link(vehicle frame) to velodyne_top(sensor frame)?,D_kwDOAnasMc4ATJmd,2023-03-29T22:46:23Z,damodarRohit,3,Answered,DC_kwDOAnasMc4AVCYp,Hensbag,"@damodarRohit sorry for interrupt again can you share how did you configure only for VLP-16 because I failed to arrange sensor kit only for the lidar.
"
How to set the tf transform from base_link(vehicle frame) to velodyne_top(sensor frame)?,D_kwDOAnasMc4ATJmd,2023-03-29T22:46:23Z,damodarRohit,3,Answered,DC_kwDOAnasMc4AVE_5,damodarRohit,"I am using a single VLP-16 lidar on top of the vehicle and no other sensors. I made changes to the following files :

1. Sensor config files at this location : https://github.com/autowarefoundation/sample_sensor_kit_launch/tree/main/sample_sensor_kit_description/config

Contents : 
![image](https://user-images.githubusercontent.com/122939583/229917160-df7fd8ac-3462-404f-8cae-39ac2992bbdb.png)
![image](https://user-images.githubusercontent.com/122939583/229917249-b6a8406e-77de-4904-9159-b2a9f80b066d.png)

2. Pose initializer parameter :https://github.com/autowarefoundation/autoware_launch/blob/main/autoware_launch/config/localization/pose_initializer.param.yaml

Changed gnss and stop_check_enable to false as I am not having  GNSS and my velocity estimate is not  really accurate.

3. Remove Camera, GNSS and IMU launch from this file : https://github.com/autowarefoundation/sample_sensor_kit_launch/blob/main/sample_sensor_kit_launch/launch/sensing.launch.xml

![image](https://user-images.githubusercontent.com/122939583/229918940-b5483ffb-7718-47b2-b766-01ec0e1362cd.png)

4. Changed the top LIDAR to VLP-16 and configured the network address. Removed the left, right and rear LIDAR launch as I only have one single LIDAR in this file : https://github.com/autowarefoundation/sample_sensor_kit_launch/blob/main/sample_sensor_kit_launch/launch/lidar.launch.xml

5. Change sensor_kit.xacro to have only VLP-16 velodyne_top LIDAR values at : https://github.com/autowarefoundation/sample_sensor_kit_launch/blob/main/sample_sensor_kit_description/urdf/sensor_kit.xacro

![image](https://user-images.githubusercontent.com/122939583/229921460-3508871c-b958-4fa0-a6d1-57c22fd7e09e.png)

6. Change sensors.xacro and remove all sensors which are not used at : https://github.com/autowarefoundation/sample_sensor_kit_launch/blob/main/sample_sensor_kit_description/urdf/sensors.xacro
 
![image](https://user-images.githubusercontent.com/122939583/229921984-079968af-7ef4-4ca8-9659-c8afce9475e7.png)

7. I had to change use_imu to false in distortion correction node and am comment out the distortion correction function. Refer this discussion for more info : https://github.com/orgs/autowarefoundation/discussions/3378"
How to set the tf transform from base_link(vehicle frame) to velodyne_top(sensor frame)?,D_kwDOAnasMc4ATJmd,2023-03-29T22:46:23Z,damodarRohit,3,Answered,DC_kwDOAnasMc4AVGIw,Hensbag,"Thanks a lot,"
2023-03-30 Racing Working Group Meeting,D_kwDOAnasMc4ATJuk,2023-03-30T01:08:07Z,QZJGeorge,0,Unanswered,,,
carla_autoware_bridge package,D_kwDOAnasMc4ATOA4,2023-04-03T03:01:27Z,Robotics010,2,Answered,,,
carla_autoware_bridge package,D_kwDOAnasMc4ATOA4,2023-04-03T03:01:27Z,Robotics010,2,Answered,DC_kwDOAnasMc4AVALI,maxime-clem,"Thank you for your contribution ! The instructions on how to run look very detailed. I am not a CARLA user but I will try to test your bridge when I get the time.
From what I understand, one issue with the CARLA bridge comes from its performance being very bad when using many lidars. Does your bridge help with this issue ? Or do you think some improvements are possible to make performance better ?"
carla_autoware_bridge package,D_kwDOAnasMc4ATOA4,2023-04-03T03:01:27Z,Robotics010,2,Answered,DC_kwDOAnasMc4AVA4-,Robotics010,"My bridge just remaps `lidar/top/pointcloud_raw_ex` topic, which is actually converted by `carla_ros_bridge`. But I didn’t aware of that issue and will have a look at it.
Does the problem occurred with one 128-lidar and three 16-lidars (current sensor_kit autoware lidar configuration) ? Or how many lidar are needed to reproduce the lidar performance issue?"
carla_autoware_bridge package,D_kwDOAnasMc4ATOA4,2023-04-03T03:01:27Z,Robotics010,2,Answered,DC_kwDOAnasMc4AVA82,maxime-clem,"I am not sure. It not my personal experience but feedback I heard about the CARLA bridge.
From what I understand, the bridge must copy all the sensor data from CARLA to the new ROS2 messages, which becomes very expensive with many sensors.
I will try to reproduce such issue when I get the time."
carla_autoware_bridge package,D_kwDOAnasMc4ATOA4,2023-04-03T03:01:27Z,Robotics010,2,Answered,DC_kwDOAnasMc4AVFwj,maxime-clem,"I could setup almost everything without issue following the instructions.
However, I encountered blocking issues that are probably related to my environment using `humble` instead of `galactic`.
Do you know if it is possible to add `humble` compatibility ? This would enable using the latest version of autoware since no new development is being done for `galactic`.

About performance, there is this open issue: https://github.com/carla-simulator/ros-bridge/issues/670"
carla_autoware_bridge package,D_kwDOAnasMc4ATOA4,2023-04-03T03:01:27Z,Robotics010,2,Answered,DC_kwDOAnasMc4AVG70,Robotics010,"Regarding CARLA bridge performance. CARLA simulator has a synchronous mode, with which you are not obligated to run simulator real time (depending on the hardware you go slower or faster than real time), so CARLA bridge performance even with many lidars shouldn't be a problem.
I'll check if a synchronization of data between CARLA simulator and carla-ros-bridge is working properly when you launch using the getting started tutorial from my package."
carla_autoware_bridge package,D_kwDOAnasMc4ATOA4,2023-04-03T03:01:27Z,Robotics010,2,Answered,DC_kwDOAnasMc4AVG_s,Robotics010,"And about humble/galactic version. Unfortunately, CARLA developers supports up to foxy version and so CARLA simulator comes with precompiled carla 2.7, 3.6, 3.7, and 3.8 python packages. Foxy or Galactic precompiled uses python 3.8. So we can use CARLA simulator with Foxy or Galactic based systems, such as autoware galactic branch version. I've asked about humble support as a part of [other discussion](https://github.com/carla-simulator/carla/discussions/6305), but I haven't got any response yet.

On the other side humble precompiled uses python 3.10 and there is no carla 3.10 precompiled python package. That is why CARLA users are using galactic autoware branch instead of humble. However there is a way to compile CARLA and/or carla python package by yourself but I didn't try it yet and it looks like an effort (especially for someone not knowing CARLA ecosystem).

I may be wrong somewhere in my explanation (or I may be not describing a reason precisely), but I've tried and was unsuccessfull with autoware humble + the latest CARLA simulator."
carla_autoware_bridge package,D_kwDOAnasMc4ATOA4,2023-04-03T03:01:27Z,Robotics010,2,Answered,DC_kwDOAnasMc4AVI2C,maxime-clem,Thank you for the explanation and for your hard work. I understand the current limitations.
carla_autoware_bridge package,D_kwDOAnasMc4ATOA4,2023-04-03T03:01:27Z,Robotics010,2,Answered,DC_kwDOAnasMc4AVN7D,Robotics010,FYI [here](https://github.com/carla-simulator/ros-bridge/pull/431#issuecomment-787996823) is another worry about time-consuming lidar operation from a carla-ros-bridge side from the carla-ros-bridge maintainer. I hope this still can be mitigated by the synchronous mode.
carla_autoware_bridge package,D_kwDOAnasMc4ATOA4,2023-04-03T03:01:27Z,Robotics010,2,Answered,DC_kwDOAnasMc4AV2nc,mitsudome-r,"@Robotics010 Great work!
If you don't mind, please consider writing instructions to the documentation under digital-twin simulation:
* https://github.com/autowarefoundation/autoware-documentation/tree/main/docs/tutorials/ad-hoc-simulation/digital-twin-simulation
There are currently tutorials for AWSIM and MORAI SIM, but not for CARLA"
carla_autoware_bridge package,D_kwDOAnasMc4ATOA4,2023-04-03T03:01:27Z,Robotics010,2,Answered,DC_kwDOAnasMc4AV_Pg,Robotics010,"Hey @mitsudome-r, thank you! This was the initial idea to add the CARLA option to Autoware tutorials. I would like to make it as soon as possible, but after [few outstanding problems](https://github.com/Robotics010/carla_autoware_bridge/blob/master/getting-started.md#step-5-temporary-workarounds) will be fixed.

Meanwhile could you share thoughts if any about the following:

1. Currently only galactic autoware branch is supported, because `carla-ros-bridge` only supports up to foxy (and galactic is just working as well). I haven't got yet a response on [when carla is going to support Autoware or at least humble](https://github.com/carla-simulator/carla/discussions/6305), but we can make a community version of carla supporting humble and hence make CARLA supports up to Autoware main branch.
2. It looks like carla maintainers are going to rewrite `carla-ros-bridge` in C++. This is a good news, because it resolves the poor performance issue, but the release date is unknown and it was not even officially published.
3. Sensors placement, vehicle/calibration configs are not added/configured yet and there wasn't yet done any control tuning for the selected vehicle from the CARLA simulator. I'm going to perform it as well, but it will take some time.
4. Obviously it is useful to use CARLA synchronous mode, but I still need to investigate how it can be used with autoware."
2023-04-03 ODD working group weekly meeting (136),D_kwDOAnasMc4ATOFN,2023-04-03T05:48:57Z,Igata-ctrl,0,Unanswered,,,
No output/visual in RVIZ when do camera-lidar fusion perception,D_kwDOAnasMc4ATOMW,2023-04-03T08:34:13Z,lhakim85,1,Answered,,,
No output/visual in RVIZ when do camera-lidar fusion perception,D_kwDOAnasMc4ATOMW,2023-04-03T08:34:13Z,lhakim85,1,Answered,DC_kwDOAnasMc4AVArY,liuXinGangChina,"actually if you can receive those msgs， it proves that your data-trans-system works。As a result problem may lay on your rviz，please check your terminal‘s，in which you pull up rviz， output to see if there is any warning about timing or frame-id 

happy hacking!"
No output/visual in RVIZ when do camera-lidar fusion perception,D_kwDOAnasMc4ATOMW,2023-04-03T08:34:13Z,lhakim85,1,Answered,DC_kwDOAnasMc4AVC0S,lhakim85,"@liuXinGangChina, can u elaborate more on this,

> please check your terminal‘s，in which you pull up rviz

Im launch RVIZ using autoware script

and this
> output to see if there is any warning about timing or frame-id"
No output/visual in RVIZ when do camera-lidar fusion perception,D_kwDOAnasMc4ATOMW,2023-04-03T08:34:13Z,lhakim85,1,Answered,DC_kwDOAnasMc4AVlQN,liuXinGangChina,"@lhakim85 
Hi, I notice there is a warning , maybe you can check the input source of fusion node to see if there is available data, if fusion fails the fusion node will also output empty object list which match your case.
![图片](https://user-images.githubusercontent.com/90366790/233000814-bfdd30ba-e06d-4b6f-985e-13567cae17ad.png)
"
No output/visual in RVIZ when do camera-lidar fusion perception,D_kwDOAnasMc4ATOMW,2023-04-03T08:34:13Z,lhakim85,1,Answered,DC_kwDOAnasMc4AVlji,lhakim85,"@liuXinGangChina,
Thanks for the reply.

> maybe you can check the input source of fusion node to see if there is available data, if fusion fails the fusion node will also output empty object list

I'm tested with standalone lidar-perception only and camera-perception only, and can get the output.  But no output when do fusion
Before this on Galactic branch, we did not face this issue


"
No output/visual in RVIZ when do camera-lidar fusion perception,D_kwDOAnasMc4ATOMW,2023-04-03T08:34:13Z,lhakim85,1,Answered,DC_kwDOAnasMc4AVryO,liuXinGangChina,"hi @lhakim85 , since humble version is now under long term support , and actually many minor issue has been fixed.
I will double check with our team especially perception engineer to see if we can reproduce the issue"
No output/visual in RVIZ when do camera-lidar fusion perception,D_kwDOAnasMc4ATOMW,2023-04-03T08:34:13Z,lhakim85,1,Answered,DC_kwDOAnasMc4AVvJu,liuXinGangChina,"I see, Since humble version is pretty stable than universe, i will see if we can reproduce this issue"
No output/visual in RVIZ when do camera-lidar fusion perception,D_kwDOAnasMc4ATOMW,2023-04-03T08:34:13Z,lhakim85,1,Answered,DC_kwDOAnasMc4AWYqK,liuXinGangChina,"We have tried to reproduce your issue, and we found that you may forget to turn on the debug flag in the launch file.
our engineer will tell you which launch file contain this flag @beginningfan"
No output/visual in RVIZ when do camera-lidar fusion perception,D_kwDOAnasMc4ATOMW,2023-04-03T08:34:13Z,lhakim85,1,Answered,DC_kwDOAnasMc4AWYrC,lhakim85,noted and thanks @liuXinGangChina for the reply
No output/visual in RVIZ when do camera-lidar fusion perception,D_kwDOAnasMc4ATOMW,2023-04-03T08:34:13Z,lhakim85,1,Answered,DC_kwDOAnasMc4AWYyO,beginningfan,"@lhakim85 Do you mean to visualization this topic `/perception/object_recognition/detection/clustering/camera_lidar_fusion/roi_cluster_fusion/debug/image_raw0`, whose  pictures have cluster projections. You need to modify this parameter [debug_mode](https://github.com/autowarefoundation/autoware.universe/blob/f627fc30a6730af52348e0605437d7ed6806170e/perception/image_projection_based_fusion/launch/roi_cluster_fusion.launch.xml#L30) frome `false` to `true`. "
Modernize code base with range-v3 library,D_kwDOAnasMc4ATO8N,2023-04-04T03:02:51Z,VRichardJP,2,Answered,,,
Modernize code base with range-v3 library,D_kwDOAnasMc4ATO8N,2023-04-04T03:02:51Z,VRichardJP,2,Answered,DC_kwDOAnasMc4AVC6W,kenji-miyake,"@VRichardJP Thank you for your proposal! FYI, I've discussed a similar proposal in the previous project Autoware.Auto: https://gitlab.com/autowarefoundation/autoware.auto/AutowareAuto/-/issues/1154

Since it's obvious that readability and quality will improve, I'm up for your suggestion!

Also, it's ideal if there is a way to detect and warn old styles automatically. I guess ClangTidy might support it in the future as `modernize-*` rules.
https://clang.llvm.org/extra/clang-tidy/checks/list.html"
Modernize code base with range-v3 library,D_kwDOAnasMc4ATO8N,2023-04-04T03:02:51Z,VRichardJP,2,Answered,DC_kwDOAnasMc4AVcbL,VRichardJP,"To be fair, although I think ranges and views functional-style constructs are far superior to their usual imperative equivalent (improved readability, less error-prone, etc), using `ranges-v3` would come with a cost:
- Many users have reported ranges-v3 increase compilation time a lot. This is partly due to the library emulating C++20 concepts with the good old SFINAE when C++14 or C++17 is used.
- People have reported the STL C++20 ranges are slow to compile aswell. In this case, compilation time depends a lot on the compiler version, most recent versions being faster and faster.  
- Finally, the runtime performance could be impacted. Although there is no reason for ranges to be slower than their imperative counterpart, the truth is that compilers have been optimizing imperative-style code for decades. Once again, the most recent compiler version is likely to give the best result.

I don't think any of these points is necessarily deal-breaking. Personally, I would always choose +1 minute compilation time over spending 3 days debugging a buffer overflow. Still, I think these are important points to keep in mind and monitor if we start to use ranges-v3.

For instance, if someone makes a PR with ranges, we could ask to compare:
- module compilation time before and after
- runtime performance before and after (if code logic is unchanged)"
how to enable AUTO / STOP button in RVIZ,D_kwDOAnasMc4ATO-e,2023-04-04T04:38:58Z,Tester2009,1,Answered,,,
how to enable AUTO / STOP button in RVIZ,D_kwDOAnasMc4ATO-e,2023-04-04T04:38:58Z,Tester2009,1,Answered,DC_kwDOAnasMc4AVFAM,damodarRohit,"As far as I understand, it needs a valid goal pose set and a valid trajectory generated from the Initial pose to Goal pose for the AUTO button to enable."
how to enable AUTO / STOP button in RVIZ,D_kwDOAnasMc4ATO-e,2023-04-04T04:38:58Z,Tester2009,1,Answered,DC_kwDOAnasMc4AVFZI,Tester2009,"We will try it on the actual road. As for now, we are trying it in our office."
Improve parking effect,D_kwDOAnasMc4ATPA4,2023-04-04T06:10:07Z,yaoweixiao-ux,0,Unanswered,,,
Could anyone share right-hand traffic map?,D_kwDOAnasMc4ATPOI,2023-04-04T10:52:26Z,kosuke55,2,Answered,,,
Could anyone share right-hand traffic map?,D_kwDOAnasMc4ATPOI,2023-04-04T10:52:26Z,kosuke55,2,Answered,DC_kwDOAnasMc4AVDlP,kosuke55,"@xmfcx If you have any, could you please share that with us?:pray:"
Could anyone share right-hand traffic map?,D_kwDOAnasMc4ATPOI,2023-04-04T10:52:26Z,kosuke55,2,Answered,DC_kwDOAnasMc4AVEQ1,MertClk,"Hello @kosuke55 , @xmfcx forwarded your question to me. [Here](https://drive.google.com/file/d/1LbYSLSdz8orvHI_cGkDif93bWu9BIB6n/view?usp=sharing), you can find lanelet2 map we used for Bus ODD project."
Could anyone share right-hand traffic map?,D_kwDOAnasMc4ATPOI,2023-04-04T10:52:26Z,kosuke55,2,Answered,DC_kwDOAnasMc4AVESl,kosuke55,"@MertClk thank you for the nice map!
![image](https://user-images.githubusercontent.com/39142679/229841257-e5e96cb9-34d5-4e13-badb-db1a7bd4407b.png)
"
Could anyone share right-hand traffic map?,D_kwDOAnasMc4ATPOI,2023-04-04T10:52:26Z,kosuke55,2,Answered,DC_kwDOAnasMc4AVETY,MertClk,@kosuke55 I'm so glad that it meets your requirements.
Could anyone share right-hand traffic map?,D_kwDOAnasMc4ATPOI,2023-04-04T10:52:26Z,kosuke55,2,Answered,DC_kwDOAnasMc4AVFaa,kminoda,"Cool, I'm also curious about the lanelet2 maps outside of Japan.

@xmfcx @MertClk Did you see any problem in adapting Autoware.Universe (which is mainly developed in left-hand traffic) to right-hand traffic? If so, what kind of issues?"
Could anyone share right-hand traffic map?,D_kwDOAnasMc4ATPOI,2023-04-04T10:52:26Z,kosuke55,2,Answered,DC_kwDOAnasMc4AVGHG,mehmetdogru,"@kminoda

We used mainly the map @MertClk has shared for now and I can say that we didn't have any problems related to map being a right-handed one.

PS: Although, as you can also say that we didn't have very complicated scenarios given that we didn't have a very complex HD-Map (general road structure & intersections etc.)"
Could anyone share right-hand traffic map?,D_kwDOAnasMc4ATPOI,2023-04-04T10:52:26Z,kosuke55,2,Answered,DC_kwDOAnasMc4AVEBR,shmpwk,@soblin said that you can get it by creating the mirror image of the Japanese map.
Software WG Meeting 2023/04/04,D_kwDOAnasMc4ATPd5,2023-04-04T15:02:36Z,xmfcx,2,Answered,,,
Software WG Meeting 2023/04/04,D_kwDOAnasMc4ATPd5,2023-04-04T15:02:36Z,xmfcx,2,Answered,DC_kwDOAnasMc4AVEPM,piotr-zyskowski-rai,"I would like to discuss these topics:
- https://github.com/autowarefoundation/autoware.universe/issues/2755
  - https://github.com/autowarefoundation/autoware-documentation/pull/346
- https://github.com/autowarefoundation/autoware.universe/issues/2684
"
Software WG Meeting 2023/04/04,D_kwDOAnasMc4ATPd5,2023-04-04T15:02:36Z,xmfcx,2,Answered,DC_kwDOAnasMc4AVGkM,ahmeddesokyebrahim,"@mitsudome-r - @xmfcx  - @mehmetdogru :
I have updated the merge sequence for invalid lanelet feature in this comment [here](https://github.com/orgs/autowarefoundation/discussions/3275#discussioncomment-5379038)."
Problem with connecting ultrasonic devices to autoware.ai,D_kwDOAnasMc4ATPu7,2023-04-04T20:20:39Z,ddutan2000,0,Unanswered,,,
source installation failed,D_kwDOAnasMc4ATPxY,2023-04-04T21:08:20Z,zillur-av,4,Answered,,,
source installation failed,D_kwDOAnasMc4ATPxY,2023-04-04T21:08:20Z,zillur-av,4,Answered,DC_kwDOAnasMc4AVFMA,zillur-av,"This time, I reinstalled cuda, cudnn, tensorrt following https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/source-installation/ . Now it shows the following error.
rosdistro=humble
rmw_implementation=rmw_cyclonedds_cpp
base_image=ubuntu:22.04
cuda_base_image=ubuntu:22.04
prebuilt_base_image=ubuntu:22.04
cuda_version=11.6
cudnn_version=8.4.1.50-1+cuda11.6
tensorrt_version=8.4.2-1+cuda11.6

```
Starting >>> tier4_hmi_msgs                                                                                              
Finished <<< individual_params [0.78s]                                                                                   
Starting >>> trtexec_vendor
Finished <<< sample_sensor_kit_description [0.75s]                                                                       
Starting >>> autoware_auto_perception_rviz_plugin
--- stderr: trtexec_vendor                                                                                               
/usr/bin/ld: warning: libcublas.so.12, needed by /usr/lib/libnvinfer_plugin.so, not found (try using -rpath or -rpath-link)
/usr/bin/ld: warning: libcublasLt.so.12, needed by /usr/lib/libnvinfer_plugin.so, not found (try using -rpath or -rpath-link)
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasLtMatmulAlgoGetIds@libcublasLt.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasSasum_v2@libcublas.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasGetMathMode@libcublas.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasSgemm_v2@libcublas.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasLtMatmulAlgoConfigSetAttribute@libcublasLt.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasLtMatmulPreferenceCreate@libcublasLt.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasLtMatmulAlgoCheck@libcublasLt.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasLtMatmulPreferenceDestroy@libcublasLt.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasLtMatrixLayoutSetAttribute@libcublasLt.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasLtMatmulAlgoInit@libcublasLt.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasLtMatmulDescSetAttribute@libcublasLt.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasSetStream_v2@libcublas.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasSetPointerMode_v2@libcublas.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasScopy_v2@libcublas.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasLtMatmulAlgoConfigGetAttribute@libcublasLt.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasLtMatmulPreferenceSetAttribute@libcublasLt.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasLtMatmulDescCreate@libcublasLt.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasDestroy_v2@libcublas.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasGemmEx@libcublas.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasGemmStridedBatchedEx@libcublas.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasLtMatmul@libcublasLt.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasLtMatmulAlgoCapGetAttribute@libcublasLt.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasCreate_v2@libcublas.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasLtMatrixLayoutCreate@libcublasLt.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasLtDestroy@libcublasLt.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasSetMathMode@libcublas.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasSscal_v2@libcublas.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasLtCreate@libcublasLt.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasLtMatmulDescDestroy@libcublasLt.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasSgemmStridedBatched@libcublas.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasGetPointerMode_v2@libcublas.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasLtMatrixLayoutDestroy@libcublasLt.so.12'
/usr/bin/ld: /usr/lib/libnvinfer_plugin.so: undefined reference to `cublasHgemm@libcublas.so.12'
collect2: error: ld returned 1 exit status
gmake[2]: *** [CMakeFiles/trtexec_vendor.dir/build.make:199: trtexec] Error 1
gmake[1]: *** [CMakeFiles/Makefile2:137: CMakeFiles/trtexec_vendor.dir/all] Error 2
gmake: *** [Makefile:146: all] Error 2
---
Failed   <<< trtexec_vendor [0.79s, exited with code 2]
Aborted  <<< tier4_planning_launch [4.63s]                                             
Aborted  <<< autoware_auto_perception_rviz_plugin [1.07s]
Aborted  <<< tier4_hmi_msgs [1.41s]                                                    
Aborted  <<< ad_api_visualizers [3.71s]                                                
Aborted  <<< morai_msgs [29.5s]                                                        
Aborted  <<< lidar_centerpoint [49.3s]                                                         
Aborted  <<< trajectory_follower_node [2min 15s]                                             

Summary: 161 packages finished [2min 46s]
  1 package failed: trtexec_vendor
  7 packages aborted: ad_api_visualizers autoware_auto_perception_rviz_plugin lidar_centerpoint morai_msgs tier4_hmi_msgs tier4_planning_launch trajectory_follower_node
  1 package had stderr output: trtexec_vendor
  69 packages not processed
```"
source installation failed,D_kwDOAnasMc4ATPxY,2023-04-04T21:08:20Z,zillur-av,4,Answered,DC_kwDOAnasMc4AVF6q,zulfaqar-azmi-t4,"Did you deleted the build and install folder before recompiling?

It seems that when building, it still searches for cuda 12 related library, hence the build failure.

"
source installation failed,D_kwDOAnasMc4ATPxY,2023-04-04T21:08:20Z,zillur-av,4,Answered,DC_kwDOAnasMc4AVHHz,zillur-av,"> Did you deleted the build and install folder before recompiling?
> 
> It seems that when building, it still searches for cuda 12 related library, hence the build failure.

I deleted previous log files. `rm -rf \log \install`"
source installation failed,D_kwDOAnasMc4ATPxY,2023-04-04T21:08:20Z,zillur-av,4,Answered,DC_kwDOAnasMc4AVFOs,VRichardJP,"```
--- stderr: autoware_utils                                                                                                              
CMake Error at /home/trc/autoware/install/autoware_cmake/share/autoware_cmake/cmake/autoware_package.cmake:39 (if):
  if given arguments:

    ""STREQUAL"" ""rolling""

  Unknown arguments specified
```
This looks like a cmake version problem. What is the output of `cmake --version`?"
source installation failed,D_kwDOAnasMc4ATPxY,2023-04-04T21:08:20Z,zillur-av,4,Answered,DC_kwDOAnasMc4AVHLu,esteve,"I'd say this is because the `$ROS_DISTRO` environment variable is not available, which is strange because we've added `ros_environment` to `autoware_cmake` as a dependency. @zillur-av can you paste the commit id for `autoware_common` ? Also, did you run `rosdep install --from src --ignore-src` from the `autoware` folder? Thanks."
source installation failed,D_kwDOAnasMc4ATPxY,2023-04-04T21:08:20Z,zillur-av,4,Answered,DC_kwDOAnasMc4AVHQk,zillur-av,"> I'd say this is because the `$ROS_DISTRO` environment variable is not available, which is strange because we've added `ros_environment` to `autoware_cmake` as a dependency. @zillur-av can you paste the commit id for `autoware_common` ? Also, did you run `rosdep install --from src --ignore-src` from the `autoware` folder? Thanks.

Here is the commit id:
```
trc@rahzar:~/autoware/src/core/autoware_common$ git rev-parse HEAD
34338c0d9e68ea8c7598a66f319cdcb6d92873a3
trc@rahzar:~/autoware/src/core/autoware_common$ 
```

I followed everything here https://tier4.github.io/AWSIM/GettingStarted/QuickStartDemo/. It is same as https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/source-installation/ except it suggested to use `awsim-stable` branch instead of `master`. also `echo $ROS_DISTRO` is printing `humble`
"
source installation failed,D_kwDOAnasMc4ATPxY,2023-04-04T21:08:20Z,zillur-av,4,Answered,DC_kwDOAnasMc4AVFek,zillur-av,"```
trc@rahzar:~/autoware$ cmake --version
cmake version 3.22.1

CMake suite maintained and supported by Kitware (kitware.com/cmake).
trc@rahzar:~/autoware$ 
```
I even used `./setup-dev-env.sh` to install to required packages which was successful. Still showing the second error.
```
trc@rahzar:~/autoware$ ./setup-dev-env.sh
Setting up the build environment can take up to 1 hour.
>  Are you sure you want to run setup? [y/N] y
/home/trc/.local/bin is already in PATH.

⚠️  All pipx binary directories have been added to PATH. If you are sure you want to proceed, try again with the '--force' flag.

Otherwise pipx is ready to go! ✨ 🌟 ✨
Installing to existing venv 'ansible'
  installed package ansible 6.7.0, installed using Python 3.10.6
  These apps are now globally available
    - ansible
    - ansible-community
    - ansible-config
    - ansible-connection
    - ansible-console
    - ansible-doc
    - ansible-galaxy
    - ansible-inventory
    - ansible-playbook
    - ansible-pull
    - ansible-test
    - ansible-vault
done! ✨ 🌟 ✨
ansible-galaxy collection install -f -r /home/trc/autoware/ansible-galaxy-requirements.yaml 
Starting galaxy collection install process
Process install dependency map
Starting collection install process
Installing 'autoware.dev_env:0.1.0' to '/home/trc/.ansible/collections/ansible_collections/autoware/dev_env'
Created collection for autoware.dev_env:0.1.0 at /home/trc/.ansible/collections/ansible_collections/autoware/dev_env
autoware.dev_env:0.1.0 was installed successfully
ansible-playbook autoware.dev_env.universe --ask-become-pass --extra-vars install_devel=true --extra-vars rosdistro=humble --extra-vars rmw_implementation=rmw_cyclonedds_cpp --extra-vars base_image=ubuntu:22.04 --extra-vars cuda_base_image=ubuntu:22.04 --extra-vars prebuilt_base_image=ubuntu:22.04 --extra-vars cuda_version=11.6 --extra-vars cudnn_version=8.4.1.50-1+cuda11.6 --extra-vars tensorrt_version=8.4.2-1+cuda11.6 
BECOME password: 
[WARNING]: No inventory was parsed, only implicit localhost is available
[WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'
[WARNING]: running playbook inside collection autoware.dev_env
[Warning] Some Autoware components depend on the CUDA, cuDNN and TensorRT NVIDIA libraries which have end-user license agreements that should be reviewed before installation.
Install NVIDIA libraries? [y/N]: y

PLAY [localhost] *********************************************************************************************************************

TASK [Gathering Facts] ***************************************************************************************************************
ok: [localhost]

TASK [Verify OS] *********************************************************************************************************************
skipping: [localhost]

TASK [Print args] ********************************************************************************************************************
ok: [localhost] => {
    ""msg"": [
        {
            ""rosdistro"": ""humble""
        },
        {
            ""rmw_implementation"": ""rmw_cyclonedds_cpp""
        },
        {
            ""cuda_version"": ""11.6""
        },
        {
            ""cudnn_version"": ""8.4.1.50-1+cuda11.6""
        },
        {
            ""tensorrt_version"": ""8.4.2-1+cuda11.6""
        }
    ]
}

TASK [Show a warning if the NVIDIA libraries will not be installed] ******************************************************************
skipping: [localhost]

TASK [autoware.dev_env.autoware_core : Install gdown to download files from CMakeLists.txt] ******************************************
ok: [localhost]

TASK [autoware.dev_env.ccache : Install ccache] **************************************************************************************
ok: [localhost]

TASK [autoware.dev_env.ros2 : Install dependencies for setting up apt sources] *******************************************************
ok: [localhost]

TASK [autoware.dev_env.ros2 : Authorize ROS GPG key] *********************************************************************************
ok: [localhost]

TASK [autoware.dev_env.ros2 : Save result of 'dpkg --print-architecture'] ************************************************************
ok: [localhost]

TASK [autoware.dev_env.ros2 : Save result of 'source /etc/os-release && echo $UBUNTU_CODENAME'] **************************************
ok: [localhost]

TASK [autoware.dev_env.ros2 : Add ROS 2 apt repository to source list] ***************************************************************
ok: [localhost]

TASK [autoware.dev_env.ros2 : Install ros-humble-desktop] ****************************************************************************
ok: [localhost]

TASK [autoware.dev_env.ros2 : Add PATH to .bashrc] ***********************************************************************************
ok: [localhost]

TASK [autoware.dev_env.plotjuggler : Install plotjuggler] ****************************************************************************
ok: [localhost]

TASK [autoware.dev_env.pre_commit : Install pre-commit] ******************************************************************************
ok: [localhost]

TASK [autoware.dev_env.pre_commit : Install clang-format] ****************************************************************************
ok: [localhost]

TASK [autoware.dev_env.pre_commit : Install Go] **************************************************************************************
ok: [localhost]

TASK [autoware.dev_env.ros2_dev_tools : Install apt packages] ************************************************************************
ok: [localhost]

TASK [autoware.dev_env.ros2_dev_tools : Run 'sudo rosdep init'] **********************************************************************
ok: [localhost]

TASK [autoware.dev_env.rmw_implementation : Get dash-case name of rmw_implementation] ************************************************
ok: [localhost]

TASK [autoware.dev_env.rmw_implementation : Install ros-humble-rmw-cyclonedds-cpp] ***************************************************
ok: [localhost]

TASK [autoware.dev_env.rmw_implementation : Add RMW_IMPLEMENTATION to .bashrc] *******************************************************
ok: [localhost]

TASK [autoware.dev_env.autoware_universe : Install geographiclib-tools] **************************************************************
ok: [localhost]

TASK [autoware.dev_env.autoware_universe : Install egm2008-1] ************************************************************************
ok: [localhost]

TASK [autoware.dev_env.cuda : Get CUDA architecture name] ****************************************************************************
ok: [localhost]

TASK [autoware.dev_env.cuda : (tmp for Ubuntu 22.04) Add liburcu6 repository into sources.list for amd64] ****************************
ok: [localhost]

TASK [autoware.dev_env.cuda : (tmp for Ubuntu 22.04) Add liburcu6 repository into sources.list for arm64] ****************************
skipping: [localhost]

TASK [autoware.dev_env.cuda : Remove old /etc/apt/sources.list.d/cuda.list] **********************************************************
ok: [localhost]

TASK [autoware.dev_env.cuda : Install CUDA keyring] **********************************************************************************
ok: [localhost]

TASK [autoware.dev_env.cuda : Get dash-case name of cuda_version] ********************************************************************
ok: [localhost]

TASK [autoware.dev_env.cuda : Install CUDA libraries except for cuda-drivers] ********************************************************
ok: [localhost]

TASK [autoware.dev_env.cuda : Install cuda-drivers] **********************************************************************************
ok: [localhost]

TASK [autoware.dev_env.cuda : Add PATH to .bashrc] ***********************************************************************************
ok: [localhost]

TASK [autoware.dev_env.cuda : Add LD_LIBRARY_PATH to bashrc] *************************************************************************
ok: [localhost]

TASK [autoware.dev_env.pacmod : Install apt-transport-https] *************************************************************************
ok: [localhost]

TASK [autoware.dev_env.pacmod : Save result of 'lsb_release -sc'] ********************************************************************
ok: [localhost]

TASK [autoware.dev_env.pacmod : Add AutonomouStuff apt repository to source list] ****************************************************
ok: [localhost]

TASK [autoware.dev_env.pacmod : Add AutonomouStuff rosdep yaml] **********************************************************************
ok: [localhost]

TASK [autoware.dev_env.cuda : Get CUDA architecture name] ****************************************************************************
ok: [localhost]

TASK [autoware.dev_env.cuda : (tmp for Ubuntu 22.04) Add liburcu6 repository into sources.list for amd64] ****************************
ok: [localhost]

TASK [autoware.dev_env.cuda : (tmp for Ubuntu 22.04) Add liburcu6 repository into sources.list for arm64] ****************************
skipping: [localhost]

TASK [autoware.dev_env.cuda : Remove old /etc/apt/sources.list.d/cuda.list] **********************************************************
ok: [localhost]

TASK [autoware.dev_env.cuda : Install CUDA keyring] **********************************************************************************
ok: [localhost]

TASK [autoware.dev_env.cuda : Get dash-case name of cuda_version] ********************************************************************
ok: [localhost]

TASK [autoware.dev_env.cuda : Install CUDA libraries except for cuda-drivers] ********************************************************
ok: [localhost]

TASK [autoware.dev_env.cuda : Install cuda-drivers] **********************************************************************************
ok: [localhost]

TASK [autoware.dev_env.cuda : Add PATH to .bashrc] ***********************************************************************************
ok: [localhost]

TASK [autoware.dev_env.cuda : Add LD_LIBRARY_PATH to bashrc] *************************************************************************
ok: [localhost]

TASK [autoware.dev_env.tensorrt : Install cuDNN and TensorRT] ************************************************************************
ok: [localhost]

TASK [autoware.dev_env.tensorrt : Install cuDNN and TensorRT Dev] ********************************************************************
ok: [localhost]

TASK [autoware.dev_env.tensorrt : Prevent CUDA-related packages from upgrading] ******************************************************
ok: [localhost] => (item=libcudnn8)
ok: [localhost] => (item=libnvinfer8)
ok: [localhost] => (item=libnvinfer-plugin8)
ok: [localhost] => (item=libnvparsers8)
ok: [localhost] => (item=libnvonnxparsers8)

TASK [autoware.dev_env.tensorrt : Prevent CUDA-related Dev packages from upgrading] **************************************************
ok: [localhost] => (item=libcudnn8-dev)
ok: [localhost] => (item=libnvinfer-dev)
ok: [localhost] => (item=libnvinfer-plugin-dev)
ok: [localhost] => (item=libnvparsers-dev)
ok: [localhost] => (item=libnvonnxparsers-dev)

TASK [autoware.dev_env.git_lfs : Install Git LFS] ************************************************************************************
ok: [localhost]

TASK [autoware.dev_env.git_lfs : Check if git lfs is installed] **********************************************************************
ok: [localhost]

TASK [autoware.dev_env.git_lfs : Setup Git LFS] **************************************************************************************
skipping: [localhost]

PLAY RECAP ***************************************************************************************************************************
localhost                  : ok=50   changed=0    unreachable=0    failed=0    skipped=5    rescued=0    ignored=0   

Completed.
```
"
source installation failed,D_kwDOAnasMc4ATPxY,2023-04-04T21:08:20Z,zillur-av,4,Answered,DC_kwDOAnasMc4AVHlH,zillur-av,"Thanks everyone. appreciate your time. I finally solved the problem. It had something to do with my previous cuda, cudnn, tensorrt installation following nvidia website. Even though I uninstalled and removed the files, it did not work. This time I looked even carefully and deleted any other files related to previous installation and then install everything using autoware source docs. I see it still uses ubuntu 20 drivers and cuda installation in ubuntu 22 as a workaround. Ubuntu22 does not install those cuda, cudnn, tensorrt versoins by default. Perhaps for future, more updated installation instructions would be useful. "
İs it possible to start autoware without drive by wire ?,D_kwDOAnasMc4ATQt0,2023-04-05T21:34:24Z,Hensbag,1,Answered,,,
İs it possible to start autoware without drive by wire ?,D_kwDOAnasMc4ATQt0,2023-04-05T21:34:24Z,Hensbag,1,Answered,DC_kwDOAnasMc4AVIgH,maxime-clem,"I think you need to create a custom `VehicleInterface` (see https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-architecture/vehicle/) that receives the Autoware control commands and then actuates your vehicle. This interface also needs to provide some feedback to Autoware (odometry, steering angle, etc).
This corresponds to implementing your own DBW system so that your vehicle can be controlled by Autoware.
I think you can find some people's experience with similar projects online (e.g., https://wilselby.com/diy-autonomous-vehicle-project/drive-wire-development/)."
slower performance with awsim,D_kwDOAnasMc4ATQwe,2023-04-05T23:09:44Z,zillur-av,1,Answered,,,
slower performance with awsim,D_kwDOAnasMc4ATQwe,2023-04-05T23:09:44Z,zillur-av,1,Answered,DC_kwDOAnasMc4AVK0O,maxime-clem,"The main issue seems to be that AWSIM must use some swap memory, which is VERY slow.
Do you have other processes running that are using a lot of memory ? If so, try to close them before starting AWSIM so that there is no need to use the swap.
Additionally, your CPU is being used at near 100%, which can cause slowdown. You can reduce the simulation speed (""Time Scale"") to get a nicer (but not real-time) experience."
slower performance with awsim,D_kwDOAnasMc4ATQwe,2023-04-05T23:09:44Z,zillur-av,1,Answered,DC_kwDOAnasMc4AVMdc,zillur-av,"> The main issue seems to be that AWSIM must use some swap memory, which is VERY slow. Do you have other processes running that are using a lot of memory ? If so, try to close them before starting AWSIM so that there is no need to use the swap. Additionally, your CPU is being used at near 100%, which can cause slowdown. You can reduce the simulation speed (""Time Scale"") to get a nicer (but not real-time) experience.

Thanks. After lowering time scale, it is working better. It seems autoware perception module uses a large portion of RAM. "
Open AD Kit Working Group Meeting 6/4/23,D_kwDOAnasMc4ATRQL,2023-04-06T12:23:26Z,HamburgDave,0,Unanswered,,,
The output frequency of  occupancy_grid_map_outlier_filter  is abnormal,D_kwDOAnasMc4ATSI-,2023-04-07T08:36:22Z,beginningfan,1,Answered,,,
The output frequency of  occupancy_grid_map_outlier_filter  is abnormal,D_kwDOAnasMc4ATSI-,2023-04-07T08:36:22Z,beginningfan,1,Answered,DC_kwDOAnasMc4AVLrD,maxime-clem,"It is hard to say what is the problem without more information.
Here are things you can check:
- make sure you built everything in `RELEASE` mode;
- check if the `occupancy_grid_map_outlier_filter` uses too much memory or CPU;
- check if your RAM is full and if swap is being used;
- rebuild everything from scratch (`rm -rf build install`)."
The output frequency of  occupancy_grid_map_outlier_filter  is abnormal,D_kwDOAnasMc4ATSI-,2023-04-07T08:36:22Z,beginningfan,1,Answered,DC_kwDOAnasMc4AVPKS,beginningfan,"Thank you, it is indeed due to the CPU.
This time I only ran this node, which has filled up one CPU core(my cpu is i7-11800h). 
![2023-04-10_09-49](https://user-images.githubusercontent.com/103237402/230812428-173ad441-7273-4282-a367-03311fbdd624.png)
Why does it need so many CPU?

"
The output frequency of  occupancy_grid_map_outlier_filter  is abnormal,D_kwDOAnasMc4ATSI-,2023-04-07T08:36:22Z,beginningfan,1,Answered,DC_kwDOAnasMc4AVPKg,maxime-clem,"Have you tried to rebuild that module ?
```
rm -rf build/occupancy_grid_map_outlier_filter install/occupancy_grid_map_outlier_filter 
colcon build --cmake-args -DCMAKE_BUILD_TYPE=Release --symlink-install --packages-select occupancy_grid_map_outlier_filter
```
If the issue persists, can you record a ros bag with the inputs sent to the `occupancy_grid_map_outlier_filter` ? This way I can try to reproduce the issue locally."
The output frequency of  occupancy_grid_map_outlier_filter  is abnormal,D_kwDOAnasMc4ATSI-,2023-04-07T08:36:22Z,beginningfan,1,Answered,DC_kwDOAnasMc4AVPMc,beginningfan,"Yes, I did. And this is my bag
[rosbag2_2023_04_10-10_43_38.zip](https://github.com/autowarefoundation/autoware/files/11187263/rosbag2_2023_04_10-10_43_38.zip)
"
The output frequency of  occupancy_grid_map_outlier_filter  is abnormal,D_kwDOAnasMc4ATSI-,2023-04-07T08:36:22Z,beginningfan,1,Answered,DC_kwDOAnasMc4AVPis,maxime-clem,"Thank you for sharing the bag.
I am replaying your bag.
```
ros2 bag play rosbag2_2023_04_10-10_43_38_0.db3  --remap /perception/obstacle_segmentation/single_frame/pointcloud_raw:=/OccupancyGridMapOutlierFilter/input/pointcloud /perception/occupancy_grid_map/map:=/OccupancyGridMapOutlierFilter/input/occupancy_grid_map --loop
```
I am publishing a static transform between `map` and `base_link`.
```
ros2 run tf2_ros static_transform_publisher 0 0 0 0 0 0 map base_link
```
I am running the `occupancy_grid_map_outlier_filter`.
```
./install/occupancy_grid_map_outlier_filter/lib/occupancy_grid_map_outlier_filter/occupancy_grid_map_outlier_filter_node
```
I am running Rviz, visualizing the input and output of the `occupancy_grid_map_outlier_filter` (pointcloud topics set `Reliability Policy: Best Effort`).
![image](https://user-images.githubusercontent.com/78338830/230854310-e8571c8a-3da4-42a6-89b8-49428e18cadb.png)

I do get some warnings but I think the node is working since the output is a subset of the input pointcloud.
```
[WARN] [1681113331.115032149] [OccupancyGridMapOutlierFilterComponent]: Skip outlier filter since too much low_confidence pointcloud!
```

At most, the node uses 2% of 1 core of my Ryzen 5600X.
![image](https://user-images.githubusercontent.com/78338830/230854572-752c3d4e-edb1-4fa0-bced-0af259a6c6bb.png)

The output rate is a stable 10Hz.
```
▶ ros2 topic hz /OccupancyGridMapOutlierFilter/output/pointcloud
average rate: 9.966
	min: 0.086s max: 0.112s std dev: 0.00584s window: 11
average rate: 10.008
	min: 0.086s max: 0.115s std dev: 0.00673s window: 22
average rate: 9.680
	min: 0.086s max: 0.200s std dev: 0.01861s window: 31
average rate: 9.763
	min: 0.086s max: 0.200s std dev: 0.01687s window: 42
average rate: 9.807
	min: 0.086s max: 0.200s std dev: 0.01525s window: 52
average rate: 9.837
	min: 0.086s max: 0.200s std dev: 0.01401s window: 62
average rate: 9.994
	min: 0.001s max: 0.200s std dev: 0.01784s window: 73
```

So there does not seem to be any issue with the inputs and I cannot reproduce the performance issue.
If this is not a build issue on your side (e.g., built in `DEBUG` instead of `RELEASE`), I am not sure what could be the issue. What CPU are you using ?"
The output frequency of  occupancy_grid_map_outlier_filter  is abnormal,D_kwDOAnasMc4ATSI-,2023-04-07T08:36:22Z,beginningfan,1,Answered,DC_kwDOAnasMc4AVPmi,beginningfan,"It is so werid
![2023-04-10_16-34](https://user-images.githubusercontent.com/103237402/230865626-e00a7769-1f4b-4985-b1e1-b7d4287904ff.png)
I rebuilt it, and nothing changed.
![2023-04-10_16-35](https://user-images.githubusercontent.com/103237402/230865725-7e60a323-1e72-4e4b-8d33-67a2b97bc9d3.png)
My CPU is i7-11800h"
The output frequency of  occupancy_grid_map_outlier_filter  is abnormal,D_kwDOAnasMc4ATSI-,2023-04-07T08:36:22Z,beginningfan,1,Answered,DC_kwDOAnasMc4AVPoA,beginningfan,"I got the same result on another computer with a CPU of i7-9700E

![2023-04-10_16-53](https://user-images.githubusercontent.com/103237402/230869046-2f3137de-f9ab-4ec0-91d8-940388d4b144.png)

![2023-04-10_16-54](https://user-images.githubusercontent.com/103237402/230869074-d597f23e-8387-4af3-9003-42bc4209754f.png)
"
The output frequency of  occupancy_grid_map_outlier_filter  is abnormal,D_kwDOAnasMc4ATSI-,2023-04-07T08:36:22Z,beginningfan,1,Answered,DC_kwDOAnasMc4AVPom,maxime-clem,"I will try to test on another computer when I get the time.
Is it possible that my way to reproduce the issue is wrong ? Are you testing using the same bag you shared ?"
The output frequency of  occupancy_grid_map_outlier_filter  is abnormal,D_kwDOAnasMc4ATSI-,2023-04-07T08:36:22Z,beginningfan,1,Answered,DC_kwDOAnasMc4AVPrD,beginningfan,"Maybe it's my fault. I downloaded a prebuild docker image, and got the same result as yours.
But the only difference is how to build. I have built it in release mode, how can that be?"
The output frequency of  occupancy_grid_map_outlier_filter  is abnormal,D_kwDOAnasMc4ATSI-,2023-04-07T08:36:22Z,beginningfan,1,Answered,DC_kwDOAnasMc4AVRLn,maxime-clem,"This is very strange. Are you using the latest version of autoware ? If not please update `autoware.universe` and rebuild the `occupancy_grid_map_outlier_filter` to see if it makes a difference.
Otherwise, please check the content of `build/occupancy_grid_map_outlier_filter/cmake_args.last` and confirm the `-DCMAKE_BUILD_TYPE`."
The output frequency of  occupancy_grid_map_outlier_filter  is abnormal,D_kwDOAnasMc4ATSI-,2023-04-07T08:36:22Z,beginningfan,1,Answered,DC_kwDOAnasMc4AVRaA,beginningfan,Thank you very much! I updated the code and it works!
2023-04-10 ODD working group weekly meeting (137),D_kwDOAnasMc4ATUgj,2023-04-10T05:42:54Z,Igata-ctrl,0,Unanswered,,,
Software WG Meeting 2023/04/11,D_kwDOAnasMc4ATUpd,2023-04-10T08:43:52Z,mitsudome-r,0,Unanswered,,,
Building ROS2 Humble on Ubuntu 20.04,D_kwDOAnasMc4ATVAN,2023-04-10T13:50:05Z,Croquembouche,1,Answered,,,
Building ROS2 Humble on Ubuntu 20.04,D_kwDOAnasMc4ATVAN,2023-04-10T13:50:05Z,Croquembouche,1,Answered,DC_kwDOAnasMc4AXZL9,sahapratik5656,"Hi @Croquembouche ,
I am trying to install Ros 2 Humble in ubuntu 20.04

But there is an **error when its building the packages.** at the end its aborting all the building process. 

############
**--- stderr: rcutils                                                                                                            
Traceback (most recent call last):
  File ""<string>"", line 1, in <module>
AttributeError: module 'em' has no attribute 'invoke'
make[2]: *** [CMakeFiles/rcutils.dir/build.make:64: include/rcutils/logging_macros.h] Error 1
make[1]: *** [CMakeFiles/Makefile2:843: CMakeFiles/rcutils.dir/all] Error 2
make[1]: *** Waiting for unfinished jobs....
make: *** [Makefile:141: all] Error 2
---
Failed   <<< rcutils [10.2s, exited with code 2]
Aborted  <<< urdfdom [16.3s]                                                                                                              
Aborted  <<< orocos_kdl_vendor [2min 15s]**
#############

I'm following official documentation
Can you please provide any solution on top of this.

Thanks in advance. "
Building ROS2 Humble on Ubuntu 20.04,D_kwDOAnasMc4ATVAN,2023-04-10T13:50:05Z,Croquembouche,1,Answered,DC_kwDOAnasMc4AXeV2,Croquembouche,can you include more log files please?
"Define ""hatched road markings"" in Lanelet2",D_kwDOAnasMc4ATVrM,2023-04-11T02:56:35Z,takayuki5168,4,Answered,,,
"Define ""hatched road markings"" in Lanelet2",D_kwDOAnasMc4ATVrM,2023-04-11T02:56:35Z,takayuki5168,4,Answered,DC_kwDOAnasMc4AVRR7,takayuki5168,"@xmfcx @mehmetdogru cc @TakaHoribe 
Do you have any opinions on this discussion?"
"Define ""hatched road markings"" in Lanelet2",D_kwDOAnasMc4ATVrM,2023-04-11T02:56:35Z,takayuki5168,4,Answered,DC_kwDOAnasMc4AVRR_,takayuki5168,"If it looks good, I will start to implement this feature."
"Define ""hatched road markings"" in Lanelet2",D_kwDOAnasMc4ATVrM,2023-04-11T02:56:35Z,takayuki5168,4,Answered,DC_kwDOAnasMc4AVRtW,takayuki5168,cc @satoshi-ota 
"Define ""hatched road markings"" in Lanelet2",D_kwDOAnasMc4ATVrM,2023-04-11T02:56:35Z,takayuki5168,4,Answered,DC_kwDOAnasMc4AVSEJ,mehmetdogru,"Technically I am on the side of annotating every meaningful information, so that we would define the most proper behaviors for ego. That being said, I think to annotate hatched road markings is a good idea to be able to interpret this space in the best way.

IMO annotating hatched road markings as an area makes more sense but at the same time doing it as a lanelet will make things less complicated for the purpose. Do you think it is not possible at the moment to annotate as an area and do the necessary and most probably heavier changes in bpp-avoidance module?"
"Define ""hatched road markings"" in Lanelet2",D_kwDOAnasMc4ATVrM,2023-04-11T02:56:35Z,takayuki5168,4,Answered,DC_kwDOAnasMc4AVS9b,takayuki5168,"@mehmetdogru Thank you for the comment.

The road marking I want to add is (I think) always **along the specific lane** at least in Japan, so I think it's better to define it as a lanelet. This kind of lane is called 導流帯 in Japanese. I'm not sure what it is called in English or even whether this type of lane exists in countries except for Japan.
https://ja.wikipedia.org/wiki/%E5%B0%8E%E6%B5%81%E5%B8%AF

If ""hatched road marking"" is used for some purposes and one of them is the lanes I mentioned, I can use not ""hatched road marking"" which is just a shape pattern name but a more detailed name which I said 導流帯 in Japanese.

Do you think this kind of lanes with ""hatched road marking"" described by the above link exist in countries except for Japan?

> Do you think it is not possible at the moment to annotate as an area and do the necessary and most probably heavier changes in bpp-avoidance module?

I think it's possible. But as you said, the implementation will be much heavier."
"Define ""hatched road markings"" in Lanelet2",D_kwDOAnasMc4ATVrM,2023-04-11T02:56:35Z,takayuki5168,4,Answered,DC_kwDOAnasMc4AVUxT,mehmetdogru,"@takayuki5168 Yes we have them in Turkey as well, I guess they are used for the similar purposes. We shouldn't be really driving on these markings (at least in Turkey it is forbidden) and they have rather weird shapes unlike road shoulders. I guess these are the reasons why annotating them as areas (polygons) makes more sense to me.

So also I am curious that if in Japan any vehicle is allowed drive on those markings/lanes?"
"Define ""hatched road markings"" in Lanelet2",D_kwDOAnasMc4ATVrM,2023-04-11T02:56:35Z,takayuki5168,4,Answered,DC_kwDOAnasMc4AVWzi,takayuki5168,"@mehmetdogru In Japan, the lane is for guiding vehicle traffic safely and smoothly, so it is **allowed to go into the lane**.
Most people sometimes use the lane, especially to avoidance of the opposite lane's obstacles or to take a small shortcut.

It seems the lane's rule is different depending on the country."
"Define ""hatched road markings"" in Lanelet2",D_kwDOAnasMc4ATVrM,2023-04-11T02:56:35Z,takayuki5168,4,Answered,DC_kwDOAnasMc4AVW2w,takayuki5168,"Could you give me images of this kind of lanes in Turky so that my understanding won't be wrong?

The images in Japan are as follows.
https://ja.wikipedia.org/wiki/%E5%B0%8E%E6%B5%81%E5%B8%AF
https://carview.yahoo.co.jp/news/detail/d260c82323cc7238dc01c9444d4d6f523c4adcb1/
https://whisky-coke.hatenablog.com/entry/2021/07/26/165402
https://kazaha7.com/town/?p=4656"
"Define ""hatched road markings"" in Lanelet2",D_kwDOAnasMc4ATVrM,2023-04-11T02:56:35Z,takayuki5168,4,Answered,DC_kwDOAnasMc4AVXeM,mehmetdogru,"Sure. Here are some examples:

- https://uym.ibb.gov.tr/kurumsal/haberler-ve-duyurular/ofset-tarama-elektronik-denetleme-sistemi-1
- http://www.ozgurlertrafik.com.tr/tr-TR/karayollari-2-bolge/58/ReferencesPage.aspx

![1-54](https://user-images.githubusercontent.com/48479081/231691460-b4db6089-bd4d-4b44-9a38-03574099b5f1.jpg)
![delinator-uygulamasi-1](https://user-images.githubusercontent.com/48479081/231691468-c0816a7d-e93b-4ace-97f3-ea9a8fb6a492.jpg)
![13042018154259877](https://user-images.githubusercontent.com/48479081/231691471-683e2078-800f-4aaa-8fea-221901aef714.jpg)

![ofset-tarama-ihlali-nedir](https://user-images.githubusercontent.com/48479081/231691472-deac93d9-792f-46f0-98e0-47fab34c2fd2.jpg)
![refujEDS-4](https://user-images.githubusercontent.com/48479081/231691476-49438d57-3975-430c-a187-4fe78fbc702a.jpg)
"
"Define ""hatched road markings"" in Lanelet2",D_kwDOAnasMc4ATVrM,2023-04-11T02:56:35Z,takayuki5168,4,Answered,DC_kwDOAnasMc4AVYqU,takayuki5168,"Thank you so much. I found that lanes with hatched markings are almost the same as Japanese ones.

According to the Japanese traffic law, it seems that in all of the above cases, it's okay to drive on. I'm surprised that even in the above first case for the left turn, it is forbidden to drive on in Turkey.
Anyway, this difference is fine by just preparing the flag like `enable_driving_on_hatched_markings`.

Then we can get back to the discussion regarding which to use, lanelet or area.
Let me discuss it and how much complicated the implementation will be when using an area, with Planning&Control members at TIER IV first."
"Define ""hatched road markings"" in Lanelet2",D_kwDOAnasMc4ATVrM,2023-04-11T02:56:35Z,takayuki5168,4,Answered,DC_kwDOAnasMc4AVfAK,TakaHoribe,"@takayuki5168 Thank you for the suggestion. I agree with adding the new load mark.

Regarding its type, as @mehmetdogru mentioned, the zone may have a complex shape in some cases, so I would suggest defining them in areas. Additionally, it would be helpful to connect the area to a lanelet using a `tag` or something, making it easier to find the area.

---

From a platform perspective, I have some comments, although they are not critical for this discussion. Firstly, map compatibility is important, so we should make sure that Autoware works correctly even if this road mark is not defined on the map.

Moreover, since not everyone can create highly accurate maps with all road markers, such as individual researchers, we will need an alternative way to express the drivable area more simply, such as with a large polygon, in the future. It is up to the user to decide whether to use a well-generated map with detailed information or a rough set of ""drivable area"", but we must ensure that this ""hatched road markings"" definition is not exclusive."
"Define ""hatched road markings"" in Lanelet2",D_kwDOAnasMc4ATVrM,2023-04-11T02:56:35Z,takayuki5168,4,Answered,DC_kwDOAnasMc4AVf_M,takayuki5168,"Thank you for your comment. Got it.

@mehmetdogru @TakaHoribe 
I will create a lanelet map with **an area** whose name is ""hatched_road_markings"" and try to implement drivable area expansion algorithm considering this area."
"Define ""hatched road markings"" in Lanelet2",D_kwDOAnasMc4ATVrM,2023-04-11T02:56:35Z,takayuki5168,4,Answered,DC_kwDOAnasMc4AWBZS,takayuki5168,"@mehmetdogru @TakaHoribe 
Just sharing.

I created a map that has an area of hatched road markings as a **Polygon** which is one of the primitives defined in Lanelet2. Polygon is used for detection area, no stopping area, etc as well. I will make this map public later.

Then I implemented a logic to expand the drivable area with the area of hatched road markings as follows.
https://github.com/autowarefoundation/autoware.universe/pull/3604"
"Define ""hatched road markings"" in Lanelet2",D_kwDOAnasMc4ATVrM,2023-04-11T02:56:35Z,takayuki5168,4,Answered,DC_kwDOAnasMc4AXOCK,takayuki5168,"The drivable area expansion and avoidance path planning utilizing the area of hatched road markings have been implemented.
This feature can be enabled with this flag which is false by default. https://github.com/autowarefoundation/autoware_launch/blob/ae2700a6a878eb240283f77ba5647937c7c19722/autoware_launch/config/planning/scenario_planning/lane_driving/behavior_planning/behavior_path_planner/avoidance/avoidance.param.yaml#L21

This is the last PR for the minor bug fix. https://github.com/autowarefoundation/autoware.universe/pull/3900

I close the discussion.
cc @TakaHoribe @mehmetdogru "
"Define ""hatched road markings"" in Lanelet2",D_kwDOAnasMc4ATVrM,2023-04-11T02:56:35Z,takayuki5168,4,Answered,DC_kwDOAnasMc4AYgI9,takayuki5168,"@mehmetdogru cc @satoshi-ota @TakaHoribe 
For TIER IV's internal regression test by the scenario test of avoidance with hatched road makings, and achieving a wider range of behaviors by default, we are going to enable the flag `use_hatched_road_markings`.
We will add documentation so that the users will notice that the flag should be set to false in a certain country.

https://github.com/autowarefoundation/autoware_launch/blob/ae2700a6a878eb240283f77ba5647937c7c19722/autoware_launch/config/planning/scenario_planning/lane_driving/behavior_planning/behavior_path_planner/avoidance/avoidance.param.yaml#L21"
"Define ""hatched road markings"" in Lanelet2",D_kwDOAnasMc4ATVrM,2023-04-11T02:56:35Z,takayuki5168,4,Answered,DC_kwDOAnasMc4AYigK,satoshi-ota,"Hi @mehmetdogru 
I enabled flag `use_hatched_road_marking` in https://github.com/autowarefoundation/autoware_launch/pull/448.
So, please disable this flag in your project launch config files if necessary."
"Define ""hatched road markings"" in Lanelet2",D_kwDOAnasMc4ATVrM,2023-04-11T02:56:35Z,takayuki5168,4,Answered,DC_kwDOAnasMc4AYjG0,mehmetdogru,"Thank you @satoshi-ota!

cc: @beyzanurkaya @brkay54 "
Can't use object recognition.,D_kwDOAnasMc4ATV8g,2023-04-11T07:03:05Z,Hensbag,2,Answered,,,
Can't use object recognition.,D_kwDOAnasMc4ATV8g,2023-04-11T07:03:05Z,Hensbag,2,Answered,DC_kwDOAnasMc4AVRuG,liuXinGangChina,"This issue is mainly about model based perception.
[beginningfan](https://github.com/beginningfan) please leave your idea here"
Can't use object recognition.,D_kwDOAnasMc4ATV8g,2023-04-11T07:03:05Z,Hensbag,2,Answered,DC_kwDOAnasMc4AVRwo,beginningfan,"Which perception_mode you using now? 
Default mode is ""lidar"" in autoware_launch.launch.xml, then you need to check  the output of lidar_apollo_instance_segmentation or lidar_centerpoint,which depends on what lidar_detection_model you are using.
If it's camera_lidar_fusion, you should check weather the camera has given the correct results. Lidar_apollo_instance_segmentation or lidar_centerpoint also should give semantic information in this mode."
The path of avoidance obstacle is out of driveable area in some scenarios,D_kwDOAnasMc4ATXIS,2023-04-12T06:21:27Z,shulanbushangshu,2,Answered,,,
The path of avoidance obstacle is out of driveable area in some scenarios,D_kwDOAnasMc4ATXIS,2023-04-12T06:21:27Z,shulanbushangshu,2,Answered,DC_kwDOAnasMc4AVW0c,takayuki5168,"@shulanbushangshu 
This was fixed and merged into the main branch a few weeks ago by modifying and tuning obstacle_avoidance_planner as follows.
![image](https://user-images.githubusercontent.com/20228327/231615648-8931656f-b846-4b1f-a403-39009ab151d6.png)
"
The path of avoidance obstacle is out of driveable area in some scenarios,D_kwDOAnasMc4ATXIS,2023-04-12T06:21:27Z,shulanbushangshu,2,Answered,DC_kwDOAnasMc4AVXA2,shulanbushangshu," Yes,I update the code to the newest code.It is fixed:
![Screenshot from 2023-04-13 10-50-40](https://user-images.githubusercontent.com/102840938/231636360-0cbe761c-c5f9-4a04-8add-dcfac7c945d3.png)
"
Pointcloud map cleaning task,D_kwDOAnasMc4ATXS3,2023-04-12T08:44:15Z,davutcanakbas,4,Answered,,,
Pointcloud map cleaning task,D_kwDOAnasMc4ATXS3,2023-04-12T08:44:15Z,davutcanakbas,4,Answered,DC_kwDOAnasMc4AVVFU,n-patiphon,"Thank you for volunteering to do the task!

As I already mentioned in the Mapping WG, I believe that noise removal can be performed offline. This would likely be easier for you, as you wouldn't have to work under strict time constraints as you would with online processing. 

Also, just to get you started. I think this project might be of your interest. https://github.com/LimHyungTae/ERASOR"
Pointcloud map cleaning task,D_kwDOAnasMc4ATXS3,2023-04-12T08:44:15Z,davutcanakbas,4,Answered,DC_kwDOAnasMc4AV3W4,davutcanakbas,"In fact, it can be done both ways. As we talked about at the meeting, there are advantages and disadvantages, we can make it applicable parametrically for offline at the conclusion stage."
Pointcloud map cleaning task,D_kwDOAnasMc4ATXS3,2023-04-12T08:44:15Z,davutcanakbas,4,Answered,DC_kwDOAnasMc4AVkbD,yvzksgl,"I wish you success and ease in your task. 

We have a project that has similar purpose to yours. Main idea is using public perception models to detect objects, then removing the points of detected objects from Point Cloud data object publish it to the any SLAM algortihm. We have made some progress and we will be happy from exchanging views. Lasty, https://github.com/autowarefoundation/autoware.universe/tree/main/perception/lidar_apollo_instance_segmentation this model used in our project in case you may want to look at it."
Pointcloud map cleaning task,D_kwDOAnasMc4ATXS3,2023-04-12T08:44:15Z,davutcanakbas,4,Answered,DC_kwDOAnasMc4AXjYz,davutcanakbas,"Here are the task list and current status:

- [x]  Prepare the System and get the requirement
- [x] Data Collection 
- [x] Prepare Launch of needed nodes
- [x] Subscribe to topics and make them synced
- [x] Visualize the objects in rviz to validate
- [x] Identify dynamic objects
- [ ] Apply object removing techniques (In progress)
- [ ] Publish the cleaned, static point cloud data (In progress)
- [ ] Fine-tuning and documentation


![validate_object](https://github.com/autowarefoundation/autoware/assets/62181358/c28bae32-89f3-4f78-bf81-886ae3b07a90)

Current Status(05.07.2023):
There is only one bug. I know what causes the bug it's about the calculation equation of orientation. I am trying to fix it.

![1_dor](https://github.com/autowarefoundation/autoware/assets/62181358/db94f2b7-3b87-477e-9cb5-2c10af7a76db)


![2_dor_orientation_bug](https://github.com/autowarefoundation/autoware/assets/62181358/6e4e5d6f-252a-4b6c-89fd-5141c9c353a3)

![3_dor_orintation_bug](https://github.com/autowarefoundation/autoware/assets/62181358/b0e932b1-ae41-4051-b9bc-a810d7786eda)


![example_usage_with_hdl_red_with_dor_off_ground_and_blue_without_dor_off_ground](https://github.com/autowarefoundation/autoware/assets/62181358/659873a3-adad-47ab-a5d1-3402f6851c25)


"
Pointcloud map cleaning task,D_kwDOAnasMc4ATXS3,2023-04-12T08:44:15Z,davutcanakbas,4,Answered,DC_kwDOAnasMc4AYvw2,davutcanakbas,"Here are the task list and current status:

- [x]  Prepare the System and get the requirement
- [x] Data Collection 
- [x] Prepare Launch of needed nodes
- [x] Subscribe to topics and make them synced
- [x] Visualize the objects in rviz to validate
- [x] Identify dynamic objects
- [x] Apply object removing techniques
- [x] Publish the cleaned, static point cloud data
- [ ] Fine-tuning and documentation (In progress)
- [ ] Autoware.universe implementation (in progress) 


![validate_object](https://github.com/autowarefoundation/autoware/assets/62181358/c28bae32-89f3-4f78-bf81-886ae3b07a90)

Current Status(05.07.2023):
There is only one bug. I know what causes the bug it's about the calculation equation of orientation. I am trying to fix it.

![1_dor](https://github.com/autowarefoundation/autoware/assets/62181358/db94f2b7-3b87-477e-9cb5-2c10af7a76db)


![2_dor_orientation_bug](https://github.com/autowarefoundation/autoware/assets/62181358/6e4e5d6f-252a-4b6c-89fd-5141c9c353a3)

![3_dor_orintation_bug](https://github.com/autowarefoundation/autoware/assets/62181358/b0e932b1-ae41-4051-b9bc-a810d7786eda)


![example_usage_with_hdl_red_with_dor_off_ground_and_blue_without_dor_off_ground](https://github.com/autowarefoundation/autoware/assets/62181358/659873a3-adad-47ab-a5d1-3402f6851c25)

Current Status(19.07.2023):
Orientation bug fixed: https://drive.google.com/drive/folders/1MmtmzEnq4ADh_MolT7fJH2jW2t0Bxnk_?usp=sharing

![image](https://github.com/autowarefoundation/autoware/assets/62181358/1d006bb8-5c72-4696-bc0e-86e082320fbe)




"
2023-04-12 Simulation Working group Meeting,D_kwDOAnasMc4ATXTT,2023-04-12T08:47:29Z,WJaworskiRobotec,0,Unanswered,,,
Handling Bi-directional Lanelets,D_kwDOAnasMc4ATXoh,2023-04-12T13:50:41Z,ahmeddesokyebrahim,2,Answered,,,
Handling Bi-directional Lanelets,D_kwDOAnasMc4ATXoh,2023-04-12T13:50:41Z,ahmeddesokyebrahim,2,Answered,DC_kwDOAnasMc4AVXTK,mehmetdogru,"@ahmeddesokyebrahim Actually I don't remember us having problem about orientation or routing regarding this topic. IMO drawbacks of handling bi-directional lanelets by annotating as overlapping lanes are:

- We don't regard if any vehicle will be coming towards us since we are in different lanelets
- Harder to annotate
- More complex HD-Map"
Handling Bi-directional Lanelets,D_kwDOAnasMc4ATXoh,2023-04-12T13:50:41Z,ahmeddesokyebrahim,2,Answered,DC_kwDOAnasMc4AVXdE,TakaHoribe,"@ahmeddesokyebrahim Still, Autoware only supports the one-directional lane, but I also hope Autoware will support bi-directional lanes.

About the overlapping approach,

> I remember it having problems with path planning since it's two lanes overlapping and was not able to figure out which lane it was on or which lane it should go to when given a destination.

Some problems with overlapping lanes have recently been resolved (this is not about overlapping like bi-directional, but about crossing paths though). 
https://github.com/autowarefoundation/autoware.universe/pull/2451

However, still have problems with route planning in mission_planner. Please let us know more details If there are issues in path planning for an overlapped lane."
"State stuck in ""PLANNING"" in rviz",D_kwDOAnasMc4ATX_r,2023-04-12T17:57:24Z,gurselturkeri,1,Answered,,,
"State stuck in ""PLANNING"" in rviz",D_kwDOAnasMc4ATX_r,2023-04-12T17:57:24Z,gurselturkeri,1,Answered,DC_kwDOAnasMc4AVXVe,TakaHoribe,"@gurselturkeri Which hash do you use? Can you drive with `planning_simulator`?

After `PLANNING`, it should go to the `WAIT_FOR_ENGAGE` state. From the code, `is_autonomous_mode_available = False` prevents the transition.
https://github.com/autowarefoundation/autoware.universe/blob/galactic/system/default_ad_api/src/compatibility/autoware_state.cpp#L113-L116

You can first check if the `is_autonomous_mode_available` is true in the `/api/operation_mode/state` topic, and if it is not true, check the cause of it. The debug topic: `/control/operation_mode_transition_manager/debug_info` could be helpful.

If you can drive in the `planning_simulator`, then some problems could be in the vehicle interface, for example, required topics are not published, etc."
DevOps Dojo: ROS Node Launch - Pain Points and Improvements,D_kwDOAnasMc4ATYZz,2023-04-13T02:30:55Z,kaspermeck-arm,2,Answered,,,
DevOps Dojo: ROS Node Launch - Pain Points and Improvements,D_kwDOAnasMc4ATYZz,2023-04-13T02:30:55Z,kaspermeck-arm,2,Answered,DC_kwDOAnasMc4AVZ49,maxime-clem,"To me the main pain point is that the launch system of Autoware is very complex with many launch files located in many different directories and with references to many parameter files that are also spread in different directories and repositories.
I am not sure if this system can be simplified. Autoware is very complex so it is to be expected that the launch system is complex as well.

What I believe could be very helpful is a GUI tool to visualize and edit launch files. This would probably require a significant engineering effort but may be worth it to make Autoware easier to use."
DevOps Dojo: ROS Node Launch - Pain Points and Improvements,D_kwDOAnasMc4ATYZz,2023-04-13T02:30:55Z,kaspermeck-arm,2,Answered,DC_kwDOAnasMc4AVZ5k,maxime-clem,"To make the idea more clear, here is what I imagine the GUI would allow:
- Visualize the nodes launched and how their topics connect to other nodes.
  - This could be visualized nicely with a [node graph](https://raw.githubusercontent.com/jchanvfx/NodeGraphQt/master/docs/_images/screenshot.png).
- Select the parameter files used by a node (or group of nodes).
- Once launched, a node turns red in the GUI when it crashes and clicking on it opens its log to easily see its error message."
DevOps Dojo: ROS Node Launch - Pain Points and Improvements,D_kwDOAnasMc4ATYZz,2023-04-13T02:30:55Z,kaspermeck-arm,2,Answered,DC_kwDOAnasMc4AVdB2,doganulus,"I think we must first count parameter file duplication in node directories and the `autoware_launch` repo as a pain point. This issue has come up several times during the previous dojo when we are studying parameters. And I have listed some issues I am aware of about the topic:

- https://github.com/autowarefoundation/autoware_launch/issues/66
- https://github.com/autowarefoundation/autoware_launch/issues/201
- https://github.com/autowarefoundation/autoware.universe/issues/2695

I believe the current system can be simplified if we aim for a mechanism to override parameter values across node, component, (hopefully container), and system levels. Such a hierarchy is very much needed to cope with the complexity of the task. 

So I want to bring up the lack of hierarchical parameter loading at launch as an important deficiency for the ROS ecosystem."
Planning&Control WG Meeting 2023/04/13,D_kwDOAnasMc4ATYna,2023-04-13T07:02:25Z,mehmetdogru,2,Answered,,,
Planning&Control WG Meeting 2023/04/13,D_kwDOAnasMc4ATYna,2023-04-13T07:02:25Z,mehmetdogru,2,Answered,DC_kwDOAnasMc4AVXu1,TakaHoribe,"@mehmetdogru Thank you for the minutes.

> New feature proposals - [presentation](https://docs.google.com/presentation/d/19-1AR9jhKf8LK81wc9faVNqfyXt65bcimwajM3k8EyQ/edit?usp=sharing) (LeoDrive)

This looks very interesting. Do you have a kind of milestone or timeline you are thinking of? I'd like to know a rough expectation of the development timeline for these features."
Planning&Control WG Meeting 2023/04/13,D_kwDOAnasMc4ATYna,2023-04-13T07:02:25Z,mehmetdogru,2,Answered,DC_kwDOAnasMc4AVXxd,mehmetdogru,"Once I create the discussions & proposed solutions I will be also adding the rough timeline for the features, if it is ok for you to wait until then? :)"
Planning&Control WG Meeting 2023/04/13,D_kwDOAnasMc4ATYna,2023-04-13T07:02:25Z,mehmetdogru,2,Answered,DC_kwDOAnasMc4AVZ_3,TakaHoribe,Sure. Thank you!
Planning&Control WG Meeting 2023/04/13,D_kwDOAnasMc4ATYna,2023-04-13T07:02:25Z,mehmetdogru,2,Answered,DC_kwDOAnasMc4AVXyM,BonoloAWF,"1. Here is the Project for the Planning & Control WG: https://github.com/orgs/autowarefoundation/projects/22
2. Please update the Wiki here: https://github.com/autowarefoundation/autoware-projects/wiki/Autoware-Planning-Control-Working-Group - I've fixed the broken link to the meeting minutes"
Planning&Control WG Meeting 2023/04/13,D_kwDOAnasMc4ATYna,2023-04-13T07:02:25Z,mehmetdogru,2,Answered,DC_kwDOAnasMc4AVX8W,mehmetdogru,Thanks @BonoloAWF 
Open AD Kit Working Group Meeting 13/4/23,D_kwDOAnasMc4ATYxZ,2023-04-13T09:48:49Z,armaganarsln,0,Unanswered,,,
Why is there no tier4_vehicle_component.launch.xml in components of autoware_launch?,D_kwDOAnasMc4ATZuA,2023-04-14T07:09:16Z,asa-naki,1,Answered,,,
Why is there no tier4_vehicle_component.launch.xml in components of autoware_launch?,D_kwDOAnasMc4ATZuA,2023-04-14T07:09:16Z,asa-naki,1,Answered,DC_kwDOAnasMc4AVaSz,kenji-miyake,"I guess there is no specific reason.
@takayuki5168 Do you know something?"
Why are the autoware and autoware_launch repositories separate?,D_kwDOAnasMc4ATZ67,2023-04-14T10:10:15Z,SakodaShintaro,1,Answered,,,
Why are the autoware and autoware_launch repositories separate?,D_kwDOAnasMc4ATZ67,2023-04-14T10:10:15Z,SakodaShintaro,1,Answered,DC_kwDOAnasMc4AVawH,kenji-miyake,"@SakodaShintaro Good question.
I've proposed it before, but it wasn't approved due to concerns about following upstream. :cry: 
https://github.com/autowarefoundation/autoware_core_universe_prototype/pull/300"
Why are the autoware and autoware_launch repositories separate?,D_kwDOAnasMc4ATZ67,2023-04-14T10:10:15Z,SakodaShintaro,1,Answered,DC_kwDOAnasMc4AVa2f,SakodaShintaro,"Thank you. I hadn't noticed that such a PR had been submitted, which was due to my insufficient research. As for the reasons, I am generally convinced.

As an end user, I'm not sure how often I would want to keep up with the updates, but I do understand that there are various users with different needs.

Thank you very much for the information. I truly appreciate it."
Ego Vehicle Stuck on Planning Stage,D_kwDOAnasMc4ATaDr,2023-04-14T13:31:57Z,MarioAlmelaUMH,2,Answered,,,
Ego Vehicle Stuck on Planning Stage,D_kwDOAnasMc4ATaDr,2023-04-14T13:31:57Z,MarioAlmelaUMH,2,Answered,DC_kwDOAnasMc4AVev8,maxime-clem,">  [component_container-67] [INFO] [1681477473.921484725] [control.operation_mode_transition_manager]: Engage unavailable: closest point not found

This seems to be the issue and I believe it is caused by the vehicle being oriented perpendicular to the trajectory.
To find the current point along the trajectory, a limit on the yaw deviation is used. In the scene shown in your screenshot, it is normal that the vehicle cannot engage.

Please make sure that localization outputs a correct orientation and that the sensor calibration is correct (the orientation of the lidar may be off by 90 degrees)."
Ego Vehicle Stuck on Planning Stage,D_kwDOAnasMc4ATaDr,2023-04-14T13:31:57Z,MarioAlmelaUMH,2,Answered,DC_kwDOAnasMc4AViw6,MarioAlmelaUMH,"Thank you for your answer. I've been able to solve the planning issue. However, now the car is stuck on the Driving state, without moving at all.

![error](https://user-images.githubusercontent.com/119304913/232749757-0f00b097-a41b-45e9-a83c-93640feea956.png)

The console feed is as follows:

[system_error_monitor-21] [ERROR] [1681813313.271185302] [system_error_monitor /autoware/control/autonomous_driving/node_alive_monitoring]: [Single Point Fault]: Stale
[system_error_monitor-21] [ERROR] [1681813313.271231314] [system_error_monitor /autoware/control/autonomous_driving/node_alive_monitoring/topic_status/topic_state_monitor_control_command_control_cmd: control_topic_status]: [Single Point Fault]: OK
[system_error_monitor-21] [ERROR] [1681813313.271288988] [system_error_monitor /autoware/control/autonomous_driving/node_alive_monitoring/topic_status/topic_state_monitor_trajectory_follower_control_cmd: control_topic_status]: [Single Point Fault]: OK
[system_error_monitor-21] [ERROR] [1681813313.271309976] [system_error_monitor /autoware/localization/node_alive_monitoring]: [Single Point Fault]: Stale
[system_error_monitor-21] [ERROR] [1681813313.271324929] [system_error_monitor /autoware/localization/node_alive_monitoring/topic_status/topic_state_monitor_initialpose3d: localization_topic_status]: [Single Point Fault]: OK
[system_error_monitor-21] [ERROR] [1681813313.271340615] [system_error_monitor /autoware/localization/node_alive_monitoring/topic_status/topic_state_monitor_pose_twist_fusion_filter_pose: localization_topic_status]: [Single Point Fault]: OK
[system_error_monitor-21] [ERROR] [1681813313.271354164] [system_error_monitor /autoware/localization/node_alive_monitoring/topic_status/topic_state_monitor_transform_map_to_base_link: localization_topic_status]: [Single Point Fault]: OK
[system_error_monitor-21] [ERROR] [1681813313.271368169] [system_error_monitor /autoware/localization/performance_monitoring/localization_accuracy]: [Single Point Fault]: Stale
[system_error_monitor-21] [ERROR] [1681813313.271382727] [system_error_monitor /autoware/localization/performance_monitoring/localization_accuracy/localization_error_monitor: localization_accuracy]: [Single Point Fault]: ellipse size is within the expected range
[system_error_monitor-21] [ERROR] [1681813313.271397131] [system_error_monitor /autoware/localization/performance_monitoring/localization_accuracy/localization_error_monitor: localization_accuracy_lateral_direction]: [Single Point Fault]: ellipse size along lateral direction is within the expected range
[system_error_monitor-21] [ERROR] [1681813313.271413367] [system_error_monitor /autoware/map/node_alive_monitoring]: [Single Point Fault]: Stale
[system_error_monitor-21] [ERROR] [1681813313.271429396] [system_error_monitor /autoware/map/node_alive_monitoring/topic_status/topic_state_monitor_pointcloud_map: map_topic_status]: [Single Point Fault]: OK
[system_error_monitor-21] [ERROR] [1681813313.271439422] [system_error_monitor /autoware/map/node_alive_monitoring/topic_status/topic_state_monitor_vector_map: map_topic_status]: [Single Point Fault]: OK
[system_error_monitor-21] [ERROR] [1681813313.271450776] [system_error_monitor /autoware/perception/node_alive_monitoring]: [Single Point Fault]: Stale
[system_error_monitor-21] [ERROR] [1681813313.271460244] [system_error_monitor /autoware/perception/node_alive_monitoring/topic_status/topic_state_monitor_object_recognition_objects: perception_topic_status]: [Single Point Fault]: OK
[system_error_monitor-21] [ERROR] [1681813313.271469597] [system_error_monitor /autoware/perception/node_alive_monitoring/topic_status/topic_state_monitor_obstacle_segmentation_pointcloud: perception_topic_status]: [Single Point Fault]: OK
[system_error_monitor-21] [ERROR] [1681813313.271478462] [system_error_monitor /autoware/planning/node_alive_monitoring]: [Single Point Fault]: Stale
[system_error_monitor-21] [ERROR] [1681813313.271487355] [system_error_monitor /autoware/planning/node_alive_monitoring/topic_status/topic_state_monitor_mission_planning_route: planning_topic_status]: [Single Point Fault]: OK
[system_error_monitor-21] [ERROR] [1681813313.271496638] [system_error_monitor /autoware/planning/node_alive_monitoring/topic_status/topic_state_monitor_scenario_planning_trajectory: planning_topic_status]: [Single Point Fault]: OK
[system_error_monitor-21] [ERROR] [1681813313.271506140] [system_error_monitor /autoware/system/node_alive_monitoring]: [Single Point Fault]: Stale
[system_error_monitor-21] [ERROR] [1681813313.271515238] [system_error_monitor /autoware/system/node_alive_monitoring/topic_status/topic_state_monitor_system_emergency_control_cmd: system_topic_status]: [Single Point Fault]: OK
[system_error_monitor-21] [ERROR] [1681813313.271524322] [system_error_monitor /autoware/vehicle/node_alive_monitoring]: [Single Point Fault]: Stale
[system_error_monitor-21] [ERROR] [1681813313.271532725] [system_error_monitor /autoware/vehicle/node_alive_monitoring/topic_status/topic_state_monitor_vehicle_status_steering_status: vehicle_topic_status]: [Single Point Fault]: OK
[system_error_monitor-21] [ERROR] [1681813313.271541760] [system_error_monitor /autoware/vehicle/node_alive_monitoring/topic_status/topic_state_monitor_vehicle_status_velocity_status: vehicle_topic_status]: [Single Point Fault]: OK

Apparently, many nodes are becoming stale, but I don't know why.

Thanks in advance.
"
Ego Vehicle Stuck on Planning Stage,D_kwDOAnasMc4ATaDr,2023-04-14T13:31:57Z,MarioAlmelaUMH,2,Answered,DC_kwDOAnasMc4AVi1e,maxime-clem,"From the rviz screenshot it looks like a `surround obstacle`  is blocking Autoware from moving. This can be seen from the ""virtual wall"" and from the red trajectory (red = velocity of 0m/s).
I guess some pointcloud point is detected very close to the ego vehicle."
Ego Vehicle Stuck on Planning Stage,D_kwDOAnasMc4ATaDr,2023-04-14T13:31:57Z,MarioAlmelaUMH,2,Answered,DC_kwDOAnasMc4AVsQW,MarioAlmelaUMH,Thank for your answer. I've since then been able to make the vehicle move.
DevOps Dojo: ROS Node Configuration - ROS Node Parameter Coding Guidelines,D_kwDOAnasMc4ATag7,2023-04-14T20:23:53Z,kaspermeck-arm,1,Answered,,,
DevOps Dojo: ROS Node Configuration - ROS Node Parameter Coding Guidelines,D_kwDOAnasMc4ATag7,2023-04-14T20:23:53Z,kaspermeck-arm,1,Answered,DC_kwDOAnasMc4AV6G2,kaspermeck-arm,"Add:

## Launch parameter file
        Launch parameter files store the customized parameters for user's vehicle.
            For example, [the customized parameter of behavior_path_planner stored under autoware_launch](https://github.com/autowarefoundation/autoware_launch/tree/5fa613b9d80bf4f0db77efde03a43f7ede6bac86/autoware_launch/config)
        Launch parameter files are stored under autoware_launch.

to current proposal. Then it's complete."
Run multiple Autoware in Carla with Zenoh,D_kwDOAnasMc4ATbzt,2023-04-17T07:03:50Z,evshary,2,Answered,,,
Run multiple Autoware in Carla with Zenoh,D_kwDOAnasMc4ATbzt,2023-04-17T07:03:50Z,evshary,2,Answered,DC_kwDOAnasMc4AVwX9,VRichardJP,"> The key point here is that we can use one of Zenoh's feature ""[scope](https://github.com/eclipse-zenoh/zenoh-plugin-dds#running-several-robots-without-changing-the-ros2-configuration)"" to separate identical ROS topics in different Autoware. That's why we need Zenoh here.

Wouldn't it be possible to reproduce the same behavior with [ROS2 domain id](https://docs.ros.org/en/humble/Concepts/About-Domain-ID.html)? "
Run multiple Autoware in Carla with Zenoh,D_kwDOAnasMc4ATbzt,2023-04-17T07:03:50Z,evshary,2,Answered,DC_kwDOAnasMc4AVweF,evshary,"Yes, it's possible. However, since ROS 2 can't run different ROS 2 domain ID in the same program, there are two ways to do that:

1. If your ""carla-autoware bridge"" is using ROS 2, you might need to run several ""carla-autoware bridge"" with different ROS 2 domain ID corresponding to different Autoware. I think it's annoying sometimes, and also I'm not sure about the performance of this architecture.
2. You can use DDS to implement ""carla-autoware bridge"" directly, the DDS role here is similar to Zenoh in my implementation. DDS can run several domain ID at the same time, so you don't need to run several ""carla-autoware bridge"".

The reasons I use Zenoh instead of DDS to implement the architecture are:

1. zenoh-bridge-dds can filter ROS 2 topic. That means I don't need to expose all the Autoware topics to the network. I can only expose topics related to the Carla simulator (Sensors & Control). This can decrease some unnecessary bandwidth in the network.
2. Zenoh network overhead is less than DDS, and it also can [improve network performance](https://zenoh.io/blog/2023-03-21-zenoh-vs-mqtt-kafka-dds/).
3. If your simulator and Autoware are in different LANs, then DDS/ROS can't help you in that case. Zenoh is the better choice here. Maybe this case is not too common, but you might still have some similar network topology in your application, though.

Thank you for the questions. We hope to hear more feedback from the community!"
Run multiple Autoware in Carla with Zenoh,D_kwDOAnasMc4ATbzt,2023-04-17T07:03:50Z,evshary,2,Answered,DC_kwDOAnasMc4AXrqL,zeidk,Would it be possible to have both vehicles in the same RViz window?
Run multiple Autoware in Carla with Zenoh,D_kwDOAnasMc4ATbzt,2023-04-17T07:03:50Z,evshary,2,Answered,DC_kwDOAnasMc4AXs-M,evshary,"It's feasible, but you need to make some effort. First of all, you need to modify the topic name in different Autoware (Adding namespace or something else) to avoid topic conflict. Then you need to modify RViz plugin to be able to send goals to different vehicles. In my opinion, this scenario is a little like the fleet management system for the vehicles. However, while considering vehicles, I don't think we would use ROS 2 / DDS to manage vehicles, since ROS 2 / DDS can only work in LAN. So, I don't think it's reasonable to use RViz here. Maybe I misunderstand your scenario. Please correct me if I'm wrong."
Run multiple Autoware in Carla with Zenoh,D_kwDOAnasMc4ATbzt,2023-04-17T07:03:50Z,evshary,2,Answered,DC_kwDOAnasMc4AXyT1,zeidk,Thank you for your answer. I don't quite understand why DDS will be an issue here but I understand the topics issues. I am not using the 2D pose estimate or the 2D goal pose from RViz but I am publishing directly to the relevant topics for my work. I only need to see both vehicles in the same map in autoware. Thank you again for your feedback.
Run multiple Autoware in Carla with Zenoh,D_kwDOAnasMc4ATbzt,2023-04-17T07:03:50Z,evshary,2,Answered,DC_kwDOAnasMc4AXyk2,evshary,"In your scenario, DDS won't be an issue since you don't use it as the fleet management system over the Internet. After changing the topic name, RViz should be able to show the different vehicle info."
Software WG Meeting 2023/04/18,D_kwDOAnasMc4ATb4i,2023-04-17T08:40:11Z,xmfcx,0,Unanswered,,,
Does Autoware take into account visibility?,D_kwDOAnasMc4ATb47,2023-04-17T08:48:27Z,LIIHWF,2,Answered,,,
Does Autoware take into account visibility?,D_kwDOAnasMc4ATb47,2023-04-17T08:48:27Z,LIIHWF,2,Answered,DC_kwDOAnasMc4AVf3f,takayuki5168,"You mean a speed sign or speed limit written on the road, right?
We don't have it in Autoware. We just set the speed limit directly in each lane of the lanelet map."
Does Autoware take into account visibility?,D_kwDOAnasMc4ATb47,2023-04-17T08:48:27Z,LIIHWF,2,Answered,DC_kwDOAnasMc4AVf6H,LIIHWF,"Sorry, let me rephrase the situation. 

In Tesla FSD, there may be a warning called ""Autopilot speed limited due to poor visibility"".  I think it is a reasonable strategy, because if an Autopilot can only sense short distances in special weather conditions, then it needs to drive much slower than the actual speed limit so that it can stop in time when sensing a nearby obstacle."
Does Autoware take into account visibility?,D_kwDOAnasMc4ATb47,2023-04-17T08:48:27Z,LIIHWF,2,Answered,DC_kwDOAnasMc4AVf-w,takayuki5168,"Got it. That's a nice idea.
Currently, it's not implemented."
Does Autoware take into account visibility?,D_kwDOAnasMc4ATb47,2023-04-17T08:48:27Z,LIIHWF,2,Answered,DC_kwDOAnasMc4AVxyf,badai-nguyen,"I think there is a PoC of image_diagnostics package available [here](https://github.com/autowarefoundation/autoware.universe/blob/main/sensing/image_diagnostics/README.md#L5)  might be close to your question.  
Currently it is not used for pilot-auto yet, but you can add it to camera launch to output diagnostics status. 
"
"Why does the data form a loop in ""camera_lidar_radar_fusion"" mode?",D_kwDOAnasMc4ATdUR,2023-04-18T08:45:06Z,beginningfan,1,Answered,,,
"Why does the data form a loop in ""camera_lidar_radar_fusion"" mode?",D_kwDOAnasMc4ATdUR,2023-04-18T08:45:06Z,beginningfan,1,Answered,DC_kwDOAnasMc4AWNuU,liuXinGangChina,"hi, mits-san can you assign a expert for this issue? @mitsudome-r 
thanks!"
"Why does the data form a loop in ""camera_lidar_radar_fusion"" mode?",D_kwDOAnasMc4ATdUR,2023-04-18T08:45:06Z,beginningfan,1,Answered,DC_kwDOAnasMc4AWSzH,badai-nguyen,"@beginningfan cc @liuXinGangChina 
Thank you for your question and really sorry for very late response. I think it was a mistake of topic remapping. I fix it [here](https://github.com/autowarefoundation/autoware.universe/pull/3645)"
"Why does the data form a loop in ""camera_lidar_radar_fusion"" mode?",D_kwDOAnasMc4ATdUR,2023-04-18T08:45:06Z,beginningfan,1,Answered,DC_kwDOAnasMc4AWYf5,beginningfan,Thanks for your answer. It works now @badai-nguyen 
"AutowareControl in AutowareStatePanel cannot be set to ""Enable""",D_kwDOAnasMc4ATdWq,2023-04-18T09:26:25Z,screenflip,1,Answered,,,
"AutowareControl in AutowareStatePanel cannot be set to ""Enable""",D_kwDOAnasMc4ATdWq,2023-04-18T09:26:25Z,screenflip,1,Answered,DC_kwDOAnasMc4AVjDR,shmpwk,Duplicate with https://github.com/orgs/autowarefoundation/discussions/3439
"AutowareControl in AutowareStatePanel cannot be set to ""Enabled""",D_kwDOAnasMc4ATdWv,2023-04-18T09:30:49Z,screenflip,1,Answered,,,
"AutowareControl in AutowareStatePanel cannot be set to ""Enabled""",D_kwDOAnasMc4ATdWv,2023-04-18T09:30:49Z,screenflip,1,Answered,DC_kwDOAnasMc4AVjC7,shmpwk,"The state transits as following. 
https://autowarefoundation.github.io/autoware.universe/main/system/default_ad_api/document/operation-mode/

The most typical cause is that some nodes are die or there are critical error.
Could you share your launch log?"
"AutowareControl in AutowareStatePanel cannot be set to ""Enabled""",D_kwDOAnasMc4ATdWv,2023-04-18T09:30:49Z,screenflip,1,Answered,DC_kwDOAnasMc4AV2Qd,screenflip,"Sorry for late reply.
I looked for errors in the log file based on your comment and found that steering was not being output, so II added code to output steering and now it works. Thank you."
some instructions for ingesting new map in Awsim,D_kwDOAnasMc4ATdqo,2023-04-18T15:30:46Z,zhuyingxiang95,1,Answered,,,
some instructions for ingesting new map in Awsim,D_kwDOAnasMc4ATdqo,2023-04-18T15:30:46Z,zhuyingxiang95,1,Answered,DC_kwDOAnasMc4AWhpV,shmpwk,"@zhuyingxiang95 
You can reffer to the document.
https://tier4.github.io/AWSIM/Components/Environment/AddNewEnvironment/"
"When I start autoware.launch.xml and vehicle_interface with my robot , pointcloud_container falls down.",D_kwDOAnasMc4ATeSl,2023-04-19T08:21:03Z,asa-naki,1,Answered,,,
"When I start autoware.launch.xml and vehicle_interface with my robot , pointcloud_container falls down.",D_kwDOAnasMc4ATeSl,2023-04-19T08:21:03Z,asa-naki,1,Answered,DC_kwDOAnasMc4AVlbJ,kminoda,"Hi, thank you for the report!

It would be helpful if you could also share some technical details of your environment, such as version of Autoware (main from awf/autoware?), OS, sensor names, etc.
If you are using the latest awf/autoware, one simple (but a bit troublesome) approach is to find the difference of data in some topics between awf/autoware and your autoware. 

Could you also check if the LiDAR pointcloud size is not zero?"
"When I start autoware.launch.xml and vehicle_interface with my robot , pointcloud_container falls down.",D_kwDOAnasMc4ATeSl,2023-04-19T08:21:03Z,asa-naki,1,Answered,DC_kwDOAnasMc4AVljZ,asa-naki,"I’m sorry for the lack of explanation about my environment.
My enviroment of using autoware is 
I use  awf/autoware
OS:Ubuntu 22.04 
ROS version Humble
Autoware installation Source installation
sensor: two VLP16
and I based awf/sensor_kit_launch and modify it so that we can use our own LiDAR.

The checks of the LiDAR pointcloud size when running autoware.launch.xml and vehicle_interface.

In velodyne_node_container.launch.py,
In both of the two LiDARs,

- pointcloud_raw_ex by velodyne_pointcloud::Convert

by pointcloud_preprocessor::CropBoxFilterComponent

- self_cropped/pointcloud_ex

- mirror_cropped/pointcloud_ex

We have checked that the size of the point cloud resulting from processing up to the point cloud is not zero.

And when running only  autoware.launch.xml , I check the /sensing/lidar/contenaed/pointcloud.

the checks are the ones you wanted to check?
"
"When I start autoware.launch.xml and vehicle_interface with my robot , pointcloud_container falls down.",D_kwDOAnasMc4ATeSl,2023-04-19T08:21:03Z,asa-naki,1,Answered,DC_kwDOAnasMc4AVloL,kminoda,"What happens if you launch logging_simulator, and do NOT provide any ROS topic messages? Does it still fail?"
"When I start autoware.launch.xml and vehicle_interface with my robot , pointcloud_container falls down.",D_kwDOAnasMc4ATeSl,2023-04-19T08:21:03Z,asa-naki,1,Answered,DC_kwDOAnasMc4AVlsd,asa-naki,"When I launch logging_simulator, and do NOT provide any ROS topic messages, pointcloud_container does not abort."
"When I start autoware.launch.xml and vehicle_interface with my robot , pointcloud_container falls down.",D_kwDOAnasMc4ATeSl,2023-04-19T08:21:03Z,asa-naki,1,Answered,DC_kwDOAnasMc4AVntn,kminoda,"If you are using your own vehicle interface, please check the value of the data published from the node"
"When I start autoware.launch.xml and vehicle_interface with my robot , pointcloud_container falls down.",D_kwDOAnasMc4ATeSl,2023-04-19T08:21:03Z,asa-naki,1,Answered,DC_kwDOAnasMc4AVn5Z,asa-naki,I will check the topics information from vehicle_ interface.
"When I start autoware.launch.xml and vehicle_interface with my robot , pointcloud_container falls down.",D_kwDOAnasMc4ATeSl,2023-04-19T08:21:03Z,asa-naki,1,Answered,DC_kwDOAnasMc4AVn-3,asa-naki,"I checked the topics information from vehicle_ interface. when the vehicle stops, linear and angular velocity value is 0,and frame_id is base_link. I think the value is correct. 
I try modifying velodyne_node_container.launch.py without DistortionCorrectorComponent, remapping output topic name of CropBoxFilterComponent,I check the /sensing/lidar/contenaed/pointcloud.
So the DistortionCorrectorComponent process is the reason for the aborting container."
"When I start autoware.launch.xml and vehicle_interface with my robot , pointcloud_container falls down.",D_kwDOAnasMc4ATeSl,2023-04-19T08:21:03Z,asa-naki,1,Answered,DC_kwDOAnasMc4AVn_L,kminoda,How about remapping the topic between `vehicle_interface` and `distortion_corrector` to something like `/dummy`?
"When I start autoware.launch.xml and vehicle_interface with my robot , pointcloud_container falls down.",D_kwDOAnasMc4ATeSl,2023-04-19T08:21:03Z,asa-naki,1,Answered,DC_kwDOAnasMc4AVoCI,asa-naki,"When input twist topic name of distortion_corrector remaps  `/hoge` , pointcloud_container is alive. Also I could see
 /sensing/lidar/contenaed/pointcloud "
"When I start autoware.launch.xml and vehicle_interface with my robot , pointcloud_container falls down.",D_kwDOAnasMc4ATeSl,2023-04-19T08:21:03Z,asa-naki,1,Answered,DC_kwDOAnasMc4AVoKc,kminoda,"I found that this line caused the error: https://github.com/autowarefoundation/autoware.universe/blob/642256cc2461d70ce5ab5988012ddae7f8623de3/sensing/pointcloud_preprocessor/src/distortion_corrector/distortion_corrector.cpp#L225
Thanks for the report! I will fix this."
"When I start autoware.launch.xml and vehicle_interface with my robot , pointcloud_container falls down.",D_kwDOAnasMc4ATeSl,2023-04-19T08:21:03Z,asa-naki,1,Answered,DC_kwDOAnasMc4AVoVG,kminoda,@asa-naki Should be OK with this PR: https://github.com/autowarefoundation/autoware.universe/pull/3476
Perception & Sensing WG Meeting 19/04/2023,D_kwDOAnasMc4ATeVL,2023-04-19T09:11:38Z,drwnz,2,Answered,,,
Perception & Sensing WG Meeting 19/04/2023,D_kwDOAnasMc4ATeVL,2023-04-19T09:11:38Z,drwnz,2,Answered,DC_kwDOAnasMc4AVxxY,xmfcx,"Open issues:
- https://github.com/autowarefoundation/autoware.universe/issues/494"
Perception & Sensing WG Meeting 19/04/2023,D_kwDOAnasMc4ATeVL,2023-04-19T09:11:38Z,drwnz,2,Answered,DC_kwDOAnasMc4AW1My,VRichardJP,"Hi, sorry to hijack old report. I have a few remarks/questions regarding the Universal LIDAR driver point field:
- Is there any reason to keep intensity field in basic point type?
- Why is there no ""distance"" field? X/Y/Z and Azimuth/Elevation/Distance describe a point in 2 different coordinate systems, if there is Azimuth and Elevation already, why not distance aswell?
- From data alignment perspective, it would be more efficient to pack the return value along the intensity field. Is there a reason for it to be at the end?"
Perception & Sensing WG Meeting 19/04/2023,D_kwDOAnasMc4ATeVL,2023-04-19T09:11:38Z,drwnz,2,Answered,DC_kwDOAnasMc4AW1oN,xmfcx,"This was the proposal we came up with before:

https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-architecture/sensing/data-types/point-cloud/#point-cloud-fields

## Point cloud fields

In the ideal case, the driver is expected to output a point cloud with the `PointXYZIRCADT` point type.

| name              | datatype  | derived | description                                                                  |
| ----------------- | --------- | ------- | ---------------------------------------------------------------------------- |
| `X`               | `FLOAT32` | `false` | X position                                                                   |
| `Y`               | `FLOAT32` | `false` | Y position                                                                   |
| `Z`               | `FLOAT32` | `false` | Z position                                                                   |
| `I` (intensity)   | `UINT8`   | `false` | Measured reflectivity, intensity of the point                                |
| `R` (return type) | `UINT8`   | `false` | Laser return type for dual return lidars                                     |
| `C` (channel)     | `UINT16`  | `false` | Vertical channel id of the laser that measured the point                     |
| `A` (azimuth)     | `FLOAT32` | `true`  | `atan2(Y, X)`, Horizontal angle from the front of the lidar to the point     |
| `D` (distance)    | `FLOAT32` | `true`  | `hypot(X, Y, Z)`, Euclidean distance of the point to lidar                   |
| `T` (time)        | `UINT32`  | `false` | Nanoseconds passed since the time of the header when this point was measured |

This proposal adds Vertical Angle / Elevation to the previous version.
- I think it's better to use Elevation too. I didn't know its dictionary definition included the angular aspect of the word. I used to think it just represents vertical distance like altitude does.
  - https://www.merriam-webster.com/dictionary/elevation
    - Elevation: the height to which something is elevated, such as:
      a) The angular distance of something (such as a celestial object) above the horizon.
      b) The degree to which a gun is aimed above the horizon.
      c) The height above the level of the sea; altitude.

**Updated definition with the Elevation field:**

| name              | datatype  | derived | description                                                                  |
| ----------------- | --------- | ------- | ---------------------------------------------------------------------------- |
| `X`               | `FLOAT32` | `false` | X position                                                                   |
| `Y`               | `FLOAT32` | `false` | Y position                                                                   |
| `Z`               | `FLOAT32` | `false` | Z position                                                                   |
| `I` (intensity)   | `UINT8`   | `false` | Measured reflectivity, intensity of the point                                |
| `R` (return type) | `UINT8`   | `false` | Laser return type for dual return lidars                                     |
| `C` (channel)     | `UINT16`  | `false` | Vertical channel id of the laser that measured the point                     |
| `A` (azimuth)     | `FLOAT32` | `true`  | `atan2(Y, X)`, Horizontal angle from the front of the lidar to the point     |
| `E` (elevation)     | `FLOAT32` | `true`  | `atan2(Z, hypot(X, Y))`, Vertical angle from the front of the lidar to the point     |
| `D` (distance)    | `FLOAT32` | `true`  | `hypot(X, Y, Z)`, Euclidean distance of the point to lidar                   |
| `T` (time)        | `UINT32`  | `false` | Nanoseconds passed since the time of the header when this point was measured |

> Why is there no ""distance"" field? X/Y/Z and Azimuth/Elevation/Distance describe a point in 2 different coordinate systems, if there is Azimuth and Elevation already, why not distance aswell?

@drwnz maybe you've forgot to include `Distance` field?

> From data alignment perspective, it would be more efficient to pack the return value along the intensity field. Is there a reason for it to be at the end?

I think the table there isn't sorted well.

> Is there any reason to keep intensity field in basic point type?

@VRichardJP My plan was to keep the basic point type to be `XYZIRC` which is packed as 128 bytes per point.

Some reasons for keeping intensity field:
- **Object Detection and Segmentation:** Intensity information can provide additional cues for distinguishing different objects in the environment. By incorporating intensity data into perception algorithms, such as object detection or segmentation, it may improve the accuracy or reliability of identifying objects of interest.
- **Clustering or Filtering:** Intensity values can be used as criteria for clustering or filtering points in the point cloud. For example, intensity-based clustering can help group together points with similar reflectivity characteristics, potentially aiding in the separation of objects from the background or differentiating objects with varying reflectivity properties.
- **Feature Extraction:** Intensity values can be used as a feature or descriptor for point cloud analysis.

These are not used in the Autoware yet but I think they have potential. To me, it's sort of like the monochromatic ""color"" from the eyes of the lidar sensor, only additional data it provides with the distance that it measures from a single laser beam return.

And if we keep `I`, why not keep the `R` and `C` too since they are relatively small and can be packed with them.

We could also disable it and pack the points as `XYZ` with 96 bytes per point too, this would reduce the overall size to 0.75 of the alternative. Freeing a lot of memory and communication overhead.

We could also specifically publish `XYZI` points if we actually have nodes that can make use of the data too. What do you think?

"
Perception & Sensing WG Meeting 19/04/2023,D_kwDOAnasMc4ATeVL,2023-04-19T09:11:38Z,drwnz,2,Answered,DC_kwDOAnasMc4AW1sn,VRichardJP,"I agree XYZIRC looks better than just XYZI, because if the data is packed then reading/writing unaligned data point might be slow, and if the data is aligned, then we have 24 unused bits. Now maybe channel and return_type data are not that useful. I don't know what return_type can be used for, as for channel I think that currently it is only used in ring_outlier_filter (which needs azimuth as well). What about RGB color? I have seen some lidar sensors can output color, which could fit in 24 bits."
Perception & Sensing WG Meeting 19/04/2023,D_kwDOAnasMc4ATeVL,2023-04-19T09:11:38Z,drwnz,2,Answered,DC_kwDOAnasMc4AW1tw,xmfcx,"The lidars that I know which supply the RGB color internally mix camera and lidar data and output the colored point cloud. These lidars are generally short range like:
- https://www.intelrealsense.com/lidar-camera-l515/ (9m)
- https://www.stereolabs.com/zed-2/ (stereo camera(no lidar), 20m max, accuracy low and gets lower as distance increases)

I think it's too early to think about incorporating them just yet."
Perception & Sensing WG Meeting 19/04/2023,D_kwDOAnasMc4ATeVL,2023-04-19T09:11:38Z,drwnz,2,Answered,DC_kwDOAnasMc4AW1-s,drwnz,"@VRichardJP @xmfcx thank you for your comments.
Indeed I missed out Distance in that image.
The actual data structure we use is ordered like this:
```
struct PointXYZICAETR
{
  float x;
  float y;
  float z;
  float azimuth;
  float elevation;
  std::uint8_t return_type;
  std::uint8_t intensity;
  std::uint16_t channel;
  std::uint32_t time_stamp;
};
```
The naming order is different in order more for clarity I believe: @amc-nu is that right?"
Perception & Sensing WG Meeting 19/04/2023,D_kwDOAnasMc4ATeVL,2023-04-19T09:11:38Z,drwnz,2,Answered,DC_kwDOAnasMc4AW1_l,xmfcx,"@drwnz If we are planning to use `XYZIRC` for the default point type, it'd make more sense to restructure it as the following (also added the missing distance field):
```cpp
struct PointXYZIRCAEDT
{
  float x;
  float y;
  float z;
  std::uint8_t intensity;
  std::uint8_t return_type;
  std::uint16_t channel;
  float azimuth;
  float elevation;
  float distance;
  std::uint32_t time_stamp;
};
```

Is this ok?"
Perception & Sensing WG Meeting 19/04/2023,D_kwDOAnasMc4ATeVL,2023-04-19T09:11:38Z,drwnz,2,Answered,DC_kwDOAnasMc4AW_L0,drwnz,"@xmfcx - yes this looks good, we will modify accordingly.
Thank you for investigating this, as always your suggestions have been very helpful!
"
Question about autoware_individual_params,D_kwDOAnasMc4ATeV3,2023-04-19T09:22:33Z,SakodaShintaro,2,Answered,,,
Question about autoware_individual_params,D_kwDOAnasMc4ATeV3,2023-04-19T09:22:33Z,SakodaShintaro,2,Answered,DC_kwDOAnasMc4AVlk4,kenji-miyake,"> Question 1

If you have only one vehicle, you can directly edit `sample_vehicle_launch` and `sample_sensor_kit_launch`, actually.
However, if you have two or more vehicles, you need some parameter-switching feature. `autoware_individual_params` is a repository for that."
Question about autoware_individual_params,D_kwDOAnasMc4ATeV3,2023-04-19T09:22:33Z,SakodaShintaro,2,Answered,DC_kwDOAnasMc4AVlq0,SakodaShintaro,"Thanks a lot!
I understood the significance and necessity of `autoware_individual_params`, which wants to manage not only vehicle types but also individuals.

As you say, if my only purpose is to run autoware once, I can run it by directly editing various files.
However, in practice, even if I have only one vehicle, I want to manage parameters with Git (and with a remote web repository).
So I feel that `autoware_individual_params` is almost a fork requirement.

I initially found the description a bit confusing, but once I understood it, I realized that's just how it is."
Question about autoware_individual_params,D_kwDOAnasMc4ATeV3,2023-04-19T09:22:33Z,SakodaShintaro,2,Answered,DC_kwDOAnasMc4AVlmP,kenji-miyake,"> [Q2-A] What is the reason for connecting the links from base_link to each sensor through sensor_kit_link, rather than directly connecting them to each sensor?

I'm not sure, but I guess it's easy to define default values if they are relative to `sensor_kit_base_link`.

> [Q2-B] Also, what is the reason for only the velodyne_rear_base_link being connected directly to the base_link?

I'm not sure as well, but I guess it's either:
- `velodyne_rear` is an additional sensor and not regarded as part of the sensor kit.
- Just a mistake.

It's good to ask the developer of the sensor kit package.
(Please note that `sample_sensor_kit_launch` is originally from TIER IV's https://github.com/tier4/aip_launcher/tree/f53c34094cd68ca788d0324442d6d4273665218b/aip_xx1_launch or something.)"
Question about autoware_individual_params,D_kwDOAnasMc4ATeV3,2023-04-19T09:22:33Z,SakodaShintaro,2,Answered,DC_kwDOAnasMc4AVlvk,SakodaShintaro,"I checked `tier4/autoware_individual_params` repository.

* [aip_x1](https://github.com/tier4/autoware_individual_params/blob/main/individual_params/config/default/aip_x1/sensors_calibration.yaml)
  * has only `sensor_kit_base_link`
* [aip_x2](https://github.com/tier4/autoware_individual_params/blob/main/individual_params/config/default/aip_x2/sensors_calibration.yaml)
  * has `top_unit_base_link`, `front_unit_base_link`, `rear_unit_base_link`
* [aip_xx1](https://github.com/tier4/autoware_individual_params/blob/main/individual_params/config/default/aip_xx1/sensors_calibration.yaml)
  * has `sensor_kit_base_link`, `livox_front_right_base_link`, `livox_front_left_base_link`, `velodyne_rear_base_link`

It doesn't seem like there is a rule.
I concern what kind of format the calibration tool (https://github.com/tier4/CalibrationTools) is designed for. 
However, I feel it may be better not to rely too heavily on this tool now.
I will continue trial and error a little more."
Software WG Meeting 2023/04/25,D_kwDOAnasMc4ATfS0,2023-04-20T07:53:30Z,mitsudome-r,3,Answered,,,
Software WG Meeting 2023/04/25,D_kwDOAnasMc4ATfS0,2023-04-20T07:53:30Z,mitsudome-r,3,Answered,DC_kwDOAnasMc4AV7pp,ahuazuipiaoliang,"# Issue that Pixmoving meets
https://github.com/autowarefoundation/autoware.universe/issues/3568
https://github.com/autowarefoundation/autoware.universe/issues/3569"
Software WG Meeting 2023/04/25,D_kwDOAnasMc4ATfS0,2023-04-20T07:53:30Z,mitsudome-r,3,Answered,DC_kwDOAnasMc4AV7p7,ahuazuipiaoliang,"
[Pixmoving Presentation Slides](https://drive.google.com/file/d/1l1QcvjEJ_U1Qr-TE6-ed6dasG3rdYbtv/view?usp=sharing)"
Software WG Meeting 2023/04/25,D_kwDOAnasMc4ATfS0,2023-04-20T07:53:30Z,mitsudome-r,3,Answered,DC_kwDOAnasMc4AV7qD,ahuazuipiaoliang,"@mitsudome-r 
please have a look at the slides"
Software WG Meeting 2023/04/25,D_kwDOAnasMc4ATfS0,2023-04-20T07:53:30Z,mitsudome-r,3,Answered,DC_kwDOAnasMc4AV8Mp,ahuazuipiaoliang,"@mitsudome-r Thank you for your advice, after modifying the DDS configuration, according to the [instruction of Autoware](https://autowarefoundation.github.io/autoware-documentation/main/support/troubleshooting/), the performance of Autoware has been optimized.
![image](https://user-images.githubusercontent.com/35034146/235090114-be70efc0-d561-44ba-9f11-83ced1f6bc23.png)

But we still meet the https://github.com/autowarefoundation/autoware.universe/issues/3569
"
Is AWSIM's GNSS data true value or simulated sensor behavior?,D_kwDOAnasMc4ATfXw,2023-04-20T09:28:59Z,SakodaShintaro,1,Answered,,,
Is AWSIM's GNSS data true value or simulated sensor behavior?,D_kwDOAnasMc4ATfXw,2023-04-20T09:28:59Z,SakodaShintaro,1,Answered,DC_kwDOAnasMc4AVooU,kminoda,"Currently, localization uses GNSS only for initial position estimation, so leakage is not occurring at the moment. However, it could happen depending on the algorithm, so caution is necessary. If you need ground truth pose data, consider using a separate topic like AWSIM/ground_truth/pose. Remember that /sensing/gnss/pose replicates GNSS sensor behavior and may have reduced accuracy in areas with obstructions."
Clarification on the usage of individual_params in autoware.launch,D_kwDOAnasMc4ATfeO,2023-04-20T11:15:21Z,Naophis,1,Answered,,,
Clarification on the usage of individual_params in autoware.launch,D_kwDOAnasMc4ATfeO,2023-04-20T11:15:21Z,Naophis,1,Answered,DC_kwDOAnasMc4AVpzJ,shmpwk,"[Edited, my first answer was wrong and was fixed]

### Conclusion
Currently, when you launch `autoware.launch.xml` in `autowarefoundation/autoware_launch`,  `sensor_kit_calibration.yaml` in  `individual_params` is used, not in `<sensor_model>_description` .
Idealy, `sensor_kit_calibration.yaml` in `<sensor_model>_description` is  ""design (example) parameter"" while that in   `individual_params` is ""actual vehicle parameter"".

### Logic
When launching xacro, `individual_params` are passed as `config_dirs` [here](https://github.com/autowarefoundation/autoware.universe/blob/85acbeab9c27dcfa6250d7a427ae3655e4b7e9ba/launch/tier4_vehicle_launch/launch/vehicle.launch.xml#L13-L18).
The point is the `config_dirs` are passed globally, so even when [launched xacro file](https://github.com/autowarefoundation/autoware.universe/blob/main/launch/tier4_vehicle_launch/urdf/vehicle.xacro
) does not seem to receive `config_dirs`, [`${sensor_model_property}_description)/urdf/sensors.xacro`](https://github.com/autowarefoundation/autoware.universe/blob/d04e65da79e0b2b02e65b2e01214f2ae6bc9329b/launch/tier4_vehicle_launch/urdf/vehicle.xacro#L12) is passing `config_dirs` and [the source xacro](https://github.com/autowarefoundation/sample_sensor_kit_launch/blob/b70e5d0b86820ee0ee8880ada9853b7a1b3ea8d3/sample_sensor_kit_description/urdf/sensors.xacro#L3) reflects the `config_dirs`, meaning `individual_params`. 

### Disproof
Incidentally, when I wrote [code in the atmosphere to specify arg](https://github.com/shmpwk/autoware.universe/commit/2d08dd1a389b9f897908b8c80cbe23fb1309f711), I got the following error message, so it seems that passing arg is not supported.

```
[WARNING] [root]: executed command showed stderr output. Command: xacro /home/shmpwk/workspace/autoware/install/tier4_vehicle_launch/share/tier4_vehicle_launch/urdf/vehicle.xacro vehicle_model:=sample_vehicle sensor_model:=awsim_sensor_kit config_dir:=/home/shmpwk/workspace/autoware/install/individual_params/share/individual_params/config/default/awsim_sensor_kit
warning: Child elements of a <xacro:include> tag are ignored
```

Also, [xacro arg passing issue still open](https://github.com/ros/xacro/issues/204).

### Misc
Related issue is https://github.com/autowarefoundation/autoware/issues/3322. There was a proposal not to call `individual_params` in the launch file. But it deprives developers of their oppotunity to launch their customized parameter and it was dismissed in the end. 



### Memo
(The following is my memo. You can ignore it)
[autoware.launch.xml](https://github.com/autowarefoundation/autoware_launch/blob/345f2d998b3f6363ae51ddfca9d751a29e705cf4/autoware_launch/launch/autoware.launch.xml#L65) with `individual_params` calls  [vehicle.launch.xml](https://github.com/autowarefoundation/autoware.universe/blob/85acbeab9c27dcfa6250d7a427ae3655e4b7e9ba/launch/tier4_vehicle_launch/launch/vehicle.launch.xml#L16). But the `individual_params` in `config_dir` is not used after that. `vehicle_interface.launch.xml` call [vehicle.xacro](https://github.com/autowarefoundation/autoware.universe/blob/main/launch/tier4_vehicle_launch/urdf/vehicle.xacro).
 "
Clarification on the usage of individual_params in autoware.launch,D_kwDOAnasMc4ATfeO,2023-04-20T11:15:21Z,Naophis,1,Answered,DC_kwDOAnasMc4AVwVp,Naophis,"Thank you for the response. I understand the distinction between design and actual vehicle parameters, and `config_dir` is passed globally in the design."
Open AD Kit Working Group Meeting 20/4/23,D_kwDOAnasMc4ATfhr,2023-04-20T12:26:52Z,HamburgDave,0,Unanswered,,,
Colcon build C error,D_kwDOAnasMc4ATgGt,2023-04-21T01:24:25Z,justin-ucdavis,1,Answered,,,
Colcon build C error,D_kwDOAnasMc4ATgGt,2023-04-21T01:24:25Z,justin-ucdavis,1,Answered,DC_kwDOAnasMc4AVq1j,maxime-clem,"This error can happen when the compiler runs out of memory.
Check your memory (RAM + swap) usage when building and if you notice it getting close to 100% usage, there are 2 solutions from previous similar discussions:
- Reduce the number of packages being built in parallel : https://github.com/orgs/autowarefoundation/discussions/3068 https://github.com/orgs/autowarefoundation/discussions/2901
- Increase your swap : https://github.com/orgs/autowarefoundation/discussions/2597
"
Any new equivalent to the `AwapiVehicleStatus` message from the deprecated API?,D_kwDOAnasMc4ATgQg,2023-04-21T05:07:37Z,VRichardJP,0,Unanswered,,,
The planned path can not  connect with the target lane,D_kwDOAnasMc4ATgSK,2023-04-21T05:32:17Z,shulanbushangshu,1,Answered,,,
The planned path can not  connect with the target lane,D_kwDOAnasMc4ATgSK,2023-04-21T05:32:17Z,shulanbushangshu,1,Answered,DC_kwDOAnasMc4AWhtt,shmpwk,"@shulanbushangshu 
(Related your issue: https://github.com/autowarefoundation/autoware.universe/issues/2633 ?)"
ingest map into Awsim simulator,D_kwDOAnasMc4ATgnG,2023-04-21T09:44:01Z,zhuyingxiang95,0,Unanswered,,,
How does the sample_sensor_kit work?,D_kwDOAnasMc4ATgxx,2023-04-21T13:25:39Z,MarioAlmelaUMH,1,Answered,,,
How does the sample_sensor_kit work?,D_kwDOAnasMc4ATgxx,2023-04-21T13:25:39Z,MarioAlmelaUMH,1,Answered,DC_kwDOAnasMc4AVsc7,shmpwk,"When you add your own sensors, change calibration parameters [here](https://github.com/autowarefoundation/sample_sensor_kit_launch/tree/main/sample_sensor_kit_description/config).
Also, when you launch Autoware, those parameters are read in [indivudual_params](https://github.com/autowarefoundation/autoware_individual_params/tree/main/individual_params/config/default/sample_sensor_kit) instead."
How does the sample_sensor_kit work?,D_kwDOAnasMc4ATgxx,2023-04-21T13:25:39Z,MarioAlmelaUMH,1,Answered,DC_kwDOAnasMc4AVwvO,MarioAlmelaUMH,"Does this mean that when you launch Autoware, the ego vehicle has 8 cameras? I say this because when I check the topics with ros2 topic list, there's only one camera related topic available, instead of sensing/camera/camera0-7 as seen in (https://autowarefoundation.github.io/autoware-documentation/latest/design/autoware-architecture/node-diagram/). I'm using Carla simulator, and maybe this is modifying somehow the sample_sensor_kit package, is this possible?

Thanks in advance."
How does the sample_sensor_kit work?,D_kwDOAnasMc4ATgxx,2023-04-21T13:25:39Z,MarioAlmelaUMH,1,Answered,DC_kwDOAnasMc4AVwyY,shmpwk,"> Does this mean that when you launch Autoware, the ego vehicle has 8 cameras? 

Yes, the sample assumes Autoware has 8 cameras.
For example, when you use [camera_lidar_fusion_based_detection.launch.xml](https://github.com/autowarefoundation/autoware.universe/blob/bc8ab77a8358d893846715a06077c19bde96072c/launch/tier4_perception_launch/launch/object_recognition/detection/camera_lidar_fusion_based_detection.launch.xml), you need 8 camera by default.
If you have only one camera, you can reduce the parameters of sample_sensor_kit package."
How does the sample_sensor_kit work?,D_kwDOAnasMc4ATgxx,2023-04-21T13:25:39Z,MarioAlmelaUMH,1,Answered,DC_kwDOAnasMc4AVxQ8,MarioAlmelaUMH,"Thank you for your answer. I was wondering how about topics? Is there a way to configure the topics these 8 cameras publish to? Because, by default, only one topic (sensing/camera/traffic_light/image_raw) is publishing image data.

Thank you in advance."
How does the sample_sensor_kit work?,D_kwDOAnasMc4ATgxx,2023-04-21T13:25:39Z,MarioAlmelaUMH,1,Answered,DC_kwDOAnasMc4AVxTk,shmpwk,"As for the simulator, it might not publish 8 cameras, but just one camera image.
The 8 cameras I said was about not the simulator but the real vehicle. Sorry for confusing you. "
How does the sample_sensor_kit work?,D_kwDOAnasMc4ATgxx,2023-04-21T13:25:39Z,MarioAlmelaUMH,1,Answered,DC_kwDOAnasMc4AVxVO,MarioAlmelaUMH,"Don't worry, thank you for your quick answers. I should check the simulator config in case it's remapping the camera data to a different topic."
2023-04-24 ODD working group weekly meeting (138),D_kwDOAnasMc4ATi40,2023-04-24T07:31:02Z,Igata-ctrl,0,Unanswered,,,
`/api/routing/set_route` and `/api/routing/set_route_points` are confusing.,D_kwDOAnasMc4ATjAo,2023-04-24T09:48:31Z,VRichardJP,0,Unanswered,,,
Mapping WG Meeting 12/04/2023,D_kwDOAnasMc4ATjO5,2023-04-24T14:34:54Z,armaganarsln,0,Unanswered,,,
Localization & Mapping WG Meeting 15/03/2023,D_kwDOAnasMc4ATjQV,2023-04-24T14:59:16Z,armaganarsln,0,Unanswered,,,
Build issue with ncurses,D_kwDOAnasMc4ATjhA,2023-04-24T19:06:53Z,goomy241,2,Answered,,,
Build issue with ncurses,D_kwDOAnasMc4ATjhA,2023-04-24T19:06:53Z,goomy241,2,Answered,DC_kwDOAnasMc4AVzFJ,maxime-clem,"This is the first time I see this build issue with `Curses` and I am not sure where the problem comes from.
It should be a dependency of the `behaviortree_cpp_v3` library but for some reason in your case it was not automatically configured.

> when I tried to run the path-planning simulation, I can't initiate the car position.

This is probably an unrelated issue. Please share the full ROS 2 log found in `~/.ros/log/[DATE-TIME-USER]/launch.log` in order to identify the problem."
Build issue with ncurses,D_kwDOAnasMc4ATjhA,2023-04-24T19:06:53Z,goomy241,2,Answered,DC_kwDOAnasMc4AVzGC,goomy241,"Thanks for the reply, the full log is here: https://drive.google.com/file/d/1kZoYyTFR6znrMFntOUXsRzFTNp9iP2Bj/view?usp=sharing"
Build issue with ncurses,D_kwDOAnasMc4ATjhA,2023-04-24T19:06:53Z,goomy241,2,Answered,DC_kwDOAnasMc4AVzGu,maxime-clem,"Thank you.
It looks like several nodes are dying at launch but it is not clear why.
Are you using the latest versions of `autoware.universe` and `autoware_launch` ? Did you setup your environment using the script `setup-dev-env.sh` ?
"
Build issue with ncurses,D_kwDOAnasMc4ATjhA,2023-04-24T19:06:53Z,goomy241,2,Answered,DC_kwDOAnasMc4AVzJS,goomy241,"yes, I used the  `setup-dev-env.sh` to setup the environment and I also pulled the latest commits and updated the repositories by following https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/source-installation/#how-to-update-a-workspace.
"
Build issue with ncurses,D_kwDOAnasMc4ATjhA,2023-04-24T19:06:53Z,goomy241,2,Answered,DC_kwDOAnasMc4AVzXw,maxime-clem,"I am sorry I do not have any idea about what could be the issue.
Are you using Ubuntu 22.04 on with a x64 processor ?

My suggestion would be to rebuild Autoware from scratch and try again (`rm -rf build install`)."
Build issue with ncurses,D_kwDOAnasMc4ATjhA,2023-04-24T19:06:53Z,goomy241,2,Answered,DC_kwDOAnasMc4AV1tB,goomy241,"Yes, I'm using ubuntu 22.04 with a x64 processor.
And I tried to clean up the build artifacts and rebuild, and I got the following warnings, do them have any relation to this issue?
<img width=""825"" alt=""image"" src=""https://user-images.githubusercontent.com/90799662/234413125-d372ac0d-b1a6-44ac-b0ac-7d83aacd9490.png"">
"
Build issue with ncurses,D_kwDOAnasMc4ATjhA,2023-04-24T19:06:53Z,goomy241,2,Answered,DC_kwDOAnasMc4AV15t,VRichardJP,"It might be the cause. I guess you have somewhere in your `PATH` or `LD_LIBRARY_PATH` a `/home/student/miniconda3/xxx`. Then CMake finds the same OMP lib twice and is confused. 

I guess your miniconda3 environment must come from your ~/.bashrc. Could you comment it out and try again? (Make sure you have no miniconda3 in your environment before rebuilding)

Note that if libgomp is the root cause, there are many packages using OMP so it is better to do a clean build (`rm -rf build install`)"
Build issue with ncurses,D_kwDOAnasMc4ATjhA,2023-04-24T19:06:53Z,goomy241,2,Answered,DC_kwDOAnasMc4AV4dc,goomy241,"Thank you so much! After I deactivated the conda environment, the build succeeded and the path planning simulation worked as expected."
Build issue with ncurses,D_kwDOAnasMc4ATjhA,2023-04-24T19:06:53Z,goomy241,2,Answered,DC_kwDOAnasMc4AVzpE,VRichardJP,"What does `ldd /opt/ros/humble/lib/libbehaviortree_cpp_v3.so` say? Is `libncurses.so` listed but not found?

What about `ldconfig -p | grep libncurses.so`? Do you see the library anywhere on your machine?

You could also double check the missing symbols are defined. For example on my machine:
```bash
$ nm -D /lib/x86_64-linux-gnu/libncurses.so.6 | grep wgetch
0000000000014110 T mvwgetch@@NCURSES6_5.0.19991023
00000000000134a0 T wgetch@@NCURSES6_5.0.19991023
```"
Build issue with ncurses,D_kwDOAnasMc4ATjhA,2023-04-24T19:06:53Z,goomy241,2,Answered,DC_kwDOAnasMc4AV1rw,goomy241,"These commands gives me the following output:
<img width=""1259"" alt=""image"" src=""https://user-images.githubusercontent.com/90799662/234411502-6e40a688-934a-4102-b1bb-a2acd3d148e6.png"">

"
2023-04-26 Simulation Working group Meeting,D_kwDOAnasMc4ATkQf,2023-04-25T11:51:37Z,WJaworskiRobotec,0,Unanswered,,,
How to better stabilize yaw prediction using centerpoint,D_kwDOAnasMc4ATkly,2023-04-25T18:12:27Z,gauthamnarayan,1,Answered,,,
How to better stabilize yaw prediction using centerpoint,D_kwDOAnasMc4ATkly,2023-04-25T18:12:27Z,gauthamnarayan,1,Answered,DC_kwDOAnasMc4AV2LW,yukke42,"@gauthamnarayan Hello, 

1. Outputs with the norm of yaw near 0 are filtered out as orientation unstable objects and then you can choose other outpus before NMS. ([ref](https://github.com/autowarefoundation/autoware.universe/blob/534d93c1fbaeb806ea5de92bf13fada8e87ab985/perception/lidar_centerpoint/lib/postprocess/postprocess_kernel.cu#L100))
2. In my experiment, it maight be caused by the underfitting. 
3. The gap of lidar sensor between train and inference data might canse the orientation unstable output.

I hope these ideas help you."
How to better stabilize yaw prediction using centerpoint,D_kwDOAnasMc4ATkly,2023-04-25T18:12:27Z,gauthamnarayan,1,Answered,DC_kwDOAnasMc4AV4jR,gauthamnarayan,"@yukke42 thank you very much for your response!

I am looking at outputs directly from the network (before nms) and the yaw is still wrong. I agree, it seems like the network is under fitting and there might be a distribution gap between training and test environments.

A couple of follow up questions:
1. I'm trying to replicate results and it would be very helpful if any information used to generate the lidar_centerpoint model can be shared like the mmdetection training code. If not, would it possible to share at least the pytorch model and the training logs?
2. Autoware mentions that the centerpoint model was trained on 110k frames of Nuscenes data [here](https://github.com/autowarefoundation/autoware.universe/tree/main/perception/lidar_centerpoint#:~:text=Centerpoint%20was%20trained%20in%20nuScenes%20(~110k%20lidar%20frames)%20%5B8%5D%20and%20TIER%20IV%27s%20internal%20database%20(~11k%20lidar%20frames)%20for%2060%20epochs.%20Centerpoint%20tiny%20was%20trained%20in%20Argoverse%202%20(~28k%20lidar%20frames)%20%5B9%5D%20and%20TIER%20IV%27s%20internal%20database%20(~11k%20lidar%20frames)%20for%2020%20epochs.) and 11k Tier IV frames. Since only 40k frames from nuscenes have annotation, were any other techniques used to annotate the remaining frames?
3. Please can we have a short discussion over email? My contact is tecplot123@gmail.com"
How to better stabilize yaw prediction using centerpoint,D_kwDOAnasMc4ATkly,2023-04-25T18:12:27Z,gauthamnarayan,1,Answered,DC_kwDOAnasMc4AV5sW,knzo25,"@gauthamnarayan 
Sorry, I wrote the 110k frames. It may have just been an error on my part. I will check again where did I get the number from but I can confirm that we did not do anything special with the database"
How to better stabilize yaw prediction using centerpoint,D_kwDOAnasMc4ATkly,2023-04-25T18:12:27Z,gauthamnarayan,1,Answered,DC_kwDOAnasMc4AV78P,knzo25,"@gauthamnarayan 
Just checked the data from those experiments and it was just a typo. I swapped the number of samples from nuscenes and argoverse. I will submit a PR fixing this now"
How to better stabilize yaw prediction using centerpoint,D_kwDOAnasMc4ATkly,2023-04-25T18:12:27Z,gauthamnarayan,1,Answered,DC_kwDOAnasMc4AV79k,knzo25,"@yukke42 
Submitted the PR in https://github.com/autowarefoundation/autoware.universe/pull/3571
:bow: "
How to better stabilize yaw prediction using centerpoint,D_kwDOAnasMc4ATkly,2023-04-25T18:12:27Z,gauthamnarayan,1,Answered,DC_kwDOAnasMc4AV8AN,gauthamnarayan,"Thanks @knzo25 for the update. By any chance will you be able to share the mmdetection3d training logs/output for the model? I'm trying to replicate results and am not able to.

Any help to reproduce results will be very much appreciated!"
How to better stabilize yaw prediction using centerpoint,D_kwDOAnasMc4ATkly,2023-04-25T18:12:27Z,gauthamnarayan,1,Answered,DC_kwDOAnasMc4AV8Aw,knzo25,"@gauthamnarayan 
As far as I know, releasing training-related data is an ongoing discussion in the AWF, specifically in the sensing/perception working group (https://docs.google.com/presentation/d/1MujD8dof3Qci6A9eH6-J_feQ3D7iI4OcTd4Ey3iTL6c/edit#slide=id.g2224b7ea427_3_7)."
How to better stabilize yaw prediction using centerpoint,D_kwDOAnasMc4ATkly,2023-04-25T18:12:27Z,gauthamnarayan,1,Answered,DC_kwDOAnasMc4AWSzD,yukke42,"@gauthamnarayan 
Sorry for the late reply, I was on the vacation.

1 We didn't do something special for the centerpoint model. Data augmentation params are slightly changed but I don't think it has a big impact to the orientation stability. As the documentation, our centerpoint model was trained for 60 epochs with nuscenes dataset, but that of mmdet3d is just for 20 epochs.
3 If you're fine, we can continue here.

"
How to better stabilize yaw prediction using centerpoint,D_kwDOAnasMc4ATkly,2023-04-25T18:12:27Z,gauthamnarayan,1,Answered,DC_kwDOAnasMc4AWUW7,gauthamnarayan,"Thanks @yukke42 and @knzo25 for your replies. It seems like this was mostly a data distribution issue. We were able to get some more labelled data and things look much better.

Thanks for your help!"
What's the relationship between behavior_planning and motion_planning ?,D_kwDOAnasMc4ATk-j,2023-04-26T06:41:11Z,logihp,1,Answered,,,
What's the relationship between behavior_planning and motion_planning ?,D_kwDOAnasMc4ATk-j,2023-04-26T06:41:11Z,logihp,1,Answered,DC_kwDOAnasMc4AWAko,shmpwk,"Behavior planning focuses on deciding how the vehicle should behave in different scene, such as lane follwing, lane chage, obstacle avoidance and pull over.
Motion planning involves generating a detailed trajectory or velocity for the vehicle to follow. 
Interestingly, some scene modules are a cross between behaivor planning and motion planning such as [avoidance module.](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/docs/behavior_path_planner_avoidance_design/#why-is-avoidance-in-behavior-module)

>  The difference between motion and behavior module in the planning stack is whether the planner takes traffic rules into account, which is why this avoidance module exists in the behavior module.

You can see the node structure.
https://app.diagrams.net/?lightbox=1#Uhttps%3A%2F%2Ftier4.github.io%2Fautoware-documentation%2Ftier4-main%2Fdesign%2Fnode-diagram%2Foverall-node-diagram-autoware-universe.drawio.svg"
What's the relationship between behavior_planning and motion_planning ?,D_kwDOAnasMc4ATk-j,2023-04-26T06:41:11Z,logihp,1,Answered,DC_kwDOAnasMc4AWISA,logihp,"thanks! I read the avoidance module, i think the purpose of this module is sometime similar to lane-borrow or nudge obstacles in self-lane in Apollo. Can I understand in this way?"
What's the relationship between behavior_planning and motion_planning ?,D_kwDOAnasMc4ATk-j,2023-04-26T06:41:11Z,logihp,1,Answered,DC_kwDOAnasMc4AWQM9,shulanbushangshu,"This module calculates the offset to avoid obstacles according to the relative position of obstacles and lanes (maybe like nudge obstacles), and generally considers the situation of partial encroachment of lanes. Filter obstacles near the center line by setting parameters.
When it comes to avoiding obstacles by lane-change  , it can be realized by other module(avoidance_by_lc)"
Mapping WG Meeting 26/04/2023,D_kwDOAnasMc4ATlIT,2023-04-26T10:02:32Z,armaganarsln,0,Unanswered,,,
2023-04-27 Racing Working Group Meeting,D_kwDOAnasMc4ATltG,2023-04-27T00:31:26Z,QZJGeorge,0,Unanswered,,,
"Error when modifying ""image_number""",D_kwDOAnasMc4ATl09,2023-04-27T05:48:53Z,beginningfan,1,Answered,,,
"Error when modifying ""image_number""",D_kwDOAnasMc4ATl09,2023-04-27T05:48:53Z,beginningfan,1,Answered,DC_kwDOAnasMc4AWNt2,liuXinGangChina,"Hi, mits-san i think we come up with an solution ,should we creat a pr for this? @mitsudome-r 
thanks."
"Error when modifying ""image_number""",D_kwDOAnasMc4ATl09,2023-04-27T05:48:53Z,beginningfan,1,Answered,DC_kwDOAnasMc4AWTAa,mitsudome-r,"@beginningfan Could you be more specific about which argument you are referring to when you say `image_number`? Is it the argument in a launch file?
@liuXinGangChina Yes, please create a PR maybe we can discuss the details there"
"Error when modifying ""image_number""",D_kwDOAnasMc4ATl09,2023-04-27T05:48:53Z,beginningfan,1,Answered,DC_kwDOAnasMc4AWVrH,beginningfan,"@mitsudome-r [Here](https://github.com/autowarefoundation/autoware.universe/blob/e4fefd4c1312e59d4c2d041a6a8d41b1265ef2b6/launch/tier4_perception_launch/launch/perception.launch.xml#L38) is the `image_number` i said. It is a argument in perception.launch, while the `input_offset_ms` is is placed in the [source code](https://github.com/autowarefoundation/autoware.universe/blob/e4fefd4c1312e59d4c2d041a6a8d41b1265ef2b6/perception/image_projection_based_fusion/config/roi_sync.param.yaml#L3)"
"Error when modifying ""image_number""",D_kwDOAnasMc4ATl09,2023-04-27T05:48:53Z,beginningfan,1,Answered,DC_kwDOAnasMc4AWY5R,mitsudome-r,"@beginningfan Thanks. Indeed, `image_number` is number of image topics so it should be 1-8 instead of 0-7. Could you create a PR for it?"
"Error when modifying ""image_number""",D_kwDOAnasMc4ATl09,2023-04-27T05:48:53Z,beginningfan,1,Answered,DC_kwDOAnasMc4AWZAd,beginningfan,"@mitsudome-r In addition, if I want to modify `image_number` ， I need to modify `input_offset_ms` at the same time. Do we need to move the file where the `input_offset_ms` is located to the launch folder？"
"Error when modifying ""image_number""",D_kwDOAnasMc4ATl09,2023-04-27T05:48:53Z,beginningfan,1,Answered,DC_kwDOAnasMc4AWZB2,mitsudome-r,"Yeah, I think it makes more sense.
Maybe we can copy the file to here: https://github.com/autowarefoundation/autoware_launch/tree/main/autoware_launch/config/perception/object_recognition"
"Error when modifying ""image_number""",D_kwDOAnasMc4ATl09,2023-04-27T05:48:53Z,beginningfan,1,Answered,DC_kwDOAnasMc4AWZGO,beginningfan,"That's all right, I will do this soon"
"Error when modifying ""image_number""",D_kwDOAnasMc4ATl09,2023-04-27T05:48:53Z,beginningfan,1,Answered,DC_kwDOAnasMc4AWjIB,beginningfan,"@mitsudome-r  Three PRs have been submitted
[This](https://github.com/autowarefoundation/autoware.universe/pull/3686) fixes image_number description. It has been merged.
This [one](https://github.com/autowarefoundation/autoware_launch/pull/350) and [another](https://github.com/autowarefoundation/autoware.universe/pull/3713) add the sync param file to `autoware_launch` and pass the params to `tier4_perception_launch`"
"Error when modifying ""image_number""",D_kwDOAnasMc4ATl09,2023-04-27T05:48:53Z,beginningfan,1,Answered,DC_kwDOAnasMc4AXEQd,mitsudome-r,@beginningfan The PRs are merged now.
Open AD Kit Working Group Meeting 27/4/23,D_kwDOAnasMc4ATmGm,2023-04-27T12:39:30Z,armaganarsln,0,Unanswered,,,
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,,,
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AV9NB,oguzkaganozt,"This layering is not that feasible and efficient right now as we are introducing too many diffs on one layer. There should be better organization when building the Autoware image. Also, there are too many development packages involved in runtime images. We have started putting some effort into addressing some of these issues in this repo: https://github.com/leo-drive/avte_autoware ."
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AV9gV,kaspermeck-arm,"@xmfcx - start for starting this discussion!

I think that when we're going through this work of rethinking how we want to create and distribute Autoware containers, we should make the split between development environment (DE) and production environment (PE).

I would suggest the following:
* Single DE complete with all tools and dependencies
  * This container can compile and run all of Autoware
* Multi-stage build for PE, inspired by [Athackst Dockerfiles](https://github.com/athackst/dockerfiles/tree/main/ros2#organization)
  * Starting with e.g., [ROS Core](https://github.com/osrf/docker_images/blob/3f4fbca923d80f834f3a89b5960bad5582652519/ros/humble/ubuntu/jammy/ros-core/Dockerfile)
  * Then incrementally adding more dependencies e.g., math libraries and TVM
  * Finally adding NVIDIA dependencies

Other questions:
* Do we want a DE without NVIDIA?
  * Is it possible to compile NVIDIA binaries without having an NVIDIA GPU?
* Do we want source code to be part of the DE container?
* Should built binaries be part of the PE containers?

Inspiration:
* [ROS Official Dockerfiles](https://hub.docker.com/_/ros/)
  * Specifically [Humble Core](https://github.com/osrf/docker_images/blob/3f4fbca923d80f834f3a89b5960bad5582652519/ros/humble/ubuntu/jammy/ros-core/Dockerfile) (runtime only) and [Humble Base](https://github.com/osrf/docker_images/blob/20e3ba685bb353a3c00be9ba01c1b7a6823c9472/ros/humble/ubuntu/jammy/ros-base/Dockerfile)
* [Athackst ROS Dockerfiles](https://github.com/athackst/dockerfiles/tree/main/ros2#organization)
* [SUSE Development Environment](https://www.suse.com/suse-defines/definition/development-environment/)
* [SUSE Production Environment](https://www.suse.com/suse-defines/definition/production-environment/)

I would like to join and discuss this topic. Is this being discussed in the SW working group?"
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AV9nx,xmfcx,"Hi Kasper, thanks for your input!

> I think that when we're going through this work of rethinking how we want to create and distribute Autoware containers, we should make the split between development environment (DE) and production environment (PE).

Yes, I agree. Right now I'd like to focus on the **development environment first**, since that's what the majority of the Autoware users might benefit first. (And me, lol) And once we make it more efficient, we can focus on the PE image too.

So I will focus my answers on single image development Dockerfile for now.

> Single DE complete with all tools and dependencies 

This is what I'd like to improve first. And have this Dockerfile structured with [multi-stage builds](https://docs.docker.com/build/building/multi-stage/).

And also to take advantage of Docker's caching mechanism when building Docker images with multi-stage builds, we should structure the Dockerfile so that the layers that are likely to change frequently (like autoware) are in the final stage of the Dockerfile.

This will help Docker reuse the cached layers from the earlier stages of the Dockerfile when building the final image, which can save time and resources during the build process.

> Do we want a DE without NVIDIA? 

We have and we should have with it and without it.

> Is it possible to compile NVIDIA binaries without having an NVIDIA GPU?

I think so, [Can I compile a cuda program without having a cuda device](https://stackoverflow.com/questions/20186848/can-i-compile-a-cuda-program-without-having-a-cuda-device)

And right now, we build cuda containers in CI without machines having gpus.

> Do we want source code to be part of the DE container?

I also thought about this, and I think, it's unnecessary because we already mount the autoware folder into the docker and use it from there anyways. But even if we are to include it, we shouldn't include the `.git` folders in them since they are too large. (autoware.universe .git folder is about 600MB)

But we can also add it as the last stage of the multi stage build.

> I would like to join and discuss this topic. Is this being discussed in the SW working group?

Right now, SW working group focuses on general issues since we have 3 new working groups:
- Perception & Sensing WG
- Planning & Control WG
- Localization & Mapping WG

This is my first time bringing this issue up, so we can talk about this issue in the Software WG."
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AV9qX,kaspermeck-arm,"@xmfcx - thanks for your response!

> > I think that when we're going through this work of rethinking how we want to create and distribute Autoware containers, we should make the split between development environment (DE) and production environment (PE).
> 
> Yes, I agree. Right now I'd like to focus on the **development environment first**, since that's what the majority of the Autoware users might benefit first. (And me, lol) And once we make it more efficient, we can focus on the PE image too.
> 
> So I will focus my answers on single image development Dockerfile for now.
> 

I agree, it makes sense to start with the DE. If we can try to label or categorize ROS packages with their specific dependencies, that'll be helpful later when creating the PEs. Is there a convenient way to get this information, e.g., from the `CMakeLists.txt` files for each ROS package?

> > Single DE complete with all tools and dependencies
> 
> This is what I'd like to improve first. And have this Dockerfile structured with [multi-stage builds](https://docs.docker.com/build/building/multi-stage/).
> 
> And also to take advantage of Docker's caching mechanism when building Docker images with multi-stage builds, we should structure the Dockerfile so that the layers that are likely to change frequently (like autoware) are in the final stage of the Dockerfile.
> 
> This will help Docker reuse the cached layers from the earlier stages of the Dockerfile when building the final image, which can save time and resources during the build process.

Regarding the DE. Effectively, would we have a two-stage build; one without NVIDIA and one with NVIDIA? (with is based, i.e., `FROM`, on without)
 
> > Do we want source code to be part of the DE container?
> 
> I also thought about this, and I think, it's unnecessary because we already mount the autoware folder into the docker and use it from there anyways. But even if we are to include it, we shouldn't include the `.git` folders in them since they are too large. (autoware.universe .git folder is about 600MB)
> 
> But we can also add it as the last stage of the multi stage build.

I agree it's unnecessary.
 
> > I would like to join and discuss this topic. Is this being discussed in the SW working group?
> 
> Right now, SW working group focuses on general issues since we have 3 new working groups:
> 
>     * Perception & Sensing WG
>     * Planning & Control WG
>     * Localization & Mapping WG
> 
> This is my first time bringing this issue up, so we can talk about this issue in the Software WG.

If you want, we can make this a topic in the Open AD Kit WG. This work fits nicely with some of the _dojos_ we have in the pipeline. What do you think?"
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AV-HA,xmfcx,"> If we can try to label or categorize ROS packages with their specific dependencies, that'll be helpful later when creating the PEs. Is there a convenient way to get this information, e.g., from the CMakeLists.txt files for each ROS package?

For the scope of this discussion, it's not necessary, since I just want to reorganize the layers of the single image and if possible, reuse existing images.

But for exploring the dependency tree of a package/s, you can use https://colcon.readthedocs.io/en/released/reference/verb/graph.html (But this will only give the ROS2 package dependencies)

> Regarding the DE. Effectively, would we have a two-stage build; one without NVIDIA and one with NVIDIA? (with is based, i.e., FROM, on without)

Right now, we have:
- https://github.com/orgs/autowarefoundation/packages/container/autoware-universe/85618306?tag=humble-latest-amd64
- https://github.com/autowarefoundation/autoware/pkgs/container/autoware-universe/85632914?tag=humble-latest-prebuilt-amd64
- https://github.com/autowarefoundation/autoware/pkgs/container/autoware-universe/85621839?tag=humble-latest-cuda-amd64
- https://github.com/autowarefoundation/autoware/pkgs/container/autoware-universe/70625594?tag=humble-latest-prebuilt-cuda-amd64

and their arm counterparts. Right now, I don't have a plan to change current images.

> If you want, we can make this a topic in the Open AD Kit WG. This work fits nicely with some of the dojos we have in the pipeline. What do you think?

Right now, I am just collecting thoughts of developers who might be interested.
I prefer discussing it offline for now. And if anyone is interested to tackle the issues, I am open for it."
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AV_Lw,doganulus,"> Do we want the source code to be part of the DE container?

I would say no. The source code must be mounted and built in the DE. Here it may be also a good idea to split a headless Build Environment (BE), which can build Autoware and is usable in CI/CD, and add the developer layer (with graphical tools) on top of the BE. 

> Should built binaries be part of the PE containers?

I would say yes. Binaries and their runtime dependencies only. I tried but found it hard to extract runtime dependencies though. It needs a discussion or dojo, I think.
"
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AWBum,kaspermeck-arm,"@doganulus, thanks for your comment, I agree with the source code not being included in the DE and the binaries included in the PE.

> > Do we want the source code to be part of the DE container?
> 
> I would say no. The source code must be mounted and built in the DE. Here it may be also a good idea to split a headless Build Environment (BE), which can build Autoware and is usable in CI/CD, and add the developer layer (with graphical tools) on top of the BE.
> 

Would the DE expand the BE? (i.e., DE using `from` BE)

Edit:
I've been reading a bit more about the different environment and ""staging"" seems to be a term that frequently comes up. Not sure how a stage and a build environment would differ. @doganulus , are you familiar with this term?"
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AWDFT,doganulus,"@kaspermeck-arm By a build environment, I mean a container where all build dependencies are installed and ready to build Autoware. This includes the compiler, required system libraries, and third-party dependencies. I also like to put testing tools in my build environments. 

Autoware developers would also need extra tools, especially graphical tools, then I would love to add them as a separate layer. And, yes, this extends the build environment using the `FROM` statement. There might be other ways though if we use Ansible as discussed below. 

Not sure if I understand `staging` in this context. But maybe some elaborate workflows need to distinguish multiple build environments, say, to check newer versions of dependencies for example. Then this can make sense and might help for easier migrations.

The other thought: A staging environment would mean Autoware runtime environment + simulation environment where the scenario-based tests run. I think this is closer to the meaning of the term in web development.
 
"
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AWA2O,kenji-miyake,"@xmfcx Thank you for raising this. I'll give you some related information.

> Right now we have a 15.7GB blob of a layer which we have to download the entirety of it if we do a docker pull.

The largest part (maybe over 10GB) is CUDA, which will be improved by https://github.com/autowarefoundation/autoware/pull/3084.

> Maybe we can use OSRF ROS2 humble desktop image to modularize the deployment of the current docker images?

It could be, but please note that OSRF doesn't provide CUDA images.
Maybe we need to create some base images containing ROS and CUDA by ourselves. (For example, in `autowarefoundation/autoware-docker-base-images` or something?)

> But if we separate the dockerfile build steps into multiple layers, keeping less updated layers at beginning and more updated Autoware related layers at the end.

It's a good practice, but please note that (although you already know that) splitting it into too many layers may increase maintenance costs."
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AWBrf,xmfcx,"We can use the `osrf/ros:humble-desktop` base image and for CUDA, either:
- add the layer of CUDA as a normal build step
- once they release the latest tensorrt images, we can use `FROM` and `COPY` to incorporate them into our image maybe.

Right now, every time we pull the latest docker images, we have to download large files.
Improving this will help developers iterate faster.
I believe we can also do this without increasing the maintenance costs too.
Basically various Ansible steps may form the layers of the image.

Current 1 big layer of everything needs to change."
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AWBta,kaspermeck-arm,"@kenji-miyake thanks for your comment, I have one question, see below.

> 
> It's a good practice, but please note that (although you already know that) splitting it into too many layers may increase maintenance costs.
>

Why does more layers increase maintenance costs?"
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AWBuU,kaspermeck-arm,"> We can use the `osrf/ros:humble-desktop` base image and for CUDA, either:
> 
>     * add the layer of CUDA as a normal build step
>     * once they release the latest tensorrt images, we can use `FROM` and `COPY` to incorporate them into our image maybe.
> 

I think it is a good approach to use the official ROS image as our base, that aligns us with the ROS community. If we find any issues, this should be reported and fixed upstream.

NVIDIA support is a trickier one... Are there legal implications redistributing built containers including NVIDIA support?"
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AWBvt,kenji-miyake,"> Why does more layers increase maintenance costs?

@kaspermeck-arm I'm not sure how the Dockerfile will exactly be, but my concern is as follows:
- Currently, all steps are written in Ansible playbooks such as https://github.com/autowarefoundation/autoware/blob/eb0ac2afd005e0b55a68a9b455d52ef721829290/ansible/playbooks/universe.yaml#L31-L50.
- And all the roles are loaded via `setup-dev-env.sh` here.
  - https://github.com/autowarefoundation/autoware/blob/eb0ac2afd005e0b55a68a9b455d52ef721829290/docker/autoware-universe/Dockerfile#L31
  - https://github.com/autowarefoundation/autoware/blob/eb0ac2afd005e0b55a68a9b455d52ef721829290/setup-dev-env.sh#L140
- If you split this into multiple steps, at least you need to write some role names in Dockerfile.
- That means, when you modify roles, you need to edit both playbooks and Dockerfile, which is a little increase of maintenance costs.

Is it clear?"
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AWBwO,kaspermeck-arm,"@kenji-miyake, thanks for the explanation, I think I understand.

Why are we using ansible?"
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AWBxR,kenji-miyake,"> Why are we using ansible?

@kaspermeck-arm Just because we don't have enough resource to maintain an elaborated Dockerfile. If someone can maintain it, it's okay for me to change Dockerfile drastically."
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AWBxi,kenji-miyake,"> NVIDIA support is a trickier one... Are there legal implications redistributing built containers including NVIDIA support?

@kaspermeck-arm I believe there is no problem if we don't redistribute CUDA Driver Libraries.
Related: https://github.com/autowarefoundation/autoware_core_universe_prototype/pull/338
(But I'm not so confident.)"
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AWCzZ,doganulus,"We can do it only via Ansible roles and playbooks. In Dockerfile, we would call the playbook(s) and build the development container. The same playbooks can be used locally for those preferring local development or remotely for bare metal deployments. And I think we can refactor the current setup around Ansible and remove shell scripts, `.env` files, and `.repos` files. Ansible would easily cover the functionality of these tools and more. This would be especially helpful for newcomers and students who are often lost in the initial setup/build process."
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AWC8J,xmfcx,"@doganulus I was thinking the same, I think it's the cleanest solution.

I think @kenji-miyake is raising the issue of maintenance of manually keeping the role names up to date in case of future refactorings:
@kenji-miyake said:
> - If you split this into multiple steps, at least you need to write some role names in Dockerfile.
> - That means, when you modify roles, you need to edit both playbooks and Dockerfile, which is a little increase of maintenance costs.

But as long as someone does this work and documents it well to help future maintainers, I think it's a worth investment.

As @kenji-miyake said,
> Just because we don't have enough resource to maintain an elaborated Dockerfile. If someone can maintain it, it's okay for me to change Dockerfile drastically.

It's a matter of who will take the responsibility and work on the task.

@doganulus said:
>  And I think we can refactor the current setup around Ansible and remove shell scripts, .env files, and .repos files. Ansible would easily cover their functionality of these tools and more.

- `.env` files are useful for also making the manual installation steps easier too. And they are used across CI in general.
- `.repos` file is used wor `vcs` and I like using it and have no problems with it.

But I think these 2 topics should be discussed in another discussion topic."
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AWRwv,xmfcx,"Here is an updated version of my idea of reconstructed images.

### Changes
- Instead of [osrf/ros:humble-desktop](https://hub.docker.com/layers/osrf/ros/humble-desktop/images/sha256-97f179f6bbcc60c6ffbef88486b3a29a3c79794c0a233e50a9f65130ac5533b5)
  - Use [ros:rolling-ros-base-jammy](https://hub.docker.com/layers/library/ros/rolling-ros-base-jammy/images/sha256-0b8d4b1d363a67cf3c95eb289f00a428230aa794032ef06e274235f1ec22a904?context=explore) and [ros:humble](https://hub.docker.com/layers/library/ros/humble/images/sha256-f05e713cd384afe798581f9bbf312a249102fb37a184049b9457e9fef90d137e?context=explore)
  - Because it has arm64 versions and also light and heavy versions are divided.

### Related ideas with debian packaging of Autoware
- Runtime image can also be created by the resulting debian installation method of [Generate Debian packages for the ROS packages in Autoware.core and Autoware.universe](https://github.com/autowarefoundation/autoware/issues/3222)

### Rough Dockerfiles Diagram

```mermaid
graph TD
    subgraph Diagram
    tit01(""Autoware Docker Images""):::cl1 --> itA011(""Development and Build Environment""):::cl2
    itA011 --> itA01(""FROM ros:humble""):::cl4
    itA01 --> itA02(""apt dist-upgrade""):::cl3
    itA02 --> itA03(""ansible""):::cl3
    itA03 --> itA04(""ansible - roles (except cuda)""):::cl3
    itA04 --> itA05(""ansible - cuda, cudnn, tensorrt""):::cl3
    itA05 --> itA06(""pull latest autoware""):::cl3
    itA06 --> itA07(""rosdep install""):::cl3
    itA07 --> itA08(""build autoware""):::cl3
    itA08 --> itA09(""test autoware""):::cl3
    itA09 --> itA10(""remove autoware folder""):::cl3
    itA10 --> img01(""Development Image""):::cl5
    itA09 --> img02(""Prebuilt Image""):::cl5

    tit01 --> itB01(""Production Environment""):::cl2
    itB01 --> itB02(""FROM ros:humble-ros-base-jammy""):::cl4
    itB02 --> itB03(""apt dist-upgrade""):::cl3
    itB03 --> itB04(""ansible""):::cl3
    itB04 --> itB05(""ansible - runtime roles""):::cls1
    itB05 --> itB06(""ansible - cuda, cudnn, tensorrt (runtime)""):::cl3
    itB06 --> itB071(""FROM autoware:prebuilt COPY autoware folder""):::cl4
    itB071 --> itB07(""rosdep install -t exec""):::cl3
    itB07 --> itB08(""test autoware""):::cl3
    itB08 --> itB09(""remove build, src, log folders""):::cl3
    itB09 --> itB10(""remove testing tooling""):::cls1
    itB10 --> itB11(""Runtime Image""):::cl5
    end

    Diagram --- Legend

    %% Color-based legend
    subgraph Legend
        direction TB
        lg1[""Title""]:::cl1
        lg2[""Environment Types""]:::cl2
        lg3[""Pseudo Layers""]:::cl3
        lg4[""Image References""]:::cl4
        lg5[""Images""]:::cl5
        lg6[""Needs discussion""]:::cls1
    end

    %% Carnation pink
    classDef cl1 stroke:#111,fill:#FF99C8 
    %% Uranian blue
    classDef cl2 stroke:#111,fill:#A9DEF9
    %% Nyanza green
    classDef cl3 stroke:#111,fill:#D0F4DE
    %% Lemon chiffon
    classDef cl4 stroke:#111,fill:#FCF6BD
    %% Mauve violet
    classDef cl5 stroke:#111,fill:#E4C1f9

    %% Nyanza green striked
    classDef cls1 stroke:#F00,fill:#D0F4DE,stroke-dasharray: 5 5,stroke-width:3px

```

I'd like to hear your opinions about this way of restructuring the layers and images.

cc. @oguzkaganozt @kenji-miyake @kaspermeck-arm @HamburgDave @armaganarsln @doganulus @esteve "
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AWTFR,doganulus,"Some comments:
- I think it is a good idea to use a base image supporting both `amd64` and `arm64`.
- Normally I don't put source code and build artifacts into my dev environments. Here I think the dev image can be cut after `rosdep`. Do you have still a reason to continue shipping prebuilt images? Are you concerned with build times? The runtime image could replace its use case.

For the runtime environment, how about that:
1. Start from the dev environment and build/test the latest version (no need if Debian packages exist).
2. Switch to the ROS base image, add runtime dependencies, and copy the autoware directory from the previous stage or install Debian packages. "
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AWT5s,xmfcx,"@doganulus Thanks for the comments,

> Normally I don't put source code and build artifacts into my dev environments. Here I think the dev image can be cut after rosdep. Do you have still a reason to continue shipping prebuilt images? Are you concerned with build times? The runtime image could replace its use case.

- For this, I've added the `Development Image` which removes the autoware folder (which also would remove the build artifacts)
- We already need to build and test the autoware in this image to make sure it provides the necessities. It should be ok to have these artifacts stored in a version of image.
- For the `Prebuilt Image`, It's for people who might prefer to run and debug the autoware right away without waiting to compile it. Also the build artifacts are referenced in the `Runtime Image` to be used.
- I think debian packages could make for an alternative runtime image too.

> - Start from the dev environment and build/test the latest version (no need if Debian packages exist).
> - Switch to the ROS base image, add runtime dependencies, and copy the autoware directory from the previous stage or install Debian packages.

I think we're in agreement here. The steps you outlined are exactly what I described in my previous post. I might have misunderstood it too. Is there anything else we need to address?

![Screenshot from 2023-05-09 15-20-21](https://github.com/autowarefoundation/autoware/assets/10751153/dd660aa1-1783-47b7-adf9-6b962bd460e6)
"
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AWUJS,doganulus,"> The steps you outlined are exactly what I described in my previous post.

That's correct. The difference is in the delineation and tagging of those steps. 

Besides, not adding an artifact vs adding & then removing the artifact is not the same in containers as far as I know. We still download the artifact unless everything happens in one step. Please correct me if this is not true or if there is another solution for that.

Tried to visualize: 

![image](https://github.com/autowarefoundation/autoware/assets/1174212/5304f159-fcc2-4aee-9a12-82ab800b7d57)"
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AWUWr,xmfcx,"Thanks for clarifying,

I think this is because I wanted to test the image before finalizing it.
Because we cannot test it without the build artifacts.

But if we perform the testing without without directly calling them on the Dockerfiles, we can tag the images after we test them too.

I don't have much experience on testing infrastructure management using Docker and I am open for suggestions.

I think the layout would change like the following, with your suggestion if we offload the testing job out of the Dockerfile.

But the `rosdep install` command is necessary to install the dependencies from the autoware `src` file. So I think autoware should be pulled at least once to install its dependencies. (Marked with magenta question mark below)

![Screenshot from 2023-05-09 17-57-25](https://github.com/autowarefoundation/autoware/assets/10751153/9f7e6a91-aaee-4194-82eb-cd1a886a3ec4)"
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AWUnA,doganulus,"I also think it is better to leave testing out when building Dockerfiles. Testing in CI or testing using external tools would give more opportunities to experiment. If the pipeline produces runtime images daily/weekly/monthly, automatic testing processes can consume them directly. If an image survives all the tests, then we may call it a deployment candidate to be tested on a real vehicle that uses the very same image.

> But the rosdep install command is necessary to install the dependencies from the autoware src file. So I think autoware should be pulled at least once to install its dependencies.

True and this slightly bothers me. This is because of the federated nature of ROS packages where each package can declare its own dependencies. This has advantages but also disadvantages. For a big project like Autoware, it may be better to manage dependencies centrally (maybe for Autoware.Core). In the short term, the way you describe above seems the solution.
"
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AWXFS,ambroise-arm,"We can always do

```dockerfile
RUN git clone [...] && vcs import [...] && rosdep install && rm -r autoware
```

to get to the dev image without the autoware repositories in the layer. Which I think is much better than a dev image that doesn't have the autoware-specific dependencies in it. Same idea for the runtime image.

~But then if we do this and follow the diagram it means the prebuilt image with full dependency is used as a base for the runtime image. So doing `rosdep install -t exec` will do nothing and there will be too much things in the runtime image. If we want to reuse the prebuilt artifacts,~ would it make sense to do it as we were in Autoware.Auto? Something like https://gitlab.com/autowarefoundation/autoware.auto/AutowareAuto/-/blob/master/.aderc-arm64-foxy but with docker compose? So that the prebuilt binaries image could be used by both the dev and runtime use cases?

EDIT: oh, it is just a copy from the prebuilt to the runtime image. Forget about the dependency contamination bit."
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AWXMD,xmfcx,"To summarize this discussion, I've updated the initial layout.
- Made it more clear that prebuilt binaries are being used in the production environment
- Marked testing to not be a part of the docker images

```mermaid
graph TD
    subgraph dev[Development and Build Environment]

    itA01(""FROM ros:humble""):::cl4
    itA01 --> itA02(""apt dist-upgrade""):::cl3
    itA02 --> itA03(""ansible""):::cl3
    itA03 --> itA04(""ansible - roles (except cuda)""):::cl3
    itA04 --> itA05(""ansible - cuda, cudnn, tensorrt""):::cl3
    itA05 --> itA06(""pull latest autoware""):::cl3
    itA06 --> itA07(""rosdep install""):::cl3
    itA07 --> itA08(""build autoware""):::cl3
    itA08 --> itA09(""test autoware""):::cl6
    itA09 --> itA10(""remove autoware folder""):::cl3
    itA10 --> img01(""Development Image""):::cl5
    itA09 --> img02(""Prebuilt Image""):::cl5

    end
    class dev clb1;

    subgraph prod[Production Environment]

    itB02(""FROM ros:humble-ros-base-jammy""):::cl4
    itB02 --> itB03(""apt dist-upgrade""):::cl3
    itB03 --> itB04(""ansible""):::cl3
    itB04 --> itB05(""ansible - runtime roles""):::cls1
    itB05 --> itB06(""ansible - cuda, cudnn, tensorrt (runtime)""):::cl3
    itB06 --> itB071(""FROM autoware:prebuilt COPY autoware folder""):::cl4
    itB071 --> itB07(""rosdep install -t exec""):::cl3
    itB07 --> itB08(""test autoware""):::cl6
    itB08 --> itB09(""remove build, src, log folders""):::cl3
    itB09 --> itB10(""remove testing tooling""):::cls1
    itB10 --> itB11(""Runtime Image""):::cl5

    img02 -.-> itB071

    end
    class prod clb2;

    %% Carnation pink
    classDef cl1 stroke:#111,fill:#FF99C8 
    %% Uranian blue
    classDef cl2 stroke:#111,fill:#A9DEF9
    %% Nyanza green
    classDef cl3 stroke:#111,fill:#D0F4DE
    %% Lemon chiffon
    classDef cl4 stroke:#111,fill:#FCF6BD
    %% Mauve violet
    classDef cl5 stroke:#111,fill:#E4C1f9
    %% Tea rose
    classDef cl6 stroke:#111,fill:#FEC8C3


    %% yellow
    classDef clb1 stroke:#111,fill:#F2EFD2,stroke:#FFF
    %% pink
    classDef clb2 stroke:#111,fill:#F3C0D8,stroke:#FFF
    %% gray
    classDef clb3 stroke:#111,fill:#E7E7E7,stroke:#FFF

    %% Nyanza green striked
    classDef cls1 stroke:#F00,fill:#D0F4DE,stroke-dasharray: 5 5,stroke-width:3px
```

```mermaid
graph TD
    %% Color-based legend
    %%lg1[""Title""]:::cl1
    %%lg2[""Environment Types""]:::cl2
    lg3[""Pseudo Layers""]:::cl3
    lg4[""Image References""]:::cl4
    lg5[""Images""]:::cl5
    lg7[""Tested outside""]:::cl6
    lg6[""Needs discussion""]:::cls1

    %% Carnation pink
    classDef cl1 stroke:#111,fill:#FF99C8 
    %% Uranian blue
    classDef cl2 stroke:#111,fill:#A9DEF9
    %% Nyanza green
    classDef cl3 stroke:#111,fill:#D0F4DE
    %% Lemon chiffon
    classDef cl4 stroke:#111,fill:#FCF6BD
    %% Mauve violet
    classDef cl5 stroke:#111,fill:#E4C1f9
    %% Tea rose
    classDef cl6 stroke:#111,fill:#FEC8C3

    %% Nyanza green striked
    classDef cls1 stroke:#F00,fill:#D0F4DE,stroke-dasharray: 5 5,stroke-width:3px
```

Please let me know if I've missed something."
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AWYbI,kaspermeck-arm,"@xmfcx thanks for updating the diagram!

Some things to discuss:
* how are Development and Production Environments validated?
* building Autoware; inside or outside the container image?
  * build artifacts will be inside the container
* dependencies dilemma
  * Autoware source code is needed to install the dependencies 
  * the Autoware source code shouldn't be in the container image
"
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AWaPS,oguzkaganozt,"Some comments and findings about Autoware containers:

- Right now we have monolithic image which includes all dependencies and executables in one docker image. I think we should have a **minimal custom base image** (on top of **osrf:ros-base**) to have a good starting point for specific runtime images. Also having a custom base image can be more maintainable then we can focus more on specific needs in other images.

- Also our image contains unnecessary dependencies for runtime this puts significant overhead to the size of our images; to fix this we should change our ansible playbook to be modular as possible so that we can install only necessary dependencies for specific needs.

- Regarding the need to have source code to run the rosdep in production environment, maybe we can dump the rosdep keys into a file inside prebuilt image then just copy the file and install the keys inside the production image. For dumping the keys we can use something like:
`rosdep install -y --ignore-src --from-paths src --simulate --reinstall --rosdistro ""$ROS_DISTRO""`
"
Maybe use another base image for docker and re-arrange the layers,D_kwDOAnasMc4ATnFL,2023-04-28T13:42:06Z,xmfcx,4,Answered,DC_kwDOAnasMc4AWlyq,kaspermeck-arm,"@oguzkaganozt, thanks for your comments!

>     * Right now we have monolithic image which includes all dependencies and executables in one docker image. I think we should have a **minimal custom base image** (on top of **osrf:ros-base**) to have a good starting point for specific runtime images. Also having a custom base image can be more maintainable then we can focus more on specific needs in other images.

How many dependencies are there for all of Autoware? E.g.:
* ROS core (this is the baseline)
  * This is the lowest level of dependency
* Other ROS dependencies
* Math libraries
  * E.g., BLAS implementations such as ArmPL
* Simulators
* CUDA
  * TensorRT, CuDNN, etc...

How do we find these dependencies? I assume on a per-node basis?
 
>     * Also our image contains unnecessary dependencies for runtime this puts significant overhead to the size of our images; to fix this we should change our ansible playbook to be modular as possible so that we can install only necessary dependencies for specific needs.

I agree that having a modular approach will make it easier to build custom images. Basically, each module is an independent dependency install.

>     * Regarding the need to have source code to run the rosdep in production environment, maybe we can dump the rosdep keys into a file inside prebuilt image then just copy the file and install the keys inside the production image. For dumping the keys we can use something like:
>       `rosdep install -y --ignore-src --from-paths src --simulate --reinstall --rosdistro ""$ROS_DISTRO""`

I like this approach, then the method which TUM uses would work to create rosdep keys for the different features."
Rocker Docker Errors with python:3-slim-stretch - unable to detect os for base image,D_kwDOAnasMc4ATnR5,2023-04-28T18:17:18Z,Croquembouche,1,Answered,,,
Rocker Docker Errors with python:3-slim-stretch - unable to detect os for base image,D_kwDOAnasMc4ATnR5,2023-04-28T18:17:18Z,Croquembouche,1,Answered,DC_kwDOAnasMc4AV9ob,Croquembouche,"The workaround for this issue:

1. run `rocker --nvidia --x11 --user --volume $HOME/autoware --volume $HOME/autoware_map -- ghcr.io/autowarefoundation/autoware-universe:latest-cuda` like you normally do.
2.  see the error, then run `docker run -it python:3-slim-stretch bash` to go inside the container.
3. run `echo ""deb http://archive.debian.org/debian stretch main"" > /etc/apt/sources.list` to add the packages.
4. Start a new tab in the terminal, run `docker ps` to obtain the ""container id""
5. run `docker commit ""container id"" python:3-slim-stretch` to overwrite the original python:3-slim-stretch image.
6. run `rocker --nvidia --x11 --user --volume $HOME/autoware --volume $HOME/autoware_map -- ghcr.io/autowarefoundation/autoware-universe:latest-cuda` like you normally do.

This will be the temporary fix around this issue until rocker can correct their package. Rocker is aware of this issue as of 3 days ago."
Rocker Docker Errors with python:3-slim-stretch - unable to detect os for base image,D_kwDOAnasMc4ATnR5,2023-04-28T18:17:18Z,Croquembouche,1,Answered,DC_kwDOAnasMc4AV-Hv,xmfcx,"@Croquembouche 
I had the same error too. 
But I think https://github.com/osrf/rocker/issues/220#issuecomment-1525096253 is a simpler and cleaner way to solve this.

```
# probably better to first uninstall the apt version by 
# sudo apt purge python3-rocker
pip install --force-reinstall git+https://github.com/osrf/rocker.git@main
```"
Software WG Meeting 2023/05/02,D_kwDOAnasMc4ATp7K,2023-05-02T11:15:17Z,xmfcx,0,Unanswered,,,
Adding ML-based occupancy prediction to Autoware,D_kwDOAnasMc4ATrjC,2023-05-04T08:17:27Z,lexavtanke,0,Unanswered,,,
rviz2 crashed when run a rosbag replay simulation,D_kwDOAnasMc4ATtxE,2023-05-07T06:27:55Z,zymgp,1,Answered,,,
rviz2 crashed when run a rosbag replay simulation,D_kwDOAnasMc4ATtxE,2023-05-07T06:27:55Z,zymgp,1,Answered,DC_kwDOAnasMc4AWSk1,yuasabe,"I also recently came by a similar problem where rviz2 would crash with a segmentation fault when launched with Autoware. (i.e. `rviz2 -d /home/ywc/autoware/install/autoware_launch/share/autoware_launch/rviz/autoware.rviz)`.

In my case, the error included outputs like the ones below:
```
libGL error: failed to create drawable
libGL error: failed to create drawable
libGL error: failed to create drawable
libGL error: failed to create drawable
[1]    6220 segmentation fault (core dumped)  LIBGL_DEBUG=verbose rviz2 -d
```

The problem was that in the Ubuntu Settings, under the ""Displays"" panel, the ""Scale"" of the display was set to 200% instead of the default 100%. Changing this back to 100% fixed the issue.

![Screenshot from 2023-05-08 19-04-44](https://user-images.githubusercontent.com/5180742/236964916-f888e193-4224-4572-8044-4c7814b2c740.png)

I'm not sure whether this will solve your issue, but I'll put this out there for anyone with similar issues."
rviz2 crashed when run a rosbag replay simulation,D_kwDOAnasMc4ATtxE,2023-05-07T06:27:55Z,zymgp,1,Answered,DC_kwDOAnasMc4AWumI,zymgp,This solution works for me! Thank you! 
rviz2 crashed when run a rosbag replay simulation,D_kwDOAnasMc4ATtxE,2023-05-07T06:27:55Z,zymgp,1,Answered,DC_kwDOAnasMc4Aa33g,shmpwk,This helps me a lot thanks!
Double precision to single precision translation of lidar points values,D_kwDOAnasMc4ATtzB,2023-05-07T07:53:59Z,vnodpangul,1,Answered,,,
Double precision to single precision translation of lidar points values,D_kwDOAnasMc4ATtzB,2023-05-07T07:53:59Z,vnodpangul,1,Answered,DC_kwDOAnasMc4AWQgk,VRichardJP,What is the point of reducing precision? reducing PCD file size?
use lanlet2 filter perception objects,D_kwDOAnasMc4ATuze,2023-05-08T03:16:28Z,wangxianggang1997,1,Answered,,,
use lanlet2 filter perception objects,D_kwDOAnasMc4ATuze,2023-05-08T03:16:28Z,wangxianggang1997,1,Answered,DC_kwDOAnasMc4Ab7wL,cycyc1949,"It may not be a good idea to display only objects on the lanlet2 map road, such as pedestrians or bicycles that have the potential to intrude from outside the road into the road"
2023-05-08 ODD working group weekly meeting (139),D_kwDOAnasMc4ATu7E,2023-05-08T07:20:31Z,Igata-ctrl,0,Unanswered,,,
Add traffic light lamp shape to autoware_msgs,D_kwDOAnasMc4ATvHf,2023-05-08T11:54:33Z,Mingyu1991,0,Unanswered,,,
Software WG Meeting 2023/05/09,D_kwDOAnasMc4ATvwO,2023-05-09T05:02:00Z,mitsudome-r,0,Unanswered,,,
"why is planning trajectory altered, depending on the goal position.",D_kwDOAnasMc4ATv0q,2023-05-09T07:15:20Z,Naophis,1,Answered,,,
"why is planning trajectory altered, depending on the goal position.",D_kwDOAnasMc4ATv0q,2023-05-09T07:15:20Z,Naophis,1,Answered,DC_kwDOAnasMc4AWTLj,takayuki5168,"@Naophis This is because of smooth goal connection feature in behavior_path_planner.
https://docs.google.com/presentation/d/1fmn9NZhuZIsr8JFgsLUp-OQ-UrRfkAVdvpnA3kod_zw/edit#slide=id.g1c58b1e9ea4_2_798"
"why is planning trajectory altered, depending on the goal position.",D_kwDOAnasMc4ATv0q,2023-05-09T07:15:20Z,Naophis,1,Answered,DC_kwDOAnasMc4AWTTw,Naophis,"Thank you for the information.

The smoother is too strong for my robots which has maximum speed of 6km/h.
Please advise on how to adjust the settings to weaken it."
"why is planning trajectory altered, depending on the goal position.",D_kwDOAnasMc4ATv0q,2023-05-09T07:15:20Z,Naophis,1,Answered,DC_kwDOAnasMc4AWVmk,Naophis,"@takayuki5168 

I was able to resolve it . 
The cause was that the setting value for `smooth goal connection` was not appropriate for my robots and the running path.
It seems that the initial values are set for cars.

I was able to fix the issue by reducing `refine_goal_search_radius_range` from `7.5` to `1.5`.
https://github.com/autowarefoundation/autoware.universe/blob/main/planning/behavior_path_planner/config/behavior_path_planner.param.yaml#L15

thanks.

> This refine goal logic description url  is following 
https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/#smooth-goal-connection"
AveragePool_0 stride for traffic_light_classifier_mobilenetv2.onnx,D_kwDOAnasMc4ATv27,2023-05-09T08:05:01Z,jamestkpoon,0,Unanswered,,,
"Messages Migration from ""autoware_auto_msgs"" to ""autoware_msgs""",D_kwDOAnasMc4ATwj8,2023-05-10T02:12:49Z,cyn-liu,3,Answered,,,
"Messages Migration from ""autoware_auto_msgs"" to ""autoware_msgs""",D_kwDOAnasMc4ATwj8,2023-05-10T02:12:49Z,cyn-liu,3,Answered,DC_kwDOAnasMc4AWY66,mitsudome-r,cc. @xmfcx 
"Messages Migration from ""autoware_auto_msgs"" to ""autoware_msgs""",D_kwDOAnasMc4ATwj8,2023-05-10T02:12:49Z,cyn-liu,3,Answered,DC_kwDOAnasMc4AWcH3,cyn-liu,"Hi @mitsudome-r  @xmfcx :
I found that `Universe` repos  not only uses messages from [autoware-auto-msg](https://github.com/tier4/autoware_auto_msgs) , but also uses the messages from [tier4_autoware_msgs](https://github.com/tier4/tier4_autoware_msgs), Do I also need to migrate `tier4_autoware_msgs` into `autoware_msg`?"
"Messages Migration from ""autoware_auto_msgs"" to ""autoware_msgs""",D_kwDOAnasMc4ATwj8,2023-05-10T02:12:49Z,cyn-liu,3,Answered,DC_kwDOAnasMc4AWcIJ,mitsudome-r,"@cyn-liu I think we an focus on autoware_auto_msgs, tier4_autoware_msgs only contains the TIRE IV's original message type."
"Messages Migration from ""autoware_auto_msgs"" to ""autoware_msgs""",D_kwDOAnasMc4ATwj8,2023-05-10T02:12:49Z,cyn-liu,3,Answered,DC_kwDOAnasMc4AWnuS,xmfcx,"@cyn-liu  thanks for taking on this task.

> In the first phase of the migration, the nodes of various algorithm modules in Universe will be migrated to the Core version without any changes.

Right now we are not ready for putting anything to Autoware Core just yet.
Our first goal is to transition from [autoware_auto_msgs](https://github.com/tier4/autoware_auto_msgs) to [autoware_msgs](https://github.com/autowarefoundation/autoware_msgs).

> I am preparing to migrate the rest messages related to localization, such as migrate [autoware_auto_mapping_msgs](https://github.com/tier4/autoware_auto_msgs/tree/tier4/main/autoware_auto_mapping_msgs) to [autoware_map_msgs](https://github.com/autowarefoundation/autoware_msgs/tree/main/autoware_map_msgs) and [autoware_auto_geometry_msgs](https://github.com/tier4/autoware_auto_msgs/tree/tier4/main/autoware_auto_geometry_msgs) to [autoware_common_msgs](https://github.com/autowarefoundation/autoware_msgs/tree/main/autoware_common_msgs).

- https://github.com/tier4/autoware_auto_msgs/tree/tier4/main/autoware_auto_geometry_msgs
  - It has 3 messages inside and none of them have any use in the code base. We can just remove the references to these messages and that should be it. We don't need to migrate.
  - You don't need to migrate them to https://github.com/autowarefoundation/autoware_msgs/tree/main/autoware_common_msgs for now.
- https://github.com/tier4/autoware_auto_msgs/tree/tier4/main/autoware_auto_mapping_msgs
  - This is migrated to https://github.com/autowarefoundation/autoware_msgs/tree/main/autoware_map_msgs
  - Autoware Universe and the rest of the repository needs to be refactored to use this message.

I would appreciate it if you could generate an issue similar to mine, as illustrated in here: 
- https://github.com/autowarefoundation/autoware.universe/issues/3674.

You can outline the work you intend to carry out, and we can proceed with our discussions in the issue."
"Messages Migration from ""autoware_auto_msgs"" to ""autoware_msgs""",D_kwDOAnasMc4ATwj8,2023-05-10T02:12:49Z,cyn-liu,3,Answered,DC_kwDOAnasMc4AWpGB,cyn-liu,"**@xmfcx** Hi, thanks for your  sincere reply.
Before starting the message migration task, I will create an issue.


> * https://github.com/tier4/autoware_auto_msgs/tree/tier4/main/autoware_auto_geometry_msgs
>   
>   * It has 3 messages inside and none of them have any use in the code base. We can just remove the references to these messages and that should be it. We don't need to migrate.
>   * You don't need to migrate them to https://github.com/autowarefoundation/autoware_msgs/tree/main/autoware_common_msgs for now.

I found that the messages from `autoware_auto_geometry_msgs` was used in the `Universe` repos, as follows:

* https://github.com/autowarefoundation/autoware.universe/blob/cf4e9ba411ce35886df81de7ca1c5bde534d04e4/common/autoware_auto_tf2/include/autoware_auto_tf2/tf2_autoware_auto_msgs.hpp#L23

* https://github.com/autowarefoundation/autoware.universe/blob/cf4e9ba411ce35886df81de7ca1c5bde534d04e4/simulator/simple_planning_simulator/include/simple_planning_simulator/simple_planning_simulator_core.hpp#LL24C11-L24C38


"
"Messages Migration from ""autoware_auto_msgs"" to ""autoware_msgs""",D_kwDOAnasMc4ATwj8,2023-05-10T02:12:49Z,cyn-liu,3,Answered,DC_kwDOAnasMc4AWqYQ,xmfcx,"- https://github.com/autowarefoundation/autoware.universe/blob/cf4e9ba411ce35886df81de7ca1c5bde534d04e4/simulator/simple_planning_simulator/include/simple_planning_simulator/simple_planning_simulator_core.hpp#LL24C11-L24C38
  - This has no usage, it is just a header declaration and namespace declaration.
  - There is no Complex32 object instance in the codebase.
- https://github.com/autowarefoundation/autoware.universe/blob/cf4e9ba411ce35886df81de7ca1c5bde534d04e4/common/autoware_auto_tf2/include/autoware_auto_tf2/tf2_autoware_auto_msgs.hpp#L23
  - `autoware_auto_tf2` package is only used in:
    - `behavior_velocity_planner` just for polygon transformation (message or quaternion32 is not used)
    - `surround_obstacle_checker` just for polygon transformation (message or quaternion32 is not used)
    - `behavior_velocity_planner` just for polygon transformation (message or quaternion32 is not used)
    - `simple_planning_simulator` doesn't use it at all.

![Screenshot from 2023-05-18 19-33-23](https://github.com/autowarefoundation/autoware/assets/10751153/279cecf7-02f9-40c4-a189-88e54a95ad3e)

I am on the side of removing unused code from the code base, especially if we don't have strong opinions to keep them.

We can still create a `Quaternion32.msg` but we should agree on if we really need it.

@cyn-liu @mitsudome-r @wep21 @yukkysaito @miursh What do you think?"
"Messages Migration from ""autoware_auto_msgs"" to ""autoware_msgs""",D_kwDOAnasMc4ATwj8,2023-05-10T02:12:49Z,cyn-liu,3,Answered,DC_kwDOAnasMc4AWrPe,cyn-liu,"**@xmfcx** 
I agree to remove unused code from code base.
If this part of the code is removed, we don't need to migrate the messages in [autoware_auto_geometry_msgs](https://github.com/tier4/autoware_auto_msgs/tree/tier4/main/autoware_auto_geometry_msgs).

Who will remove this part of the code?"
"Messages Migration from ""autoware_auto_msgs"" to ""autoware_msgs""",D_kwDOAnasMc4ATwj8,2023-05-10T02:12:49Z,cyn-liu,3,Answered,DC_kwDOAnasMc4AWyyV,mitsudome-r,"I'm okay with removing the autoware_auto_geometry_msgs and other unused messages.
For the polygon transformation, we can move it to other util library packages or rename the current package name. "
Localization & Mapping WG Meeting 10/05/2023,D_kwDOAnasMc4ATwpR,2023-05-10T05:54:04Z,n-patiphon,0,Unanswered,,,
[Proposal] vision-based localization with vector map,D_kwDOAnasMc4ATwro,2023-05-10T06:58:37Z,KYabuuchi,3,Answered,,,
[Proposal] vision-based localization with vector map,D_kwDOAnasMc4ATwro,2023-05-10T06:58:37Z,KYabuuchi,3,Answered,DC_kwDOAnasMc4AWWIY,n-patiphon,"Awesome work!

I see you use the center line of road markings from the HD map for the association (matching). I wonder if it would be helpful for your algorithm if you also knew the width of those road markings from the HD map.  

In Lanelet2, I think road markings such as solid lines and dashed lines are normally represented using the center spline without width, so you might not be able to get the width information. Although line types can be specified using tags, e.g., thin_solid, I'm not sure if these tags have specified widths in meters (or centimeters). 

On the hand, I see that the crosswalks in the map you used contain locations of ""stripes"". Do you think it would work well if crosswalks were only defined using their boundaries (the outline of the crosswalks without strips inside)?  "
[Proposal] vision-based localization with vector map,D_kwDOAnasMc4ATwro,2023-05-10T06:58:37Z,KYabuuchi,3,Answered,DC_kwDOAnasMc4AWWVH,KYabuuchi,"Thanks for your interest!

> I see you use the center line of road markings from the HD map for the association (matching). I wonder if it would be helpful for your algorithm if you also knew the width of those road markings from the HD map.

Currently YabLoc treats all road markings as line segments and not as regions.  It is convenient to treat all markings as line segments because it allows for a unified processing for road surface markings that have thickness and those that do not.

The width of the road surface markings is not used now, but it would be a good idea to use it to generate cost map images. The cost map image is currently generated as shown in the figure below. 
<img src=""https://github.com/autowarefoundation/autoware/assets/24854875/31d737f1-2aa7-4e4e-9690-8ddf74901628"" width=""600"">

There should be width at the peaks in the cost map image, but there isn't now.  If cost maps properly account for width, accuracy may improve.
Thanks for your valuable opinion. :+1: 

---

>On the hand, I see that the crosswalks in the map you used contain locations of ""stripes"". Do you think it would work well if crosswalks were only defined using their boundaries (the outline of the crosswalks without strips inside)?

Probably YabLoc does not work well with only boundaries at intersections because it does incorrect matching. 
I will add the feature that YabLoc does match incorrectly if polygons with tag such as 'unmapped_area' are embedded in lanelet2. :+1: 
"
[Proposal] vision-based localization with vector map,D_kwDOAnasMc4ATwro,2023-05-10T06:58:37Z,KYabuuchi,3,Answered,DC_kwDOAnasMc4AWWlY,n-patiphon,Thank you for your reply! Looking forward to the new features!
[Proposal] vision-based localization with vector map,D_kwDOAnasMc4ATwro,2023-05-10T06:58:37Z,KYabuuchi,3,Answered,DC_kwDOAnasMc4AWv45,VRichardJP,"Very impressive!

> Once YabLoc is merged to Autoware, Autoware users will be able to choose **whether to use NDT or YabLoc (or [eagleye](https://autowarefoundation.github.io/autoware-documentation/main/how-to-guides/eagleye-integration-guide/))** for localization.

Why not all at the same time? EKF localization gets better as it receives more and more diverse data, no?"
[Proposal] vision-based localization with vector map,D_kwDOAnasMc4ATwro,2023-05-10T06:58:37Z,KYabuuchi,3,Answered,DC_kwDOAnasMc4AWwG4,KYabuuchi,"Thank you for your interest! 

The reason for not launching multiple methods at the same time is because YabLoc is computationally heavy.
In addition, because of the superior NDT, there would be little advantage to launching YabLoc simultaneously.

> Once YabLoc is merged to Autoware, Autoware users will be able to choose whether to use NDT or YabLoc (or [eagleye](https://autowarefoundation.github.io/autoware-documentation/main/how-to-guides/eagleye-integration-guide/)) for localization.

Note that this is the default configuration, and if you edit the launch file appropriately,  it will be possible to connect multiple pose_estiamtor to EKF at the same time."
[Proposal] vision-based localization with vector map,D_kwDOAnasMc4ATwro,2023-05-10T06:58:37Z,KYabuuchi,3,Answered,DC_kwDOAnasMc4AWwIl,KYabuuchi,"I also plan to implement runtime switching between **NDT** and **YabLoc**.
Once that is implemented, Autoware would be able to localize with YabLoc where there are no PCD maps and localize with NDT where there are PCD maps."
[Proposal] vision-based localization with vector map,D_kwDOAnasMc4ATwro,2023-05-10T06:58:37Z,KYabuuchi,3,Answered,DC_kwDOAnasMc4AWwJa,VRichardJP,"That looks like what EKF can do with some extra steps ^^

> if you edit the launch file appropriately, it will be possible to connect multiple pose_estiamtor to EKF at the same time.

As far as I know, EKF only supports 1 pose topic. It is possible to relay multiple pose topics to the same EKF pose input, but then all pose use the same parameters (e.g. `pose_smoothing_steps`). Or do you mean someone is working to make EKF accept many inputs at the same time?
"
[Proposal] vision-based localization with vector map,D_kwDOAnasMc4ATwro,2023-05-10T06:58:37Z,KYabuuchi,3,Answered,DC_kwDOAnasMc4AWwPM,KYabuuchi,"I mean that both NDT and YabLoc output `pose_estimator/pose_with_covariance` simultaneously and one callback in EKF handles them.
I don't think using the same parameters related to the pose measurement would be a problem. :thinking: "
[Proposal] vision-based localization with vector map,D_kwDOAnasMc4ATwro,2023-05-10T06:58:37Z,KYabuuchi,3,Answered,DC_kwDOAnasMc4AX1pJ,KYabuuchi,"Here's the latest update. :mega: 
YabLoc has been merged into autoware.universe!
* https://github.com/autowarefoundation/autoware.universe/pull/3946
* https://github.com/autowarefoundation/autoware_launch/pull/393

If you're interested in running autoware with YabLoc mode, I recommend trying the sample dataset provided in the ""Tests performed"" section of [this PR](https://github.com/autowarefoundation/autoware.universe/pull/3946)"
[Proposal] vision-based localization with vector map,D_kwDOAnasMc4ATwro,2023-05-10T06:58:37Z,KYabuuchi,3,Answered,DC_kwDOAnasMc4AX1qJ,KYabuuchi,I am working on updating the Documentation page.
Issues with data transfer from LIDAR and representation in RVIZ2,D_kwDOAnasMc4ATwze,2023-05-10T09:31:09Z,oosuiw,0,Unanswered,,,
Planning&Control WG Meeting 2023/05/11,D_kwDOAnasMc4ATxnG,2023-05-11T06:01:32Z,TakaHoribe,2,Answered,,,
Planning&Control WG Meeting 2023/05/11,D_kwDOAnasMc4ATxnG,2023-05-11T06:01:32Z,TakaHoribe,2,Answered,DC_kwDOAnasMc4AWZKH,ahmeddesokyebrahim,"The remaining review from [no_drivable_lane](https://github.com/orgs/autowarefoundation/discussions/3275#discussioncomment-5379038) feature (previously invalid_lanelet) is only the [tier4_ad_api_adaptor PR](https://github.com/tier4/tier4_ad_api_adaptor/pull/95).
I would be grateful if we can finalize this review so that we can merge all other PRs."
Planning&Control WG Meeting 2023/05/11,D_kwDOAnasMc4ATxnG,2023-05-11T06:01:32Z,TakaHoribe,2,Answered,DC_kwDOAnasMc4AWZXY,TakaHoribe,"@armaganarsln 
This is what I said about Autonomous Emergency Braking: https://autowarefoundation.github.io/autoware.universe/main/control/autonomous_emergency_braking/

No detailed concept design is in the document, but it is supposed to be used as a safety check layer that calculates everything in the local (base_link) coordinate so that it should work even with the Localization failure. The implementation is simple, check around ego vehicle and send an emergency if there are any obstacles.

This is just one control module, and in order to work the safety check layer well, it requires collaboration with sensing and perception modules.  It is good to raise a discussion to define how to handle the local coordinated emergency handling in the autoware."
Open AD Kit Working Group Meeting 11/5/23,D_kwDOAnasMc4ATx5n,2023-05-11T12:25:04Z,HamburgDave,0,Unanswered,,,
the Awsim editor could not publish Ros2 topic,D_kwDOAnasMc4ATyB3,2023-05-11T14:53:36Z,zhuyingxiang95,2,Answered,,,
the Awsim editor could not publish Ros2 topic,D_kwDOAnasMc4ATyB3,2023-05-11T14:53:36Z,zhuyingxiang95,2,Answered,DC_kwDOAnasMc4AWeTj,maxime-clem,"Maybe you will get more help by opening an issue on https://github.com/tier4/AWSIM
I also recommend attaching the log file to your issue instead of a screenshot."
the Awsim editor could not publish Ros2 topic,D_kwDOAnasMc4ATyB3,2023-05-11T14:53:36Z,zhuyingxiang95,2,Answered,DC_kwDOAnasMc4AWhUw,zhuyingxiang95,"Thanks a lot for your reply, now the issue is i could not set the initial pose in Autoware when i run the co-simulation with Awsim. here is the log file 
[launch.log](https://github.com/autowarefoundation/autoware/files/11476758/launch.log)
"
the Awsim editor could not publish Ros2 topic,D_kwDOAnasMc4ATyB3,2023-05-11T14:53:36Z,zhuyingxiang95,2,Answered,DC_kwDOAnasMc4AWhbZ,maxime-clem,"You are using a custom Unity environment, correct ?
Did you also prepare custom lanelet and pointcloud maps ? The issue may come from there."
the Awsim editor could not publish Ros2 topic,D_kwDOAnasMc4ATyB3,2023-05-11T14:53:36Z,zhuyingxiang95,2,Answered,DC_kwDOAnasMc4AWhcI,zhuyingxiang95,"I have prepared this 2 stuffs and when i run autoware alone. all work fine
"
the Awsim editor could not publish Ros2 topic,D_kwDOAnasMc4ATyB3,2023-05-11T14:53:36Z,zhuyingxiang95,2,Answered,DC_kwDOAnasMc4AWhDX,mackierx111,"@zhuyingxiang95 
Try opening UnityEditor from the shell where ros2 is sourced"
Beyond `ament_auto`,D_kwDOAnasMc4ATyfs,2023-05-12T05:18:42Z,VRichardJP,5,Answered,,,
Beyond `ament_auto`,D_kwDOAnasMc4ATyfs,2023-05-12T05:18:42Z,VRichardJP,5,Answered,DC_kwDOAnasMc4AWby5,kenji-miyake,"Thank you for your work and proposal!
I personally prefer Option 3, but Option 4 may be acceptable as a short-term.

@xmfcx @mitsudome-r @yukkysaito What do you think?"
Beyond `ament_auto`,D_kwDOAnasMc4ATyfs,2023-05-12T05:18:42Z,VRichardJP,5,Answered,DC_kwDOAnasMc4AWcOq,VRichardJP,"Just to add a few details, I don't only propose to move away from `ament_auto` only for the performance. I find `ament_auto` has some design issues or questionable defaults, which would not be fixed upstream before ROS2 J release (if ever fixed).

So, implementing an ament_auto ""v2"" (whether it is a fork or a new package) would also be the opportunity to add ""missing"" features, or improve the macros behavior. A few examples:
- There is no construct to properly link and export system libraries (e.g. PCL). For instance, there are many cmake files in Autoware that do something like:
```cmake
find_package(PCL REQUIRED)
target_include_directories(myTarget ${PCL_INCLUDE_DIRS})
target_link_libraries(myTarget ${PCL_LIBRARIES})
```
and forget about `target_compile_definitions(myTarget ${PCL_DEFINITIONS})` or `ament_export_dependencies(PCL)`, which may cause dependency issues on downstream packages (unless PCL is slapped in over and over, which is what is done actually.)
- there is no construct to handle targets that can't be created with `ament_auto_add_library` (e.g. CUDA libraries must use `cuda_add_library()`)
"
Beyond `ament_auto`,D_kwDOAnasMc4ATyfs,2023-05-12T05:18:42Z,VRichardJP,5,Answered,DC_kwDOAnasMc4AWiD9,xmfcx,"Wow this was a lot to take in lol.
I've never profiled a CMake build before, getting to know how much time is spent there, I've learned a lot of things today, thank you for working on this.

So, a lot of time is spent on:
- Recursive `find_package()` calls. (I don't know if it's possible to improve this)
- `ament_libraries_deduplicate()` function. (It's also called within find_package() calls too)
  - Your [PR](https://github.com/ament/ament_cmake/pull/448/files) fixes this.

And also you've created this [ament_cmake_extension](https://github.com/VRichardJP/ament_cmake_extension) package and also modified [your fork of Autoware Universe](https://github.com/VRichardJP/autoware.universe/commit/dbee9bd9d388ff09fbaf12b11ddb9e1ebbd61d6e) to make use of it.

Since I'm not too experienced with CMake that much, replacing [ament_cmake_auto](https://github.com/ament/ament_cmake/tree/rolling/ament_cmake_auto) with [ament_cmake_extension](https://github.com/VRichardJP/ament_cmake_extension) which is built from ground up scares me a bit.

> **Option 3:** fork of ament_auto, and fix the fork.
> **Option 4:** use an alternative to ""ament_auto"" macros, that would be simple, fast and perfectly fit autoware's use case.
> **Option 3** could be a decent option. However, changing the behavior of ""ament_auto"" macros would impact all packages, not just autoware packages, so it would mean maintaining backward compatibility (the reason the upstream ""ament_auto"" would not add breaking changes to its humble release in the first place).

What about something between 3 and 4?
Option 5:
- Copy [ament_cmake_auto](https://github.com/ament/ament_cmake/tree/rolling/ament_cmake_auto) out of `ament_cmake` and create a new package with a different name like yours.
- Fix the problems in this new package with your suggestions.
- Use it in the Autoware instead of `ament_auto_xx` calls.
- This way, the change is more gradual and controlled, less chance of unexpected failures in the future.

This is because I find it risky to make such a drastic change. What do you think @VRichardJP @kenji-miyake ?"
Beyond `ament_auto`,D_kwDOAnasMc4ATyfs,2023-05-12T05:18:42Z,VRichardJP,5,Answered,DC_kwDOAnasMc4AWj5Y,VRichardJP,"> Since I'm not too experienced with CMake that much, replacing [ament_cmake_auto](https://github.com/ament/ament_cmake/tree/rolling/ament_cmake_auto) with [ament_cmake_extension](https://github.com/VRichardJP/ament_cmake_extension) which is built from ground up scares me a bit.

I agree, it is scary! But I would like to raise it is equally scary to rely entirely on `ament_cmake_auto`, a package that [has been left untouched for many years](https://github.com/ament/ament_cmake/blame/rolling/ament_cmake_auto/cmake/ament_auto_add_library.cmake), whose behavior is mostly undocumented, which has [some questionable hidden defaults](https://github.com/autowarefoundation/autoware.universe/issues/2773#issuecomment-1437898960), and yet which would greatly benefit from new basic features, such as exporting automatically imported non-ROS dependencies (e.g. PCL).

> Option 5:
> - Copy [ament_cmake_auto](https://github.com/ament/ament_cmake/tree/rolling/ament_cmake_auto) out of ament_cmake and create a new package with a different name like yours.
> - Fix the problems in this new package with your suggestions.
> - Use it in the Autoware instead of ament_auto_xx calls.
> - This way, the change is more gradual and controlled, less chance of unexpected failures in the future.

This is exacly how I started!

I forked `ament_cmake_auto`, `sed`-ed everything into `ament_ex_*`. In `autoware_cmake` I added the `USE_AMENT_EX` switch, then `sed`-ed all `ament_auto_*` into `ament_ex_*` in autoware.universe. I didn't have to switch all packages at the same time, but since the ament_ex macros should eventually work properly everywhere, I better had to make sure. As you said, in practice a transition could be made package by package (e.g. with the `USE_AMENT_EX` switch). 

From that start point, I applied my [""use modern cmake targets""](https://github.com/ament/ament_cmake/issues/442#issuecomment-1512937563) fix, then started to debug autoware cmake files. Many cmake files are not written properly for modern cmake targets, partly because the ament_auto macros have not been designed for them in the first place. In my [initial report](https://github.com/ament/ament_cmake/issues/442#issuecomment-151293756), my goal was more to check whether it was possible to improve the performance rather than writing clean cmake files, so many of the reported changes I made at the time were dirty hacks, such as:
```diff
diff --git a/perception/image_projection_based_fusion/CMakeLists.txt b/perception/image_projection_based_fusion/CMakeLists.txt
index 29cc087ed3..7c86551309 100644
--- a/perception/image_projection_based_fusion/CMakeLists.txt
+++ b/perception/image_projection_based_fusion/CMakeLists.txt
@@ -159,6 +159,10 @@ if(TRT_AVAIL AND CUDA_AVAIL AND CUDNN_AVAIL)
   cuda_add_library(pointpainting_cuda_lib SHARED
     src/pointpainting_fusion/preprocess_kernel.cu
   )
+  # NOTE(VRichardJP) workaround for not using ament_auto_add_library
+  # This triggers target export behavior in ament_auto_package()
+  # see https://github.com/VRichardJP/ament_cmake/blob/9c0e148ac79bb38f9ab16365813a685f7e93c2dc/ament_cmake_auto/cmake/ament_auto_package.cmake#L69
+  list(APPEND ${PROJECT_NAME}_LIBRARIES pointpainting_cuda_lib)
```

This time however, I needed to write something clean and reliable that would work for every single pattern found in autoware. This is how I started to deviate from the original ament_auto macros. For example, the previous snippet is now written properly with the [ament_ex_install_targets(pointpainting_cuda_lib)](https://github.com/VRichardJP/ament_cmake_extension/blob/main/cmake/ament_ex_install_targets.cmake) macro. Eventually, I have added a couple new macros ([some ridiculously simple](https://github.com/VRichardJP/ament_cmake_extension/blob/main/cmake/ament_ex_find_package.cmake)), removed [some never used features](https://github.com/ament/ament_cmake/blob/154f1989578a30afe0b3613369681073470d16d9/ament_cmake_auto/cmake/ament_auto_add_library.cmake#L65), [merged others](https://github.com/VRichardJP/ament_cmake_extension/blob/main/cmake/ament_ex_find_all_package_dependencies.cmake), moved some logic around and cleaned. All of these changes have been made so that `ament_cmake_extension` can be the ""Ament CMake for dummies"" (which `ament_cmake_auto` is almost, as long as you don't try to use cmake targets).

This is how, even though they may not look alike anymore, the two macros [`ament_ex_add_library`](https://github.com/VRichardJP/ament_cmake_extension/blob/main/cmake/ament_ex_add_library.cmake) and [`ament_auto_add_library`](https://github.com/ament/ament_cmake/blob/rolling/ament_cmake_auto/cmake/ament_auto_add_library.cmake) actually still do the same thing! That said, I would argue one is easier to understand, and way closer to the way packages are ment to be written [according to the ament documentation](https://docs.ros.org/en/humble/How-To-Guides/Ament-CMake-Documentation.html) (and faster!).
"
Beyond `ament_auto`,D_kwDOAnasMc4ATyfs,2023-05-12T05:18:42Z,VRichardJP,5,Answered,DC_kwDOAnasMc4AWksY,yukkysaito,"@VRichardJP The results of this survey are very informative for me. Thank you :+1: 

@xmfcx @VRichardJP 
>This is because I find it risky to make such a drastic change.

Yes, I think there is a risk.
How about the following approach?

1. Copy [ament_cmake_auto](https://github.com/ament/ament_cmake/tree/rolling/ament_cmake_auto) out of ament_cmake and create a new package with a same name in autoware.
2. Fix the problems in this new package with your suggestions.
3. In the future, when changes are introduced into the original ament_cmake_auto, remove the copied ament_cmake_auto.

 I believe that the package in the workspace should have priority. Sorry if I am wrong. (It should do so in ROS 1, but I haven't tested it in ROS 2.)I'll test it.
Since it is the same ament_auto, code compatibility can be maintained.
"
Beyond `ament_auto`,D_kwDOAnasMc4ATyfs,2023-05-12T05:18:42Z,VRichardJP,5,Answered,DC_kwDOAnasMc4AWkz4,yukkysaito,"I did some testing.

- with `--allow-overriding ament_cmake_auto`, ament_cmake_auto in the workspace was used.
- without `--allow-overriding ament_cmake_auto` , ament_cmake_auto in the workspace was used. But there is warning message.
![image (1)](https://github.com/autowarefoundation/autoware/assets/8327598/286e94d1-2955-4f91-bfd4-3b8708185415)
- with `--packages-ignore ament_cmake_auto` , `/opt/ros/humble/share/ament_cmake/ament_cmake_auto` was used."
Beyond `ament_auto`,D_kwDOAnasMc4ATyfs,2023-05-12T05:18:42Z,VRichardJP,5,Answered,DC_kwDOAnasMc4AWl6P,VRichardJP,"> 3. In the future, when changes are introduced into the original ament_cmake_auto, remove the copied ament_cmake_auto.

I don't want to leave any misunderstanding here: there is a chance the changes I propose would never land in the `ament_cmake_auto` package. Maybe in a `ament_cmake_auto2`, but that's exactly what `ament_cmake_extension` tries to be. This is because several of the changes I introduce are breaking:

- starting from exporting cmake targets (what makes `ament_cmake_extension` faster and more robust). If you try to export malformed target (e.g. a dependency it is linked to is not exported), ament CMake will raise a build error.
- then, many of the small QoL changes, which makes it easier to work with targets, are as many breaking changes as well.

Cmake targets require extra care, but there are worth it. There are faster, simpler to use, won't cause dependency issues downstream...

I don't like `--allow-overriding` for several reasons:
- it's an extra flag
- it impacts all the packages at once
- to keep the ""ament_auto_*"" macros around while ""sneakily"" changing their behavior is bound to puzzle many developers."
Beyond `ament_auto`,D_kwDOAnasMc4ATyfs,2023-05-12T05:18:42Z,VRichardJP,5,Answered,DC_kwDOAnasMc4AWnmv,xmfcx,"> I don't like --allow-overriding for several reasons:

> - it's an extra flag

The `--allow-overriding` is just for hiding the warning that comes up. It is not mandatory. Whether it exists or not, the `ament_cmake_auto` will take priority.

> - it impacts all the packages at once

It impacts all packages that are in the `autoware/src` directory, isn't that the case? As far as I know, we only link to the packages outside the Autoware workspace.

> - to keep the ""ament_auto_*"" macros around while ""sneakily"" changing their behavior is bound to puzzle many developers.

This is the only downside I can see. But we can add it to documentation with an explanation. It shouldn't have much side effects.

The upsides:
- Users don't need to learn a new CMake tool/library.
- We don't need to make too many changes in the Autoware repository.

> This is because several of the changes I introduce are breaking:
> - starting from exporting cmake targets (what makes `ament_cmake_extension` faster and more robust). If you try to export malformed target (e.g. a dependency it is linked to is not exported), ament CMake will raise a build error.

Is it possible to make it faster with less breaking changes?"
Beyond `ament_auto`,D_kwDOAnasMc4ATyfs,2023-05-12T05:18:42Z,VRichardJP,5,Answered,DC_kwDOAnasMc4AWotn,VRichardJP,"> > * it's an extra flag
> 
> The `--allow-overriding` is just for hiding the warning that comes up. It is not mandatory. Whether it exists or not, the `ament_cmake_auto` will take priority.

Sure, it is just a minor hindrance.

> > it impacts all the packages at once
> 
> It impacts all packages that are in the autoware/src directory, isn't that the case? As far as I know, we only link to the packages outside the Autoware workspace.

Yes, this is what I mean. Autoware source tree does not contain only autoware packages. There are external projects aswell. If we fork and change the behavior of `ament_auto_*` macros, then these external packages could break. To have a new name means to be able to mix the old/new behavior.

> > to keep the ""ament_auto_*"" macros around while ""sneakily"" changing their behavior is bound to puzzle many developers.
> This is the only downside I can see. But we can add it to documentation with an explanation. It shouldn't have much side effects.

Independently of this proposal, I think we should document `ament_auto` macros behavior in the developer documentation. By reading at so many cmake files, I can tell there is a gap between what people think these macros do, and what they actually do. For instance, a document like [this one](https://docs.ros.org/en/humble/How-To-Guides/Ament-CMake-Documentation.html) for ament_cmake_auto would be nice. 

The behavior of `ament_cmake_extension` macros slightly differs from `ament_cmake_auto` ones for that reason. I tried to align what the devs would think the macros do, and what they actually do (of course it's 100% subjective).

> Is it possible to make it faster with less breaking changes?

Maybe? I have focused mostly on using modern CMake targets because that the simplest way to make it work, but also to make things cleaner (and it's 2023!). The `ament_auto_add_library` macros and such are slow by design, because the macro must go through every single library, include directory, compilation flag that are brought by every single dependency (recursively), and make sure to remove duplicates while preserving correct order. For example, `behavior_path_planner` must go through [17268](https://github.com/ament/ament_cmake/issues/442) linked libraries, most of them being duplicates. Even if processing each item is like 8ms, in total that is 2 minutes of processing. Even if the performance is improved so that it only takes 2ms for each item, that is still 30 seconds on each `add_library` call. Targets don't have this issue, first because there is no recursion (upstream target brings everything already), and also because cmake is optimized for them (no spaghetti cmake scripting involved)."
Beyond `ament_auto`,D_kwDOAnasMc4ATyfs,2023-05-12T05:18:42Z,VRichardJP,5,Answered,DC_kwDOAnasMc4AWiEy,xmfcx,"> I rewrite the packages CMakeLists.txt and call find_package on each dependency instead of using ament_auto_find_build_dependencies, the package does not build any faster. So there is basically no cost for using the ament_auto_find_build_dependencies macro (great!).

![Screenshot from 2023-05-15 18-27-15](https://github.com/autowarefoundation/autoware/assets/10751153/e6d8c296-de38-4105-8d78-f14efb5e410a)

I've also tried to do the same and ended up with the same result. Do you think is it possible to speed up the [`find_package()`](https://cmake.org/cmake/help/latest/command/find_package.html) CMake function? Maybe there is a better way of making use of it? I really don't know.
"
Beyond `ament_auto`,D_kwDOAnasMc4ATyfs,2023-05-12T05:18:42Z,VRichardJP,5,Answered,DC_kwDOAnasMc4AWjAz,VRichardJP,"To make `find_package` faster is essentially to write faster `FindXXX.cmake`. These files are normally written by hand, but in ROS the `ament_package` macro does that for you (not an `ament_auto` macro). What we can do to make it faster is:

- to have less things to find (e.g. removing unused dependencies).
- to improve the generated code, in other words the core `ament_cmake` macros. For example the `ament_deduplicate` has been written like 8 years ago and never touched since then, but it is very slow when there are a lot of dependencies. These kind of things should rather be fixed upstream."
Beyond `ament_auto`,D_kwDOAnasMc4ATyfs,2023-05-12T05:18:42Z,VRichardJP,5,Answered,DC_kwDOAnasMc4AWvzJ,VRichardJP,"From all the discussion, I came to realize maybe the fork option is the simplest and the least scary solution (from autoware project PoV)

Now Iron is about to be released, I guess there is a chance some of the key features can be pushed to the `rolling` branch in the weeks/months to come. I don't know if everything could land there, but I might as well try there first. As I assume the new features would not be added to humble branch upstream, that would leave the following options while keeping the `ament_auto` macros around:
- Option 1: wait for J release
- Option 3a: fork `ament_cmake` and backport the features introduced in `rolling` to our `humble` branch
- Option 3b: fork `ament_cmake` and use `rolling` branch

Because the `ament_auto` is almost never updated, I don't think merging the feature from rolling to humble branch is a problem. There would still be work on Autoware side, but certainly it would not be as heavy as changing the name of all macros.
"
Beyond `ament_auto`,D_kwDOAnasMc4ATyfs,2023-05-12T05:18:42Z,VRichardJP,5,Answered,DC_kwDOAnasMc4AWwqn,xmfcx,"@VRichardJP 
I still think maintaining a fork of the `ament_cmake` which only has the `ament_cmake_auto` is an OK option as long as it is documented.

We should have control over the packages built in the Autoware folder regardless of the build tools we use.

Also maybe we can edit the `ament_cmake_auto` functions to have an optional flag to facilitate the new behaviors you propose. This way old users of the functions won't be affected. And we can enable the behaviors we want for packages we want.

What do you think?"
Beyond `ament_auto`,D_kwDOAnasMc4ATyfs,2023-05-12T05:18:42Z,VRichardJP,5,Answered,DC_kwDOAnasMc4AWw5k,VRichardJP,"Yes, for example fork `ament_cmake` and add COLCON_IGNORE files everywhere but `ament_cmake_auto`.

I am thinking how the feature would be implemented upstream. Most likely, there would be an optional flag added to the `ament_auto_package()` macro (e.g. `EXPORT_TARGETS`), which would trigger the new behavior is provided."
"The migration of the ""autoware_auto_perception_msgs"" into ""autoware_perception_msgs""",D_kwDOAnasMc4ATypX,2023-05-12T09:00:14Z,beginningfan,0,Unanswered,,,
"The migration of the ""autoware_auto_planning_msgs"" into ""autoware_planning_msgs""",D_kwDOAnasMc4ATyqd,2023-05-12T09:18:29Z,shulanbushangshu,1,Answered,,,
"The migration of the ""autoware_auto_planning_msgs"" into ""autoware_planning_msgs""",D_kwDOAnasMc4ATyqd,2023-05-12T09:18:29Z,shulanbushangshu,1,Answered,DC_kwDOAnasMc4AXB8C,xmfcx,"Hello @shulanbushangshu , thanks for the helping us migrate the messages. You can issues on the repositories you're planning to make changes on."
Adding re-initialization using gnss poses button  on Rviz,D_kwDOAnasMc4ATyrf,2023-05-12T09:41:14Z,meliketanrikulu,3,Answered,,,
Adding re-initialization using gnss poses button  on Rviz,D_kwDOAnasMc4ATyrf,2023-05-12T09:41:14Z,meliketanrikulu,3,Answered,DC_kwDOAnasMc4AWg14,YamatoAndo,"@meliketanrikulu We haven't maintained it because there were no users, but the functionality already exists.
Please refer [this link](https://github.com/autowarefoundation/autoware.universe/tree/main/localization/initial_pose_button_panel)."
Adding re-initialization using gnss poses button  on Rviz,D_kwDOAnasMc4ATyrf,2023-05-12T09:41:14Z,meliketanrikulu,3,Answered,DC_kwDOAnasMc4AWpv0,meliketanrikulu,@YamatoAndo thank you 
Adding re-initialization using gnss poses button  on Rviz,D_kwDOAnasMc4ATyrf,2023-05-12T09:41:14Z,meliketanrikulu,3,Answered,DC_kwDOAnasMc4AZPDC,YamatoAndo,"@meliketanrikulu 
Once [this PR](https://github.com/autowarefoundation/autoware.universe/pull/4392) is merged, you will be able to perform re-initialization by clicking on `Init by GNSS`.
![Screenshot from 2023-08-02 19-25-28](https://github.com/autowarefoundation/autoware/assets/13819566/0f699e85-f6bf-453a-b23c-89c537ec1f23)


"
Unable to launch AWSIM simulator,D_kwDOAnasMc4ATzYz,2023-05-13T12:14:17Z,RAAA-Alaguvel-Armstrong,1,Answered,,,
Unable to launch AWSIM simulator,D_kwDOAnasMc4ATzYz,2023-05-13T12:14:17Z,RAAA-Alaguvel-Armstrong,1,Answered,DC_kwDOAnasMc4AWfQm,maxime-clem,"Such error (""package * not found"") is caused by your environment not finding the corresponding package.
There are usually 2 possible reason for this issue:
- you did not source the `install/setup.sh` script in your ros 2 workspace;
- you did not build the package, or the build failed."
2023-05-15 ODD working group weekly meeting (140),D_kwDOAnasMc4AT0nZ,2023-05-15T02:04:00Z,Igata-ctrl,0,Unanswered,,,
AWSIM Random Traffice Simulator not working,D_kwDOAnasMc4AT12h,2023-05-16T10:53:36Z,nbehrnbehr,0,Unanswered,,,
Software WG Meeting 2023/05/16,D_kwDOAnasMc4AT15U,2023-05-16T12:03:54Z,xmfcx,0,Unanswered,,,
Is it possible to predict whether the new goal will cause an emergency stop?,D_kwDOAnasMc4AT2jQ,2023-05-17T06:08:13Z,TaikiYamada4,1,Answered,,,
Is it possible to predict whether the new goal will cause an emergency stop?,D_kwDOAnasMc4AT2jQ,2023-05-17T06:08:13Z,TaikiYamada4,1,Answered,DC_kwDOAnasMc4AWmPB,kosuke55,"Currently setting a new goal while driving causes an emergency stop, and this feature is not supported. 
I thought an emergency stop always would happen while driving so need to set the goal when stopped.

In https://github.com/autowarefoundation/autoware/issues/3406 we added API for rerouting, and the mission planner interface with safety check  is under development now (https://github.com/autowarefoundation/autoware.universe/pull/3461)



"
Is it possible to predict whether the new goal will cause an emergency stop?,D_kwDOAnasMc4AT2jQ,2023-05-17T06:08:13Z,TaikiYamada4,1,Answered,DC_kwDOAnasMc4AWmRG,TaikiYamada4,"I see. Thank you for your quick reply!!

Actually I thought I could change my goal while driving since there were once or twice that the vehicle doesn't stop on goal changing, so this might be another kind of issue.
I'm sorry I can't share my data because it is a rare one and I didn't record it, but I will post another discussion if I see a similar event.

Thanks for all!! "
Perception & Sensing WG Meeting 17/05/2023,D_kwDOAnasMc4AT2kZ,2023-05-17T06:36:41Z,drwnz,0,Unanswered,,,
About eagleye_coordinate error during workspace build in docker,D_kwDOAnasMc4AT2nY,2023-05-17T07:47:00Z,shintaro-mori,4,Answered,,,
About eagleye_coordinate error during workspace build in docker,D_kwDOAnasMc4AT2nY,2023-05-17T07:47:00Z,shintaro-mori,4,Answered,DC_kwDOAnasMc4AWmbB,kminoda,"Please check if the necessary packages are properly installed:

```
rosdep install -y --from-paths src --ignore-src --rosdistro $ROS_DISTRO
```

https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/source-installation/"
About eagleye_coordinate error during workspace build in docker,D_kwDOAnasMc4AT2nY,2023-05-17T07:47:00Z,shintaro-mori,4,Answered,DC_kwDOAnasMc4AWmb-,shintaro-mori,"I follow the manual and run it inside the docker container of course, but do I need to run it outside the container as well?
```
~/autoware$ rosdep install -y --from-paths src --ignore-src --rosdistro $ROS_DISTRO
#All required rosdeps installed successfully
~/autoware$
```"
About eagleye_coordinate error during workspace build in docker,D_kwDOAnasMc4AT2nY,2023-05-17T07:47:00Z,shintaro-mori,4,Answered,DC_kwDOAnasMc4AWmgI,evshary,"You could install the packages manually and then rebuild Autoware again.

```shell
sudo apt install ros-humble-geographic-msgs
```

I'm not sure whether the package is included in docker image or not.
However, it's still weird because `rosdep` should install it for you.

"
About eagleye_coordinate error during workspace build in docker,D_kwDOAnasMc4AT2nY,2023-05-17T07:47:00Z,shintaro-mori,4,Answered,DC_kwDOAnasMc4AWmgk,shintaro-mori,"I also installed the software, but the situation did not improve.
Yes, I am also confused because I thought rosdep would do everything for me."
About eagleye_coordinate error during workspace build in docker,D_kwDOAnasMc4AT2nY,2023-05-17T07:47:00Z,shintaro-mori,4,Answered,DC_kwDOAnasMc4AWmkc,evshary,"Could you check whether the files exist or not in your container after installation?
`/opt/ros/humble/include/geographic_msgs/msg/geo_point.hpp`
If yes, try to `source /opt/ros/humble/setup.bash`, then clean and rebuild Autoware again. "
About eagleye_coordinate error during workspace build in docker,D_kwDOAnasMc4AT2nY,2023-05-17T07:47:00Z,shintaro-mori,4,Answered,DC_kwDOAnasMc4AWmqa,shintaro-mori,"There was no file `/opt/ros/humble/include/geographic_msgs/msg/geo_point.hpp`, though,
There was a file `/opt/ros/humble/include/geographic_msgs/geographic_msgs/msg/geo_point.hpp`."
About eagleye_coordinate error during workspace build in docker,D_kwDOAnasMc4AT2nY,2023-05-17T07:47:00Z,shintaro-mori,4,Answered,DC_kwDOAnasMc4AWpQa,evshary,"Yes, it should be `/opt/ros/humble/include/geographic_msgs/geographic_msgs/msg/geo_point.hpp`.
I've tried to build Autoware again on my computer, and I didn't meet the problem. 
Not sure what the reason is ...."
About eagleye_coordinate error during workspace build in docker,D_kwDOAnasMc4AT2nY,2023-05-17T07:47:00Z,shintaro-mori,4,Answered,DC_kwDOAnasMc4AWrQN,shintaro-mori,"https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/docker-installation/#docker-with-nvidia-gpu-fails-to-start-autoware-on-arm64-devices
The manual states that arm64 devices that do not use NVIDIA GPUs should execute the rocker command I have executed.

https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/docker-installation-devel/#how-to-set-up-a-workspace
However, this manual says to run that rocker command on devices that do not use NVIDIA GPUs or are arm64 devices.

Which command should I run on amd64 devices that do not use NVIDIA GPUs?
Should I use another container instead of latest-cuda?"
About eagleye_coordinate error during workspace build in docker,D_kwDOAnasMc4AT2nY,2023-05-17T07:47:00Z,shintaro-mori,4,Answered,DC_kwDOAnasMc4AWrpJ,rsasaki0109,"@shintaro-mori 
> I also installed the software, but the situation did not improve.

Does the above mean that geographic-msgs was not installed before ""sudo apt install ros-humble-geographic-msgs"" was done?
If so, after installing geographic-msgs, did you remove install/eagleye_coordinate and build/eagleye_coordinate and then build?

"
About eagleye_coordinate error during workspace build in docker,D_kwDOAnasMc4AT2nY,2023-05-17T07:47:00Z,shintaro-mori,4,Answered,DC_kwDOAnasMc4AWrql,shintaro-mori,"Ultimately, I solved my problem by doing the following.

- Docker pull the humble-latest-amd64 container instead of latest-cuda
```
docker pull ghcr.io/autowarefoundation/autoware-universe:humble-latest-amd64
```
- Then run the commands as per the manual: use humble-latest-amd64 instead of latest-cuda.
```
rocker -e LIBGL_ALWAYS_SOFTWARE=1 --x11 --user --volume $HOME/autoware --volume $HOME/autoware_map -- ghcr.io/autowarefoundation/autoware-universe:humble-latest-amd64
```"
About eagleye_coordinate error during workspace build in docker,D_kwDOAnasMc4AT2nY,2023-05-17T07:47:00Z,shintaro-mori,4,Answered,DC_kwDOAnasMc4AWyZs,shintaro-mori,"I don't know why, but I cleaned docker once and built it again from scratch with the commands described in the manual, and it worked.
Sorry for the trouble."
About eagleye_coordinate error during workspace build in docker,D_kwDOAnasMc4AT2nY,2023-05-17T07:47:00Z,shintaro-mori,4,Answered,DC_kwDOAnasMc4AWylz,rsasaki0109,"Perhaps the following PR has addressed this issue.
https://github.com/MapIV/eagleye/pull/263
Sorry for the inconvenience, thank you for the issue."
Sharing Road Test Result for Autoware Humble Version -- Test Case #1,D_kwDOAnasMc4AT20F,2023-05-17T12:09:43Z,cyn-liu,0,Unanswered,,,
Open AD Kit Working Group Meeting 18/5/2023,D_kwDOAnasMc4AT3yd,2023-05-18T12:50:48Z,HamburgDave,0,Unanswered,,,
Reference Design WG Meeting (05/10/2023),D_kwDOAnasMc4AT4Ni,2023-05-19T02:12:16Z,chishengshih,0,Unanswered,,,
Can I create a deeper directory for packages in autoware.univese?,D_kwDOAnasMc4AT4XK,2023-05-19T07:53:34Z,KYabuuchi,6,Answered,,,
Can I create a deeper directory for packages in autoware.univese?,D_kwDOAnasMc4AT4XK,2023-05-19T07:53:34Z,KYabuuchi,6,Answered,DC_kwDOAnasMc4AWrnF,KYabuuchi,c.c. @yukkysaito 
Can I create a deeper directory for packages in autoware.univese?,D_kwDOAnasMc4AT4XK,2023-05-19T07:53:34Z,KYabuuchi,6,Answered,DC_kwDOAnasMc4AWrqk,maxime-clem,"In planning I made a [sub-folder](https://github.com/autowarefoundation/autoware.universe/tree/main/planning/sampling_based_planner) for my algorithm which contains multiple packages.
But I did not ask permission..."
Can I create a deeper directory for packages in autoware.univese?,D_kwDOAnasMc4AT4XK,2023-05-19T07:53:34Z,KYabuuchi,6,Answered,DC_kwDOAnasMc4AWr6n,mitsudome-r,"If those packages are only meant to be used together, and if it makes it easier for the user to find the package, I personally don't have an objection. "
Can I create a deeper directory for packages in autoware.univese?,D_kwDOAnasMc4AT4XK,2023-05-19T07:53:34Z,KYabuuchi,6,Answered,DC_kwDOAnasMc4AWuJz,kenji-miyake,"If we really need sub-directories, I personally think it's okay.
However, before adding sub-directories, we should consider several things, for example:
- Are packages under a sub-directory specific to the domain?
  - I mean, is there no reusable package under a sub-directory?
- Are the package-split criteria well organized?
  - Can some packages be integrated into one package? Then, sub-directories might be unnecessary.

Seeing the package names in https://github.com/tier4/YabLoc, several packages seem to be generally-reusable packages.
If they will be under `yabloc/` and be depended on from non-yabloc packages, that would look strange.

By the way, do we really need to merge YabLoc into `autoware.universe`?
I think we can keep it as a TIER IV's extension and refer to it in `autoware.repos`.
That doesn't violate the concept of Autoware Core/Universe.
I'm concerned about making `autoware.universe` a huge mono repo.
It's easy to continue adding packages to one repository, but we may be stacking technical debts."
Can I create a deeper directory for packages in autoware.univese?,D_kwDOAnasMc4AT4XK,2023-05-19T07:53:34Z,KYabuuchi,6,Answered,DC_kwDOAnasMc4AWvm2,KYabuuchi,"Thank you for your comment!
First I will reorganize the YabLoc packages and reconsider whether the sub-directories are really necessary.
Based on the reorganization, I will consult whether YabLoc should be placed in `autoware.universe`."
Can I create a deeper directory for packages in autoware.univese?,D_kwDOAnasMc4AT4XK,2023-05-19T07:53:34Z,KYabuuchi,6,Answered,DC_kwDOAnasMc4AWyNp,yukkysaito,"> By the way, do we really need to merge YabLoc into autoware.universe?
I think we can keep it as a TIER IV's extension and refer to it in autoware.repos.
That doesn't violate the concept of Autoware Core/Universe.
I'm concerned about making autoware.universe a huge mono repo.
It's easy to continue adding packages to one repository, but we may be stacking technical debts.


@kenji-miyake 
This is a problem within TIER IV and I am requesting that it be merged into the universe from me.
This is because I want the autoware universe to support camera based localization. We can discuss the details separately.


"
Can I create a deeper directory for packages in autoware.univese?,D_kwDOAnasMc4AT4XK,2023-05-19T07:53:34Z,KYabuuchi,6,Answered,DC_kwDOAnasMc4AWyYp,mitsudome-r,"> I'm concerned about making autoware.universe a huge mono repo.

This is a good point. However, I think adding in autoware.repos is essentially going to cause the same issue. (larger dependency, longer build time) We probably have to think of a way to enable registering packages as Autoware packages without merging the code in to Autoware. We might have to come up with a framework like what ROS has, e.g., registering to the build-farm and adding to ROS Index without merging code to ROS repository. Obviously we would need much more maintainer to support the framework though."
Can I create a deeper directory for packages in autoware.univese?,D_kwDOAnasMc4AT4XK,2023-05-19T07:53:34Z,KYabuuchi,6,Answered,DC_kwDOAnasMc4AWyOH,yukkysaito,"The number of packages for each component is increasing and becoming difficult to understand; I agree with adding a sub-directory.

However, @kenji-miyake  is right, I believe that the yabloc package can be integrated a bit more. Because the packages seem to be separated to the point where there is no possibility of reuse."
Can I create a deeper directory for packages in autoware.univese?,D_kwDOAnasMc4AT4XK,2023-05-19T07:53:34Z,KYabuuchi,6,Answered,DC_kwDOAnasMc4AWzOQ,doganulus,"As far as I understand from the descriptions, YabLoc is an independent set of localization packages for Autoware and is distinct from the current localization packages. If this is the case, making it a subfolder doesn't look good in my opinion. 

I do understand the earlier decision against deep hierarchies, which may be problematic in many areas of software engineering. I think another concern is that it is impossible to merge everything coming from universities and other companies into a single monorepo `universe`. Definitely, some must stay outside. It might be good to define some structure for such (external) collections of autoware packages. For example,

- Standardize the location `/opt/autoware/<collection>/<component>`. 
- Standardize certain component names across the Autoware ecosystem.
  - Example components are `localization`, `perception`, `planning`, `control`, `evaluation`, ...
- Allow collections to be independent and have their own repo:
  - Example collections: `core`, `universe`, `yabloc`, `<company_name>`, or `<university_name>`
- Not every collection has to contain every component. 

Then the `yabloc` repo would look like this under such an organization:
```
autoware.yabloc/
　├ localization/
　│　├ particle_filter/
　│　├ segment_filter/
　│　├ graph_segment/ 
　│　├ line_segment_detector/
　│　├ ground_estimator/
　├ evaluation/ 
　│　├ ape_monitor/
　│　├ ... /
　│　├ path_monitor/
```


"
Ad hoc simulation in tutorial doesn't work,D_kwDOAnasMc4AT5gy,2023-05-21T07:21:10Z,porizou,1,Answered,,,
Ad hoc simulation in tutorial doesn't work,D_kwDOAnasMc4AT5gy,2023-05-21T07:21:10Z,porizou,1,Answered,DC_kwDOAnasMc4AWu4q,takayuki5168,"@porizou How about executing
```
$ sudo ifconfig lo multicast
```
on the terminal before launching autoware."
Localization failed in Custom Map of Carla,D_kwDOAnasMc4AT6pP,2023-05-22T10:24:09Z,kshitiz-deloitte,2,Answered,,,
Localization failed in Custom Map of Carla,D_kwDOAnasMc4AT6pP,2023-05-22T10:24:09Z,kshitiz-deloitte,2,Answered,DC_kwDOAnasMc4AWxA7,VRichardJP,"You say there is no vehicle visible in Autoware, but I see it on the left part of the map (in the center of the concentric circles) 🤔"
Localization failed in Custom Map of Carla,D_kwDOAnasMc4AT6pP,2023-05-22T10:24:09Z,kshitiz-deloitte,2,Answered,DC_kwDOAnasMc4AWxhY,kshitiz-deloitte,That is after I manually set the initial pose.
Localization failed in Custom Map of Carla,D_kwDOAnasMc4AT6pP,2023-05-22T10:24:09Z,kshitiz-deloitte,2,Answered,DC_kwDOAnasMc4AWyE4,VRichardJP,"Yes, this is how autoware works. Unless your simulator provide the initial position, for example with GNSS data."
Localization failed in Custom Map of Carla,D_kwDOAnasMc4AT6pP,2023-05-22T10:24:09Z,kshitiz-deloitte,2,Answered,DC_kwDOAnasMc4AWyPk,evshary,"You can also view from the [node diagram](https://app.diagrams.net/?lightbox=1#Uhttps%3A%2F%2Fautowarefoundation.github.io%2Fautoware-documentation%2Fmain%2Fdesign%2Fautoware-architecture%2Fnode-diagram%2Foverall-node-diagram-autoware-universe.drawio.svg). You can see that pose_initializer can receive data either from HMI or gnss_poser. That means you can get initial pose from rviz or GNSS data. Just as @VRichardJP said, you can check whether your simulator / bridge provides the correct GNSS data first.
![image](https://github.com/autowarefoundation/autoware/assets/456210/fd2e5551-1ac5-43ac-b50e-ff51782d647f)
"
Localization failed in Custom Map of Carla,D_kwDOAnasMc4AT6pP,2023-05-22T10:24:09Z,kshitiz-deloitte,2,Answered,DC_kwDOAnasMc4AbY_4,dilloncsr,@kshitiz-deloitte What process did you use to create the PCD file for your RoadRunner map?
2023-05-22 ODD working group weekly meeting (141),D_kwDOAnasMc4AT6qe,2023-05-22T10:49:09Z,Igata-ctrl,0,Unanswered,,,
Software WG Meeting 2023/05/23,D_kwDOAnasMc4AT7Sb,2023-05-23T04:35:52Z,mitsudome-r,1,Answered,,,
Software WG Meeting 2023/05/23,D_kwDOAnasMc4AT7Sb,2023-05-23T04:35:52Z,mitsudome-r,1,Answered,DC_kwDOAnasMc4AWyrD,xmfcx,"- https://github.com/autowarefoundation/autoware.universe/issues/3787
- https://github.com/orgs/autowarefoundation/discussions/3491 (beyond amend_auto)
- https://github.com/autowarefoundation/autoware-documentation/pull/328#discussion_r1201526741"
Scenario test simulation isnt working,D_kwDOAnasMc4AT7p-,2023-05-23T13:29:57Z,LGerstla01,1,Answered,,,
Scenario test simulation isnt working,D_kwDOAnasMc4AT7p-,2023-05-23T13:29:57Z,LGerstla01,1,Answered,DC_kwDOAnasMc4AW0uz,maxime-clem,Are you able to run the planning simulator ? (https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/)
Scenario test simulation isnt working,D_kwDOAnasMc4AT7p-,2023-05-23T13:29:57Z,LGerstla01,1,Answered,DC_kwDOAnasMc4AW1Th,LGerstla01,"Hi, yes I am able to run the planning simulator and also the Rosbag replay simulation."
Scenario test simulation isnt working,D_kwDOAnasMc4AT7p-,2023-05-23T13:29:57Z,LGerstla01,1,Answered,DC_kwDOAnasMc4AW6ir,maxime-clem,"My only guess is that there is an incompatibility between the versions of some of the packages. Can you try to install Autoware from scratch to see if it solves the issue ?
Otherwise you can open an issue on https://github.com/tier4/scenario_simulator_v2"
Scenario test simulation isnt working,D_kwDOAnasMc4AT7p-,2023-05-23T13:29:57Z,LGerstla01,1,Answered,DC_kwDOAnasMc4AW66l,major2012ye,"Hi,I i happen to be able to run this example.But I am fresh on autoware.Here is the part of the terminal output,Maybe there is useful info for you.And,When it runs,It consumes a lot of network data and cpu and memory.as the picture shows.(you can see that on top right conor of the pic),And the terminal output contains a hint:
[openscenario_interpreter_node-3] [WARN] [1685083608.454609437] [simulation.openscenario_interpreter]: Your machine is not powerful enough to run the scenario at the specified frame rate (30 Hz). We recommend that you reduce the frame rate to 28.5714 or less.

ros2 launch scenario_test_runner scenario_test_runner.launch.py   architecture_type:=awf/universe   record:=false   scenario:='$(find-pkg-share scenario_test_runner)/scenario/sample.yaml'   sensor_model:=sample_sensor_kit   vehicle_model:=sample_vehicle
[INFO] [launch]: All log files can be found below /home/ye/.ros/log/2023-05-26-14-46-26-785272-ye-ye-13837
[INFO] [launch]: Default logging verbosity is set to INFO
architecture_type       := awf/universe
autoware_launch_file    := planning_simulator.launch.xml
autoware_launch_package := autoware_launch
global_frame_rate       := 30.0
global_real_time_factor := 1.0
global_timeout          := 180
initialize_duration     := 30
launch_autoware         := True
launch_rviz             := False
output_directory        := /tmp
port                    := 8080
record                  := false
rviz_config             := 
scenario                := $(find-pkg-share scenario_test_runner)/scenario/sample.yaml
sensor_model            := sample_sensor_kit
sigterm_timeout         := 8
vehicle_model           := sample_vehicle
workflow                := /dev/null
[INFO] [scenario_test_runner.py-1]: process started with pid [13848]
[INFO] [simple_sensor_simulator_node-2]: process started with pid [13850]
[INFO] [openscenario_interpreter_node-3]: process started with pid [13852]
[INFO] [openscenario_preprocessor_node-4]: process started with pid [13854]
[INFO] [openscenario_visualization_node-5]: process started with pid [13856]
[scenario_test_runner.py-1] [INFO] [1685083587.393082652] [simulation.scenario_test_runner]: connection established with preprocessor
[openscenario_preprocessor_node-4] /tmp/converted_scenario/vehicle/sample_vehicle.xosc
[scenario_test_runner.py-1] [INFO] [1685083590.237693129] [simulation.scenario_test_runner]: Result of /simulation/openscenario_preprocessor/load: success
[scenario_test_runner.py-1] [INFO] [1685083590.239625309] [simulation.scenario_test_runner]: Result of /simulation/openscenario_preprocessor/check: True
[scenario_test_runner.py-1] [INFO] [1685083590.241565371] [simulation.scenario_test_runner]: derived : /tmp/scenario_test_runner/sample/sample_0.xosc
[scenario_test_runner.py-1] [INFO] [1685083590.243404289] [simulation.scenario_test_runner]: Result of /simulation/openscenario_preprocessor/check: False
[scenario_test_runner.py-1] [INFO] [1685083590.244262824] [simulation.scenario_test_runner]: finish derivation
[scenario_test_runner.py-1] [INFO] [1685083590.245082331] [simulation.scenario_test_runner]: /tmp/scenario_test_runner/sample/sample_0.xosc
[scenario_test_runner.py-1] [INFO] [1685083590.245899505] [simulation.scenario_test_runner]: Run sample_0.xosc (1 of 1)
[openscenario_interpreter_node-3] /tmp/converted_scenario/vehicle/sample_vehicle.xosc
[openscenario_interpreter_node-3] [WARN] [1685083593.683845967] [rcl.logging_rosout]: Publisher already registered for provided node name. If this is due to multiple nodes with the same name then all logs for that logger name will go out over the existing publisher. As soon as any node with that name is destructed it will unregister the publisher, preventing any further logs for that name from being published on the rosout topic.
[openscenario_interpreter_node-3] [INFO] [launch]: All log files can be found below /home/ye/.ros/log/2023-05-26-14-46-35-867396-ye-ye-13952
[openscenario_interpreter_node-3] [INFO] [launch]: Default logging verbosity is set to INFO
[openscenario_interpreter_node-3] [INFO] [1685083598.556097436] [simulation.concealer_user]: /api/autoware/set/velocity_limit service is not ready.
[openscenario_interpreter_node-3] [INFO] [1685083598.556237053] [simulation.concealer_user]: /api/autoware/set/velocity_limit service is not ready.
[openscenario_interpreter_node-3] [INFO] [1685083599.556417784] [simulation.concealer_user]: /api/autoware/set/velocity_limit service is not ready.
[openscenario_interpreter_node-3] [INFO] [1685083600.556667330] [simulation.concealer_user]: /api/autoware/set/velocity_limit service is not ready.
[openscenario_interpreter_node-3] [INFO] [1685083601.556905072] [simulation.concealer_user]: /api/autoware/set/velocity_limit service is not ready.
[openscenario_interpreter_node-3] [INFO] [1685083602.557141132] [simulation.concealer_user]: /api/autoware/set/velocity_limit service is not ready.
[openscenario_interpreter_node-3] [INFO] [1685083603.557385022] [simulation.concealer_user]: /api/autoware/set/velocity_limit service is not ready.
[openscenario_interpreter_node-3] [INFO] [1685083604.557632477] [simulation.concealer_user]: /api/autoware/set/velocity_limit service is not ready.
[openscenario_interpreter_node-3] [INFO] [1685083605.557877815] [simulation.concealer_user]: /api/autoware/set/velocity_limit service is not ready.
[openscenario_interpreter_node-3] [INFO] [1685083606.558137016] [simulation.concealer_user]: /api/autoware/set/velocity_limit service is not ready.
[openscenario_interpreter_node-3] [INFO] [1685083607.558324347] [simulation.concealer_user]: /api/autoware/set/velocity_limit service is not ready.
[openscenario_interpreter_node-3] [INFO] [launch_ros.actions.load_composable_nodes]: Loaded node '/system/component_state_monitor/component' in container '/system/component_state_monitor/container'
[openscenario_interpreter_node-3] [INFO] [launch_ros.actions.load_composable_nodes]: Loaded node '/system/mrm_comfortable_stop_operator' in container '/system/mrm_comfortable_stop_operator/mrm_comfortable_stop_operator_container'
[openscenario_interpreter_node-3] [INFO] [launch_ros.actions.load_composable_nodes]: Loaded node '/system/mrm_emergency_stop_operator' in container '/system/mrm_emergency_stop_operator/mrm_emergency_stop_operator_container'
[openscenario_interpreter_node-3] [INFO] [launch_ros.actions.load_composable_nodes]: Loaded node '/control/external_cmd_converter' in container '/control/control_container'
[openscenario_interpreter_node-3] [INFO] [robot_state_publisher-1]: process started with pid [14900]
[openscenario_interpreter_node-3] [INFO] [service_log_checker-2]: process started with pid [14902]
[openscenario_interpreter_node-3] [INFO] [component_container-3]: process started with pid [14904]
[openscenario_interpreter_node-3] [INFO] [topic_state_monitor_node-4]: process started with pid [14906]
[openscenario_interpreter_node-3] [INFO] [topic_state_monitor_node-5]: process started with pid [14908]
[openscenario_interpreter_node-3] [INFO] [topic_state_monitor_node-6]: process started with pid [14910]
[openscenario_interpreter_node-3] [INFO] [topic_state_monitor_node-7]: process started with pid [14912]
[openscenario_interpreter_node-3] [INFO] [topic_state_monitor_node-8]: process started with pid [14914]
[openscenario_interpreter_node-3] [INFO] [topic_state_monitor_node-9]: process started with pid [14916]
[openscenario_interpreter_node-3] [INFO] [topic_state_monitor_node-10]: process started with pid [14918]
[openscenario_interpreter_node-3] [INFO] [topic_state_monitor_node-11]: process started with pid [14920]
[openscenario_interpreter_node-3] [INFO] [topic_state_monitor_node-12]: process started with pid [15031]
[openscenario_interpreter_node-3] [INFO] [topic_state_monitor_node-13]: process started with pid [15033]
[openscenario_interpreter_node-3] [INFO] [topic_state_monitor_node-14]: process started with pid [15035]
[openscenario_interpreter_node-3] [INFO] [aggregator_node-15]: process started with pid [15037]
[openscenario_interpreter_node-3] [INFO] [system_error_monitor-16]: process started with pid [15039]
[openscenario_interpreter_node-3] [INFO] [emergency_handler-17]: process started with pid [15041]
[openscenario_interpreter_node-3] [INFO] [component_container-18]: process started with pid [15043]
[openscenario_interpreter_node-3] [INFO] [component_container-19]: process started with pid [15045]
[openscenario_interpreter_node-3] [INFO] [component_container-20]: process started with pid [15047]
[openscenario_interpreter_node-3] [INFO] [map_hash_generator-21]: process started with pid [15049]
[openscenario_interpreter_node-3] [INFO] [mission_planner-22]: process started with pid [15051]
[openscenario_interpreter_node-3] [INFO] [goal_pose_visualizer-23]: process started with pid [15053]
[openscenario_interpreter_node-3] [INFO] [scenario_selector-24]: process started with pid [15055]
[openscenario_interpreter_node-3] [INFO] [external_velocity_limit_selector-25]: process started with pid [15057]
[openscenario_interpreter_node-3] [INFO] [motion_velocity_smoother-26]: process started with pid [15059]
[openscenario_interpreter_node-3] [INFO] [component_container_mt-27]: process started with pid [15061]
[openscenario_interpreter_node-3] [INFO] [rtc_auto_mode_manager_node-28]: process started with pid [15063]
[openscenario_interpreter_node-3] [INFO] [component_container_mt-29]: process started with pid [15065]
[openscenario_interpreter_node-3] [INFO] [component_container-30]: process started with pid [15067]
[openscenario_interpreter_node-3] [INFO] [planning_validator_node-31]: process started with pid [15069]
[openscenario_interpreter_node-3] [INFO] [planning_evaluator-32]: process started with pid [15161]
[openscenario_interpreter_node-3] [INFO] [component_container-33]: process started with pid [15294]
[openscenario_interpreter_node-3] [INFO] [awapi_awiv_adapter-34]: process started with pid [15296]
[openscenario_interpreter_node-3] [INFO] [component_container-35]: process started with pid [15298]
[openscenario_interpreter_node-3] [INFO] [component_container_mt-36]: process started with pid [15300]
[openscenario_interpreter_node-3] [INFO] [component_container_mt-37]: process started with pid [15310]
[openscenario_interpreter_node-3] [INFO] [relay-38]: process started with pid [15332]
[openscenario_interpreter_node-3] [INFO] [relay-39]: process started with pid [15334]
[openscenario_interpreter_node-3] [INFO] [relay-40]: process started with pid [15337]
[openscenario_interpreter_node-3] [INFO] [path_distance_calculator_node-41]: process started with pid [15339]
[openscenario_interpreter_node-3] [INFO] [component_container_mt-42]: process started with pid [15350]
[openscenario_interpreter_node-3] [INFO] [web_server.py-43]: process started with pid [15352]
[openscenario_interpreter_node-3] [INFO] [initial_pose_adaptor-44]: process started with pid [15372]
[openscenario_interpreter_node-3] [INFO] [routing_adaptor-45]: process started with pid [15375]
[openscenario_interpreter_node-3] [INFO] [component_container_mt-46]: process started with pid [15380]
[openscenario_interpreter_node-3] [INFO] [rviz2-47]: process started with pid [15415]
[openscenario_interpreter_node-3] [INFO] [fault_injection_node-48]: process started with pid [15503]
[openscenario_interpreter_node-3] [INFO] [multi_object_tracker-49]: process started with pid [15506]
[openscenario_interpreter_node-3] [INFO] [map_based_prediction-50]: process started with pid [15515]
[openscenario_interpreter_node-3] [INFO] [pose_initializer_node-51]: process started with pid [15537]
[openscenario_interpreter_node-3] [INFO] [diagnostic_converter-52]: process started with pid [15578]
[openscenario_interpreter_node-3] [INFO] [launch_ros.actions.load_composable_nodes]: Loaded node '/map/lanelet2_map_loader' in container '/map/map_container'
[openscenario_interpreter_node-3] [INFO] [launch_ros.actions.load_composable_nodes]: Loaded node '/awapi/route_relay' in container '/awapi/awapi_relay_container'
[openscenario_interpreter_node-3] [WARN] [1685083608.454609437] [simulation.openscenario_interpreter]: Your machine is not powerful enough to run the scenario at the specified frame rate (30 Hz). We recommend that you reduce the frame rate to 28.5714 or less.
[openscenario_interpreter_node-3] [INFO] [launch_ros.actions.load_composable_nodes]: Loaded node '/map/lanelet2_map_visualization' in container '/map/map_container'
[openscenario_interpreter_node-3] [robot_state_publisher-1] [INFO] [1685083608.000384179] [robot_state_publisher]: got segment base_link
[openscenario_interpreter_node-3] [robot_state_publisher-1] [INFO] [1685083608.000481869] [robot_state_publisher]: got segment camera0/camera_link
[openscenario_interpreter_node-3] [robot_state_publisher-1] [INFO] [1685083608.000492397] [robot_state_publisher]: got segment camera0/camera_optical_link
[openscenario_interpreter_node-3] [robot_state_publisher-1] [INFO] [1685083608.000499677] [robot_state_publisher]: got segment camera1/camera_link
[openscenario_interpreter_node-3] [robot_state_publisher-1] [INFO] [1685083608.000506678] [robot_state_publisher]: got segment camera1/camera_optical_link
[openscenario_interpreter_node-3] [robot_state_publisher-1] [INFO] [1685083608.000511877] [robot_state_publisher]: got segment camera2/camera_link
[openscenario_interpreter_node-3] [robot_state_publisher-1] [INFO] [1685083608.000518147] [robot_state_publisher]: got segment camera2/camera_optical_link
[openscenario_interpreter_node-3] [robot_state_publisher-1] [INFO] [1685083608.000524660] [robot_state_publisher]: got segment camera3/camera_link
[openscenario_interpreter_node-3] [robot_state_publisher-1] [INFO] [1685083608.000531953] [robot_state_publisher]: got segment camera3/camera_optical_link
[openscenario_interpreter_node-3] [robot_state_publisher-1] [INFO] [1685083608.000538708] [robot_state_publisher]: got segment camera4/camera_link
[openscenario_interpreter_node-3] [robot_state_publisher-1] [INFO] [1685083608.000545847] [robot_state_publisher]: got segment camera4/camera_optical_link
[openscenario_interpreter_node-3] [robot_state_publisher-1] [INFO] [1685083608.000550614] [robot_state_publisher]: got segment camera5/camera_link
[openscenario_interpreter_node-3] [robot_state_publisher-1] [INFO] [1685083608.000554742] [robot_state_publisher]: got segment camera5/camera_optical_link
[openscenario_interpreter_node-3] [robot_state_publisher-1] [INFO] [1685083608.000558834] [robot_state_publisher]: got segment gnss_link
[openscenario_interpreter_node-3] [robot_state_publisher-1] [INFO] [1685083608.000563285] [robot_state_publisher]: got segment sensor_kit_base_link
[openscenario_interpreter_node-3] [robot_state_publisher-1] [INFO] [1685083608.000567852] [robot_state_publisher]: got segment tamagawa/imu_link
[openscenario_interpreter_node-3] [robot_state_publisher-1] [INFO] [1685083608.000572220] [robot_state_publisher]: got segment traffic_light_left_camera/camera_link
[openscenario_interpreter_node-3] [robot_state_publisher-1] [INFO] [1685083608.000576483] [robot_state_publisher]: got segment traffic_light_left_camera/camera_optical_link
[openscenario_interpreter_node-3] [robot_state_publisher-1] [INFO] [1685083608.000580620] [robot_state_publisher]: got segment traffic_light_right_camera/camera_link
[openscenario_interpreter_node-3] [robot_state_publisher-1] [INFO] [1685083608.000584743] [robot_state_publisher]: got segment traffic_light_right_camera/camera_optical_link
[openscenario_interpreter_node-3] [robot_state_publisher-1] [INFO] [1685083608.000588829] [robot_state_publisher]: got segment velodyne_left
[openscenario_interpreter_node-3] [robot_state_publisher-1] [INFO] [1685083608.000593021] [robot_state_publisher]: got segment velodyne_left_base_link
[openscenario_interpreter_node-3] [robot_state_publisher-1] [INFO] [1685083608.000597515] [robot_state_publisher]: got segment velodyne_rear
[openscenario_interpreter_node-3] [robot_state_publisher-1] [INFO] [1685083608.000601694] [robot_state_publisher]: got segment velodyne_rear_base_link
[openscenario_interpreter_node-3] [robot_state_publisher-1] [INFO] [1685083608.000605892] [robot_state_publisher]: got segment velodyne_right
[openscenario_interpreter_node-3] [robot_state_publisher-1] [INFO] [1685083608.000609943] [robot_state_publisher]: got segment velodyne_right_base_link
[openscenario_interpreter_node-3] [robot_state_publisher-1] [INFO] [1685083608.000614045] [robot_state_publisher]: got segment velodyne_top
[openscenario_interpreter_node-3] [robot_state_publisher-1] [INFO] [1685083608.000618156] [robot_state_publisher]: got segment velodyne_top_base_link



![Screenshot from 2023-05-26 14-45-46](https://github.com/autowarefoundation/autoware/assets/16773455/a2b464c6-dd3d-42c2-bc85-04e8238abf32)



"
Scenario test simulation isnt working,D_kwDOAnasMc4AT7p-,2023-05-23T13:29:57Z,LGerstla01,1,Answered,DC_kwDOAnasMc4AW67u,maxime-clem,"So in your case the scenario runs without issue ?

By the way, the network usage can be disabled following these instructions: https://autowarefoundation.github.io/autoware-documentation/main/installation/additional-settings-for-developers/#enabling-localhost-only-communication"
2023-05-24 Simulation Working group Meeting,D_kwDOAnasMc4AT75f,2023-05-23T18:11:40Z,Hyeongseok-Jeon,0,Unanswered,,,
Localization & Mapping WG Meeting 24/05/2023,D_kwDOAnasMc4AT8ZR,2023-05-24T09:53:25Z,armaganarsln,0,Unanswered,,,
Reference Design WG Meeting (05/24/2023),D_kwDOAnasMc4AT8ml,2023-05-24T14:18:22Z,chishengshih,0,Unanswered,,,
2023-05-25 Racing Working Group Meeting,D_kwDOAnasMc4AT9Bw,2023-05-25T02:07:41Z,QZJGeorge,0,Unanswered,,,
Planning&Control WG Meeting 2023/05/25,D_kwDOAnasMc4AT9Ll,2023-05-25T07:21:47Z,mehmetdogru,4,Answered,,,
Planning&Control WG Meeting 2023/05/25,D_kwDOAnasMc4AT9Ll,2023-05-25T07:21:47Z,mehmetdogru,4,Answered,DC_kwDOAnasMc4AW4YO,ahmeddesokyebrahim,"- `no_drivable_lane`  : 
  - [List of modules](https://github.com/orgs/autowarefoundation/discussions/3275#discussioncomment-5379038)
  - [Remaining review after removing RTC handling](https://github.com/tier4/tier4_autoware_msgs/pull/87)
  - Shall I wait until the [RTI](https://github.com/autowarefoundation/autoware/issues/3487) is implemented, test, and merged ? or make it in further issue ?
  
  "
Planning&Control WG Meeting 2023/05/25,D_kwDOAnasMc4AT9Ll,2023-05-25T07:21:47Z,mehmetdogru,4,Answered,DC_kwDOAnasMc4AW4cr,kosuke55,"- `no_parking_aera`
  - https://github.com/autowarefoundation/autoware_common/pull/172 "
Planning&Control WG Meeting 2023/05/25,D_kwDOAnasMc4AT9Ll,2023-05-25T07:21:47Z,mehmetdogru,4,Answered,DC_kwDOAnasMc4AW4hB,satoshi-ota,"New manager docs **[here](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/docs/behavior_path_planner_manager_design/)**.
"
Planning&Control WG Meeting 2023/05/25,D_kwDOAnasMc4AT9Ll,2023-05-25T07:21:47Z,mehmetdogru,4,Answered,DC_kwDOAnasMc4AW4hx,satoshi-ota,"TODO: 

- [x] @satoshi-ota  create issue to discuss about the new manager docs."
Planning&Control WG Meeting 2023/05/25,D_kwDOAnasMc4AT9Ll,2023-05-25T07:21:47Z,mehmetdogru,4,Answered,DC_kwDOAnasMc4AW4mI,satoshi-ota,"maybe it is better to use discussion than issue for Q&A.

So, please feel free to ask me about the manager here https://github.com/orgs/autowarefoundation/discussions/3097.
And, feedback for the docs is also welcome. (e.g. _It is better to add more detail description about... I can't understand the ... implementation._)"
Planning&Control WG Meeting 2023/05/25,D_kwDOAnasMc4AT9Ll,2023-05-25T07:21:47Z,mehmetdogru,4,Answered,DC_kwDOAnasMc4AW4kM,mitsudome-r,"I will post the links that was shared during the call to answer Bhurtel's questions:
- This is the link to accel/brake map calibration tool that can be used to convert Autoware's Ackermann command to vehicle specific actuation command (e.g., brake pedal, accel pedal, steering wheel): https://autowarefoundation.github.io/autoware.universe/main/vehicle/accel_brake_map_calibrator/accel_brake_map_calibrator/
- This is the link to Autoware's scenario simulation guide: https://autowarefoundation.github.io/autoware-documentation/main/tutorials/scenario-simulation/planning-simulation/scenario-test-simulation/
- This is the link to scenario_simulator_v2 repository: https://github.com/tier4/scenario_simulator_v2
- and this is the link to success/failure condition you can set using the scenario format: https://tier4.github.io/scenario_simulator_v2-docs/developer_guide/OpenSCENARIOSupport/#successfailure-judgment"
Design Document for the Autoware components,D_kwDOAnasMc4AT9Lm,2023-05-25T07:22:44Z,TakaHoribe,0,Unanswered,,,
Open AD Kit Working Group Meeting 25/5/2023,D_kwDOAnasMc4AT9bm,2023-05-25T12:34:36Z,HamburgDave,0,Unanswered,,,
Too sharp turn with new vehicle and carla sim,D_kwDOAnasMc4AT9wR,2023-05-25T18:55:32Z,Robotics010,2,Answered,,,
Too sharp turn with new vehicle and carla sim,D_kwDOAnasMc4AT9wR,2023-05-25T18:55:32Z,Robotics010,2,Answered,DC_kwDOAnasMc4AW6Ve,maxime-clem,"What is the delay between (a) when the Autoware controller outputs a positive acceleration and (b) when the Carla vehicle actually starts moving (or similarly, between the controller steering angle and the wheel turn in Carla).
By default, the lateral controller assumes a 240ms delay but maybe the delay with Carla is different (can be changed here: https://github.com/autowarefoundation/autoware_launch/blob/main/autoware_launch/config/control/trajectory_follower/lateral/mpc.param.yaml#L48)."
Too sharp turn with new vehicle and carla sim,D_kwDOAnasMc4AT9wR,2023-05-25T18:55:32Z,Robotics010,2,Answered,DC_kwDOAnasMc4AW77V,Robotics010,"Hey Maxime! Thanks for suggestion.
I've measured the input delay in longitudinal stimulation and got 250ms. I've changed it in mpc.param file but it looks like there is no effect on the problem (turns are still sharp, lateral error is still high at turns). I've tried input_delay 0.05 and 0.0 as well, but still - there is no effect on the problem ."
Too sharp turn with new vehicle and carla sim,D_kwDOAnasMc4AT9wR,2023-05-25T18:55:32Z,Robotics010,2,Answered,DC_kwDOAnasMc4AW78Q,Robotics010,"One note though. I didn't find yet an adequate steering feedback from CARLA sim, could it cause this problem? By inadequate steering feedback I mean, that the bridge publishes steering_status, which is equal to control input (not the current steering tire angle). For instance steering_status has desired right position, however the steering wheels are still turning to that desired right position."
Too sharp turn with new vehicle and carla sim,D_kwDOAnasMc4AT9wR,2023-05-25T18:55:32Z,Robotics010,2,Answered,DC_kwDOAnasMc4AW9AR,maxime-clem,"If I understand correctly, there is currently a delay between the steering angle requested by Autoware and the actual steering angle of the CARLA vehicle and Autoware is not aware of this delay. This could definitely be the cause of the issue.

Can you double check that the steering rate limit is correctly set (https://github.com/autowarefoundation/autoware_launch/blob/main/autoware_launch/config/control/trajectory_follower/lateral/mpc.param.yaml#L50) ?"
Too sharp turn with new vehicle and carla sim,D_kwDOAnasMc4AT9wR,2023-05-25T18:55:32Z,Robotics010,2,Answered,DC_kwDOAnasMc4AW9rZ,Robotics010,"Big thanks for the advice for configuring `steer_rate_lim_dps`, it has allowed me to decrease the lateral error significantly (from 1m to 0.4m), but turns are still sharp (here is a path):

![Screenshot from 2023-05-27 12-40-53](https://github.com/autowarefoundation/autoware/assets/16175093/30ab308e-9c2f-4fcf-95af-d1ccbea1149b)

I've measured the maximum steering rate as well as the input delay and got `steer_rate_lim_dps: 140.0` and `input_delay: 0.055`. Also I've tuned mpc to get lateral error lower as possible and I've ended with the following lateral control config:

[lateral_controller.param.zip](https://github.com/autowarefoundation/autoware/files/11582557/lateral_controller.param.zip)

And here is the performance charts:

![Screenshot from 2023-05-27 12-41-01](https://github.com/autowarefoundation/autoware/assets/16175093/0525295b-a2b7-4ff5-8e62-bf842be3743d)

![Screenshot from 2023-05-27 12-41-03](https://github.com/autowarefoundation/autoware/assets/16175093/1ed0c582-5323-4d99-81f4-5e58a0d5c78c)

![Screenshot from 2023-05-27 12-41-05](https://github.com/autowarefoundation/autoware/assets/16175093/5a4b5274-e909-4086-a185-ed02585d880b)

I'll fix the steering feedback (lateral control will be getting an actual steering angle feedback), but what else can I check to eliminate lateral error?"
Too sharp turn with new vehicle and carla sim,D_kwDOAnasMc4AT9wR,2023-05-25T18:55:32Z,Robotics010,2,Answered,DC_kwDOAnasMc4AXAjP,Robotics010,Maybe a setting of width of vehicle could influence lateral error? Or can I ask planning to narrow down drivable area?
Too sharp turn with new vehicle and carla sim,D_kwDOAnasMc4AT9wR,2023-05-25T18:55:32Z,Robotics010,2,Answered,DC_kwDOAnasMc4AXDvr,maxime-clem,"You can try to force the trajectory to stay closer to the centerline (by reducing the drivable area, or by tuning the `obstacle_avoidance_planner`), but I do not think it is a robust solution.

Ideally we want to reduce the lateral error but I am running out of ideas.
Here are a few more things you can check:
- Is there a significant delay in the data coming from Carla ? I know I already asked you to check the _control delay_ (Autoware -> Carla), but there might also be a delay in the other direction (Carla -> Autoware) which could cause issues.
- Does running at a lower velocity produce the same lateral error ?
- Does running the simulation at a lower rate produce the same lateral error ? (I am not sure if you can control the simulation time with Carla).
"
Too sharp turn with new vehicle and carla sim,D_kwDOAnasMc4AT9wR,2023-05-25T18:55:32Z,Robotics010,2,Answered,DC_kwDOAnasMc4AXFW2,Robotics010,I've already tried to lower speed to 2 m/s and I still get the same lateral error.
Too sharp turn with new vehicle and carla sim,D_kwDOAnasMc4AT9wR,2023-05-25T18:55:32Z,Robotics010,2,Answered,DC_kwDOAnasMc4AXFfp,Robotics010,"I've made a quick check with Carla -> Autoware delay: I made a simulation slower (in about 10 times slower), but I still get the same lateral error."
Too sharp turn with new vehicle and carla sim,D_kwDOAnasMc4AT9wR,2023-05-25T18:55:32Z,Robotics010,2,Answered,DC_kwDOAnasMc4AXFhg,Robotics010,"Well, lets close issue then, you helped me reduce lateral error significantly so that the carla vehicle doesn't climb on a curb when it turns. I'll revisit that problem later."
Too sharp turn with new vehicle and carla sim,D_kwDOAnasMc4AT9wR,2023-05-25T18:55:32Z,Robotics010,2,Answered,DC_kwDOAnasMc4AXLkN,Robotics010,"@maxime-clem, I've got an update. Desired steering tire angle (rad) to steering command [-1;1] conversion was a bit inaccurate, it wasn't linear as I expected. I've fixed that and that allowed me to decrease the lateral error down to 0.2m.

Here how it was with desired steering angle and actual steering steering angle:
![Screenshot from 2023-06-01 23-16-40](https://github.com/autowarefoundation/autoware/assets/16175093/f14297e8-1310-4d8a-8277-c68965e97ae1)
As you can see, actual steering angle was a bit more than desired. That is why my turns were more sharp, than expected.

Here is lateral error now:
![Screenshot from 2023-06-02 21-30-54](https://github.com/autowarefoundation/autoware/assets/16175093/eaa405c6-39cc-4818-9e11-aebff0611a6f)
The graphs are from trajectory_follower node, but it has the same lateral error chart as it was at the previous plotjuggler config."
Too sharp turn with new vehicle and carla sim,D_kwDOAnasMc4AT9wR,2023-05-25T18:55:32Z,Robotics010,2,Answered,DC_kwDOAnasMc4AW79r,Robotics010,"If you look at control_performance_analysis graphs you can see, that `Driving Status`/`current - desired steering tire angle` chart has `desired steering angle` (green color), which has even more angle, that `current steering tire angle` (red color). It means that lateral control has to turn even more sharply than it does now.
Am I understand it right? Does it mean that planning send such a trajectory with a sharp turn already?"
Too sharp turn with new vehicle and carla sim,D_kwDOAnasMc4AT9wR,2023-05-25T18:55:32Z,Robotics010,2,Answered,DC_kwDOAnasMc4AW9r_,Robotics010,"Well, no, that is indeed the control problem. If you look at lateral error from later_control diagnostic messages, then you can see, that there is the same big lateral error (1m). And it looks like the `desired steering angle` is derived from trajectory curvature and MPC does not minimize difference between current and desired steering tire angle directly."
scenario-simulation/planning-simulation/random-test-simulation can't work,D_kwDOAnasMc4AT-BF,2023-05-26T04:01:02Z,major2012ye,4,Answered,,,
scenario-simulation/planning-simulation/random-test-simulation can't work,D_kwDOAnasMc4AT-BF,2023-05-26T04:01:02Z,major2012ye,4,Answered,DC_kwDOAnasMc4AZCPs,J-xinyu,"I encountered the same problem, did you solve it?"
scenario-simulation/planning-simulation/random-test-simulation can't work,D_kwDOAnasMc4AT-BF,2023-05-26T04:01:02Z,major2012ye,4,Answered,DC_kwDOAnasMc4AZEQY,major2012ye,"解决了一部分问题-------- 原始邮件 --------发件人： 吉新宇 ***@***.***>日期： 2023年7月27日周四 16:39收件人： autowarefoundation/autoware ***@***.***>抄送： major2012ye ***@***.***>, Author ***@***.***>主    题： Re: [autowarefoundation/autoware] scenario-simulation/planning-simulation/random-test-simulation can't work (Discussion #3527)
I encountered the same problem, did you solve it?

—Reply to this email directly, view it on GitHub, or unsubscribe.You are receiving this because you authored the thread.Message ID: ***@***.***>"
scenario-simulation/planning-simulation/random-test-simulation can't work,D_kwDOAnasMc4AT-BF,2023-05-26T04:01:02Z,major2012ye,4,Answered,DC_kwDOAnasMc4AZUHq,kyoichi-sugahara,"@major2012ye 
It seems to be recognized as a same [issue](https://github.com/tier4/scenario_simulator_v2/issues/991) in the scenario_simulator_v2 repository. 
Since @YoshinoriTsutake has put it in the backlog as a planned task for future efforts, please wait."
scenario-simulation/planning-simulation/random-test-simulation can't work,D_kwDOAnasMc4AT-BF,2023-05-26T04:01:02Z,major2012ye,4,Answered,DC_kwDOAnasMc4AZUe2,major2012ye,ok，thanks for the reply.
scenario-simulation/planning-simulation/random-test-simulation can't work,D_kwDOAnasMc4AT-BF,2023-05-26T04:01:02Z,major2012ye,4,Answered,DC_kwDOAnasMc4Aa9sn,wbq0206,"If you have the conditions to create a map, you can try changing the map."
Is there anyone meet the bug about lidar_centerpoint when run autoware.universe,D_kwDOAnasMc4AT-Np,2023-05-26T09:38:33Z,major2012ye,1,Answered,,,
Is there anyone meet the bug about lidar_centerpoint when run autoware.universe,D_kwDOAnasMc4AT-Np,2023-05-26T09:38:33Z,major2012ye,1,Answered,DC_kwDOAnasMc4AW80o,kosuke55,"How about making sure the workspace is not overlaid and doing a clean build the pacakge?
```
echo $COLCON_PREFIX_PATH
rm -rf build/lidar_centerpoint* install/lidar_centerpoint*
colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release --packages-up-to lidar_centerpoint
```"
Is there anyone meet the bug about lidar_centerpoint when run autoware.universe,D_kwDOAnasMc4AT-Np,2023-05-26T09:38:33Z,major2012ye,1,Answered,DC_kwDOAnasMc4AXBF5,major2012ye,"thank you,I tried the commonds you mentioned above but it not works."
2023-05-29 ODD working group weekly meeting (142),D_kwDOAnasMc4AUAYk,2023-05-29T13:59:38Z,Igata-ctrl,0,Unanswered,,,
Autoware is apparently only using 1 CPU process. Is this normal?,D_kwDOAnasMc4AUA3s,2023-05-30T08:00:10Z,MarioAlmelaUMH,2,Answered,,,
Autoware is apparently only using 1 CPU process. Is this normal?,D_kwDOAnasMc4AUA3s,2023-05-30T08:00:10Z,MarioAlmelaUMH,2,Answered,DC_kwDOAnasMc4AXBlz,mitsudome-r,"Autoware should be using multiple CPUs by default. Could you try running some of the demos in the following page without Carla and see if it still use only 1 core? 
* https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/
* https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/rosbag-replay-simulation/"
Autoware is apparently only using 1 CPU process. Is this normal?,D_kwDOAnasMc4AUA3s,2023-05-30T08:00:10Z,MarioAlmelaUMH,2,Answered,DC_kwDOAnasMc4AXBn_,MarioAlmelaUMH,"You are right. When I use the ad-hoc simulation, it shows a way healthier profile:
![performance_autoware3](https://github.com/autowarefoundation/autoware/assets/119304913/697b3ed6-37b1-4c6e-92b9-7f1a9e08c42c)

I guess the profile problem is a Carla thing, but do you know what could be happening?

Thanks for your quick answers."
How to adapt to a new vehicle chassis,D_kwDOAnasMc4AUA6l,2023-05-30T09:02:25Z,L-Net-1992,1,Answered,,,
How to adapt to a new vehicle chassis,D_kwDOAnasMc4AUA6l,2023-05-30T09:02:25Z,L-Net-1992,1,Answered,DC_kwDOAnasMc4AYBbc,damodarRohit,"You will have to create your own custom vehicle interface. Autoware had the following documentation on integration :

https://autowarefoundation.github.io/autoware-documentation/main/how-to-guides/integrating-autoware/overview/

https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/components/vehicle-interface/

Hope this helps!"
How to adapt to a new vehicle chassis,D_kwDOAnasMc4AUA6l,2023-05-30T09:02:25Z,L-Net-1992,1,Answered,DC_kwDOAnasMc4AaxqD,L-Net-1992,thanks
Software WG Meeting 2023/05/30,D_kwDOAnasMc4AUBE6,2023-05-30T12:50:40Z,xmfcx,0,Unanswered,,,
Perception & Sensing WG Meeting 31/05/2023,D_kwDOAnasMc4AUBil,2023-05-31T01:03:32Z,drwnz,1,Answered,,,
Perception & Sensing WG Meeting 31/05/2023,D_kwDOAnasMc4AUBil,2023-05-31T01:03:32Z,drwnz,1,Answered,DC_kwDOAnasMc4AXFAB,lexavtanke,[Progress repor](https://docs.google.com/presentation/d/1X3fFQbZMjVpbu4fuxxb-cADEcrjhbihO/edit?usp=sharing&ouid=112531336602898847104&rtpof=true&sd=true)t on ML occupancy prediction task 
Ubuntu 20.04 Adapts to Autoware (Humble),D_kwDOAnasMc4AUBks,2023-05-31T02:12:04Z,Autostone-c,1,Answered,,,
Ubuntu 20.04 Adapts to Autoware (Humble),D_kwDOAnasMc4AUBks,2023-05-31T02:12:04Z,Autostone-c,1,Answered,DC_kwDOAnasMc4AXDt3,maxime-clem,"Using docker (https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/docker-installation/) is the recommended way to run the humble version of Autoware on Ubuntu 20.04.
Even if you could compile ros 2 humble, you may encounter issues with other dependencies of Autoware (e.g., libraries that are not available on 20.04) but the best way to make sure is to try running the planning simulation tutorial https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/."
Ubuntu 20.04 Adapts to Autoware (Humble),D_kwDOAnasMc4AUBks,2023-05-31T02:12:04Z,Autostone-c,1,Answered,DC_kwDOAnasMc4AXHLm,Autostone-c,"I have already compiled and built the source code, but there is a high probability that it will fail when running this example and cannot initialize the initial pose of the car.  and there are no errors, so I cannot locate the cause"
Ubuntu 20.04 Adapts to Autoware (Humble),D_kwDOAnasMc4AUBks,2023-05-31T02:12:04Z,Autostone-c,1,Answered,DC_kwDOAnasMc4AXHMy,maxime-clem,"> high probability that it will fail

Does this mean that it sometimes work fine ? i.e., you can set the initial pose, plan a trajectory, engage the vehicle, and drive the ego vehicle to its goal ?

> there are no errors, so I cannot locate the cause

Please share the full log file here so I can make sure there are no errors or warning that would explain the issue."
Ubuntu 20.04 Adapts to Autoware (Humble),D_kwDOAnasMc4AUBks,2023-05-31T02:12:04Z,Autostone-c,1,Answered,DC_kwDOAnasMc4AXHPf,Autostone-c,"> > high probability that it will fail
> 
> Does this mean that it sometimes work fine ? i.e., you can set the initial pose, plan a trajectory, engage the vehicle, and drive the ego vehicle to its goal ?
> 
> > there are no errors, so I cannot locate the cause
> 
> Please share the full log file here so I can make sure there are no errors or warning that would explain the issue.

Yes, I have succeeded once, perhaps after trying more than ten times"
Ubuntu 20.04 Adapts to Autoware (Humble),D_kwDOAnasMc4AUBks,2023-05-31T02:12:04Z,Autostone-c,1,Answered,DC_kwDOAnasMc4AXHPn,Autostone-c,but with carla(0.9.13)，its always failed
Ubuntu 20.04 Adapts to Autoware (Humble),D_kwDOAnasMc4AUBks,2023-05-31T02:12:04Z,Autostone-c,1,Answered,DC_kwDOAnasMc4AXHRF,Autostone-c,"> > high probability that it will fail
> 
> Does this mean that it sometimes work fine ? i.e., you can set the initial pose, plan a trajectory, engage the vehicle, and drive the ego vehicle to its goal ?
> 
> > there are no errors, so I cannot locate the cause
> 
> Please share the full log file here so I can make sure there are no errors or warning that would explain the issue.

[log.tar.gz](https://github.com/autowarefoundation/autoware/files/11623778/log.tar.gz)
"
Ubuntu 20.04 Adapts to Autoware (Humble),D_kwDOAnasMc4AUBks,2023-05-31T02:12:04Z,Autostone-c,1,Answered,DC_kwDOAnasMc4AXHSr,maxime-clem,"Sorry but your use case is not clear.
Your original question is about building and running the `humble` version of Autoware on Ubuntu 20.04 but now you are mentioning Carla. Carla is not officially supported so it is more difficult to understand and solve issues.

> Yes, I have succeeded once, perhaps after trying more than ten times

Was it with Carla or following the normal tutorial ?
"
Ubuntu 20.04 Adapts to Autoware (Humble),D_kwDOAnasMc4AUBks,2023-05-31T02:12:04Z,Autostone-c,1,Answered,DC_kwDOAnasMc4AXHU_,Autostone-c,"> Sorry but your use case is not clear. Your original question is about building and running the `humble` version of Autoware on Ubuntu 20.04 but now you are mentioning Carla. Carla is not officially supported so it is more difficult to understand and solve issues.
> 
> > Yes, I have succeeded once, perhaps after trying more than ten times
> 
> Was it with Carla or following the normal tutorial ?

Yes, but this log.tar.gz is only an official example(ros2 launch autoware_launch planning_simulator.launch.xml map_path:=$HOME/$my_name/autoware_map/sample-map-planning vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit
), without Carla participating"
Ubuntu 20.04 Adapts to Autoware (Humble),D_kwDOAnasMc4AUBks,2023-05-31T02:12:04Z,Autostone-c,1,Answered,DC_kwDOAnasMc4AXHlQ,maxime-clem,"There are no errors in the log but it looks like you are missing some components.
At least I cannot find the `default_ad_api.node.localization` which is supposed to initialize localization.
Are you using the latest version of Autoware or some specific tag/hash ?"
Ubuntu 20.04 Adapts to Autoware (Humble),D_kwDOAnasMc4AUBks,2023-05-31T02:12:04Z,Autostone-c,1,Answered,DC_kwDOAnasMc4AXJFK,Autostone-c,"> There are no errors in the log but it looks like you are missing some components. At least I cannot find the `default_ad_api.node.localization` which is supposed to initialize localization. Are you using the latest version of Autoware or some specific tag/hash ?


Due to the need for some of the latest autoware (main) versions being Ubuntu 22.04, but I am running on ubuntu20.04，so I chose to compile and build this commit（HEAD detached at eb0ac2af ）
"
Ubuntu 20.04 Adapts to Autoware (Humble),D_kwDOAnasMc4AUBks,2023-05-31T02:12:04Z,Autostone-c,1,Answered,DC_kwDOAnasMc4AXJHj,evshary,"Just out of curiosity, is there any reason that you don't want to use docker?
I think it can solve most of the problems caused by Ubuntu and ROS 2 versions.
BTW, I also try to run Carla with Autoware Humble recently but they are bridged with the help of Zenoh.
If you are interested, you can take a look at https://github.com/evshary/autoware_carla_launch/tree/humble"
Emergency stop occurs in PID Longitudinal Controller when pulling out,D_kwDOAnasMc4AUBqD,2023-05-31T05:40:17Z,TaikiYamada4,1,Answered,,,
Emergency stop occurs in PID Longitudinal Controller when pulling out,D_kwDOAnasMc4AUBqD,2023-05-31T05:40:17Z,TaikiYamada4,1,Answered,DC_kwDOAnasMc4AXTFu,TakaHoribe,"I'm not sure about Question 1 and I don't think that will happen.

About question 2, the emergency handling in the `longitudinal_controller` is independent and does not refer to any other messages/status. The fail-safe API work with the `vehicle_cmd_gate` node."
Cannot locate rosdep definition for [osrf_testing_tools_cpp]?,D_kwDOAnasMc4AUCUo,2023-05-31T20:58:37Z,EcotronCorp,0,Unanswered,,,
Documentation on setting up and running Autoware in Jetson AGX Orin,D_kwDOAnasMc4AUCXX,2023-05-31T22:48:03Z,damodarRohit,0,Unanswered,,,
Converting WGS 84 point into Autoware's `geometry_msgs::msg::PoseStamped`,D_kwDOAnasMc4AUCYN,2023-05-31T23:29:50Z,hcn1519,1,Answered,,,
Converting WGS 84 point into Autoware's `geometry_msgs::msg::PoseStamped`,D_kwDOAnasMc4AUCYN,2023-05-31T23:29:50Z,hcn1519,1,Answered,DC_kwDOAnasMc4AXGMJ,kminoda,"gnss_poser supports that conversion from global to local coordinate with various projection type (incl. MGRS, UTM, etc). 
https://github.com/autowarefoundation/autoware.universe/tree/main/sensing/gnss_poser"
Converting WGS 84 point into Autoware's `geometry_msgs::msg::PoseStamped`,D_kwDOAnasMc4AUCYN,2023-05-31T23:29:50Z,hcn1519,1,Answered,DC_kwDOAnasMc4AXJHt,hcn1519,"Thank you for your comment. I looked into it, but I am not sure which topic should I use and what should be the input look like.
Can you give me an example for it?"
Converting WGS 84 point into Autoware's `geometry_msgs::msg::PoseStamped`,D_kwDOAnasMc4AUCYN,2023-05-31T23:29:50Z,hcn1519,1,Answered,DC_kwDOAnasMc4AXJIp,kminoda,"Maybe looking into a sample rosbag in [logging simulator tutorial (rosbag replayer)](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/rosbag-replay-simulation/#rosbag-replay-simulation) help. It uses gnss sensor data for pose initialization, which has longitude and latitude in its ROS 2 topic. "
Lanelet not located properly in Autoware,D_kwDOAnasMc4AUCm0,2023-06-01T07:08:58Z,Tester2009,1,Answered,,,
Lanelet not located properly in Autoware,D_kwDOAnasMc4AUCm0,2023-06-01T07:08:58Z,Tester2009,1,Answered,DC_kwDOAnasMc4AXG7z,Tester2009,"I close this discussion as it has been answered.

Here is the link to the answer; https://github.com/autowarefoundation/autoware/issues/3540#issuecomment-1571520186"
ubuntu20.04 autoware(humble) carla(0.9.13),D_kwDOAnasMc4AUCsq,2023-06-01T09:07:42Z,Autostone-c,0,Unanswered,,,
Open AD Kit Working Group Meeting 1/6/2023,D_kwDOAnasMc4AUCys,2023-06-01T11:20:30Z,HamburgDave,0,Unanswered,,,
Running Autoware in a distributed computing setup for improved performance,D_kwDOAnasMc4AUC_9,2023-06-01T15:45:05Z,damodarRohit,3,Answered,,,
Running Autoware in a distributed computing setup for improved performance,D_kwDOAnasMc4AUC_9,2023-06-01T15:45:05Z,damodarRohit,3,Answered,DC_kwDOAnasMc4AXJJQ,evshary,"Actually, I don't have much experience in this case. However, in the scenario, the connection between your Orin and Workstation might be the key point. If you use ROS 2 & DDS to connect, running in the wireless environment might not be suitable. In my past experience, DDS doesn't perform well in a wireless environment while there are too many ROS 2 topics (maybe it works if you only have two hosts). If you still want to run in a wireless environment, maybe [zenoh-bridge-dds](https://github.com/eclipse-zenoh/zenoh-plugin-dds) is another solution.

I have another question: Since you'll add another Workstation + GPU in your environment, why do you still need Jetson AGX Orin? It should be OK to run the whole Autoware in your workstation. Is there any reason you need Orin?"
Running Autoware in a distributed computing setup for improved performance,D_kwDOAnasMc4AUC_9,2023-06-01T15:45:05Z,damodarRohit,3,Answered,DC_kwDOAnasMc4AYBZZ,damodarRohit,"Hi @evshary, thanks for your inputs. Will try zenoh-bridge for the wireless setup. 
The Orin will be on a smaller robot chassis that will not be able to handle the weight or power requirement of a workstation."
Running Autoware in a distributed computing setup for improved performance,D_kwDOAnasMc4AUC_9,2023-06-01T15:45:05Z,damodarRohit,3,Answered,DC_kwDOAnasMc4AXPz8,mitsudome-r,"We have a vehicle with 2 Nuousys PC + 4 ADLINK ROSCube (which uses Jetson Xavier inside). They are connected with ethernet switch, and I think we had to do some tuning with DDS configuration. We can provide a sample if you are interested."
Running Autoware in a distributed computing setup for improved performance,D_kwDOAnasMc4AUC_9,2023-06-01T15:45:05Z,damodarRohit,3,Answered,DC_kwDOAnasMc4AYBZv,damodarRohit,"Hi @mitsudome-r san, we completed an initial setup with an ethernet switch and were able to run perception component on the workstation and rest of AUTOWARE on the Orin. There was no much additional tuning required, but it will be helpful to have the sample configuration.

We are now trying to go ahead and replace the ethernet swicth with a wireless connection."
Running Autoware in a distributed computing setup for improved performance,D_kwDOAnasMc4AUC_9,2023-06-01T15:45:05Z,damodarRohit,3,Answered,DC_kwDOAnasMc4AYqb5,markusschratter,"Hi @mitsudome-r, I also want to distribute components to different machines based on workload issues. Is it possible to share your DDS configuration?"
Running Autoware in a distributed computing setup for improved performance,D_kwDOAnasMc4AUC_9,2023-06-01T15:45:05Z,damodarRohit,3,Answered,DC_kwDOAnasMc4AYJnm,Autostone-c,"hi，Recently, I also ran autoware（awsim-stable） on Orin and conducted joint debugging with the awsim simulation platform on x86, but running autoware on Orin was too laggy and too laggy, and path planning and traffic light recognition were basically impossible. Where should I optimize this performance"
How to Set Consistent Start Conditions and Goals in AWSIM via Command Line?,D_kwDOAnasMc4AUDRS,2023-06-02T00:05:13Z,SakodaShintaro,3,Answered,,,
How to Set Consistent Start Conditions and Goals in AWSIM via Command Line?,D_kwDOAnasMc4AUDRS,2023-06-02T00:05:13Z,SakodaShintaro,3,Answered,DC_kwDOAnasMc4AXJDW,kminoda,"How about publishing `/planning/mission_planning/goal` manually, e.g. via `ros2 topic pub ...` ?"
How to Set Consistent Start Conditions and Goals in AWSIM via Command Line?,D_kwDOAnasMc4AUDRS,2023-06-02T00:05:13Z,SakodaShintaro,3,Answered,DC_kwDOAnasMc4AXJE4,taikitanaka3,"@SakodaShintaro 
You can also use automatic goal rviz plugin to save file and load goal from file. 
You can see documentation to know how to use it.
https://github.com/autowarefoundation/autoware.universe/tree/main/common/tier4_automatic_goal_rviz_plugin

However there is no automatic set initial pose rviz plugin so I recommend you to add that function to this plugin."
How to Set Consistent Start Conditions and Goals in AWSIM via Command Line?,D_kwDOAnasMc4AUDRS,2023-06-02T00:05:13Z,SakodaShintaro,3,Answered,DC_kwDOAnasMc4AXJIN,SakodaShintaro,"@kminoda 
Thank you very much.

I can set the same goal for nishishinjuku_autoware_map by

```
ros2 topic pub /planning/mission_planning/goal geometry_msgs/msg/PoseStamped ""{header: {stamp: {sec: 181, nanosec: 289995947}, frame_id: 'map'}, pose: {position: {x: 81513.28043385514, y: 50005.45918464601, z: 41.956607083589915}, orientation: {x: -0.006990832349951191, y: -0.0027850020337878896, z: 0.12127359538547165, w: 0.9925905938950901}}}"" --once
```

@taikitanaka3 
Thank you. I didn't know automatic goal rviz plugin. 

I could set the goal and save & load.

This is very useful :)

![Screenshot from 2023-06-02 10-20-19](https://github.com/autowarefoundation/autoware/assets/28504069/3dc94e06-122a-4e7c-af11-8c1cb681a392)

In AWSIM, the initial position is set automatically, so for my current use, setting a goal is enough.
"
"Error ""status code 3 'The planned route is empty.'""",D_kwDOAnasMc4AUDfj,2023-06-02T07:36:54Z,shintaro-mori,1,Answered,,,
"Error ""status code 3 'The planned route is empty.'""",D_kwDOAnasMc4AUDfj,2023-06-02T07:36:54Z,shintaro-mori,1,Answered,DC_kwDOAnasMc4AXzhu,shintaro-mori,"This one is self-resolved.
I did not use GPS, but it was because the coordinate system of the lanelet was set to MGRS by default, so the lanelet was set out of alignment with the point cloud map.
When the coordinate system was changed to local, the path was generated correctly."
Need help with Lidar_centerpoint error,D_kwDOAnasMc4AUFpH,2023-06-05T07:24:50Z,JoonKi0111,2,Answered,,,
Need help with Lidar_centerpoint error,D_kwDOAnasMc4AUFpH,2023-06-05T07:24:50Z,JoonKi0111,2,Answered,DC_kwDOAnasMc4AXVcM,badai-nguyen,"@JoonKi0111 Did you use with latest [autoware](https://github.com/autowarefoundation/autoware.universe)?
There are tutorial for installation and running with demo rosbag that you can try [here](https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/source-installation/).
"
Need help with Lidar_centerpoint error,D_kwDOAnasMc4AUFpH,2023-06-05T07:24:50Z,JoonKi0111,2,Answered,DC_kwDOAnasMc4AXYFo,ktro2828,@JoonKi0111 It looks this error is occurred by incomparability of the number of classes. Check whether the number of classes is same between your onnx and the parameter described in config.
2023-06-05 ODD working group weekly meeting (143),D_kwDOAnasMc4AUF9L,2023-06-05T14:00:13Z,Igata-ctrl,0,Unanswered,,,
How to investigate the reason why pull_out is not working.,D_kwDOAnasMc4AUGbq,2023-06-06T05:06:43Z,TaikiYamada4,2,Answered,,,
How to investigate the reason why pull_out is not working.,D_kwDOAnasMc4AUGbq,2023-06-06T05:06:43Z,TaikiYamada4,2,Answered,DC_kwDOAnasMc4AXQhQ,kosuke55,"@TaikiYamada4 
I suspect that the problem is that pull_out is not triggered by goal_planner being activated because the goal is close.
With the old behavior_path_planner manager, multiple modules can not run simultaneously.

To solve this problem, either one would work.
- make [minimum_request_length](https://github.com/autowarefoundation/autoware.universe/blob/main/planning/behavior_path_planner/config/goal_planner/goal_planner.param.yaml#L5) smaller not to run goal_planner.
- use the new behavior path manager which can run multiple modules simultaneously
  -  https://github.com/orgs/autowarefoundation/discussions/3097#discussioncomment-5599374 
  -  set `False` this flag 
https://github.com/autowarefoundation/autoware.universe/blob/main/planning/behavior_path_planner/CMakeLists.txt#L10



> Is there a document that precisely explains the condition to let the vehicle pull out?
I thought that the vehicle will pull out if it is inside the road_shoulder & the goal is set to an ordinary road.

sorry the documentation is not for latest, pull_out support ordinary road in https://github.com/autowarefoundation/autoware.universe/pull/3805, and execution condition was changed. I will send PR for updating docs, please wait :bow: 

> I also have another question that are there any kind of useful topics to debug this problem?
I found /planning/scenario_planning/lane_driving/behavior_planning/behavior_path_planner/debug/pull_out and /planning/scenario_planning/lane_driving/behavior_planning/behavior_path_planner/info/pull_out but they seem to be visualization markers that appear when the candidate path is NOT empty, so I doesn't help at this moment.

yes, the debug topic is right, I think they can be visualized if the module is run.


"
How to investigate the reason why pull_out is not working.,D_kwDOAnasMc4AUGbq,2023-06-06T05:06:43Z,TaikiYamada4,2,Answered,DC_kwDOAnasMc4AXQkV,TaikiYamada4,"Thank you so much!
Decreasing the minimum_request_length worked for me.
I thought pull_out has the largest priority but the goal_planner was taking over the planning because it has a further sight I guess?
"
How to investigate the reason why pull_out is not working.,D_kwDOAnasMc4AUGbq,2023-06-06T05:06:43Z,TaikiYamada4,2,Answered,DC_kwDOAnasMc4AXQmP,kosuke55,"> I thought pull_out has the largest priority but the goal_planner was taking over the planning because it has a further sight I guess?

This is a complicated issue, though,  goal_planner is activated in the loop before pull_out and does not reflect priority.

- goal_planner (fixed goal) is **activated in the first loop.**
  -  just use default value `is_waiting_approval_{false},` and keep the value. https://github.com/autowarefoundation/autoware.universe/blob/main/planning/behavior_path_planner/include/behavior_path_planner/scene_module/scene_module_interface.hpp#L77
- in pull_out,  `is_waiting_approval_`  is changed `false`(initial value) -> switch to `true` by `waitApproval()`  and rtc_auto_manager publish approval topic In first loop -> pull_out reflects the topic and **activated in the second loop**"
How to investigate the reason why pull_out is not working.,D_kwDOAnasMc4AUGbq,2023-06-06T05:06:43Z,TaikiYamada4,2,Answered,DC_kwDOAnasMc4AXQhc,kosuke55,"FYI: You can check which module is running with
- https://github.com/BehaviorTree/Groot for old manager
  - `ros2 run groot Groot` 
- https://github.com/autowarefoundation/autoware_launch/blob/main/autoware_launch/config/planning/scenario_planning/lane_driving/behavior_planning/behavior_path_planner/behavior_path_planner.param.yaml#L3 for new manager"
Software WG Meeting 2023/06/05,D_kwDOAnasMc4AUGcO,2023-06-06T05:25:00Z,mitsudome-r,1,Answered,,,
Software WG Meeting 2023/06/05,D_kwDOAnasMc4AUGcO,2023-06-06T05:25:00Z,mitsudome-r,1,Answered,DC_kwDOAnasMc4AXQwN,hueirutseng,ITRI ADV update [Slides](https://drive.google.com/file/d/19i3FsBdud_Xk92kdwA2PyVWcwfOJC5O6/view?usp=sharing)
Reference Design WG Meeting (06/07/2023),D_kwDOAnasMc4AUHDV,2023-06-06T20:44:59Z,chishengshih,0,Unanswered,,,
autoware(humble) simulation platform adaptation,D_kwDOAnasMc4AUHMg,2023-06-07T01:56:08Z,Autostone-c,2,Answered,,,
autoware(humble) simulation platform adaptation,D_kwDOAnasMc4AUHMg,2023-06-07T01:56:08Z,Autostone-c,2,Answered,DC_kwDOAnasMc4AXSzZ,maxime-clem,"There are tutorials for 3 simulators in the Autoware documentation.
- Simple planning simulator: https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/
- AWSIM: https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/digital-twin-simulation/awsim-tutorial/
- MORAI: https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/digital-twin-simulation/MORAI_Sim-tutorial/

As far as I know, support for other simulators is not officially supported.
Some contributors provided integration with CARLA as well: https://github.com/orgs/autowarefoundation/discussions/3391"
autoware(humble) simulation platform adaptation,D_kwDOAnasMc4AUHMg,2023-06-07T01:56:08Z,Autostone-c,2,Answered,DC_kwDOAnasMc4AXS0B,Autostone-c,"> Autoware 文档中有 3 个模拟器的教程。
> 
> * 简单的规划模拟器：https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/
> * AWSIM：https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/digital-twin-simulation/awsim-tutorial/
> * MORAI：https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/digital-twin-simulation/MORAI_Sim-tutorial/
> 
> 据我所知，官方不支持对其他模拟器的支持。 一些贡献者也提供了与 CARLA 的集成：[https ://github.com/orgs/autowarefoundation/discussions/3391](https://github.com/orgs/autowarefoundation/discussions/3391)

Based on your response, I understand that all three emulators can support autoware(humble), right?"
autoware(humble) simulation platform adaptation,D_kwDOAnasMc4AUHMg,2023-06-07T01:56:08Z,Autostone-c,2,Answered,DC_kwDOAnasMc4AXS1i,maxime-clem,Yes
autoware(humble) simulation platform adaptation,D_kwDOAnasMc4AUHMg,2023-06-07T01:56:08Z,Autostone-c,2,Answered,DC_kwDOAnasMc4Aa9vx,whbcumtb,@Autostone-c ，is it convenient to leave a contact information? My WeChat account is whb13810439630 （方便留个联系方式吗？我的微信号是whb13810439630）
Analysis on Potential Yaw Estimation Errors,D_kwDOAnasMc4AUHNR,2023-06-07T02:30:41Z,SKT-r,0,Unanswered,,,
Localization & Mapping WG Meeting 07/06/2023,D_kwDOAnasMc4AUHXS,2023-06-07T07:50:52Z,n-patiphon,0,Unanswered,,,
2023-06-07 Simulation Working group Meeting,D_kwDOAnasMc4AUHXY,2023-06-07T07:52:31Z,WJaworskiRobotec,0,Unanswered,,,
pointcloud map metadata,D_kwDOAnasMc4AUIH7,2023-06-08T02:27:25Z,JoonKi0111,1,Answered,,,
pointcloud map metadata,D_kwDOAnasMc4AUIH7,2023-06-08T02:27:25Z,JoonKi0111,1,Answered,DC_kwDOAnasMc4AXVk4,kminoda,"Apologies for the inconvenience, I will add more detailed description for pcd file rules and metadata soon.

Here's the updated version of Readme: https://github.com/kminoda/autoware.universe/blob/fix/map_loader/readme/map/map_loader/README.md
Please go through the prerequisites section. Let us know if you still have any questions!

It will be added with this PR: https://github.com/autowarefoundation/autoware.universe/pull/3919"
pointcloud map metadata,D_kwDOAnasMc4AUIH7,2023-06-08T02:27:25Z,JoonKi0111,1,Answered,DC_kwDOAnasMc4AXVle,kminoda,"In short, here's what you can do

1. Merge them into one single file
2. Disable all the dynamic map loading related features (set `enable_partial_load`, `enable_differential_load` and `enable_selected_load` to false). Note that in this case you also need to switch the mode of some other nodes (`ndt_scan_matcher` and `compare_map_segmentation` for now).
3. Merge them into one single file and then split it with this: https://github.com/MapIV/pointcloud_divider

I guess the second one is the easiest. If you are using awf/autoware as-is, change
- https://github.com/autowarefoundation/autoware_launch/blob/65884add50a684ddf8674e6e065ea5eb97888f81/autoware_launch/config/localization/ndt_scan_matcher.param.yaml#L4
- https://github.com/autowarefoundation/autoware_launch/blob/65884add50a684ddf8674e6e065ea5eb97888f81/autoware_launch/config/perception/object_recognition/detection/pointcloud_map_filter.param.yaml#L16
- https://github.com/autowarefoundation/autoware_launch/blob/65884add50a684ddf8674e6e065ea5eb97888f81/autoware_launch/config/map/pointcloud_map_loader.param.yaml#L5-L7

to false"
Planning&Control WG Meeting 2023/06/08,D_kwDOAnasMc4AUIMt,2023-06-08T05:21:30Z,TakaHoribe,3,Answered,,,
Planning&Control WG Meeting 2023/06/08,D_kwDOAnasMc4AUIMt,2023-06-08T05:21:30Z,TakaHoribe,3,Answered,DC_kwDOAnasMc4AXWCX,brkay54,@TakaHoribe @mehmetdogru can we talk about this comment? https://github.com/autowarefoundation/autoware.universe/pull/3653#issuecomment-1567653424
Planning&Control WG Meeting 2023/06/08,D_kwDOAnasMc4AUIMt,2023-06-08T05:21:30Z,TakaHoribe,3,Answered,DC_kwDOAnasMc4AXWCf,xmfcx,- https://github.com/autowarefoundation/autoware/issues/3466
Planning&Control WG Meeting 2023/06/08,D_kwDOAnasMc4AUIMt,2023-06-08T05:21:30Z,TakaHoribe,3,Answered,DC_kwDOAnasMc4AXWD-,kosuke55,"[PullOver/Out limitation and development plan](https://github.com/autowarefoundation/autoware.universe/issues/3223)

- pull_out support normal_lane (not only `road_shoulder`)
  - https://github.com/autowarefoundation/autoware.universe/pull/3805
- rename `pull_out` -> `start_planner`
  - https://github.com/autowarefoundation/autoware.universe/pull/3908  
"
Utilizing arrow signal information in Planning,D_kwDOAnasMc4AUIQq,2023-06-08T06:50:35Z,TakaHoribe,0,Unanswered,,,
Handling Bikeways,D_kwDOAnasMc4AUISW,2023-06-08T07:36:41Z,mehmetdogru,3,Answered,,,
Handling Bikeways,D_kwDOAnasMc4AUISW,2023-06-08T07:36:41Z,mehmetdogru,3,Answered,DC_kwDOAnasMc4AXV9O,mehmetdogru,cc: @TakaHoribe @xmfcx @mitsudome-r @maxime-clem @takayuki5168 
Handling Bikeways,D_kwDOAnasMc4AUISW,2023-06-08T07:36:41Z,mehmetdogru,3,Answered,DC_kwDOAnasMc4AXWgE,maxime-clem,"I think the dynamic drivable area expansion can work for the YTU Davustpasa Campus as projecting the ego vehicle along the centerline would expand the drivable area into the bike lane. I will build a simple scenario to test it.
However I can understand the concern about performance and the proposed solution also sounds good."
Handling Bikeways,D_kwDOAnasMc4AUISW,2023-06-08T07:36:41Z,mehmetdogru,3,Answered,DC_kwDOAnasMc4AXWhM,mehmetdogru,"Thanks @maxime-clem. I think we will complete this obvious overlapping road-bikeway part of the map today and I will share it here if you would like to use it to test.

cc: @mozhoku"
Handling Bikeways,D_kwDOAnasMc4AUISW,2023-06-08T07:36:41Z,mehmetdogru,3,Answered,DC_kwDOAnasMc4AXXfA,mehmetdogru,"@maxime-clem please find the map files on [the link](https://drive.google.com/drive/folders/15LZj9T789a6-14FAU83SzAqQkZc60hpU?usp=sharing). I marked the related part as follows however bicycle_lanes are not visible on rviz yet and the annotation might not be very right at the moment since it is the first trial. Hope this helps. Thank you.

![Screenshot from 2023-06-08 21-04-17](https://github.com/autowarefoundation/autoware/assets/48479081/c9412fc1-766f-4892-9cc9-a592da47d88d)
 "
Handling Bikeways,D_kwDOAnasMc4AUISW,2023-06-08T07:36:41Z,mehmetdogru,3,Answered,DC_kwDOAnasMc4AXuQF,maxime-clem,"Thank you and sorry for the late reply.
The dynamic drivable area expansion works well for this case and can be considered as a temporary workaround.

https://github.com/autowarefoundation/autoware/assets/78338830/15cac0bc-fff1-4a8d-a8a0-0b8b5eb21c6f

"
Handling Bikeways,D_kwDOAnasMc4AUISW,2023-06-08T07:36:41Z,mehmetdogru,3,Answered,DC_kwDOAnasMc4AXWGV,xmfcx,"- https://sfbike.org/news/bike-lanes-and-right-turns/
  - ![Right-Turn](https://github.com/autowarefoundation/autoware/assets/10751153/98416ebf-f8d0-4e79-98ba-79d118a174cb)
- https://nacto.org/publication/urban-bikeway-design-guide/intersection-treatments/through-bike-lanes/
  - ![firefox_G6WqHA3Hiu](https://github.com/autowarefoundation/autoware/assets/10751153/5b0e3451-f665-4aab-94ba-a6b95e7aa512)
  - ![image](https://github.com/autowarefoundation/autoware/assets/10751153/970c2b47-4602-4a43-a836-0267b132666f)
- http://www.bikeirvine.org/news/2023/2/16/safety-at-intersections
  - ![image](https://github.com/autowarefoundation/autoware/assets/10751153/9681715f-e26d-432a-991e-c0e8a15b1b21)
- https://www.mcleishorlando.com/insights/drivers-or-cyclists-who-has-the-right-of-way/
  - ![image](https://github.com/autowarefoundation/autoware/assets/10751153/e4e46cce-6a88-4491-b4e1-0727911e162d)
- https://www.trthaber.com/haber/guncel/konyada-ogrenciler-okullarina-guvenli-bisiklet-yolu-ile-gidiyor-681609.html
  - ![image](https://github.com/autowarefoundation/autoware/assets/10751153/55e59ec3-9275-443c-8527-ce28d5504cbc)
- https://www.youtube.com/watch?v=T_VUXUGjrUw
  - ![firefox_DE6LvnHNxX](https://github.com/autowarefoundation/autoware/assets/10751153/e8b9b805-c473-4787-9fe1-aa5ba936166e)"
Handling Bikeways,D_kwDOAnasMc4AUISW,2023-06-08T07:36:41Z,mehmetdogru,3,Answered,DC_kwDOAnasMc4AXmCm,mehmetdogru,"What if we annotate `bicycle_lane` and `shared_bicycle_lane` separately and so in cases like below we would be including the neighbor `shared_bicycle_lane` into account. Also with that approach we can manipulate the path easier so we would be using the existing modules as well. Plus we can support scenarios like above as well which @xmfcx has shared where there are shared bicycle lanes for routing purposes 

![bicycle_lane_proposal](https://github.com/autowarefoundation/autoware/assets/48479081/cea69f99-1f0c-4bed-99f7-5691779af662)

What do you think?

cc: @maxime-clem @xmfcx @TakaHoribe 

PS: 
- The most recent version of the map with the `bicycle_lane`s & `shared_bicycle_lane`s are on [this link](https://drive.google.com/drive/folders/15LZj9T789a6-14FAU83SzAqQkZc60hpU?usp=drive_link).
- You can check out these branches to visualize `bicycle_lane`s & `shared_bicycle_lane`s
    - https://github.com/mehmetdogru/autoware.universe/tree/feat/visualize-bicycle-lanes
    - https://github.com/mehmetdogru/autoware_common/tree/feat/add-bicycle-lanelet-query
"
Handling Bikeways,D_kwDOAnasMc4AUISW,2023-06-08T07:36:41Z,mehmetdogru,3,Answered,DC_kwDOAnasMc4AXuQ6,maxime-clem,"This representation looks good.

Maybe I forgot, but why don't we simply represent the shared space (`shared_bicycle_lane`) as a normal lanelet where the autonomous vehicle can drive ? We can keep the centerline of the current lanelet, but move the right bound to be the right bound of the `shared_bicycle_lane`."
Handling Bikeways,D_kwDOAnasMc4AUISW,2023-06-08T07:36:41Z,mehmetdogru,3,Answered,DC_kwDOAnasMc4AXw26,mehmetdogru,"Thanks @maxime-clem

In such cases bicycles on `shared_bicycle_lane` has the priority so to be able to satisfy this and so ensure the safety of the bicycles I think it will be good to annotate it. "
2023-06-12 ODD working group weekly meeting (144),D_kwDOAnasMc4AUIaR,2023-06-08T10:10:40Z,Igata-ctrl,0,Unanswered,,,
About autoware.universe directory structure rule,D_kwDOAnasMc4AUJLN,2023-06-09T07:27:47Z,asa-naki,0,Unanswered,,,
Depend pakcages for  tier4_planning_launch,D_kwDOAnasMc4AUJM_,2023-06-09T08:11:00Z,asa-naki,1,Answered,,,
Depend pakcages for  tier4_planning_launch,D_kwDOAnasMc4AUJM_,2023-06-09T08:11:00Z,asa-naki,1,Answered,DC_kwDOAnasMc4AXY3K,shmpwk,"I agree with you that planning module does not use  external_cmd_selector.
https://github.com/search?q=repo%3Aautowarefoundation%2Fautoware.universe%20external_cmd_selector&type=code
~~You can confirm by building Autoware without the dependency, and see the build succeeds.~~
You can confirm by executing Autoware tutorial and see it behaves as you expected. "
Depend pakcages for  tier4_planning_launch,D_kwDOAnasMc4AUJM_,2023-06-09T08:11:00Z,asa-naki,1,Answered,DC_kwDOAnasMc4AXY__,asa-naki,"Thank you for your reply.

> I agree with you that planning module does not use external_cmd_selector.

I'm glad you agree that external_cmd_selector not being used.

I believe that the dependency relationship of the exec_depend tag cannot be confirmed just by building Autoware. If it does not affect the actual behavior during launch, I am considering submitting a pull request to remove the exec_depend of ”external_cmd_selector”."
Depend pakcages for  tier4_planning_launch,D_kwDOAnasMc4AUJM_,2023-06-09T08:11:00Z,asa-naki,1,Answered,DC_kwDOAnasMc4AXcxb,asa-naki,I will try to confirm it through Autoware's tutorial!
"Error while ""rosdep install""",D_kwDOAnasMc4AULJT,2023-06-11T22:48:42Z,prabanjanGITHUB,2,Answered,,,
"Error while ""rosdep install""",D_kwDOAnasMc4AULJT,2023-06-11T22:48:42Z,prabanjanGITHUB,2,Answered,DC_kwDOAnasMc4AXcxG,evshary,"Since ROS2 Galactic is EOL now, did you run `rosdep update --rosdistro=galactic` before `rosdep install`?"
"Error while ""rosdep install""",D_kwDOAnasMc4AULJT,2023-06-11T22:48:42Z,prabanjanGITHUB,2,Answered,DC_kwDOAnasMc4AXduR,prabanjanGITHUB,"pp@pp-Virtual-Machine:~/autoware$ rosdep install -y --from-paths src --ignore-src --rosdistro $ROS_DISTRO
ERROR: the following packages/stacks could not have their rosdep keys resolved
to system dependencies:
lidar_centerpoint: [python3-open3d] defined as ""not available"" for OS version [focal]
grid_map_utils: Cannot locate rosdep definition for [grid_map_cv]
compare_map_segmentation: Cannot locate rosdep definition for [grid_map_ros]
qp_interface: Cannot locate rosdep definition for [proxsuite]
behavior_velocity_planner_common: Cannot locate rosdep definition for [grid_map_ros]
obstacle_velocity_limiter: Cannot locate rosdep definition for [grid_map_ros]
costmap_generator: Cannot locate rosdep definition for [grid_map_ros]
elevation_map_loader: Cannot locate rosdep definition for [grid_map_ros]
behavior_velocity_occlusion_spot_module: Cannot locate rosdep definition for [grid_map_ros]
behavior_velocity_intersection_module: Cannot locate rosdep definition for [grid_map_ros]



I did not run that, but now, even after updating the rosdep, I am facing this issue."
"Error while ""rosdep install""",D_kwDOAnasMc4AULJT,2023-06-11T22:48:42Z,prabanjanGITHUB,2,Answered,DC_kwDOAnasMc4AXfaI,evshary,I think you can check the Autoware branch first and see whether it's galactic or not.
"Error while ""rosdep install""",D_kwDOAnasMc4AULJT,2023-06-11T22:48:42Z,prabanjanGITHUB,2,Answered,DC_kwDOAnasMc4AXgtG,prabanjanGITHUB,"I checked, I am following the galactic installation documentation of autoware."
"Error while ""rosdep install""",D_kwDOAnasMc4AULJT,2023-06-11T22:48:42Z,prabanjanGITHUB,2,Answered,DC_kwDOAnasMc4AXjkL,RamanaBotta,"Hi @prabanjanGITHUB , 

I have tried `rosdep update --rosdistro=galactic`, 
Then `rosdep install -y --from-paths src --ignore-src --rosdistro $ROS_DISTRO`
It worked for me. 

"
"Will container image ""humble-latest-prebuilt-cuda-amd64"" update in the future?",D_kwDOAnasMc4AULVq,2023-06-12T07:17:05Z,evshary,1,Answered,,,
"Will container image ""humble-latest-prebuilt-cuda-amd64"" update in the future?",D_kwDOAnasMc4AULVq,2023-06-12T07:17:05Z,evshary,1,Answered,DC_kwDOAnasMc4AXhJS,xmfcx,"https://github.com/autowarefoundation/autoware/actions/workflows/docker-build-and-push-main.yaml

I will look into this.

cc. @kenji-miyake "
"Will container image ""humble-latest-prebuilt-cuda-amd64"" update in the future?",D_kwDOAnasMc4AULVq,2023-06-12T07:17:05Z,evshary,1,Answered,DC_kwDOAnasMc4AXiE2,evshary,Thank you for the help!
"Will container image ""humble-latest-prebuilt-cuda-amd64"" update in the future?",D_kwDOAnasMc4AULVq,2023-06-12T07:17:05Z,evshary,1,Answered,DC_kwDOAnasMc4AXjp4,xmfcx,"Attempting to solve in:
- https://github.com/autowarefoundation/autoware/pull/3579"
"Will container image ""humble-latest-prebuilt-cuda-amd64"" update in the future?",D_kwDOAnasMc4AULVq,2023-06-12T07:17:05Z,evshary,1,Answered,DC_kwDOAnasMc4AXpUu,xmfcx,"Ok, with the PR merged, https://github.com/autowarefoundation/autoware/actions/runs/5290207154 now runs without problems.

https://github.com/autowarefoundation/autoware/pkgs/container/autoware-universe/102247121?tag=humble-latest-prebuilt-cuda-amd64 you can pull the `humble-latest-prebuilt-cuda-amd64` now.

Thanks for bringing this up!"
"Will container image ""humble-latest-prebuilt-cuda-amd64"" update in the future?",D_kwDOAnasMc4AULVq,2023-06-12T07:17:05Z,evshary,1,Answered,DC_kwDOAnasMc4AXqE6,evshary,"Great, thanks for your help!"
Using Docker-based Autoware on actual vehicles,D_kwDOAnasMc4AULVu,2023-06-12T07:18:52Z,yuasabe,1,Answered,,,
Using Docker-based Autoware on actual vehicles,D_kwDOAnasMc4AULVu,2023-06-12T07:18:52Z,yuasabe,1,Answered,DC_kwDOAnasMc4AXeQ8,Croquembouche,"Yes, this is possible."
Using Docker-based Autoware on actual vehicles,D_kwDOAnasMc4AULVu,2023-06-12T07:18:52Z,yuasabe,1,Answered,DC_kwDOAnasMc4AXe9G,yuasabe,"Thank you, I'm glad to see someone who has tried it before. I'm thinking of testing it out in the next few days, and if there are any problems I encounter, I may ask them here again."
pacakges build aborted and failed,D_kwDOAnasMc4AULcJ,2023-06-12T09:18:49Z,prabanjanGITHUB,1,Answered,,,
pacakges build aborted and failed,D_kwDOAnasMc4AULcJ,2023-06-12T09:18:49Z,prabanjanGITHUB,1,Answered,DC_kwDOAnasMc4AXfZ7,evshary,"I believe this is due to insufficient memory.
Could you follow this page and try again?
https://autowarefoundation.github.io/autoware-documentation/main/support/troubleshooting/#insufficient-memory"
grid_map_ros rosdep error in ubuntu 20.,D_kwDOAnasMc4AULiI,2023-06-12T11:35:31Z,prabanjanGITHUB,2,Answered,,,
grid_map_ros rosdep error in ubuntu 20.,D_kwDOAnasMc4AULiI,2023-06-12T11:35:31Z,prabanjanGITHUB,2,Answered,DC_kwDOAnasMc4AXf9O,Tanishq30052002,which version of ubuntu you are using?
grid_map_ros rosdep error in ubuntu 20.,D_kwDOAnasMc4AULiI,2023-06-12T11:35:31Z,prabanjanGITHUB,2,Answered,DC_kwDOAnasMc4AXgtQ,prabanjanGITHUB,I am using ubuntu 20.04 LTS
grid_map_ros rosdep error in ubuntu 20.,D_kwDOAnasMc4AULiI,2023-06-12T11:35:31Z,prabanjanGITHUB,2,Answered,DC_kwDOAnasMc4AX3rU,Shin-kyoto,"`grid_map` is added in [this sync](https://discourse.ros.org/t/new-packages-for-ros-2-humble-hawksbill-2022-09-30/27583) for humble.
So if you want to use it in galactic, please add repository to autoware.repos like this; https://github.com/autowarefoundation/autoware/blob/0a712e8ae749166e727cad0a0c020b266a712df8/autoware.repos#L36-L39

(And don't forget `vcs import src < autoware.repos`.)

"
[Proposal] C-V2X Module for Sending and Receiving C-V2X Messages,D_kwDOAnasMc4AULrO,2023-06-12T14:40:06Z,Croquembouche,0,Unanswered,,,
No vehicle in Autoware Rviz,D_kwDOAnasMc4AULy0,2023-06-12T16:49:33Z,prabanjanGITHUB,0,Unanswered,,,
Unified Configuration File for Lanelet and PCD Maps: Streamlining Map Data Management,D_kwDOAnasMc4AUMS_,2023-06-13T07:14:26Z,Tanishq30052002,1,Answered,,,
Unified Configuration File for Lanelet and PCD Maps: Streamlining Map Data Management,D_kwDOAnasMc4AUMS_,2023-06-13T07:14:26Z,Tanishq30052002,1,Answered,DC_kwDOAnasMc4AXgDu,mitsudome-r,"Do you have any specific idea on how you want to configure them?(perhaps with images to show data structure)
Here's my understanding of the current map data management:

## Map Files
autoware_launch expects Lanelet2 and PCD to be in the same directory. e.g., If you check the [tutorial](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/) you specify a directory that contains map files:
```
ros2 launch autoware_launch planning_simulator.launch.xml map_path:=<directory-to-map-files> vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit
```

The structure of map directory is explained in [here](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-architecture/map/#5-map-specification).

## Map loading configuration
Also, the map_loader configuration files are placed in [map config folder](https://github.com/autowarefoundation/autoware_launch/tree/main/autoware_launch/config/map).
"
Unified Configuration File for Lanelet and PCD Maps: Streamlining Map Data Management,D_kwDOAnasMc4AUMS_,2023-06-13T07:14:26Z,Tanishq30052002,1,Answered,DC_kwDOAnasMc4AXghz,Tanishq30052002,"
Hi @mitsudome-r,

In the case of autoware_launch, we run the command as follows:

`ros2 launch autoware_launch planning_simulator.launch.xml map_path:=<directory-to-map-files> vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit'

This command requires us to provide the path to the map folder, which should contain the following three files:

1. pointcloud_map.pcd
2. lanelet2_map.osm
3. map_config.yaml

Even with the inclusion of the map_config file, we still need to modify some configuration files to view maps in RViz. These files can be found in the following folder: [Link](https://github.com/autowarefoundation/autoware_launch/tree/main/autoware_launch/config/map)

In this folder, you will find two parameter files for the lanelet and PCD maps.

To clarify, my previous question was about whether we should keep all three configuration files separate within the map folder or merge them, considering that some of the data contents are the same"
Unified Configuration File for Lanelet and PCD Maps: Streamlining Map Data Management,D_kwDOAnasMc4AUMS_,2023-06-13T07:14:26Z,Tanishq30052002,1,Answered,DC_kwDOAnasMc4AXj1m,mitsudome-r,"I see.
To me, the map files and parameter files for the loaders doesn't have to be in the same folder.
This is because map_config.yaml explains how maps are defined in pcd and osm, whereas ROS parameter files for the loaders explain how they are loaded in Autoware at runtime, which could be specifying different origin from how maps are defined in the file.

But this is just my opinion, and I'm open to hear different thoughts."
Unified Configuration File for Lanelet and PCD Maps: Streamlining Map Data Management,D_kwDOAnasMc4AUMS_,2023-06-13T07:14:26Z,Tanishq30052002,1,Answered,DC_kwDOAnasMc4AXj6i,Tanishq30052002,"I get it, thanks for your support😁
I hope to contribute someday."
Software WG Meeting 2023/06/13,D_kwDOAnasMc4AUMka,2023-06-13T13:06:57Z,xmfcx,2,Answered,,,
Software WG Meeting 2023/06/13,D_kwDOAnasMc4AUMka,2023-06-13T13:06:57Z,xmfcx,2,Answered,DC_kwDOAnasMc4AXhFe,mitsudome-r,"Some additional announcements:
- API WG is starting this week. (announced last week already but announcing it again for different time slot)
- tags and release notes for Autoware.AI is deleted from https://github.com/autowarefoundation/autoware. You should visit https://github.com/autowarefoundation/autoware_ai for old tags."
Software WG Meeting 2023/06/13,D_kwDOAnasMc4AUMka,2023-06-13T13:06:57Z,xmfcx,2,Answered,DC_kwDOAnasMc4AXhG7,liuXinGangChina,Great work，Bus ODD Demostration video looks fantastic！
Fast DDS,D_kwDOAnasMc4AUMo-,2023-06-13T14:42:24Z,JulioPlaced,0,Unanswered,,,
Perception and Sensing WG Meeting 14/06/2023,D_kwDOAnasMc4AUNTt,2023-06-14T09:19:31Z,drwnz,0,Unanswered,,,
Updating Autoware to support proposed Pointcloud types and Nebula sensor driver,D_kwDOAnasMc4AUNVN,2023-06-14T09:47:44Z,drwnz,1,Answered,,,
Updating Autoware to support proposed Pointcloud types and Nebula sensor driver,D_kwDOAnasMc4AUNVN,2023-06-14T09:47:44Z,drwnz,1,Answered,DC_kwDOAnasMc4AZEtP,drwnz,"@xmfcx @amc-nu @mojomex we are currently considering whether to use negative angles in the `elevation` field. Currently, the implementation handles `elevation` the same was as azimuth with the negative angles being wrapped around (360 + negative elevation angle). 
Negative elevation angles may be more intuitive, but would be interested to hear your thoughts on this."
Updating Autoware to support proposed Pointcloud types and Nebula sensor driver,D_kwDOAnasMc4AUNVN,2023-06-14T09:47:44Z,drwnz,1,Answered,DC_kwDOAnasMc4AZEuw,xmfcx,"I think it should be acceptable. No change needed in they field type definition since it already uses `FLOAT32`.
But we should denote the range as `[-180°,180°]`.

Also need to be careful that the algorithms can handle negative values too."
Facing Improper Orientation (issue) in Autoware,D_kwDOAnasMc4AUOB5,2023-06-15T04:20:55Z,saicsk-deloitte,0,Unanswered,,,
"Is it possible to subscribe to my vehicle's /odom to get the vehicle velocity? If so, where can I replace it? Thanks!!!",D_kwDOAnasMc4AUOB_,2023-06-15T04:23:37Z,yaukaizhi,1,Answered,,,
"Is it possible to subscribe to my vehicle's /odom to get the vehicle velocity? If so, where can I replace it? Thanks!!!",D_kwDOAnasMc4AUOB_,2023-06-15T04:23:37Z,yaukaizhi,1,Answered,DC_kwDOAnasMc4AXoXO,mitsudome-r,"I think the easiest way is to remap your rosbag topics to the topic names that you can see in [rosbag replay simulation](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/rosbag-replay-simulation/)
You might have to change the message type as well. (e.g., converting odometry messages to autoware_auto_vehicle_msgs/msg/VelocityReport )


```
Topic information: Topic: /clock | Type: rosgraph_msgs/msg/Clock | Count: 2941 | Serialization Format: cdr
                   Topic: /sensing/gnss/ublox/fix_velocity | Type: geometry_msgs/msg/TwistWithCovarianceStamped | Count: 30 | Serialization Format: cdr
                   Topic: /sensing/gnss/ublox/nav_sat_fix | Type: sensor_msgs/msg/NavSatFix | Count: 30 | Serialization Format: cdr
                   Topic: /sensing/gnss/ublox/navpvt | Type: ublox_msgs/msg/NavPVT | Count: 30 | Serialization Format: cdr
                   Topic: /sensing/imu/tamagawa/imu_raw | Type: sensor_msgs/msg/Imu | Count: 853 | Serialization Format: cdr
                   Topic: /sensing/lidar/left/velodyne_packets | Type: velodyne_msgs/msg/VelodyneScan | Count: 299 | Serialization Format: cdr
                   Topic: /sensing/lidar/right/velodyne_packets | Type: velodyne_msgs/msg/VelodyneScan | Count: 299 | Serialization Format: cdr
                   Topic: /sensing/lidar/top/velodyne_packets | Type: velodyne_msgs/msg/VelodyneScan | Count: 288 | Serialization Format: cdr
                   Topic: /vehicle/status/control_mode | Type: autoware_auto_vehicle_msgs/msg/ControlModeReport | Count: 873 | Serialization Format: cdr
                   Topic: /vehicle/status/gear_status | Type: autoware_auto_vehicle_msgs/msg/GearReport | Count: 873 | Serialization Format: cdr
                   Topic: /vehicle/status/steering_status | Type: autoware_auto_vehicle_msgs/SteeringReport | Count: 873 | Serialization Format: cdr
                   Topic: /vehicle/status/velocity_status | Type: autoware_auto_vehicle_msgs/msg/VelocityReport | Count: 873 | Serialization Format: cdr
```

Or you can search the included files in autoware.launch.xml with these topic names and replace them with your topic names."
"Is it possible to subscribe to my vehicle's /odom to get the vehicle velocity? If so, where can I replace it? Thanks!!!",D_kwDOAnasMc4AUOB_,2023-06-15T04:23:37Z,yaukaizhi,1,Answered,DC_kwDOAnasMc4AXorC,yaukaizhi,Okay thank you! Got it!
[proposal] Crossing UTM and MGRS boundaries to address larger operational areas,D_kwDOAnasMc4AUOI1,2023-06-15T07:43:44Z,kminoda,2,Answered,,,
[proposal] Crossing UTM and MGRS boundaries to address larger operational areas,D_kwDOAnasMc4AUOI1,2023-06-15T07:43:44Z,kminoda,2,Answered,DC_kwDOAnasMc4AXyqz,kminoda,"FYI, here's a draft PR for the above proposal:
- https://github.com/autowarefoundation/autoware.universe/pull/3984
- https://github.com/autowarefoundation/autoware.universe/pull/3986"
[proposal] Crossing UTM and MGRS boundaries to address larger operational areas,D_kwDOAnasMc4AUOI1,2023-06-15T07:43:44Z,kminoda,2,Answered,DC_kwDOAnasMc4AXzji,kminoda,https://github.com/autowarefoundation/autoware_common/pull/191
[proposal] Crossing UTM and MGRS boundaries to address larger operational areas,D_kwDOAnasMc4AUOI1,2023-06-15T07:43:44Z,kminoda,2,Answered,DC_kwDOAnasMc4AYK-Y,ataparlar,"Hi. Excellent work here. I understanded the idea and liked the projection choices. I appriciate it.
Just to confirm, this is written for automatic changing of the projection type while vehicle moving, right?
And also I am curious about this: Does the position error increases that much effects the driving while vehicle is near to the MGRS grid boundaries?
Thank you for your works. "
[proposal] Crossing UTM and MGRS boundaries to address larger operational areas,D_kwDOAnasMc4AUOI1,2023-06-15T07:43:44Z,kminoda,2,Answered,DC_kwDOAnasMc4AYLn3,kminoda,"Thanks for the comment! 

> Just to confirm, this is written for automatic changing of the projection type while vehicle moving, right?

No, we do not intend to change projection type while vehicle moving. For the time being, Autoware will load static projection type defined in e.g. YAML file, and load the map files accordingly. Ideally speaking, Autoware should be able to operate large areas regardless of UTM or MGRS grids or even projection type, e.g. by dynamically changing the projection type while moving. After thorough internal dicussion at TIER IV, however, we came to a conclusion that it is extremely difficult to support such functionality with current Autoware architecture. 
(We are happy to discuss in detail somewhere if you want. Indeed we are still open to any ideas for realizing this :+1:)

> Does the position error increases that much effects the driving while vehicle is near to the MGRS grid boundaries?

I believe that MGRS grid boundaries won't be a problem, since it is just a translational shift between two MGRS grids, as long as they are in same UTM zone. The projection between two coordinates get very complicated when comparing two MGRS (or any arbitrary) coordinates which are located in two different UTM zones, since the transform between them are non-linear projection."
[proposal] Crossing UTM and MGRS boundaries to address larger operational areas,D_kwDOAnasMc4AUOI1,2023-06-15T07:43:44Z,kminoda,2,Answered,DC_kwDOAnasMc4AZO_b,armaganarsln,@kminoda are there any updates on the discussions? could you share the results at the mapping WG next time?
2023-07-05 Simulation Working group Meeting,D_kwDOAnasMc4AUOUU,2023-06-15T11:13:35Z,WJaworskiRobotec,0,Unanswered,,,
/points_raw to generate occupancy grid map not working,D_kwDOAnasMc4AUPJs,2023-06-16T10:51:03Z,yaukaizhi,0,Unanswered,,,
Using multiple ego vehicles,D_kwDOAnasMc4AUQZ3,2023-06-18T08:35:08Z,zeidk,2,Answered,,,
Using multiple ego vehicles,D_kwDOAnasMc4AUQZ3,2023-06-18T08:35:08Z,zeidk,2,Answered,DC_kwDOAnasMc4AXs-2,evshary,"As far as I know, no one does that now, but I know someone has done [a similar thing with robots,](https://github.com/Adlink-ROS/neuronbot2_multibot).
You can refer to my opinion here: https://github.com/orgs/autowarefoundation/discussions/3434#discussioncomment-6213516"
Using multiple ego vehicles,D_kwDOAnasMc4AUQZ3,2023-06-18T08:35:08Z,zeidk,2,Answered,DC_kwDOAnasMc4AXyTl,zeidk,Thank you very much for the answer.
can not generate path from co-located lanes,D_kwDOAnasMc4AURn3,2023-06-19T07:37:54Z,beyzanurkaya,1,Answered,,,
can not generate path from co-located lanes,D_kwDOAnasMc4AURn3,2023-06-19T07:37:54Z,beyzanurkaya,1,Answered,DC_kwDOAnasMc4AYduE,mehmetdogru,@beyzanurkaya we can resolve the discussion since https://github.com/autowarefoundation/autoware.universe/pull/4013 is merged
[Tutorials]: [Planning simulation]: No transform from [xxx] to [map],D_kwDOAnasMc4AUR1u,2023-06-19T12:21:44Z,lishizhen1412,2,Answered,,,
[Tutorials]: [Planning simulation]: No transform from [xxx] to [map],D_kwDOAnasMc4AUR1u,2023-06-19T12:21:44Z,lishizhen1412,2,Answered,DC_kwDOAnasMc4AXuSh,maxime-clem,Did you set an initial pose ?  ![image](https://github.com/autowarefoundation/autoware/assets/78338830/74ce1798-4de1-47b9-9c72-94caacb9d7f1)
[Tutorials]: [Planning simulation]: No transform from [xxx] to [map],D_kwDOAnasMc4AUR1u,2023-06-19T12:21:44Z,lishizhen1412,2,Answered,DC_kwDOAnasMc4AXuUC,lishizhen1412,Because I didn't find the vehicle model when Fixed Frame is 'map'. I have not set an initial pose.
[Tutorials]: [Planning simulation]: No transform from [xxx] to [map],D_kwDOAnasMc4AUR1u,2023-06-19T12:21:44Z,lishizhen1412,2,Answered,DC_kwDOAnasMc4AXvw0,lishizhen1412,Thanks so much! I have solved it.
[Tutorials]: [Planning simulation]: No transform from [xxx] to [map],D_kwDOAnasMc4AUR1u,2023-06-19T12:21:44Z,lishizhen1412,2,Answered,DC_kwDOAnasMc4AXuh_,lishizhen1412,"By the way, I tried this Tutorials [https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/rosbag-replay-simulation/](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/rosbag-replay-simulation/) and this Tutorials [https://autowarefoundation.github.io/autoware-documentation/main/tutorials/scenario-simulation/planning-simulation/scenario-test-simulation/](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/scenario-simulation/planning-simulation/scenario-test-simulation/). They all worked well."
2023-06-19 ODD working group weekly meeting (145),D_kwDOAnasMc4AUR7W,2023-06-19T14:00:24Z,Igata-ctrl,0,Unanswered,,,
Software WG Meeting 2023/06/20,D_kwDOAnasMc4AUSYO,2023-06-20T04:42:36Z,mitsudome-r,1,Answered,,,
Software WG Meeting 2023/06/20,D_kwDOAnasMc4AUSYO,2023-06-20T04:42:36Z,mitsudome-r,1,Answered,DC_kwDOAnasMc4AXwMM,xmfcx,"New package is added:
- https://github.com/autowarefoundation/autoware.universe/pull/3876"
"""latest"" docker image update",D_kwDOAnasMc4AUS3I,2023-06-20T15:39:46Z,ambroise-arm,1,Answered,,,
"""latest"" docker image update",D_kwDOAnasMc4AUS3I,2023-06-20T15:39:46Z,ambroise-arm,1,Answered,DC_kwDOAnasMc4AXxl9,kenji-miyake,"For some reasons, the workflow fails. I'll take a look.
https://github.com/autowarefoundation/autoware/actions/runs/5317047259/jobs/9627157556#step:3:1012"
"""latest"" docker image update",D_kwDOAnasMc4AUS3I,2023-06-20T15:39:46Z,ambroise-arm,1,Answered,DC_kwDOAnasMc4AXxov,kenji-miyake,"From 20230201, there is `unknown/unknown`, which probably causes the error.
https://github.com/autowarefoundation/autoware/pkgs/container/autoware-universe/63522164?tag=humble-20230115-amd64
https://github.com/autowarefoundation/autoware/pkgs/container/autoware-universe/67270421?tag=humble-20230201-amd64

![image](https://github.com/autowarefoundation/autoware/assets/31987104/ce2949cd-300a-4300-8c6c-7237798a6b7f)
![image](https://github.com/autowarefoundation/autoware/assets/31987104/f4a1ce0d-a188-4b06-85ea-cfb20b4e7e0d)
"
"""latest"" docker image update",D_kwDOAnasMc4AUS3I,2023-06-20T15:39:46Z,ambroise-arm,1,Answered,DC_kwDOAnasMc4AX0Pf,kenji-miyake,"New images should be fixed by https://github.com/autowarefoundation/autoware/pull/3598.
Old images probably have to fixed manually, I'll try it. (For now, just ignored errors.)"
"""latest"" docker image update",D_kwDOAnasMc4AUS3I,2023-06-20T15:39:46Z,ambroise-arm,1,Answered,DC_kwDOAnasMc4AX2JD,xmfcx,"- https://github.com/autowarefoundation/autoware/pull/3598
is merged, now re-running the `
docker-build-and-push-main`workflow:
- https://github.com/autowarefoundation/autoware/actions/runs/5344880829
then,
- https://github.com/autowarefoundation/autoware/actions/runs/5340096215/jobs/9679504351
will be re-run and we'll see if it gets fixed."
"""latest"" docker image update",D_kwDOAnasMc4AUS3I,2023-06-20T15:39:46Z,ambroise-arm,1,Answered,DC_kwDOAnasMc4AX3HH,xmfcx,"Hmm this failed again: https://github.com/autowarefoundation/autoware/actions/runs/5340096215/jobs/9699465815

> `ghcr.io/autowarefoundation/autoware-universe:humble-20230201-amd64 is a manifest list`

Maybe we should remove the older broken images from the registry? I'm not good at this topic."
"""latest"" docker image update",D_kwDOAnasMc4AUS3I,2023-06-20T15:39:46Z,ambroise-arm,1,Answered,DC_kwDOAnasMc4AX3q0,kenji-miyake,"> Hmm this failed again: https://github.com/autowarefoundation/autoware/actions/runs/5340096215/jobs/9699465815

Yes, I didn't fix old images but just ignored errors.

And the latest image was updated.
https://github.com/autowarefoundation/autoware/pkgs/container/autoware-universe/103915464?tag=humble-latest now refers to https://github.com/autowarefoundation/autoware/pkgs/container/autoware-universe/103734871?tag=humble-latest-amd64.

> Maybe we should remove the older broken images from the registry? I'm not good at this topic.

Yes, I think we can do it."
"""latest"" docker image update",D_kwDOAnasMc4AUS3I,2023-06-20T15:39:46Z,ambroise-arm,1,Answered,DC_kwDOAnasMc4AX3q5,kenji-miyake,@ambroise-arm Would you confirm whether images are properly updated as you want?
"""latest"" docker image update",D_kwDOAnasMc4AUS3I,2023-06-20T15:39:46Z,ambroise-arm,1,Answered,DC_kwDOAnasMc4AX4Oc,ambroise-arm,"Great work, thank you!
It's almost perfect. https://github.com/autowarefoundation/autoware/pkgs/container/autoware-universe/103915455?tag=humble-20230622 has the same amd64 SHA as https://github.com/autowarefoundation/autoware/pkgs/container/autoware-universe/103915464?tag=latest, but doesn't include the arm64 image. Is it possible to update the humble-20230622 tag to point to the current latest? I am interested in having a tag to a dual arch image that will remain when latest gets updated in the future."
"""latest"" docker image update",D_kwDOAnasMc4AUS3I,2023-06-20T15:39:46Z,ambroise-arm,1,Answered,DC_kwDOAnasMc4AX4Wg,kenji-miyake,"@ambroise-arm The arm64 points to the `0615` version now.
https://github.com/autowarefoundation/autoware/pkgs/container/autoware-universe/101707834?tag=humble-20230615-arm64

![image](https://github.com/autowarefoundation/autoware/assets/31987104/247ca9aa-e0b3-4e77-b05d-8bf79c37350a)
![image](https://github.com/autowarefoundation/autoware/assets/31987104/43a4d245-a029-45d0-b739-9f68a03d1bd6)

It's because the workflows are separated and ran on different days. (0622 was manually executed.)
https://github.com/autowarefoundation/autoware/blob/a91c19a353d6d68ba6622f447e57038b1863f117/.github/workflows/docker-build-and-push-main.yaml
https://github.com/autowarefoundation/autoware/blob/a91c19a353d6d68ba6622f447e57038b1863f117/.github/workflows/docker-build-and-push-main-self-hosted.yaml

We can make the image of the same day if we run them on the same day.
I can try it if you want, but the day will change (to 0623 or 0624).

However, the problem is that it might fail sometimes.
So I think it's good to ensure having the same versions in the tagged released, not these scheduled jobs. (We're using these scheduled workflows because regular releases are not done yet.)
https://github.com/autowarefoundation/autoware/tags"
"""latest"" docker image update",D_kwDOAnasMc4AUS3I,2023-06-20T15:39:46Z,ambroise-arm,1,Answered,DC_kwDOAnasMc4AX4XC,kenji-miyake,"Trying here...
- https://github.com/autowarefoundation/autoware/actions/runs/5354700224
- https://github.com/autowarefoundation/autoware/actions/runs/5354701071"
"""latest"" docker image update",D_kwDOAnasMc4AUS3I,2023-06-20T15:39:46Z,ambroise-arm,1,Answered,DC_kwDOAnasMc4AX9Ol,ambroise-arm,"https://github.com/autowarefoundation/autoware/pkgs/container/autoware-universe/104188506?tag=humble-20230623 looks great, thank you!"
2023-06-22 Racing Working Group Meeting,D_kwDOAnasMc4AUS8F,2023-06-20T17:39:54Z,QZJGeorge,0,Unanswered,,,
Reference Design WG Meeting (06/21/2023),D_kwDOAnasMc4AUTPJ,2023-06-21T03:49:38Z,chishengshih,0,Unanswered,,,
Localization & Mapping WG Meeting 21/06/2023,D_kwDOAnasMc4AUTWQ,2023-06-21T07:32:36Z,n-patiphon,0,Unanswered,,,
Re-routing for a static obstacle that blocks the road,D_kwDOAnasMc4AUUBP,2023-06-22T00:20:40Z,ahmeddesokyebrahim,6,Answered,,,
Re-routing for a static obstacle that blocks the road,D_kwDOAnasMc4AUUBP,2023-06-22T00:20:40Z,ahmeddesokyebrahim,6,Answered,DC_kwDOAnasMc4AX11d,maxime-clem,"A similar feature was previously requested: https://github.com/orgs/autowarefoundation/discussions/3250
Once it is implemented we can also answer that other discussion."
Re-routing for a static obstacle that blocks the road,D_kwDOAnasMc4AUUBP,2023-06-22T00:20:40Z,ahmeddesokyebrahim,6,Answered,DC_kwDOAnasMc4AX35B,TakaHoribe,"It is reasonable that Autoware detects a blocked lane and suggests an alternative route to the user, then a user can select the proposed route.

However, it is a challenging task to recognize that a lane is blocked automatically. The `obstacle_stop_planner` alone cannot determine if the blocking is temporary or permanent. Although, in the first implementation, it is enough to have a simple functionality like counting a stopped time and rerouting when the vehicle is stuck for more than a certain time.

On the other hand, it would be beneficial to provide an interface where users can inform about lane closures to Autoware.

For instance, as a user story, users can click on a lane in the Rviz and choose an option like ""Road Closed"" to request rerouting.
"
Re-routing for a static obstacle that blocks the road,D_kwDOAnasMc4AUUBP,2023-06-22T00:20:40Z,ahmeddesokyebrahim,6,Answered,DC_kwDOAnasMc4AX5xn,ahmeddesokyebrahim,"Thanks @TakaHoribe san for your contribution and comment. 
I totally agree with you regarding the challenges in this task. Not only from algorithmic point of view, but architectural and design as well to have with clean and correct implementation.

I have a question regarding this part : 
> On the other hand, it would be beneficial to provide an interface where users can inform about lane closures to Autoware.

Do you think the output of this interface will be coming from perception context ? or do you mean the planning modules should be doing that ? 
I guess as well you mean that this interface will satisfy what you have mentioned above regarding temporary or permanent blockage. Did I get it right ?"
Re-routing for a static obstacle that blocks the road,D_kwDOAnasMc4AUUBP,2023-06-22T00:20:40Z,ahmeddesokyebrahim,6,Answered,DC_kwDOAnasMc4AYTWz,purewater0901,"@ahmeddesokyebrahim 
Currently, autoware has provided several interfaces for rerouting a new route. You can find these interface functions [in this package](https://github.com/autowarefoundation/autoware.universe/tree/main/planning/mission_planner). However, we do not expect these functions are called from the `obstacle_stop_planner`. 

As @TakaHoribe suggests, it would be great if you can call reroute (and find a new route as well) from a different node or package, which is outside of the `obstacle_stop_planner`. At the moment, autoware reroute functons are called by `ad_api` package, which is shown below
(In the future, `MRM` also can call the same functions). So it might be great if you can request the reroute from `ad_api` pacakge.

In short, my suggestion is like
`obstacle_stop_planner` → `reroute node (This would be a new package)` → `ad_api` → `mission_planner`

![image](https://github.com/autowarefoundation/autoware/assets/43805014/a9c1a222-b540-41f5-8126-bb0e2df08cd7)
"
Re-routing for a static obstacle that blocks the road,D_kwDOAnasMc4AUUBP,2023-06-22T00:20:40Z,ahmeddesokyebrahim,6,Answered,DC_kwDOAnasMc4AYTw8,mitsudome-r,"@ahmeddesokyebrahim 
Before I post my idea, is it possible to answer the following questions? I think we need much more feature development than improving obstacle_stop_planner to request rerouting.
- What is your idea to decide whether Autoware is stuck or if it is just waiting for a temporary stopping vehicle? 
  - Obstacle_stop_planner only stops for existing pointcloud on it's trajectory, and it doesn't know whether it is going to be cleared soon or not. Do you plan to look at the duration of vehicle being stopped, or do you also plan to consider information like the obstacle information (whether it is stopped for vehicle or construction cones, etc.)?
- When vehicle stops for rerouting, do you want the vehicle to stop before entering blocked lane (as in Case 1) or do you expect the vehicle to do U-turn within the blocked lane (Case 2).
  - If you expect case 1, then we need improvements in perception modules to detect blockage in long range and also make planner to stop before entering the lane
  - If you expect case 2, then we need update in routing algorithm to support U-Turns as well.
![image](https://github.com/autowarefoundation/autoware/assets/43976834/f18edb83-faa6-415a-8a00-8fe57774cfa6)
![image](https://github.com/autowarefoundation/autoware/assets/43976834/266b1dac-1a13-4066-8660-950603ced226)
"
Re-routing for a static obstacle that blocks the road,D_kwDOAnasMc4AUUBP,2023-06-22T00:20:40Z,ahmeddesokyebrahim,6,Answered,DC_kwDOAnasMc4AYUu_,armaganarsln,"I appreciate the discussion on the topic, although it is not an area I am well-versed in or particularly interested in. If we have available resources, I would prefer to allocate them toward addressing the immediate challenges we are currently facing with our planner. Its performance in crucial areas such as overtaking, swerving, following vehicles, pull-ins/outs, and parking is not yet ready for public driving. It would be more prudent to focus our efforts on resolving these issues first before delving into the mentioned prototype. Once we have successfully tackled the current public road driving problems, we can then shift our attention and resources toward exploring those specific areas. Thank you for considering this perspective.




"
Re-routing for a static obstacle that blocks the road,D_kwDOAnasMc4AUUBP,2023-06-22T00:20:40Z,ahmeddesokyebrahim,6,Answered,DC_kwDOAnasMc4AZRZ5,ahmeddesokyebrahim,"The following implementation approach can be disucssed in planning and control WG meeting : 
![ReroutingStaticObstacle_FlowChart](https://github.com/autowarefoundation/autoware/assets/36835765/cdb91f75-ea89-435b-9ae0-7fe2cc65e56b)
"
Planning&Control WG Meeting 2023/06/22,D_kwDOAnasMc4AUUNf,2023-06-22T07:15:17Z,mehmetdogru,3,Answered,,,
Planning&Control WG Meeting 2023/06/22,D_kwDOAnasMc4AUUNf,2023-06-22T07:15:17Z,mehmetdogru,3,Answered,DC_kwDOAnasMc4AX1u9,ahmeddesokyebrahim,"`routing-no-drivable-lanes`:
- Issue : https://github.com/autowarefoundation/autoware.universe/issues/3952
- PR : https://github.com/autowarefoundation/autoware.universe/pull/3954"
Planning&Control WG Meeting 2023/06/22,D_kwDOAnasMc4AUUNf,2023-06-22T07:15:17Z,mehmetdogru,3,Answered,DC_kwDOAnasMc4AX1vF,ahmeddesokyebrahim,"Re-routing for a static obstacle that blocks the road 
- Discussion : https://github.com/orgs/autowarefoundation/discussions/3599"
Planning&Control WG Meeting 2023/06/22,D_kwDOAnasMc4AUUNf,2023-06-22T07:15:17Z,mehmetdogru,3,Answered,DC_kwDOAnasMc4AZut-,BritvaBo,How meeting?
Open AD Kit Working Group Meeting 22/6/2023,D_kwDOAnasMc4AUUb-,2023-06-22T12:31:12Z,HamburgDave,0,Unanswered,,,
Can I set a goal at anytime?,D_kwDOAnasMc4AUU7u,2023-06-23T02:45:50Z,museas-azm,2,Answered,,,
Can I set a goal at anytime?,D_kwDOAnasMc4AUU7u,2023-06-23T02:45:50Z,museas-azm,2,Answered,DC_kwDOAnasMc4AX8dL,maxime-clem,"In simulation you can set a new goal at any time but this disengages the autonomous mode (i.e., you have to re-engage Autoware after updating the goal)."
Can I set a goal at anytime?,D_kwDOAnasMc4AUU7u,2023-06-23T02:45:50Z,museas-azm,2,Answered,DC_kwDOAnasMc4AX8kw,museas-azm,"Thank you, it certainly seems that we can always set a goal. I may have misunderstood the issue.

If I draw a path as 2D Pose Estimate -> 2D Goal Pose and then 2D Pose Estimate again and place the vehicle outside the path, /autoware/state will be 3. The path is not automatically drawn from here, and it does not seem to be generated even if the 2D Goal Pose is redone again. As an example, in actual operation, the self-position is off, and the 2D Pose Estimate has to be redone.

![Screenshot from 2023-06-26 12-20-32](https://github.com/autowarefoundation/autoware/assets/124223966/8fadee7a-c9b6-4208-8193-ec78918b1fb0)

Do I need to do anything to release this situation and draw the path as it was the first time I started Autoware? Or is 2D pose Estimate not allowed to be done twice?

Thank you!"
Can I set a goal at anytime?,D_kwDOAnasMc4AUU7u,2023-06-23T02:45:50Z,museas-azm,2,Answered,DC_kwDOAnasMc4AX8le,maxime-clem,"> is 2D pose Estimate not allowed to be done twice?

You are allowed to re-estimate the 2D pose as many times as you want.

> The path is not automatically drawn from here, and it does not seem to be generated even if the 2D Goal Pose is redone again.

This is not expected behavior. If you set the goal again, the path should be updated.

https://github.com/autowarefoundation/autoware/assets/78338830/0a94e504-7064-4599-a85b-8c3fc3847ba9

"
Can I set a goal at anytime?,D_kwDOAnasMc4AUU7u,2023-06-23T02:45:50Z,museas-azm,2,Answered,DC_kwDOAnasMc4AX9nC,museas-azm,"[Screencast from 2023年06月26日 21時04分05秒.webm](https://github.com/autowarefoundation/autoware/assets/124223966/e12057f2-f0c8-4b3e-a9dc-4de9e94da771)

This is what happens when I do it. I tried to build again with a new commit and it was the same."
Can I set a goal at anytime?,D_kwDOAnasMc4AUU7u,2023-06-23T02:45:50Z,museas-azm,2,Answered,DC_kwDOAnasMc4AX9n8,maxime-clem,"This is strange :thinking: I am not sure why the behavior is different for you.
Can you please share the full log ?"
Can I set a goal at anytime?,D_kwDOAnasMc4AUU7u,2023-06-23T02:45:50Z,museas-azm,2,Answered,DC_kwDOAnasMc4AYE2S,museas-azm,"Here is the bag I just took. Apparently it does not reproduce on anything other than my other PCs and planning simulators.
What I wanted to know was when it is usually a good time to place a goal position, and you already answered that question, thank you.
[rosbag2_2023_06_29-13_59_23.zip](https://github.com/autowarefoundation/autoware/files/11902100/rosbag2_2023_06_29-13_59_23.zip)
"
About TF tree,D_kwDOAnasMc4AUWRW,2023-06-25T09:21:42Z,sarubito,2,Answered,,,
About TF tree,D_kwDOAnasMc4AUWRW,2023-06-25T09:21:42Z,sarubito,2,Answered,DC_kwDOAnasMc4AX7h5,Shin-kyoto,"Thank you for your good question!
To be honest, please note that my response will involve speculation (perhaps involve wrong information). This is because the discussion about TF took place before I joined the Autoware community.

First of all, these comments below from @yukkysaito is really helpful to answer your question.

- https://gitlab.com/Tier4/AutowareAuto/-/issues/1#note_350148987

> It may be confusing for developers when using the TF framework.
It's difficult for non-robotic experts to understand because it's a hacked use of something called an odom frame that's not needed as a feature, but is forced to be added to the odom frame. (odom frame isn't intuitive)
In addition, TF is defined in a global space that is visible from the outside and cannot conceal the odom frame.
Since the autonomous driving system is developed by engineers from various disciplines, I think it would be better to hide the odom frame by making the responsibility for it a node like Fusion Filter (EKF).


- https://gitlab.com/Tier4/AutowareAuto/-/issues/1#note_352976475
> It is necessary to discuss the boundary between map-base_link (discrete) and odom-base_link (continuous) in planning, and the system becomes complicated and cannot be maintained.

(These discussion is not included in today's autoware discussion, but autoware.auto discussion. If you want to know reason, please see [tech blog in autoware foundation](https://autoware.org/past-present-and-the-future-of-autoware/) (for English speaker), or [TIER IV tech blog](https://medium.com/tier-iv-tech-blog/%E8%87%AA%E5%8B%95%E9%81%8B%E8%BB%A2%E9%96%8B%E7%99%BA%E3%81%97%E3%81%9F%E3%81%84-%E3%81%A7%E3%82%82%E3%81%A9%E3%81%93%E3%81%8B%E3%82%89%E5%A7%8B%E3%82%81%E3%82%8C%E3%81%B0%E8%89%AF%E3%81%84%E3%81%AE-ce511f5fcc4d#:~:text=Autoware.Auto%20(2019~) ) (for Japanese speaker). But this story is not irrelevant to TF tree, so it is additional information.)

In addition, according to [localization design document](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-architecture/localization/#:~:text=Developers%20can%20optionally%20add%20other%20frames%20such%20as%20odom%20or%20base_footprint%20as%20long%20as%20the%20tf%20structure%20above%20is%20maintained), autoware user can add other frames such as `/odom`. So in my opinion, `/odom` is used in today's default architecture of autoware because of the reason related to the discussion above, but if users want to add it, they can add.

Could you please add information to my comment? Or if there is any incorrect information, could you please correct it? @kminoda @yukkysaito "
About TF tree,D_kwDOAnasMc4AUWRW,2023-06-25T09:21:42Z,sarubito,2,Answered,DC_kwDOAnasMc4AX7jm,Shin-kyoto,"And the discussion below may be also helpful for you.

https://discourse.ros.org/t/map-base-odom-as-alternative-for-rep-105-recommended-frame-order/25095"
About TF tree,D_kwDOAnasMc4AUWRW,2023-06-25T09:21:42Z,sarubito,2,Answered,DC_kwDOAnasMc4AX9Nt,sarubito,"Thank you for your answer!
I study with reference to the URL that you gave me."
About TF tree,D_kwDOAnasMc4AUWRW,2023-06-25T09:21:42Z,sarubito,2,Answered,DC_kwDOAnasMc4AX-G8,Shin-kyoto,"Thanks!
And if you have any question, please feel free to ask me!"
About TF tree,D_kwDOAnasMc4AUWRW,2023-06-25T09:21:42Z,sarubito,2,Answered,DC_kwDOAnasMc4AYW5U,Shin-kyoto,"@sarubito 

There are three reasons why we chose to adopt /map->/base_link instead of /map->/odom->/base_link:

1. The users of autoware come from diverse backgrounds, which is why it is necessary to adopt a coordinate system that is easily understandable not only for robotics engineers but also for various other people. For example, users may include web service providers. The /map->/base_link coordinate system is widely understandable for everyone, whereas /map->/odom->/base_link is not.
2. In autoware, planning module relies on the map coordinate system. Global path planning in the mission_planner module is performed using the map coordinate system. The use of /odom pose is only applicable when controlling in relative coordinates, but autoware does not perform such control.
3. The benefit of using /odom is to ensure continuity through the tf framework. However, it is not necessary to rely solely on tf to ensure continuity. In autoware, continuity is ensured through the gate of ekf_localizer. Please refer to [this link](https://github.com/autowarefoundation/autoware.universe/tree/main/localization/ekf_localizer). The Mahalanobis distance gate enables probabilistic outlier detection to determine which inputs should be used or ignored, allowing extreme outliers to be filtered out.

For these reasons, autoware adopts the /map->/base_link coordinate system instead of /map->/odom->/base_link. However, if you still want to use the /odom coordinate system, you can adopt the tf tree /map->/base_link->/odom."
Driving Log Replayer is not working properly,D_kwDOAnasMc4AUXTk,2023-06-26T03:52:03Z,SakodaShintaro,1,Answered,,,
Driving Log Replayer is not working properly,D_kwDOAnasMc4AUXTk,2023-06-26T03:52:03Z,SakodaShintaro,1,Answered,DC_kwDOAnasMc4AYFWR,SakodaShintaro,"After some investigation, I found that this is caused by a misalignment of the Z coordinate.

![Screenshot from 2023-06-29 14-11-29](https://github.com/autowarefoundation/autoware/assets/28504069/e8b2bd32-7fd0-4bbe-bc67-6dcc55793263)

This is probably because Driving Log Replayer uses `/api/localization/initillize` directly, and the Z coordinate correction is done before that in Autoware.

https://github.com/autowarefoundation/autoware.universe/tree/main/localization/pose_initializer#connection-with-default-ad-api

I can get it to work by manually setting the Z coordinate appropriately.
For the localization sample, setting Z to 20.0 in `~/driving_log_replayer_data/localization/sample/scenario.yaml` worked fine."
2023-06-26 ODD working group weekly meeting (146),D_kwDOAnasMc4AUXg4,2023-06-26T08:32:54Z,Igata-ctrl,0,Unanswered,,,
How to perform standalone ndt matching?,D_kwDOAnasMc4AUXjv,2023-06-26T09:37:45Z,Tanishq30052002,1,Answered,,,
How to perform standalone ndt matching?,D_kwDOAnasMc4AUXjv,2023-06-26T09:37:45Z,Tanishq30052002,1,Answered,DC_kwDOAnasMc4AX_UM,Shin-kyoto,"This page may be helpful for you.

https://autowarefoundation.github.io/autoware-documentation/main/how-to-guides/integrating-autoware/overview/#5-launch-autoware"
How to perform standalone ndt matching?,D_kwDOAnasMc4AUXjv,2023-06-26T09:37:45Z,Tanishq30052002,1,Answered,DC_kwDOAnasMc4AX_X7,Tanishq30052002,"Hi,
How will my base_link will be connected to the map?"
How to perform standalone ndt matching?,D_kwDOAnasMc4AUXjv,2023-06-26T09:37:45Z,Tanishq30052002,1,Answered,DC_kwDOAnasMc4AYCMH,rsasaki0109,"@Tanishq30052002 

The tf from map to base_link is published by ekf_localizar in Autoware.
> Published TF
> - base_link
> TF from ""map"" coordinate to estimated pose.

https://github.com/autowarefoundation/autoware.universe/tree/main/localization/ekf_localizer#published-tf

By the way, autoware localization also requires the map module, is that activated? If so, you need to analyze which node is the problem.
You may find this page useful to learn about the architecture of localizataion.
https://autowarefoundation.github.io/autoware.universe/main/localization/ekf_localizer/"
lidar centerpoint Error : cudaErrorUnsupportedPtxVersion,D_kwDOAnasMc4AUYP0,2023-06-27T03:42:44Z,inwoong32,1,Answered,,,
lidar centerpoint Error : cudaErrorUnsupportedPtxVersion,D_kwDOAnasMc4AUYP0,2023-06-27T03:42:44Z,inwoong32,1,Answered,DC_kwDOAnasMc4AX_Tz,Shin-kyoto,"The CUDA version used by Autoware is 11.6. Since your local environment is using CUDA 11.4, it may not work properly. Please install CUDA 11.6 on your local system and try running it again.

https://github.com/autowarefoundation/autoware/blob/a91c19a353d6d68ba6622f447e57038b1863f117/amd64.env#L6"
lidar centerpoint Error : cudaErrorUnsupportedPtxVersion,D_kwDOAnasMc4AUYP0,2023-06-27T03:42:44Z,inwoong32,1,Answered,DC_kwDOAnasMc4AX_Ut,inwoong32,"Yes, I know

But, we are use Jetson Orin.
So, We can not upgrade Cuda 11.6.

I can upgrade cuda 11.8 in Nvidia documentation. 
https://developer.nvidia.com/blog/simplifying-cuda-upgrades-for-nvidia-jetson-users/

I install Cuda 11.8 in local system and try running again. 
But, Same problem"
What is the crop_box_filter_mirror?,D_kwDOAnasMc4AUYQH,2023-06-27T03:55:39Z,inwoong32,1,Answered,,,
What is the crop_box_filter_mirror?,D_kwDOAnasMc4AUYQH,2023-06-27T03:55:39Z,inwoong32,1,Answered,DC_kwDOAnasMc4AX_Uk,Shin-kyoto,"This filter is used to remove the points that hit the mirror of vehicle itself.
Please check the page below.
https://github.com/autowarefoundation/autoware.universe/blob/main/sensing/pointcloud_preprocessor/docs/crop-box-filter.md"
What is the crop_box_filter_mirror?,D_kwDOAnasMc4AUYQH,2023-06-27T03:55:39Z,inwoong32,1,Answered,DC_kwDOAnasMc4AX_Wk,inwoong32,"As far as I know, crop_box_filter_self erases the reflection of the vehicle, why do you filter the mirrors separately?'
Does the crop_box_filter_self part not include a mirror?"
What is the crop_box_filter_mirror?,D_kwDOAnasMc4AUYQH,2023-06-27T03:55:39Z,inwoong32,1,Answered,DC_kwDOAnasMc4AYUya,TZECHIN6,"I want to ask this as well, from [this](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/components/vehicle-dimensions/), overhang already included mirror as well..."
What is the crop_box_filter_mirror?,D_kwDOAnasMc4AUYQH,2023-06-27T03:55:39Z,inwoong32,1,Answered,DC_kwDOAnasMc4AYUyf,TZECHIN6,Also I want to know is there a way to visualise the crop_box_mirror in Rviz so that I can verify the config I set is correct.
Software WG Meeting 2023/06/27,D_kwDOAnasMc4AUYvB,2023-06-27T14:46:10Z,xmfcx,0,Unanswered,,,
Compilation error,D_kwDOAnasMc4AUZP7,2023-06-28T05:45:51Z,Autostone-c,0,Unanswered,,,
colcon build failed due to tensorrt lib location?,D_kwDOAnasMc4AUZQt,2023-06-28T06:12:23Z,egkim-kitech,0,Unanswered,,,
nav2_mppi_controller is necessary?,D_kwDOAnasMc4AUZWC,2023-06-28T07:29:50Z,Autostone-c,1,Answered,,,
nav2_mppi_controller is necessary?,D_kwDOAnasMc4AUZWC,2023-06-28T07:29:50Z,Autostone-c,1,Answered,DC_kwDOAnasMc4AYCef,maxime-clem,"I am not sure I understand your issue. Autoware does not rely on navigation2.
If you are having compilation issues, it may be because ROS 2 Humble is not supported on Ubuntu 20.04.
I recommend trying the `galactic` branch of Autoware instead. Or you can try the Docker installation."
Integrating current GNSS/INS solution with Eagleye without Doppler information,D_kwDOAnasMc4AUZav,2023-06-28T08:49:56Z,sisaha9,2,Answered,,,
Integrating current GNSS/INS solution with Eagleye without Doppler information,D_kwDOAnasMc4AUZav,2023-06-28T08:49:56Z,sisaha9,2,Answered,DC_kwDOAnasMc4AYE0I,rsasaki0109,"@sisaha9 

Eagleye requires velocity data usually from Doppler shift measurements. If your GNSS unit's GPSFix message provides speed, you can use that. 
Make sure it's accurate, and convert it into either geometry_msgs/TwistStamped or geometry_msgs/TwistWithCovarianceStamped format for Eagleye.

If you've confirmed through OpenSky that the accuracy is derived from the differences in standalone positioning results (in other words, meter-level accuracy), then it cannot be used as a substitute."
Integrating current GNSS/INS solution with Eagleye without Doppler information,D_kwDOAnasMc4AUZav,2023-06-28T08:49:56Z,sisaha9,2,Answered,DC_kwDOAnasMc4AYE0u,sisaha9,"Hi @rsasaki0109 

Thanks for the quick response. Could you clarify the below point a bit more for me? I did not understand it

> If you've confirmed through OpenSky that the accuracy is derived from the differences in standalone positioning results, then it cannot be used as a substitute.

"
Integrating current GNSS/INS solution with Eagleye without Doppler information,D_kwDOAnasMc4AUZav,2023-06-28T08:49:56Z,sisaha9,2,Answered,DC_kwDOAnasMc4AYE1P,rsasaki0109,"@sisaha9 

It means if your GPS velocity is calculated from position differences only without RTK FIX, it may not be suitable for Eagleye. Eagleye prefers more accurate GPS velocity data."
Integrating current GNSS/INS solution with Eagleye without Doppler information,D_kwDOAnasMc4AUZav,2023-06-28T08:49:56Z,sisaha9,2,Answered,DC_kwDOAnasMc4AYE1n,sisaha9,Got it. Thanks!
-bash: ament_prepend_unique_value: command not found,D_kwDOAnasMc4AUZjs,2023-06-28T10:18:07Z,Autostone-c,0,Unanswered,,,
API WG Meeting (06/28/2023),D_kwDOAnasMc4AUZtr,2023-06-28T13:02:02Z,chishengshih,1,Answered,,,
API WG Meeting (06/28/2023),D_kwDOAnasMc4AUZtr,2023-06-28T13:02:02Z,chishengshih,1,Answered,DC_kwDOAnasMc4AYDnP,pedrorito,"@chishengshih could you update the link of the video demo? We have a new version:
https://www.youtube.com/watch?v=MglvBqXHgbc "
API WG Meeting (06/28/2023),D_kwDOAnasMc4AUZtr,2023-06-28T13:02:02Z,chishengshih,1,Answered,DC_kwDOAnasMc4AYHG5,chishengshih,Done and many thanks.
AWSIM IMU Sensor Problem,D_kwDOAnasMc4AUaKi,2023-06-29T02:16:27Z,DaikiNiimi,1,Answered,,,
AWSIM IMU Sensor Problem,D_kwDOAnasMc4AUaKi,2023-06-29T02:16:27Z,DaikiNiimi,1,Answered,DC_kwDOAnasMc4AYEpo,kminoda,"Thank you for the report. Since the issue is likely to be relevant to AWSIM, how about putting the AWSIM on the title? 

Also, may I ask why you want the IMU sensor rate above 30Hz? Autoware does not require it to be that high (of course the higher the better, but not necessary)."
AWSIM IMU Sensor Problem,D_kwDOAnasMc4AUaKi,2023-06-29T02:16:27Z,DaikiNiimi,1,Answered,DC_kwDOAnasMc4AYEqi,DaikiNiimi,"Thank you for pointing this out. We will correct it.

Currently I am trying to put an error on the AWSIM IMU measurements so that the error can be close to the real environment in which the automatic operation is performed. When adding the error, I thought that it would be better to obtain data at a higher output frequency than 30Hz to make the simulation closer to reality. Therefore, we would like to obtain data at a frequency larger than 30 Hz."
Open AD Kit Working Group Meeting 29/6/2023,D_kwDOAnasMc4AUaht,2023-06-29T11:45:05Z,HamburgDave,0,Unanswered,,,
Sharing Road Test Result for Autoware Humble Version -- Test Case #6,D_kwDOAnasMc4AUbMe,2023-06-30T07:19:11Z,cyn-liu,0,Unanswered,,,
Sharing Road Test Result for Autoware Humble Version -- Test Case #2,D_kwDOAnasMc4AUbOY,2023-06-30T07:57:27Z,beginningfan,0,Unanswered,,,
Sharing Road Test Result for Autoware Humble Version -- Test Case #7,D_kwDOAnasMc4AUbO9,2023-06-30T08:09:41Z,beginningfan,0,Unanswered,,,
Sharing Road Test Result for Autoware Humble Version -- Test Case #3,D_kwDOAnasMc4AUbRI,2023-06-30T08:51:42Z,shulanbushangshu,0,Unanswered,,,
Sharing Road Test Result for Autoware Humble Version -- Test Case #5,D_kwDOAnasMc4AUbSg,2023-06-30T09:16:29Z,shulanbushangshu,0,Unanswered,,,
Orin (autoware) + x86（awsim）,D_kwDOAnasMc4AUb8r,2023-07-01T06:19:18Z,Autostone-c,1,Answered,,,
Orin (autoware) + x86（awsim）,D_kwDOAnasMc4AUb8r,2023-07-01T06:19:18Z,Autostone-c,1,Answered,DC_kwDOAnasMc4AbuoC,greensky0802,@Autostone-c How is your Orin system built? What is the CUDA version? Have you started all the function nodes of the Autoware. Universe on Orin?
Orin (autoware) + x86（awsim）,D_kwDOAnasMc4AUb8r,2023-07-01T06:19:18Z,Autostone-c,1,Answered,DC_kwDOAnasMc4Abuo6,Autostone-c,hi，Are you also doing this work？maybe we can share ideas
Orin (autoware) + x86（awsim）,D_kwDOAnasMc4AUb8r,2023-07-01T06:19:18Z,Autostone-c,1,Answered,DC_kwDOAnasMc4Abuwu,greensky0802,"Yes, we also run Autoware. Universe On the Jetson Orin platform. We shut down some of the algorithm modules to make it work."
Orin (autoware) + x86（awsim）,D_kwDOAnasMc4AUb8r,2023-07-01T06:19:18Z,Autostone-c,1,Answered,DC_kwDOAnasMc4AbuxK,Autostone-c,"good job. 
Have you completed the cross machine communication debugging yet? And are the scenarios in Autoware fully functional?"
How to build the latest autoware in docker,D_kwDOAnasMc4AUdUI,2023-07-03T03:33:46Z,Kim-mins,1,Answered,,,
How to build the latest autoware in docker,D_kwDOAnasMc4AUdUI,2023-07-03T03:33:46Z,Kim-mins,1,Answered,DC_kwDOAnasMc4AYN_j,evshary,"The docker image on Autoware GHCR might not be the latest one, because it's only built periodically not everytime the code is changed.
If you want to use the latest Autoware, I think you need to build Autoware by yourself in the container.
You can follow the tutorial [here](https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/docker-installation-devel/)."
How to build the latest autoware in docker,D_kwDOAnasMc4AUdUI,2023-07-03T03:33:46Z,Kim-mins,1,Answered,DC_kwDOAnasMc4AYOvT,Kim-mins,"Thank you evshary! Good to see you here!
I tried your suggestion and the build was successful. Thank you."
2023-07-03 ODD working group weekly meeting (147),D_kwDOAnasMc4AUddD,2023-07-03T08:20:09Z,Igata-ctrl,0,Unanswered,,,
Unable to read layout file in /control_performance_analysis/config/controller_monitor.xml,D_kwDOAnasMc4AUdeV,2023-07-03T08:43:35Z,yoneyoneclub,1,Answered,,,
Unable to read layout file in /control_performance_analysis/config/controller_monitor.xml,D_kwDOAnasMc4AUdeV,2023-07-03T08:43:35Z,yoneyoneclub,1,Answered,DC_kwDOAnasMc4AaXFt,letsgoniaoniao,"I also encountered the same problem, how did you solve it?"
Duplicate parameter files in Autoware,D_kwDOAnasMc4AUeFf,2023-07-04T02:16:39Z,evshary,0,Unanswered,,,
Software WG Meeting 2023/07/04,D_kwDOAnasMc4AUeMu,2023-07-04T06:29:10Z,mitsudome-r,0,Unanswered,,,
Do not use ansible to customize the configuration environment,D_kwDOAnasMc4AUeTe,2023-07-04T08:31:38Z,J-xinyu,1,Answered,,,
Do not use ansible to customize the configuration environment,D_kwDOAnasMc4AUeTe,2023-07-04T08:31:38Z,J-xinyu,1,Answered,DC_kwDOAnasMc4AYPu5,ktro2828,"@wo-ai-xue-xi What does `nvcc --version` command return?
Also, did you confirm cuda libraries are in the `PATH` and `LD_LIBRARY_PATH`? "
Do not use ansible to customize the configuration environment,D_kwDOAnasMc4AUeTe,2023-07-04T08:31:38Z,J-xinyu,1,Answered,DC_kwDOAnasMc4AYQSR,J-xinyu,"`nvcc -V`

> nvcc: NVIDIA (R) Cuda compiler 
> driver
> Copyright (c) 2005-2022 NVIDIA Corporation
> Built on Wed_Sep_21_10:33:58_PDT_2022
> Cuda compilation tools, release 11.8, V11.8.89
> Build cuda_11.8.r11.8/compiler.31833905_0

`~/.zshrc`

> export PATH=/usr/local/cuda/bin${PATH:+:${PATH}}
> export LD_LIBRARY_PATH=/usr/local/cuda/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}
> export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:~/TensorRT-8.6.1.6/lib/"
Do not use ansible to customize the configuration environment,D_kwDOAnasMc4AUeTe,2023-07-04T08:31:38Z,J-xinyu,1,Answered,DC_kwDOAnasMc4AY4UU,J-xinyu,"When I installed cuda using the deb method instead of the .run method, my problem was solved, and all function packages could be successfully compiled."
Any tool can observe whether topic communication is using dds or ipc？,D_kwDOAnasMc4AUe7f,2023-07-05T04:27:31Z,Autostone-c,0,Unanswered,,,
Localization & Mapping WG Meeting 05/07/2023,D_kwDOAnasMc4AUe7-,2023-07-05T04:58:08Z,armaganarsln,0,Unanswered,,,
autoware use iceoryx,D_kwDOAnasMc4AUfIe,2023-07-05T09:39:23Z,Autostone-c,1,Answered,,,
autoware use iceoryx,D_kwDOAnasMc4AUfIe,2023-07-05T09:39:23Z,Autostone-c,1,Answered,DC_kwDOAnasMc4AYRb_,felixf4xu,you can checkout https://github.com/ros2/rmw_iceoryx
Reference Design WG Meeting (07/05/2023),D_kwDOAnasMc4AUfUV,2023-07-05T13:54:05Z,chishengshih,1,Answered,,,
Reference Design WG Meeting (07/05/2023),D_kwDOAnasMc4AUfUV,2023-07-05T13:54:05Z,chishengshih,1,Answered,DC_kwDOAnasMc4AYRua,chishengshih,"- Share information from eSol (real-time OS in Japan): Next week.
- Notes from Markus's presentation:
  - Robots and autonomous vehicles
  - Virtual vehicle Company in Austria (300 employee)
  -  Ford modeo: lidar, GPS, Radar, Camera
  - started in 2019.
  - Autoware based, ROS2/ROS/Apex.AI
  - Software and Hardware integration.
  - Computing platform: X86 computer (neousys) and Intel NUC (data recording)
  - GMSL connection for camera
  - Hardware overview (page 6) shows all the hardware components. 
  - Using MobileEye camera, connected by USB-CAN (for logging purpose)
  - And two Ethernet camera, TierIV camera. 
  - 2023/Q3 (p7): Add Orin to connect to Camera (Tier IV C1 - GMSL), radar, ADAS-Kit (dataspeed)
  - (From Armagan) https://developer.nvidia.com/drive/ecosystem-hw-sw#cameras
  - PCI-GMSL card may resolve the issue.
  - https://www.neousys-tech.com/en/product/product-lines/in-vehicle-computing/vehicle-expansion-card/pcie-gl26-gmsl-frame-grabber-card
  - https://jp.vecow.com/dispPageBox/vecow/VecowCP.aspx?ddsPageID=NEWS_JP&dbid=4098793825
  - https://solectrix.de/en/products/video-grabber-and-playback-systems/sx-proframe-camera-adapters/
  - digi-twin at Austria: two companies provides the service.
- Mark from PixMoving:
  - PIXKit 3.0
  - aim for R&D in university, research institute.
 - Action Items:
   - Collect slides from Markus and Mark
   - Add company links to WG's wiki
   - Drive-by-wire, sensors, autoware core/universe, 
   - (David Walmroth) This is the PIX kit we have in US now. https://www.pixmoving.com/pixkit
   - Document for Pix Kit
   - (From Armagan): https://autowarefoundation.github.io/autoware-documentation/pr-405/reference-hw/"
Reference Design WG Meeting (07/05/2023),D_kwDOAnasMc4AUfUV,2023-07-05T13:54:05Z,chishengshih,1,Answered,DC_kwDOAnasMc4AYRvI,chishengshih,- William He to share V2X in coming meeting.
Call for Volunteers - ROS Node Configuration,D_kwDOAnasMc4AUfdO,2023-07-05T16:37:09Z,kaspermeck-arm,3,Answered,,,
Call for Volunteers - ROS Node Configuration,D_kwDOAnasMc4AUfdO,2023-07-05T16:37:09Z,kaspermeck-arm,3,Answered,DC_kwDOAnasMc4AZhlK,HamburgDave,"Here are some updated instructions from Kasper, wonderful to see people are starting to fill in the spreadsheet and take on some nodes.  Anyone modifying nodes also please feel free to join an OADKit WG call and say hello.  Your contributions are highly appreciated.  
https://docs.google.com/document/d/10DQezFZ0XAjO2S0IG_6O36p1WhZI7be68QRhNirzdac/edit#heading=h.z8xipsmunki6

"
Call for Volunteers - ROS Node Configuration,D_kwDOAnasMc4AUfdO,2023-07-05T16:37:09Z,kaspermeck-arm,3,Answered,DC_kwDOAnasMc4AZ_p6,yuntianyi-chen,"I have a thought with regard to the package building.

Let's take the node `costmap_generator` for example. It seems like the `/config` directory under the `/autoware/src/universe/autoware.universe/planning/costmap_generator` directory was not copied to the install-for-sharing directory (`/autoware/install/costmap_generator/share/costmap_generator`) after we refactored and built the node.

I think it has something to do with the `CMakeLists.txt` file and we need to add the `config` directory to the `ament_auto_package` to achieve the sharing:
```
ament_auto_package(
        INSTALL_TO_SHARE
        launch
        config
)
```

Maybe it would be a good idea to write this into the guideline since some nodes only achieve the launch dir sharing but not the config dir.

"
Call for Volunteers - ROS Node Configuration,D_kwDOAnasMc4AUfdO,2023-07-05T16:37:09Z,kaspermeck-arm,3,Answered,DC_kwDOAnasMc4AaIlR,ambroise-arm,Adding the config directory to `INSTALL_TO_SHARE` is indeed the correct way to do this. And it was simply not done for `costmap_generator` because it didn't have any config files. Adding it to the guideline sounds like a good idea.
Call for Volunteers - ROS Node Configuration,D_kwDOAnasMc4AUfdO,2023-07-05T16:37:09Z,kaspermeck-arm,3,Answered,DC_kwDOAnasMc4Aa2ym,kaspermeck-arm,@yuntianyi-chen @ambroise-arm - are you suggesting to add a section called `CMakeList` after the [`JSON Schema`](https://autowarefoundation.github.io/autoware-documentation/main/contributing/coding-guidelines/ros-nodes/parameters/) section with this additional information?
Call for Volunteers - ROS Node Configuration,D_kwDOAnasMc4AUfdO,2023-07-05T16:37:09Z,kaspermeck-arm,3,Answered,DC_kwDOAnasMc4Aa28E,yuntianyi-chen,"Yes, I suggest adding a section in the guideline about this `CMakeList` thing."
Call for Volunteers - ROS Node Configuration,D_kwDOAnasMc4AUfdO,2023-07-05T16:37:09Z,kaspermeck-arm,3,Answered,DC_kwDOAnasMc4Aa37z,raminterpl,"@BonoloAWF  @xmfcx  : Kindly provide access to push code to main branch below ids
git hub id: karishma1911
git hub id : santosh-sanku
"
Call for Volunteers - ROS Node Configuration,D_kwDOAnasMc4AUfdO,2023-07-05T16:37:09Z,kaspermeck-arm,3,Answered,DC_kwDOAnasMc4Aa4JF,BonoloAWF,"Done. Don't forget to update the spreadsheet as well, once the changes are accepted. "
lidar lidar calibration ros2 package failed,D_kwDOAnasMc4AUflu,2023-07-05T20:00:18Z,zillur-av,3,Answered,,,
lidar lidar calibration ros2 package failed,D_kwDOAnasMc4AUflu,2023-07-05T20:00:18Z,zillur-av,3,Answered,DC_kwDOAnasMc4AYS1Z,rsasaki0109,"@zillur-av 
You are probably doing the colcon build in the wrong place.
I was able to build with the following.

build
```
:~/lidar-lidar-calib$ colcon build --symlink-install
Starting >>> rviz2_capture_plugin_interface
Starting >>> autoware_auto_vehicle_msgs
Starting >>> fast_gicp
Finished <<< autoware_auto_vehicle_msgs [0.25s]                                                                                                                  
Finished <<< fast_gicp [0.28s]
Finished <<< rviz2_capture_plugin_interface [0.31s]                  
Starting >>> multi_lidar_calib
Starting >>> rviz2_capture_plugin_node
Finished <<< multi_lidar_calib [0.17s]                                                                               
Finished <<< rviz2_capture_plugin_node [0.18s]

Summary: 5 packages finished [0.65s]
```

run
```
~/lidar-lidar-calib$ ros2 launch multi_lidar_calib run.launch.py 
[INFO] [launch]: All log files can be found below /home/map4/.ros/log/2023-07-06-09-49-38-317388-map4-PC-36608
[INFO] [launch]: Default logging verbosity is set to INFO
config_file_path : /home/sasaki/lidar-lidar-calib/install/multi_lidar_calib/share/multi_lidar_calib/config/params.yaml
[INFO] [multi_lidar_calib-1]: process started with pid [36614]
[INFO] [rviz2-2]: process started with pid [36616]
[multi_lidar_calib-1] [INFO] [1688604578.584778300] [multi_lidar_calib_node]: The user defined path to save data/pcd is accessible, data will be stored under ./
[rviz2-2] [INFO] [1688604578.946906155] [rviz2]: Stereo is NOT SUPPORTED
[rviz2-2] [INFO] [1688604578.947016929] [rviz2]: OpenGl version: 4.6 (GLSL 4.6)
[rviz2-2] [INFO] [1688604578.966633949] [rviz2]: Stereo is NOT SUPPORTED
```"
lidar lidar calibration ros2 package failed,D_kwDOAnasMc4AUflu,2023-07-05T20:00:18Z,zillur-av,3,Answered,DC_kwDOAnasMc4AYU4l,zillur-av,"I tried your way, now showing another error.
```
trc@rahzar:~/lidar-lidar-calib$ colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release
[1.656s] WARNING:colcon.colcon_core.package_selection:Some selected packages are already built in one or more underlay workspaces:
	'autoware_auto_vehicle_msgs' is in: /home/trc/autoware/install/autoware_auto_vehicle_msgs
If a package in a merged underlay workspace is overridden and it installs headers, then all packages in the overlay must sort their include directories by workspace order. Failure to do so may result in build failures or undefined behavior at run time.
If the overridden package is used by another package in any underlay, then the overriding package in the overlay must be API and ABI compatible or undefined behavior at run time may occur.

If you understand the risks and want to override a package anyways, add the following to the command line:
	--allow-overriding autoware_auto_vehicle_msgs

This may be promoted to an error in a future release of colcon-override-check.
Starting >>> rviz2_capture_plugin_interface
Starting >>> autoware_auto_vehicle_msgs
Starting >>> fast_gicp                                                       
Finished <<< autoware_auto_vehicle_msgs [16.9s]                                          
Finished <<< rviz2_capture_plugin_interface [22.6s]                                       
Starting >>> rviz2_capture_plugin_node
[Processing: fast_gicp, rviz2_capture_plugin_node]                                                            
--- stderr: rviz2_capture_plugin_node                                                                          
CMake Warning (dev) at CMakeLists.txt:14 (find_package):
  Ignoring EXACT since no version is requested.
This warning is for project developers.  Use -Wno-dev to suppress it.

---
Finished <<< rviz2_capture_plugin_node [36.0s]
[Processing: fast_gicp]                                       
--- stderr: fast_gicp                                          
** WARNING ** io features related to pcap will be disabled
CMake Warning:
  Manually-specified variables were not used by the project:

    CATKIN_INSTALL_INTO_PREFIX_ROOT
    CATKIN_SYMLINK_INSTALL


---
Finished <<< fast_gicp [1min 33s]
Starting >>> multi_lidar_calib
--- stderr: multi_lidar_calib                                    
** WARNING ** io features related to pcap will be disabled
In file included from /home/trc/lidar-lidar-calib/src/multi_lidar_calib/src/multi_lidar_calib.cpp:16:
/home/trc/lidar-lidar-calib/src/multi_lidar_calib/include/multi_lidar_calib/multi_lidar_calib.hpp:20:10: fatal error: pcl_conversions/pcl_conversions.h: No such file or directory
   20 | #include <pcl_conversions/pcl_conversions.h>
      |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
compilation terminated.
gmake[2]: *** [CMakeFiles/multi_lidar_calib.dir/build.make:76: CMakeFiles/multi_lidar_calib.dir/src/multi_lidar_calib.cpp.o] Error 1
gmake[1]: *** [CMakeFiles/Makefile2:137: CMakeFiles/multi_lidar_calib.dir/all] Error 2
gmake: *** [Makefile:146: all] Error 2
---
Failed   <<< multi_lidar_calib [22.2s, exited with code 2]

Summary: 4 packages finished [1min 56s]
  1 package failed: multi_lidar_calib
  3 packages had stderr output: fast_gicp multi_lidar_calib rviz2_capture_plugin_node
trc@rahzar:~/lidar-lidar-calib$
```
Pcl conversion is already installed

```
trc@rahzar:~/ros2_ws$ sudo apt-get install ros-humble-pcl-conversions
[sudo] password for trc: 
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
ros-humble-pcl-conversions is already the newest version (2.4.0-4jammy.20230623.075500).
ros-humble-pcl-conversions set to manually installed.
The following package was automatically installed and is no longer required:
  libnvidia-common-535
Use 'sudo apt autoremove' to remove it.
0 upgraded, 0 newly installed, 0 to remove and 18 not upgraded.
```"
lidar lidar calibration ros2 package failed,D_kwDOAnasMc4AUflu,2023-07-05T20:00:18Z,zillur-av,3,Answered,DC_kwDOAnasMc4AYVPw,zillur-av,Solved that problem including `find_package(pcl_conversions REQUIRED)` on Cmakelists.
2023-07-06 Racing Working Group Meeting,D_kwDOAnasMc4AUfvZ,2023-07-06T00:58:43Z,pojenwang,0,Unanswered,,,
Yabloc Localization - Test Results,D_kwDOAnasMc4AUf7S,2023-07-06T07:31:20Z,StepTurtle,1,Answered,,,
Yabloc Localization - Test Results,D_kwDOAnasMc4AUf7S,2023-07-06T07:31:20Z,StepTurtle,1,Answered,DC_kwDOAnasMc4AYTaT,KYabuuchi,"Thank you for sharing the test results of YabLoc.   :clap: 
I wish you success in your future tests. Feel free to reach out to me if you encounter any issues. :+1:"
Yabloc Localization - Test Results,D_kwDOAnasMc4AUf7S,2023-07-06T07:31:20Z,StepTurtle,1,Answered,DC_kwDOAnasMc4AYWzr,StepTurtle,Actually I need some help about running Yabloc with Autoware. Should I post my question here or creating issue or something like that.
Yabloc Localization - Test Results,D_kwDOAnasMc4AUf7S,2023-07-06T07:31:20Z,StepTurtle,1,Answered,DC_kwDOAnasMc4AYW3-,KYabuuchi,"If the question becomes complicated, it would be better to create a new issue.  I will assist you in resolving it on the issue page."
Yabloc Localization - Test Results,D_kwDOAnasMc4AUf7S,2023-07-06T07:31:20Z,StepTurtle,1,Answered,DC_kwDOAnasMc4AYW4_,StepTurtle,"I think it's not very complicated, but I' am going to create issue."
Yabloc Localization - Test Results,D_kwDOAnasMc4AUf7S,2023-07-06T07:31:20Z,StepTurtle,1,Answered,DC_kwDOAnasMc4AYW-J,StepTurtle,Here is the issue: https://github.com/orgs/autowarefoundation/discussions/3645
Yabloc Localization - Test Results,D_kwDOAnasMc4AUf7S,2023-07-06T07:31:20Z,StepTurtle,1,Answered,DC_kwDOAnasMc4AbALt,kedarnadh-123,"I Need code for single lane car distance detection for my project....
our tittle is - Automatic breaking & collision avoidance"
Yabloc Localization - Test Results,D_kwDOAnasMc4AUf7S,2023-07-06T07:31:20Z,StepTurtle,1,Answered,DC_kwDOAnasMc4AbAWp,KYabuuchi,"@kedarnadh-123  With the right map, YabLoc can estimate self-position even in single lanes.

If you want to measure the distance to obstacles, you may be able to use Autoware's perception feature. 
Please ask about that in another discussion.  YabLoc does not measure distance to obstacles."
Planning&Control WG Meeting 2023/07/06,D_kwDOAnasMc4AUf7h,2023-07-06T07:35:34Z,TakaHoribe,1,Answered,,,
Planning&Control WG Meeting 2023/07/06,D_kwDOAnasMc4AUf7h,2023-07-06T07:35:34Z,TakaHoribe,1,Answered,DC_kwDOAnasMc4AYTkP,xmfcx,"- https://github.com/autowarefoundation/autoware.universe/pull/3677

Let's make this a priority before merging another control related PR please."
Planning&Control WG Meeting 2023/07/06,D_kwDOAnasMc4AUf7h,2023-07-06T07:35:34Z,TakaHoribe,1,Answered,DC_kwDOAnasMc4AYTly,xmfcx,"Parent issue:
- https://github.com/autowarefoundation/autoware.universe/issues/3674"
"Open AD Kit Working Group Meeting July 6, 2023",D_kwDOAnasMc4AUgKY,2023-07-06T12:33:10Z,HamburgDave,0,Unanswered,,,
"What does ""fix"" mean as in the node name of ""fix2tfpose""",D_kwDOAnasMc4AUgPP,2023-07-06T14:08:15Z,felixf4xu,1,Answered,,,
"What does ""fix"" mean as in the node name of ""fix2tfpose""",D_kwDOAnasMc4AUgPP,2023-07-06T14:08:15Z,felixf4xu,1,Answered,DC_kwDOAnasMc4AYUYa,mitsudome-r,"@felixf4xu 
It would be nice if you can post the link to the package you are referring to so that there is no misunderstanding.

Assuming that you are referring to the [fix2tfpose](https://github.com/autowarefoundation/autoware_ai_perception/tree/master/gnss_localizer/nodes/fix2tfpose) node in Autoware.AI, ""fix"" refers to RTK ""Fix"" solution. This [site](https://support.marxact.com/article/85-what-is-the-difference-between-rtk-fix-and-rtk-float) explains what it means, but it basically means that the receiver was able to receive good enough signals from GNSS satellites to calculate reliable solution, and it doesn't necessarily mean that it is static. 

Also, if you are still using Autoware.AI, it has reached its EOL, and I suggest you to move over to ROS 2 version of Autoware called [Autoware Core/Universe](https://github.com/autowarefoundation/autoware).
"
How should I write the sample vehicle description of this imu device?,D_kwDOAnasMc4AUgYJ,2023-07-06T17:10:47Z,TZECHIN6,1,Answered,,,
How should I write the sample vehicle description of this imu device?,D_kwDOAnasMc4AUgYJ,2023-07-06T17:10:47Z,TZECHIN6,1,Answered,DC_kwDOAnasMc4AYnQY,TZECHIN6,"Anyone has experience on how should I setup my imu, to what autoware is expected?"
Eagleye PreLoad Dynamic Initialization (30 second straight line),D_kwDOAnasMc4AUg2H,2023-07-07T08:33:46Z,sisaha9,1,Answered,,,
Eagleye PreLoad Dynamic Initialization (30 second straight line),D_kwDOAnasMc4AUg2H,2023-07-07T08:33:46Z,sisaha9,1,Answered,DC_kwDOAnasMc4AYc9P,rsasaki0109,"Speed scale factor does not change much with time, so it can be saved. However, since Eagleye is a time-series filter like Kalman Filter and cannot directly observe the yaw angle, there is no way to preload the dynamic initialization instead of doing it at startup each time.

The minimum vehicle speed required for straight-line motion is set by the `moving_judgment_threshold`, which is 10km/s by default. This is because the GNSS Doppler speed used by Eagleye for azimuth angle estimation deteriorates in accuracy if it is below this value.
Even if the accuracy deteriorates somewhat, it might be okay to set it to 2-5km/s.
However, it does not mean that they cannot run at speeds below that, just that Doppler speeds are not used.
https://github.com/MapIV/eagleye/tree/develop-ros2/eagleye_rt/config#common-parameters"
Eagleye PreLoad Dynamic Initialization (30 second straight line),D_kwDOAnasMc4AUg2H,2023-07-07T08:33:46Z,sisaha9,1,Answered,DC_kwDOAnasMc4AYeQr,sisaha9,What if we set `use_multi_antenna` to true? I am using a multi antenna setup that can output the `gnss_compass_pose`. I essentially want the vehicle to be able to just go through the beginning static initialization and then start publishing positions while in static operation so that the car can begin to move autonomously
Eagleye PreLoad Dynamic Initialization (30 second straight line),D_kwDOAnasMc4AUg2H,2023-07-07T08:33:46Z,sisaha9,1,Answered,DC_kwDOAnasMc4AYfl8,rsasaki0109,"Dynamic Initialization is required for single antennas.
If use_multi_antenna is set to true and gnss_compass_pose is entered into eagleye, the position posture is output without Dynamic Initialization.
gnss_compass_pose can be output with the following package.
https://github.com/MapIV/gnss_compass_ros"
Eagleye PreLoad Dynamic Initialization (30 second straight line),D_kwDOAnasMc4AUg2H,2023-07-07T08:33:46Z,sisaha9,1,Answered,DC_kwDOAnasMc4AYh7b,sisaha9,I tested it and the position output is still delayed by the same amount though it does improve after setting `use_multi_antenna` to true
Can't run localization with camera,D_kwDOAnasMc4AUhHY,2023-07-07T14:51:20Z,StepTurtle,2,Answered,,,
Can't run localization with camera,D_kwDOAnasMc4AUhHY,2023-07-07T14:51:20Z,StepTurtle,2,Answered,DC_kwDOAnasMc4AYXzb,KYabuuchi,"[By this PR](https://github.com/autowarefoundation/autoware.universe/pull/4110), yabloc_pose_initializer does not download DNN model in default.  I guess that is why the initialization node does not work.

To download the DNN model, please add `--cmake-args -DDOWNLOAD_ARTIFACTS=ON` when you build Autoware. 
You can check if the DNN model has been downloaded by looking for `resources.tar.gz` and `saved_model` in `install/yabloc_pose_initializer/share/yabloc_pose_initializer/data/` .

Once the model is downloaded, the `/localization/yabloc/initializer/semantic_segmentation_node` should run properly and initialization process works well.


I will implement another initialization that will work even if the model is not be downloaded.Sorry for inconvenience now."
Can't run localization with camera,D_kwDOAnasMc4AUhHY,2023-07-07T14:51:20Z,StepTurtle,2,Answered,DC_kwDOAnasMc4AYYbz,StepTurtle,"Thanks for your response.
Actually I noticed the model was not downloaded and instead of recompiling I copied it from tierIV/Yabloc. Of course I forgot that  ros2 wants to install everything and i did not recompile. So there is no initializing problem after recompiling."
Can't run localization with camera,D_kwDOAnasMc4AUhHY,2023-07-07T14:51:20Z,StepTurtle,2,Answered,DC_kwDOAnasMc4AYx31,KYabuuchi,"FYI, I improved this issue with this PR. https://github.com/autowarefoundation/autoware.universe/pull/4296"
"I'm trying to run Ignition Gazebo's differential 2-wheeled robot with Autoware, but it's not working.",D_kwDOAnasMc4AUhaw,2023-07-08T02:35:30Z,porizou,4,Answered,,,
"I'm trying to run Ignition Gazebo's differential 2-wheeled robot with Autoware, but it's not working.",D_kwDOAnasMc4AUhaw,2023-07-08T02:35:30Z,porizou,4,Answered,DC_kwDOAnasMc4AYYlb,Shin-kyoto,"Did you engage by publishing message, following [Quick Start Demo page](https://tier4.github.io/AWSIM/GettingStarted/QuickStartDemo/#:~:text=To%20make%20the%20vehicle%20start%20navigating%20please%20engage%20it%27s%20operation%20using%20the%20command%20below)?"
"I'm trying to run Ignition Gazebo's differential 2-wheeled robot with Autoware, but it's not working.",D_kwDOAnasMc4AUhaw,2023-07-08T02:35:30Z,porizou,4,Answered,DC_kwDOAnasMc4AYY9W,porizou,"@Shin-kyoto 
AWSIM動かせる環境が手元にないのでAWSIMでは動作確認できておりません.."
"I'm trying to run Ignition Gazebo's differential 2-wheeled robot with Autoware, but it's not working.",D_kwDOAnasMc4AUhaw,2023-07-08T02:35:30Z,porizou,4,Answered,DC_kwDOAnasMc4AYY_8,Shin-kyoto,"@porizou 
Publishing message is not for AWSIM, but for engaging autoware.
Please see the following page and please try to run planning simulation following tutorials. It is helpful for you to understand how to start autonomous driving in autoware.
https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/

P.S.
You can find the command `ros2 topic pub /autoware/engage autoware_auto_vehicle_msgs/msg/Engage ""engage: true"" -1` in old documentation for planning simulation.
In the PR below, instead of this command, we decided to list another command `ros2 service call /api/operation_mode/change_to_autonomous autoware_adapi_v1_msgs/srv/ChangeOperationMode {}`.
https://github.com/autowarefoundation/autoware-documentation/commit/919354b9839ec8834df6d633fbfb38f65090f058#diff-41eb8fe4e42bed00f5281b66e259425455572cc4f873f85042a99cf2442bc9b4"
"I'm trying to run Ignition Gazebo's differential 2-wheeled robot with Autoware, but it's not working.",D_kwDOAnasMc4AUhaw,2023-07-08T02:35:30Z,porizou,4,Answered,DC_kwDOAnasMc4AYYmG,yukkysaito,"I would expect that there is not enough output from gazebo, but this information is not enough to make a determination.
Could you share the instruction video, source code or rosbag?
"
"I'm trying to run Ignition Gazebo's differential 2-wheeled robot with Autoware, but it's not working.",D_kwDOAnasMc4AUhaw,2023-07-08T02:35:30Z,porizou,4,Answered,DC_kwDOAnasMc4AYaZP,yukkysaito,"@porizou 
https://github.com/orgs/autowarefoundation/discussions/3646#discussioncomment-6393764
Thank you for your responese.
I'll check later :pray: "
"I'm trying to run Ignition Gazebo's differential 2-wheeled robot with Autoware, but it's not working.",D_kwDOAnasMc4AUhaw,2023-07-08T02:35:30Z,porizou,4,Answered,DC_kwDOAnasMc4AYY-k,porizou,"@yukkysaito 
Thanks for your response.

The following is as information on Ignition Gazebo's output
github repository, the output of ros2 topic, and the rosbag file from the Gazebo run.

The github repository
https://github.com/M2labo/tugbot_autoware_pkgs

- TF outputs /base_link<->/lidar frame with static_transform_publisher
- IMU is not input to Autoware
- PointCloud2 (/world/world_demo/model/tugbot/link/scan_omni/sensor/scan_omni/scan/points
) entered in Localization and Perception
- /localization/kinematic_state -> Odometry topic

```bash
$ ros2 topic list 
/clock
/localization/kinematic_state
/model/tugbot/cmd_vel
/parameter_events
/rosout
/tf_static
/world/world_demo/model/tugbot/link/camera_front/sensor/color/image
/world/world_demo/model/tugbot/link/imu_link/sensor/imu/imu
/world/world_demo/model/tugbot/link/scan_omni/sensor/scan_omni/scan/points
```


- rosbag

https://drive.google.com/drive/folders/1eAK7A9Z_MfkZaynHmHURFJA4uqJbyorL?usp=sharing

"
"I'm trying to run Ignition Gazebo's differential 2-wheeled robot with Autoware, but it's not working.",D_kwDOAnasMc4AUhaw,2023-07-08T02:35:30Z,porizou,4,Answered,DC_kwDOAnasMc4AYZBh,Shin-kyoto,"@porizou 
> The github repository
> https://github.com/M2labo/tugbot_autoware_pkgs

Is this private repository? I can't open the above link."
"I'm trying to run Ignition Gazebo's differential 2-wheeled robot with Autoware, but it's not working.",D_kwDOAnasMc4AUhaw,2023-07-08T02:35:30Z,porizou,4,Answered,DC_kwDOAnasMc4AYZEZ,porizou,"Sorry, changed to public."
"I'm trying to run Ignition Gazebo's differential 2-wheeled robot with Autoware, but it's not working.",D_kwDOAnasMc4AUhaw,2023-07-08T02:35:30Z,porizou,4,Answered,DC_kwDOAnasMc4AZnql,porizou,"@Shin-kyoto @yukkysaito 

下のリンク先のように/vehicle/status/steering_statusトピックに現在のステアリング角度0[rad]をpublishし続けるノードを実行することで動くようになりました。
https://github.com/M2labo/tugbot_autoware_pkgs/blob/autoware_mini/src/steering_report_publisher.cpp


動画は自律移動に最低限必要なノードを起動するlaunchファイルを作成して動かしています。
ご返信ありがとうございました。

動画
https://drive.google.com/file/d/10IefGW318lmktNzYPzan-18wQqdgEgKB/view?usp=sharing"
Error during the build process,D_kwDOAnasMc4AUhsk,2023-07-08T15:57:26Z,polurik,5,Answered,,,
Error during the build process,D_kwDOAnasMc4AUhsk,2023-07-08T15:57:26Z,polurik,5,Answered,DC_kwDOAnasMc4AYYlI,polurik,"I am getting this error at the time of build process. can someone tell me how to solve this problem?
"
Error during the build process,D_kwDOAnasMc4AUhsk,2023-07-08T15:57:26Z,polurik,5,Answered,DC_kwDOAnasMc4AYYlw,Shin-kyoto,"Did `rosdep install` process finish correctly?
Please paste the output of `rosdep install`."
Error during the build process,D_kwDOAnasMc4AUhsk,2023-07-08T15:57:26Z,polurik,5,Answered,DC_kwDOAnasMc4AYYnA,polurik,"nikhil@nikhil-Y500:~/autoware$ rosdep install -y --from-paths src --ignore-src --rosdistro humble
#All required rosdeps installed successfully

The output of rosdep install "
Error during the build process,D_kwDOAnasMc4AUhsk,2023-07-08T15:57:26Z,polurik,5,Answered,DC_kwDOAnasMc4AYY_m,Shin-kyoto,"Please run the code below in python REPL, and paste the result.

```python
import importlib.metadata as importlib_metadata
```"
Error during the build process,D_kwDOAnasMc4AUhsk,2023-07-08T15:57:26Z,polurik,5,Answered,DC_kwDOAnasMc4AYeVv,polurik,"nikhil@nikhil-Y500:~$ python3
Python 3.10.6 (main, May 29 2023, 11:10:38) [GCC 11.3.0] on linux
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
>>> import importlib.metadata as importlib_metadata
>>> 

Is it ok?"
Error during the build process,D_kwDOAnasMc4AUhsk,2023-07-08T15:57:26Z,polurik,5,Answered,DC_kwDOAnasMc4AYeZA,polurik,"nikhil@nikhil-Y500:~/autoware$ python3 -m pip show importlib_metadata
Name: importlib-metadata
Version: 4.6.4
Summary: Read metadata from Python packages
Home-page: https://github.com/python/importlib_metadata
Author: Jason R. Coombs
Author-email: jaraco@jaraco.com
License: UNKNOWN
Location: /usr/lib/python3/dist-packages
Requires: 
Required-by: 
nikhil@nikhil-Y500:~/autoware$ python3 -m pip install importlib_metadata
Defaulting to user installation because normal site-packages is not writeable
Requirement already satisfied: importlib_metadata in /usr/lib/python3/dist-packages (4.6.4)

I think the requirement is already available"
Error during the build process,D_kwDOAnasMc4AUhsk,2023-07-08T15:57:26Z,polurik,5,Answered,DC_kwDOAnasMc4AYgU8,ktro2828,"@polurik It seems `python3.5` in `/usr/local/python3.5` is used in your proccss
```
execute_process(/usr/local/bin/python3.5
/opt/ros/humble/share/ament_cmake_core/cmake/package_templates/templates_2_cmake.py
/home/nikhil/autoware/build/tensorrt_common/ament_cmake_package_templates/templates.cmake)
returned error code 1
Call Stack (most recent call first):
```
What does `which python` and `which python3` return?"
Unable to build AutowareSimulation.unity in Unity Editor,D_kwDOAnasMc4AUi_e,2023-07-10T05:51:57Z,yaukaizhi,1,Answered,,,
Unable to build AutowareSimulation.unity in Unity Editor,D_kwDOAnasMc4AUi_e,2023-07-10T05:51:57Z,yaukaizhi,1,Answered,DC_kwDOAnasMc4AYalb,maxime-clem,"From my experience, hitting play in the editor will spawn the `/AWSIM` node which publishes some Autoware topics. You can make sure by running `ros2 node list`. If this does not show the `/AWSIM` node, then please make sure there is no error message when you play the scene in Unity."
Unable to build AutowareSimulation.unity in Unity Editor,D_kwDOAnasMc4AUi_e,2023-07-10T05:51:57Z,yaukaizhi,1,Answered,DC_kwDOAnasMc4AYapy,yaukaizhi,"ros2 node list did not return anything, here are the error messages generated in unity editor

![image](https://github.com/autowarefoundation/autoware/assets/112715209/0b780d84-ae58-40c4-ba57-8b459da38f9a)

"
Unable to build AutowareSimulation.unity in Unity Editor,D_kwDOAnasMc4AUi_e,2023-07-10T05:51:57Z,yaukaizhi,1,Answered,DC_kwDOAnasMc4AYaqY,yaukaizhi,"![image](https://github.com/autowarefoundation/autoware/assets/112715209/9af7be26-e5fe-4572-b428-736cd32001de)
this could provide more insight"
Unable to build AutowareSimulation.unity in Unity Editor,D_kwDOAnasMc4AUi_e,2023-07-10T05:51:57Z,yaukaizhi,1,Answered,DC_kwDOAnasMc4AYa1b,maxime-clem,"This is most likely the cause of your issues but I do not know what could be the solution.
You should open an issue on the AWSIM repository."
Unable to build AutowareSimulation.unity in Unity Editor,D_kwDOAnasMc4AUi_e,2023-07-10T05:51:57Z,yaukaizhi,1,Answered,DC_kwDOAnasMc4AYa9z,yaukaizhi,"Alright thanks, this issue doesn't appear when running unity in Windows 11"
Standardize a strategy for packages that use artifacts downloaded from the internet,D_kwDOAnasMc4AUjGf,2023-07-10T08:34:49Z,esteve,3,Answered,,,
Standardize a strategy for packages that use artifacts downloaded from the internet,D_kwDOAnasMc4AUjGf,2023-07-10T08:34:49Z,esteve,3,Answered,DC_kwDOAnasMc4AYa6_,esteve,@xmfcx I'd like to discuss this in the next AWSG meeting (2023-07-11)
Standardize a strategy for packages that use artifacts downloaded from the internet,D_kwDOAnasMc4AUjGf,2023-07-10T08:34:49Z,esteve,3,Answered,DC_kwDOAnasMc4AYe3T,xmfcx,Discussed in: https://github.com/orgs/autowarefoundation/discussions/3653
Standardize a strategy for packages that use artifacts downloaded from the internet,D_kwDOAnasMc4AUjGf,2023-07-10T08:34:49Z,esteve,3,Answered,DC_kwDOAnasMc4AYmv5,esteve,"For reference, here's the relevant section in the Debian policy manual regarding packages that access the internet during the build step:

https://www.debian.org/doc/debian-policy/ch-source.html#main-building-script-debian-rules

This ensures that package builds are reproducible and avoid potential security risks."
Standardize a strategy for packages that use artifacts downloaded from the internet,D_kwDOAnasMc4AUjGf,2023-07-10T08:34:49Z,esteve,3,Answered,DC_kwDOAnasMc4AYswF,mitsudome-r,"At least there seems to be no objection from TIER IV about removing the download script from CMake.
I also think Option 3 would be a best way to go as discussed in Software WG.

I do have one concern about how we want to set the default path in our [example launch files](https://github.com/autowarefoundation/autoware.universe/blob/c23e7cd697a97032bae59930a166c7b185c1707a/perception/lidar_centerpoint/launch/lidar_centerpoint.launch.xml#L7C2-L7C2). 
They currently points to the relative path within the package. If we download the model files manually or by ansible, should we make an assumption about where to download? (e.g., somewhere like `/opt/autoware/sample_ml_models`)"
Standardize a strategy for packages that use artifacts downloaded from the internet,D_kwDOAnasMc4AUjGf,2023-07-10T08:34:49Z,esteve,3,Answered,DC_kwDOAnasMc4AYs3L,mitsudome-r,"Another option is to pass `autoware_model` to launch file as an argument to autoware.launch.xml just like in `autoware_map`.
**Pros:** User can choose which folder to download the models
**Cons:** We have to pass down the argument all the way down to the included launch file. (e.g., autoware.launch.xml -> perception.launch.xml -> detection.launch.xml -> camera_lidar_fusion_based_detection.launch.xml) 
"
Standardize a strategy for packages that use artifacts downloaded from the internet,D_kwDOAnasMc4AUjGf,2023-07-10T08:34:49Z,esteve,3,Answered,DC_kwDOAnasMc4AYs3c,xmfcx,"I suggest we pass `autoware_data` directory.

And we pass down this path to the downstream packages in the launch files.

We would predefine the structure of this directory:
```
.../autoware_data/map/map1/map.pcd
.../autoware_data/map/map1/map.josm ?
.../autoware_data/models/model1.onnx
```

Another option from @esteve (I hope I got it right)
```
.../autoware_data/package_name/map.pcd
.../autoware_data/package_name/map.josm ?
.../autoware_data/package_name/model1.onnx
```"
Standardize a strategy for packages that use artifacts downloaded from the internet,D_kwDOAnasMc4AUjGf,2023-07-10T08:34:49Z,esteve,3,Answered,DC_kwDOAnasMc4AYs4E,evshary,"I prefer @xmfcx proposal. It makes new commer clearer to all the artifacts in Autoware.
Also, maybe using environmental variables to pass the path is another option."
2023-07-10 ODD working group weekly meeting (148),D_kwDOAnasMc4AUjXP,2023-07-10T14:00:03Z,Igata-ctrl,0,Unanswered,,,
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,,,
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AYgwl,oguzkaganozt,"Hi,

We could start by defining the ideal Dev Environment in case of dependencies. Then from there, we can move on with the runtime environment which means refining dependencies into minimum required ones for runtime only. 

We have dependencies from **ansible** which are 3rd party requirements and from **rosdep** which comes directly from the codebase. From a practical perspective, we could start from ansible playbook and try to refine our requirements as DE or PE."
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AYhsc,kaspermeck-arm,"That's a good idea and starting point!

1. Gather all the current dependencies for the DE needed to build, test and run Autoware
2. Identify which of these dependencies are relevant for the PE to run Autoware"
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AYlFw,doganulus,"The Ansible-first approach seems a good solution for several challenges in streamlining robotic application development. 

It would be great if the user interacts only with Ansible to perform build, test, and deploy tasks. Its characteristic ability to operate over SSH is also well-fitted for handling bare metal, VMs, and containers alike. 

I and my students would work on Ansible scripts starting from [this previous work](https://github.com/bounverif/autoware-istanbul/tree/main/ansible) this summer. We love to align it with this Dojo.
"
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZC2t,kaspermeck-arm,"Discussion points:
- Pros/cons with keeping Ansible?
- Pros/cons replacing Ansible with an extended `rosdep` registry?
- How do we create and manage a modular approach for Autoware dependencies?

Please share you thoughts and opinions!"
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZDMk,oguzkaganozt,"Maybe we can add ""Should we store the requirements list inside our codebase ?"""
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZDoy,doganulus,"One problem with `rosdep` is that we cannot install specific versions of dependencies. Please see the following question from a ROS user and answered by Tully Foote:
https://answers.ros.org/question/376259/rosdep-install-specific-version-of-dependencies/
The question is two years old, but I have seen much improvement on `rosdep` since then. And the answer seems definite and says that ROS wants us to use their selection of software versions. Fine, this sounds excellent for beginners, but I think any professional software development activity requires better control over their dependencies. That's why the software industry particularly prefers container-based development and deployment in the first place. Hence, soon, we will want to install new software outside `rosdep` database; and then, we need to use Ansible again or wait for someone to update the database. 

@oguzkaganozt Yes, keeping the development environment specification next to the code and under version control is a good software practice. It may be in another repo for large projects with multiple repos, but the overall idea is the same."
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZSEN,kaspermeck-arm,"> One problem with `rosdep` is that we cannot install specific versions of dependencies. Please see the following question from a ROS user and answered by Tully Foote: https://answers.ros.org/question/376259/rosdep-install-specific-version-of-dependencies/ The question is two years old, but I have seen much improvement on `rosdep` since then. And the answer seems definite and says that ROS wants us to use their selection of software versions. Fine, this sounds excellent for beginners, but I think any professional software development activity requires better control over their dependencies. That's why the software industry particularly prefers container-based development and deployment in the first place. Hence, soon, we will want to install new software outside `rosdep` database; and then, we need to use Ansible again or wait for someone to update the database.
> 

A consequence of not following the ROS versioning is that we will have to verify inter-package compatibility. I have two follow-up questions:
- Is not being able to select exact versions of software currently limiting the AWF community?
- If we extend the current `rosdep` registry, are we in charge of the software version then?

> @oguzkaganozt Yes, keeping the development environment specification next to the code and under version control is a good software practice. It may be in another repo for large projects with multiple repos, but the overall idea is the same.

+1
DE and PE should definitely be versioned controlled."
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZj4W,esteve,"> Is not being able to select exact versions of software currently limiting the AWF community?

AFAIK, AWF packages just depend on the latest version available, and within Autoware packages, it's expected to build the entirety of the source tree all at once (there's no ABI guarantees, for example)

> If we extend the current rosdep registry, are we in charge of the software version then?

No. The rosdep registry only translates from keys to system-native packages names, versioning is declared in the `package.xml` files. However, info about versions is passed onto packaging system (e.g. Debian) which can correctly use it to restrict versions."
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZG6Q,doganulus,"Related to this discussion, we have recently submitted a proposal to [Autoware Challenge 2023](https://autoware.org/autoware-challenge-2023/). I hope we are not too far off for the challenge themes, yet this is a topic we would like to pursue regardless. I want to keep this group informed.

In essence, we propose to organize **Autoware repositories as Ansible collections**. Under this model, we refer to `autoware.core` and `autoware.universe` as package collections, but we generalize the concept further to cover any collection of Autoware (ROS) packages, either from universities, companies, or individuals using the power of Ansible and its excellent networking, customization, and social mechanisms. This will be the key to holding everything in place. Overall I think Ansible has great potential to be exploited by the robotics community.

Please find the proposal document here:
https://docs.google.com/document/d/1ZELu47YN2Hq13sXjCXmzJ9YYh1aDqr4jeWLWJ9TrDRQ/edit?usp=sharing
Any comment or suggestion is welcome here or on the document.

@voursstrreds, @mehmethilmidundar

 "
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZSMF,kaspermeck-arm,"## Open AD Kit meeting August 3

- focus on building containers to start
- **DE** with CUDA needs to be reduced (currently 16GB)
  - GitHub default runners guarantee 14GB max
  - Ideally, it should be max 12GB

Approach:
1. Understand the current method of building:
  - https://github.com/autowarefoundation/autoware/blob/main/.github/workflows/docker-build-and-push-main.yaml
  - https://github.com/autowarefoundation/autoware/tree/main/docker
  - https://github.com/autowarefoundation/autoware/pkgs/container/autoware-universe
  - https://github.com/autowarefoundation/autoware/blob/main/.github/workflows/docker-build-and-push-main.yaml
2. Reduce the container image size"
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZZcg,oguzkaganozt,"Since the last Open AD Kit meeting, I think we've finished the main part of the theoretical discussion. @kaspermeck-arm's summary sums it up perfectly. Therefore, our first goal is to reduce the **DE** container image size, this will clear the ground for optimal runtime images as well as the fix for the CI issue which building container takes a lot of time (https://github.com/autowarefoundation/autoware.universe/issues/4497)

In that regard I want to start the technical discussion on how we can reduce the size of the image:
- Organizing Ansible playbooks for modular installation of packages. As @doganulus already commented on this topic at https://github.com/orgs/autowarefoundation/discussions/3651#discussioncomment-6581904
- Do we need to run Autoware for build-test CI task ? If not we can extract runtime dependencies from **DE** such as **CUDA, TensorRT runtime** libs which can be approx. 1Gb and also remove installation of **egm2008-1** which holds up to 500 Mb
- Using **ROS base image** instead of installing it on Ubuntu base. -> Not reduces the image size significantly but we can still leverage the ROS images

"
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZad8,doganulus,"> Do we need to run Autoware for build-test CI task?

I believe we do not need to run Autoware in the most minimal development environment. The container just needs to build all or a subset of Autoware packages. Testing Autoware needs a much larger effort and infrastructure anyway. 

> Using ROS base image instead of installing it on Ubuntu base. 

I am fine with the ROS image or Ubuntu image. I think it is an easily-revertible decision so we should pick one and start experimenting using it. "
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZa4f,kaspermeck-arm,"> Using ROS base image instead of installing it on Ubuntu base. -> Not reduces the image size significantly but we can still leverage the ROS images

Another pro is that using the ROS base image removes one layer which AWF needs to maintain."
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZb18,doganulus,"The following two Nvidia packages already require 9.2GB disk space without ROS (~1GB) and Autoware source dependencies (~5GB) installed. 

```
apt install cuda-libraries-dev-12-2 libnvinfer-dev
```

If these packages are not absolutely necessary, then there is a chance. But I am not familiar to the perception stack.

Otherwise, the target of 12 GB does not seem possible under the current monorepo approach."
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZhVe,oguzkaganozt,So much of the work comes down to determining the perception stack requirements like CUDA and TensorRT dependencies. This means that we have to try to find the packages that are most suitable for us and do nothing but the only CI work required.
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZhpN,esteve,How much space does it take with `--no-install-recommends` ? (i.e. ```apt install --no-install-recommends cuda-libraries-dev-12-2 libnvinfer-dev```
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZhqy,doganulus,"It is the same. This is the container I start with:
```dockerfile
FROM amd64/ros:humble

ENV NVIDIA_VISIBLE_DEVICES=all
ENV NVIDIA_DRIVER_CAPABILITIES=compute,utility 

RUN apt-get update && export DEBIAN_FRONTEND=noninteractive \
    && apt-get -y install \
      git \
      wget \
    && apt-get autoremove -y && apt-get clean -y && rm -rf /var/lib/apt/lists/* 

RUN wget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2204/x86_64/cuda-keyring_1.1-1_all.deb \
    && dpkg -i cuda-keyring_1.1-1_all.deb && rm cuda-keyring_1.1-1_all.deb

# RUN apt-get install cuda-libraries-dev-12-2 libnvinfer-dev
```"
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZhuZ,kaspermeck-arm,"Test TensorRT container image from NV:
```
REPOSITORY                                     TAG                                 IMAGE ID       CREATED        SIZE
nvcr.io/nvidia/tensorrt                        23.07-py3                           6b331face1d9   4 weeks ago    6.9GB
```"
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZh2S,doganulus,"Can @xmfcx or @esteve or @mitsudome-r comment if we can only use TensorRT shared libraries for development/runtime or if the software group prefers static binding for these libraries?

I run the following command inside two containers in (1) TensorRT installed using deb and in (2) `nvcr.io/nvidia/tensorrt`. The big difference is the inclusion of the TensorRT static library.

```
ls -lha /lib/x86_64-linux-gnu/ | grep nvinfer
```

Deb install method:
```
lrwxrwxrwx 1 root root    19 Apr 26 22:21 libnvinfer.so -> libnvinfer.so.8.6.1
lrwxrwxrwx 1 root root    19 Apr 26 22:21 libnvinfer.so.8 -> libnvinfer.so.8.6.1
-rw-r--r-- 1 root root  226M Apr 26 22:21 libnvinfer.so.8.6.1
-rw-r--r-- 1 root root  957M Apr 26 22:21 libnvinfer_builder_resource.so.8.6.1
lrwxrwxrwx 1 root root    26 Apr 26 22:21 libnvinfer_plugin.so -> libnvinfer_plugin.so.8.6.1
lrwxrwxrwx 1 root root    26 Apr 26 22:21 libnvinfer_plugin.so.8 -> libnvinfer_plugin.so.8.6.1
-rw-r--r-- 1 root root   37M Apr 26 22:21 libnvinfer_plugin.so.8.6.1
-rw-r--r-- 1 root root   40M Apr 26 22:21 libnvinfer_plugin_static.a
-rw-r--r-- 1 root root  1.4G Apr 26 22:21 libnvinfer_static.a
```

Nvidia TensorRT container:
```
lrwxrwxrwx 1 root root    36 Jul  6 18:07 do_not_link_against_nvinfer_builder_resource -> libnvinfer_builder_resource.so.8.6.1
lrwxrwxrwx 1 root root    19 Apr 26 22:21 libnvinfer.so -> libnvinfer.so.8.6.1
lrwxrwxrwx 1 root root    19 Apr 26 22:21 libnvinfer.so.8 -> libnvinfer.so.8.6.1
-rw-r--r-- 1 root root  226M Apr 26 22:21 libnvinfer.so.8.6.1
-rw-r--r-- 1 root root  957M Apr 26 22:21 libnvinfer_builder_resource.so.8.6.1
lrwxrwxrwx 1 root root    28 Apr 26 22:21 libnvinfer_dispatch.so -> libnvinfer_dispatch.so.8.6.1
lrwxrwxrwx 1 root root    28 Apr 26 22:21 libnvinfer_dispatch.so.8 -> libnvinfer_dispatch.so.8.6.1
-rw-r--r-- 1 root root  945K Apr 26 22:21 libnvinfer_dispatch.so.8.6.1
lrwxrwxrwx 1 root root    24 Apr 26 22:21 libnvinfer_lean.so -> libnvinfer_lean.so.8.6.1
lrwxrwxrwx 1 root root    24 Apr 26 22:21 libnvinfer_lean.so.8 -> libnvinfer_lean.so.8.6.1
-rw-r--r-- 1 root root   31M Apr 26 22:21 libnvinfer_lean.so.8.6.1
lrwxrwxrwx 1 root root    26 Apr 26 22:21 libnvinfer_plugin.so -> libnvinfer_plugin.so.8.6.1
lrwxrwxrwx 1 root root    26 Apr 26 22:21 libnvinfer_plugin.so.8 -> libnvinfer_plugin.so.8.6.1
-rw-r--r-- 1 root root   37M Apr 26 22:21 libnvinfer_plugin.so.8.6.1
lrwxrwxrwx 1 root root    29 Apr 26 22:21 libnvinfer_vc_plugin.so -> libnvinfer_vc_plugin.so.8.6.1
lrwxrwxrwx 1 root root    29 Apr 26 22:21 libnvinfer_vc_plugin.so.8 -> libnvinfer_vc_plugin.so.8.6.1
-rw-r--r-- 1 root root  929K Apr 26 22:21 libnvinfer_vc_plugin.so.8.6.1
```

"
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZh_V,doganulus,"Can we re-evaluate the following dependencies in the build scripts too?

```
find_package(CUDA)
find_package(CUDNN)
```

TensorRT now says CuDNN is an optional dependency (so we can discard it, right?), and I think perception packages depend on `CUDAToolkit` (libraries) rather than `CUDA` (language&compiler) itself. This is another area we can save some space. 
"
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZq8d,oguzkaganozt,"I think these are all valuable insights as the dev image size mostly affected by CUDA and TensorRT dependencies. But if we can use `nvcr.io/nvidia/tensorrt` image then we would use at least version 23.05 and it requires driver version at least **530**. Also it means we will be using:

- NVIDIA CUDA® 12.1.1
- NVIDIA cuBLAS 12.1.3.1 
- NVIDIA cuDNN 8.9.1.23
- NVIDIA NCCL 2.18.1

Does that introduce any compatability issues in Autoware ? @mitsudome-r @xmfcx @esteve "
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZri6,oguzkaganozt,Just built and played rosbag replay simulation successfully with `nvcr.io/nvidia/tensorrt:23.05` and excluded `egm2008-1.pgm`. The size is now 14.2 Gb
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZv4O,esteve,@doganulus @oguzkaganozt AFAIK only having shared libraries should be fine
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZzEP,ambroise-arm,"> Does that introduce any compatability issues in Autoware ?

The current versions that Autoware is built with are defined at https://github.com/autowarefoundation/autoware/blob/main/amd64.env, so it would be a bump in version.
There is an issue to track work on validating the different packages with an update in the tensorrt verion: https://github.com/autowarefoundation/autoware.universe/issues/2330.
In parallel, there has been some work put into updating the cuda version already: https://github.com/autowarefoundation/autoware/pull/3684, although I don't know exactly what had been done and what remains."
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZhWY,oguzkaganozt,So how about first defining the ideal modular Ansible scheme and then refining the packages inside of each Ansible rule ?
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZhj7,doganulus,What is the structure you have in mind?
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZht8,kaspermeck-arm,"# OADK Meeting August 10th

## Development Environment (DE) validation

Validates ROS and up.

1. Colcon build
  - see if container can build Autoware or not

2. Run CI test locally on a machine to test new smaller DE container
  - if the pipeline passes, then the container should be OK (90%)
  - pretty much only tests building

3. Scenario simulator
  - https://autowarefoundation.github.io/autoware-documentation/main/tutorials/scenario-simulation/
  - regression testing
  - scenario simulator is used inside Web.Auto (from Tier IV) and runs scenarios defined by the ODD WG
    - Web.Auto is web-based and can't be run locally

4. Launch comprehensive launch script
  - planning simulator (not NVIDIA GPU)
    - https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/
  - `rosbag` replay (perception, localization)
    - https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/rosbag-replay-simulation/
  - AWSIM (simulation)
    - high threshold, compute and complexity
    - https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/digital-twin-simulation/awsim-tutorial/

Once 1-4 have been successfully run, the container has passed and is considered validated.

## Production Environment (PE) validation

Validates ROS and up. The PE is a subset of the DE.

1. Run the step 3 and 4 from the steps above
  - with and without NVIDIA support
  - simulator should run on a separate machine or container"
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZwSc,kaspermeck-arm,"# OADK Meeting August 17th

## Development Environment (DE) using NVCR container

There is an upper limit of 14GB container size in GitHub. Using `nvcr.io/nvidia/tensorrt:23.05` as a base, and with all build artifacts, it is `14.2GB`. Previously, some disk analysis has been done, see:
- https://github.com/orgs/autowarefoundation/discussions/2780

The next steps are:
1. reduce the container about another 1GB
2. test in the actual CI using the new container image
    - if this works, then we should be complete"
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZzMq,doganulus,"@oguzkaganozt @kaspermeck-arm 

Here is my container experiment. After installing the required CUDA libraries, CUDNN, and TensorRT using Nvidia debs on the ROS base image, I have removed their static libraries. That saved a great deal of disk space and the image is now 7.2G and can build Universe. 

Could you please check and test the following build and prebuilt images, if possible?

Container files: https://github.com/bounverif/autoware-istanbul/tree/main/containers
Containers: https://github.com/orgs/bounverif/packages?repo_name=autoware-istanbul

The prebuilt image, which includes build artifacts (~2.5G), is also now reduced below 12G. I believe this image would be similar to what @xmfcx wants to use for the CI workflow, as explained at https://github.com/autowarefoundation/autoware.universe/issues/4497.


"
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZ4pJ,kaspermeck-arm,"@doganulus - that's a great news, and it meets (and exceeds) our target!

I modified the Dockerfile slightly to build on Arm
```
 git diff
diff --git a/containers/autoware-build/Dockerfile b/containers/autoware-build/Dockerfile
index 08a70ad..afa9721 100644
--- a/containers/autoware-build/Dockerfile
+++ b/containers/autoware-build/Dockerfile
@@ -1,7 +1,7 @@
 # docker build . -t ghcr.io/bounverif/autoware:build -f docker/autoware-humble/build.dockerfile
 # docker run --rm -it ghcr.io/bounverif/autoware:build
 
-FROM amd64/ros:humble
+FROM ros:humble-ros-base-jammy

```
and tried building the container on Arm and it can't find some packages.
```
7.786 E: Unable to locate package cuda-minimal-build-12-2
7.786 E: Unable to locate package libcublas-dev-12-2
7.786 E: Unable to locate package libcurand-dev-12-2
7.786 E: Package 'libnvinfer-dev' has no installation candidate
7.786 E: Package 'libnvinfer-plugin-dev' has no installation candidate
7.786 E: Package 'libnvparsers-dev' has no installation candidate
7.786 E: Package 'libnvonnxparsers-dev' has no installation candidate
```

I haven't looked into the missing packages, any idea? Do they need to be added to _apt_?"
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZ5Vv,doganulus,[Nvidia](https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2204/sbsa/) didn't package them all for ARM yet. Only `nvidia-toolkit` libraries under `sbsa` tag and [they say](https://forums.developer.nvidia.com/t/availability-of-tensorrt-for-ubuntu-22-04-sbsa/244366/4) they will have TensorRT soon. 
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZ64d,kaspermeck-arm,@doganulus - according to [TensorRT Support Matrix](https://docs.nvidia.com/deeplearning/tensorrt/support-matrix/index.html#platform-matrix) `TensorRT 8.6.x` should be compatible with CUDA 12 on `sbsa`. Perhaps installable but not through `apt`?
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZ7As,doganulus,"As far as I understand, Nvidia does not support TensorRT on Ubuntu 22.04 (`sbsa`) yet. See Kenji's comment [here](https://github.com/autowarefoundation/autoware/pull/3084#discussion_r1160428947) to continue using 20.04 repos for `sbsa`. 

Could you please check the Ubuntu version inside the TensorRT container (`nvcr.io/nvidia/tensorrt:23.xx`) on an Arm server? I don't have any Arm server nearby. Is it `20.04` or `22.04`? 

Even if it's `20.04`, if we can download and copy shared libraries either from a tarball or a container, I think it would work. But it is surely much better if Nvidia officially supports TensorRT on `22.04` on `sbsa`."
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZ7Tv,kaspermeck-arm,"@doganulus - running the `nvcr.io/nvidia/tensorrt:23.07-py3` container on the AADP. It's based on Ubuntu 22.04 LTS! Does NVIDIA publish their Dockerfiles?

```
$ docker run -it --rm --gpus all nvcr.io/nvidia/tensorrt:23.07-py3

=====================
== NVIDIA TensorRT ==
=====================

NVIDIA Release 23.07 (build 63868013)
NVIDIA TensorRT Version 8.6.1
Copyright (c) 2016-2023, NVIDIA CORPORATION & AFFILIATES. All rights reserved.

Container image Copyright (c) 2023, NVIDIA CORPORATION & AFFILIATES. All rights reserved.

https://developer.nvidia.com/tensorrt

Various files include modifications (c) NVIDIA CORPORATION & AFFILIATES.  All rights reserved.

This container image and its contents are governed by the NVIDIA Deep Learning Container License.
By pulling and using the container, you accept the terms and conditions of this license:
https://developer.nvidia.com/ngc/nvidia-deep-learning-container-license

To install Python sample dependencies, run /opt/tensorrt/python/python_setup.sh

To install the open-source samples corresponding to this TensorRT release version
run /opt/tensorrt/install_opensource.sh.  To build the open source parsers,
plugins, and samples for current top-of-tree on master or a different branch,
run /opt/tensorrt/install_opensource.sh -b <branch>
See https://github.com/NVIDIA/TensorRT for more information.

root@ac34384f90bd:/workspace# uname -a
Linux ac34384f90bd 5.15.0-69-generic #76-Ubuntu SMP Fri Mar 17 17:25:19 UTC 2023 aarch64 aarch64 aarch64 GNU/Linux

root@ac34384f90bd:/workspace# cat /etc/os-release 
PRETTY_NAME=""Ubuntu 22.04.2 LTS""
NAME=""Ubuntu""
VERSION_ID=""22.04""
VERSION=""22.04.2 LTS (Jammy Jellyfish)""
VERSION_CODENAME=jammy
ID=ubuntu
ID_LIKE=debian
HOME_URL=""https://www.ubuntu.com/""
SUPPORT_URL=""https://help.ubuntu.com/""
BUG_REPORT_URL=""https://bugs.launchpad.net/ubuntu/""
PRIVACY_POLICY_URL=""https://www.ubuntu.com/legal/terms-and-policies/privacy-policy""
UBUNTU_CODENAME=jammy
```"
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AZ84t,ambroise-arm,"Looking at the ""NVIDIA TensorRT Container Versions"" paragraph at https://docs.nvidia.com/deeplearning/tensorrt/container-release-notes/index.html the 23.04 version of their container is the last one with ubuntu 20.04 (also with cuda 12 and tensorrt 8.6). Maybe using this version of the docker image while waiting for ubuntu 22.04 support is acceptable."
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4AaT-A,doganulus,"It seems Nvidia released TensorRT packages for Ubuntu 22.04 on sbsa last week:
https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2204/sbsa/
This must solve this issue."
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4Aatoe,oguzkaganozt,"To test this approach on the platform with a Cuda-enabled GPU we can try running
`ros2 launch lidar_centerpoint lidar_centerpoint.launch.xml`"
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4Aa4jc,ambroise-arm,"I tested building on AADP https://github.com/bounverif/autoware-istanbul/blob/main/containers/autoware-build/Dockerfile (changing `amd64/ros:humble` to `ros:humble-ros-base-jammy`, and `x86_64` to `sbsa`), with `Driver Version: 535.104.05   CUDA Version: 12.2` and the lidar_centerpoint package seems to launch nicely."
DevOps Dojo: Build & Run - DE and PE Implementation Discussion,D_kwDOAnasMc4AUjeX,2023-07-10T16:07:09Z,kaspermeck-arm,11,Answered,DC_kwDOAnasMc4Aa4q4,oguzkaganozt,That's great to hear @ambroise-arm . Could you share the container size on arm architecture also ?
PCD map aligment with world coordinates,D_kwDOAnasMc4AUkKB,2023-07-11T09:54:18Z,tomaszkapron,1,Answered,,,
PCD map aligment with world coordinates,D_kwDOAnasMc4AUkKB,2023-07-11T09:54:18Z,tomaszkapron,1,Answered,DC_kwDOAnasMc4AYkHF,Tanishq30052002,"Hi @tomaszkapron 
You can create the vector map with the tool you mentioned, there would be a option to select MGRS and other gnss parameters.

When you are done with it you can then download the map config and lanelet2 map.


And at the time of load, remember to change lat lon and type of lanelet2 parameter file.


I hope it will work."
PCD map aligment with world coordinates,D_kwDOAnasMc4AUkKB,2023-07-11T09:54:18Z,tomaszkapron,1,Answered,DC_kwDOAnasMc4AYlKo,tomaszkapron,"Hi @Tanishq30052002 
My problem is pcd file alignment with global coordinates. My PCD file has values from -200 to 200 in x and y. While the position that GNSS returns in euclidean space has values around (35000, 7600) which is correct according to the mGRS chunk I am at. 

PCD file does not go through any transformation when it is loaded to rviz, so its values need to be georeferenced. I am looking for a solution to this problem, transforming pcd file to the correct position in UTM or MGRS system."
PCD map aligment with world coordinates,D_kwDOAnasMc4AUkKB,2023-07-11T09:54:18Z,tomaszkapron,1,Answered,DC_kwDOAnasMc4AYlwH,Tanishq30052002,You need to create the map config file for the same. Mp it will resolve the issue.
PCD map aligment with world coordinates,D_kwDOAnasMc4AUkKB,2023-07-11T09:54:18Z,tomaszkapron,1,Answered,DC_kwDOAnasMc4AYoGN,tomaszkapron,"Could You point out where such a map config file is used in the code? As I see autoware does take pointcloud map as raw input. It does not go over any transformation. Even if such config would be used by autoware, how do I determine values for pcd map transformation so it matches the real-world coordinate system?"
Software WG Meeting 2023/07/11,D_kwDOAnasMc4AUkYf,2023-07-11T14:36:17Z,xmfcx,0,Unanswered,,,
Perception and Sensing WG Meeting 12/07/2023,D_kwDOAnasMc4AUk7o,2023-07-12T07:53:58Z,drwnz,0,Unanswered,,,
AutowareV2X: V2X communication module to realize connected autonomous vehicles,D_kwDOAnasMc4AUlJk,2023-07-12T11:42:03Z,yuasabe,0,Unanswered,,,
"Open AD Kit WG Meeting July 13, 2023",D_kwDOAnasMc4AUlKn,2023-07-12T12:02:55Z,oguzkaganozt,0,Unanswered,,,
API WG (07/12/2023),D_kwDOAnasMc4AUlNN,2023-07-12T12:48:25Z,davidc0619,1,Answered,,,
API WG (07/12/2023),D_kwDOAnasMc4AUlNN,2023-07-12T12:48:25Z,davidc0619,1,Answered,DC_kwDOAnasMc4AYlfn,yuasabe,"Thank you!
New discussion for the meeting: #3658 "
API WG Meeting (07/12/2023),D_kwDOAnasMc4AUlPm,2023-07-12T13:48:12Z,yuasabe,1,Answered,,,
API WG Meeting (07/12/2023),D_kwDOAnasMc4AUlPm,2023-07-12T13:48:12Z,yuasabe,1,Answered,DC_kwDOAnasMc4AYlE6,davidc0619,"As suggested, here is the new discussion. https://github.com/orgs/autowarefoundation/discussions/3662"
Announcing argument change in Autoware Launch for switching localization modes,D_kwDOAnasMc4AUloc,2023-07-13T00:53:50Z,kminoda,1,Answered,,,
Announcing argument change in Autoware Launch for switching localization modes,D_kwDOAnasMc4AUloc,2023-07-13T00:53:50Z,kminoda,1,Answered,DC_kwDOAnasMc4AYtI7,kminoda,We are going to merge above PRs in about 24 hours.
Pointcloud map and vector map for the latest Autoware,D_kwDOAnasMc4AUl07,2023-07-13T07:20:06Z,Kim-mins,2,Answered,,,
Pointcloud map and vector map for the latest Autoware,D_kwDOAnasMc4AUl07,2023-07-13T07:20:06Z,Kim-mins,2,Answered,DC_kwDOAnasMc4AYn9P,RogerJung,"Hello, I am facing a similar problem currently.

Here is a helpful toolkit implemented by Tier4: [https://tools.tier4.jp/vector_map_builder_ll2/](https://tools.tier4.jp/vector_map_builder_ll2/)

But I met another problem when I tried to import the .pcd file in Carla/HDMaps/TownXX.pcd
![img](https://i.imgur.com/ZvHpadS.png)
It looks like a point cloud format error, but I haven't found a solution to solve it."
Pointcloud map and vector map for the latest Autoware,D_kwDOAnasMc4AUl07,2023-07-13T07:20:06Z,Kim-mins,2,Answered,DC_kwDOAnasMc4AYp7h,Kim-mins,"Well, I already tried the tool you mentioned and I also faced the same issue.
But when I loaded the map [here](https://tier4.github.io/AWSIM/GettingStarted/QuickStartDemo/#launching-autoware)(Nishishinjuku), I could successfully load the map.
I don't know why, but it seems like, for Carla maps, there were some errors on conversion process or the conversion program makes somewhat incomplete map. (but I cannot sure since I do not have any access to the program)"
Pointcloud map and vector map for the latest Autoware,D_kwDOAnasMc4AUl07,2023-07-13T07:20:06Z,Kim-mins,2,Answered,DC_kwDOAnasMc4AYvJP,mitsudome-r,"Vector Map Builder doesn't support binary-compressed format at the moment.
Try converting your PCD file to either binary or ascii format.

If you are using Ubuntu, run the following commands in your terminal to convert
```
sudo apt install pcl-tools
pcl_convert_pcd_ascii_binary pointcloud_map.pcd pointcloud_map_binary.pcd 1
```"
Pointcloud map and vector map for the latest Autoware,D_kwDOAnasMc4AUl07,2023-07-13T07:20:06Z,Kim-mins,2,Answered,DC_kwDOAnasMc4AYvWQ,Kim-mins,"Thank you @mitsudome-r! Now I can load .pcd map on the Vector Map Builder!
By the way, I have one question regarding the map builder tool.
I want to generate open street map file (lanelet2) for Autoware and I wonder if the map builder tool could help to generate it.
If not, do you have any recommendations for me for generating open street map?

Thank you in advance!"
Pointcloud map and vector map for the latest Autoware,D_kwDOAnasMc4AUl07,2023-07-13T07:20:06Z,Kim-mins,2,Answered,DC_kwDOAnasMc4AYwbQ,mitsudome-r,"@Kim-mins 
Vector Map Builder is the tool is to create the lanelet2 map. You can manually draw lanes, polygons, and all other traffic rule annotation using the tool. Check out the following pages to learn how to use the tool:
- Introduction to the tool: https://docs.web.auto/en/user-manuals/vector-map-builder/introduction
- Creating a lanelet2 map file: https://docs.web.auto/en/user-manuals/vector-map-builder/how-to-use/edit-maps#creation-of-a-new-lanelet2-map
- Drawing lanes: https://docs.web.auto/en/user-manuals/vector-map-builder/how-to-use/edit-maps#creation-of-lanelet"
Pointcloud map and vector map for the latest Autoware,D_kwDOAnasMc4AUl07,2023-07-13T07:20:06Z,Kim-mins,2,Answered,DC_kwDOAnasMc4AYxcS,Kim-mins,"Thank you for providing guidelines @mitsudome-r!!
Actually, I wonder if there's a tool for generating .osm file automatically(from .pcd file or .xodr file), since I'm not that familiar with lanelet file.
Following your suggestion, I also tried to open [Town1.osm](https://drive.google.com/drive/folders/1cQxiEteKMwZQZSHuotd4Bw1smzfOG67k) and modify it on Vector Map Builder, since it does not contain any information regarding traffic lights, stop lines, but it fails while loading the map with the error below. Could you please tell me anything you know about it? (lanelet2_map (1).osm is the lanelet2 file name)
![image](https://github.com/autowarefoundation/autoware/assets/50267797/ad75577f-26c3-4ccc-88eb-cadf5eac568e)
"
Pointcloud map and vector map for the latest Autoware,D_kwDOAnasMc4AUl07,2023-07-13T07:20:06Z,Kim-mins,2,Answered,DC_kwDOAnasMc4AYtBu,evshary,"Based on the question, is there any documentation about the change in the Autoware map format?
I can use the Carla map in Autoware 2023.02 version, but failed to use the same map in 2023.06.
I guess this is because of the change in the Autoware map format requirement. Does anyone have any idea about it?"
Pointcloud map and vector map for the latest Autoware,D_kwDOAnasMc4AUl07,2023-07-13T07:20:06Z,Kim-mins,2,Answered,DC_kwDOAnasMc4AYvJA,mitsudome-r,"@evshary There were changes in a parameter in map_loader package to handle georeference information from this [PR](https://github.com/autowarefoundation/autoware.universe/pull/3492/files).
If you are launch a launch file in `autware_launch` package, try changing projector type to `local` in [this file](https://github.com/autowarefoundation/autoware_launch/blob/4daf918125090d656dea95405fad4b8c8b21bd18/autoware_launch/config/map/lanelet2_map_loader.param.yaml#L3). 

By the way, is there a link for PCD maps? The [link](https://github.com/hatem-darweesh/op_agent/tree/ros2/autoware-contents/maps) posted in the original question doesn't seem to contain the PCD maps. I might be able to help more if I have the access to PCD map as well.
"
Pointcloud map and vector map for the latest Autoware,D_kwDOAnasMc4AUl07,2023-07-13T07:20:06Z,Kim-mins,2,Answered,DC_kwDOAnasMc4AYvOt,evshary,"@mitsudome-r Really thanks for your help! I'll check the projector type.
Here is the lanelet2 and the PCD map files from Hatem's package.
lanelet2: https://drive.google.com/drive/folders/1cQxiEteKMwZQZSHuotd4Bw1smzfOG67k
PCD: https://drive.google.com/drive/folders/1I30AqkGveeWOc3jCzdkWsz9J6w1fkt9v
I used the Town01, but all the maps have the same issue."
Pointcloud map and vector map for the latest Autoware,D_kwDOAnasMc4AUl07,2023-07-13T07:20:06Z,Kim-mins,2,Answered,DC_kwDOAnasMc4AYwZw,mitsudome-r,"@evshary I just tried your map after changing the parameter as I explained in my [previous comment](https://github.com/orgs/autowarefoundation/discussions/3660#discussioncomment-6484544), and I was able to run the [planning_simulator](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/) demo.
![image](https://github.com/autowarefoundation/autoware/assets/43976834/b41f3ecf-76a9-49ba-9430-1e09738fa78b)
"
Pointcloud map and vector map for the latest Autoware,D_kwDOAnasMc4AUl07,2023-07-13T07:20:06Z,Kim-mins,2,Answered,DC_kwDOAnasMc4AYxeo,evshary,"Thank you, @mitsudome-r 
It works well. Your solution helps me a lot!"
which dependency project should be put into rosdistro?,D_kwDOAnasMc4AUl1d,2023-07-13T07:33:43Z,felixf4xu,0,Unanswered,,,
Use Cases - Connected (V2V) and AUTOWARE SW,D_kwDOAnasMc4AUmaH,2023-07-13T20:43:48Z,davidc0619,5,Answered,,,
Use Cases - Connected (V2V) and AUTOWARE SW,D_kwDOAnasMc4AUmaH,2023-07-13T20:43:48Z,davidc0619,5,Answered,DC_kwDOAnasMc4AY_g8,mitsudome-r,"Here are some of additional use cases for V2X that I can think of:
- For cargo delivery use cases, we had situation where we want the vehicle to communicate with infrastructure to open a roller shutter to enter a warehouse.
- For Autoware installed mobile robot use case, we had situation where we wanted to communicate with evaluators to go to different floor. (This is a rare use case for a vehicle so we could perhaps ignore this, but I'm sharing it just in case)"
Use Cases - Connected (V2V) and AUTOWARE SW,D_kwDOAnasMc4AUmaH,2023-07-13T20:43:48Z,davidc0619,5,Answered,DC_kwDOAnasMc4AY_oW,isamu-takagi,"These use cases were discussed in [this issue](https://github.com/autowarefoundation/autoware.universe/issues/2703), but now I think it's better to unify the V2X discussion. In this proposal, an ID is assigned to the entry and exit lanes. I think it can be applied to elevators by assigning this ID to the floor."
Use Cases - Connected (V2V) and AUTOWARE SW,D_kwDOAnasMc4AUmaH,2023-07-13T20:43:48Z,davidc0619,5,Answered,DC_kwDOAnasMc4AZecK,yuasabe,"The [Strategic Innovation Promotion Program (SIP) and its division on Autonomous Driving (SIP Automated Driving for Universal Services)](https://en.sip-adus.go.jp/sip/) in Japan has previously compiled a list of use-cases for Cooperative-ITS.
The whole document is [provided here](https://en.sip-adus.go.jp/rd/rddata/usecase.pdf), but a list of the considered use cases is presented below.

The use cases were first categorized into three groups based on what kind of information must be shared.

1. Use cases in which information outside the detection range of on-board sensors must be obtained
  - Merging assistance by preliminary acceleration and deceleration
  - Merging assistance by targeting the gap on the main lane
  - Driving assistance by using traffic signal information (V2I)
  - Driving assistance by using traffic signal information (V2N)
  - Collision avoidance assistance when a vehicle ahead stops or decelerates suddenly
  - Driving assistance based on intersection information (V2V)
  - Driving assistance based on intersection information (V2I)
  - Collision avoidance assistance by using hazard information
  - Driving assistance by notification of abnormal vehicles
  - Driving assistance by notification of wrong-way vehicles
  - Driving assistance based on traffic congestion information
  - Traffic congestion assistance at branches and exits
  - Driving assistance based on hazard information
  - Driving assistance based on emergency vehicle information
2. Use cases in which information about the ego-vehicle must be provided
  - Request for rescue (e-Call)
  - Collection of information to optimize the traffic flow
  - Update and automatic generation of maps
  - Distribution of dynamic map information
3. Use cases in which intention-sharing based on V2V and V2I must be ensured
  - Cooperative merging assistance with vehicles on the main lane by roadside control
  - Merging assistance based on negotiations between vehicles
  - Lane change assistance when the traffic is heavy
  - Entry assistance from non-priority roads to priority roads during traffic congestion
  - Unmanned platooning of following vehicles by electronic towbar
  - Adaptive cruise control and manned platooning of following vehicles using adaptive cruise control
  - [Teleoperation] Operation and management of mobility service cars

I think many of the use cases we consider for V2X applications can be categorized into the above use cases. 
What is important is that the use cases of C-ITS need to provide additional value (safety, efficiency, convenience, cost-performance, etc.) to conventional standalone autonomous driving systems in order for them to be considered worthwhile for investigation."
Use Cases - Connected (V2V) and AUTOWARE SW,D_kwDOAnasMc4AUmaH,2023-07-13T20:43:48Z,davidc0619,5,Answered,DC_kwDOAnasMc4AZe_z,mitsudome-r,"Maybe for each use cases, it would be nice to draw a sequence diagram to show a communication between each component and Autoware, just like in [this diagram](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/use-cases/initialize-pose/). "
Use Cases - Connected (V2V) and AUTOWARE SW,D_kwDOAnasMc4AUmaH,2023-07-13T20:43:48Z,davidc0619,5,Answered,DC_kwDOAnasMc4Aad_E,yuasabe,"I've added some sequence diagrams here for the following use cases: https://tlab-wide.github.io/AutowareV2X/pr-48/design/use-cases/

- Blindspot VRU Detection using Collective Perception
- CAMs betweens CAVs
- I2V Traffic Light Information (TLI) Sharing

While making these sequence diagrams, it became tricky to determine how specific or detailed they should be. Since our final goal would be to define the interfaces between Autoware and standard-specific adapters, I believe the diagrams should be as specific as possible on the Autoware-side, but that would make it overly complicated. It would be nice if we can discuss more in the next meeting!"
Use Cases - Connected (V2V) and AUTOWARE SW,D_kwDOAnasMc4AUmaH,2023-07-13T20:43:48Z,davidc0619,5,Answered,DC_kwDOAnasMc4Aa6An,damodarRohit,"I am adding another sequence diagram here on the handshaking required for Platooning using V2V communication. I was not able to find specific messages related to Platooning in the V2X standards, so these are kept generic. It would be great to have inputs on this and the sequence diagram in general.

![V2X Use Case_Platooning](https://github.com/autowarefoundation/autoware/assets/122939583/0b37a122-96b3-4786-8b50-9386bb08d068)

 
"
I can't integrate Robosense Lidar with autoware.universe,D_kwDOAnasMc4AUmiH,2023-07-14T01:41:30Z,mosss-code,1,Answered,,,
I can't integrate Robosense Lidar with autoware.universe,D_kwDOAnasMc4AUmiH,2023-07-14T01:41:30Z,mosss-code,1,Answered,DC_kwDOAnasMc4AYlbX,Shin-kyoto,"@mosss-code 
Can you share your code for RS16? We need more information to help you.
And please share the following topics.
- What did you do for integrating it?
- Please share command that you typed and error message.
- Please share commit hash of autoware.universe."
I can't integrate Robosense Lidar with autoware.universe,D_kwDOAnasMc4AUmiH,2023-07-14T01:41:30Z,mosss-code,1,Answered,DC_kwDOAnasMc4AYlew,mosss-code,"First of all, I used the official driver [rslidar_sdk](https://github.com/RoboSense-LiDAR/rslidar_sdk.git) provided by Robosense, because it will directly generate point cloud data, I directly passing the input topic into this cropbox component.

     nodes.append(
        ComposableNode(
            package=""pointcloud_preprocessor"",
            plugin=""pointcloud_preprocessor::CropBoxFilterComponent"",
            name=""crop_box_filter_self"",
            remappings=[
                (""input"", ""/rslidar_points),
                (""output"", ""self_cropped/pointcloud_ex""),
            ],
            parameters=[cropbox_parameters],
            extra_arguments=[{""use_intra_process_comms"": LaunchConfiguration(""use_intra_process"")}],
        )
    )


the /rslidar_points does have data coming in, but the self_cropped/pointcloud_ex topic doesn't have any coming out.
The rslidar_points only gets XYZIRT or XYZIR by default. But  [this document](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-architecture/sensing/data-types/point-cloud/) said the pointcloud should in this format XYZIRCADT. I'm guessing that's why it didn't work. 
Later, I tried to use the [ros_rslidar](https://github.com/RoboSense-LiDAR/ros_rslidar.git) driver previously maintained by Robosense, and asked him to publish the /velodyne_packets topic for velodyne_pointcloud to accept and process, but it still had no effect. "
I can't integrate Robosense Lidar with autoware.universe,D_kwDOAnasMc4AUmiH,2023-07-14T01:41:30Z,mosss-code,1,Answered,DC_kwDOAnasMc4AYlo3,Shin-kyoto,"> But [this document](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-architecture/sensing/data-types/point-cloud/) said the pointcloud should in this format XYZIRCADT. I'm guessing that's why it didn't work.

Yes. You need to convert pointcloud type to XYZIRCADT format. Did you try it?"
I can't integrate Robosense Lidar with autoware.universe,D_kwDOAnasMc4AUmiH,2023-07-14T01:41:30Z,mosss-code,1,Answered,DC_kwDOAnasMc4AYl9a,mosss-code,"Yes,I tried it，but I can't tell if what I'm doing is correct.
The rslidar_sdk only gets XYZIRT or XYZIR by default.
So I tried to use the [ros_rslidar](https://github.com/RoboSense-LiDAR/ros_rslidar.git) driver previously maintained by Robosense to publish the /velodyne_packets topic for acceptance and processing by velodyne_pointcloud in autoware.universe.
But the rslidar_msgs:
```
builtin_interfaces/Time stamp
uint8[1248] data
```
velodyne_msgs:
```
builtin_interfaces/Time stamp
uint8[1206] data
```
I tried to convert rslidar_msgs to velodyne_msgs, and then run the driver and velodyne_pointcloud, but the error is reported as follows
`[WARN] [1688464712.176528941] [sensing.lidar.top.velodyne_convert_node]: skipping invalid VLS-128 packet: block 0 header value is 43605`"
I can't integrate Robosense Lidar with autoware.universe,D_kwDOAnasMc4AUmiH,2023-07-14T01:41:30Z,mosss-code,1,Answered,DC_kwDOAnasMc4AYpMA,J-xinyu,"I'm trying to make this work as well, and would very much look forward to a step by step tutorial from you if you succeed."
I can't integrate Robosense Lidar with autoware.universe,D_kwDOAnasMc4AUmiH,2023-07-14T01:41:30Z,mosss-code,1,Answered,DC_kwDOAnasMc4AYvh6,zulfaqar-azmi-t4,"(your changes here is correct, but use `*/pointcloud` instead of `*/pointcloud_ex`). Also, there are two options that you can take.
1. it is a bit complicated, but you can modify the `rslidar_sdk` directly to output `XYZIRCADT` data 
2. Bypass some node (comment out `RingOutlierFilter` and `DistortionCorrector` nodes)"
I can't integrate Robosense Lidar with autoware.universe,D_kwDOAnasMc4AUmiH,2023-07-14T01:41:30Z,mosss-code,1,Answered,DC_kwDOAnasMc4AZKTn,J-xinyu,"How did you convert rslidar_msgs to velodyne msgs and publish it. I am also now looking to integrate Robosense into autoware, any help would be greatly appreciated"
I can't integrate Robosense Lidar with autoware.universe,D_kwDOAnasMc4AUmiH,2023-07-14T01:41:30Z,mosss-code,1,Answered,DC_kwDOAnasMc4AZLjP,lhakim85,"maybe this issue related to this topic
`https://github.com/autowarefoundation/autoware.universe/issues/3827`"
2023-07-17 ODD working group weekly meeting (149),D_kwDOAnasMc4AUoy4,2023-07-17T06:59:43Z,Igata-ctrl,1,Answered,,,
2023-07-17 ODD working group weekly meeting (149),D_kwDOAnasMc4AUoy4,2023-07-17T06:59:43Z,Igata-ctrl,1,Answered,DC_kwDOAnasMc4AYrQd,mitsudome-r,"I have tested the prototype scenarios for MORAI highway environment, and it seems like the failure is due to the fact that some lanes are set as non lane chageable lanes. I have modified the lanelet2 and confirmed that it works if I change them to lane changeable lanes. 
[lanelet2_map_fixed.zip](https://github.com/autowarefoundation/autoware/files/12070574/lanelet2_map_fixed.zip)

I have posted the question to the Simulation WG in [this issue](https://github.com/autowarefoundation/autoware-projects/issues/66). 
"
2023-07-17 ODD working group weekly meeting (149),D_kwDOAnasMc4AUoy4,2023-07-17T06:59:43Z,Igata-ctrl,1,Answered,DC_kwDOAnasMc4AYu5w,Igata-ctrl,"Thanks, Mitsudome-san,
I have loaded the new map you kindly modified to the CI/CD pipeline and tested the prototype scenario with the map and confirmed that EGO changes lane as intended. Thanks!"
Software WG Meeting 2023/07/18,D_kwDOAnasMc4AUpov,2023-07-18T05:59:38Z,mitsudome-r,0,Unanswered,,,
2023-07-19 Simulation Working group Meeting,D_kwDOAnasMc4AUpvz,2023-07-18T08:36:32Z,WJaworskiRobotec,0,Unanswered,,,
What is your laptop's model (specification) for use Autoware.AI.,D_kwDOAnasMc4AUqaz,2023-07-19T02:07:20Z,fiwz789,1,Answered,,,
What is your laptop's model (specification) for use Autoware.AI.,D_kwDOAnasMc4AUqaz,2023-07-19T02:07:20Z,fiwz789,1,Answered,DC_kwDOAnasMc4AYvLk,maxime-clem,"There should not be any issue with the G15 5520 as it is ""certified"" to work with Ubuntu (https://ubuntu.com/certified/202111-29683), although it is only certified for `20.04`.
For `18.04` you can check this list https://ubuntu.com/certified/laptops?q=&limit=20&release=18.04+LTS&offset=0 and make sure the laptop has enough RAM and a powerful GPU."
What is your laptop's model (specification) for use Autoware.AI.,D_kwDOAnasMc4AUqaz,2023-07-19T02:07:20Z,fiwz789,1,Answered,DC_kwDOAnasMc4AZOEg,fiwz789,Thank you very much for your help. <3
Clarify update rules for component interfaces,D_kwDOAnasMc4AUqdd,2023-07-19T03:38:29Z,isamu-takagi,3,Answered,,,
Clarify update rules for component interfaces,D_kwDOAnasMc4AUqdd,2023-07-19T03:38:29Z,isamu-takagi,3,Answered,DC_kwDOAnasMc4AYvIO,isamu-takagi,"One way is to forbid the incompatible change and create a new interface instead, and keep the old interface for a period of time.

- Pros
    - It doesn't affect your code at all.
- Cons
    - The interface is duplicated.
    - The interface type (msg or srv) is also duplicated.
- Others
    - Need to decide how long you want to keep the old interface.

![discussions-3668-interface-update-plan1](https://github.com/autowarefoundation/autoware/assets/43976882/5fb746a1-3014-4da2-904e-cb09b88dd64a)
"
Clarify update rules for component interfaces,D_kwDOAnasMc4AUqdd,2023-07-19T03:38:29Z,isamu-takagi,3,Answered,DC_kwDOAnasMc4AYvTF,evshary,"Also, it would be great if we can warn users while they are using the old interface, but I don't know how to show the message better."
Clarify update rules for component interfaces,D_kwDOAnasMc4AUqdd,2023-07-19T03:38:29Z,isamu-takagi,3,Answered,DC_kwDOAnasMc4AYx6u,isamu-takagi,"Other way is to create an interface class in C++ or python instead of using ROS messages directly.
- Pros
     - It doesn't affect code after introducing the interface class.
     - The interface and interface type are unified to the latest.
- Cons
    - You have to create a type adapter for each update.
    - Complicates the structure of the interface.
- Others
    - Need to decide how long you want to keep the old interface.

![discussions-3668-interface-update-plan2](https://github.com/autowarefoundation/autoware/assets/43976882/6cf2cd15-2677-46c5-b5b2-3c9572159438)
"
Clarify update rules for component interfaces,D_kwDOAnasMc4AUqdd,2023-07-19T03:38:29Z,isamu-takagi,3,Answered,DC_kwDOAnasMc4AZT24,isamu-takagi,"This is a way to version both messages and topics. The bottom side is when old messages can be generated from new messages.
![discussions-3668-interface-update-plan-main](https://github.com/autowarefoundation/autoware/assets/43976882/7b8ae0df-1535-4fed-8c1c-d204dceaaa1b)
"
Clarify update rules for component interfaces,D_kwDOAnasMc4AUqdd,2023-07-19T03:38:29Z,isamu-takagi,3,Answered,DC_kwDOAnasMc4AZT68,evshary,"Out of curiosity, does the MessageDev really exist in Release v1?
I think it makes sense to have MessageDev in Develop for v2 and Develop for v3 but not sure why in Release v1.

Anyway, I think the design is quite nice and it only needs an extra converter while bumping to a new version.
Although it might increase the latency, I think it's acceptable.
Also, we could add some warning messages in the converter to warn users that MessageV1 will be EOL if they're using it.
"
Clarify update rules for component interfaces,D_kwDOAnasMc4AUqdd,2023-07-19T03:38:29Z,isamu-takagi,3,Answered,DC_kwDOAnasMc4AZUBL,isamu-takagi,"> Out of curiosity, does the MessageDev really exist in Release v1?

MessageDev is always provided for packages that follow the latest version. MessageV1 can be thought of as a snapshot of the MessageDev at the v1 release."
Clarify update rules for component interfaces,D_kwDOAnasMc4AUqdd,2023-07-19T03:38:29Z,isamu-takagi,3,Answered,DC_kwDOAnasMc4AaZr3,isamu-takagi,"REP-2011 Evolving Message Types
https://discourse.ros.org/t/rfc-rep-2011-evolving-message-types/27006"
Clarify update rules for component interfaces,D_kwDOAnasMc4AUqdd,2023-07-19T03:38:29Z,isamu-takagi,3,Answered,DC_kwDOAnasMc4Ab8cD,isamu-takagi,"We created new discussion of proposal for maintain interface compatibility.
https://github.com/orgs/autowarefoundation/discussions/3922"
Clarify update rules for component interfaces,D_kwDOAnasMc4AUqdd,2023-07-19T03:38:29Z,isamu-takagi,3,Answered,DC_kwDOAnasMc4AYvIb,isamu-takagi,"If you have any requests and use cases regarding interface updates, please post them in this thread."
Clarify update rules for component interfaces,D_kwDOAnasMc4AUqdd,2023-07-19T03:38:29Z,isamu-takagi,3,Answered,DC_kwDOAnasMc4AY1ZG,xmfcx,"@isamu-takagi thanks for working on this and opening up this discussion!

> add interface (from the table)

Can you elaborate this further?

- Adding a new message type
- Publishing a new topic using an existing message type

> add field
> add constant

Adding a new field to an existing message would change its signature.
If compiled along with Autoware, it would still compile and work.

But there might be some [ABI compatibility](https://en.wikipedia.org/wiki/Application_binary_interface) issues because of the changed signatures for pre-compiled/distributed old/new messages.

I've lived issue when trying to backport something in the ros2 messages.
- https://github.com/ros2/common_interfaces/pull/170#issuecomment-989854441

**Edit:** I've just seen your remarks on this:

> Note that it is not compatibility for ROSBAG etc. because the binary representation of ROSIDL is different

Maybe we should also add a column for ABI compatibility too."
Clarify update rules for component interfaces,D_kwDOAnasMc4AUqdd,2023-07-19T03:38:29Z,isamu-takagi,3,Answered,DC_kwDOAnasMc4AY7wd,isamu-takagi,"@xmfcx  Thank you. I updated the table. 

> Can you elaborate this further?

Add ""new/exsiting message type"" for ""add interface"".

> Maybe we should also add a column for ABI compatibility too.

Add data compatibility column."
Which version of Carla adapt autoware(humble)?,D_kwDOAnasMc4AUqj9,2023-07-19T07:10:49Z,Autostone-c,0,Unanswered,,,
Reference Design WG Meeting (07/19/2023),D_kwDOAnasMc4AUqlW,2023-07-19T07:38:53Z,chishengshih,1,Answered,,,
Reference Design WG Meeting (07/19/2023),D_kwDOAnasMc4AUqlW,2023-07-19T07:38:53Z,chishengshih,1,Answered,DC_kwDOAnasMc4AYwdg,chishengshih,"Meeting Notes:
- Adding Racing car to reference platform 
- testing and standard. E.g., Rahul form FP
- Tier4 releases Level 4 guideline:
  - [Announcement](https://www.prnewswire.com/news-releases/announcement-of-the-release-of-guidelines-for-customizing-level-4-commercial-autonomous-vehicles-301861059.html?tc=eml_cleartime)
  - [English Version here](https://tinyurl.com/9db3r4x4)

- Rohit from DanLaw: [slide](https://docs.google.com/presentation/d/1XPJfL1LB5E3Wdm5qt4ZlarXiIKwz5Yx9/edit?usp=drive_link&ouid=105742989668577611888&rtpof=true&sd=true)
  - Autonomous Driving Stack on Jetson Orin platform
  - HW + SW Stack
  - Support LiDAR on Jetson: VLP-16
  - Ublox deadreckoning GNSS+IMU - ROS2
  - Remote monitoring and control on a local network: wired network. Are working on wireless dedicated network.
  - Challenges:
    - Jetson only support Ubuntu 20, which is not compatible with Autoware.universe. Docker is used.
    - Cannot use lidar_centerpoint due to GPU driver on Jetson, using 'lidar_centerpoint_tvm'
    - Contact rohitd@danlawinc.com  for more information.
  
- pr-405: [link](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-concepts/difference-from-ai-and-auto/)
  - Prefer not having PDF document to edit/test."
Localization & Mapping WG Meeting 19/07/2023,D_kwDOAnasMc4AUqlj,2023-07-19T07:41:57Z,n-patiphon,0,Unanswered,,,
Suppress spelling mistakes in Autoware with GitHub Actions,D_kwDOAnasMc4AUqn4,2023-07-19T08:33:19Z,kminoda,0,Unanswered,,,
Colcon Build package failed :sampler_common,D_kwDOAnasMc4AUq4I,2023-07-19T14:02:42Z,Hensbag,2,Answered,,,
Colcon Build package failed :sampler_common,D_kwDOAnasMc4AUq4I,2023-07-19T14:02:42Z,Hensbag,2,Answered,DC_kwDOAnasMc4AYwTq,takayuki5168,@maxime-clem Could you check please.
Colcon Build package failed :sampler_common,D_kwDOAnasMc4AUq4I,2023-07-19T14:02:42Z,Hensbag,2,Answered,DC_kwDOAnasMc4AYwaA,maxime-clem,"I cannot reproduce this issue and after looking at the code, I cannot see any problem that could cause this error.
I recommend trying a clean build after `rm build install -rf`.
Otherwise, since the error comes from linking the tests, you can try building while skipping the tests with option `--catkin-skip-building-tests`."
Colcon Build package failed :sampler_common,D_kwDOAnasMc4AUq4I,2023-07-19T14:02:42Z,Hensbag,2,Answered,DC_kwDOAnasMc4AYwy4,Hensbag,Thank you for the quick response after rebooting my computer none of the packages failed only had stderr output  
2023-07-20 Racing Working Group Meeting,D_kwDOAnasMc4AUrGS,2023-07-19T19:03:31Z,pojenwang,1,Answered,,,
2023-07-20 Racing Working Group Meeting,D_kwDOAnasMc4AUrGS,2023-07-19T19:03:31Z,pojenwang,1,Answered,DC_kwDOAnasMc4AY-zu,J-xinyu,I would appreciate it if you could provide a tutorial on how to deploy autoware on F1Tenth
YOLOv3 no detection boxes,D_kwDOAnasMc4AUrYx,2023-07-20T05:01:07Z,liangzhiqiang-lzq,0,Unanswered,,,
Planning&Control WG Meeting 2023/07/20,D_kwDOAnasMc4AUreD,2023-07-20T07:13:53Z,mehmetdogru,1,Answered,,,
Planning&Control WG Meeting 2023/07/20,D_kwDOAnasMc4AUreD,2023-07-20T07:13:53Z,mehmetdogru,1,Answered,DC_kwDOAnasMc4AYyEZ,ahmeddesokyebrahim,"`routing_no_drivable_lane_when_module_enabled`:
Issue : https://github.com/autowarefoundation/autoware.universe/issues/4307
PR : https://github.com/autowarefoundation/autoware.universe/pull/4308"
Can't open planning sim,D_kwDOAnasMc4AUrpz,2023-07-20T11:06:44Z,Hensbag,1,Answered,,,
Can't open planning sim,D_kwDOAnasMc4AUrpz,2023-07-20T11:06:44Z,Hensbag,1,Answered,DC_kwDOAnasMc4AYyoI,maxime-clem,"The error seems to be this one:
```
[ERROR] [launch]: Caught exception in launch (see debug for traceback): launch configuration 'object_recognition_prediction_map_based_prediction_param_path' does not exist
```
Such issue is usually caused by a mismatch between the `autoware.universe` and the `autoware_launch` repositories.
Make sure all of your branches are up to date (you can use `vcs pull src` in your workspace or `rm src/* -rf && vcs import src < autoware.repos`). "
Can't open planning sim,D_kwDOAnasMc4AUrpz,2023-07-20T11:06:44Z,Hensbag,1,Answered,DC_kwDOAnasMc4AYzZg,Hensbag,"thanks a lot,now I can open planning sim."
"Open AD Kit Working Group Meeting, July 20, 2023",D_kwDOAnasMc4AUrth,2023-07-20T12:19:28Z,HamburgDave,0,Unanswered,,,
Mapora: Georeferenced Point Cloud Generation Tool,D_kwDOAnasMc4AUry9,2023-07-20T14:09:47Z,ataparlar,0,Unanswered,,,
Localization Tests - Yabloc and NDT Comparison,D_kwDOAnasMc4AUsHf,2023-07-20T23:53:31Z,StepTurtle,2,Answered,,,
Localization Tests - Yabloc and NDT Comparison,D_kwDOAnasMc4AUsHf,2023-07-20T23:53:31Z,StepTurtle,2,Answered,DC_kwDOAnasMc4AY0Hv,KYabuuchi,"Thank you for your report! It is very insightful :smile:  I will answer your questions.

> After producing wrong result with high errors, Yabloc starts producing good results on its own again. In my experience, this was not the case for NDT, and it required intervention from the user.

Indeed, it is easier for YabLoc to recover from inaccurate estimates compared to NDT. The reason lies in YabLoc's utilization of a particle filter, which allows it to maintain multiple self-position candidates. Even if almost particles temporarily converge to incorrect locations, as long as some particles remain in the correct location, the system can recover. Moreover, incorporating GNSS information also contributes to recoverance.

> Yabloc can produce incorrect results when there are vehicles in front of or around it, and similar outcomes can be expected in heavy traffic scenarios. Perhaps transitioning to a multi-camera system could resolve this issue.

Yes, YabLoc's performance may degrade when there are vehicles in front of or surrounding the ego vehicle. There are two main factors contributing to this issue. 
1. The availability of road markings decreases, which negatively impacts localization performance. Employing multiple cameras might improve this situation.  :+1: 
2.  When selecting road regions based on Graph-Segmentation results, there is a possibility of mistakenly identifying the rear of vehicles as part of the road surface. This particular issue cannot be resolved solely by using multiple cameras, and improvements in graph segmentation or adopting a CNN-based road surface recognition method would be necessary.

> We can see error of Yabloc with overlay of lanelet2. Is there a numeric error metric for Yabloc to see the instant error? If there is, could we compare with Ndt somehow.

There is currently no numerical metric to quantify the misalignment observed in the overlay images. If you have any ideas on how to achieve this, please share them with me. :pray:

> In my lanelet2 map there is no bicycle roads but they are seen on image. Is it affect the accuracy a lot?

Incorporating bicycle lanes in lanelet2 could enhance accuracy. However, the absence of bicycle lanes would not necessarily cause critical errors.  If you think the accuracy is insufficient, I recommend adding them to lanelet2.

> Compared to other parts, Yabloc performed poorly on slopes, what could be the reason?

YabLoc projects the road markings extracted from images onto a horizontal plane. This discrepancy between the actual slopes and the horizontal plane projection likely causes the errors observed on slopes.  :cry:  [Please check this code](https://github.com/autowarefoundation/autoware.universe/blob/fc5ec80d9ffc17fb02b87b2fc56dd2fd2876b90e/localization/yabloc/yabloc_image_processing/src/segment_filter/segment_filter_core.cpp#L70)

> Is the method used to find lanes (Line Segment Detector and Graph Segmentation) sufficient. If a CNN based lane detection model is used instead of these DNN's, will the results improve? (To detect the lanes as a single piece instead of detecting them in pieces.) (It may provide better results in scenarios where there are vehicles in the camera's field of view.) Is there a plan to change the methods?

The current methods used to find lanes may not be sufficient. Using a CNN-based lane detection model could potentially lead to improvements.  However, I don't think anyone is actively working on incorporating cnn-based methods at this time. :thinking: "
Localization Tests - Yabloc and NDT Comparison,D_kwDOAnasMc4AUsHf,2023-07-20T23:53:31Z,StepTurtle,2,Answered,DC_kwDOAnasMc4AY2NM,StepTurtle,"Thanks for your clear answers to my questions. :star::star::star:

> Indeed, it is easier for YabLoc to recover from inaccurate estimates compared to NDT. The reason lies in YabLoc's utilization of a particle filter, which allows it to maintain multiple self-position candidates. Even if almost particles temporarily converge to incorrect locations, as long as some particles remain in the correct location, the system can recover. Moreover, incorporating GNSS information also contributes to recoverance.

This is really good feature. When I check the Yabloc's and the Ndt's pose estimation outputs (without EKF), Ndt looks very noisy and instead of this, Yabloc looks so smooth

> There is currently no numerical metric to quantify the misalignment observed in the overlay images. If you have any ideas on how to achieve this, please share them with me. pray

No right now :neutral_face:, but if I have, I will definitely share with you.

> Incorporating bicycle lanes in lanelet2 could enhance accuracy. However, the absence of bicycle lanes would not necessarily cause critical errors. If you think the accuracy is insufficient, I recommend adding them to lanelet2.

I think it affect sometimes. When I check the lanelet lines projected image, sometimes The yellow lanes hold on to bicycle roads. So, it would be better if we add

>YabLoc projects the road markings extracted from images onto a horizontal plane. This discrepancy between the actual slopes and the horizontal plane projection likely causes the errors observed on slopes.

It make sense right now."
Change MPC Formulation to Exploit Sparsity,D_kwDOAnasMc4AUsV-,2023-07-21T07:30:15Z,AhmadAmine998,2,Answered,,,
Change MPC Formulation to Exploit Sparsity,D_kwDOAnasMc4AUsV-,2023-07-21T07:30:15Z,AhmadAmine998,2,Answered,DC_kwDOAnasMc4AY0oA,rej55,"Hello, thank you for your suggestion!

It sounds nice for me.
`obstacle_avoidance_planner` also uses a MPC like algorithm.
So, the same suggested method may work in `obstacle_avoidance_planner`."
Change MPC Formulation to Exploit Sparsity,D_kwDOAnasMc4AUsV-,2023-07-21T07:30:15Z,AhmadAmine998,2,Answered,DC_kwDOAnasMc4AZl4h,TakaHoribe,"It seems the proposed formulation makes a great improvement in computation time in the `obstacle_avoidance_planner`.
https://github.com/autowarefoundation/autoware.universe/pull/4600

![image](https://github.com/autowarefoundation/autoware/assets/21360593/f46d9be8-d568-48b1-af72-09f83ab3fa5f)
"
Change MPC Formulation to Exploit Sparsity,D_kwDOAnasMc4AUsV-,2023-07-21T07:30:15Z,AhmadAmine998,2,Answered,DC_kwDOAnasMc4AZmLf,takayuki5168,"Thank you for your sharing, Horibe-san.

@AhmadAmine998 I've been struggling with the too-heavy computation cost of obstacle_avoidance_planner, which is an MPC-based path planning.
The method you suggested works significantly. I really appreciate your suggestion!"
Unzip is not working inside docker conatiner using rocker,D_kwDOAnasMc4AUslB,2023-07-21T12:35:56Z,MlLearnerAkash,0,Unanswered,,,
PR for autoware.universe repository now needs a tag to run CI,D_kwDOAnasMc4AUtBo,2023-07-22T03:13:08Z,mitsudome-r,0,Unanswered,,,
"Help, autoware installalation and firstly running error",D_kwDOAnasMc4AUt_J,2023-07-23T14:48:41Z,hoppss,1,Answered,,,
"Help, autoware installalation and firstly running error",D_kwDOAnasMc4AUt_J,2023-07-23T14:48:41Z,hoppss,1,Answered,DC_kwDOAnasMc4AY4qN,maxime-clem,"I assume you are using the `galactic` branch of autoware ? https://github.com/autowarefoundation/autoware/tree/galactic
I think Q1 can be ignored for now (it's only a visualization issue) but Q2 is strange.
Did you install all missing dependencies with `rosdep install -y --from-paths src --ignore-src --rosdistro $ROS_DISTRO --include-eol-distros` ?"
"Help, autoware installalation and firstly running error",D_kwDOAnasMc4AUt_J,2023-07-23T14:48:41Z,hoppss,1,Answered,DC_kwDOAnasMc4AY48O,hoppss,"I failed to run rosdep to install deps maybe caused by network. I mannually install deps.
Now, I have successfully launching planning simulation, after rebuild probabilistic_occupancy_grid_map.

It also can work without nvidia graphic card.

Thanks a lot. close this ticket"
Activating camera related nodes for object_recognition/detection,D_kwDOAnasMc4AUuoK,2023-07-24T06:23:26Z,MarioAlmelaUMH,2,Answered,,,
Activating camera related nodes for object_recognition/detection,D_kwDOAnasMc4AUuoK,2023-07-24T06:23:26Z,MarioAlmelaUMH,2,Answered,DC_kwDOAnasMc4AY7_p,lhakim85,"@MarioAlmelaUMH 

1. make sure you have ROS2 camera input source
2. edit this code https://github.com/autowarefoundation/sample_sensor_kit_launch/blob/main/sample_sensor_kit_launch/launch/sensing.launch.xml
  to include the camera node
4. uncomment this line
(https://github.com/autowarefoundation/autoware.universe/blob/4ae4705a9da515bf813dc00cf99dd44e380c1055/launch/tier4_perception_launch/launch/object_recognition/detection/camera_lidar_fusion_based_detection.launch.xml#L43)"
Activating camera related nodes for object_recognition/detection,D_kwDOAnasMc4AUuoK,2023-07-24T06:23:26Z,MarioAlmelaUMH,2,Answered,DC_kwDOAnasMc4AY8G0,MarioAlmelaUMH,"Thank you so much for your answer. I'm new to Autoware so I'm not sure if I'm doing the right things.
**1. make sure you have ROS2 camera input source:** I'm using Autoware in conjunction with Carla Simulator, and I get the camera images from there. The bridge I'm using only supports 1 camera, and it's currently providing the traffic_light_recognition module, but not the object_reconition/detection module.

**2. edit this code https://github.com/autowarefoundation/sample_sensor_kit_launch/blob/main/sample_sensor_kit_launch/launch/sensing.launch.xml
to include the camera node:** I have uncommented the camera driver lines. Is this enough, or do I have to include any extra nodes?

**3. uncomment this line
(https://github.com/autowarefoundation/autoware.universe/blob/4ae4705a9da515bf813dc00cf99dd44e380c1055/launch/tier4_perception_launch/launch/object_recognition/detection/camera_lidar_fusion_based_detection.launch.xml#L43):** I have uncommented the lines.

After all these changes, I still can't see the nodes activated in rqt_graph. It's possible that I'm doing something wrong as I don't have much experience with Autoware."
Activating camera related nodes for object_recognition/detection,D_kwDOAnasMc4AUuoK,2023-07-24T06:23:26Z,MarioAlmelaUMH,2,Answered,DC_kwDOAnasMc4AY8Jk,lhakim85,"@MarioAlmelaUMH , i'm not familiar with Carla, as i'm using real camera device

> 2. edit this code https://github.com/autowarefoundation/sample_sensor_kit_launch/blob/main/sample_sensor_kit_launch/launch/sensing.launch.xml
to include the camera node: I have uncommented the camera driver lines. Is this enough, or do I have to include any extra nodes?

not enough as this line of code is not run the camera node.
but you say that using carla simulator right, so make sure the camera from carla simulator is up, then check the topic name from the simulator, make sure same with https://github.com/autowarefoundation/autoware.universe/blob/4ae4705a9da515bf813dc00cf99dd44e380c1055/launch/tier4_perception_launch/launch/perception.launch.xml#L34

> 3. uncomment this line
(https://github.com/autowarefoundation/autoware.universe/blob/4ae4705a9da515bf813dc00cf99dd44e380c1055/launch/tier4_perception_launch/launch/object_recognition/detection/camera_lidar_fusion_based_detection.launch.xml#L43): I have uncommented the lines.

If u run the Autoware, check if yolo perception is running or not using Nvidia-smi"
Activating camera related nodes for object_recognition/detection,D_kwDOAnasMc4AUuoK,2023-07-24T06:23:26Z,MarioAlmelaUMH,2,Answered,DC_kwDOAnasMc4AY8gR,MarioAlmelaUMH,"Thank you for your answer.

I'm looking at the sensing module files (autoware.universe/sensing) and the only packages regarding images that I see are image_diagnostics and image_transport_decompressor. Do I have to launch any of them?

The camera from Carla simulator is definitively up, as I can see a preview on RViz when I launch both (Carla + Autoware). According to the bridge I'm using, the camera is publishing on a topic called /sensing/camera/traffic_light/image_raw. I have tried to add another publisher to the topic /sensing/camera/camera0/image_rect_color. The topic appears in ros2 topic list, but the yolo related nodes are still missing from rqt_graph, so I think nothing is currently subscribed.

Lastly, what is the process of launching the yolo nodes? I have CUDA and tensorrt installed. Do I need to launch anything else before launching Autoware?

Thank you for your answers."
Activating camera related nodes for object_recognition/detection,D_kwDOAnasMc4AUuoK,2023-07-24T06:23:26Z,MarioAlmelaUMH,2,Answered,DC_kwDOAnasMc4AY9tY,ktro2828,"@MarioAlmelaUMH Hi, thanks for asking. Note that the following steps are based on the latest autoware , which commit hash is `a91c19a353d6d68ba6622f447e57038b1863f117`.
1. Check `perception_mode` defined in `src/launcher/autoware_launch/autoware_launch/launch/autoware.launch.xml`
    `perception_mode=camera_lidar_fusion` is needed to launch camera based detection modules. 
2. As explained by @.lhakim85 , uncomment the lines for yolo modules in `camera_lidar_fusion_based_detection.launch.xml`.
3. Then `tensorrt_yolo/launch/yolo.launch.xml` will be launched, and the model is `yolov3` by default.
4. Also, if your nodes only publish compressed images you have to add image decompressor node like this
```xml
<node pkg=""image_transport_decompressor"" exec=""image_transport_decompressor_node"" name=""image_transport_decompressor_node"">
  <remap from=""~/input/compressed_image"" to=""$(var <IMAGE_TOPIC>)/compressed""/>
  <remap from=""~/output/raw_image"" to=""$(var <IMAGE_TOPIC>)""/>
</node>
```"
Activating camera related nodes for object_recognition/detection,D_kwDOAnasMc4AUuoK,2023-07-24T06:23:26Z,MarioAlmelaUMH,2,Answered,DC_kwDOAnasMc4AY_E_,MarioAlmelaUMH,"Thank you so much for your answer.

I've been able to launch almost all `perception/object_recognition/detection` nodes related to the camera. However, the `tensorrt_yolo` node doesn't appear anywhere in rqt_graph. The topics `perception/object_recognition/detection/rois*` appear in ros2 topic list, but they are not receiving any input.

The camera I'm using comes from Carla, and due to the bridge I'm using (https://github.com/hatem-darweesh/op_bridge), the camera data and info are published in the topics `/sensing/camera/traffic_light/image_raw` and `/sensing/camera/traffic_light/camera_info`. I've tried to change the input topics from `perception.launch.xml` to match the ones from the bridge, but the `tensorrt_yolo` node still doesn't appear active.

The next console log shows how there's multiple `tensorrt_yolo` processes being launched, but then the node doesn't appear in rqt and the output topics don't receive data.
![image](https://github.com/autowarefoundation/autoware/assets/119304913/cd980db6-e451-47a6-9a88-27670f9580f0)

Is there any `tensorrt_yolo` config that I'm missing? Does the `camera_number` parameter has anything to do? I have already uncommented the yolo related lines in `camera_lidar_fusion_based_detection.launch.xml`, but it seems the node is not being properly activated.

Thank you for your time."
Activating camera related nodes for object_recognition/detection,D_kwDOAnasMc4AUuoK,2023-07-24T06:23:26Z,MarioAlmelaUMH,2,Answered,DC_kwDOAnasMc4AZBF8,lhakim85,Can u share the command to launch the perception module and also the nvidia-smi output
Activating camera related nodes for object_recognition/detection,D_kwDOAnasMc4AUuoK,2023-07-24T06:23:26Z,MarioAlmelaUMH,2,Answered,DC_kwDOAnasMc4AZB2c,ktro2828,">However, the tensorrt_yolo node doesn't appear anywhere in rqt_graph. The topics perception/object_recognition/detection/rois* appear in ros2 topic list, but they are not receiving any input.

Note that, any YOLO nodes don't appear in rqt graph, because they are nodelet.
You can specify how many number of yolo nodes with `image_number` variable defined in `tier4_perception_launch/perception.launch.xml`, which is `6` by defaults.
"
Activating camera related nodes for object_recognition/detection,D_kwDOAnasMc4AUuoK,2023-07-24T06:23:26Z,MarioAlmelaUMH,2,Answered,DC_kwDOAnasMc4AZCBp,MarioAlmelaUMH,"Thank you for your answers. 

I have only 1 camera, so I initially changed the `image_number` to 1, but that made all `perception/object_recognition/detection/rois*` topics disappear from the `ros2 topic list`, so I reverted it back to 6.

The command present in the file `autoware.launch.xml` that launches the perception module is: 
```<!-- Perception -->
  <group if=""$(var launch_perception)"">
    <include file=""$(find-pkg-share tier4_perception_launch)/launch/perception.launch.xml"">
      <arg name=""mode"" value=""camera_lidar_fusion""/>
      <arg name=""vehicle_param_file"" value=""$(find-pkg-share $(var vehicle_model)_description)/config/vehicle_info.param.yaml""/>
      <arg name=""use_pointcloud_container"" value=""$(var use_pointcloud_container)""/>
      <arg name=""pointcloud_container_name"" value=""$(var pointcloud_container_name)""/>
      <arg name=""enable_fine_detection"" value=""$(var traffic_light_recognition/enable_fine_detection)""/>
    </include>
  </group>
```
As for the nvidia-smi output, it is as follows:
![image](https://github.com/autowarefoundation/autoware/assets/119304913/e6aa9de5-a296-4e09-983c-ce890ea81554)
The gpu id of `yolo.launch.xml` is set to 0.

Thank you for your time.



"
Activating camera related nodes for object_recognition/detection,D_kwDOAnasMc4AUuoK,2023-07-24T06:23:26Z,MarioAlmelaUMH,2,Answered,DC_kwDOAnasMc4AZJrs,MarioAlmelaUMH,"Hello again. I've saved the output of the console log and found these:

![console log](https://github.com/autowarefoundation/autoware/assets/119304913/020d762f-b854-41cf-8846-f815cec76ee3)

Apparently, Autoware cannot deserialize the yolo engine due to an empty memory buffer. Does anyone know how can I fix this buffer or what could be causing it to be empty? I think this is the main reason why the yolo nodes aren't producing output.

Thank you in advance for your help."
Activating camera related nodes for object_recognition/detection,D_kwDOAnasMc4AUuoK,2023-07-24T06:23:26Z,MarioAlmelaUMH,2,Answered,DC_kwDOAnasMc4AZLi9,lhakim85,"@MarioAlmelaUMH ,
Can u launch yolo only node 1st and see if it create yolov3.engine or any error `ros2launch tensorrt_yolo yolo.launch.xml ` "
Activating camera related nodes for object_recognition/detection,D_kwDOAnasMc4AUuoK,2023-07-24T06:23:26Z,MarioAlmelaUMH,2,Answered,DC_kwDOAnasMc4AZMFY,MarioAlmelaUMH,"Hello. I realized the yolo.engine file was empty, so I deleted it and let the yolo node create a new one. In that regard, the yolo node works properly now:
![yolo_engine](https://github.com/autowarefoundation/autoware/assets/119304913/3433a789-a16e-44e5-80e2-8dbcdd2b41f4)

However, when I launch the whole Autoware, my GPU memory seems to fill up (`image_number` is set to 1).

![tensorrt_memory](https://github.com/autowarefoundation/autoware/assets/119304913/245724e9-a4c4-47a6-b6f1-e6a345298a56)
As you can see, in lines 2579 and 2580, it seems that there's not enough memory to deserialize the engine, however in line 2581 it says _inference engine prepared_, so I don't know if there's an issue or not. 

The topic `perception/object_recognition/detection/rois0` appears in `ros2 topic list` but still doesn't receive messages in `ros2 topic echo`. It may be due to lag/lack of memory, but I'm not sure.

I'm open to any ideas. Thank you in advance.
"
Activating camera related nodes for object_recognition/detection,D_kwDOAnasMc4AUuoK,2023-07-24T06:23:26Z,MarioAlmelaUMH,2,Answered,DC_kwDOAnasMc4AZMYh,MarioAlmelaUMH,"Ok, I finally was able to receive data on the topic `/perception/object_recognition/detection/rois0`. That puts my computer on fire, though, so I don't know if I'm doing something wrong. I'm going to close this discussion for now as the main topic is already solved.

Thanks again for all your help."
2023-07-24 ODD working group weekly meeting (150),D_kwDOAnasMc4AUuul,2023-07-24T08:09:30Z,Igata-ctrl,0,Unanswered,,,
Object prediction don't work,D_kwDOAnasMc4AUu2c,2023-07-24T10:54:31Z,Hensbag,2,Answered,,,
Object prediction don't work,D_kwDOAnasMc4AUu2c,2023-07-24T10:54:31Z,Hensbag,2,Answered,DC_kwDOAnasMc4AY6BA,maxime-clem,"You have issues with CUDA which prevents some modules from running.
To run localization and perception with the bag replay you need a Nvidia GPU with the correct drivers installed (you can use the `setup-dev-env.sh` script to install these)."
Object prediction don't work,D_kwDOAnasMc4AUu2c,2023-07-24T10:54:31Z,Hensbag,2,Answered,DC_kwDOAnasMc4AY9qk,Hensbag,"It's working now , I have deleted the Cuda then reinstall it again it worked after reboot and building the workspace again thanks a lot.
"
Object prediction don't work,D_kwDOAnasMc4AUu2c,2023-07-24T10:54:31Z,Hensbag,2,Answered,DC_kwDOAnasMc4AbcGF,TZECHIN6,"hi @Hensbag , I face this issue randomly, I got 5-6 pc which all of them install autoware via the provided setup script, but 1 or 2 of them even the nvidia driver seem correctly installed, and `nvcc -V` command can be seen with correct version of cuda. Still no detection result. I believe its related to the cuda... any good method to ensure every built can be success without encountering this (for clean setup)?"
Object prediction don't work,D_kwDOAnasMc4AUu2c,2023-07-24T10:54:31Z,Hensbag,2,Answered,DC_kwDOAnasMc4Abc6d,Hensbag,That would be nice If someone can explain and which step to follow in situation object prediction is not working properly.
OpenADKit on Humble branch,D_kwDOAnasMc4AUvFX,2023-07-24T15:46:36Z,radolin,0,Unanswered,,,
Planning simulator not working with custom map,D_kwDOAnasMc4AUvQP,2023-07-24T19:52:17Z,zillur-av,2,Answered,,,
Planning simulator not working with custom map,D_kwDOAnasMc4AUvQP,2023-07-24T19:52:17Z,zillur-av,2,Answered,DC_kwDOAnasMc4AY8-8,mehmetdogru,@zillur-av Sharing HD-Map might help people to understand better what is going on. At least that way the issue can be reproduced.
Planning simulator not working with custom map,D_kwDOAnasMc4AUvQP,2023-07-24T19:52:17Z,zillur-av,2,Answered,DC_kwDOAnasMc4AY9mh,zillur-av,"There was an error in the map regarding ""no_parking_space"" items. Not sure why it happened. I deleted those items for now and it's working."
Software WG Meeting 2023/07/25,D_kwDOAnasMc4AUv62,2023-07-25T14:29:20Z,xmfcx,1,Answered,,,
Software WG Meeting 2023/07/25,D_kwDOAnasMc4AUv62,2023-07-25T14:29:20Z,xmfcx,1,Answered,DC_kwDOAnasMc4AY9De,mitsudome-r,I would like to announce about this topic https://github.com/orgs/autowarefoundation/discussions/3683 in the meeting.
"Regarding the code of vehicle_model_bicycle_kinematics_no_delay in mpc_lateral_controller, I think there may be a problem",D_kwDOAnasMc4AUwWu,2023-07-26T03:05:50Z,lixianqiang,2,Answered,,,
"Regarding the code of vehicle_model_bicycle_kinematics_no_delay in mpc_lateral_controller, I think there may be a problem",D_kwDOAnasMc4AUwWu,2023-07-26T03:05:50Z,lixianqiang,2,Answered,DC_kwDOAnasMc4AY-a7,TakaHoribe,"@lixianqiang Thank you for your post. Let me answer this.

> The state of kinematic is 3 lateral distances, yaw angle, and steering angle of tire.

This is actually not true. The `kinematics_model` has the 3 states (lateral error, yaw error, steering) in order to consider the steering dynamics, but the `kinematics_model_no_delay` has only 2 states (lateral error, yaw error) since the steering dynamics (steering delay) is not considered and the steering value in the input is directly used to calculate the derivatives.

Thus, the model in the world coordinate (not error coordinate) should be 

```
x = [x, y, yaw]^T
u = [delta]

dx = v * cos(yaw)
dy = v * sin(yaw)
dyaw = v * tan(delta) / wheelbase
```

Then, applying the transformation from the world coordinate to the Flenet coordinate derives the model in the code.




"
"Regarding the code of vehicle_model_bicycle_kinematics_no_delay in mpc_lateral_controller, I think there may be a problem",D_kwDOAnasMc4AUwWu,2023-07-26T03:05:50Z,lixianqiang,2,Answered,DC_kwDOAnasMc4AZBLN,lixianqiang,"thiank for your answer, today i read the code
of mpc_lateral_controller.cpp, i found that the code
'm_mpc.setVehicleModel(vehicle_model_ptr)' appears repeatedly in
mpc_lateral_controller.cpp on line 98 and line 101. Is there any
possibility of repeated code execution? i want to pull request but I am not
very proficient in using it, so I asked by email
Takamasa Horibe ***@***.***> 于2023年7月26日周三 13:20写道：

> @lixianqiang <https://github.com/lixianqiang> Thank you for your post.
> Let me answer this.
>
> The state of kinematic is 3 lateral distances, yaw angle, and steering
> angle of tire.
>
> This is actually not true. The kinematics_model has the 3 states (lateral
> error, yaw error, steering) in order to consider the steering dynamics, but
> the kinematics_model_no_delay has only 2 states (lateral error, yaw
> error) since the steering dynamics (steering delay) is not considered and
> the steering value in the input is directly used to calculate the
> derivatives.
>
> Thus, the model in the world coordinate (not error coordinate) should be
>
> x = [x, y, yaw]^T
> u = [delta]
>
> dx = v * cos(yaw)
> dy = v * sin(yaw)
> dyaw = v * tan(delta) / wheelbase
>
> Then, applying the transformation from the world coordinate to the Flenet
> coordinate derives the model in the code.
>
> —
> Reply to this email directly, view it on GitHub
> <https://github.com/orgs/autowarefoundation/discussions/3694#discussioncomment-6547131>,
> or unsubscribe
> <https://github.com/notifications/unsubscribe-auth/AF6QG53OIECR3SS52TLXM3DXSCSLLANCNFSM6AAAAAA2X5WQLM>
> .
> You are receiving this because you were mentioned.Message ID:
> ***@***.***
> .com>
>
"
"Regarding the code of vehicle_model_bicycle_kinematics_no_delay in mpc_lateral_controller, I think there may be a problem",D_kwDOAnasMc4AUwWu,2023-07-26T03:05:50Z,lixianqiang,2,Answered,DC_kwDOAnasMc4AaNaX,maxime-clem,"You are right the line is duplicated and can be removed.
Feel free to open a PR to remove one of the extra lines."
Perception and Sensing WG Meeting 26/07/2023,D_kwDOAnasMc4AUwnu,2023-07-26T09:28:26Z,drwnz,0,Unanswered,,,
"Open AD Kit WG Meeting July 27, 2023",D_kwDOAnasMc4AUwtd,2023-07-26T11:40:17Z,oguzkaganozt,0,Unanswered,,,
API WG Meeting (07/26/2023),D_kwDOAnasMc4AUw0K,2023-07-26T13:56:23Z,yuasabe,1,Answered,,,
API WG Meeting (07/26/2023),D_kwDOAnasMc4AUw0K,2023-07-26T13:56:23Z,yuasabe,1,Answered,DC_kwDOAnasMc4AY_oz,yuasabe,"Maybe in the next meeting, I can briefly introduce our project on ""AutowareV2X"" as well. It seemed relevant to today's discussion.
I did post a discussion about it for anyone who is interested! 
https://github.com/orgs/autowarefoundation/discussions/3655"
Triggering Lane Change,D_kwDOAnasMc4AUxqz,2023-07-27T09:09:46Z,AElkenawy,2,Answered,,,
Triggering Lane Change,D_kwDOAnasMc4AUxqz,2023-07-27T09:09:46Z,AElkenawy,2,Answered,DC_kwDOAnasMc4AZJBK,zulfaqar-azmi-t4,"@AElkenawy
In the behavior path planner, the dynamic objects are used to ensure that the lane change trajectory is safe to follow, and to trigger the [cancellation](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/docs/behavior_path_planner_lane_change_design/#cancel) or [aborting](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/docs/behavior_path_planner_lane_change_design/#abort) of lane changes when necessary, and it does not really affect the generation of lane change trajectories. 

With that said, there are three ways to trigger lane changes:

1.`Normal lane change`: In this case, the goal pose would be positioned in the destination lane, and you would perform a lane change normally.
2 `External request lane change`: This allows you to trigger lane changes unconditionally, without having the goal in the destination lane. You can enable this by setting `enable_module: true` [for both external request left and external request right](https://github.com/autowarefoundation/autoware_launch/blob/91d4afb6e4701601bbc544eb8b8ea9fbb823e53d/autoware_launch/config/planning/scenario_planning/lane_driving/behavior_planning/behavior_path_planner/scene_module_manager.param.yaml#L7C1-L8C1).
3. `Avoidance by lane change`([link](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/docs/behavior_path_planner_avoidance_by_lane_change_design/#avoidance-by-lane-change-design)): Currently, this is the only lane change module that depends on the perception's input as triggering condition. You basically performing avoidance using lane changes. The module is a bit unstable for now due to we are not be able to determine the best behavior yet.

Example of external request lane change 
![image](https://github.com/autowarefoundation/autoware/assets/93502286/22c64b88-ea55-4128-b1d6-961dc321886a)


Safety checks are enabled for both options. However, if you want to perform lane changes regardless of the perception stack input (meaning safety is not a concern), the easiest way is to set [these two flags to false](https://github.com/autowarefoundation/autoware_launch/blob/91d4afb6e4701601bbc544eb8b8ea9fbb823e53d/autoware_launch/config/planning/scenario_planning/lane_driving/behavior_planning/behavior_path_planner/lane_change/lane_change.param.yaml#L56-L57)."
Triggering Lane Change,D_kwDOAnasMc4AUxqz,2023-07-27T09:09:46Z,AElkenawy,2,Answered,DC_kwDOAnasMc4AZ19d,Levinskis,"Hi @zulfaqar-azmi-t4,
thank you for sharing these insights could, you please specify how you triggered the second option? i.e. External request lane change.
It seems that `ros2 service call  /planning/cooperate_commands/external_request_lane_change_left tier4_rtc_msgs/srv/CooperateCommands ""{commands: [{module: {type: 15}, command: {type: 1}}]}""` dont provide any result.  "
Triggering Lane Change,D_kwDOAnasMc4AUxqz,2023-07-27T09:09:46Z,AElkenawy,2,Answered,DC_kwDOAnasMc4AaFnI,zulfaqar-azmi-t4,"@Levinskis 
It's easier to test it using the `RTCManagerPanel`, and select ""Execute Path Change"" to trigger the lane change.

![Screenshot from 2023-08-28 14-49-32](https://github.com/autowarefoundation/autoware/assets/93502286/f5629469-2dc1-4b6a-9dd8-2e8993ec56a7)
"
Triggering Lane Change,D_kwDOAnasMc4AUxqz,2023-07-27T09:09:46Z,AElkenawy,2,Answered,DC_kwDOAnasMc4AavYm,wbq0206,"Yes, I agree with this viewpoint. The fundamental logic of lane changing is to detect and generate feasible areas, which can be achieved through external request lane change."
Triggering Lane Change,D_kwDOAnasMc4AUxqz,2023-07-27T09:09:46Z,AElkenawy,2,Answered,DC_kwDOAnasMc4AaF3g,AElkenawy,"As per my discussion with @zulfaqar-azmi-t4, he gave the following instructions for the candidate external lane change paths to be available: 
1) On the rtc_auto_mode_manager.param.yaml file, add under module_list 
      - ""external_request_lane_change_left""
      - ""external_request_lane_change_right""

2) comment out  start_planner in both module_list and default_enable_list ← sometimes due to the start planner, you have to move vehicle first before the candidate path appears.

3) On the scene_module_manager.param.yaml file
    enable module = true for both ExtLC.
    enable module = false for start planner.

4) Plan a goal position on the same lane of at least 100m,  candidate external lane changes should be present. 
5) Finally, the lane change could be executed manually (RTC panel) as mentioned by @zulfaqar-azmi-t4
"
error while launching `planning_simulator.launch.xml`,D_kwDOAnasMc4AU0mA,2023-07-31T02:54:12Z,felixf4xu,2,Answered,,,
error while launching `planning_simulator.launch.xml`,D_kwDOAnasMc4AU0mA,2023-07-31T02:54:12Z,felixf4xu,2,Answered,DC_kwDOAnasMc4AZJFJ,maxime-clem,"Which version of Autoware are you using ?
If you are using the latest version, there could be a mismatch between the `universe` and `launch` repositories.
You can try to update the repository with `vcs pull src`, build again, and see if it fixes the issue."
error while launching `planning_simulator.launch.xml`,D_kwDOAnasMc4AU0mA,2023-07-31T02:54:12Z,felixf4xu,2,Answered,DC_kwDOAnasMc4AZLkM,felixf4xu,"yes, that param name is removed at https://github.com/autowarefoundation/autoware.universe/commit/3c41d3ed00ebd3f3722fc939309f1f360937eec9"
2023-07-31 ODD working group weekly meeting (151),D_kwDOAnasMc4AU1AC,2023-07-31T13:58:24Z,Igata-ctrl,0,Unanswered,,,
why .idl files instead of .msg files in autoware_auto_msgs,D_kwDOAnasMc4AU1eV,2023-08-01T04:52:35Z,xoofee,1,Answered,,,
why .idl files instead of .msg files in autoware_auto_msgs,D_kwDOAnasMc4AU1eV,2023-08-01T04:52:35Z,xoofee,1,Answered,DC_kwDOAnasMc4AZLtM,maxime-clem,"The `.idl` messages are in the process of being changed to `.msg` messages.

Related issues:
- https://gitlab.com/autowarefoundation/autoware.auto/autoware_auto_msgs/-/issues/28
- https://github.com/autowarefoundation/autoware_msgs/issues/2"
why .idl files instead of .msg files in autoware_auto_msgs,D_kwDOAnasMc4AU1eV,2023-08-01T04:52:35Z,xoofee,1,Answered,DC_kwDOAnasMc4AZQuc,xoofee,why keep the intermediate files？I think it would be deleted because it can be generated again from msg files
Software WG Meeting 2023/08/01,D_kwDOAnasMc4AU1e0,2023-08-01T05:05:22Z,mitsudome-r,0,Unanswered,,,
2023-08-02 Simulation Working group Meeting,D_kwDOAnasMc4AU19u,2023-08-01T13:48:18Z,WJaworskiRobotec,0,Unanswered,,,
Reference Design WG Meeting (08/02/2023),D_kwDOAnasMc4AU21x,2023-08-02T13:50:08Z,chishengshih,1,Answered,,,
Reference Design WG Meeting (08/02/2023),D_kwDOAnasMc4AU21x,2023-08-02T13:50:08Z,chishengshih,1,Answered,DC_kwDOAnasMc4AZPsZ,chishengshih,"Meeting Notes: 
- eSOL Presentation by Tomo from eSOL:
  - Multi-kernel RTOS Platform for mixed criticality systems
  - Global player at embedded standards: autosar, autoware, and SOAFEE.
  - eSOL's RTOS product from 1975:
    - MKP 86, eT-Kernel MCE, eMCOS (multi-core and Many-Core RTOS), 
    - MCOS: POSIX interface, ISO 26262, 
    - T-Kernel: single/multicore
    - eMCOS: Multikernel (distributed microkernel)
      - (P.9) Future embedded SDAs will be based on a service-oriented architecture with very high inter-core message traffic.
      - (P.10) Use fast IPC 
      - each core has one microkernel.
      - On the multi-core platform, the users view the combination of microkernels as one operating systems. 
      - Memory are shared and protected local for each core. 
      - (P.11) Compare SMP RTOS and Distributed RTOS.
      - Multiple OS can run at the same time by hypervisor option.
      - How about interrupt handling? Interrupts are assigned to a special core, and dispatched to the process/threads. 
      - How about networking? Same as interrupts. eMCOS hypervisor has virtualized HW. 
      - Functional Safety support: ISO26262, 61508, IEC 62304, AutoSAR, 
      - P15: Autoware on eMCOS (2017) : any participation of autoware 
      - P.16: ARM 8-core Big.Little Architecture runs Autoware.Universe. Only control node on eMCOS.
      - CY: P.13 autoware ROS2 does not run on Ubuntu, directly on eMCOS. 
      - License: subscription model, one year, eMCOS SDK. 
      - David Walmroth: any preferred ARM platform to run eMCOS? Currently, working on Xlinix and ARM.  
    - What's the difference between MCOS and eMCOS? 
    - Armagan: call for participations on revising online document. 
    - Next meeting: minimal requirements for autoware. "
Localization & Mapping WG Meeting 02/08/2023,D_kwDOAnasMc4AU24h,2023-08-02T14:44:22Z,armaganarsln,0,Unanswered,,,
2023-08-03 Racing Working Group Meeting,D_kwDOAnasMc4AU3RO,2023-08-03T00:59:41Z,pojenwang,0,Unanswered,,,
Strategy to upgrade some packages from autoware.ai to autoware.auto?,D_kwDOAnasMc4AU3UL,2023-08-03T02:40:43Z,felixf4xu,1,Answered,,,
Strategy to upgrade some packages from autoware.ai to autoware.auto?,D_kwDOAnasMc4AU3UL,2023-08-03T02:40:43Z,felixf4xu,1,Answered,DC_kwDOAnasMc4AZRGT,felixf4xu,"I'm reading https://autoware.org/past-present-and-the-future-of-autoware/ and it says
>it was decided to avoid simply porting Autoware.AI from ROS1 to ROS2

I understand the reasons, but it also puts current running autoware.ai demos to an embarrassing situation: a step-by-step upgrading is not possible. A working demo, even based on autoware, costs months if not years of engineering time, it's very hard to decide to do it again with autoware.auto, it's also very hard to stay with autoware.ai because its development community is shrinking.

My current plan is to have a try to see how hard it is to just **port** autoware.ai (only packages used in my demo) to ros2, but I'm not sure if it will be a waste of time.

I would like to see some suggestions."
Planning&Control WG Meeting 2023/08/03,D_kwDOAnasMc4AU3XK,2023-08-03T04:52:36Z,maxime-clem,1,Answered,,,
Planning&Control WG Meeting 2023/08/03,D_kwDOAnasMc4AU3XK,2023-08-03T04:52:36Z,maxime-clem,1,Answered,DC_kwDOAnasMc4AZRaB,ahmeddesokyebrahim,"`Create API to request manual operation` :
- I would like to ask about the status of this issue : https://github.com/autowarefoundation/autoware/issues/3487

`Re-routing for a static obstacle that blocks the road` : 
- I would like to discuss this [implementation approach](https://github.com/orgs/autowarefoundation/discussions/3599#discussioncomment-6624889).

"
Planning&Control WG Meeting 2023/08/03,D_kwDOAnasMc4AU3XK,2023-08-03T04:52:36Z,maxime-clem,1,Answered,DC_kwDOAnasMc4AZRgp,maxime-clem,"> Re-routing for a static obstacle that blocks the road :

Meeting notes:
- 2nd use case: cannot do U-turn so challenging.
- 1st use case: where do we stop so that we can reroute  ?
  - initially, input from user to declare a blocked road.
  - perception can also determine a block.

- Re-routing may be challenging as we need to regenerate the lanelet routing graph ?
    - With the route handler we can find alternative routes and not stick to the shortest path.
    - May be computationally expensive but not a big issue. 

- Changing the route currently disable the autonomous mode.
  - Is there any way to stay in autonomous mode ?
  - Already have an API for rerouting (not originally designed for avoiding obstacle) which allows staying in autonomous mode.
    - https://github.com/orgs/autowarefoundation/discussions/2983
- Getting a feedback with the ADAPI does not work ? (the `future` is never set)
  - The response is filled out BUT cannot register a callback for when the response is set.
  - May be a bug. An issue should be opened."
.osm map issue,D_kwDOAnasMc4AU3lf,2023-08-03T10:30:34Z,Kaipa-Charan,1,Answered,,,
.osm map issue,D_kwDOAnasMc4AU3lf,2023-08-03T10:30:34Z,Kaipa-Charan,1,Answered,DC_kwDOAnasMc4AZUGb,kyoichi-sugahara,"@Kaipa-Charan 
Can you share the execution command and the logs?
Also, are the filenames under the map directory as follows?
> lanelet2_map.osm
pointcloud_map.pcd

If it's possible, could you give the lanaet map and pcd file?"
.osm map issue,D_kwDOAnasMc4AU3lf,2023-08-03T10:30:34Z,Kaipa-Charan,1,Answered,DC_kwDOAnasMc4AZUHw,Kaipa-Charan,"I am sharing files with you. I have used these files but when I am giving it input to autoware stack I am getting only point cloud map but not .osm map. please help me to rectify the issues.
[Autoware files.zip](https://github.com/autowarefoundation/autoware/files/12258804/Autoware.files.zip)
"
.osm map issue,D_kwDOAnasMc4AU3lf,2023-08-03T10:30:34Z,Kaipa-Charan,1,Answered,DC_kwDOAnasMc4AZUKl,mitsudome-r,"Try modifying the `lanelet2_map_projector_type` to `local` in the param file for [lanelet2_map_loader](https://github.com/autowarefoundation/autoware_launch/blob/main/autoware_launch/config/map/lanelet2_map_loader.param.yaml#L3).
"
.osm map issue,D_kwDOAnasMc4AU3lf,2023-08-03T10:30:34Z,Kaipa-Charan,1,Answered,DC_kwDOAnasMc4AZUO4,Kaipa-Charan,"but in my .osm file latitudes and longitudes are not present. How to add latitudes and longitudes in .yaml file?
"
.osm map issue,D_kwDOAnasMc4AU3lf,2023-08-03T10:30:34Z,Kaipa-Charan,1,Answered,DC_kwDOAnasMc4AZbVO,mitsudome-r,"@Kaipa-Charan You don't have to use specify lat/lon values in the parameter. Setting projector type to `local` makes the loader to use local_x, local_y values at load time instead of using lat/lon values. local_x and local_y values should be aligned with pcd map if you create osm map with TIER IV's Vector Map Builder."
.osm map issue,D_kwDOAnasMc4AU3lf,2023-08-03T10:30:34Z,Kaipa-Charan,1,Answered,DC_kwDOAnasMc4AZwnC,Kaipa-Charan,Thank You I got the step
"Open AD Kit WG Meeting August 3, 2023",D_kwDOAnasMc4AU3ou,2023-08-03T11:43:07Z,oguzkaganozt,0,Unanswered,,,
Eagleye output covariance values too high in example data,D_kwDOAnasMc4AU3sc,2023-08-03T13:02:35Z,meliketanrikulu,1,Answered,,,
Eagleye output covariance values too high in example data,D_kwDOAnasMc4AU3sc,2023-08-03T13:02:35Z,meliketanrikulu,1,Answered,DC_kwDOAnasMc4AZU_3,meliketanrikulu,Talked related covariance calculation [here](https://github.com/MapIV/eagleye/issues/303#issuecomment-1664861784). 
"Pointcloud_preprocessor ""Need an 'output_frame' parameter to be set before continuing!""""",D_kwDOAnasMc4AU32c,2023-08-03T16:04:09Z,pflee2002,1,Answered,,,
"Pointcloud_preprocessor ""Need an 'output_frame' parameter to be set before continuing!""""",D_kwDOAnasMc4AU32c,2023-08-03T16:04:09Z,pflee2002,1,Answered,DC_kwDOAnasMc4AZUod,maxime-clem,"Most nodes are meant to be started using a launch file, for example: https://github.com/autowarefoundation/autoware.universe/blob/main/sensing/pointcloud_preprocessor/launch/preprocessor.launch.xml
You can see the launch arguments with the following command:
```
▶ ros2 launch pointcloud_preprocessor preprocessor.launch.xml --show-args
Arguments (pass arguments as '<name>:=<value>'):

    'input_points_raw_list':
        define as string_array
        (default: '['/points_raw']')

    'output_points_raw':
        
        (default: '/points_raw/cropbox/filtered')

    'tf_output_frame':
        
        (default: 'base_link')

    'separate_concatenate_node_and_timesync_node':
        Set True to separate concatenate node and timesync node. which will cause to larger memory usage.
        (default: 'true')
```
Here all the parameters have default values so you can directly run the launch file.

You mention autoware.auto but my reply is about autoware.universe as auto is no longer supported."
Failed to build nebula_ros,D_kwDOAnasMc4AU4Qt,2023-08-04T03:53:46Z,shmpwk,1,Answered,,,
Failed to build nebula_ros,D_kwDOAnasMc4AU4Qt,2023-08-04T03:53:46Z,shmpwk,1,Answered,DC_kwDOAnasMc4AZTqa,yukkysaito,"@shmpwk 
There may be a conflict with installed packages.
Could you try the following command?
```
sudo apt remove ros-humble-udp-driver ros-humble-io-context
```"
Failed to build nebula_ros,D_kwDOAnasMc4AU4Qt,2023-08-04T03:53:46Z,shmpwk,1,Answered,DC_kwDOAnasMc4AZTq6,shmpwk,Problem solved! You are God thank you!
Failed to build nebula_ros,D_kwDOAnasMc4AU4Qt,2023-08-04T03:53:46Z,shmpwk,1,Answered,DC_kwDOAnasMc4AZa-X,drwnz,"This is also being remedied for workspaces that already include udp-driver installs.
Please see this PR:
https://github.com/tier4/nebula/pull/46

Once merged, it will require a full re-build in a clean workspace but the conflict issues will be resolved"
Velocity max at 42 km/h HELP!!!,D_kwDOAnasMc4AU4n4,2023-08-04T12:31:56Z,dilloncsr,3,Answered,,,
Velocity max at 42 km/h HELP!!!,D_kwDOAnasMc4AU4n4,2023-08-04T12:31:56Z,dilloncsr,3,Answered,DC_kwDOAnasMc4AZV6h,takayuki5168,"@dilloncsr Due to the calculation cost, the motion velocity smoother cuts the trajectory, and for the safety it inserts the stop point in the last trajectory point.
The velocity will be larger by making dense/sparse_ resample_time/dt larger.
https://github.com/autowarefoundation/autoware_launch/blob/30033251e329ebb487d4517a4d47e433a144f958/autoware_launch/config/planning/scenario_planning/common/motion_velocity_smoother/motion_velocity_smoother.param.yaml#L34-L39"
Velocity max at 42 km/h HELP!!!,D_kwDOAnasMc4AU4n4,2023-08-04T12:31:56Z,dilloncsr,3,Answered,DC_kwDOAnasMc4AZZlk,dilloncsr,I've manipulated those settings and it seems I am only able to get the velocity to increase up to about 49 km/h which is an improvement but I need to get the speeds up to about 100 km/h. If I increase the values any further it actually drops the max velocity to below the 42 km/h. 
Velocity max at 42 km/h HELP!!!,D_kwDOAnasMc4AU4n4,2023-08-04T12:31:56Z,dilloncsr,3,Answered,DC_kwDOAnasMc4AZeaH,Autostone-c,"> I have been using Autoware and CARLA to run some simulation tests and it seems that the MAX velocity that I can achieve is 42 km/h. I have adjusted so many parameters to get higher max speeds but it still caps out at 42. I was able to change the Max Velocity parameter and in Autoware it shows the Max Velocity of 180 km/h can be achieved but that doesn't seem to be the case.
> 
> I have checked the OSM files and added speed_limit tags to see if that would help, but it doesn't. I have tried multiple maps with the same result.
> 
> I'd like to get the velocity up to about 100 km/h. Any help or input would be greatly appreciated.
> 
> Thanks!

hi, Are you using the latest version of autoware（humble）with Carla？"
Velocity max at 42 km/h HELP!!!,D_kwDOAnasMc4AU4n4,2023-08-04T12:31:56Z,dilloncsr,3,Answered,DC_kwDOAnasMc4AZe2U,dilloncsr,I'm using Autoware (galactic) with Carla 9.12 as I have had issues with trying to get 9.13 working with the carla_autoware_bridge. 
Lanelet not showing up correctly in autoware planning simulation. Vector map creator coordinates off?,D_kwDOAnasMc4AU45c,2023-08-04T19:48:37Z,hdossaji94,3,Answered,,,
Lanelet not showing up correctly in autoware planning simulation. Vector map creator coordinates off?,D_kwDOAnasMc4AU45c,2023-08-04T19:48:37Z,hdossaji94,3,Answered,DC_kwDOAnasMc4AZbVU,mitsudome-r,Try modifying the lanelet2_map_projector_type to local in the param file for [lanelet2_map_loader](https://github.com/autowarefoundation/autoware_launch/blob/main/autoware_launch/config/map/lanelet2_map_loader.param.yaml#L3).
Lanelet not showing up correctly in autoware planning simulation. Vector map creator coordinates off?,D_kwDOAnasMc4AU45c,2023-08-04T19:48:37Z,hdossaji94,3,Answered,DC_kwDOAnasMc4AZc9N,hdossaji94,"That worked, thank you so much!"
Lanelet not showing up correctly in autoware planning simulation. Vector map creator coordinates off?,D_kwDOAnasMc4AU45c,2023-08-04T19:48:37Z,hdossaji94,3,Answered,DC_kwDOAnasMc4AZwix,Kaipa-Charan,"I am not able to locate lanelet2_map_projector_type in (https://github.com/autowarefoundation/autoware_launch/blob/main/autoware_launch/config/map/lanelet2_map_loader.param.yaml#L3)  it please help me out how to locate an how to change it?
"
Lanelet not showing up correctly in autoware planning simulation. Vector map creator coordinates off?,D_kwDOAnasMc4AU45c,2023-08-04T19:48:37Z,hdossaji94,3,Answered,DC_kwDOAnasMc4AZwm9,Kaipa-Charan,Thank you I got the step 
AWSIM Generalization Beyond Autoware,D_kwDOAnasMc4AU5E7,2023-08-04T22:34:29Z,plainspoken-chris,3,Answered,,,
AWSIM Generalization Beyond Autoware,D_kwDOAnasMc4AU5E7,2023-08-04T22:34:29Z,plainspoken-chris,3,Answered,DC_kwDOAnasMc4AZV-I,maxime-clem,"AWSIM publishes [ROS2 topics](https://tier4.github.io/AWSIM/Components/ROS2/ROS2TopicList/) which can be used by any autonomy stack.
Some messages are specific to Autoware, but converters can be written to allow interfacing with other stacks."
AWSIM Generalization Beyond Autoware,D_kwDOAnasMc4AU5E7,2023-08-04T22:34:29Z,plainspoken-chris,3,Answered,DC_kwDOAnasMc4AZWfu,hakuturu583,"AWSIM uses [ROS2 for unity](https://github.com/RobotecAI/ros2-for-unity) for communicating with Autoware.
ROS 2 for unity is a native ROS 2 client for unity and C#.
This tool also supports custom message, and AWSIM is open source, so you can adapt AWSIM to your stack easily."
AWSIM Generalization Beyond Autoware,D_kwDOAnasMc4AU5E7,2023-08-04T22:34:29Z,plainspoken-chris,3,Answered,DC_kwDOAnasMc4AZ2UR,hzkkk1997,"Hello, I would like to inquire about how to generate a new executable file after modifying the code in the AWSIM project.Looking forward to your reply very much～"
AWSIM Generalization Beyond Autoware,D_kwDOAnasMc4AU5E7,2023-08-04T22:34:29Z,plainspoken-chris,3,Answered,DC_kwDOAnasMc4AZ2X6,maxime-clem,"You need to `Build` the scene (https://docs.unity3d.com/Manual/PublishingBuilds.html).
Make sure you select the correct scene. Other settings do not need to be changed."
AWSIM Generalization Beyond Autoware,D_kwDOAnasMc4AU5E7,2023-08-04T22:34:29Z,plainspoken-chris,3,Answered,DC_kwDOAnasMc4AZ2Y3,hzkkk1997,Thank you for your reply!!! Is AWSIM based on Unity software to compile and generate executable files?
AWSIM Generalization Beyond Autoware,D_kwDOAnasMc4AU5E7,2023-08-04T22:34:29Z,plainspoken-chris,3,Answered,DC_kwDOAnasMc4AZ2Y_,maxime-clem,Yes. You can find the setup instructions here: https://tier4.github.io/AWSIM/GettingStarted/SetupUnityProject/
AWSIM Generalization Beyond Autoware,D_kwDOAnasMc4AU5E7,2023-08-04T22:34:29Z,plainspoken-chris,3,Answered,DC_kwDOAnasMc4AZ2iq,hzkkk1997,Thank you for your answer. I'll give it a try right away！
AWSIM Generalization Beyond Autoware,D_kwDOAnasMc4AU5E7,2023-08-04T22:34:29Z,plainspoken-chris,3,Answered,DC_kwDOAnasMc4AaAxl,hzkkk1997,"Hello, I used this method  (https://docs.unity3d.com/Manual/PublishingBuilds.html) to recompile the AWSIM project I modified, but I feel that the joint simulation with Autoware is a bit sluggish（Visualization interface with drag shadow）, not as smooth as the AWSIM and Autoware simulation I downloaded directly from the official before.Do I need to make any further configuration changes?
![截图 2023-08-25 11-02-16](https://github.com/autowarefoundation/autoware/assets/62823718/1b6edbd7-8f55-4db7-9dd3-39a6b3fc6b64)
"
AWSIM Generalization Beyond Autoware,D_kwDOAnasMc4AU5E7,2023-08-04T22:34:29Z,plainspoken-chris,3,Answered,DC_kwDOAnasMc4AZZp_,plainspoken-chris,Thank you both kindly!
2023-08-06 ODD working group weekly meeting (152),D_kwDOAnasMc4AU9Ye,2023-08-07T02:26:38Z,Igata-ctrl,0,Unanswered,,,
Solid State Lidar Integration Tutorial,D_kwDOAnasMc4AU-NP,2023-08-08T01:33:44Z,beginningfan,1,Answered,,,
Solid State Lidar Integration Tutorial,D_kwDOAnasMc4AU-NP,2023-08-08T01:33:44Z,beginningfan,1,Answered,DC_kwDOAnasMc4AaZgt,gdengchao,"Thank you for sharing. 
Do you use your own algorithms and models, or directly use the algorithms and models that come with the Autoware ? 
Is the Autoware compatible with solid-state lidar pointcloud ?"
Solid State Lidar Integration Tutorial,D_kwDOAnasMc4AU-NP,2023-08-08T01:33:44Z,beginningfan,1,Answered,DC_kwDOAnasMc4AaZij,beginningfan,"The algorithms used by the mainline are all compatible. As for the model, I tested lidar_centerpoint and it works."
Software WG Meeting 2023/08/08,D_kwDOAnasMc4AU-ve,2023-08-08T14:54:06Z,xmfcx,1,Answered,,,
Software WG Meeting 2023/08/08,D_kwDOAnasMc4AU-ve,2023-08-08T14:54:06Z,xmfcx,1,Answered,DC_kwDOAnasMc4AZcks,mitsudome-r,"As an announcement, we [merged a feature](https://github.com/autowarefoundation/autoware.universe/pull/4424) to use GPT from Open AI to do a review on PR. You should be able to run it by adding `openai-pr-reviewer` label to PR.
We are currently using GPT 3.5, but we can upgrade it to GPT 4 after we are qualified to use them after we do the first payment at the end of this month."
rosdep install and build failed,D_kwDOAnasMc4AU_MT,2023-08-09T02:34:57Z,shintaro-mori,2,Answered,,,
rosdep install and build failed,D_kwDOAnasMc4AU_MT,2023-08-09T02:34:57Z,shintaro-mori,2,Answered,DC_kwDOAnasMc4AZdv_,shintaro-mori,"build also failed.
```
$ colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release
[1.611s] ERROR:colcon:colcon build: Duplicate package names not supported:
- velodyne_msgs:
  - src/sensor_component/external/nebula/nebula_messages/velodyne_msgs
  - src/sensor_component/external/velodyne_vls/velodyne_msgs
```"
rosdep install and build failed,D_kwDOAnasMc4AU_MT,2023-08-09T02:34:57Z,shintaro-mori,2,Answered,DC_kwDOAnasMc4AZdxX,wep21,"A repos file has been updated recently, so you have to remove legacy packages left in `src` like
```
rm -rf src/*
git pull origin main
vcs import src < autoware.repos
```"
rosdep install and build failed,D_kwDOAnasMc4AU_MT,2023-08-09T02:34:57Z,shintaro-mori,2,Answered,DC_kwDOAnasMc4AZdxe,shintaro-mori,"Thank you.
https://github.com/autowarefoundation/autoware/commit/1fce19bc5c6bebd51546a060f59053975cbf738f
I ran `rm -rf src/sensor_component/external/velodyne_vls/` for reference here and it went through.
"
Building Autoware for Jetson Orin AGX,D_kwDOAnasMc4AU_ZP,2023-08-09T08:33:30Z,MrOCW,1,Answered,,,
Building Autoware for Jetson Orin AGX,D_kwDOAnasMc4AU_ZP,2023-08-09T08:33:30Z,MrOCW,1,Answered,DC_kwDOAnasMc4AZnRf,wep21,The build failure caused by `heaphook` has been fixed at https://github.com/tier4/heaphook/pull/5.
Perception and Sensing WG Meeting 09/08/2023,D_kwDOAnasMc4AU_b7,2023-08-09T09:15:34Z,drwnz,0,Unanswered,,,
API WG Meeting (08/09/2023),D_kwDOAnasMc4AU_c-,2023-08-09T09:31:48Z,yuasabe,0,Unanswered,,,
Announcing map interface change,D_kwDOAnasMc4AVAHV,2023-08-10T02:09:20Z,kminoda,0,Unanswered,,,
rosdep error,D_kwDOAnasMc4AVAQ1,2023-08-10T06:46:18Z,yama42326,3,Answered,,,
rosdep error,D_kwDOAnasMc4AVAQ1,2023-08-10T06:46:18Z,yama42326,3,Answered,DC_kwDOAnasMc4AZhJJ,yama42326,"I have download ndt_omp manually and build again.

Then, could not find multigrid_ndt_omp.h.

I searched under src and under /opt/ros for this file but could not find it.

Where is this file?

Best Regards"
rosdep error,D_kwDOAnasMc4AVAQ1,2023-08-10T06:46:18Z,yama42326,3,Answered,DC_kwDOAnasMc4AZncn,brkay54,Can you give more information about your installation process? Or please try reinstalling autoware. While reinstalling please remove all the build install files `rm -rf ./build ./log ./install`.
rosdep error,D_kwDOAnasMc4AVAQ1,2023-08-10T06:46:18Z,yama42326,3,Answered,DC_kwDOAnasMc4AZ-sJ,drwnz,"@yama42326 did you get to the bottom of this issue?
Please make sure you run vcs as per the installation instructions:
https://github.com/tier4/edge-auto/blob/main/docs/tutorials/02_installation.md"
rosdep error,D_kwDOAnasMc4AVAQ1,2023-08-10T06:46:18Z,yama42326,3,Answered,DC_kwDOAnasMc4AZ-tF,drwnz,"This should be resolved with [this PR](https://github.com/tier4/edge-auto/pull/14), which is undergoing review currently."
rosdep error,D_kwDOAnasMc4AVAQ1,2023-08-10T06:46:18Z,yama42326,3,Answered,DC_kwDOAnasMc4AaQul,yama42326,"I'm sorry for the late reply.
I was busy with other work and could not confirm this matter.

I followed the instructions today, did a reinstall, and was able to install successfully.
thank you.

Best Regards"
Autoware prebuilt image - Vehicle does not move,D_kwDOAnasMc4AVARd,2023-08-10T07:03:14Z,pandyah,1,Answered,,,
Autoware prebuilt image - Vehicle does not move,D_kwDOAnasMc4AVARd,2023-08-10T07:03:14Z,pandyah,1,Answered,DC_kwDOAnasMc4AaAnt,rsasaki0109,"What is the status of AutowareStatePanel in rviz?

autoware-state.md
https://github.com/autowarefoundation/autoware.universe/blob/main/system/default_ad_api/document/autoware-state.md#conversion"
"Open AD Kit WG Meeting August 10, 2023",D_kwDOAnasMc4AVAeR,2023-08-10T10:46:46Z,oguzkaganozt,0,Unanswered,,,
How to run yabloc with AWsim???ANYONE CANHELP ME？？,D_kwDOAnasMc4AVAkr,2023-08-10T13:10:01Z,hzkkk1997,1,Answered,,,
How to run yabloc with AWsim???ANYONE CANHELP ME？？,D_kwDOAnasMc4AVAkr,2023-08-10T13:10:01Z,hzkkk1997,1,Answered,DC_kwDOAnasMc4AZhv6,kminoda,"Hi, thank you for using it.
Please follow the instruction here: https://autowarefoundation.github.io/autoware-documentation/main/how-to-guides/integrating-autoware/launch-autoware/localization-methods/

Also, let us know your situation (OS, Autoware version, launch command, your concrete issue with some screen captures, etc) so that we can give a meaningful advice."
How to run yabloc with AWsim???ANYONE CANHELP ME？？,D_kwDOAnasMc4AVAkr,2023-08-10T13:10:01Z,hzkkk1997,1,Answered,DC_kwDOAnasMc4AZjHB,hzkkk1997,"Thank you for answering my question! My OS is ubuntu22.04 ROS2-humble, my autoware branches is autoware-humble, and I want to simulate with awsim by using this command: **ros2 launch autoware_launch e2e_simulator.launch.xml vehicle_model:=sample_vehicle sensor_model:=awsim_sensor_kit map_path:=<your mapfile location> pose_source:=yabloc** . By doing this, I think I can locate my ego car in awsim via yabloc.  But the vehicle was never successfully located."
How to run yabloc with AWsim???ANYONE CANHELP ME？？,D_kwDOAnasMc4AVAkr,2023-08-10T13:10:01Z,hzkkk1997,1,Answered,DC_kwDOAnasMc4AZkDC,kminoda,"Here are some questions:
1. Did you also fill the map_path?
2. Can you check if the map is successfully published? (eg by ros2 topic echo)
3. Did you provide pose initialization via 2D pose estimate in RViz menu bar?
4. Is the camera topic successfully published and subscribed by yabloc? (Check ros2 topic info -v ...)

Also, one easy way to check how YabLoc works is to use sample rosbag provided in this PR: https://github.com/autowarefoundation/autoware.universe/pull/3946

This would definitely be helpful for being able to debug by yourselves, given that our support via GitHub discussions is very limited."
How to run yabloc with AWsim???ANYONE CANHELP ME？？,D_kwDOAnasMc4AVAkr,2023-08-10T13:10:01Z,hzkkk1997,1,Answered,DC_kwDOAnasMc4AZ2UB,hzkkk1997,Thanks! I will try and check these key points~~~And updateing later.
There are multiple declarations of parameters in the launch file,D_kwDOAnasMc4AVDgr,2023-08-14T07:28:42Z,J-xinyu,0,Unanswered,,,
2023-08-14 ODD working group weekly meeting (153),D_kwDOAnasMc4AVDk7,2023-08-14T08:55:03Z,Igata-ctrl,0,Unanswered,,,
How to integrate standard NavSatFix message to autoware?,D_kwDOAnasMc4AVEGp,2023-08-14T22:28:17Z,zillur-av,3,Answered,,,
How to integrate standard NavSatFix message to autoware?,D_kwDOAnasMc4AVEGp,2023-08-14T22:28:17Z,zillur-av,3,Answered,DC_kwDOAnasMc4AZs6Y,KYabuuchi,"Hi!  If you are using the default localization method, the orientation topic is not necessary.
For `/sensing/gnss/gnss_poser` node, you just need to publish messages of type NavSatFix as `/sensing/gnss/ublox/nav_sat_fix`.

Moreover, GNSS is only used for initial position estimation by default, so if you specify the initial position from the 2D Pose Estimate in RViz, GNSS is not needed at all.  [Please see this documentation for pose initialization](https://autowarefoundation.github.io/autoware-documentation/main/how-to-guides/integrating-autoware/launch-autoware/#set-initial-pose)"
How to integrate standard NavSatFix message to autoware?,D_kwDOAnasMc4AVEGp,2023-08-14T22:28:17Z,zillur-av,3,Answered,DC_kwDOAnasMc4AZunU,zillur-av,"Ok. I see I need an orientation topic here https://github.com/autowarefoundation/sample_sensor_kit_launch/blob/3cef1e4888a41001e4ebb3afbf63ae823e42e27d/sample_sensor_kit_launch/launch/gnss.launch.xml#L12. Also, do I have to rename my fix message as `/sensing/gnss/ublox/nav_sat_fix`? For the initial localization, I expected it would be done by `ndt_scan_matching` node."
How to integrate standard NavSatFix message to autoware?,D_kwDOAnasMc4AVEGp,2023-08-14T22:28:17Z,zillur-av,3,Answered,DC_kwDOAnasMc4AZu8h,KYabuuchi,"As you pointed out, `gnss.launch.xml` launches the `/sensing/gnss/gnss_poser` node that subscribes to the orientation topic. However, even without publishing the orientation_topic, that node will still function.

For the initial localization, you need to either rename your fix topic to `sensing/gnss/ublox/nav_sat_fix` or modify the launch file so that your fix topic is subscribed to by the `/sensing/gnss/gnss_poser` node."
How to integrate standard NavSatFix message to autoware?,D_kwDOAnasMc4AVEGp,2023-08-14T22:28:17Z,zillur-av,3,Answered,DC_kwDOAnasMc4AZzKR,zillur-av,"I am thinking how it uses gps to localize? I remember when I created pcd map, I did not need gps. Also, when I created lanelet2 map, I just added a MGRS coordinate at the beginning which most probably corresponds to a big area, not a specific point. Then how will it use gps coordinate to localize the vehicle on the map?"
How to integrate standard NavSatFix message to autoware?,D_kwDOAnasMc4AVEGp,2023-08-14T22:28:17Z,zillur-av,3,Answered,DC_kwDOAnasMc4AZzxq,KYabuuchi,"In order to use GNSS for localization, it's necessary to use GNSS data when creating a point cloud map. 
You need to create a point cloud map using LiDAR-SLAM which can fuse GNSS and LiDAR, or you will need to transformation your point cloud map to become a georeferenced map.

For instance, the sample map provided in the [Rosbag replay simulation tutorial](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/rosbag-replay-simulation/) is a georeferenced map with MGRS coordinate system, as shown below. In the sample map, the X and Y coordinates of each point represent the point's location within the MGRS grid.
[This documentation page could be useful for reference.](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-architecture/map/#point-cloud-map)

<img src=""https://github.com/autowarefoundation/autoware/assets/24854875/5be3b197-1ec1-44b6-8bfd-1d3b9a2655da"" width=""400"">
<img src=""https://github.com/autowarefoundation/autoware/assets/24854875/53eac584-0c4e-40f5-9991-19a4d78897b8"" width=""400"">



"
How to integrate standard NavSatFix message to autoware?,D_kwDOAnasMc4AVEGp,2023-08-14T22:28:17Z,zillur-av,3,Answered,DC_kwDOAnasMc4AZ0ug,zillur-av,"My SLAM model is using gps as optional but I do not know if it saves those coordinates. Also, I am using this site to get MGRS coordinate from my lat long which is giving me 11S and PV. Now, when I am selecting a point in lanelet2 map, it is showing lat 35 degree while we are in 36 degree.

![Screenshot from 2023-08-19 10-14-37](https://github.com/autowarefoundation/autoware/assets/54721606/06f18386-a23e-4bab-8bc6-d5642094813f)

![Screenshot from 2023-08-19 10-19-02](https://github.com/autowarefoundation/autoware/assets/54721606/1e890a5e-49c8-407c-850a-db7413ab175f)

"
How to integrate standard NavSatFix message to autoware?,D_kwDOAnasMc4AVEGp,2023-08-14T22:28:17Z,zillur-av,3,Answered,DC_kwDOAnasMc4AZ2bi,KYabuuchi,"In your image, it seems that the GNSS information is not accurately reflected.
If `11SPV 67305 97905` (latitude=36.111, lon=-115.141) is within the your environment, the point cloud map should be distributed around `X=67305 and Y=97905`. However, your point cloud is distributed around `X=-8 and Y=19`.
That is why it is incorrectly shown as 35 degrees."
How to integrate standard NavSatFix message to autoware?,D_kwDOAnasMc4AVEGp,2023-08-14T22:28:17Z,zillur-av,3,Answered,DC_kwDOAnasMc4AZ2dA,KYabuuchi,"You need to transform like this figure.
![slam_coordinate and_mgrs_coordinate](https://github.com/autowarefoundation/autoware/assets/24854875/5b26a70d-a6b0-48ff-bf84-a2d9db53eb61)
"
How to integrate standard NavSatFix message to autoware?,D_kwDOAnasMc4AVEGp,2023-08-14T22:28:17Z,zillur-av,3,Answered,DC_kwDOAnasMc4AZ2eW,KYabuuchi,"By the way, as I mentioned earlier, GNSS is used only for initial pose estimation in the default Autoware. 
If you use manual initial pose estimation without using GNSS, you don't need to convert the map to MGRS coordinates, and you can directly use the map generated by your LiDAR-SLAM.

If creating a point cloud map within the MGRS coordinate system appears laborious, it could be worth considering the operation without GNSS."
How to integrate standard NavSatFix message to autoware?,D_kwDOAnasMc4AVEGp,2023-08-14T22:28:17Z,zillur-av,3,Answered,DC_kwDOAnasMc4AZ3uj,zillur-av,"> In your image, it seems that the GNSS information is not accurately reflected. If `11SPV 67305 97905` (latitude=36.111, lon=-115.141) is within the your environment, the point cloud map should be distributed around `X=67305 and Y=97905`. However, your point cloud is distributed around `X=-8 and Y=19`. That is why it is incorrectly shown as 35 degrees.

It is showing 8 and 19 because it is taking the pcd map initial point as (0,0).  I believe I input the correct MGRS coordinates in tier4 tool (11S, PV) according to my lat long. Not sure where I made the mistake.

I guess for now, I will be using rviz initial pose estimation. I am having trouble with that too. Can you please look into this issue? I am wondering if this is because of this or not.  https://github.com/orgs/autowarefoundation/discussions/3750
"
How to integrate standard NavSatFix message to autoware?,D_kwDOAnasMc4AVEGp,2023-08-14T22:28:17Z,zillur-av,3,Answered,DC_kwDOAnasMc4AZ5Rk,KYabuuchi,"I have transformed your point cloud map into the proper MGRS coordinate system.  (Also I down-sampled the map.)
This file will be helpful for the next time you create a map. :smile: 
Before uploading a point cloud map to the vector map builder, you need to apply such transformation then specify the MGRS grid (11SPV).

[georeferenced_pointcloud_map_0.3.zip](https://github.com/autowarefoundation/autoware/files/12405447/georeferenced_pointcloud_map_0.3.zip)

![Screenshot from 2023-08-22 14-46-01](https://github.com/autowarefoundation/autoware/assets/24854875/dfdc3b53-6269-46e3-afba-e95c823a489f)"
How to integrate standard NavSatFix message to autoware?,D_kwDOAnasMc4AVEGp,2023-08-14T22:28:17Z,zillur-av,3,Answered,DC_kwDOAnasMc4AZ6jm,zillur-av,How did you transform slam map and apply mgrs grid?
How to integrate standard NavSatFix message to autoware?,D_kwDOAnasMc4AVEGp,2023-08-14T22:28:17Z,zillur-av,3,Answered,DC_kwDOAnasMc4AZ7Y5,KYabuuchi,"It is difficult to explain the conversion process in detail. I will provide an overview.

I used two tools for the transformation. 
One of them is QGIS (https://qgis.org/en/site/), which allows exporting satellite images.
Firstly, I utilized QGIS to export satellite images of the area you conducted LiDAR-SLAM as TIFF format.

The second tool is Cloud Compare (https://www.danielgm.net/cc/).
Cloud Compare is a tool that facilitates visualization and coordinate transformations.
Using this tool, I loaded the TIFF images as point clouds and manually aligned your SLAM-generated map with it."
How to integrate standard NavSatFix message to autoware?,D_kwDOAnasMc4AVEGp,2023-08-14T22:28:17Z,zillur-av,3,Answered,DC_kwDOAnasMc4AZ7Zx,KYabuuchi,"I personally recommend modifying your LiDAR-SLAM to output point clouds in the MGRS, rather than relying on QGIS and CloudCompare for transformation. 
Utilizing QGIS and CloudCompare can be time-consuming and might introduce alignment errors."
How to integrate standard NavSatFix message to autoware?,D_kwDOAnasMc4AVEGp,2023-08-14T22:28:17Z,zillur-av,3,Answered,DC_kwDOAnasMc4AZ7iL,felixf4xu,"I'm also in a similar situation, so I'd like to check if the steps above can be achieved by `pcd_mapping` node (in autoware.ai/ros1 version)? If I upgrade it to autoware.auto/ros2, can `pcd_mapping` be used instead of the tools you mentioned?"
How to integrate standard NavSatFix message to autoware?,D_kwDOAnasMc4AVEGp,2023-08-14T22:28:17Z,zillur-av,3,Answered,DC_kwDOAnasMc4AZ9P3,zillur-av,"@KYabuuchi Sounds good, thanks for your help. I will look into that. Usually I do not see SLAM models mention anything about gnss coordinate systems, ROS based models simply ask for standard ROS messages. Could you please look into this issue https://github.com/orgs/autowarefoundation/discussions/3758? I got stuck."
How to integrate standard NavSatFix message to autoware?,D_kwDOAnasMc4AVEGp,2023-08-14T22:28:17Z,zillur-av,3,Answered,DC_kwDOAnasMc4AZ-FJ,KYabuuchi,"@felixf4xu Do you mention [ndt_mapping](https://github.com/autowarefoundation/autoware_ai_perception/tree/master/lidar_localizer/nodes/ndt_mapping)?  If so, I'm not familiar with it as I haven't used it before. 
 However, it does not seem to be fusing with GNSS, so it does not allow creating a georeferenced map."
Convert AckermannControlCommand to geometry_msgs/twist,D_kwDOAnasMc4AVEHo,2023-08-14T23:21:06Z,zillur-av,1,Answered,,,
Convert AckermannControlCommand to geometry_msgs/twist,D_kwDOAnasMc4AVEHo,2023-08-14T23:21:06Z,zillur-av,1,Answered,DC_kwDOAnasMc4AZqly,mitsudome-r,"The control modules in Autoware are using [vehicle parameters](https://github.com/autowarefoundation/sample_vehicle_launch/blob/main/sample_vehicle_description/config/vehicle_info.param.yaml) to generate ackemann control command. 
You can use the parameter `wheel_base` to calculate vehicle's angular velocity with the following equation:
angular_velocity_z = longitudinal_velocity * tan(steer_tire_angle) / wheel_base"
Convert AckermannControlCommand to geometry_msgs/twist,D_kwDOAnasMc4AVEHo,2023-08-14T23:21:06Z,zillur-av,1,Answered,DC_kwDOAnasMc4AZriI,zillur-av,I thought `steering_tire_rotation_rate` would be angular velocity z.
Software WG Meeting 2023/08/15,D_kwDOAnasMc4AVESZ,2023-08-15T06:52:41Z,mitsudome-r,0,Unanswered,,,
How can I integrate my electrical vehicle motors,D_kwDOAnasMc4AVEeg,2023-08-15T11:56:06Z,Hensbag,0,Unanswered,,,
All calculations for planning and control side are made for 2D,D_kwDOAnasMc4AVEkx,2023-08-15T14:25:49Z,brkay54,3,Answered,,,
All calculations for planning and control side are made for 2D,D_kwDOAnasMc4AVEkx,2023-08-15T14:25:49Z,brkay54,3,Answered,DC_kwDOAnasMc4AZswt,mehmetdogru,Since it will be more accurate and if no drawbacks it makes sense to me. Could you give more detail? Because calculating the distance between two waypoints in 2D and 3D is not very much of a work. Is there anything else you want to point out?
All calculations for planning and control side are made for 2D,D_kwDOAnasMc4AVEkx,2023-08-15T14:25:49Z,brkay54,3,Answered,DC_kwDOAnasMc4AZuKV,takayuki5168,"@brkay54 cc @mehmetdogru @TakaHoribe 
Some articles say when the slope angle is 5.7 degrees, it's called a steep slope.
In this case, the difference in waypoints' distance when assuming 2D and 3D is only 0.4%, and even when the slope angle is 11.3 degrees, the difference is 2%, which I think is enough small to ignore.

To drive on a steep slope, I feel the important thing is slope compensation in the controller rather than fixing 2D planning.

These are what I felt first about dealing with the steep slope. If you think the problem is the planning side, could you give me the reason."
All calculations for planning and control side are made for 2D,D_kwDOAnasMc4AVEkx,2023-08-15T14:25:49Z,brkay54,3,Answered,DC_kwDOAnasMc4AZvT6,TakaHoribe,"@brkay54 Thank you for giving the discussion.

> For example, while driving on high-slope roads, we are getting more FF gain because of 2D calculation

Do you use slope compensation? There are two options for the slope compensation:
- calculate the slope using the z-position of the trajectory (it is more accurate, but it requires a precise HD map)
- calculate the slope from the pitch angle (relatively unstable, but it does not require a precise HD map)

These both are working well in our environment. Would you give me more detail of your problem?"
All calculations for planning and control side are made for 2D,D_kwDOAnasMc4AVEkx,2023-08-15T14:25:49Z,brkay54,3,Answered,DC_kwDOAnasMc4AZvUO,TakaHoribe,"Of course, I agree that it is better to do all calculations in 3D. But I guess you have a more critical problem in the slope compensation or conversion between the target acceleration to your control command."
All calculations for planning and control side are made for 2D,D_kwDOAnasMc4AVEkx,2023-08-15T14:25:49Z,brkay54,3,Answered,DC_kwDOAnasMc4AZ3gP,nainaigetuide,@TakaHoribe What is the critical problem you are referring to？
Localization & Mapping WG Meeting 16/08/2023,D_kwDOAnasMc4AVFD3,2023-08-16T05:50:22Z,armaganarsln,0,Unanswered,,,
"Open AD Kit WG Meeting August 17, 2023",D_kwDOAnasMc4AVFQh,2023-08-16T10:32:18Z,oguzkaganozt,1,Answered,,,
"Open AD Kit WG Meeting August 17, 2023",D_kwDOAnasMc4AVFQh,2023-08-16T10:32:18Z,oguzkaganozt,1,Answered,DC_kwDOAnasMc4AZ85Q,chishengshih,"The instructions provided by Rohit from DanLaw was posted in [another thread](https://github.com/orgs/autowarefoundation/discussions/3764). Please have a try and post your comments or questions there. 

Daniel"
Reference Design WG Meeting (08/16/2023),D_kwDOAnasMc4AVFTD,2023-08-16T11:09:15Z,chishengshih,1,Answered,,,
Reference Design WG Meeting (08/16/2023),D_kwDOAnasMc4AVFTD,2023-08-16T11:09:15Z,chishengshih,1,Answered,DC_kwDOAnasMc4AZt99,chishengshih,"### Additional Participants:
* [x] Akinari Yamashita (TierIV)
* [x] Naoyori Tanzawa (TierIV)
* [x] Huei-Ru Tseng (ITRI)
* [x] Samet Kutuk
* [x] oguz
* [x] Armagan Arslan

### Notes:
* seL4 micro-Kernel:
 ** Provable security for autonomous vehicles:
 ** Intelligent vehicles: hacker's paradise to control engine, steering, and breaks. 
 ** To protect from being comprised. 
 ** (P.4) world's first correctness proof of OS
 ** Only protected-mode RTOS with sound and complete WCET analysis (ARMv6) In progress for RISC-V
 ** AArch64 is also in progress, but not x86.
 ** Communication channel is configured among different virtual machines/modules.
 ** (P.9) Microkernel provides the secure communications among the components. 
 ** uKernel enforces isolation.
 ** (P.13) much simple code, compared to Linux. 
 ** (P.15) Support multiple-core platforms. The transmitter and drivers can be executed on different cores. 
 ** (P.19) Autoware on seL4: Sunswift Solar Racing Car
 ** ROS 2 has an OS abstraction layer. The develoment is in progress.
 ** Rahul: what about the performance? seL4 is designed for real-time systems to guarantee timeliness.
 ** Any trial to QNX application to seL4? QNX using POSIX interface. It should be doable. 
 ** Q: (P.4) How is the correctness proof related to ISO26262? 
 ** Q: (P.5) How to define the module? is the channel similar to network channel?
 ** Q: (P.11) Between components/VMs, should channel or network be used to communicate? 
 ** Q: (P.13) What's the key for simple code for same functionalities? 
 * TierIV Guideline on L4 custom design guideline:
  ** Focus on vehicle design for L4
  ** Guideline [link](https://www.prnewswire.com/news-releases/announcement-of-the-release-of-guidelines-for-customizing-level-4-commercial-autonomous-vehicles-301861059.html?tc=eml_cleartime)
  ** 

### Action Items:
* discuss using TierIV as the reference "
Planning&Control WG Meeting 2023/08/17,D_kwDOAnasMc4AVFfw,2023-08-16T15:30:51Z,mehmetdogru,2,Answered,,,
Planning&Control WG Meeting 2023/08/17,D_kwDOAnasMc4AVFfw,2023-08-16T15:30:51Z,mehmetdogru,2,Answered,DC_kwDOAnasMc4AZvlQ,ahmeddesokyebrahim,"`Rerouting Static Obstacle` : 
- Discussion : https://github.com/orgs/autowarefoundation/discussions/3599
- Issue : https://github.com/autowarefoundation/autoware.universe/issues/4523
- PR : https://github.com/autowarefoundation/autoware.universe/pull/4524
- Demo : https://youtu.be/utBOc_KD1Qo"
Planning&Control WG Meeting 2023/08/17,D_kwDOAnasMc4AVFfw,2023-08-16T15:30:51Z,mehmetdogru,2,Answered,DC_kwDOAnasMc4AZ3Kw,TakaHoribe,"@mehmetdogru @armaganarsln 
I tested the AWSIM following the tutorial. It is not perfectly stable but works for both awsim-stable branch and main branch of the autoware.
https://tier4.github.io/AWSIM/GettingStarted/QuickStartDemo/

I faced some issues: 
- perception fails the first time with AWSIM
- build warnings need to be ignored in the awsim-stable branch (written in the tutorial)
- sometimes AWSIM fails to start (I restart it every time)
- requires a rich GPU (I tested with RTX 3070Ti, but sometimes it may be not enough)
- traffic light detection seems not working


https://github.com/autowarefoundation/autoware/assets/21360593/550fa278-a2ed-4035-a251-2f10e46e8619

In TIERIV, we don't use AWSIM for daily development but use it for the integration test before release."
Planning&Control WG Meeting 2023/08/17,D_kwDOAnasMc4AVFfw,2023-08-16T15:30:51Z,mehmetdogru,2,Answered,DC_kwDOAnasMc4AZ6sF,xmfcx,"Thanks for the test, I've posted my results in https://github.com/autowarefoundation/autoware-projects/issues/67

Your test is mostly without obstacles. Can you run it with more cars too? I think waiting a bit before starting spawns some more vehicles.

Maybe you can post your results in @WJaworskiRobotec 's issue too."
2023-08-17 Racing Working Group Meeting,D_kwDOAnasMc4AVF5r,2023-08-17T05:10:50Z,pojenwang,0,Unanswered,,,
Prediction module can not predict small objects,D_kwDOAnasMc4AVG7u,2023-08-18T09:36:00Z,Zeysthingz,4,Answered,,,
Prediction module can not predict small objects,D_kwDOAnasMc4AVG7u,2023-08-18T09:36:00Z,Zeysthingz,4,Answered,DC_kwDOAnasMc4AZyUp,Zeysthingz,@kaancolak @mehmetdogru @lexavtanke @miursh 
Prediction module can not predict small objects,D_kwDOAnasMc4AVG7u,2023-08-18T09:36:00Z,Zeysthingz,4,Answered,DC_kwDOAnasMc4AZ73o,mehmetdogru,Thanks for creating the discussion @Zeysthingz . Do you mind sharing some videos and screenshots which explains the issue?
Prediction module can not predict small objects,D_kwDOAnasMc4AVG7u,2023-08-18T09:36:00Z,Zeysthingz,4,Answered,DC_kwDOAnasMc4AZ53X,kaancolak,"@Zeysthingz Did you check the tracking parameters on the ""data_association_matrix.param.yaml""? It defines constraints to associate objects from the previous position to the current position.  

As I look at the association matrix, the unknown to unknown association value of min_iou_matrix is 0.0001 however this value overrides as a 1e-2 when calling [object_recognition_utils::get2dIoU](https://github.com/autowarefoundation/autoware.universe/blob/main/perception/multi_object_tracker/src/data_association/data_association.cpp#L209) inside on the tracking algorithm, minimum union area giving as a parameter. For small objects probably it's causing the problem(small polygon boundaries + localization error). 

Maybe we can define [min_union_iou_area](https://github.com/autowarefoundation/autoware.universe/blob/main/perception/multi_object_tracker/src/data_association/data_association.cpp#L209) something like `const double min_union_iou_area = min_iou * 1e-1;` 

Miura-san @miursh , what do you think about it? 

"
Prediction module can not predict small objects,D_kwDOAnasMc4AVG7u,2023-08-18T09:36:00Z,Zeysthingz,4,Answered,DC_kwDOAnasMc4AZ7gI,miursh,"
@YoshiRi @badai-nguyen Do you guys have any suggestions or have met similar problems?"
Prediction module can not predict small objects,D_kwDOAnasMc4AVG7u,2023-08-18T09:36:00Z,Zeysthingz,4,Answered,DC_kwDOAnasMc4AZ7jb,miursh,@kaancolak @Zeysthingz  I think `min_iou:0.01` (10cm x 10cm) might cause this problem. How big is this object?
Prediction module can not predict small objects,D_kwDOAnasMc4AVG7u,2023-08-18T09:36:00Z,Zeysthingz,4,Answered,DC_kwDOAnasMc4AZ7jf,YoshiRi,"Generally speaking, the following cases can be considered when an detected object is not appeared in tracking.

- Detection output is unstable, with some output at each frame and some not.
- There are problem with association

## problem with association

MOT has following association gate, which reject relationships that seem unlikely happen.

- distance gate
- area size gate
- angle gate
- mahalanobis distance gate
- 2d IoU gate

I guess this trouble happened in 2d IoU gate.

### Fix 2d IoU gate
As @kaancolak says, `get2dIoU` function returns 0 IoU when object area is smaller than `min_union_area`=0.01.
If this causes a problem, you have two choices:

- set smaller min_union_iou_area
- set `min_iou_matrix` to zero like following code.

```
    min_iou_matrix: # If value is negative, it will be ignored.
      #UNKNOWN, CAR,   TRUCK, BUS,    TRAILER,  MOTORBIKE, BICYCLE, PEDESTRIAN
      [0.0,  0.1,   0.1,   0.1,    0.1,      0.1,       0.1,     0.1,       #UNKNOWN
```"
Prediction module can not predict small objects,D_kwDOAnasMc4AVG7u,2023-08-18T09:36:00Z,Zeysthingz,4,Answered,DC_kwDOAnasMc4AZ7kY,YoshiRi,"I have adjusted this `min_iou` value to a smaller value in the past when I could not track a road sign pole.   This case seems similar to that, but 0.01 means a very small size, so I am not sure if the overlap between the cones is that small.

@Zeysthingz I think easiest solution is to change your `min_iou_matrix param` in [data_association_matrix.param.yaml](https://github.com/autowarefoundation/autoware.universe/blob/9407021069d20e7867506ff3d03e571d1b569197/perception/multi_object_tracker/config/data_association_matrix.param.yaml#L59)."
Prediction module can not predict small objects,D_kwDOAnasMc4AVG7u,2023-08-18T09:36:00Z,Zeysthingz,4,Answered,DC_kwDOAnasMc4AavYZ,wbq0206,"To my knowledge, the current architecture does not have a very comprehensive approach to handling low obstacles"
Prediction module can not predict small objects,D_kwDOAnasMc4AVG7u,2023-08-18T09:36:00Z,Zeysthingz,4,Answered,DC_kwDOAnasMc4Aa_99,cycyc1949,"There is currently no good way, perhaps to add vision for low obstacle detection 2d recognition and then use IPM projection"
setup error cuda,D_kwDOAnasMc4AVHDU,2023-08-18T12:03:50Z,Hensbag,0,Unanswered,,,
Unable to run multiple pcd files in logging simulator,D_kwDOAnasMc4AVHFi,2023-08-18T12:53:51Z,hakanaktass,2,Answered,,,
Unable to run multiple pcd files in logging simulator,D_kwDOAnasMc4AVHFi,2023-08-18T12:53:51Z,hakanaktass,2,Answered,DC_kwDOAnasMc4AZyva,kminoda,"Hi, thank you for your interest.

Please follow the instruction in [the readme on map_loader](https://github.com/autowarefoundation/autoware.universe/blob/main/map/map_loader/README.md)(the ""directory structure"" subsection) and let us know if the issue persists.

In addition, it may be helpful for you as well to take a look into tier4_map.launch.py and autoware_launch to understand how the parameters are passed."
Unable to run multiple pcd files in logging simulator,D_kwDOAnasMc4AVHFi,2023-08-18T12:53:51Z,hakanaktass,2,Answered,DC_kwDOAnasMc4AZ8X_,hakanaktass,"@kminoda Thank you for our reply, I hope you are well. I want to ask some questions about this:

- I prepared divided pointclouds and their metadata using [pointcloud_divider](https://github.com/MapIV/pointcloud_divider).
- When I try to launch autoware with this map files and their metadata, autoware gives a output as ```Create PCD metadata, as the pointcloud is a single file.``` at https://github.com/autowarefoundation/autoware.universe/blob/ab1a2e9fd71fc0f3c328853b01bb18395ee2f1a9/map/map_loader/src/pointcloud_map_loader/pointcloud_map_loader_node.cpp#L111C98-L111C98
- So, I want to ask do we need single pointcloud (not divided) also? Autoware try to load pointcloud_map.pcd default.
- Do I need fill the https://github.com/autowarefoundation/autoware.universe/blob/ab1a2e9fd71fc0f3c328853b01bb18395ee2f1a9/launch/tier4_map_launch/launch/map.launch.py#L173-L176 with all pcd files names which I divided?

thanks in advance
"
Unable to run multiple pcd files in logging simulator,D_kwDOAnasMc4AVHFi,2023-08-18T12:53:51Z,hakanaktass,2,Answered,DC_kwDOAnasMc4AZ8f4,kminoda,"Does your map file directory follow the structure defined in [the readme on map_loader](https://github.com/autowarefoundation/autoware.universe/blob/main/map/map_loader/README.md)? 

With the default setting, Autoware should work with the following directory structure. 
```
sample-map-rosbag
├── lanelet2_map.osm
├── pointcloud_map.pcd
│ ├── A.pcd
│ ├── B.pcd
│ ├── C.pcd
│ └── ...
├── map_projector_info.yaml
└── pointcloud_map_metadata.yaml
```

Maybe it would be helpful to share your directory structure like above."
Unable to run multiple pcd files in logging simulator,D_kwDOAnasMc4AVHFi,2023-08-18T12:53:51Z,hakanaktass,2,Answered,DC_kwDOAnasMc4AaMNN,hakanaktass,"@kminoda Hi, sorry for late reply. I was in a vacation.

Our structure like this:

test-map
├── lanelet2_map.osm
├── pointcloud_map_0_0.pcd
├── pointcloud_map_0_20.pcd
├── pointcloud_map_0_40.pcd
└── pointcloud_map_metadata.yaml

I didn't put concatenated pointcloud (pointcloud_map.pcd) on map folder, should I put undivided pointcloud at this directory? I also not prepared map_projector_info.yaml for lanelet2 map, it is necessary for dynamic pointcloud map loading?

 thanks in advance.
"
Unable to run multiple pcd files in logging simulator,D_kwDOAnasMc4AVHFi,2023-08-18T12:53:51Z,hakanaktass,2,Answered,DC_kwDOAnasMc4AaNMV,kminoda,"No, it's the directory and not the pcd file. Sorry for the confusing names (it's one of the issue in argument of Autoware)"
Unable to run multiple pcd files in logging simulator,D_kwDOAnasMc4AVHFi,2023-08-18T12:53:51Z,hakanaktass,2,Answered,DC_kwDOAnasMc4AaOgu,hakanaktass,It is working correctly now. Thanks for your help. 
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,,,
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AZ2R7,maxime-clem,I am observing the same issue with the latest universe.
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AZ2VX,kminoda,"You are referring to this tutorial, right? https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/rosbag-replay-simulation/

I updated my Autoware workspace in local desktop and confirmed that the above tutorial works fine. Also, TIER IV's internal CI also confirms that the localization with sample rosbag is working fine with the latest Autoware. Would you check if your workspace is correctly updated? Clean installing Autoware may help."
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AZ2Zb,kminoda,"I just noticed that above two examples both did not launch planning, control, and perception modules.

Launching logging_simulator without any additional arguments, I confirmed that the same issue happens. Apparently the planning modules are failing.

Depending on what you would like to do, but as a quick solution, you may use following command:
```bash
ros2 launch autoware_launch logging_simulator.launch.xml ... planning:=false
```
(given that logging_simulator are mainly used to run localization and perception off-board)"
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AZ2l8,Hensbag,"I used the planning:=false argument but still the same issue happened. I'll try the reinstall the autoware.
![image](https://github.com/autowarefoundation/autoware/assets/122668994/3b5bcda1-5dec-4f4f-bf3f-a625fe2bd4e0)
[launch.log](https://github.com/autowarefoundation/autoware/files/12392969/launch.log)
"
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AZ3Ms,shmpwk,"I had the same issue. It is not solved yet. (Autoware: the newest version 8/21 11:30) 

Looking at your launch log, a parking module has a problem...?
```
1692449818.6138940 [ERROR] [component_container-64]: process has died [pid 4612, exit code -11, cmd '/opt/ros/humble/lib/rclcpp_components/component_container --ros-args -r __node:=parking_container -r __ns:=/planning/scenario_planning/parking -p use_sim_time:=True -p wheel_radius:=0.383 -p wheel_width:=0.235 -p wheel_base:=2.79 -p wheel_tread:=1.64 -p front_overhang:=1.0 -p rear_overhang:=1.1 -p left_overhang:=0.128 -p right_overhang:=0.128 -p vehicle_height:=2.5 -p max_steer_angle:=0.7'].
```

I debuged with GDB and I found it died in `costmap_generator`.
But actually, the last commit day of the costmap_generator is 3 month ago. It is hard to assume the costmap_generator has a problem... 

```
Using host libthread_db library ""/lib/x86_64-linux-gnu/libthread_db.so.1"".
Core was generated by `/opt/ros/humble/lib/rclcpp_components/component_container --ros-args -r __node:'.
Program terminated with signal SIGSEGV, Segmentation fault.
#0  0x00007f5663d6316a in (anonymous namespace)::isInParkingLot (lanelet_map_ptr=..., current_pose=...)
--Type <RET> for more, q to quit, c to continue without paging--
    at /home/shmpwk/workspace/autoware/src/universe/autoware.universe/planning/costmap_generator/nodes/costmap_generator/costmap_generator_node.cpp:117
117	  const lanelet::Point3d search_point(lanelet::InvalId, p.x, p.y, p.z);
[Current thread is 1 (Thread 0x7f568df66f40 (LWP 1679794))]
(gdb) bt
#0  0x00007f5663d6316a in (anonymous namespace)::isInParkingLot (lanelet_map_ptr=std::shared_ptr<lanelet::LaneletMap> (use count 1, weak count 0) = {...}, current_pose=...)
    at /home/shmpwk/workspace/autoware/src/universe/autoware.universe/planning/costmap_generator/nodes/costmap_generator/costmap_generator_node.cpp:117
#1  0x00007f5663d66f11 in CostmapGenerator::isActive (this=0x5633266a08b0)
    at /home/shmpwk/workspace/autoware/src/universe/autoware.universe/planning/costmap_generator/nodes/costmap_generator/costmap_generator_node.cpp:353
#2  0x00007f5663d664ab in CostmapGenerator::onTimer (this=0x5633266a08b0)
    at /home/shmpwk/workspace/autoware/src/universe/autoware.universe/planning/costmap_generator/nodes/costmap_generator/costmap_generator_node.cpp:298
#3  0x00007f5663eb43b8 in std::__invoke_impl<void, void (CostmapGenerator::*&)(), CostmapGenerator*&> (
    __f=@0x563326748070: (void (CostmapGenerator::*)(CostmapGenerator * const)) 0x7f5663d66474 <CostmapGenerator::onTimer()>, __t=@0x563326748080: 0x5633266a08b0) at /usr/include/c++/11/bits/invoke.h:74
#4  0x00007f5663eac56b in std::__invoke<void (CostmapGenerator::*&)(), CostmapGenerator*&> (
    __fn=@0x563326748070: (void (CostmapGenerator::*)(CostmapGenerator * const)) 0x7f5663d66474 <CostmapGenerator::onTimer()>) at /usr/include/c++/11/bits/invoke.h:96
#5  0x00007f5663ea3d3f in std::_Bind<void (CostmapGenerator::*(CostmapGenerator*))()>::__call<void, , 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) (this=0x563326748070, __args=...)
    at /usr/include/c++/11/functional:420
#6  0x00007f5663e8cfc3 in std::_Bind<void (CostmapGenerator::*(CostmapGenerator*))()>::operator()<, void>() (this=0x563326748070) at /usr/include/c++/11/functional:503
#7  0x00007f5663e87e96 in rclcpp::GenericTimer<std::_Bind<void (CostmapGenerator::*(CostmapGenerator*))()>, (void*)0>::execute_callback_delegate<std::_Bind<void (CostmapGenerator::*(CostmapGenerator*))()>, (void*)0>() (this=0x563326748040) at /opt/ros/humble/include/rclcpp/rclcpp/timer.hpp:244
#8  0x00007f5663e7f403 in rclcpp::GenericTimer<std::_Bind<void (CostmapGenerator::*(CostmapGenerator*))()>, (void*)0>::execute_callback() (this=0x563326748040)
    at /opt/ros/humble/include/rclcpp/rclcpp/timer.hpp:230
#9  0x00007f568e7ccde1 in rclcpp::Executor::execute_any_executable (this=0x5633260d0fc0, any_exec=...) at ./src/rclcpp/executor.cpp:518
#10 0x00007f568e7d46d0 in rclcpp::executors::SingleThreadedExecutor::spin (this=0x5633260d0fc0) at ./src/rclcpp/executors/single_threaded_executor.cpp:37
#11 0x00005633251865d7 in main (argc=<optimized out>, argv=<optimized out>) at ./src/component_container.cpp:28
```

```
(gdb) f 0
#0  0x00007f5663d6316a in (anonymous namespace)::isInParkingLot (lanelet_map_ptr=std::shared_ptr<lanelet::LaneletMap> (use count 1, weak count 0) = {...}, current_pose=...)
    at /home/shmpwk/workspace/autoware/src/universe/autoware.universe/planning/costmap_generator/nodes/costmap_generator/costmap_generator_node.cpp:117
117	  const lanelet::Point3d search_point(lanelet::InvalId, p.x, p.y, p.z);
(gdb) p p
$4 = (const geometry_msgs::msg::Point_<std::allocator<void> > &) <error reading variable: Cannot access memory at address 0x28>
(gdb) p p.x
Cannot access memory at address 0x28
(gdb) p p.y
Cannot access memory at address 0x30
(gdb) p p.z
Cannot access memory at address 0x38
(gdb) p lanelet::InvalId
$5 = 0
```

"
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AZ76E,muratgozum45,"Hi, I have a problem in the rosbag replay simulation as well. I was following the instructions given in the https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/rosbag-replay-simulation/. where there is a tutorial for rosbag replay simulation. However, when I followed the instructions and implemented it, this message shows up
/autoware/install/common_sensor_launch/share/common_sensor_launch/launch/nebula_node_container.launch.py:81: RuntimeWarning: No config file provided, using sensor model default
  warnings.warn(""No config file provided, using sensor model default"", RuntimeWarning)
In the GUI screen of Rviz, the Global Status is having error (Global Status: Error). Does anyone know how to solve this issue?
Thanks"
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AZ7-W,shmpwk,I heard from the developper that the warning is intended for now.
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AZ7_k,muratgozum45,"thanks, so shall i understand that it is a temporary problem?"
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AZ8Fv,shmpwk,There is no bad effect on Autoware. The warning message will be disappeared in the future.
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AZ8IS,muratgozum45,"Thanks for your answer but also my map cannot be opened the way it shows on the link and there is an error due to fixed frame. 
<img width=""914"" alt=""image"" src=""https://github.com/autowarefoundation/autoware/assets/142971273/dab21ca7-206b-4877-b2a5-162b3259cf91"">
It is strange because when I tried the same thing for the planning simulator tutorial example it did work. do you know the reason for this problem?"
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AZ8Jt,shmpwk,"No, we are still investigating the cause of the problem."
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AZ8KD,muratgozum45,"Ok, thanks. I will appreciate it if you acknowledge me about the solution when you guys obtain."
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaNr8,shmpwk,"I found that the newest Autoware (8/31) does not die thanks to https://github.com/autowarefoundation/autoware.universe/pull/4696.
However, still the Autoware behaves like https://github.com/orgs/autowarefoundation/discussions/3747#discussioncomment-6777212. "
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaNtA,shmpwk,"Current error
```
[component_container-66] [ERROR] [1693463124.456487681] [planning.scenario_planning.parking.costmap_generator]: Could not find a connection between 'map' and 'base_link' because they are not part of the same tree.Tf has two or more unconnected trees.
```"
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaN6H,shmpwk,"After clean installing with the latest Autoware, It works fine for me!"
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaBEu,TaikiYamada4,"Hi, I found that your launch.log has many jumping backs in time.
Maybe something's going wrong with the clock in the simulation.
I think you have typed the command below according to the turorial. (EDIT: Which is already fixed, so it no longer shows this command below.)
```
source ~/autoware/install/setup.bash
ros2 bag play ~/autoware_map/sample-rosbag/sample.db3 -r 0.2 -s sqlite3 --clock 100
```
Could you try playing the rosbag without --clock like this?
```
source ~/autoware/install/setup.bash
ros2 bag play ~/autoware_map/sample-rosbag/sample.db3 -r 0.2 -s sqlite3
```

"
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaBL_,muratgozum45,"Hello Taiki,
Thanks a lot. I did play it with the command as you said which does not have clock. It is working but I still have problems about the visualization.
<img width=""922"" alt=""image"" src=""https://github.com/autowarefoundation/autoware/assets/142971273/234c4542-9771-4894-8d88-b4ca2423ea84"">

As shown in the picture, I cannot see the map even though the rosbag is playing and the global status is ok, somehow I cannot see the 3d map."
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaBNv,TaikiYamada4,"I see...
I also see that the AutowareStatePanel on the left is not changing at all.
The Localization part should turn from INIT to UNINITIALIZED when you launch Autoware.
Could you share your entire log when you launch Autoware?
It should be in ~/.ros/log/"
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaBPk,muratgozum45,"[launch.log](https://github.com/autowarefoundation/autoware/files/12437215/launch.log)
Here it is."
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaBVn,TaikiYamada4,"Thanks a lot!
But I'm afraid to say that I will check this out after the weekends."
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaNSp,TaikiYamada4,"Thank you for your patience.
I saw your log file, and it seems that the `pointcloud_map_loader` in the `map_loader` package has not been launched, which is quite strange since the `lanelet2_map_loader` is loaded.
So I recommend you to clean build map_loader first. 
Remove `install/map_loader` and `build/map_loader`, and then
colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release --packages-up-to map_loader
If this doesn't work, I'm afraid to say clean building the entire Autoware is the next approach as far as I know. (which quite works a lot)"
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaNsU,shmpwk,"@TaikiYamada4 
I'm curious if the current Autoware works well on your environment."
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaNtq,TaikiYamada4,@shmpwk Everything's fine to me with the latest main branch Autoware. I also clean built and tried logging simulator this morning.
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaNty,shmpwk,Great to hear that! I will clean install!!
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaNvf,muratgozum45,"Hello TakiYamada4,
Thank you very much  for your support. So I will need to clean install/map_loader and build/map_loader, and re install them using the command: colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release --packages-up-to map_loader. Then I will let you know whether it changes anything."
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaNyb,muratgozum45,"Unfortunately, the same thing happened again. So, I will try the hardest way I guess (delete autoware completely) and re-install."
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaPoQ,muratgozum45,I did uninstall autoware and reinstalled it which took 5 hours to do so.  But i am having the same issue.can it be related to the laptop performans?my laptop processor is 6th generation...
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaP4x,kminoda,"Note that, unfortunately, clean installing the Autoware is quite common approach for running the latest Autoware.

Please double check if you've followed the Autoware tutorial. All the command shall be executed as it is written down. Taking a glance at the log you've shared, `map_loader` does not seem to output any log about loading the map, which should appear when it successfully loads the map. So, my initial guess is that the map path is wrong."
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaQeB,muratgozum45,"Hi all,
Thank you very much for the helpful messages. However, when I use planning_simulator , I can see that the map_loader is running whereas for the logging_simulator it is not running. I can see the map with the planning_simulator. Here are the logs with planning_simulator and the logging_simulator.
[logging_simulator.launch.log](https://github.com/autowarefoundation/autoware/files/12495726/logging_simulator.launch.log)
[planning_simulator.launch.log](https://github.com/autowarefoundation/autoware/files/12495728/planning_simulator.launch.log)
"
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaQgf,kminoda,"Let me confirm again: Did you exactly follow the Autoware tutorial?

Also, could you provide the map directory structure? e.g. with `tree` command.

Also, please check the following results and share with us:
- `ros2 node info /map/pointcloud_map_loader`
- `ros2 node info /map/lanelet2_map_loader`
- `ros2 topic echo /map/pointcloud_map --field header.stamp`
"
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaQkP,TaikiYamada4,"I also want to check more logs that won't be saved to the log files in .ros/log.
Can you try `>` or `| tee` to save all console outputs from Autoware?
(This command doesn't show but record stuff on the console)
```
ros2 launch autoware_launch logging_simulator.launch.xml ... > logging_simulator_log.txt
```
(This command shows and record stuff on the console)
```
ros2 launch autoware_launch logging_simulator.launch.xml ... | tee logging_simulator_log.txt
```"
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaQp1,muratgozum45,"Dear @TaikiYamada4 
Here is the logging_simulator_log.txt attached:
[logging_simulator_log.txt](https://github.com/autowarefoundation/autoware/files/12496382/logging_simulator_log.txt)
"
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaQoG,muratgozum45,"Dear @kminoda ,
For your first question, I did apply all the commands exactly the same as this link:
https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/rosbag-replay-simulation/
Can you tell me the exact command for the map structure?
For your other questions using the logging.simulator
ros2 node info /map/pointcloud_map_loader:
Unable to find node '/map/pointcloud_map_loader'
ros2 node info /map/lanelet2_map_loader
/map/lanelet2_map_loader
  Subscribers:
    /clock: rosgraph_msgs/msg/Clock
    /map/map_projector_info: tier4_map_msgs/msg/MapProjectorInfo
    /parameter_events: rcl_interfaces/msg/ParameterEvent
  Publishers:
    /map/vector_map: autoware_auto_mapping_msgs/msg/HADMapBin
    /parameter_events: rcl_interfaces/msg/ParameterEvent
    /rosout: rcl_interfaces/msg/Log
  Service Servers:
    /map/lanelet2_map_loader/describe_parameters: rcl_interfaces/srv/DescribeParameters
    /map/lanelet2_map_loader/get_parameter_types: rcl_interfaces/srv/GetParameterTypes
    /map/lanelet2_map_loader/get_parameters: rcl_interfaces/srv/GetParameters
    /map/lanelet2_map_loader/list_parameters: rcl_interfaces/srv/ListParameters
    /map/lanelet2_map_loader/set_parameters: rcl_interfaces/srv/SetParameters
    /map/lanelet2_map_loader/set_parameters_atomically: rcl_interfaces/srv/SetParametersAtomically
  Service Clients:

  Action Servers:

  Action Clients:
 ros2 topic echo /map/pointcloud_map --field header.stamp


It does not echo anything for  ros2 topic echo /map/pointcloud_map --field header.stamp.

"
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaQs2,kminoda,"Also, could you provide the map directory structure? e.g. with `tree` command.


```
ros2 node info /map/pointcloud_map_loader:
Unable to find node '/map/pointcloud_map_loader'
```
This is a problem. Please check if the pcd file is correctly created and loaded."
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaQuD,muratgozum45,"Here is the map structure after typing the tree command:
 tree
.
├── lanelet2_map.osm
└── pointcloud_map.pcd

0 directories, 2 files"
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaaKL,TaikiYamada4,"@muratgozum45 
I came up with another way to debug your situation.
Could you try this?
(Be careful that your map_path suits your environment.)
```
ros2 launch autoware_launch logging_simulator.launch.xml map_path:=$HOME/autoware_map/sample-map-rosbag vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit vehicle:=false system:=false sensing:=false localization:=false perception:=false planning:=false control:=false | tee logging_simulator_log.txt
```
This command disables all components except map related stuff."
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaaMN,muratgozum45,"Hey man,
I did enter this command and I can see the map now without any error.  Here are attached my log file and the picture of the map.
<img width=""921"" alt=""autoware_map"" src=""https://github.com/autowarefoundation/autoware/assets/142971273/07ae87b9-e5a3-4f35-882a-984a07a111dc"">
[logging_simulator_log.txt](https://github.com/autowarefoundation/autoware/files/12535343/logging_simulator_log.txt)

"
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaaNf,TaikiYamada4,"Nice to hear that!
Then, can you disable the perception part only?
```
ros2 launch autoware_launch logging_simulator.launch.xml map_path:=$HOME/autoware_map/sample-map-rosbag vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit perception:=false| tee logging_simulator_log.txt
```"
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaaVC,muratgozum45,"Hey man, 
Yes I did enter the command. Here is the log data.
[logging_simulator_log.txt](https://github.com/autowarefoundation/autoware/files/12535832/logging_simulator_log.txt)
"
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaaWx,TaikiYamada4,"~~Thanks, well actually this was not I expected.~~
~~How about disabling localization too.~~
```
ros2 launch autoware_launch logging_simulator.launch.xml map_path:=$HOME/autoware_map/sample-map-rosbag vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit localization:=false perception:=false | tee logging_simulator_log.txt
```"
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaaXu,TaikiYamada4,"Oh wait, please forget the previous reply I made. Sorry for the confusion.
Is the map visualized when you disable the perception part only?"
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaaYt,muratgozum45,Yes the map is still being visualized.thanks for the help.but what is the main issue?and is it possible for me to play the bag now with no problem?
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AaazM,muratgozum45,Could be the issue related to me not having CUDA and NVIDIA GPU ?
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AacXK,TaikiYamada4,"That might be one of the reasons, but not having CUDA should only affect the perception part not map loading.
If you are not trying to use the perception part for now adding `perception:=false` to your `ros2 launch` command will work."
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AacwQ,muratgozum45,"I see. Actually my plan is running the perception stack for the object detection. As far as I know, some configurations in the perception stack can be run without needing CUDA:
https://autowarefoundation.github.io/autoware-documentation/galactic/how-to-guides/running-autoware-without-cuda/
Is there anyway to fix perception part for my Autoware?"
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4Aac7W,TaikiYamada4,"Oh I see.
As the linked page says, 

> Of these five configurations, only the last one (euclidean_cluster) can be run without CUDA.

So could you try `lidar_detection_model:=clustering` and delete `perception:=false`
```
ros2 launch autoware_launch logging_simulator.launch.xml map_path:=$HOME/autoware_map/sample-map-rosbag vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit lidar_detection_model:=clustering | tee logging_simulator_log.txt
```"
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4Aac-J,muratgozum45,"Hey man,
I did try this but the problem with the map occurred again. Here are the log and the picture attached.
[logging_simulator_log_euclidean_cluster.txt](https://github.com/autowarefoundation/autoware/files/12546148/logging_simulator_log_euclidean_cluster.txt)
<img width=""951"" alt=""map_euclidean_clustering"" src=""https://github.com/autowarefoundation/autoware/assets/142971273/fc3612cd-bef4-4cd8-bcf2-6868c0368661"">
"
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4Aac-Z,TaikiYamada4,What kind a error the global status on the upper left is throwing?
Rosbag replay simulation doesn't work properly,D_kwDOAnasMc4AVHp-,2023-08-19T13:05:42Z,Hensbag,11,Answered,DC_kwDOAnasMc4AadAh,muratgozum45,It says Frame[map] does not exist.
launch file parameters are confused,D_kwDOAnasMc4AVHww,2023-08-19T16:27:16Z,J-xinyu,1,Answered,,,
launch file parameters are confused,D_kwDOAnasMc4AVHww,2023-08-19T16:27:16Z,J-xinyu,1,Answered,DC_kwDOAnasMc4AaQCB,badai-nguyen,"@J-xinyu I appreciate your requests and strongly argee with you. 
I think a potential solution for this matter is to omit the defaut parameter values in launch file at the lower level. However it could put challenges for who interest in testing a single autoware module like perception or planning. 
We, TIER IV, has started the discussion internally on this topic and hope could make a proposal open soon. 
It's very nice if you could share any idea or proposal that you might have. 


"
launch file parameters are confused,D_kwDOAnasMc4AVHww,2023-08-19T16:27:16Z,J-xinyu,1,Answered,DC_kwDOAnasMc4AaSUv,J-xinyu,"I think we should remove some default parameter values to make sure that people who use Autoware in full have a good experience. For users who want to test specific modules separately, we should provide a launch file like 'xxx_test.launch.xml'."
launch file parameters are confused,D_kwDOAnasMc4AVHww,2023-08-19T16:27:16Z,J-xinyu,1,Answered,DC_kwDOAnasMc4Aa-ME,xmfcx,@badai-nguyen I am working on https://github.com/xmfcx/one_launch to completely overhaul the launch system. Please add me to your discussions too if possible.
Join multiple lanelets,D_kwDOAnasMc4AVHx0,2023-08-19T17:02:34Z,zillur-av,1,Answered,,,
Join multiple lanelets,D_kwDOAnasMc4AVHx0,2023-08-19T17:02:34Z,zillur-av,1,Answered,DC_kwDOAnasMc4AZ0x7,zillur-av,"I got it. Have to use ""Add joint lanelet"" option."
Lanelet2 map is not loading properly,D_kwDOAnasMc4AVI3x,2023-08-21T01:40:29Z,zillur-av,1,Answered,,,
Lanelet2 map is not loading properly,D_kwDOAnasMc4AVI3x,2023-08-21T01:40:29Z,zillur-av,1,Answered,DC_kwDOAnasMc4AZ5It,KYabuuchi,"It seems that the error is occurring because your map is not geo-referenced, yet it is being loaded as an MGRS coordinate system.
When loading the map, specifying the `Local coordinate` option should allow it to be loaded correctly.

Please refer to the [map_projection_loader README](https://github.com/autowarefoundation/autoware.universe/blob/c09441be8a605d847da9c528f7cfb851a51b5adc/map/map_projection_loader/README.md)  and try adding the `map_projector_info.yaml` to use the local coodinate."
autoware.universe algorithm questions,D_kwDOAnasMc4AVI4p,2023-08-21T02:07:01Z,zzx568730371,1,Answered,,,
autoware.universe algorithm questions,D_kwDOAnasMc4AVI4p,2023-08-21T02:07:01Z,zzx568730371,1,Answered,DC_kwDOAnasMc4AZ2Yc,maxime-clem,"In general you want to create a new ROS2 node that implements your algorithm. I assume you are already familiar with ROS2, otherwise you probably should follow the official tutorials: https://docs.ros.org/en/humble/Tutorials.html

First, you should get a good understanding of the architecture of Autoware: 
- Overview: https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-architecture/
- Details (may not be up to date): https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-architecture/node-diagram/

Then, you should identify how your algorithm will integrate with Autoware, which means answering the following questions:
- What data do I need (i.e., which topics your node will subscribe to).
- What data do I produce (i.e., which topics does your node publishes to).
- Who will use the data I produce (i.e., which existing nodes need to have their launch configuration modified to subscribe to your topics).

Once you can answer these questions, you will be able to implement the interface (i.e., subscribers and publishers) of your node and can then implement your algorithm."
Greeting from RumiCar,D_kwDOAnasMc4AVI4z,2023-08-21T02:10:02Z,Rumika685,0,Unanswered,,,
2023-08-21 ODD working group weekly meeting (154),D_kwDOAnasMc4AVJD8,2023-08-21T08:05:05Z,Igata-ctrl,0,Unanswered,,,
Fine-tuning lidar_centerpoint's model,D_kwDOAnasMc4AVJLh,2023-08-21T10:18:13Z,MechanoPixel,1,Answered,,,
Fine-tuning lidar_centerpoint's model,D_kwDOAnasMc4AVJLh,2023-08-21T10:18:13Z,MechanoPixel,1,Answered,DC_kwDOAnasMc4AZ-Fn,amc-nu,"@MechanoPixel 
ONNX is typically used to distribute models. This format makes the model framework independent and usually only contains and uses a standard set of layers. Additionally, ONNX is hardware-independent, allowing deployment to multiple inference devices, such as GPUs, MultiCore, FPGAs, GSP, etc.
As you probably know, Autoware uses Nvidia GPUs for inference, so the ONNX model is converted to a TensorRT engine file that optimizes the weights for its use with Nvidia GPUs.
I am not a developer of Autoware's CenterPoint node. However, having a quick look, you can see that:
1. TIER IV uses a [mmdetection3d](https://github.com/open-mmlab/mmdetection3d/blob/main/configs/centerpoint/centerpoint_pillar02_second_secfpn_8xb4-cyclic-20e_nus-3d.py) version. 
2. You can compare the ONNX model and the config file using https://netron.app/"
Fine-tuning lidar_centerpoint's model,D_kwDOAnasMc4AVJLh,2023-08-21T10:18:13Z,MechanoPixel,1,Answered,DC_kwDOAnasMc4AZ--J,MechanoPixel,"Thank you for answering! Is it possible to convert from the trained .pth model to .onnx for use with the original node? I'm not too familiar with how they separated the `voxel_encoder` and `bbox_head` parts. I don't appear to have access to TierIV's repository, so I cannot see their documentation."
2023-08-23 Simulation Working group Meeting,D_kwDOAnasMc4AVJjE,2023-08-21T18:54:49Z,WJaworskiRobotec,0,Unanswered,,,
Software WG Meeting 2023/08/22,D_kwDOAnasMc4AVKUV,2023-08-22T14:41:29Z,xmfcx,1,Answered,,,
Software WG Meeting 2023/08/22,D_kwDOAnasMc4AVKUV,2023-08-22T14:41:29Z,xmfcx,1,Answered,DC_kwDOAnasMc4AZ6bb,xmfcx,"Discuss about combining the launch files in a single repository.
Create a post in https://github.com/orgs/autowarefoundation/discussions/new?category=ideas

- https://github.com/xmfcx/one_launch

Repositories to be discussed:
- https://github.com/autowarefoundation/autoware.universe.git
- https://github.com/autowarefoundation/autoware_launch.git
- https://github.com/autowarefoundation/sample_sensor_kit_launch.git
- https://github.com/autowarefoundation/sample_vehicle_launch.git
- https://github.com/autowarefoundation/autoware_individual_params.git"
autoware_launch rviz is not opening,D_kwDOAnasMc4AVKay,2023-08-22T17:08:33Z,zillur-av,1,Answered,,,
autoware_launch rviz is not opening,D_kwDOAnasMc4AVKay,2023-08-22T17:08:33Z,zillur-av,1,Answered,DC_kwDOAnasMc4AZ7I9,maxime-clem,"You can try doing a full rebuild of Autoware by running the following command in your workspace and then building as usual.
```sh
rm build install -rf
```"
autoware_launch rviz is not opening,D_kwDOAnasMc4AVKay,2023-08-22T17:08:33Z,zillur-av,1,Answered,DC_kwDOAnasMc4AZ7ON,zillur-av,Turned out `autoware_auto_vehicle_msgs` package was not installed properly.
/sensing/lidar/top/crop_box_filter_self node dies when receive ouster msgs,D_kwDOAnasMc4AVKlU,2023-08-22T22:17:43Z,zillur-av,2,Answered,,,
/sensing/lidar/top/crop_box_filter_self node dies when receive ouster msgs,D_kwDOAnasMc4AVKlU,2023-08-22T22:17:43Z,zillur-av,2,Answered,DC_kwDOAnasMc4AZ-Gr,KYabuuchi,"If possible, could you share the ROS bag containing `/sensing/lidar/top/pointcloud_raw_ex`? This would enable me to provide more detailed advice. 

I guess that the node crashes due to differences in the point cloud field names not meeting the requirements. 
ex: [crop_box_filter](https://github.com/autowarefoundation/autoware.universe/blob/cf425883613269b45261a077d947e37f81497e47/sensing/pointcloud_preprocessor/src/crop_box_filter/crop_box_filter_nodelet.cpp#L125-L127),  [ring_outlier_filter](https://github.com/autowarefoundation/autoware.universe/blob/cf425883613269b45261a077d947e37f81497e47/sensing/pointcloud_preprocessor/src/outlier_filter/ring_outlier_filter_nodelet.cpp#L92-L96)"
/sensing/lidar/top/crop_box_filter_self node dies when receive ouster msgs,D_kwDOAnasMc4AVKlU,2023-08-22T22:17:43Z,zillur-av,2,Answered,DC_kwDOAnasMc4AZ-jF,zillur-av,Please see this rosbag2 file https://drive.google.com/drive/folders/13tSeHvy1er6XrOt7ykurGzIkS_No40BV?usp=sharing. this has around 30 seconds of pointcloud messages recorded from our ouster sensor.
/sensing/lidar/top/crop_box_filter_self node dies when receive ouster msgs,D_kwDOAnasMc4AVKlU,2023-08-22T22:17:43Z,zillur-av,2,Answered,DC_kwDOAnasMc4AZ-xV,KYabuuchi,"I've checked your rosbag. The point cloud topic does not have the fields that the `ring_outlier_filter` requires. 
This is likely the cause of the node crashes. (The point cloud topic contains only `x, y, z, intensity, t, reflectivity, ring, ambient, range`.)

You can run it on your data by disabling `ring_outlier_filter`. Please try modifying the file as follows.

* [nebula_node_container.launch.py(this file is introduced 3 weeks ago)](https://github.com/autowarefoundation/sample_sensor_kit_launch/blob/8d5679f1a523319db44a15307fff222f962fb73b/common_sensor_launch/launch/nebula_node_container.launch.py#L190C52-L190C65)
```diff
<                (""~/output/pointcloud"", ""rectified/pointcloud_ex""),
---
>                (""~/output/pointcloud"", ""outlier_filtered/pointcloud""),
```

* [velodyne_node_container.launch.py (this file is removed 3 weeks ago)](https://github.com/autowarefoundation/sample_sensor_kit_launch/blob/6275063720f6fc94b5e2b477337b4246889c4c2a/common_sensor_launch/launch/velodyne_node_container.launch.py#L148)
```diff
<                (""~/output/pointcloud"", ""rectified/pointcloud_ex""),
---
>                (""~/output/pointcloud"", ""outlier_filtered/pointcloud""),
```

By applying that change I successed to set initial pose with your rosbag and pointcloud_map.
![262907551-41a68945-cad1-46be-aa03-f7c5f930fe0b](https://github.com/autowarefoundation/autoware/assets/24854875/e474b3cc-4e86-40b6-88ec-d62f6d168301)
"
/sensing/lidar/top/crop_box_filter_self node dies when receive ouster msgs,D_kwDOAnasMc4AVKlU,2023-08-22T22:17:43Z,zillur-av,2,Answered,DC_kwDOAnasMc4AaAxu,zillur-av,How did you intialize pose in rviz? I am unable to do that. Please see this issue https://github.com/orgs/autowarefoundation/discussions/3771
/sensing/lidar/top/crop_box_filter_self node dies when receive ouster msgs,D_kwDOAnasMc4AVKlU,2023-08-22T22:17:43Z,zillur-av,2,Answered,DC_kwDOAnasMc4AaA1S,KYabuuchi,"I set the initial pose by using `2D Pose Estimate` in rviz. 
I specified `2D Pose Estimate` many times until the vehicle was placed in the correct position.

![image](https://github.com/autowarefoundation/autoware/assets/24854875/9355fe1e-6d66-4e88-8668-d8592c14cd65)
"
/sensing/lidar/top/crop_box_filter_self node dies when receive ouster msgs,D_kwDOAnasMc4AVKlU,2023-08-22T22:17:43Z,zillur-av,2,Answered,DC_kwDOAnasMc4AZ-pO,drwnz,"How are you launching the crop box filter?
It looks like you are launching the Velodyne node container, which puts a lot of the pointcloud preprocessing into a composable node, which is expecting the Velodyne driver and resulting pointclouds to be in the same composable node."
/sensing/lidar/top/crop_box_filter_self node dies when receive ouster msgs,D_kwDOAnasMc4AVKlU,2023-08-22T22:17:43Z,zillur-av,2,Answered,DC_kwDOAnasMc4AZ_og,zillur-av,I am using awsim sensor_kit. thought i would remap the required topic names and it will work. maybe I can try sample_sensor_kit now.
A quick survey on coordinate system used in gnss_poser,D_kwDOAnasMc4AVKm_,2023-08-22T23:36:12Z,kminoda,3,Answered,,,
A quick survey on coordinate system used in gnss_poser,D_kwDOAnasMc4AVKm_,2023-08-22T23:36:12Z,kminoda,3,Answered,DC_kwDOAnasMc4AZ7WT,kminoda,I also posted this link in Discord channel: https://discord.com/channels/953808765935816715/953875979347046450/1143691581614993468
A quick survey on coordinate system used in gnss_poser,D_kwDOAnasMc4AVKm_,2023-08-22T23:36:12Z,kminoda,3,Answered,DC_kwDOAnasMc4AaFcn,kminoda,"Since we haven't received any comment regarding the above topic, we are going to stop supporting the above coordinate system in gnss_poser. Thank you for your understanding."
A quick survey on coordinate system used in gnss_poser,D_kwDOAnasMc4AVKm_,2023-08-22T23:36:12Z,kminoda,3,Answered,DC_kwDOAnasMc4AaLgI,TUMGEKA,"Unfortunately, we saw the survey too late. For us it would be good if the option local cartesian WGS84 remains, this projection is also used for example by the CARLA simulator. "
A quick survey on coordinate system used in gnss_poser,D_kwDOAnasMc4AVKm_,2023-08-22T23:36:12Z,kminoda,3,Answered,DC_kwDOAnasMc4AaLp0,kminoda,"I am sorry that the LOCAL_CARTESIAN_WGS84 has been removed: https://github.com/autowarefoundation/autoware.universe/pull/4726.

May I ask some questions so that we can understand how it's actually used?
- are you working on Autoware as an individual, or an organization? If latter is true, which organization?
- which coordinate system are you using?
- which projector type are you using for lanelet2_map_loader?

Depending on the above answer, we will decide whether to revert the change or not. We may be able to consult you how to use some other options instead of LOCAL CARTESIAN WGS84."
A quick survey on coordinate system used in gnss_poser,D_kwDOAnasMc4AVKm_,2023-08-22T23:36:12Z,kminoda,3,Answered,DC_kwDOAnasMc4AaL-v,TUMGEKA,"Thanks you @kminoda !

- I work at the Institute of Automotive Engineering at the Technical University of Munich. 
- We are using WGS84
- For the lanelet2_map_loader we are using `local` as projector type. 

Basically we are running CARLA with the newest Autoware. Here you can find an example map: https://bitbucket.org/carla-simulator/carla-content/src/master/Maps/OpenDrive/Town01.xodr"
A quick survey on coordinate system used in gnss_poser,D_kwDOAnasMc4AVKm_,2023-08-22T23:36:12Z,kminoda,3,Answered,DC_kwDOAnasMc4AaNMx,kminoda,"@TUMGEKA Thank you for the clarification. Understood!

How did you create the lanelet2 map? Is it from Vector Map Builder from TIER IV, or something else? (Seems like the map you've shared is in the different format, but did you convert that into osm somehow?)
Also, if possible, could you provide the exact lanelet2 map file that you are using right now? (If multiple exist, just one of them should suffice) I would like to investigate in depth whether you can load it with any other projector type"
A quick survey on coordinate system used in gnss_poser,D_kwDOAnasMc4AVKm_,2023-08-22T23:36:12Z,kminoda,3,Answered,DC_kwDOAnasMc4AadPY,TUMGEKA,Hello @kminoda I have texted you on discord
A quick survey on coordinate system used in gnss_poser,D_kwDOAnasMc4AVKm_,2023-08-22T23:36:12Z,kminoda,3,Answered,DC_kwDOAnasMc4AadUN,kminoda,@TUMGEKA Sorry I couldn't recognize any messages. Could you double check? My ID is kojiminodatieriv.
A quick survey on coordinate system used in gnss_poser,D_kwDOAnasMc4AVKm_,2023-08-22T23:36:12Z,kminoda,3,Answered,DC_kwDOAnasMc4AaiWa,TUMGEKA,@kminoda I have texted you again. Did you receive anything?
Wait for planned path to be clear of predicted path of other vehicles before proceeding,D_kwDOAnasMc4AVK5r,2023-08-23T08:45:41Z,MrOCW,1,Answered,,,
Wait for planned path to be clear of predicted path of other vehicles before proceeding,D_kwDOAnasMc4AVK5r,2023-08-23T08:45:41Z,MrOCW,1,Answered,DC_kwDOAnasMc4AZ8Pd,MrOCW,Realised this is in the Intersection module!
Perception and Sensing WG Meeting 23/08/2023,D_kwDOAnasMc4AVK8K,2023-08-23T09:32:45Z,drwnz,0,Unanswered,,,
How to start autonomous driving without clicking AUTO button,D_kwDOAnasMc4AVLDj,2023-08-23T11:39:50Z,okataka123,1,Answered,,,
How to start autonomous driving without clicking AUTO button,D_kwDOAnasMc4AVLDj,2023-08-23T11:39:50Z,okataka123,1,Answered,DC_kwDOAnasMc4AZ-Jl,rsasaki0109,"As follows.

> Now you can start the ego vehicle driving by clicking the AUTO button on OperationMode in AutowareStatePanel. Alteratively, you can manually start the vehicle by running the following command:
```
source ~/autoware/install/setup.bash
ros2 service call /api/operation_mode/change_to_autonomous autoware_adapi_v1_msgs/srv/ChangeOperationMode {}
```

https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/planning-simulation/#4-start-the-ego-vehicle"
How to start autonomous driving without clicking AUTO button,D_kwDOAnasMc4AVLDj,2023-08-23T11:39:50Z,okataka123,1,Answered,DC_kwDOAnasMc4AZ_L2,okataka123,"@rsasaki0109 
Thank you for the reply. It was very helpful!"
API WG Meeting (08/23/2023),D_kwDOAnasMc4AVLHW,2023-08-23T13:04:31Z,yuasabe,0,Unanswered,,,
Instructions to deploy Autoware docker on nVidia Orin,D_kwDOAnasMc4AVLJD,2023-08-23T13:39:40Z,chishengshih,1,Answered,,,
Instructions to deploy Autoware docker on nVidia Orin,D_kwDOAnasMc4AVLJD,2023-08-23T13:39:40Z,chishengshih,1,Answered,DC_kwDOAnasMc4AZ_hP,chishengshih,"The discussion is merged with another thread: https://github.com/orgs/autowarefoundation/discussions/3386

"
"Open AD Kit Working Group Meeting.  August 24, 2023",D_kwDOAnasMc4AVLlN,2023-08-24T02:24:50Z,HamburgDave,1,Answered,,,
"Open AD Kit Working Group Meeting.  August 24, 2023",D_kwDOAnasMc4AVLlN,2023-08-24T02:24:50Z,HamburgDave,1,Answered,DC_kwDOAnasMc4AZ_uI,yuntianyi-chen,I started a [thread ](https://github.com/orgs/autowarefoundation/discussions/3769) to talk about the automation of refactoring ROS Node Configuration.
Yolov5m6 tensorrt onnx error,D_kwDOAnasMc4AVLnT,2023-08-24T03:33:27Z,phoenixGG,0,Unanswered,,,
"After setting a goal, AUTO remains greyed out",D_kwDOAnasMc4AVMAb,2023-08-24T13:20:20Z,MrOCW,4,Answered,,,
"After setting a goal, AUTO remains greyed out",D_kwDOAnasMc4AVMAb,2023-08-24T13:20:20Z,MrOCW,4,Answered,DC_kwDOAnasMc4AaAlg,rsasaki0109,"What is the status of AutowareStatePanel in rviz? 
The following might be helpful as a reference.
https://github.com/autowarefoundation/autoware.universe/blob/main/system/default_ad_api/document/autoware-state.md#conversion"
"After setting a goal, AUTO remains greyed out",D_kwDOAnasMc4AVMAb,2023-08-24T13:20:20Z,MrOCW,4,Answered,DC_kwDOAnasMc4AaAuJ,MrOCW,![statepanel](https://github.com/autowarefoundation/autoware/assets/67644448/7175f71b-0925-4ec6-a2cd-cb6c953011e8)
"After setting a goal, AUTO remains greyed out",D_kwDOAnasMc4AVMAb,2023-08-24T13:20:20Z,MrOCW,4,Answered,DC_kwDOAnasMc4AaAxY,MrOCW,"/api/operation_mode/state
mode: 3
is_autoware_control_enabled: true
is_in_transition: false
is_stop_mode_available: true
is_autonomous_mode_available: false
is_local_mode_available: true
is_remote_mode_available: true

/control/vehicle_cmd_gate/operation_mode
mode: 3
is_autoware_control_enabled: true
is_in_transition: false
is_stop_mode_available: true
is_autonomous_mode_available: true
is_local_mode_available: true
is_remote_mode_available: true

/system/component_state_monitor/component/autonomous/vehicle
false

What conditions must be met for component_state_monitor of vehicle to be true?

I discovered that when I teleop my robot, autoware seems to try to take over, causing alot of jerking. However, when I stop teleop, autoware also stops control"
"After setting a goal, AUTO remains greyed out",D_kwDOAnasMc4AVMAb,2023-08-24T13:20:20Z,MrOCW,4,Answered,DC_kwDOAnasMc4AaA6v,MrOCW,"I have hard coded the vehicle status to be true and I am now able to activate AUTO. Vehicle moves as well, but kindly advise the correct way to do things."
"After setting a goal, AUTO remains greyed out",D_kwDOAnasMc4AVMAb,2023-08-24T13:20:20Z,MrOCW,4,Answered,DC_kwDOAnasMc4AaIG7,zillur-av,"Hi, have you figured that out? What is the best way to handle this situation? Also, which `topic` you hard coded?"
"After setting a goal, AUTO remains greyed out",D_kwDOAnasMc4AVMAb,2023-08-24T13:20:20Z,MrOCW,4,Answered,DC_kwDOAnasMc4AaAvV,rsasaki0109,"From the rviz screenshot, it appears that a `surround obstacle` is preventing Autoware from moving. It's likely that some pointcloud data is being detected very close to the ego vehicle, so it needs to be removed."
"After setting a goal, AUTO remains greyed out",D_kwDOAnasMc4AVMAb,2023-08-24T13:20:20Z,MrOCW,4,Answered,DC_kwDOAnasMc4AaAxX,MrOCW,"nope, it doesnt matter if I (the pointcloud data) move away"
"After setting a goal, AUTO remains greyed out",D_kwDOAnasMc4AVMAb,2023-08-24T13:20:20Z,MrOCW,4,Answered,DC_kwDOAnasMc4AaBBe,rsasaki0109,"Can you check if there's an issue with logs or the ""Single Point Fault"" in rosout ?
Unfortunately, there isn't a good method to confirm state transitions, and the only option is to check for potential issues in outputs."
"After setting a goal, AUTO remains greyed out",D_kwDOAnasMc4AVMAb,2023-08-24T13:20:20Z,MrOCW,4,Answered,DC_kwDOAnasMc4Aabrs,zillur-av,What to do when I find `single point fault`?
"After setting a goal, AUTO remains greyed out",D_kwDOAnasMc4AVMAb,2023-08-24T13:20:20Z,MrOCW,4,Answered,DC_kwDOAnasMc4Ab7iD,wbq0206,"You need to take a look at the output of the control board, which is likely due to a core issue in planning."
"After setting a goal, AUTO remains greyed out",D_kwDOAnasMc4AVMAb,2023-08-24T13:20:20Z,MrOCW,4,Answered,DC_kwDOAnasMc4Ab7iH,wbq0206,Recompiling may solve this problem
Potentially automating the refactoring of ROS Node Configuration,D_kwDOAnasMc4AVMG8,2023-08-24T15:22:50Z,yuntianyi-chen,4,Answered,,,
Potentially automating the refactoring of ROS Node Configuration,D_kwDOAnasMc4AVMG8,2023-08-24T15:22:50Z,yuntianyi-chen,4,Answered,DC_kwDOAnasMc4AaC7f,HamburgDave,"I think it sounds very interesting, I'm on the spreadsheet with a simple node but haven't started.  Could this simpler node be used as a test?  @kaspermeck-arm is off until Sept. 6 I believe, maybe we can make some progress on this before his return.  Perhaps in next OADKit meeting you could share your thoughts on proposed next steps?   

I'm def not an SME on this toppicic and would personally look to input from @esteve , Dogan, @oguzkaganozt @mitsudome-r @xmfcx @chishengshih and Mark from PIX as well.  "
Potentially automating the refactoring of ROS Node Configuration,D_kwDOAnasMc4AVMG8,2023-08-24T15:22:50Z,yuntianyi-chen,4,Answered,DC_kwDOAnasMc4AaDCu,yuntianyi-chen,"Thanks, David! I think we could use some simple nodes as you mentioned as a test for this idea. I would also consider some corner cases to complete this work. Let's meet in the next OADKit meeting to discuss it!"
Potentially automating the refactoring of ROS Node Configuration,D_kwDOAnasMc4AVMG8,2023-08-24T15:22:50Z,yuntianyi-chen,4,Answered,DC_kwDOAnasMc4AaDL3,doganulus,"The idea of @yuntianyi-chen makes me wonder if this task suits ChatGPT. 

I wrote the following prompt for the chatbot and copypasted a parameter file next:

> Consider a ROS yaml file such that:
> ```
> /**:
>   ros__parameters:
>     INSERT_PARAMETER_1_NAME: INSERT_PARAMETER_1_VALUE
>     INSERT_PARAMETER_N_NAME: INSERT_PARAMETER_N_VALUE
> ```
> and its JSON Schema 
> ```
> {
>   ""$schema"": ""http://json-schema.org/draft-07/schema#"",
>   ""title"": ""INSERT_TITLE"",
>   ""type"": ""object"",
>   ""definitions"": {
>     ""INSERT_ROS_NODE_NAME"": {
>       ""type"": ""object"",
>       ""properties"": {
>         ""INSERT_PARAMETER_1_NAME"": {
>           ""type"": ""INSERT_TYPE"",
>           ""description"": ""INSERT_DESCRIPTION"",
>           ""default"": ""INSERT_DEFAULT"",
>           ""INSERT_BOUND_CONDITION(S)"": ""INSERT_BOUND_VALUE(S)""
>         },
>         ""INSERT_PARAMETER_N_NAME"": {
>           ""type"": ""INSERT_TYPE"",
>           ""description"": ""INSERT_DESCRIPTION"",
>           ""default"": ""INSERT_DEFAULT"",
>           ""INSERT_BOUND_CONDITION(S)"": ""INSERT_BOUND_VALUE(S)""
>         }
>       },
>       ""required"": [
>         ""INSERT_PARAMETER_1_NAME"",
>         ""INSERT_PARAMETER_N_NAME""
>       ]
>     }
>   },
>   ""properties"": {
>     ""/**"": {
>       ""type"": ""object"",
>       ""properties"": {
>         ""ros__parameters"": {
>           ""$ref"": ""#/definitions/INSERT_ROS_NODE_NAME""
>         }
>       },
>       ""required"": [""ros__parameters""]
>     }
>   },
>   ""required"": [""/**""]
> }
> ```
> Using this template, write schemas for the following parameter files.

Anyway, we should not expect the chatbot to yield correct values, but at least it seems to be good at handling the boilerplate, which is the repetitive part. 

Maybe this could help @yuntianyi-chen to develop his idea further. This can be used programmatically, right?"
Potentially automating the refactoring of ROS Node Configuration,D_kwDOAnasMc4AVMG8,2023-08-24T15:22:50Z,yuntianyi-chen,4,Answered,DC_kwDOAnasMc4AaD8y,yuntianyi-chen,"Good idea, Doğan! It's another way to achieve the refactor automation if using the GPT API."
Potentially automating the refactoring of ROS Node Configuration,D_kwDOAnasMc4AVMG8,2023-08-24T15:22:50Z,yuntianyi-chen,4,Answered,DC_kwDOAnasMc4AaGVg,esteve,"I'd rather do this programmatically via a library, macros, or text templates, than letting GPT spew out random data that would still require a human to review anyway."
Potentially automating the refactoring of ROS Node Configuration,D_kwDOAnasMc4AVMG8,2023-08-24T15:22:50Z,yuntianyi-chen,4,Answered,DC_kwDOAnasMc4AadED,yuntianyi-chen,I just finished the initial version of this [program](https://github.com/yuntianyi-chen/autoware-ros-node-config-auto). I considered corner cases as many as possible. Hope it will help us speed up the refactoring job.
Potentially automating the refactoring of ROS Node Configuration,D_kwDOAnasMc4AVMG8,2023-08-24T15:22:50Z,yuntianyi-chen,4,Answered,DC_kwDOAnasMc4Aa2xo,kaspermeck-arm,@yuntianyi-chen @doganulus - thanks for your efforts with this! The [DevOps Dojo: ROS Node Configuration - Step by Step Instructions](https://docs.google.com/document/d/10DQezFZ0XAjO2S0IG_6O36p1WhZI7be68QRhNirzdac/edit#heading=h.z8xipsmunki6) have been updated under section _Generator tool_. Feel free up comment on the guide as needed and I'll update it!
Traffic light image topic not working,D_kwDOAnasMc4AVMfU,2023-08-25T03:20:15Z,zillur-av,1,Answered,,,
Traffic light image topic not working,D_kwDOAnasMc4AVMfU,2023-08-25T03:20:15Z,zillur-av,1,Answered,DC_kwDOAnasMc4AaH5b,miursh,"Here is the current node diagram of traffic light module. 
https://github.com/autowarefoundation/autoware.universe/issues/2567#issuecomment-1626514956
As you can see, the image topic is supposed to subscribed by traffic_light_fine_detector and traffic_light_classifier.
Even though, the node stops subscribing when the output is not connected to the other node. (like [this](https://github.com/autowarefoundation/autoware.universe/blob/main/perception/traffic_light_fine_detector/src/nodelet.cpp#L124C43-L132))
This might be the reason for the topic name would not show up."
failed to initialize pose from rviz,D_kwDOAnasMc4AVMfz,2023-08-25T03:33:45Z,zillur-av,1,Answered,,,
failed to initialize pose from rviz,D_kwDOAnasMc4AVMfz,2023-08-25T03:33:45Z,zillur-av,1,Answered,DC_kwDOAnasMc4AaBF_,KYabuuchi,"I succeeded in initializing with your map and rosbag. Please check my video. 

https://github.com/autowarefoundation/autoware/assets/24854875/ed84036e-0e43-4b96-a5b3-1ff8aab05454


```
ros2 launch autoware_launch logging_simulator.launch.xml map_path:=$HOME/Maps/issue_zillur \
    vehicle_model:=sample_vehicle\
    sensor_model:=awsim_sensor_kit \
    planning:=false perception:=false control:=false

ros2 run tf2_ros static_transform_publisher --frame-id base_link --child-frame-id os_sensor

ros2 bag play . --remap /ouster/points:=/sensing/lidar/top/pointcloud_raw_ex --clock 100
```"
failed to initialize pose from rviz,D_kwDOAnasMc4AVMfz,2023-08-25T03:33:45Z,zillur-av,1,Answered,DC_kwDOAnasMc4AaDFZ,zillur-av,"It's not working for me. I ran `logging_simulator.launch` and found this. Probably `scan_matching` is trying to converge but nothing further, could it be because my car was not actually in that real world position? I was trying to give it a pose at different place, i will try tomorrow again in the exact position. From your video, I am wondering why it's not throwing out that warning that `map` frame does not exist like my above terminal screenshot or below screenshot that shows `global frame error`. I can see the moment rviz open in your case, it already has the `map` frame. How? I can only have it when I set `initial pose` properly.
![Screenshot from 2023-08-25 19-06-12](https://github.com/autowarefoundation/autoware/assets/54721606/40003992-7f00-41a6-8581-d730bbfdab8f)

I think everything else is working, see this `rqt_graph` without `planning, perception, and control` module in this folder https://drive.google.com/drive/folders/1QHfd_x2P1qiOezHwj3CYJ8JGEufZJGdA?usp=sharing. It contains a rosbag file too which I believe has all essential input messages in case you want to test.

"
failed to initialize pose from rviz,D_kwDOAnasMc4AVMfz,2023-08-25T03:33:45Z,zillur-av,1,Answered,DC_kwDOAnasMc4AaDHB,KYabuuchi,"> From your video, I am wondering why it's not throwing out that warning that map frame does not exist like my above terminal screenshot or below screenshot that shows global frame error. 

Please check this https://github.com/orgs/autowarefoundation/discussions/2541
Even in my environment, when I load the huge lanelet2_map.osm, I see that error for a while after starting.
"
failed to initialize pose from rviz,D_kwDOAnasMc4AVMfz,2023-08-25T03:33:45Z,zillur-av,1,Answered,DC_kwDOAnasMc4AaDHZ,KYabuuchi,"Also, when you play rosbag, do you publish the `/clock`?
e.g. `ros2 bag play . --remap /sensing/lidar/pointcloud_raw_ex:=/sensing/lidar/top/pointcloud_raw_ex --clock 100`
If not, the TF will not be brodacast and the vehicle will not appear at the estimated position. Even if the initial position estimation of NDT is completed.

I have also succeeded in the initial localization with the new rosbag you shared."
failed to initialize pose from rviz,D_kwDOAnasMc4AVMfz,2023-08-25T03:33:45Z,zillur-av,1,Answered,DC_kwDOAnasMc4AaEHT,zillur-av,"I am not running bag files, I run live on the vehicle pc with everything on (except output interfacing for now). What is the difference between `logging_simulator` and `autoware.launch.xml`? Can I use the later directly? 
It's not working still. I kept the car in 2nd parking slot and gave the pose many times; only thing I see is that those arrows are changing.
![Screenshot from 2023-08-26 13-47-50](https://github.com/autowarefoundation/autoware/assets/54721606/a97ab113-acb5-42f3-88cb-6aa812d241a1)
terminal shows these messages everytime I give a new pose and nothing else. Please see the last one
![Screenshot from 2023-08-26 13-39-26](https://github.com/autowarefoundation/autoware/assets/54721606/ed312606-3ed1-449e-9209-fa546aa6cdd4)
![Screenshot from 2023-08-26 13-38-26](https://github.com/autowarefoundation/autoware/assets/54721606/18f54f97-bf1d-4a86-b702-68ede8f38d10)
![Screenshot from 2023-08-26 13-08-39](https://github.com/autowarefoundation/autoware/assets/54721606/0be46deb-2275-4f0f-85d0-d024d2fd4a14)

What does it say? Is it because of this?
![Screenshot from 2023-08-26 13-37-10](https://github.com/autowarefoundation/autoware/assets/54721606/d5883469-4978-413f-a666-2ab1833a1cc8)

"
failed to initialize pose from rviz,D_kwDOAnasMc4AVMfz,2023-08-25T03:33:45Z,zillur-av,1,Answered,DC_kwDOAnasMc4AaEIB,KYabuuchi,"If you are working with an real vehicle, using `autoware.launch.xml` is correct. 
The main difference between `autoware.launch.xml` and `logging_simulator.launch.xml` is whether they use the system timer or the clock from the rosbag data.  [cf.](https://github.com/autowarefoundation/autoware_launch/blob/main/autoware_launch/launch/logging_simulator.launch.xml#L50)"
failed to initialize pose from rviz,D_kwDOAnasMc4AVMfz,2023-08-25T03:33:45Z,zillur-av,1,Answered,DC_kwDOAnasMc4AaETT,zillur-av,"Did you have the chance to look into that `InitialPoseButonPanel` error? Maybe it would be better if I know what things need to be completed to make rviz initialization work. Or, maybe I should try to use georeferenced map now. Btw, I am using the latest commit."
failed to initialize pose from rviz,D_kwDOAnasMc4AVMfz,2023-08-25T03:33:45Z,zillur-av,1,Answered,DC_kwDOAnasMc4AaFcg,zillur-av,"Thank you so much, it's working now. I used `logging_simulator` following you which has `use_sim_time` as true. That's why it was not working on live."
Robot fails to follow path and swerve in 1 direction out of the lane,D_kwDOAnasMc4AVMjC,2023-08-25T05:44:41Z,MrOCW,1,Answered,,,
Robot fails to follow path and swerve in 1 direction out of the lane,D_kwDOAnasMc4AVMjC,2023-08-25T05:44:41Z,MrOCW,1,Answered,DC_kwDOAnasMc4AaIBy,MrOCW,Dug into the source code and found the issue.
Providing Steering Angle for a Differential Drive Robot Interface,D_kwDOAnasMc4AVMjM,2023-08-25T05:46:30Z,MrOCW,0,Unanswered,,,
The autonomous vehicle in AWSIM does not move after receiving control commands,D_kwDOAnasMc4AVMlV,2023-08-25T06:47:04Z,hzkkk1997,1,Answered,,,
The autonomous vehicle in AWSIM does not move after receiving control commands,D_kwDOAnasMc4AVMlV,2023-08-25T06:47:04Z,hzkkk1997,1,Answered,DC_kwDOAnasMc4AaBEZ,HansRobo,"@hzkkk1997 Thank you for trying AWSIM and sorry for the inconvenience.

Could you provide the following information to answer the question?
- the version of autoware
- the version of AWSIM
  - Or are you using the demo binary downloaded from [here](https://tier4.github.io/AWSIM/)?

"
The autonomous vehicle in AWSIM does not move after receiving control commands,D_kwDOAnasMc4AVMlV,2023-08-25T06:47:04Z,hzkkk1997,1,Answered,DC_kwDOAnasMc4AaBFk,hzkkk1997,"OK~
My Autoware‘s version is awsim-stable and AWSIM's demo version is v1.1.0~
My current issue is that I have made changes to the topic name based on the official source code of AWSIM, and then recompiled it to generate my own AWSIM emulator. However, after receiving a command from the control end, the ego car of the emulator did not move."
The autonomous vehicle in AWSIM does not move after receiving control commands,D_kwDOAnasMc4AVMlV,2023-08-25T06:47:04Z,hzkkk1997,1,Answered,DC_kwDOAnasMc4AaBGG,hzkkk1997,"Another issue is that the awsim project I recompiled has some lag in running, not as smooth as the official one.As described in this link https://github.com/orgs/autowarefoundation/discussions/3717"
The autonomous vehicle in AWSIM does not move after receiving control commands,D_kwDOAnasMc4AVMlV,2023-08-25T06:47:04Z,hzkkk1997,1,Answered,DC_kwDOAnasMc4AaBHE,hzkkk1997,My awsim source code and emulator were downloaded from the website you mentioned~
The autonomous vehicle in AWSIM does not move after receiving control commands,D_kwDOAnasMc4AVMlV,2023-08-25T06:47:04Z,hzkkk1997,1,Answered,DC_kwDOAnasMc4AaBHn,HansRobo,"Thank you for additional information!

It may not work well if you have your own changes in topic names. Could you please let me know the changes?

Also, for the `/control/command/control_cmd` topic, I would like to know whether the information is definitely reaching AWSIM by executing the following
```
ros2 topic info -v /control/command/control_cmd
```"
The autonomous vehicle in AWSIM does not move after receiving control commands,D_kwDOAnasMc4AVMlV,2023-08-25T06:47:04Z,hzkkk1997,1,Answered,DC_kwDOAnasMc4AaBJD,hzkkk1997,"Thank you very much for your reply. I changed the following topic names to fit the work I need to do. The execution result of the command you gave is also as follows.
![7221fb7ebd7e46428c960c770e063e4](https://github.com/autowarefoundation/autoware/assets/62823718/84aa3e70-a664-4202-9601-12073ec8504d)
![0c91f8f77b7b449f090a17497d01e1c](https://github.com/autowarefoundation/autoware/assets/62823718/0570425f-3351-4862-8dbc-4683817ce63d)
![8cd68efe1860383ff143431614d10ff](https://github.com/autowarefoundation/autoware/assets/62823718/0472135b-31d0-4a24-9436-055ad058ebb7)
"
The autonomous vehicle in AWSIM does not move after receiving control commands,D_kwDOAnasMc4AVMlV,2023-08-25T06:47:04Z,hzkkk1997,1,Answered,DC_kwDOAnasMc4AaBRJ,HansRobo,"@hzkkk1997
Your publisher of `/aion_control/command/control_cmd` seems to have durability set to `VOLATILE` for some reason.
This is incompatible with AWSIM subscriber QoS, so no actual communication of the topic takes place.

ref: https://docs.ros.org/en/rolling/Concepts/Intermediate/About-Quality-of-Service-Settings.html#qos-compatibilities

So could you try setting the publisher's QoS durability to `TRANSIENT_LOCAL`?"
The autonomous vehicle in AWSIM does not move after receiving control commands,D_kwDOAnasMc4AVMlV,2023-08-25T06:47:04Z,hzkkk1997,1,Answered,DC_kwDOAnasMc4AaBRl,hzkkk1997,"Okay, I'll give it a try right away！！！Thank you very much~~~"
The autonomous vehicle in AWSIM does not move after receiving control commands,D_kwDOAnasMc4AVMlV,2023-08-25T06:47:04Z,hzkkk1997,1,Answered,DC_kwDOAnasMc4AaBVH,hzkkk1997,"Hello, if the publisher's QoS durability isnot easy to set TRANSIENT_LOCAL, can i set subcribe's QoS durability set to VOLATILE ?"
The autonomous vehicle in AWSIM does not move after receiving control commands,D_kwDOAnasMc4AVMlV,2023-08-25T06:47:04Z,hzkkk1997,1,Answered,DC_kwDOAnasMc4AaBWG,HansRobo,"Although not recommended, it is possible to change the QoS durability setting in the source code.
https://github.com/tier4/AWSIM/blob/main/Assets/AWSIM/Scripts/Vehicles/VehicleRosInput.cs#L52"
The autonomous vehicle in AWSIM does not move after receiving control commands,D_kwDOAnasMc4AVMlV,2023-08-25T06:47:04Z,hzkkk1997,1,Answered,DC_kwDOAnasMc4AaBWR,hzkkk1997,"Thank you, I will try both of all~~~"
How to run Autoware and AWSIM with two computers,D_kwDOAnasMc4AVMrt,2023-08-25T09:00:31Z,lawbreaker2022,1,Answered,,,
How to run Autoware and AWSIM with two computers,D_kwDOAnasMc4AVMrt,2023-08-25T09:00:31Z,lawbreaker2022,1,Answered,DC_kwDOAnasMc4AaFjD,yuasabe,"Hi @lawbreaker2022 !

I've looked at running Autoware and AWSIM on two separate PCs and have documented the process here: 
https://yuasabe.com/2023-08-28-awsim-dual-pc/

Please try this method and feel free to drop more questions here if necessary!"
AWSIM Install problem,D_kwDOAnasMc4AVOvt,2023-08-28T01:52:30Z,TAICHInoda,4,Answered,,,
AWSIM Install problem,D_kwDOAnasMc4AVOvt,2023-08-28T01:52:30Z,TAICHInoda,4,Answered,DC_kwDOAnasMc4AaFcr,zillur-av,Have you run `rosdep install -y --from-paths src --ignore-src --rosdistro $ROS_DISTRO` befor building autoware? It seems you have not installed `can_msgs` package properly.
AWSIM Install problem,D_kwDOAnasMc4AVOvt,2023-08-28T01:52:30Z,TAICHInoda,4,Answered,DC_kwDOAnasMc4AaGkv,TAICHInoda,"I run ""rosdep install -y --from-paths src --ignore-src --rosdistro $ROS_DISTRO"" , but the result was ""given path 'src' does not exist""
I run ""pwd"" at home , but directory of src wasn't found.
I don't understand my directory structure.
Sorry for the newbie question, but could you tell me the solution in detail?

"
AWSIM Install problem,D_kwDOAnasMc4AVOvt,2023-08-28T01:52:30Z,TAICHInoda,4,Answered,DC_kwDOAnasMc4AaH0C,maxime-clem,"If you follow the instructions from https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/source-installation/, there is a step where you create a `src` directory where all necessary repositories are imported.
```
mkdir src
vcs import src < autoware.repos
```
If this folder is missing you will not be able to run Autoware."
AWSIM Install problem,D_kwDOAnasMc4AVOvt,2023-08-28T01:52:30Z,TAICHInoda,4,Answered,DC_kwDOAnasMc4AaH4O,zillur-av,"Just follow the steps in the above link as they are. When installing `rosdep` or building autoware, make sure you are in your `/autoware/` workspace."
AWSIM Install problem,D_kwDOAnasMc4AVOvt,2023-08-28T01:52:30Z,TAICHInoda,4,Answered,DC_kwDOAnasMc4AaIjV,TAICHInoda,"Thank you very much.
I could run the simulator."
Planning trajectory is too far from ego,D_kwDOAnasMc4AVOyU,2023-08-28T03:12:23Z,MrOCW,1,Answered,,,
Planning trajectory is too far from ego,D_kwDOAnasMc4AVOyU,2023-08-28T03:12:23Z,MrOCW,1,Answered,DC_kwDOAnasMc4AaNVh,kyoichi-sugahara,"@MrOCW 
Sorry I made the packege of `control_validator` and apprenty the bug is in the code.
I will make change PR with
- [x] disengage this module when autoware is launched
- [x] change message so that people can understand easily
- [x] fix bug :cry: 
So sorry for the inconvenience..."
Planning trajectory is too far from ego,D_kwDOAnasMc4AVOyU,2023-08-28T03:12:23Z,MrOCW,1,Answered,DC_kwDOAnasMc4AaNX9,kyoichi-sugahara,"@MrOCW 
I made a PR here to solve first and secound problems
https://github.com/autowarefoundation/autoware_launch/pull/545
https://github.com/autowarefoundation/autoware.universe/pull/4794

If you are using different repository for giving parameter, please set `publish_diag` and `display_on_terminal` as `default` in the `control_validator.param.yaml` file. "
Planning trajectory is too far from ego,D_kwDOAnasMc4AVOyU,2023-08-28T03:12:23Z,MrOCW,1,Answered,DC_kwDOAnasMc4AaOb6,kyoichi-sugahara,"I made a PR for the 2 AI  and merged
- disengage this module when autoware is launched
- change message so that people can understand easily

And surprisingly other person solved my stupid bug and make PR, so I will review later"
Planning trajectory is too far from ego,D_kwDOAnasMc4AVOyU,2023-08-28T03:12:23Z,MrOCW,1,Answered,DC_kwDOAnasMc4AaQcS,kyoichi-sugahara,this [PR](https://github.com/autowarefoundation/autoware.universe/pull/4846) fix the issue.
The operation of AWSIM is not smooth,D_kwDOAnasMc4AVO87,2023-08-28T08:24:28Z,hzkkk1997,2,Answered,,,
The operation of AWSIM is not smooth,D_kwDOAnasMc4AVO87,2023-08-28T08:24:28Z,hzkkk1997,2,Answered,DC_kwDOAnasMc4AaF9A,HansRobo,"@hzkkk1997 
Thank you for dividing this from discussion #3774 !
First of all, could you tell us your PC spec?

@mackierx111 (AWSIM developer)
Do you have any idea about the cause of this phenomenon?"
The operation of AWSIM is not smooth,D_kwDOAnasMc4AVO87,2023-08-28T08:24:28Z,hzkkk1997,2,Answered,DC_kwDOAnasMc4AaGCP,hzkkk1997,"@HansRobo Thank you for your reply. My computer configuration is as follows~However, my configuration runs the original version of AWSIM and has been co simulated with Autoware, and AWsim runs smoothly. After I modified the AWSIM source code and recompiled it, it got stuck when it was combined with autoware.
![7e9eedaf389dd980786cbcc7ae1ca1b](https://github.com/autowarefoundation/autoware/assets/62823718/8f6013f1-5237-4888-9650-4b07da8cdfba)
"
The operation of AWSIM is not smooth,D_kwDOAnasMc4AVO87,2023-08-28T08:24:28Z,hzkkk1997,2,Answered,DC_kwDOAnasMc4AaGCx,hzkkk1997,"@mackierx111 Please help me~~~ I have previously changed the configuration of DDS and topic frequency for awsim input and output, but it seems that the newly compiled AWSIM project and autoware are running together, and awsim is stuck. The original version of awsim is not like this."
The operation of AWSIM is not smooth,D_kwDOAnasMc4AVO87,2023-08-28T08:24:28Z,hzkkk1997,2,Answered,DC_kwDOAnasMc4AaGD0,hzkkk1997,"@mackierx111 @HansRobo  I would also like to point out that for the needs of the project, I have added a node similar to message transformation processing and sending between the newly compiled AWSIM and AUTOWARE."
The operation of AWSIM is not smooth,D_kwDOAnasMc4AVO87,2023-08-28T08:24:28Z,hzkkk1997,2,Answered,DC_kwDOAnasMc4AaH7Y,hzkkk1997,Did I miss some optimization configurations when compiling and generating a new AWSIM project?
The operation of AWSIM is not smooth,D_kwDOAnasMc4AVO87,2023-08-28T08:24:28Z,hzkkk1997,2,Answered,DC_kwDOAnasMc4AaIId,HansRobo,"Your GPU doesn't meet our recommended specs(RTX2080Ti or higher) and may be the bottleneck.

> Did I miss some optimization configurations when compiling and generating a new AWSIM project?

About this, I will ask @mackierx111"
The operation of AWSIM is not smooth,D_kwDOAnasMc4AVO87,2023-08-28T08:24:28Z,hzkkk1997,2,Answered,DC_kwDOAnasMc4AaIJG,HansRobo,"@hzkkk1997 By the way, Does the demo binary you can download from documentation page work well on your PC?"
The operation of AWSIM is not smooth,D_kwDOAnasMc4AVO87,2023-08-28T08:24:28Z,hzkkk1997,2,Answered,DC_kwDOAnasMc4AaIJz,hzkkk1997,"Yes, download the compiled original version from the official website and it runs smoothly."
The operation of AWSIM is not smooth,D_kwDOAnasMc4AVO87,2023-08-28T08:24:28Z,hzkkk1997,2,Answered,DC_kwDOAnasMc4Aafmi,hzkkk1997,"@HansRobo Hello, I'm sorry to bother you. Have you understood the reasons for the related phenomenon?"
The operation of AWSIM is not smooth,D_kwDOAnasMc4AVO87,2023-08-28T08:24:28Z,hzkkk1997,2,Answered,DC_kwDOAnasMc4AaH-c,hzkkk1997,"This is my simulation screenshot. All the vehicles in AWSIM feel too laggy. After running autoware, the point cloud seems to be sluggish.
![截图 2023-08-29 11-11-43](https://github.com/autowarefoundation/autoware/assets/62823718/48448962-be85-4117-9467-0769b927c4d3)
![截图 2023-08-29 11-12-20](https://github.com/autowarefoundation/autoware/assets/62823718/57855d0c-bbc9-4eb0-8e66-abaf11279444)
"
The operation of AWSIM is not smooth,D_kwDOAnasMc4AVO87,2023-08-28T08:24:28Z,hzkkk1997,2,Answered,DC_kwDOAnasMc4AatDN,cycyc1949,You can try a simple modification based on the official to see if it is normal
The operation of AWSIM is not smooth,D_kwDOAnasMc4AVO87,2023-08-28T08:24:28Z,hzkkk1997,2,Answered,DC_kwDOAnasMc4AavOr,hzkkk1997,I modified and compiled it on an official basis. Have you also customized and modified it and started running?
Obstacle on the path even though there is no obstacle,D_kwDOAnasMc4AVO9h,2023-08-28T08:30:54Z,MrOCW,0,Unanswered,,,
2023-08-28 ODD working group weekly meeting (155),D_kwDOAnasMc4AVO-Q,2023-08-28T08:41:50Z,Igata-ctrl,0,Unanswered,,,
Perception stack launch with Lidar Data,D_kwDOAnasMc4AVPOQ,2023-08-28T13:16:38Z,muratgozum45,3,Answered,,,
Perception stack launch with Lidar Data,D_kwDOAnasMc4AVPOQ,2023-08-28T13:16:38Z,muratgozum45,3,Answered,DC_kwDOAnasMc4AaJ27,muratgozum45,"The cycle looks much longer in autoware.universe than the autoware.auto. The way I organize the architecture would be like:
1. Playing the rosbag file => From the Lidar data, the topic **/points [sensor_msgs/msg/PointCloud2]** is published. The command is written as:
ros2 bag play ~/autoware_map/rosbag2_2023_08_23-10_48_28
2. For the preprocessing of the lidar data, the command will be entered as:
 ros2 launch pointcloud_preprocessor preprocessor.launch.xml
3. The next stage will be classification of ground points and non-ground points with the command:
ros2 launch ground_segmentation scan_ground_filter.launch.py
4. Then, the non-ground points will be clustered using the euclidean_clustering as:
ros2 launch euclidean_cluster euclidean_cluster.launch.xml
5. Then, shape estimation will be applied to the formed clusters in step4:
ros2 launch shape_estimation.launch shape_estimation.launch.xml
Here, I tried to imititate the link above for Autoware.Auto  but in Autoware.Universe thanks to the launch property, the parameters can be directly run from the config file. However, in Rviz I cannot see the output even after step2 (pointcloud_preprocessor ). I would appreciate it if someone could comment about the architecture I am using and show what I am doing wrong. As I mentioned, I am quite new to both ros2 and autoware.
Thanks,
Murat"
Perception stack launch with Lidar Data,D_kwDOAnasMc4AVPOQ,2023-08-28T13:16:38Z,muratgozum45,3,Answered,DC_kwDOAnasMc4AaNQ7,badai-nguyen,"@muratgozum45 Thank you for your interest, 
I think you can follow [the tutorial](https://autowarefoundation.github.io/autoware-documentation/main/) to be familiar with autoware.
There are [sample rosbag and map](https://autowarefoundation.github.io/autoware-documentation/main/tutorials/ad-hoc-simulation/rosbag-replay-simulation/) also available for testing the latest perception stack which includes all of your interested nodes above. 

>  However, in Rviz I cannot see the output even after step2 (pointcloud_preprocessor ).

Please check the topic field requirement and make sure it's compatible with each preprocessing algorithms. I think https://github.com/autowarefoundation/autoware.universe/issues/3827#issuecomment-1565585233 is quite similar to your issue.
"
Perception stack launch with Lidar Data,D_kwDOAnasMc4AVPOQ,2023-08-28T13:16:38Z,muratgozum45,3,Answered,DC_kwDOAnasMc4AaPoE,muratgozum45,Hey thanks for the advice.I did check it but there is no format problem with the input. When İ was playing the rosbag İ did not use map  for the rosbag link you sent above and İ think without map it is not possible to launch them and make the sequential. Rqt graph shows it clearly
Software WG Meeting 2023/08/29,D_kwDOAnasMc4AVPuq,2023-08-29T05:05:05Z,mitsudome-r,0,Unanswered,,,
Enable autonomous mode,D_kwDOAnasMc4AVPvN,2023-08-29T05:23:39Z,zillur-av,1,Answered,,,
Enable autonomous mode,D_kwDOAnasMc4AVPvN,2023-08-29T05:23:39Z,zillur-av,1,Answered,DC_kwDOAnasMc4AaI71,isamu-takagi,"To change OperationMode and AutowareControl, it is recommended to use [operation mode API](https://autowarefoundation.github.io/autoware-documentation/main/design/autoware-interfaces/ad-api/features/operation_mode/).

---

For AutowareControl, the following services are called in order:
- Operation mode API
- /system/operation_mode/change_autoware_control
- /control/control_mode_request

So the vehicle interface need to provide the following service and topic:
- /control/control_mode_request
- /vehicle/status/control_mode

---

For OperationMode, to switch to auto mode, operation_mode_transition_manager should determine that mode switching is possible. This is publihsed as `/system/operation_mode/state`.

In addition, the topic rate checks must be OK. This is published as following topics (* is component name).
- /system/component_state_monitor/component/launch/*
- /system/component_state_monitor/component/autonomous/*

The state considering the rate check is published as `/api/operation_mode/state`
The topics to be checked are defined here.
https://github.com/autowarefoundation/autoware_launch/blob/main/autoware_launch/config/system/component_state_monitor/topics.yaml


You can know the rough reason why you cannot change auto mode with the following command
```
ros2 run default_ad_api guide.py
```"
Enable autonomous mode,D_kwDOAnasMc4AVPvN,2023-08-29T05:23:39Z,zillur-av,1,Answered,DC_kwDOAnasMc4AaNf5,zillur-av,It's working now but I often see it still becomes grey sometimes and activate again itself.
Enable autonomous mode,D_kwDOAnasMc4AVPvN,2023-08-29T05:23:39Z,zillur-av,1,Answered,DC_kwDOAnasMc4AaVIA,hzkkk1997,Are you referring to AUTO in OperationMode? I also encountered this issue during actual vehicle testing.
Enable autonomous mode,D_kwDOAnasMc4AVPvN,2023-08-29T05:23:39Z,zillur-av,1,Answered,DC_kwDOAnasMc4AaYwo,zillur-av,"Yeah, `auto` function greys out without any obvious reason."
Is there any way to know if vehicle has reached the goal point?,D_kwDOAnasMc4AVP22,2023-08-29T08:19:44Z,norikenpi,1,Answered,,,
Is there any way to know if vehicle has reached the goal point?,D_kwDOAnasMc4AVP22,2023-08-29T08:19:44Z,norikenpi,1,Answered,DC_kwDOAnasMc4AaXDw,taikitanaka3,"@norikenpi 
you can get autoware state via `/autoware/state` and see it is ""AutowareState::ARRIVED_GOAL""."
Is there any way to know if vehicle has reached the goal point?,D_kwDOAnasMc4AVP22,2023-08-29T08:19:44Z,norikenpi,1,Answered,DC_kwDOAnasMc4AaXJx,norikenpi,"Thank you for your response.

I have another question related to the original question.
I am planning to implement a turnaround motion to pass through narrow streets.
To do so, it is necessary to back up.
Am I correct in assuming that Autoware does not yet have a planner that can reach a goal point behind the vehicle by backing up?

Thank you in advance.
"
Is there any way to know if vehicle has reached the goal point?,D_kwDOAnasMc4AVP22,2023-08-29T08:19:44Z,norikenpi,1,Answered,DC_kwDOAnasMc4Aa9tS,wbq0206,"As far as I know, it can be achieved in the freespace scenario."
Is there any way to know if vehicle has reached the goal point?,D_kwDOAnasMc4AVP22,2023-08-29T08:19:44Z,norikenpi,1,Answered,DC_kwDOAnasMc4AbDYO,norikenpi,"Thank you very much!
The freespace scenario may be what I was looking for.
I will give it a try!"
Am I correct in assuming that Autoware does not have a planner that backs up to a goal point that is behind the vehicle?,D_kwDOAnasMc4AVP3E,2023-08-29T08:27:22Z,norikenpi,1,Answered,,,
Am I correct in assuming that Autoware does not have a planner that backs up to a goal point that is behind the vehicle?,D_kwDOAnasMc4AVP3E,2023-08-29T08:27:22Z,norikenpi,1,Answered,DC_kwDOAnasMc4AaXJ-,norikenpi,"Moved to the following link
https://github.com/orgs/autowarefoundation/discussions/3784"
Localization & Mapping WG Meeting 30/08/2023,D_kwDOAnasMc4AVQ4i,2023-08-30T07:43:15Z,n-patiphon,0,Unanswered,,,
2023-08-30 Simulation Working group Meeting,D_kwDOAnasMc4AVQ9f,2023-08-30T09:29:01Z,WJaworskiRobotec,0,Unanswered,,,
Reference Design WG Meeting (08/30/2023),D_kwDOAnasMc4AVRK5,2023-08-30T13:44:22Z,chishengshih,1,Answered,,,
Reference Design WG Meeting (08/30/2023),D_kwDOAnasMc4AVRK5,2023-08-30T13:44:22Z,chishengshih,1,Answered,DC_kwDOAnasMc4AaMFH,chishengshih,"### Additional Participants:
- [ ] None.

### Notes:
* Bus and Computation Platforms for ITRI Autonomous Bus
  *  Started in 2018
  * Pilot Run in HsinCHu started in 2020.
  * The second phase has 8.1km route, between high speed rail and AI science park. 
  * October 2022: new sensor layout.
  * Four IPCs: Camera, Lidar, Localization, and Control+Cam. Grabber
  * 8 camera,  3 lidar, 1 radar
  * Avoid motocycles are challenging in Taiwan.
  * The departure procedure is also challenging.
  * Software Version: Public road: Autoware.Ai (ROS1) + Autoware Universe (ROS2) in progress. 
  * Rohit: any redundant system required by the government? 
  * Huei-Reu: current overload uses 80% and have no room for redundat.  
  * William: what is the latency on these buses from the workload is 80% full? 
  * Huei-Ru: will come for detailed numbers.
  * William: do the bus record the waypoints for the route? 
  * Huei-Ru: Waypoints are used.  
  * CY: how is the software deployed on four IPCs? Using containers? 
  * Huei-Ru: each IPC has its own roles and has different launch files. 
  * CY: Is C-V2X used on the project?
  * Huei-Ru: PC5 is used in these four buses.
 
### Action Items:
  * next meeting: the first draft of the reference design and discuss the guideline to include the materials from the partners."
Planning&Control WG Meeting 2023/08/31,D_kwDOAnasMc4AVRoX,2023-08-31T02:25:35Z,maxime-clem,1,Answered,,,
Planning&Control WG Meeting 2023/08/31,D_kwDOAnasMc4AVRoX,2023-08-31T02:25:35Z,maxime-clem,1,Answered,DC_kwDOAnasMc4AaN4i,brkay54,It is not ready but I want to talk about this PR: https://github.com/autowarefoundation/autoware.universe/pull/4712
Inaccurate contol command,D_kwDOAnasMc4AVRqq,2023-08-31T03:45:36Z,zillur-av,2,Answered,,,
Inaccurate contol command,D_kwDOAnasMc4AVRqq,2023-08-31T03:45:36Z,zillur-av,2,Answered,DC_kwDOAnasMc4AaNif,maxime-clem,"There are several things that may force a 0 velocity on the control, even if planning outputs a trajectory with positive velocity.
For example, you need to ensure that Autoware is engaged.

If you can record a bag with all the topics (you can omit heavy topics like images and pointclouds), it should be possible to identify the issue. Even just a few seconds of data should be enough."
Inaccurate contol command,D_kwDOAnasMc4AVRqq,2023-08-31T03:45:36Z,zillur-av,2,Answered,DC_kwDOAnasMc4AaQRI,zillur-av,"Here is a rosbag file you can find https://drive.google.com/drive/folders/113rb7jCnNHLDoaJiZrXFZjmA5spUiHIw?usp=sharing. it does not have raw pointcloud and images. Another bigger file if necessary https://drive.google.com/drive/folders/1AYJEzyoR8zT7s1LjmB7s-p18h4d3b_tj?usp=sharing

Here are the issues I am having:

- `Auto` mode in rviz shifts between gray and activatable frequently after setting up a goal. So, I enable it the moment it becomes activable. Our car interface has another extra layer. when I publish that message, only actuators start to work
- After setting up initial pose, if I move the car manually, the localization fails completely, the new pose goes far away from the actual position
- The problem I mentioned above that it generates 0 velocity in a straight lanelet. It does not happen always, sometimes it generates correct control commands. Don't know what's going on
- **The most important issue I am having now:** I see it is generating correct commands, then the moment I turn on the actuators, it starts to generate inaccurate commands, specially for steering, it just continue to rotates all the way on both sides and car does not move at all. you may see this situation in the rosbag files

![Screenshot from 2023-08-31 09-09-40](https://github.com/autowarefoundation/autoware/assets/54721606/1be98747-7611-4444-80df-fe65e0672e29)
![Screenshot from 2023-08-30 18-57-56](https://github.com/autowarefoundation/autoware/assets/54721606/bc4a3bdb-937b-4609-947e-8d560a9ce66a)

![Screenshot from 2023-08-30 18-21-13](https://github.com/autowarefoundation/autoware/assets/54721606/9a386f97-5c7c-4fa2-884d-3eb9448a22e6)

"
Inaccurate contol command,D_kwDOAnasMc4AVRqq,2023-08-31T03:45:36Z,zillur-av,2,Answered,DC_kwDOAnasMc4AaUcT,VRichardJP,"> Auto mode in rviz shifts between gray and activatable frequently after setting up a goal.

I think the auto button turns grey if a module does not look like ready or if an emergency would be triggered. For example, if your HW is not performant enough, some critical topics are not published at required frequency. In any case, I think RQT diagnostic aggregator should give some details about why autoware does not allow autonomous mode.

> The most important issue I am having now: I see it is generating correct commands, then the moment I turn on the actuators, it starts to generate inaccurate commands, specially for steering, it just continue to rotates all the way on both sides and car does not move at all. you may see this situation in the rosbag files

You mean steering turns all the way left, then all the way right? on and on? Looks like an issue on the actuator side. If you only launch the vehicle interface layer and send commands using ros2 cli or a game controller, does it work as expected?

"
Inaccurate contol command,D_kwDOAnasMc4AVRqq,2023-08-31T03:45:36Z,zillur-av,2,Answered,DC_kwDOAnasMc4AaUh2,zillur-av,"Yes, steering wheel rotates all the way to left and then right. If i use cli or game controller, it works fine. My interface takes `twist.angular.z` type message for steering while autoware generates desired sterring angle. So, here is what i am doing: 
`twist.angular.z = tan(AckermanControlCommand.lateral.steering_tire_angle) * current_velocity / wheel_base`
and it generates `rad/s` angular speed. Not sure what could go wrong here."
Inaccurate contol command,D_kwDOAnasMc4AVRqq,2023-08-31T03:45:36Z,zillur-av,2,Answered,DC_kwDOAnasMc4AaUiV,zillur-av,"I see these kinds of messges after setting up goal, mostly, that `emergency stop is operated` messge.
 however, sometimes it works. when i turned off steering interface, i could drive the car without any manual velocity control like brake or acceleration. 
also, in some other cases, it does not work:
- sometimes trajectory looks like `light green` instead of `solid green`. 
- even though there is no obstacle in the path, it says `obstacle in the path` and just stops there, probably i can modify the object detection sensitivity somewhere.
- 
![Screenshot from 2023-09-03 11-43-29](https://github.com/autowarefoundation/autoware/assets/54721606/b4569387-2f1b-4519-8d26-870cfb3e830d)
![Screenshot from 2023-09-03 11-27-27](https://github.com/autowarefoundation/autoware/assets/54721606/c167fb1a-1f3c-4a87-a2ab-93bb5cd238f6)
![Screenshot from 2023-09-03 11-17-18](https://github.com/autowarefoundation/autoware/assets/54721606/3cb0e69a-ca55-42a7-9599-dfcc53c04cd2)
![Screenshot from 2023-09-03 11-11-29](https://github.com/autowarefoundation/autoware/assets/54721606/bab73671-44da-4cfd-bb51-aeaed347f385)
"
Inaccurate contol command,D_kwDOAnasMc4AVRqq,2023-08-31T03:45:36Z,zillur-av,2,Answered,DC_kwDOAnasMc4AaTUi,zillur-av,"@maxime-clem @KYabuuchi Can you please have a look at this? Sometimes when I set the goal, the trajectory does not form completely. It remains kind of light green instead of solid green or red."
Inaccurate contol command,D_kwDOAnasMc4AVRqq,2023-08-31T03:45:36Z,zillur-av,2,Answered,DC_kwDOAnasMc4AaUaE,KYabuuchi,"Unfortunately, I am not well-versed in planning and control component, so I cannot help with your issue.
Please wait for responses from someone with expertise. :pray:

For someone who can assist: His map has been shared in this discussion. https://github.com/orgs/autowarefoundation/discussions/3750"
2023-08-31 Racing Working Group Meeting,D_kwDOAnasMc4AVRsu,2023-08-31T05:20:39Z,pojenwang,0,Unanswered,,,
What do the two worlds 'Keep' and 'Freespace' mean in the scenario editor?,D_kwDOAnasMc4AVR0C,2023-08-31T08:16:55Z,whbcumtb,1,Answered,,,
What do the two worlds 'Keep' and 'Freespace' mean in the scenario editor?,D_kwDOAnasMc4AVR0C,2023-08-31T08:16:55Z,whbcumtb,1,Answered,DC_kwDOAnasMc4AaSij,hakuturu583,@yamacir-kit @vios-fish Could you answer this question?
Adding the 2D Dummy Bi-Cycle and 2D Dummy Motor cycle in the Autoware stack for sample map planning,D_kwDOAnasMc4AVR6X,2023-08-31T10:23:14Z,Kaipa-Charan,1,Answered,,,
Adding the 2D Dummy Bi-Cycle and 2D Dummy Motor cycle in the Autoware stack for sample map planning,D_kwDOAnasMc4AVR6X,2023-08-31T10:23:14Z,Kaipa-Charan,1,Answered,DC_kwDOAnasMc4AaaL4,Kaipa-Charan,Issue is resolved 
"Open AD Kit WG Meeting August 31, 2023",D_kwDOAnasMc4AVR6t,2023-08-31T10:28:47Z,oguzkaganozt,0,Unanswered,,,
Robot swerving to 1 direction when MPC fails,D_kwDOAnasMc4AVR8e,2023-08-31T11:04:32Z,MrOCW,0,Unanswered,,,
"""map_loader_package"" documentation is not clear.",D_kwDOAnasMc4AVSAZ,2023-08-31T12:27:16Z,hakanaktass,0,Unanswered,,,
Uninstall autoware dependencies,D_kwDOAnasMc4AVTDk,2023-09-01T16:36:28Z,zillur-av,2,Answered,,,
Uninstall autoware dependencies,D_kwDOAnasMc4AVTDk,2023-09-01T16:36:28Z,zillur-av,2,Answered,DC_kwDOAnasMc4AaTQ8,maxime-clem,"I found out that there are supposed to be uninstall scripts  (https://stackoverflow.com/a/62276101) but I could not find them in my environment.
```
# To uninstall cuda
sudo /usr/local/cuda-11.4/bin/cuda-uninstaller 
# To uninstall nvidia
sudo /usr/bin/nvidia-uninstall
```

Previously I have used the command `sudo apt purge nvidia* cuda*` but it may cause unexpected issues so the scripts above are probably better if you have them."
Uninstall autoware dependencies,D_kwDOAnasMc4AVTDk,2023-09-01T16:36:28Z,zillur-av,2,Answered,DC_kwDOAnasMc4AaUCS,zillur-av,Those `cuda-uninstaller` is not available when I installed using ansible script
Uninstall autoware dependencies,D_kwDOAnasMc4AVTDk,2023-09-01T16:36:28Z,zillur-av,2,Answered,DC_kwDOAnasMc4AbcFr,TZECHIN6,"https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#removing-cuda-toolkit-and-driver

This is an official way to uninstall the nvidia dependencies:
Ubuntu and Debian

To remove CUDA Toolkit:
```
sudo apt-get --purge remove ""*cuda*"" ""*cublas*"" ""*cufft*"" ""*cufile*"" ""*curand*"" \
 ""*cusolver*"" ""*cusparse*"" ""*gds-tools*"" ""*npp*"" ""*nvjpeg*"" ""nsight*"" ""*nvvm*""
```
To remove NVIDIA Drivers:
```
sudo apt-get --purge remove ""*nvidia*"" ""libxnvctrl*""
```
To clean up the uninstall:
```
sudo apt-get autoremove
```


Btw, might be the script installation of nvidia driver cannot be properly loaded somehow (I also encountered this before quite randomly). You can check with command `nvidia-smi` to see whether the driver is loaded or not.
"
Is it possible to optimize NDT Localizer for CUDA GPUs?,D_kwDOAnasMc4AVTDu,2023-09-01T16:41:29Z,yaukaizhi,1,Answered,,,
Is it possible to optimize NDT Localizer for CUDA GPUs?,D_kwDOAnasMc4AVTDu,2023-09-01T16:41:29Z,yaukaizhi,1,Answered,DC_kwDOAnasMc4AaSV8,J-xinyu,I think [cuNDT](https://github.com/NVIDIA-AI-IOT/cuPCL.git) is a really good project about speeding up NDT with GPU.
Why use surround_obstacle_checker?,D_kwDOAnasMc4AVTHz,2023-09-01T18:29:32Z,xmfcx,3,Answered,,,
Why use surround_obstacle_checker?,D_kwDOAnasMc4AVTHz,2023-09-01T18:29:32Z,xmfcx,3,Answered,DC_kwDOAnasMc4AaXm7,TakaHoribe,"@xmfcx Thank you for raising a discussion.

It can be disabled by default, but I suggest keeping it with different parameters.

There are some situations where we don't want the vehicle to start when a human is standing around the vehicle.
Now the surround_obstacle_checker is checking all objects, all obstacle pointcloiuds, but I feel it is too much. Why don't we change the default parameters to check only specific objects (e.g. pedestrians, bicycles)?"
Why use surround_obstacle_checker?,D_kwDOAnasMc4AVTHz,2023-09-01T18:29:32Z,xmfcx,3,Answered,DC_kwDOAnasMc4AaXnt,TakaHoribe,"The default parameter can select `check_pcd` or `check_object` only. We need to update the code to select which types of the object should be considered.

https://github.com/autowarefoundation/autoware_launch/blob/main/autoware_launch/config/planning/scenario_planning/lane_driving/motion_planning/surround_obstacle_checker/surround_obstacle_checker.param.yaml
"
Why use surround_obstacle_checker?,D_kwDOAnasMc4AVTHz,2023-09-01T18:29:32Z,xmfcx,3,Answered,DC_kwDOAnasMc4AaYfd,xmfcx,"@mitsudome-r said that this was introduced mainly for cargo odd scenarios where people could be loading cargo to the vehicle. And the customer car not moving while the cargo was being loaded or people was around.

~~I agree, we can reduce the bounding box size and use only the pedestrians.~~ I think vehicle shouldn't wait even if there is a pedestrian near the vehicle. Especially in the cases where there is a safety driver, which is the most popular use case. Things should be handled by the usual planning algorithms, not surround obstacle checker.

Like, why is take off scenario different than normal driving?

If anyone wants, they can enable it by checking the docs."
Why use surround_obstacle_checker?,D_kwDOAnasMc4AVTHz,2023-09-01T18:29:32Z,xmfcx,3,Answered,DC_kwDOAnasMc4AaYif,armaganarsln,"I still think it's not needed for pedestrians and bicycles because we are planning to drive in the city where pedestrians might be around. As long as it's outside the bounding box, the vehicle should be moving. If people want extra safety and thinking this as a measure they could add."
Why use surround_obstacle_checker?,D_kwDOAnasMc4AVTHz,2023-09-01T18:29:32Z,xmfcx,3,Answered,DC_kwDOAnasMc4AaYm9,xmfcx,"> There are some situations where we don't want the vehicle to start when a human is standing around the vehicle.

@TakaHoribe could you give some examples where this is necessary? (apart from the Cargo Delivery ODD use case)"
Why use surround_obstacle_checker?,D_kwDOAnasMc4AVTHz,2023-09-01T18:29:32Z,xmfcx,3,Answered,DC_kwDOAnasMc4AakOv,TakaHoribe,"@xmfcx Apart from the Cargo ODD, I don't think this feature is necessary except for the very beginning departure situation. However, such a feature should be in the `start_planner`, but in the `surround_obstacle_checker`.

I reconsidered this feature. I think it can be disabled by default (as long as it can be enabled easily). The same feature should be supported by the `start_planner`."
Why use surround_obstacle_checker?,D_kwDOAnasMc4AVTHz,2023-09-01T18:29:32Z,xmfcx,3,Answered,DC_kwDOAnasMc4Aam0_,mitsudome-r,Maybe we can also share this topic in Planning WG.
Why use surround_obstacle_checker?,D_kwDOAnasMc4AVTHz,2023-09-01T18:29:32Z,xmfcx,3,Answered,DC_kwDOAnasMc4AaaCx,VRichardJP,"I agree with @xmfcx. The feature has several side effects which make the vehicle behavior awkward in some situations (e.g. restarting after stopping for a red light). But I don't think the feature is useless. I think that in the cargo ODD use case, it totally makes sense to keep the vehicle stopped for as long as objects are detected around the start point (e.g. opened door, human next to he vehicle). However, I wish the feature could be restricted to start point area or some area defined on the lanelet2 (like a ""cargo"" area)."
Why use surround_obstacle_checker?,D_kwDOAnasMc4AVTHz,2023-09-01T18:29:32Z,xmfcx,3,Answered,DC_kwDOAnasMc4AbuxI,maxime-clem,I opened a PR to disable the feature in the default Autoware configuration: https://github.com/autowarefoundation/autoware_launch/pull/603
How to visualize route in rviz2 using trajectory information.,D_kwDOAnasMc4AVTwt,2023-09-03T04:26:38Z,okataka123,1,Answered,,,
How to visualize route in rviz2 using trajectory information.,D_kwDOAnasMc4AVTwt,2023-09-03T04:26:38Z,okataka123,1,Answered,DC_kwDOAnasMc4AaXRe,maxime-clem,"The route (`/planning/mission_planning/route`) is a [`LaneletRoute`](https://github.com/autowarefoundation/autoware_msgs/blob/main/autoware_planning_msgs/msg/LaneletRoute.msg) which contains the lanelet ids of the route.
If you want to visualize it as a ""trajectory"", you would need a function to convert it, although it is not clear what the corresponding trajectory would be. Naively, I would suggest to use the centerline of the lanelets, but this may not be a nice continuous line (e.g., in case of lane changes)."
How to visualize route in rviz2 using trajectory information.,D_kwDOAnasMc4AVTwt,2023-09-03T04:26:38Z,okataka123,1,Answered,DC_kwDOAnasMc4AacPc,okataka123,"@maxime-clem 
Thank you for the reply. I actually want to visualize the information in `/planning/scenario_planning/trajectory` published from the `planning_validator` node. Do I need an additional implementation to visualize the trajectory? Or can I visualize it by manipulating the Display window on the left side in RViz2?"
How to visualize route in rviz2 using trajectory information.,D_kwDOAnasMc4AVTwt,2023-09-03T04:26:38Z,okataka123,1,Answered,DC_kwDOAnasMc4AacQ3,maxime-clem,"> I actually want to visualize the information in `/planning/scenario_planning/trajectory` 

If you use the default rviz configuration (`src/launcher/autoware_launch/autoware_launch/rviz/autoware.rviz`), this topic is already visualized.

![image](https://github.com/autowarefoundation/autoware/assets/78338830/7497e180-1453-4ed4-8c64-657a758b3ddb)

If you want to add another trajectory visualization, you need to click the `Add` button in the `Displays` panel, and then select the `Trajectory` under `tier4_planning_rviz_plugin`.

![image](https://github.com/autowarefoundation/autoware/assets/78338830/e841df50-9241-427a-a672-3a677ba3e4ae)

(all of these assume that you already built Autoware and sourced the workspace with `source install/setup.sh` )
"
How to visualize route in rviz2 using trajectory information.,D_kwDOAnasMc4AVTwt,2023-09-03T04:26:38Z,okataka123,1,Answered,DC_kwDOAnasMc4AadZ-,okataka123,"@maxime-clem
Thank you for your advice! I can now completely do what I wanted to do."
2023-09-04 ODD working group weekly meeting (156),D_kwDOAnasMc4AVU8w,2023-09-04T09:26:52Z,Igata-ctrl,0,Unanswered,,,
Dependency to geographic_msgs not found when building Autoware in an environment of locally-built ROS 2,D_kwDOAnasMc4AVVA_,2023-09-04T10:38:28Z,lorenzzhao,2,Answered,,,
Dependency to geographic_msgs not found when building Autoware in an environment of locally-built ROS 2,D_kwDOAnasMc4AVVA_,2023-09-04T10:38:28Z,lorenzzhao,2,Answered,DC_kwDOAnasMc4AaVfb,kminoda,Did you execute `rosdep install ...` command?
Dependency to geographic_msgs not found when building Autoware in an environment of locally-built ROS 2,D_kwDOAnasMc4AVVA_,2023-09-04T10:38:28Z,lorenzzhao,2,Answered,DC_kwDOAnasMc4AaVfz,lorenzzhao,"Yes sure, just the way it's indicated in https://autowarefoundation.github.io/autoware-documentation/main/installation/autoware/source-installation/:
`~/Desktop/autoware$ rosdep install -y --from-paths src --ignore-src --rosdistro $ROS_DISTRO`
and it succeeds with:
`#All required rosdeps installed successfully`"
Dependency to geographic_msgs not found when building Autoware in an environment of locally-built ROS 2,D_kwDOAnasMc4AVVA_,2023-09-04T10:38:28Z,lorenzzhao,2,Answered,DC_kwDOAnasMc4AaWrK,kminoda,"Could you try clean installing the Autoware, or at least removing the `tier4_map_msgs` from `install` and `build` directory?"
Dependency to geographic_msgs not found when building Autoware in an environment of locally-built ROS 2,D_kwDOAnasMc4AVVA_,2023-09-04T10:38:28Z,lorenzzhao,2,Answered,DC_kwDOAnasMc4AaXSv,lorenzzhao,"By ""clean installing"", do you mean `rm -rf build/ install/ log/` before building autoware (with `colcon build ...`)? I did that and still I get the same error."
Dependency to geographic_msgs not found when building Autoware in an environment of locally-built ROS 2,D_kwDOAnasMc4AVVA_,2023-09-04T10:38:28Z,lorenzzhao,2,Answered,DC_kwDOAnasMc4AaXZC,kminoda,"Yes, that's my intention.

And then I don't have any idea how to fix it for now... will let you know once I come up with any.
FYI, TIER IV is running Autoware simulation on a daily basis on cloud service, and the latest Autoware has been verified to be built and run fine. So I assume it may be the environmental cause."
Dependency to geographic_msgs not found when building Autoware in an environment of locally-built ROS 2,D_kwDOAnasMc4AVVA_,2023-09-04T10:38:28Z,lorenzzhao,2,Answered,DC_kwDOAnasMc4AbAnm,isouf,"@lorenzzhao, @kminoda, did you find a solution to this issue? I am facing a very similar issue, failing at `--- stderr: autoware_common_msgs`. I have tried to build with and without Docker but I still get the same error. "
Dependency to geographic_msgs not found when building Autoware in an environment of locally-built ROS 2,D_kwDOAnasMc4AVVA_,2023-09-04T10:38:28Z,lorenzzhao,2,Answered,DC_kwDOAnasMc4AbBSU,isouf,Managed to find the issue on my side - it was due to my `conda` environment. I disabled it i.e. `conda config --set auto_activate_base false` and was able to build the workspace successfully. 
Dependency to geographic_msgs not found when building Autoware in an environment of locally-built ROS 2,D_kwDOAnasMc4AVVA_,2023-09-04T10:38:28Z,lorenzzhao,2,Answered,DC_kwDOAnasMc4AbE8r,lorenzzhao,"Well, I did find a solution, but it's rather unsatisfying: I uninstalled all ROS 2 humble packages (that were installed by ./setup-dev-env.sh), then I resolved all missing dependencies by building them from source and then sourcing their environment before building Autoware. Still, I had to apply some smaller fixes to Autoware's CMakeLists.txt as well as to some CMakeLists.txt of the dependencies, but in the end I got a successful Autoware build. 

Btw.: I don't have a `conda` environment, so this was not my issue. "
AWSIM Unity Version Too Old,D_kwDOAnasMc4AVVrl,2023-09-05T06:55:33Z,armaganarsln,0,Unanswered,,,
OpenADKit 2.0 on the AVA platform doesn't start correctly,D_kwDOAnasMc4AVVtt,2023-09-05T07:50:58Z,radolin,3,Answered,,,
OpenADKit 2.0 on the AVA platform doesn't start correctly,D_kwDOAnasMc4AVVtt,2023-09-05T07:50:58Z,radolin,3,Answered,DC_kwDOAnasMc4AadaN,HamburgDave,@kaspermeck-arm @chishengshih @oguzkaganozt any suggestions?
OpenADKit 2.0 on the AVA platform doesn't start correctly,D_kwDOAnasMc4AVVtt,2023-09-05T07:50:58Z,radolin,3,Answered,DC_kwDOAnasMc4AaeDv,kaspermeck-arm,@radolin - could you share what documentation you're following? @ambroise-arm and I will take a look at the issue you're facing.
OpenADKit 2.0 on the AVA platform doesn't start correctly,D_kwDOAnasMc4AVVtt,2023-09-05T07:50:58Z,radolin,3,Answered,DC_kwDOAnasMc4AafC-,jerry73204,"Make sure you've done these prerequisites.
- `export RMW_IMPLEMENTATION=rmw_cyclonedds_cpp`
- `ros2 daemon status` is alive and well

Please provide more log to help us gain more insights? Show the process list using `ps aux`. Also, `dmesg` kernel log might help. You may restart ROS daemon using `ros2 daemon restart`."
"Placement of ""Dynamic Object Removal"" in autoware.universe Repository",D_kwDOAnasMc4AVV8s,2023-09-05T13:09:51Z,davutcanakbas,3,Answered,,,
"Placement of ""Dynamic Object Removal"" in autoware.universe Repository",D_kwDOAnasMc4AVV8s,2023-09-05T13:09:51Z,davutcanakbas,3,Answered,DC_kwDOAnasMc4AacjB,maxime-clem,"Thank you for your contribution, the package looks very interesting and useful to the Autoware community.

As an alternative option, have you considered keeping your package on a separate repository ? If I understand correctly, your package is not meant to be used during the Autoware execution, and so it could be proposed as an external tool living in another repository. Some reference to your package can be added in the Autoware documentation (e.g., as a [how-to guide](https://autowarefoundation.github.io/autoware-documentation/main/how-to-guides/) on ""how to remove dynamic obstacles from a pointcloud map""). This would be similar to how some tools are kept on separate repositories (https://github.com/tier4/caret, https://github.com/tier4/CalibrationTools, ...)."
"Placement of ""Dynamic Object Removal"" in autoware.universe Repository",D_kwDOAnasMc4AVV8s,2023-09-05T13:09:51Z,davutcanakbas,3,Answered,DC_kwDOAnasMc4AaqbJ,kminoda,"From https://github.com/autowarefoundation/autoware.universe/pull/4977#issuecomment-1717491331

Sorry for not catching up, and thank you for contributing your awesome work!

Assuming that the package does not run online besides Autoware, but rather a preprocessing tool for pointcloud map, **I vote for placing it somewhere else**, e.g. in another repository like @maxime-clem proposed. I think there are several advantages for this option:
- It would definitely make it easier for developers to contribute to your project
- Not only Autoware users but also non-Autoware users are also able to use your project easily (on the other hand, if we put the project in Autoware, users would have to clone all the Autoware related packages even if they don't want to)
- It would be easier for Autoware beginners to understand the package structure of Autoware by only including the packages that may launched on runtime via `autoware_launch`

I would suggest making it a separate repository first, and if it turns out that it's better to put it in Autoware Universe, we can merge it into the repos then. I think it is difficult to do the vice versa."
"Placement of ""Dynamic Object Removal"" in autoware.universe Repository",D_kwDOAnasMc4AVV8s,2023-09-05T13:09:51Z,davutcanakbas,3,Answered,DC_kwDOAnasMc4Aaq2B,meliketanrikulu,"I agree this comment. It is not a tool that needs to work in Autoware all the time, so I think it should be independent from Autoware Universe. It might be better to open a new repo within Autoware and share it.

@davutcanakbas  By the way, thank you for this awesome work ! I think it is very useful and necessary for mapping operations. We also want to test it as soon as possible ."
"Placement of ""Dynamic Object Removal"" in autoware.universe Repository",D_kwDOAnasMc4AVV8s,2023-09-05T13:09:51Z,davutcanakbas,3,Answered,DC_kwDOAnasMc4Aa3Wz,davutcanakbas,"@maxime-clem @kminoda @meliketanrikulu  Thank you for your kind words! The reason for placing this package inside the autoware.universe is that it needs to work together with another package within autoware.universe, namely lidar_centerpoint.

Of course, we are open to any suggestions, and we can do it as you wish.
"
"Placement of ""Dynamic Object Removal"" in autoware.universe Repository",D_kwDOAnasMc4AVV8s,2023-09-05T13:09:51Z,davutcanakbas,3,Answered,DC_kwDOAnasMc4Aa3aU,kminoda,"Thank you for the response :pray: 

Understood that the package is dependent on `lidar_centerpoint`. But still, as long as it is intended to run without `autoware.launch.xml` in `autoware_launch`, I believe it is beneficial to put it in the other repository.

Some approaches you may take about the lidar centerpoint are
1. Clone autoware.universe and build it whenever you use dynamic_object_removal package.
2. Just copy and paste lidar_centerpoint in Autoware Universe to your repository (be careful with the copyrights though)
3. Use some other lidar object detection model and incorporate it in your repository

I think 2 or 3 would be the ideal approaches, since the lidar centerpoint in Autoware Universe are tuned for online inference."
"Placement of ""Dynamic Object Removal"" in autoware.universe Repository",D_kwDOAnasMc4AVV8s,2023-09-05T13:09:51Z,davutcanakbas,3,Answered,DC_kwDOAnasMc4Abp7V,davutcanakbas," [refer](https://github.com/autowarefoundation/autoware.universe/pull/4977#issuecomment-1742850611)

How should I integrate 'center_point' into it? Do you think it would be sufficient to fetch it from the universe and provide attribution? @maxime-clem @kminoda @meliketanrikulu  @mitsudome-r "
"Placement of ""Dynamic Object Removal"" in autoware.universe Repository",D_kwDOAnasMc4AVV8s,2023-09-05T13:09:51Z,davutcanakbas,3,Answered,DC_kwDOAnasMc4Abp7u,kminoda,"Here was my suggestion: https://github.com/orgs/autowarefoundation/discussions/3806#discussioncomment-7042708 :pray: 
(But maybe there's other way to do address your issue)"
"Placement of ""Dynamic Object Removal"" in autoware.universe Repository",D_kwDOAnasMc4AVV8s,2023-09-05T13:09:51Z,davutcanakbas,3,Answered,DC_kwDOAnasMc4AbqR4,mitsudome-r,"One thing you can do is you can clone your repository with the same workspace as autoware.
Something similar to [Calibration Tools](https://github.com/tier4/CalibrationTools#installation-procedures) from TIER IV:
```
cd ~/autoware/src/universe/external/
git clone <url-to-your-object_removal_package.git>
cd ~/autoware/
rosdep install -y --from-paths src --ignore-src --rosdistro $ROS_DISTRO
colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release --packages-up-to dynamic-object-removal
```"
Software WG Meeting 2023/09/05,D_kwDOAnasMc4AVWCe,2023-09-05T14:59:53Z,xmfcx,0,Unanswered,,,
tier4_perception_launch is giving me error during launching,D_kwDOAnasMc4AVWC3,2023-09-05T15:12:18Z,muratgozum45,1,Answered,,,
tier4_perception_launch is giving me error during launching,D_kwDOAnasMc4AVWC3,2023-09-05T15:12:18Z,muratgozum45,1,Answered,DC_kwDOAnasMc4AaYwa,zillur-av,"You can not just launch `tier4_perception_launch perception.launch.xml` without providing required `param` files. I encountered this error too. It is because one of the nodes ask for `sample_vehicle_description/config/vehicle_info.param.yaml` like file. But, it's not mentioned anywhere. what you can do: you can launch the main launch file `autoware.launch.xml` and keep other modules `false`. In that way, hopefully you will not encounter this."
tier4_perception_launch is giving me error during launching,D_kwDOAnasMc4AVWC3,2023-09-05T15:12:18Z,muratgozum45,1,Answered,DC_kwDOAnasMc4AaY21,muratgozum45,"Thank you very much @zillur-av . I did try that but what woud be the best way to see the performance of the perception stack? I would like to see the effects of the changes I do for the parameters related to the perception stack. You think launching autoware.launch.xml only like this:
<!-- Optional parameters -->
  <!-- Modules to be launched -->
  <arg name=""launch_vehicle"" default=""false"" description=""launch vehicle""/>
  <arg name=""launch_system"" default=""false"" description=""launch system""/>
  <arg name=""launch_map"" default=""false"" description=""launch map""/>
  <arg name=""launch_sensing"" default=""false"" description=""launch sensing""/>
  <arg name=""launch_sensing_driver"" default=""false"" description=""launch sensing driver""/>
  <arg name=""launch_localization"" default=""false"" description=""launch localization""/>
  <arg name=""launch_perception"" default=""true"" description=""launch perception""/>
  <arg name=""launch_planning"" default=""false"" description=""launch planning""/>
  <arg name=""launch_control"" default=""false"" description=""launch control""/>
will be sufficient? or is there anything else I have to do?"
tier4_perception_launch is giving me error during launching,D_kwDOAnasMc4AVWC3,2023-09-05T15:12:18Z,muratgozum45,1,Answered,DC_kwDOAnasMc4AaZT-,zillur-av,"Yes, it should work. Launch `autoware.launch` and keep other modules like localization, planning, control false so that you can deal with fewer nodes"
Triggering Autonomous Mode for custom planner in microservice architecture,D_kwDOAnasMc4AVWDW,2023-09-05T15:20:57Z,TobiasMascetta,2,Answered,,,
Triggering Autonomous Mode for custom planner in microservice architecture,D_kwDOAnasMc4AVWDW,2023-09-05T15:20:57Z,TobiasMascetta,2,Answered,DC_kwDOAnasMc4AassU,mitsudome-r,"In order to switch to autonomous mode, `is_autonomous_mode_available` in `/api/operation_mode/state` must become true. (published from [here](https://github.com/autowarefoundation/autoware.universe/blob/b2e9ee3fb47796c2e89fd7682ff7a56573f18fb4/system/default_ad_api/src/operation_mode.cpp#L154)) 

The field becomes true if all the dependent module states(planning state, localization state, perception state, etc) are true. [code](https://github.com/autowarefoundation/autoware.universe/blob/b2e9ee3fb47796c2e89fd7682ff7a56573f18fb4/system/default_ad_api/src/operation_mode.cpp#L47C24-L47C77)

Each module states are published by [component state monitor](https://github.com/autowarefoundation/autoware.universe/tree/main/system/component_state_monitor) which looks if all the expected messages are coming out from each module, which are defined by the config [here](https://github.com/autowarefoundation/autoware.universe/blob/main/system/component_state_monitor/config/topics.yaml). 

Therefore, if you are replacing planning module with your own custom implementation, I would first look into the topics for planning and modify them for your system. (by default it is looking at `/planning/mission_planning/route`  and `/planning/scenario_planning/trajectory`."
Triggering Autonomous Mode for custom planner in microservice architecture,D_kwDOAnasMc4AVWDW,2023-09-05T15:20:57Z,TobiasMascetta,2,Answered,DC_kwDOAnasMc4AassZ,mitsudome-r,@isamu-takagi Please add a comment if I'm missing or wrong in my explanation.
Triggering Autonomous Mode for custom planner in microservice architecture,D_kwDOAnasMc4AVWDW,2023-09-05T15:20:57Z,TobiasMascetta,2,Answered,DC_kwDOAnasMc4Aast-,isamu-takagi,"The file actually used have been copied to `autoware_launch` repository, so please edit the following file.
https://github.com/autowarefoundation/autoware_launch/blob/main/autoware_launch/config/system/component_state_monitor/topics.yaml"
Triggering Autonomous Mode for custom planner in microservice architecture,D_kwDOAnasMc4AVWDW,2023-09-05T15:20:57Z,TobiasMascetta,2,Answered,DC_kwDOAnasMc4AatrL,TobiasMascetta,"Thank you very much for your help!
We actually came a lot closer to the goal and are now able to trigger autonomous mode. 

So for other interested users, here is some documentation:

Update
----------
**Old Problem Partially Solved**
- the autonomous mode can be triggered now. It actually was a rate error combined with a shadowed config file for the component_state_monitor config.yaml 

 --> Solution: 
 - 1. Listen to the /diagnostics topic (ros2 topic echo) and find out, what topic produces an error. In planning, it is probably topic_state_monitor_scenario_planning_trajectory (aka /planning/scenario_planning/trajectory)
 2. From step one, use the message to find out, which rate is failing (there is an expected and an actual value in the data of the message)
 3. Find the correct config.yaml for the component_state_monitor, see [here](https://github.com/orgs/autowarefoundation/discussions/3809#discussioncomment-6998910) and adjust the rates for accordingly, until the diagnostic messages have the type OK. Also, if you are using a docker compose architecture, make sure you are modifying the correct file in the correct docker
 4. Modify the frequency of your planner and the topics accordingly. The trajectory msg needs to be published periodically.
 
 Problem Description - What we have tried so far
 -----------------------------------------------------------------
- After triggering the autonomous mode, the system_error_monitor throws a STALE error (for each field) for the trajectory resulting in an emergency maneuver
- There seems to be a STALE error for /autoware/planning/perfoamce_monitoring/trajectory_validation

- Disabling the trajectory topic by modifying the values in the config.yaml for the system_error_monitor results in the car not going into an emergency maneuver, but just standing still
- However, the trajectory being published and control topics seem to work as desired.
- The velocity and position profile seem to be correct and the trajectory for the first step is visualized correctly



Below are some pictures of the current state:

![Screenshot from 2023-09-14 16-17-40](https://github.com/autowarefoundation/autoware/assets/76119161/5ec7c78d-3bbe-42cc-a9e4-c0e5c9f5374e)

 
![Screenshot from 2023-09-14 16-16-11](https://github.com/autowarefoundation/autoware/assets/76119161/32d665b2-37df-4a36-99a6-91533bb09ea8)

![Screenshot from 2023-09-14 16-15-51](https://github.com/autowarefoundation/autoware/assets/76119161/37817135-21aa-4f07-809a-4a7ddf8e2d2b)
![Screenshot from 2023-09-14 13-00-01](https://github.com/autowarefoundation/autoware/assets/76119161/40936307-d968-41ff-99c2-94689c11fa2e)

Questions
----------------------
We still seem to have some problem with our trajectory msg. We tried to dive deeper into the system_error_monitor but could not figure out exactly what the error condition is, that it reacted to. Our assumption currently is that the system_error_monitor indeed raises a valid error which (after we disable the system_error_monitor partially) results into the car just not moving.

If you have further suggestions, please let us know.

Thank you for your help and best regards. "
Inaccurate steering command from autoware control module,D_kwDOAnasMc4AVWfH,2023-09-06T04:36:28Z,zillur-av,2,Answered,,,
Inaccurate steering command from autoware control module,D_kwDOAnasMc4AVWfH,2023-09-06T04:36:28Z,zillur-av,2,Answered,DC_kwDOAnasMc4AaZ13,maxime-clem,"It may be a problem with the lateral controller. To be sure, please use `plotjuggler` and load the layout from https://github.com/autowarefoundation/autoware.universe/blob/main/control/trajectory_follower_node/config/plot_juggler_trajectory_follower.xml and share the graphs for lateral control."
Inaccurate steering command from autoware control module,D_kwDOAnasMc4AVWfH,2023-09-06T04:36:28Z,zillur-av,2,Answered,DC_kwDOAnasMc4AaclW,zillur-av,"Could not  use `plotjuggler`. Loading of that layout is not working, `segmentation fault` occurs after I load that. But I did multiple testing. I am certain that my interfacing is working real time. Whatever steering angle controller is generating, my vehicle interface is following it. Here is a rosbag file you can check, it includes command from autoware, and current steering status from CAN. It feels like autoware is not generating enough turning angle, as a result, the vehicle does not follow the trajectory and after some time, it starts to generate a big steering angle to compensate but by that time, it is too late already.
https://drive.google.com/drive/folders/1jyAUFHYJP4zq7F0eiBGRj16ngOqMJv84?usp=sharing
My vehicle model:  https://github.com/zillur-av/mkz_launch, i only modified the `vehicle_info.param` file from the `sample_vehicle` package. Probably, i need to turn some other parameters for the lateral controller. "
Inaccurate steering command from autoware control module,D_kwDOAnasMc4AVWfH,2023-09-06T04:36:28Z,zillur-av,2,Answered,DC_kwDOAnasMc4Aacr6,maxime-clem,"Thank you for sharing the bag and sorry you encountered issues with `plotjuggler`. It can sometimes be unstable :disappointed: 
I will try to identify the problem from the bag.
"
Inaccurate steering command from autoware control module,D_kwDOAnasMc4AVWfH,2023-09-06T04:36:28Z,zillur-av,2,Answered,DC_kwDOAnasMc4Aacu5,zillur-av,"Thanks. I recorded a rviz screen video, https://drive.google.com/file/d/1RvsJuP1UiW0aiNcDAOdIjL7Jg4pAtvn3/view?usp=sharing. You will see it is trying to take a wide turn even when changing lane while it should take a sharp turn following the trajectory.
N.B: The recorded rosbag and video are not probably from the same test."
Inaccurate steering command from autoware control module,D_kwDOAnasMc4AVWfH,2023-09-06T04:36:28Z,zillur-av,2,Answered,DC_kwDOAnasMc4Aacxk,maxime-clem,"Thank you for the video. My first guess is that it is a localization issue where the pose published on `/localization/kinematic_state` is delayed or offset. This would also explain why you see the error message `planning trajectory is too far from ego!!`. This causes the controller to calculate a wrong lateral deviation, and so the corresponding steering is also wrong.
When I find the time to check your bag in detail I will try to confirm this hypothesis."
Inaccurate steering command from autoware control module,D_kwDOAnasMc4AVWfH,2023-09-06T04:36:28Z,zillur-av,2,Answered,DC_kwDOAnasMc4AacyT,zillur-av,"Thanks for your feedback and probably you are right. I just do not understand how. for now, we are using only one long range ouster lidar on the top, it has a around 10 feet radius blind spot surrounding the vehicle. sometimes I check the PC resources like CPU, GPU, RAM, none of them is exhausted. also, i can confirm that rviz is showing the real location because at the very last when the car is completely out of lane and stopped itself, it was actually in that position. Anyway, as I said, it could still be a localization issue, i am using `ndt` scan matching by the way, not sure the final odometry is fusing wheel encoder and imu data or no."
Inaccurate steering command from autoware control module,D_kwDOAnasMc4AVWfH,2023-09-06T04:36:28Z,zillur-av,2,Answered,DC_kwDOAnasMc4Aac5N,maxime-clem,"If not localization, it could be a transform issue.
It looks like your bag does not contain the localization or the control debug topics, so it is hard to confirm my suspicion. It would also be nice to check the `/tf` and `/tf_static` topics."
Inaccurate steering command from autoware control module,D_kwDOAnasMc4AVWfH,2023-09-06T04:36:28Z,zillur-av,2,Answered,DC_kwDOAnasMc4Aac8o,zillur-av,ok. i can record another one tomorrow. what topics do you think i should include beside `tf`?
Inaccurate steering command from autoware control module,D_kwDOAnasMc4AVWfH,2023-09-06T04:36:28Z,zillur-av,2,Answered,DC_kwDOAnasMc4AadpU,maxime-clem,"I think the following topics would be helpful:
```
/planning/scenario_planning/trajectory
/control/trajectory_follower/lateral/diagnostic
/control/trajectory_follower/lateral/predicted_trajectory
/localization/kinematic_state
/tf
/tf_static
```"
Inaccurate steering command from autoware control module,D_kwDOAnasMc4AVWfH,2023-09-06T04:36:28Z,zillur-av,2,Answered,DC_kwDOAnasMc4AaeFb,zillur-av,"Here it is with a recorded video too https://drive.google.com/drive/folders/1iH6zD4fBBBrcJzRnnQ2swnNI5XgHfYUT?usp=sharing
btw, if there was a localization error, shouldn't we see `no convergence` error? because that's what i see when initial localization fails. our lidar publishes at 10 hz. also, what does `trajectory is too far from ego` warning means? trajectory starts from the ego, then how come it be far from it?"
Inaccurate steering command from autoware control module,D_kwDOAnasMc4AVWfH,2023-09-06T04:36:28Z,zillur-av,2,Answered,DC_kwDOAnasMc4AaeOW,zillur-av,"Hey, thank you so much, it's been solved. You directed me in the right way, it was a transform issue, i made a mistake assuming `steering_wheel` angle and `tire_angle` are same. Now that I am using proper steering ratio, it's working. But to fully utilize autoware, I need to resolve these following issues ASAP as they are causing so much trouble every now and then. Can you please give some hints.

- `trajectory is far from the ego` warning, what causes it?
- when vehicle is close to lane boundary, sometimes `auto` mode does not activate saying `vehicle is out of lane`. can we get back in lane without manually driving?
- sometimes when i set goals, the trajectory does not form fully (kind of light green instead of solid green) and `auto` mode does not work too
- for some other reason, `single point fault` and again `auto` mode does not activate
- `obstacle on the path` where i see nothing. how to reduce the `sensitivity` of the object detection model?"
Inaccurate steering command from autoware control module,D_kwDOAnasMc4AVWfH,2023-09-06T04:36:28Z,zillur-av,2,Answered,DC_kwDOAnasMc4AaiPl,zillur-av,"@maxime-clem 
"
Unable to dynamically load map with map_loader package,D_kwDOAnasMc4AVWpU,2023-09-06T08:27:38Z,hakanaktass,1,Answered,,,
Unable to dynamically load map with map_loader package,D_kwDOAnasMc4AVWpU,2023-09-06T08:27:38Z,hakanaktass,1,Answered,DC_kwDOAnasMc4AaaKv,kminoda,Would you post logs and capture video of RViz?
Unable to dynamically load map with map_loader package,D_kwDOAnasMc4AVWpU,2023-09-06T08:27:38Z,hakanaktass,1,Answered,DC_kwDOAnasMc4AaaOm,hakanaktass,https://drive.google.com/file/d/1W8cAcmv5azaI_iFJkC9qaFdb6NBAP7Ri/view?usp=sharing
Unable to dynamically load map with map_loader package,D_kwDOAnasMc4AVWpU,2023-09-06T08:27:38Z,hakanaktass,1,Answered,DC_kwDOAnasMc4AaiS3,hakanaktass,"@kminoda Hi, if  I set enable_whole_load is true, map is fully loaded without any problem as we expected (in video that I shared), but I set the map loader configs as:
```yaml
/**:
  ros__parameters:
    enable_whole_load: false
    enable_downsampled_whole_load: false
    enable_partial_load: true
    enable_differential_load: true
    enable_selected_load: false

    # only used when downsample_whole_load enabled
    leaf_size: 3.0 # downsample leaf size [m]

```

I cannot see any pointcloud in rviz, only lanelet2 map loaded and ekf_localizer doesn't feeded by ndt pose. Here is my log file for this process:
[launch.log](https://github.com/autowarefoundation/autoware/files/12566226/launch.log)

Thanks in a advance"
Perception and Sensing WG Meeting 06/09/2023,D_kwDOAnasMc4AVWtC,2023-09-06T09:35:56Z,drwnz,0,Unanswered,,,
Multi PC AWSIM + Autoware Tests,D_kwDOAnasMc4AVWu6,2023-09-06T10:08:51Z,xmfcx,8,Answered,,,
Multi PC AWSIM + Autoware Tests,D_kwDOAnasMc4AVWu6,2023-09-06T10:08:51Z,xmfcx,8,Answered,DC_kwDOAnasMc4AaaeP,xmfcx,"### Test 1

https://www.youtube.com/watch?v=qHces72BmaI

[00:00](https://www.youtube.com/watch?v=qHces72BmaI&t=0s) - test
[00:42](https://www.youtube.com/watch?v=qHces72BmaI&t=42s) - ndt faulty init
[00:49](https://www.youtube.com/watch?v=qHces72BmaI&t=49s) - ndt manual reinit
[1:07](https://www.youtube.com/watch?v=qHces72BmaI&t=67s) - test 1 goal pose
[1:23](https://www.youtube.com/watch?v=qHces72BmaI&t=83s) - auto doesnt work
[1:56](https://www.youtube.com/watch?v=qHces72BmaI&t=116s) - test 1 start
[3:32](https://www.youtube.com/watch?v=qHces72BmaI&t=212s) - planning/perception reacts late
[4:38](https://www.youtube.com/watch?v=qHces72BmaI&t=278s) - extremely slow lane change
[5:18](https://www.youtube.com/watch?v=qHces72BmaI&t=318s) - stops in the middle of the road
[5:32](https://www.youtube.com/watch?v=qHces72BmaI&t=332s) - blocks the road because of the empty walkway
[6:52](https://www.youtube.com/watch?v=qHces72BmaI&t=412s) - test 1 end
[7:27](https://www.youtube.com/watch?v=qHces72BmaI&t=447s) - test 2 goal pose
[7:47](https://www.youtube.com/watch?v=qHces72BmaI&t=467s) - test 2 start
[8:37](https://www.youtube.com/watch?v=qHces72BmaI&t=517s) - crashes into other vehicle from side, stops after the crash
[10:15](https://www.youtube.com/watch?v=qHces72BmaI&t=615s) - mission planner doesn't work for lane change, failure ending"
Multi PC AWSIM + Autoware Tests,D_kwDOAnasMc4AVWu6,2023-09-06T10:08:51Z,xmfcx,8,Answered,DC_kwDOAnasMc4Aasr3,mehmetdogru,"cc: @xmfcx @TakaHoribe @mitsudome-r 

I have created some scenarios for now to kind of initiate the discussions:

Repository commit hashes for the videos:

autoware: 0e5ec3109c752b3cd92deaaad4c0b51b3b8d2cf1
autoware.universe: [33f62b43431ba18c353f2df09e7243ca71040969](https://github.com/autowarefoundation/autoware.universe/commit/33f62b43431ba18c353f2df09e7243ca71040969)
autoware_launch: [405e5fbe3a21446d57959faf01b76432a79a3743](https://github.com/autowarefoundation/autoware_launch/commit/405e5fbe3a21446d57959faf01b76432a79a3743)

---

> [3:32](https://www.youtube.com/watch?v=qHces72BmaI&t=212s) - planning/perception reacts late

- [Scenario](https://drive.google.com/file/d/1vSGjCLT7KlMW8FaJQ5iYCQlh5tpY8Pu9/view?usp=sharing)
- [Map (nishishinjuku)](https://drive.google.com/drive/folders/1Rie-cYm76yppzV4O30TnBnxDLL0t_V-x?usp=sharing)
- [Video](https://youtu.be/M5nZwThg_rI)
- Explanation: 
   - The issue seems here is that NPC is not stopping for the traffic light. Or traffic light is green for NPC while at the same time it is green for us. So it creates a problem. To simulate the issue I didn't consider the traffic light for the scenario. Needs to be analysed.

---

> [5:18](https://www.youtube.com/watch?v=qHces72BmaI&t=318s) - stops in the middle of the road
> [5:32](https://www.youtube.com/watch?v=qHces72BmaI&t=332s) - blocks the road because of the empty walkway

- [Scenario](https://drive.google.com/file/d/19ETAJ9GKbr2_94KBLMNQ6SZidpTi5Peg/view?usp=sharing)
- [Map (nishishinjuku)](https://drive.google.com/drive/folders/1Rie-cYm76yppzV4O30TnBnxDLL0t_V-x?usp=drive_link)
- [Video](https://youtu.be/3_k3fyXBkkc)
- Explanation: 
   - I couldn't reproduce the problem _""stops in the middle of the road""_. Probably about the obstacles around us. Needs to be evaluated further.
   - To walkways by default we are stopping at the moment. Needs to be discussed if necessary.

---

> [10:15](https://www.youtube.com/watch?v=qHces72BmaI&t=615s) - mission planner doesn't work for lane change, failure ending

- [Scenario](https://drive.google.com/file/d/1iWBOlIG1yonYq6t-pgYYbRCPo7v0AtQs/view?usp=sharing)
- [Map (nishishinjuku)](https://drive.google.com/drive/folders/1Rie-cYm76yppzV4O30TnBnxDLL0t_V-x?usp=drive_link)
- [Video](https://youtu.be/MDgpaQnNJ3Q)
- Explanation: 
   - In my case, vehicle is getting stuck with the information `lane_change_right`. Probably `behavior_path_planner` is not able to perform a lane change to the right neighbor lane so it gets stuck before the intersection. Needs further investigation."
Multi PC AWSIM + Autoware Tests,D_kwDOAnasMc4AVWu6,2023-09-06T10:08:51Z,xmfcx,8,Answered,DC_kwDOAnasMc4AaaeR,xmfcx,"### Test 2

https://www.youtube.com/watch?v=nS32hayC2i8

[0:00](https://www.youtube.com/watch?v=nS32hayC2i8&t=0s) - test
[0:39](https://www.youtube.com/watch?v=nS32hayC2i8&t=39s) - ndt faulty init
[0:44](https://www.youtube.com/watch?v=nS32hayC2i8&t=44s) - ndt reinit
[1:34](https://www.youtube.com/watch?v=nS32hayC2i8&t=94s) - test 1 goal pose
[1:42](https://www.youtube.com/watch?v=nS32hayC2i8&t=102s) - test 1 start
[4:08](https://www.youtube.com/watch?v=nS32hayC2i8&t=248s) - test 1 end
[4:33](https://www.youtube.com/watch?v=nS32hayC2i8&t=273s) - test 2 goal pose
[4:52](https://www.youtube.com/watch?v=nS32hayC2i8&t=292s) - test 2 start
[6:30](https://www.youtube.com/watch?v=nS32hayC2i8&t=390s) - perception/planning reacts late to the car in path
[6:55](https://www.youtube.com/watch?v=nS32hayC2i8&t=415s) - traffic jam failure ending"
Multi PC AWSIM + Autoware Tests,D_kwDOAnasMc4AVWu6,2023-09-06T10:08:51Z,xmfcx,8,Answered,DC_kwDOAnasMc4AaagP,xmfcx,"### Test 3

https://www.youtube.com/watch?v=BPVMzYocuUA

[0:00](https://www.youtube.com/watch?v=BPVMzYocuUA&t=0s) - test
[0:36](https://www.youtube.com/watch?v=BPVMzYocuUA&t=36s) - ndt faulty init
[0:41](https://www.youtube.com/watch?v=BPVMzYocuUA&t=41s) - ndt reinit
[1:07](https://www.youtube.com/watch?v=BPVMzYocuUA&t=67s) - test 1 goal pose
[1:31](https://www.youtube.com/watch?v=BPVMzYocuUA&t=91s) - test 1 start
[3:22](https://www.youtube.com/watch?v=BPVMzYocuUA&t=202s) - test 1 end
[4:58](https://www.youtube.com/watch?v=BPVMzYocuUA&t=298s) - test 2 goal pose
[5:27](https://www.youtube.com/watch?v=BPVMzYocuUA&t=327s) - test 2 start
[6:53](https://www.youtube.com/watch?v=BPVMzYocuUA&t=413s) - surround obstacle blocks the way (neighbor vehicle)
[7:25](https://www.youtube.com/watch?v=BPVMzYocuUA&t=445s) - mission planner can't plan lane change, failure ending"
Multi PC AWSIM + Autoware Tests,D_kwDOAnasMc4AVWu6,2023-09-06T10:08:51Z,xmfcx,8,Answered,DC_kwDOAnasMc4Aaavf,xmfcx,"### Test 4

https://www.youtube.com/watch?v=5IZJ4yZiBEw

[0:00](https://www.youtube.com/watch?v=5IZJ4yZiBEw&t=0s) - test
[0:37](https://www.youtube.com/watch?v=5IZJ4yZiBEw&t=37s) - ndt init
[1:01](https://www.youtube.com/watch?v=5IZJ4yZiBEw&t=61s) - test 1 goal pose
[1:15](https://www.youtube.com/watch?v=5IZJ4yZiBEw&t=75s) - test 1 start
[4:56](https://www.youtube.com/watch?v=5IZJ4yZiBEw&t=296s) - perception or planning reacts late
[7:31](https://www.youtube.com/watch?v=5IZJ4yZiBEw&t=451s) - indecisive stopping on intersection
[8:20](https://www.youtube.com/watch?v=5IZJ4yZiBEw&t=500s) - test 1 end
[10:25](https://www.youtube.com/watch?v=5IZJ4yZiBEw&t=625s) - test 2 goal pose
[10:35](https://www.youtube.com/watch?v=5IZJ4yZiBEw&t=635s) - test 2 start
[11:55](https://www.youtube.com/watch?v=5IZJ4yZiBEw&t=715s) - npc van clips through ego car
[12:33](https://www.youtube.com/watch?v=5IZJ4yZiBEw&t=753s) - traffic jam failure ending"
Multi PC AWSIM + Autoware Tests,D_kwDOAnasMc4AVWu6,2023-09-06T10:08:51Z,xmfcx,8,Answered,DC_kwDOAnasMc4AaaxZ,xmfcx,"### Test 5

https://www.youtube.com/watch?v=ed181rcJR5k

[0:00](https://www.youtube.com/watch?v=ed181rcJR5k&t=0s) - test
[0:14](https://www.youtube.com/watch?v=ed181rcJR5k&t=14s) - test 1 goal pose
[0:22](https://www.youtube.com/watch?v=ed181rcJR5k&t=22s) - test 1 start
[1:31](https://www.youtube.com/watch?v=ed181rcJR5k&t=91s) - perception/planning reacts late to the vehicle
[2:18](https://www.youtube.com/watch?v=ed181rcJR5k&t=138s) - test 1 end
[2:57](https://www.youtube.com/watch?v=ed181rcJR5k&t=177s) - test 2 goal pose
[3:11](https://www.youtube.com/watch?v=ed181rcJR5k&t=191s) - test 2 start
[3:44](https://www.youtube.com/watch?v=ed181rcJR5k&t=224s) - ndt fails maybe
[4:09](https://www.youtube.com/watch?v=ed181rcJR5k&t=249s) - vehicle falls off the map, failure ending"
Multi PC AWSIM + Autoware Tests,D_kwDOAnasMc4AVWu6,2023-09-06T10:08:51Z,xmfcx,8,Answered,DC_kwDOAnasMc4Aaay3,xmfcx,"### Test 6

https://www.youtube.com/watch?v=WID6m6z18Gc

[0:00](https://www.youtube.com/watch?v=WID6m6z18Gc&t=0s) - test
[0:35](https://www.youtube.com/watch?v=WID6m6z18Gc&t=35s) - ndt faulty init
[0:40](https://www.youtube.com/watch?v=WID6m6z18Gc&t=40s) - ndt reinit
[1:12](https://www.youtube.com/watch?v=WID6m6z18Gc&t=72s) - test 1 goal pose
[1:23](https://www.youtube.com/watch?v=WID6m6z18Gc&t=83s) - test 1 start
[2:59](https://www.youtube.com/watch?v=WID6m6z18Gc&t=179s) - extremely slow lane change
[4:13](https://www.youtube.com/watch?v=WID6m6z18Gc&t=253s) - waits in the middle of the road due to empty walkway
[5:17](https://www.youtube.com/watch?v=WID6m6z18Gc&t=317s) - mission planner failure ending"
Multi PC AWSIM + Autoware Tests,D_kwDOAnasMc4AVWu6,2023-09-06T10:08:51Z,xmfcx,8,Answered,DC_kwDOAnasMc4Aaa0k,xmfcx,"### Test 7

https://www.youtube.com/watch?v=jiEt1uyHXJE

[0:00](https://www.youtube.com/watch?v=jiEt1uyHXJE&t=0s) - test
[0:47](https://www.youtube.com/watch?v=jiEt1uyHXJE&t=47s) - ndt failure init
[0:55](https://www.youtube.com/watch?v=jiEt1uyHXJE&t=55s) - ndt reinit
[1:14](https://www.youtube.com/watch?v=jiEt1uyHXJE&t=74s) - test 1 goal pose
[1:28](https://www.youtube.com/watch?v=jiEt1uyHXJE&t=88s) - test 1 start
[4:01](https://www.youtube.com/watch?v=jiEt1uyHXJE&t=241s) - test 1 end
[4:13](https://www.youtube.com/watch?v=jiEt1uyHXJE&t=253s) - test 2 goal pose
[4:19](https://www.youtube.com/watch?v=jiEt1uyHXJE&t=259s) - test 2 start
[5:08](https://www.youtube.com/watch?v=jiEt1uyHXJE&t=308s) - reacts late to the vehicle
[5:19](https://www.youtube.com/watch?v=jiEt1uyHXJE&t=319s) - after waiting, still waits extra for the intersection
[6:13](https://www.youtube.com/watch?v=jiEt1uyHXJE&t=373s) - test 2 end
[6:29](https://www.youtube.com/watch?v=jiEt1uyHXJE&t=389s) - test 3 goal pose
[6:38](https://www.youtube.com/watch?v=jiEt1uyHXJE&t=398s) - test 3 start
[6:50](https://www.youtube.com/watch?v=jiEt1uyHXJE&t=410s) - refuses to exit after the stopline, failure ending"
Multi PC AWSIM + Autoware Tests,D_kwDOAnasMc4AVWu6,2023-09-06T10:08:51Z,xmfcx,8,Answered,DC_kwDOAnasMc4AakI9,Autostone-c,"hi，i am also try this work . but i was run autoware on Jetson Orin(ubuntu20.04).  and it seems like that traffic light recognition does not work。do you have any idea?
[launch.log](https://github.com/autowarefoundation/autoware/files/12572574/launch.log)
"
Multi PC AWSIM + Autoware Tests,D_kwDOAnasMc4AVWu6,2023-09-06T10:08:51Z,xmfcx,8,Answered,DC_kwDOAnasMc4AakPb,xmfcx,"Hi, are you running the Autoware on `awsim-stable` branch?"
Multi PC AWSIM + Autoware Tests,D_kwDOAnasMc4AVWu6,2023-09-06T10:08:51Z,xmfcx,8,Answered,DC_kwDOAnasMc4AamjF,Autostone-c,"Yes, because I am using AWSIM simulation. According to its official introduction, I need to run the awsim-stable branch. I have no problem running on two x86 work station, all functions are normal, but when I run autoware on Jetson Orin, the traffic light recognition is invalid. Can you see anything from the logs I shared？"
Multi PC AWSIM + Autoware Tests,D_kwDOAnasMc4AVWu6,2023-09-06T10:08:51Z,xmfcx,8,Answered,DC_kwDOAnasMc4AanVl,mehmetdogru,"@Autostone-c I am not very well informed about perception related topics but maybe `cuda`, `cudnn` or `tensorrt` versions are mismatching? Could you confirm the versions are as [autoware supports](https://raw.githubusercontent.com/autowarefoundation/autoware/main/amd64.env)?

And did you get any warning/error during build process of autoware on `awsim-stable` branch regarding version mismatching? 

cc: @kaancolak @xmfcx "
Multi PC AWSIM + Autoware Tests,D_kwDOAnasMc4AVWu6,2023-09-06T10:08:51Z,xmfcx,8,Answered,DC_kwDOAnasMc4Aanez,xmfcx,"I see that you had:

`1694400101.9227071 [component_container_mt-51] [TRT_COMMON][WARNING]: CUDA initialization failure with error: 35` at L168. 

And then,

`1694400102.1120832 [ERROR] [component_container_mt-51]: process has died [pid 7027, exit code -11, cmd '/data/cjf/crayon-masp/install/rclcpp_components/lib/rclcpp_components/component_container_mt --ros-args -r __node:=traffic_light_node_container -r __ns:=/perception/traffic_light_recognition -p use_sim_time:=True -p wheel_radius:=0.383 -p wheel_width:=0.235 -p wheel_base:=2.79 -p wheel_tread:=1.64 -p front_overhang:=1.0 -p rear_overhang:=1.1 -p left_overhang:=0.128 -p right_overhang:=0.128 -p vehicle_height:=2.5 -p max_steer_angle:=0.7'].`

I'm not sure why that happened but you might want to isolate and debug that node. I don't have experience running Autoware in Jetson Orin. @miursh san do you have any idea?"
Multi PC AWSIM + Autoware Tests,D_kwDOAnasMc4AVWu6,2023-09-06T10:08:51Z,xmfcx,8,Answered,DC_kwDOAnasMc4Aantq,miursh,"Sorry I don't have any experience with Orin either.
@manato @dan-dnn  Do you have any idea about this?"
Multi PC AWSIM + Autoware Tests,D_kwDOAnasMc4AVWu6,2023-09-06T10:08:51Z,xmfcx,8,Answered,DC_kwDOAnasMc4AanyQ,miursh,"CUDA error35 looks like some kind of driver error.

Could you confirm that other ML packages or CUDA samples will work?"
Multi PC AWSIM + Autoware Tests,D_kwDOAnasMc4AVWu6,2023-09-06T10:08:51Z,xmfcx,8,Answered,DC_kwDOAnasMc4AapNz,Autostone-c,i will test and verify it。
Multi PC AWSIM + Autoware Tests,D_kwDOAnasMc4AVWu6,2023-09-06T10:08:51Z,xmfcx,8,Answered,DC_kwDOAnasMc4AatZp,mitsudome-r,"@xmfcx Just as mentioned in today's Planning / Control WG today, there could be some issues that might have been solved in the latest branch. I have created the tag for 2023.09.14 from the latest main branch, and confirmed that it works on AWSIM v1.1.0 release.
It might be better if you can use the tag if you plan to do future tests."
Multi PC AWSIM + Autoware Tests,D_kwDOAnasMc4AVWu6,2023-09-06T10:08:51Z,xmfcx,8,Answered,DC_kwDOAnasMc4AatZr,mitsudome-r,https://github.com/autowarefoundation/autoware/tree/2023.09.14
"pkg ""tensorrt_common"",""trtexec_vendor"" stderr: cuda, cudnn, tensorrt libraries are not found",D_kwDOAnasMc4AVWyq,2023-09-06T11:34:24Z,eromreve123,2,Answered,,,
"pkg ""tensorrt_common"",""trtexec_vendor"" stderr: cuda, cudnn, tensorrt libraries are not found",D_kwDOAnasMc4AVWyq,2023-09-06T11:34:24Z,eromreve123,2,Answered,DC_kwDOAnasMc4AamcH,zillur-av,"Have you installed those? You can use provided the `ansible` script to install cuda, tensorrt, and cudnn."
"pkg ""tensorrt_common"",""trtexec_vendor"" stderr: cuda, cudnn, tensorrt libraries are not found",D_kwDOAnasMc4AVWyq,2023-09-06T11:34:24Z,eromreve123,2,Answered,DC_kwDOAnasMc4Aax9M,eromreve123,"Thanks for the response. I am sure that those tools are already installed, but it keeps showing me these in the process of colcon building some certain packages.&nbsp;


eromreve
***@***.***



&nbsp;




------------------&nbsp;原始邮件&nbsp;------------------
发件人: ""Zillur ***@***.***&gt;; 
发送时间: 2023年9月12日(星期二) 上午8:01
收件人: ***@***.***&gt;; 
抄送: ***@***.***&gt;; ***@***.***&gt;; 
主题: Re: [autowarefoundation/autoware] pkg &quot;tensorrt_common&quot;,&quot;trtexec_vendor&quot; stderr: cuda, cudnn, tensorrt libraries are not found (Discussion #3814)





 
Have you installed those? You can use provided the ansible script to install cuda, tensorrt, and cudnn.
 
—
Reply to this email directly, view it on GitHub, or unsubscribe.
You are receiving this because you authored the thread.Message ID: ***@***.***&gt;"
"pkg ""tensorrt_common"",""trtexec_vendor"" stderr: cuda, cudnn, tensorrt libraries are not found",D_kwDOAnasMc4AVWyq,2023-09-06T11:34:24Z,eromreve123,2,Answered,DC_kwDOAnasMc4Abhc4,whbcumtb,"If you installed them manually, you should write your install path into the ~/.bashrc as follows, and make it works by running the 'source ~/.bashrc' command :
source /opt/ros/humble/setup.bash
export PATH=$PATH:/usr/local/cuda-11.7/bin
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/cuda-11.7/lib64
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/home/greensky/Projects/TensorRT-8.5.3.1/lib

**Alternavtively, it is recommended to install them using the ansible script automatically.**"
API WG Meeting (09/06/2023),D_kwDOAnasMc4AVW5V,2023-09-06T13:22:52Z,yuasabe,1,Answered,,,
API WG Meeting (09/06/2023),D_kwDOAnasMc4AVW5V,2023-09-06T13:22:52Z,yuasabe,1,Answered,DC_kwDOAnasMc4Aad_B,yuasabe,"I've added some sequence diagrams here for the following use cases: https://tlab-wide.github.io/AutowareV2X/pr-48/design/use-cases/

- Blindspot VRU Detection using Collective Perception
- CAMs betweens CAVs
- I2V Traffic Light Information (TLI) Sharing

While making these sequence diagrams, it became tricky to determine how specific or detailed they should be. Since our final goal would be to define the interfaces between Autoware and standard-specific adapters, I believe the diagrams should be as specific as possible on the Autoware-side, but that would make it overly complicated. It would be nice if we can discuss more in the upcoming meetings!"
integrating oscillation with nebula driver,D_kwDOAnasMc4AVXWw,2023-09-06T23:55:37Z,dotun457,1,Answered,,,
integrating oscillation with nebula driver,D_kwDOAnasMc4AVXWw,2023-09-06T23:55:37Z,dotun457,1,Answered,DC_kwDOAnasMc4AahgL,amc-nu,"@dotun457 
Please let me add some questions to better understand.
- Does the IMU device have an ethernet, serial, or CAN connection?
- Do you already have a way to programmatically obtain data from your IMU? (C++ or Python program)
"
integrating oscillation with nebula driver,D_kwDOAnasMc4AVXWw,2023-09-06T23:55:37Z,dotun457,1,Answered,DC_kwDOAnasMc4AapQE,dotun457,"thanks for replying @amc-nu to be honest including the IMU in my question may have been premature. 

I mentioned an IMU because from my research online it seemed like the only way to make sure that the 3d dataset of the lidar could be correctly translated to the same reference however now I'm not so sure. 

So I think a better question would be, 
a.) is it possible to use nebula to parse and get an accurate point cloud of an oscillated hesai sensor using without any other sensors ? or is an IMU or maybe a SLAM algorithm the only way to create an accurate point cloud ?"
"OpenADKit Working Group Meeting September 7, 2023",D_kwDOAnasMc4AVXxb,2023-09-07T11:23:17Z,HamburgDave,0,Unanswered,,,
Put every node into a single component container?,D_kwDOAnasMc4AVYoN,2023-09-08T09:22:13Z,xmfcx,2,Answered,,,
Put every node into a single component container?,D_kwDOAnasMc4AVYoN,2023-09-08T09:22:13Z,xmfcx,2,Answered,DC_kwDOAnasMc4Aaf4k,yukkysaito,"Thank you for information :+1: 
From a safety standpoint, it would be better to separate them as much as possible.
If too many nodes are grouped together in a container, only the MRM of emergency shutdown will be triggered when a failure occurs.
If the containers are separated, it is possible to pull over in the event of a failure.

However, it is difficult to decide which is better, as it depends on the product requirements as to what kind of MRM you want to trigger at what time."
Put every node into a single component container?,D_kwDOAnasMc4AVYoN,2023-09-08T09:22:13Z,xmfcx,2,Answered,DC_kwDOAnasMc4Aaf56,xmfcx,"Thanks for the quick feedback! ❤️
I thought maybe we can separate emergency behaviors into a separate component which is simpler and safer.

So far the only MRM behavior I can see is emergency stop. Can you tell more about how pull over in emergencies is planned to work? Is there a document I can read to know more about it? Are there any other MRMs planned?"
Put every node into a single component container?,D_kwDOAnasMc4AVYoN,2023-09-08T09:22:13Z,xmfcx,2,Answered,DC_kwDOAnasMc4Aaf6F,xmfcx,"Like, even if planning nodes crash, we should be able to do pullover maneuvers safely."
Put every node into a single component container?,D_kwDOAnasMc4AVYoN,2023-09-08T09:22:13Z,xmfcx,2,Answered,DC_kwDOAnasMc4Aaf8T,isamu-takagi,"I think this choice should be made available to Autoware users. Since ROS provides a component container, this can be done by only changing the launch file. For this, Autoware needs to provide all nodes as components.

Then the only consideration is which configuration of launch files autoware_launch provides by default."
Put every node into a single component container?,D_kwDOAnasMc4AVYoN,2023-09-08T09:22:13Z,xmfcx,2,Answered,DC_kwDOAnasMc4Aaf9X,xmfcx,"@isamu-takagi Sure, we can allow any configuration. I'm trying to figure out if there is a single, common good way of doing it.

I agree we should make all the nodes into composable nodes as a goal.

But this discussion is about whether or not we should focus our attention to be single component container approach.

Like, we could put all the existing composable nodes into a single container today. But I want to learn about the arguments against this."
Put every node into a single component container?,D_kwDOAnasMc4AVYoN,2023-09-08T09:22:13Z,xmfcx,2,Answered,DC_kwDOAnasMc4Aaf_8,esteve,"> @xmfcx I agree we should make all the nodes into composable nodes as a goal.

I believe we already made all nodes composable, I recall checking every node and updating them to be composable. Not sure if all the nodes have followed that pattern since then. In any case, as @yukkysaito pointed out, if all nodes are composable, it's only a matter of changing the launch files to put them in the same component manager.

From a safety standpoint, it's best to keep them as separate processes IMHO, if a component crashes, it may bring down the entire component manager and the rest of the components. If we want to improve communication between nodes, we can look into the loaned messages API (see https://github.com/autowarefoundation/autoware.universe/pull/1794) and [rmw_iceoryx](https://github.com/ros2/rmw_iceoryx)"
Put every node into a single component container?,D_kwDOAnasMc4AVYoN,2023-09-08T09:22:13Z,xmfcx,2,Answered,DC_kwDOAnasMc4Aakzx,xmfcx,"> If we want to improve communication between nodes, we can look into the loaned messages API (see https://github.com/autowarefoundation/autoware.universe/pull/1794) and [rmw_iceoryx](https://github.com/ros2/rmw_iceoryx)

This is the best way to achieve this but it is also a long and time consuming task.

Thanks for sharing your concerns."
Put every node into a single component container?,D_kwDOAnasMc4AVYoN,2023-09-08T09:22:13Z,xmfcx,2,Answered,DC_kwDOAnasMc4AagPS,VRichardJP,"Here's my two cents:

> Reduced Inter-Process Communication (IPC) Overhead

I would like to see the numbers on this. IPC shines when transferred data is heavy (point cloud, image). I think today most of the components manipulating heavy data are already together. I am not sure there is any significant performance improvement when exchanged data is small.

> Memory Efficiency

Same, I would like to see numbers here too. For instance, if you run autoware twice, once with the current components, once with everything in one container, do you see a significant difference in memory usage?

> Single Point of Failure

This is a big issue, because crash happen, and won't disappear anytime soon. If the gnss poser crashes, you still want lidar localization to work, planning to find safe trajectories and emergency module to stop the vehicle when necessary.

"
Put every node into a single component container?,D_kwDOAnasMc4AVYoN,2023-09-08T09:22:13Z,xmfcx,2,Answered,DC_kwDOAnasMc4Aak8Y,xmfcx,"@VRichardJP I agree with you, I think the same way about only using component containers for heavy messages.

But I also have concerns about having too many small messages too.
I am working on: [feat: add autoware_node and autoware_control_center](https://github.com/autowarefoundation/autoware.core/pull/73) and I didn't benchmark the capabilities of DDS when there are so many and frequent heartbeat messages sent around.

I also wouldn't move on with this without doing some benchmarks. I wanted to see if I was missing something obvious and developers' thoughts and past experiences about the topic.

Also I wanted to know about how we approach the safety issues in general.

Like, when a node crashes, even an insignificant one, do we still want everything else to operate? Or do we just want to send an emergency stop signal?

Or, in what scenarios we want an MRM Pullover to activate? (It is not implemented yet and TIER IV devs are working on this feature)

Maybe we could have a small, simpler, lighter safety version of Autoware running in parallel and would handle safety cases when the main Autoware fails.
  - Right now this is not planned, current expectation is that if planner component fails, the vehicle should do emergency stop.

Anyways, this thread was to share our concerns for such scenario. I'm happy for everyone who participated and would like to learn more about your perspectives on how we can handle the safety issues. This includes:
- When a sensor crashes
- When a sensor is occluded
- When a node crashes
- When a node becomes irresponsive
- How to categorize the priorities for nodes (requirement/necessity levels for self-driving)"
Put every node into a single component container?,D_kwDOAnasMc4AVYoN,2023-09-08T09:22:13Z,xmfcx,2,Answered,DC_kwDOAnasMc4AalOy,VRichardJP,"> Maybe we could have a small, simpler, lighter safety version of Autoware running in parallel and would handle safety cases when the main Autoware fails.

This is a common approach I have seen in other AD stacks, where a ""safety"" stack has limited features and can override the ""best effort"" stack at any time. However, both stacks have very different requirements, and I would not see Autoware being anything but the ""best effort"" stack."
Autoware Installation issue,D_kwDOAnasMc4AVZkD,2023-09-09T12:30:08Z,ziri4k,1,Answered,,,
Autoware Installation issue,D_kwDOAnasMc4AVZkD,2023-09-09T12:30:08Z,ziri4k,1,Answered,DC_kwDOAnasMc4Aains,maxime-clem,"I am not sure there is any error here. I think you are just reaching the step `Step 3/6 : FROM [ghcr.io/autowarefoundation/autoware-universe:humble-latest-prebuilt](http://ghcr.io/autowarefoundation/autoware-universe:humble-latest-prebuilt)` which requires downloading a very large docker image so it may take a long time depending on your download speed.
Can you try running `docker pull ghcr.io/autowarefoundation/autoware-universe:humble-latest-prebuilt` in a terminal ? This will allow you to see the progress of the download."
Autoware Installation issue,D_kwDOAnasMc4AVZkD,2023-09-09T12:30:08Z,ziri4k,1,Answered,DC_kwDOAnasMc4AaqsO,ziri4k,resolved. thank you
Inaccurate Turn Indicator signal,D_kwDOAnasMc4AVaZB,2023-09-10T19:57:07Z,zillur-av,1,Answered,,,
Inaccurate Turn Indicator signal,D_kwDOAnasMc4AVaZB,2023-09-10T19:57:07Z,zillur-av,1,Answered,DC_kwDOAnasMc4Aa3tk,mehmetdogru,"@zillur-av Please provide more information about the issue. 

- Video
- Scenario created with [scenario_editor](https://scenario.ci.tier4.jp/)
- Your HD-Map
- Autoware log file

etc."
awsim-stable branch on Orin,D_kwDOAnasMc4AVahz,2023-09-11T03:15:18Z,Autostone-c,1,Answered,,,
awsim-stable branch on Orin,D_kwDOAnasMc4AVahz,2023-09-11T03:15:18Z,Autostone-c,1,Answered,DC_kwDOAnasMc4Aa9qw,whbcumtb,"From the log ""[ndt_scan_matcher-33] [ERROR] [1694400116.409201409] [localization.pose_estimator.ndt_scan_matcher]"", I think the main reason of your encountered error may be in the localization module, and you may ask help from the localization developer for this error. I am sorry that I am not majored in localization and can only provide you these."
build ar_tag_based_localizer failed: undefined reference to `aruco::CameraParameters::operator=(aruco::CameraParameters const&)',D_kwDOAnasMc4AVaiS,2023-09-11T03:41:21Z,hliu869,2,Answered,,,
build ar_tag_based_localizer failed: undefined reference to `aruco::CameraParameters::operator=(aruco::CameraParameters const&)',D_kwDOAnasMc4AVaiS,2023-09-11T03:41:21Z,hliu869,2,Answered,DC_kwDOAnasMc4AakBk,SakodaShintaro,"Thank you for your report.

`ar_tag_based_localizer` depends on the `aruco` library.

Run the following in the `autoware` directory and it should install.

```
rosdep update
source /opt/ros/humble/setup.bash
rosdep install -y --from-paths src --ignore-src --rosdistro $ROS_DISTRO
```

After that,
```
rm -r build/ar_tag_based_localizer install/ar_tag_based_localizer
```
and then try to build again.

I hope this works out for you."
build ar_tag_based_localizer failed: undefined reference to `aruco::CameraParameters::operator=(aruco::CameraParameters const&)',D_kwDOAnasMc4AVaiS,2023-09-11T03:41:21Z,hliu869,2,Answered,DC_kwDOAnasMc4AakBy,SakodaShintaro,"Sorry, I overlooked that you had already run the following command
```
rosdep install -y --from-paths src --ignore-src --rosdistro $ROS_DISTRO
```

However, it is important to then execute the following
```
rm -r build/ar_tag_based_localizer install/ar_tag_based_localizer
```

Thank you for your time and confirmation."
build ar_tag_based_localizer failed: undefined reference to `aruco::CameraParameters::operator=(aruco::CameraParameters const&)',D_kwDOAnasMc4AVaiS,2023-09-11T03:41:21Z,hliu869,2,Answered,DC_kwDOAnasMc4AakJS,hliu869,"Wow, it works, thank you so much."
2023-09-11 ODD working group weekly meeting (157),D_kwDOAnasMc4AVats,2023-09-11T08:25:08Z,Igata-ctrl,0,Unanswered,,,
Failed to compile behavior_velocity_planner in the installation,D_kwDOAnasMc4AVawY,2023-09-11T09:10:31Z,mkakh,3,Answered,,,
Failed to compile behavior_velocity_planner in the installation,D_kwDOAnasMc4AVawY,2023-09-11T09:10:31Z,mkakh,3,Answered,DC_kwDOAnasMc4Aakjo,soblin,"This issue reproduced on my computer too. I'm guessing this is an unintended cause of the following refactorings.
https://github.com/autowarefoundation/autoware.universe/issues/4821
I will ship a fix PR ASAP !"
Failed to compile behavior_velocity_planner in the installation,D_kwDOAnasMc4AVawY,2023-09-11T09:10:31Z,mkakh,3,Answered,DC_kwDOAnasMc4Aakke,mkakh,"I got it. Thank you!

Can I close this Q&A in this case?"
Failed to compile behavior_velocity_planner in the installation,D_kwDOAnasMc4AVawY,2023-09-11T09:10:31Z,mkakh,3,Answered,DC_kwDOAnasMc4Aakkf,soblin,Please wait for this PR to be merged https://github.com/autowarefoundation/autoware.universe/pull/4947
Failed to compile behavior_velocity_planner in the installation,D_kwDOAnasMc4AVawY,2023-09-11T09:10:31Z,mkakh,3,Answered,DC_kwDOAnasMc4AavYL,wbq0206,"The occurrence of such problems may also be caused by errors during the compilation process. You can delete both build and install, and then compile them in full"
Multiple Marker in the same markerarray had the same ns and id,D_kwDOAnasMc4AVaxw,2023-09-11T09:39:07Z,hliu869,1,Answered,,,
Multiple Marker in the same markerarray had the same ns and id,D_kwDOAnasMc4AVaxw,2023-09-11T09:39:07Z,hliu869,1,Answered,DC_kwDOAnasMc4Aamic,KYabuuchi,"Hi! Thanks for reporting the issue. 
This issue is being addressed in this PR https://github.com/autowarefoundation/autoware_common/pull/180.
Also, this should not be critical since some of the traffic lights are just not visible in rviz."
Multiple Marker in the same markerarray had the same ns and id,D_kwDOAnasMc4AVaxw,2023-09-11T09:39:07Z,hliu869,1,Answered,DC_kwDOAnasMc4AamjA,hliu869,"Thanks for your replying, I got what you say! :)"
Resolve control module warnings,D_kwDOAnasMc4AVbVv,2023-09-11T22:12:50Z,zillur-av,0,Unanswered,,,
Software WG Meeting 2023/09/12,D_kwDOAnasMc4AVbh3,2023-09-12T05:38:53Z,mitsudome-r,0,Unanswered,,,
2023-09-13 Simulation Working group Meeting,D_kwDOAnasMc4AVbtM,2023-09-12T08:57:46Z,WJaworskiRobotec,0,Unanswered,,,
Eagleye Test and Comparing Other Localization Sources,D_kwDOAnasMc4AVcGB,2023-09-12T16:17:19Z,meliketanrikulu,0,Unanswered,,,
Planning&Control WG Meeting 2023/09/14,D_kwDOAnasMc4AVcuV,2023-09-13T09:25:36Z,mehmetdogru,3,Answered,,,
Planning&Control WG Meeting 2023/09/14,D_kwDOAnasMc4AVcuV,2023-09-13T09:25:36Z,mehmetdogru,3,Answered,DC_kwDOAnasMc4AatFl,TakaHoribe,"@mehmetdogru @xmfcx @armaganarsln 
Thank you for today's discussion. I didn't expect the AWSIM testing to give us that much information. Today's AWSIM discussion was awesome. Thank you so much for working on this topic.

@xmfcx Recently we've tested with the main branch in the AWSIM, and now all interface-related issues (unconnected traffic light, etc) are fixed. Would you try to test in the main branch? I also asked @mitsudome-r -san to provide a stable branch for AWSIM which is closer to the main.

"
Planning&Control WG Meeting 2023/09/14,D_kwDOAnasMc4AVcuV,2023-09-13T09:25:36Z,mehmetdogru,3,Answered,DC_kwDOAnasMc4AatGk,TakaHoribe,"@brkay54 Thank you for today's discussion. I have some comments on the slope compensation topic.

You said you need a future slope angle due to the time delay, but I still don't think the change in 0.2~0.3 seconds has a large effect on vehicle control. But I assume it does here.

If it has a large effect on the vehicle, then I recommend more relying on the integral term of the PID. 
You can use the sensor information (e.g. IMU) to estimate the slope angle, but you should not 100% trust it. The deviation from the ideal information should be covered by the feedback control, especially an integral term in this case."
Planning&Control WG Meeting 2023/09/14,D_kwDOAnasMc4AVcuV,2023-09-13T09:25:36Z,mehmetdogru,3,Answered,DC_kwDOAnasMc4AatJR,brkay54,"@TakaHoribe Thank you for your comment! Actually, the main problem is that the slope is not static, it is dynamic, and you can think that the slope of the area we are trying to drive is always changing (positive to negative or negative to positive) in a short distance. I tried the integral term a lot but it does not provide stability because the slope is very dynamic. Because of inaccurate slope information increases our error and inflates our integral term to decrease error but same time it causes delay and instability in the feedback controller. "
Planning&Control WG Meeting 2023/09/14,D_kwDOAnasMc4AVcuV,2023-09-13T09:25:36Z,mehmetdogru,3,Answered,DC_kwDOAnasMc4AavHF,villaoningfootball,Hello everyone，I really want to know the conclusion of the first discussion topic，please share me，thank you
Planning&Control WG Meeting 2023/09/14,D_kwDOAnasMc4AVcuV,2023-09-13T09:25:36Z,mehmetdogru,3,Answered,DC_kwDOAnasMc4Aav_B,mehmetdogru,"Hi @villaoningfootball 

The conclusion is to disable `surround_obstacle_checker` by default."
Reference Design WG Meeting (09/13/2023),D_kwDOAnasMc4AVc7x,2023-09-13T13:49:57Z,chishengshih,1,Answered,,,
Reference Design WG Meeting (09/13/2023),D_kwDOAnasMc4AVc7x,2023-09-13T13:49:57Z,chishengshih,1,Answered,DC_kwDOAnasMc4AarCH,chishengshih,"Meeting Notes:

Reference HW:

- Comments on this page: https://github.com/autowarefoundation/autoware-documentation/pull/452
- Or Google Doc:   -  https://docs.google.com/document/d/1K6IzGQ_XnH_4bzUmartDqCcBUg2xQ1SNJ7NvTQTGfZM/edit
- The listed hardware needs to be up to date: 5 years or still available on the market. 
- ODD? Reference Implementation
- Tested on Autoware: refer to Autoware Universe or Autoware.Auto
- Remove IAC logo from #452
- David: ultrasonic sensors. Does Autoware use Ultrasonic sensors? Not at this time. But we can add ""expected sensors"" in the document. 

Reference Design Guideline:
- How to add reference design in #452? 
- Include F1Tenth and GoCart, other ODDs, Cargo, Bus, 
- Breakout the solution for OpenAD Kit, SOAFEE (Xlinix, Marvell, ..), developer board
- Include DevBoard
- OpenAD Kit: https://autowarefoundation.github.io/open-ad-kit-docs/latest/
- (CJ): EEA 
"
Autoware installation: nvidia-container-cli: initialization error,D_kwDOAnasMc4AVc8p,2023-09-13T14:08:49Z,ziri4k,1,Answered,,,
Autoware installation: nvidia-container-cli: initialization error,D_kwDOAnasMc4AVc8p,2023-09-13T14:08:49Z,ziri4k,1,Answered,DC_kwDOAnasMc4Aar0g,ziri4k,"I found a way around it. By running autoware without GPU support.

To translate the `rocker` command into a `docker run` command for running the Autoware Docker container without GPU support, you can use the following:

```bash
docker run -it --rm --name autoware \
  -e DISPLAY=$DISPLAY \
  --privileged \
  -v /tmp/.X11-unix:/tmp/.X11-unix \
  -v $HOME/autoware_map:/home/autoware/autoware_map \
  ghcr.io/autowarefoundation/autoware-universe:humble-latest-prebuilt
```

Here's what each part of this `docker run` command does:

- `-v $HOME/autoware_map:/home/autoware/autoware_map`: Mounts the host directory `$HOME/autoware_map` into the container at `/home/autoware/autoware_map`. This allows you to access and use the contents of the `autoware_map` directory within the container.

- `ghcr.io/autowarefoundation/autoware-universe:humble-latest-prebuilt`: Specifies the Docker image you want to run, which is the Autoware image from GitHub Container Registry (ghcr.io). Adjust the image tag as needed.

With this `docker run` command, you'll launch the Autoware container with X11 support for GUI display and the specified volume mounted, allowing you to work with the Autoware map data in the `/home/autoware/autoware_map` directory within the container."
2023-09-14 Racing Working Group Meeting,D_kwDOAnasMc4AVdj2,2023-09-14T06:48:54Z,pojenwang,1,Answered,,,
2023-09-14 Racing Working Group Meeting,D_kwDOAnasMc4AVdj2,2023-09-14T06:48:54Z,pojenwang,1,Answered,DC_kwDOAnasMc4AbEpA,Autostone-c,"> # Administrative
> [Previous Meeting Minutes](https://github.com/orgs/autowarefoundation/discussions/3791)
> 
> # Attendees
> * Po-Jen Wang (AWF)
> * Christian JOHN (Tier.IV)
> * Mitsudome-san (Tier.IV)
> * David Walmroth (Open AD Kit / Pix-Moving)
> * Jack Silberman (UCSD)
> 
> Minutes: Po-Jen Wang
> 
> # Topics
> ROS By-the-bay talk
> 
> * I will be giving a talk at ROS By-the-Bay in Mountain View, CA hosted by Intrinsic/Open Robotics later today (Sep 14th)
> * https://www.meetup.com/ros-by-the-bay/events/295746242/
> * Will go over some trends in the transition to EVs in the automotive industry and why that led us to pursue standardization of EV
> * Then will talk about the F1tenth and go-kart project that we open-source
> * Finally will give an overview of Autoware
> * The two other speakers are from Apex.ai and AI Racing Tech (Indy Autonomous Challenge team)
> * They would not stream the talk or share the slides
> 
> Autoware on F1Tenth
> 
> * Bug fix: Previously when displaying the recorded trajectory in RViz, RViz's fps will drop to 0-1. We have fixed this bug so trajectory can be shown at normal fps when running the record-replay demo
> * Will record better demo videos with normal RViz fps showing the recorded trajectory
> * Clemson U. started the Autoware installation. Haven't heard back on their progress
> * HUMDA also started. They have finished Autoware installation on their Jetson AGX Orin without issue. Took them 4-5 hours. They will work on the demo next.
> * Jack has a Jetson NX and he will give it a try
> * We will experiment with different Autoware modules on the F1tenth though because of hardware constraints on the Jetson NX, not all of them will work
> * Object detection/tracker Yolox should give reasonable fps on the NX based on my previous experience
> 
> AV4EV Go-Kart Project Update:
> 
> * Fox News will be coming to Pennovation next Thursday to do an interview with the team. We'll prepare a short go-kart demo similar to the one we had at the Autoware meetup in June (gnss trajectory following).
> 
> Other topics:
> 
> * AWF Work Group overview: https://autoware.org/join-a-work-group/

hi ，i see ""They have finished Autoware installation on their Jetson AGX Orin without issue"". i am also run autoware(humble branch) on Jetson Orin. But I encountered the following error：


[launch.log](https://github.com/autowarefoundation/autoware/files/12710663/launch.log)
- CUDA initialization failure with error: 35
- [ERROR] [lidar_centerpoint_node-43]: process has died . 


could you give me some suggestions?"
multi_object_tracker,D_kwDOAnasMc4AVdoe,2023-09-14T08:32:33Z,dong-hub-png,0,Unanswered,,,
"Open AD Kit WG Meeting September 14, 2023",D_kwDOAnasMc4AVdvX,2023-09-14T10:35:35Z,oguzkaganozt,0,Unanswered,,,
"In actual vehicle testing, there is a lag issue with autoware, especially when the speed is greater than 20km/h.",D_kwDOAnasMc4AVed_,2023-09-15T03:28:45Z,hzkkk1997,1,Answered,,,
"In actual vehicle testing, there is a lag issue with autoware, especially when the speed is greater than 20km/h.",D_kwDOAnasMc4AVed_,2023-09-15T03:28:45Z,hzkkk1997,1,Answered,DC_kwDOAnasMc4AawjS,lexavtanke,"@hzkkk1997 I'm not sure what do you mean about usage rate of each node in Autoware some custom special tool for this? 
But you can start with htop with filter:autoware"
"In actual vehicle testing, there is a lag issue with autoware, especially when the speed is greater than 20km/h.",D_kwDOAnasMc4AVed_,2023-09-15T03:28:45Z,hzkkk1997,1,Answered,DC_kwDOAnasMc4Aa0Jo,hzkkk1997,Thank you. I will go and learn some tips on using HTOP.
May I ask if anyone has used the ROS2 humble version of rqt-top to check the resource usage of each node in Autoware?,D_kwDOAnasMc4AVefP,2023-09-15T03:55:46Z,hzkkk1997,0,Unanswered,,,
2023-09-18 ODD working group weekly meeting (158),D_kwDOAnasMc4AVhWf,2023-09-18T00:09:03Z,Igata-ctrl,0,Unanswered,,,
Autoware document build error,D_kwDOAnasMc4AVhYC,2023-09-18T00:54:25Z,tianhuangshi,0,Unanswered,,,
How to more conveniently implement data transmission links for specified topics?,D_kwDOAnasMc4AVhao,2023-09-18T02:35:04Z,letsgoniaoniao,0,Unanswered,,,
"Removal of packages in Autoware.Universe ""common"" during library porting into Autoware.Core",D_kwDOAnasMc4AVhcQ,2023-09-18T03:31:26Z,JianKangEgon,0,Unanswered,,,
Failing to run planning simulation - can't change to autonomous mode,D_kwDOAnasMc4AVhw1,2023-09-18T12:14:40Z,adi-driveu,1,Answered,,,
Failing to run planning simulation - can't change to autonomous mode,D_kwDOAnasMc4AVhw1,2023-09-18T12:14:40Z,adi-driveu,1,Answered,DC_kwDOAnasMc4Aa9sN,wbq0206,"Please check if the following situations have occurred:

Is the AUTO button always in this state?

2. Is there a prompt for the console to crash when this state occurs, such as in behavior_ Path_ The planner module has a core issue;

3. If so, please recompile with the Debug version."
Failing to run planning simulation - can't change to autonomous mode,D_kwDOAnasMc4AVhw1,2023-09-18T12:14:40Z,adi-driveu,1,Answered,DC_kwDOAnasMc4Aa-jC,adi-driveu,"Hi, thank you for your response.
Yes, the `AUTO` button is always disabled. The system does not crash. Its allows me to set the path, but not to got to auto mode. I just see the error in the log:
`[service_log_checker-2] [ERROR] [1695027990.407961939] [system.service_log_checker]: /api/operation_mode/change_to_autonomous: status code 1 'The mode change is blocked by the system.' (/default_ad_api/node/operation_mode) `"
Introducing Autoware Build GUI: A User-Friendly Interface for Building Autoware Packages,D_kwDOAnasMc4AVhzV,2023-09-18T13:00:55Z,KhalilSelyan,2,Answered,,,
Introducing Autoware Build GUI: A User-Friendly Interface for Building Autoware Packages,D_kwDOAnasMc4AVhzV,2023-09-18T13:00:55Z,KhalilSelyan,2,Answered,DC_kwDOAnasMc4Aa4oA,xmfcx,https://github.com/orgs/autowarefoundation/discussions/2581 could be utilized to find the dependencies automatically.
Introducing Autoware Build GUI: A User-Friendly Interface for Building Autoware Packages,D_kwDOAnasMc4AVhzV,2023-09-18T13:00:55Z,KhalilSelyan,2,Answered,DC_kwDOAnasMc4Aa4pK,liuXinGangChina,Great work!
Introducing Autoware Build GUI: A User-Friendly Interface for Building Autoware Packages,D_kwDOAnasMc4AVhzV,2023-09-18T13:00:55Z,KhalilSelyan,2,Answered,DC_kwDOAnasMc4Aa6_T,KhalilSelyan,"@xmfcx @mitsudome-r 
When using the package above for planning simulator as an example, I wrote a small python script to parse the json file that gets output and extract the packages from it, After i run a build command using those packages these packages came out as missing from the necessary things to run planning simulator. as they didn't show up in the json file but were still needed to launch planning simulator ( tried as well for logging simulator and it was the same result, these packages were missing )

![Missing_packages](https://github.com/autowarefoundation/autoware/assets/36904941/4b2331e1-38aa-43fc-865b-3305d77c08d8)

- the rviz plugins aren't necessary to actually launch but it does launch an rviz that is missing all the autoware plugins which i assume are also necessary for a normal use of autoware
- the other packages were required as the launch command would fail without them
"
Introducing Autoware Build GUI: A User-Friendly Interface for Building Autoware Packages,D_kwDOAnasMc4AVhzV,2023-09-18T13:00:55Z,KhalilSelyan,2,Answered,DC_kwDOAnasMc4Aa6Fu,zulfaqar-azmi-t4,"Thank you very much, the GUI is very useful in my opinion.
This is my suggestions for the improvement
1. Allow user to add build flag. For example, having a text box and user can add the related build flag.
2. Allow selection of build type, for example Release or Debug etc."
Introducing Autoware Build GUI: A User-Friendly Interface for Building Autoware Packages,D_kwDOAnasMc4AVhzV,2023-09-18T13:00:55Z,KhalilSelyan,2,Answered,DC_kwDOAnasMc4AbbIP,KhalilSelyan,"I've added these features in the latest update, you can let me know if you have any feedback towards this
https://github.com/leo-drive/autoware-build-gui/releases/tag/v1.0.1
"
Can the middleware configuration used by Autoware be adjusted?,D_kwDOAnasMc4AVii9,2023-09-19T09:45:31Z,hzkkk1997,0,Unanswered,,,
Localization & Mapping WG Meeting 13/09/2023,D_kwDOAnasMc4AVii-,2023-09-19T09:46:28Z,n-patiphon,0,Unanswered,,,
Software WG Meeting 2023/09/19,D_kwDOAnasMc4AVipc,2023-09-19T11:09:55Z,xmfcx,0,Unanswered,,,
Perception and Sensing WG Meeting 20/09/2023,D_kwDOAnasMc4AVjjF,2023-09-20T09:24:02Z,drwnz,0,Unanswered,,,
API WG Meeting (09/20/2023),D_kwDOAnasMc4AVjy0,2023-09-20T14:34:30Z,chishengshih,0,Unanswered,,,
Open ADKit Working Group Meeting September 21. 2023,D_kwDOAnasMc4AVkja,2023-09-21T10:05:51Z,HamburgDave,0,Unanswered,,,
Inquiry about time cost of simulation,D_kwDOAnasMc4AVlXk,2023-09-22T05:48:21Z,yuntianyi-chen,1,Answered,,,
Inquiry about time cost of simulation,D_kwDOAnasMc4AVlXk,2023-09-22T05:48:21Z,yuntianyi-chen,1,Answered,DC_kwDOAnasMc4AbAjj,maxime-clem,"With the simple planning simulator, you can add the launch argument `use_sim_time:=true` such that the `/clock` topic is used to control the time.
You can then use the [tier4_simulated_clock_rviz_plugin](https://github.com/autowarefoundation/autoware.universe/tree/main/common/tier4_simulated_clock_rviz_plugin) and change to the desired speed.
Be aware that higher speeds can cause issues with oscillating controls."
Inquiry about time cost of simulation,D_kwDOAnasMc4AVlXk,2023-09-22T05:48:21Z,yuntianyi-chen,1,Answered,DC_kwDOAnasMc4AbBfi,yuntianyi-chen,"Thanks a lot, Maxime! It's good to know that Autoware has taken this into account. When you refer to the ""simple planning simulator"", does this time-control feature only apply to it? Or can it also be used in more advanced simulation environments like the Rosbag replay simulation and Digital twin simulation?"
Inquiry about time cost of simulation,D_kwDOAnasMc4AVlXk,2023-09-22T05:48:21Z,yuntianyi-chen,1,Answered,DC_kwDOAnasMc4AbB_F,maxime-clem,"It can also be used with the rosbag replay simulation and you can use the [bag_time_manager_rviz_plugin](https://github.com/autowarefoundation/autoware.universe/tree/main/common/bag_time_manager_rviz_plugin) to help you control the replay speed of the bag.

With the digital twin simulation, the `/clock` topic is published by AWSIM and there is a slider to vary the speed between 0.0 and 1.0 times the real-time speed. It should also be possible to increase it beyond `1.0` but I never tried."
Inquiry about time cost of simulation,D_kwDOAnasMc4AVlXk,2023-09-22T05:48:21Z,yuntianyi-chen,1,Answered,DC_kwDOAnasMc4AbCUG,yuntianyi-chen,Thanks for clarifying this. It helps a lot!
A solution to filter obstacles on z axis for predicted objects,D_kwDOAnasMc4AVl0W,2023-09-22T15:31:29Z,beyzanurkaya,1,Answered,,,
A solution to filter obstacles on z axis for predicted objects,D_kwDOAnasMc4AVl0W,2023-09-22T15:31:29Z,beyzanurkaya,1,Answered,DC_kwDOAnasMc4AbCV8,badai-nguyen,"@beyzanurkaya I appreciate your initiation of this discussion and very comprehensive explanation.
Currently we're (TIER IV) also encountering a similar issue in some use-case tests.
This could be improved by [adding a cropbox filter before clustering](https://github.com/autowarefoundation/autoware.universe/pull/4999) to eliminate high pointclouds that may not hit the ego-vehicle.

The filter could be used by set [use_low_height_cropbox = true](https://github.com/autowarefoundation/autoware.universe/blob/fe19de9e13e01bd7400259a86cb40b3e45c9d2c0/launch/tier4_perception_launch/launch/perception.launch.xml#L61) and the maximum height [max_z could be set here](https://github.com/autowarefoundation/autoware_launch/blob/6e1174a405888b5242617aa02c6620fdf20b0dcd/autoware_launch/config/perception/object_recognition/detection/clustering/voxel_grid_based_euclidean_cluster.param.yaml#L16). Then unknown of tree as your figure will not be detected or unknown object's footprint will be shrinked and might not affect to ego planner. 
![image](https://github.com/autowarefoundation/autoware/assets/94814556/6446c735-29f3-4801-837c-80c571daaf8b)

This may be a temporary solution and we should explore more robust approaches. 
Personally, I am trying to filter pointcloud of tree, bushes.. using semantic information (from a kind of pointcloud segmentation or fusing image semantic segmentation with pointcloud) but it might take time and costly for data annotation.
It will be very helpful if any ideas you may have to address this issue effectively. 



"
A solution to filter obstacles on z axis for predicted objects,D_kwDOAnasMc4AVl0W,2023-09-22T15:31:29Z,beyzanurkaya,1,Answered,DC_kwDOAnasMc4AbFEo,beyzanurkaya,"@badai-nguyen Thank you for your reply. At the very beginning, I thought of using crop_box_filter to handle this issue but crop_box_polygon was generated on base_link so if the road has a slope, the target object can detected too late.

![crop_box_crash_case](https://github.com/autowarefoundation/autoware/assets/32412808/b3392c86-4b34-42b2-898b-be71f000e502)
"
autoware install issue,D_kwDOAnasMc4AVmCm,2023-09-22T21:36:44Z,ziri4k,1,Answered,,,
autoware install issue,D_kwDOAnasMc4AVmCm,2023-09-22T21:36:44Z,ziri4k,1,Answered,DC_kwDOAnasMc4AbCJz,maxime-clem,"Please post the full log, otherwise it is hard to understand the issue.

Usual build issues are caused by missing dependencies (can usually be fixed with `rosdep`), or conflicts with previous builds (can be fixed by removing the `build/` and `install/` folders from your workspace)."
How to deserialize map topic data from binary data to HADMapBin type using python,D_kwDOAnasMc4AVnsB,2023-09-25T02:40:17Z,lixianqiang,0,Unanswered,,,
Relate to Launch a Docker container.,D_kwDOAnasMc4AVn0Y,2023-09-25T07:15:59Z,WyjFrogi,0,Unanswered,,,
2023-09-25 ODD working group weekly meeting (159),D_kwDOAnasMc4AVn9P,2023-09-25T09:57:45Z,Igata-ctrl,0,Unanswered,,,
The timeline for the change from autoware_auto_msgs to autoware_msgs,D_kwDOAnasMc4AVomk,2023-09-26T02:49:44Z,yukkysaito,1,Answered,,,
The timeline for the change from autoware_auto_msgs to autoware_msgs,D_kwDOAnasMc4AVomk,2023-09-26T02:49:44Z,yukkysaito,1,Answered,DC_kwDOAnasMc4Abz_R,yukkysaito,@mitsudome-r  makes the request to a partner. 
The timeline for the change from autoware_auto_msgs to autoware_msgs,D_kwDOAnasMc4AVomk,2023-09-26T02:49:44Z,yukkysaito,1,Answered,DC_kwDOAnasMc4Ab5MA,mitsudome-r,"I have talked with AutoCore, and they said they can work on replacing autoware_auto_msgs with autoware_msgs."
Why Autoware.AI show activity only CPU0 not show another cores?,D_kwDOAnasMc4AVopY,2023-09-26T04:40:14Z,fiwz789,0,Unanswered,,,
Software WG Meeting 2023/09/26,D_kwDOAnasMc4AVord,2023-09-26T06:04:45Z,mitsudome-r,0,Unanswered,,,
2023-09-27 Simulation Working group Meeting,D_kwDOAnasMc4AVo5G,2023-09-26T10:30:22Z,WJaworskiRobotec,0,Unanswered,,,
Autoeare.Universe:Unable to initialize using Eagleye method,D_kwDOAnasMc4AVpI1,2023-09-26T12:33:20Z,yuanchao16,3,Answered,,,
Autoeare.Universe:Unable to initialize using Eagleye method,D_kwDOAnasMc4AVpI1,2023-09-26T12:33:20Z,yuanchao16,3,Answered,DC_kwDOAnasMc4AbKrB,maxime-clem,"Thank you for opening this discussion.

May I suggest also creating an issue on the `eagleye` repository ? https://github.com/MapIV/eagleye
I think this will increase the chance that some `eagleye` developers notice your issue.

Also, when sharing source code, I recommend using copy and paste (inside a code block using the delimiter ` ``` `) instead of screenshots."
Autoeare.Universe:Unable to initialize using Eagleye method,D_kwDOAnasMc4AVpI1,2023-09-26T12:33:20Z,yuanchao16,3,Answered,DC_kwDOAnasMc4AbWua,yuanchao16,Thank you for your suggestion！
Autoeare.Universe:Unable to initialize using Eagleye method,D_kwDOAnasMc4AVpI1,2023-09-26T12:33:20Z,yuanchao16,3,Answered,DC_kwDOAnasMc4AbMwK,rsasaki0109,"@yuanchao16 

To verify that Eagleye is running properly, it has two initialization phases: static initialization and dynamic initialization. I recommend checking the following topics:

- /eagleye/yaw_rate_offset_stop topic
When the enabled_status of this topic becomes true, the static initialization is complete, which involves a few seconds of stoppage, regardless of whether you are indoors or outdoors.
- /eagleye/heading_xx, /eagleye/enu_absolute_pos topics
Dynamic initialization requires straight-line driving in an environment with GNSS speed (it's okay if a curve is involved midway). I particularly check these two topics. When heading_xx's enabled_status becomes true, you can assume that the initialization is progressing without any issues. When the enabled_status of position becomes true, it indicates that all initialization processes are complete.



The following may be helpful.
https://autowarefoundation.github.io/autoware-documentation/main/how-to-guides/integrating-autoware/launch-autoware/localization-methods/eagleye-guide/
"
Autoeare.Universe:Unable to initialize using Eagleye method,D_kwDOAnasMc4AVpI1,2023-09-26T12:33:20Z,yuanchao16,3,Answered,DC_kwDOAnasMc4AbWwK,yuanchao16,"Thank you for your suggestion！
I saw in your previous response that it was possible to use dual antennas for static initialization.
https://github.com/orgs/autowarefoundation/discussions/3644
“If use_multi_antenna is set to true and gnss_compass_pose is entered into eagleye, the position posture is output without Dynamic Initialization.”
The GNSS I use can directly output the pose correctly. Do I still need to use gnss_compass_pose to output the /gnss_compass_pose (geometry_msgs/PoseStamped)  /gnss_compass_odom (nav_msgs/Odometry)  /illigal_gnss_compass_odom (nav_msgs/Odometry) /diagnostics ([diagnostic_msgs/DiagnosticArray) and /tf(from ""map"" to ""base_link"") ？
In addition, I have some questions about /main/mosaic/gga (nmea_msgs/Gpgga) and /sub/mosaic/gga (nmea_msgs/Gpgga) in gnss_compass_pose. When we use dual-antenna GNSS connected to RTK, only one pose will be output when the solution is fixed.  I don’t quite understand what /main/mosaic/gga and /sub/mosaic/gga refer to? The GNSS output we use will only output one GPGAA.
Looking forward to your reply, thank you very much！！！
"
Autoeare.Universe:Unable to initialize using Eagleye method,D_kwDOAnasMc4AVpI1,2023-09-26T12:33:20Z,yuanchao16,3,Answered,DC_kwDOAnasMc4Abf38,yuanchao16,"In my test today, I found that when  /eagleye/yaw_rate_offset_stop's enabled_status、 /eagleye/heading_1st's enabled_status  and /eagleye/enu_absolute_pos's enabled_status all become true, the display in RVIZ is still uninitialized.
![yaw](https://github.com/autowarefoundation/autoware/assets/111369120/6fce9053-e8e4-414e-b12f-eeabce55de86)

![image](https://github.com/autowarefoundation/autoware/assets/111369120/aa713a4c-bf8f-4ff8-a1b5-9477f625c896)
![image](https://github.com/autowarefoundation/autoware/assets/111369120/ac27d268-9605-437f-8fc7-bebde4816994)
![image](https://github.com/autowarefoundation/autoware/assets/111369120/3329b577-aaad-44f4-ac66-8bf7f950004e)
In addition, the fix2pose_node was not running. Therefore, even though the topic /eagleye/fix already exists, the topic /localization/pose_estimator/pose_with_covariance is not published.
![截图 2023-10-06 17-10-50](https://github.com/autowarefoundation/autoware/assets/111369120/f0de3bce-829b-4db8-8279-4d53922c7234)
Do you know what caused it?
"
No output at /pacmod/steering_cmd,D_kwDOAnasMc4AVp2q,2023-09-27T07:38:14Z,doyan00,2,Answered,,,
No output at /pacmod/steering_cmd,D_kwDOAnasMc4AVp2q,2023-09-27T07:38:14Z,doyan00,2,Answered,DC_kwDOAnasMc4AbMld,maxime-clem,"If I understand correctly, your vehicle accelerates but the steering wheel does not move.

I could not see any obvious issue from the log file you shared.
After some time it looks like the vehicle was no longer publishing some report topics and pacmod was disabled. Do you know about this issue ?
```
[system_error_monitor-29] [ERROR] [1695791571.015691797] [system.system_error_monitor]: vehicle_state_report msg is timeout...
[system_error_monitor-29] [ERROR] [1695791571.015751173] [system_error_monitor system_error_monitor/input_data_timeout]: [Single Point Fault]: 
[pacmod_interface-7] [WARN] [1695791571.062942147] [pacmod_interface]: Pacmod report is timed out, enable flag is back to false
```

Are you able to plot the steering command over time ? Does it change or is it fixed ? What if you manually turn the wheel, does the steering command changes ? Also, please make sure the steering value reported by pacmod is correct.
"
No output at /pacmod/steering_cmd,D_kwDOAnasMc4AVp2q,2023-09-27T07:38:14Z,doyan00,2,Answered,DC_kwDOAnasMc4AbMsK,doyan00,"Hi @maxime-clem ,thanks for reply

> If I understand correctly, your vehicle accelerates but the steering wheel does not move

Yes, correct. The steering wheel not move. We try straight line path, the vehicle accelerate and brake acordingly.but when try path with cornering,the steering does not move.

> pacmod was disabled

For this, we turn off the vehicle controller to check if any vehicle signal or report is missing or not. Then we turn on again. So we aware of this pacmod_interface warning.

> Are you able to plot the steering command over time ? Does it change or is it fixed ?

How to plot steering command?using plotjugger?

> What if you manually turn the wheel, does the steering command changes ? Also, please make sure the steering value reported by pacmod is correct.

Yes,we try manually turn left and right the steering, and steering_rpt report acordingly to the movement, and also the steering gui in the rviz also move.
We also check the /pacmod/steering_cmd when we manually turn the steering,it will folow the value, meaning, we get same value for /pacmod/steering_cmd and /pacmod/steering_rpt if turn manually, it is correct?
For the accel_cmd and brake_cmd, if we try press manually, the value wont change
"
No output at /pacmod/steering_cmd,D_kwDOAnasMc4AVp2q,2023-09-27T07:38:14Z,doyan00,2,Answered,DC_kwDOAnasMc4AbNee,maxime-clem,"Thank you for your reply.

> How to plot steering command?using plotjugger?

`plotjuggler` is quite good. You can also look into `rqt_graph` or `foxglove`.

>  We also check the /pacmod/steering_cmd when we manually turn the steering,it will folow the value, meaning, we get same value for /pacmod/steering_cmd and /pacmod/steering_rpt if turn manually, it is correct?

It sounds like the command is set to be equal to the reported value, which is not normal. Next I would like to make sure if this is the case only for the pacmod steering command, or if it is also the case for the control commands (`/control/command/control_cmd`, `/control/trajectory_follower/control_cmd`).
Please check these values (either with `ros2 topic echo` or by plotting them). If you can, a bag recording would also help in finding the issue."
No output at /pacmod/steering_cmd,D_kwDOAnasMc4AVp2q,2023-09-27T07:38:14Z,doyan00,2,Answered,DC_kwDOAnasMc4AbU7i,doyan00,"@maxime-clem , thanks for your respond

I try to use rqt_graph, but nothing show.
But when echoing both topic, there is value.
![Screenshot from 2023-10-02 18-36-14](https://github.com/autowarefoundation/autoware/assets/146168563/b1ff7099-f612-4398-9ec2-bacbb6830474)


Here the bag file for both topic, include also log file when run the autoware
[log_control.zip](https://github.com/autowarefoundation/autoware/files/12781884/log_control.zip)

"
No output at /pacmod/steering_cmd,D_kwDOAnasMc4AVp2q,2023-09-27T07:38:14Z,doyan00,2,Answered,DC_kwDOAnasMc4Aback,maxime-clem,"Thank you for providing a bag. Unfortunately the information is not enough to find the issue.
If possible, please record another bag with the `/planning/scenario_planning/trajectory` topic and with all control, localization, vehicle and pacmod topics. It would also be best if the steering report changes at some point during the recording, for example by manually turning the steering wheel. ~10 seconds should be enough to better understand the issue."
No output at /pacmod/steering_cmd,D_kwDOAnasMc4AVp2q,2023-09-27T07:38:14Z,doyan00,2,Answered,DC_kwDOAnasMc4Abaim,doyan00,"Thanks @maxime-clem for the reply,
Will post the request bag tomorow ya
Thanks alot"
No output at /pacmod/steering_cmd,D_kwDOAnasMc4AVp2q,2023-09-27T07:38:14Z,doyan00,2,Answered,DC_kwDOAnasMc4AbcqO,doyan00,"Hi @maxime-clem, here is the full ros bag. Thanks alot!
https://drive.google.com/drive/folders/1JsCRIyOwZ3tN7tLV6Tuxk-voiGrC8ZP4?usp=sharing "
Reference Design WG Meeting (09/27/2023),D_kwDOAnasMc4AVqCk,2023-09-27T11:53:08Z,chishengshih,0,Unanswered,,,
Possible bug in the cost matrices of MPC,D_kwDOAnasMc4AVqLM,2023-09-27T14:40:02Z,aez99,0,Unanswered,,,
Planning&Control WG Meeting 2023/09/28,D_kwDOAnasMc4AVqoY,2023-09-28T03:29:53Z,maxime-clem,1,Answered,,,
Planning&Control WG Meeting 2023/09/28,D_kwDOAnasMc4AVqoY,2023-09-28T03:29:53Z,maxime-clem,1,Answered,DC_kwDOAnasMc4AbNFE,brkay54,"@maxime-clem Sorry for that, I couldn't prepare any document yet about `current control problems` yet."
[Request for Feedback] Planning with large vehicles: `out_of_lane` and dynamic drivable area expansion,D_kwDOAnasMc4AVqpY,2023-09-28T04:03:28Z,maxime-clem,0,Unanswered,,,
2023-09-28 Racing Working Group Meeting,D_kwDOAnasMc4AVqqO,2023-09-28T04:58:31Z,pojenwang,0,Unanswered,,,
Has this project stopped developing and maintaining?,D_kwDOAnasMc4AVqzT,2023-09-28T08:56:58Z,L-Net-1992,1,Answered,,,
Has this project stopped developing and maintaining?,D_kwDOAnasMc4AVqzT,2023-09-28T08:56:58Z,L-Net-1992,1,Answered,DC_kwDOAnasMc4Abdfh,idorobotics,Which repository are you referring to? Can you provide a link?
Has this project stopped developing and maintaining?,D_kwDOAnasMc4AVqzT,2023-09-28T08:56:58Z,L-Net-1992,1,Answered,DC_kwDOAnasMc4AbkNh,L-Net-1992,[https://github.com/autowarefoundation/open-ad-kit-docs](url)
Has this project stopped developing and maintaining?,D_kwDOAnasMc4AVqzT,2023-09-28T08:56:58Z,L-Net-1992,1,Answered,DC_kwDOAnasMc4Abl3A,idorobotics,The Open AD Kit project is ongoing. You can join the [weekly WG calls](https://autoware.org/join-a-work-group/) and check the [task list](https://github.com/orgs/autowarefoundation/projects/6) and [wiki](https://github.com/autowarefoundation/autoware-projects/wiki/Open-AD-Kit-working-group) for more information. 
Has this project stopped developing and maintaining?,D_kwDOAnasMc4AVqzT,2023-09-28T08:56:58Z,L-Net-1992,1,Answered,DC_kwDOAnasMc4Abm4U,L-Net-1992,Thanks
Open ADKit Working Group Meeting September 28.2023,D_kwDOAnasMc4AVq6u,2023-09-28T11:08:52Z,oguzkaganozt,0,Unanswered,,,
Visualization problem of /clusters and /shape_estimated_objects,D_kwDOAnasMc4AVrFs,2023-09-28T14:22:03Z,muratgozum45,1,Answered,,,
Visualization problem of /clusters and /shape_estimated_objects,D_kwDOAnasMc4AVrFs,2023-09-28T14:22:03Z,muratgozum45,1,Answered,DC_kwDOAnasMc4AbmX9,badai-nguyen,"@muratgozum45 Hi, thank you for your interesting in autoware. 
Since output of `shape_estimation` type is `tier4_perception_msgs::msg::DetectedObjectWithFeatureArray`, it cannot visualize by defaut rviz. 
If you want to visualize your result, you can add `detected_object_feature_remover` after `shape_estimation` to convert to 'DetectedObjects` which can visualize by rviz."
Visualization problem of /clusters and /shape_estimated_objects,D_kwDOAnasMc4AVrFs,2023-09-28T14:22:03Z,muratgozum45,1,Answered,DC_kwDOAnasMc4Ab0JO,muratgozum45,"Hi @badai-nguyen,
Thanks a lot for your helpful message. After your command, my problem is solved. Here is attached the detected_objects after using detected_object_feature_remover:
<img width=""960"" alt=""image"" src=""https://github.com/autowarefoundation/autoware/assets/142971273/133c7aad-e465-44f4-9de2-77221c3ef335"">
"
colcon build autoware_auto_tf2 failed,D_kwDOAnasMc4AVrTp,2023-09-28T19:25:30Z,Hensbag,1,Answered,,,
colcon build autoware_auto_tf2 failed,D_kwDOAnasMc4AVrTp,2023-09-28T19:25:30Z,Hensbag,1,Answered,DC_kwDOAnasMc4AbPBK,SakodaShintaro,"Thanks for the report.

This may be related to the following issues.
https://github.com/autowarefoundation/autoware.universe/issues/5128

In the latest ros, `doTransform` newly supports Polygon and Point, so we have removed those that were implemented in autoware.

Please check the version of ros you are using.

I think

OK
```
$ dpkg -l | grep ros-${ROS_DISTRO}-tf2-geo
ii  ros-humble-tf2-geometry-msgs                      0.25.4-1jammy.20230919.225206           amd64        tf2_geometry_msgs
```

NG
```
$ dpkg -l | grep ros-${ROS_DISTRO}-tf2-geo
ii  ros-humble-tf2-geometry-msgs                      0.25.3-1jammy.20230822.190242           amd64        tf2_geometry_msgs
```

`apt update` and `apt upgrade` may fix it."
[Proposal] Runtime Localization Module Switching for Multi-Pose Estimators,D_kwDOAnasMc4AVre_,2023-09-29T01:52:13Z,KYabuuchi,0,Unanswered,,,
2023-10-02 ODD working group weekly meeting (160),D_kwDOAnasMc4AVt2W,2023-10-02T09:10:46Z,Igata-ctrl,0,Unanswered,,,
Autoware installation autoware_tf2 error,D_kwDOAnasMc4AVt_z,2023-10-02T12:49:58Z,muratgozum45,1,Answered,,,
Autoware installation autoware_tf2 error,D_kwDOAnasMc4AVt_z,2023-10-02T12:49:58Z,muratgozum45,1,Answered,DC_kwDOAnasMc4AbWe_,isamu-takagi,"Try `apt update` and `apt upgrade`.
It's probably the same as https://github.com/orgs/autowarefoundation/discussions/3877."
Software WG Meeting 2023/10/03,D_kwDOAnasMc4AVu5A,2023-10-03T12:40:15Z,xmfcx,1,Answered,,,
Software WG Meeting 2023/10/03,D_kwDOAnasMc4AVu5A,2023-10-03T12:40:15Z,xmfcx,1,Answered,DC_kwDOAnasMc4Abdc_,idorobotics,@kaspermeck-arm please take a look at the launch unifier that @xmfcx is working on. It is tangentially related to the node configuration optimisation work from the Open AD Kit WG. 
Software WG Meeting 2023/10/03,D_kwDOAnasMc4AVu5A,2023-10-03T12:40:15Z,xmfcx,1,Answered,DC_kwDOAnasMc4Abddv,xmfcx,Right now it is in a messy state but I will release it soon. I can answer if you have any questions.
Software WG Meeting 2023/10/03,D_kwDOAnasMc4AVu5A,2023-10-03T12:40:15Z,xmfcx,1,Answered,DC_kwDOAnasMc4AbtRF,kaspermeck-arm,"Thanks, I'll take a look!"
AWF document which describes the importance of ODD based development,D_kwDOAnasMc4AVvZM,2023-10-04T03:29:33Z,IDS-zhangxr,2,Answered,,,
AWF document which describes the importance of ODD based development,D_kwDOAnasMc4AVvZM,2023-10-04T03:29:33Z,IDS-zhangxr,2,Answered,DC_kwDOAnasMc4Abdb3,idorobotics,@Igata-ctrl could you please assist with the requested document? The link on the wiki has expired. 
AWF document which describes the importance of ODD based development,D_kwDOAnasMc4AVvZM,2023-10-04T03:29:33Z,IDS-zhangxr,2,Answered,DC_kwDOAnasMc4Ab4jD,idorobotics,@IDS-zhangxr please check the Wiki for the updated links.
AWF document which describes the importance of ODD based development,D_kwDOAnasMc4AVvZM,2023-10-04T03:29:33Z,IDS-zhangxr,2,Answered,DC_kwDOAnasMc4AcCNQ,IDS-zhangxr,"The [new link](https://drive.google.com/drive/folders/18n6Pcu6KG8ifLQbg1jCbL3NnPNWvO0DV) is available, thank you for your support."
Perception and Sensing WG Meeting 04/10/2023,D_kwDOAnasMc4AVvl9,2023-10-04T09:39:15Z,drwnz,0,Unanswered,,,
Open ADKit Working Group Meeting - 05/10/2023,D_kwDOAnasMc4AVvp2,2023-10-04T10:53:24Z,oguzkaganozt,0,Unanswered,,,
API WG Meeting (10/04/2023),D_kwDOAnasMc4AVvxq,2023-10-04T13:04:23Z,yuasabe,0,Unanswered,,,
sample map file (sample-map-planning.zip) needs to be updated,D_kwDOAnasMc4AVyCG,2023-10-07T03:52:18Z,felixf4xu,2,Answered,,,
sample map file (sample-map-planning.zip) needs to be updated,D_kwDOAnasMc4AVyCG,2023-10-07T03:52:18Z,felixf4xu,2,Answered,DC_kwDOAnasMc4Abh1u,whbcumtb,"you specified the map path by the parameter 'map_path' when you run the command:
ros2 launch autoware_launch planning_simulator.launch.xml map_path:=$HOME/autoware_map/sample-map-planning vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit.
The pointcloud_map_metadata.yaml file is not required."
sample map file (sample-map-planning.zip) needs to be updated,D_kwDOAnasMc4AVyCG,2023-10-07T03:52:18Z,felixf4xu,2,Answered,DC_kwDOAnasMc4Abh_Q,felixf4xu,thanks
Introducing Autoware Launch GUI: A Comprehensive Interface for Launching Autoware,D_kwDOAnasMc4AV0Ci,2023-10-09T15:21:07Z,KhalilSelyan,2,Answered,,,
Introducing Autoware Launch GUI: A Comprehensive Interface for Launching Autoware,D_kwDOAnasMc4AV0Ci,2023-10-09T15:21:07Z,KhalilSelyan,2,Answered,DC_kwDOAnasMc4AbsxS,zulfaqar-azmi-t4,"Thank you soo much for the tool. This will be very much helpful for a lot of people!

This is my initial comments.
As we are working with multiple autoware version (i.e.: different map_path, vehicle model, sensor model), it would be nice if I can save a few different configurations and and have a few ""quick load"" button that allows us to quickly load whichever configuration that we wants.

Secondly
[Screencast from 2023年10月12日 18時03分11秒.webm](https://github.com/autowarefoundation/autoware/assets/93502286/1322316c-2a88-4cba-8dc7-ca99515d5679)
My log doesn't seem to be printing. Is there anything I should do?"
Introducing Autoware Launch GUI: A Comprehensive Interface for Launching Autoware,D_kwDOAnasMc4AV0Ci,2023-10-09T15:21:07Z,KhalilSelyan,2,Answered,DC_kwDOAnasMc4Abs1y,KhalilSelyan,"![image](https://github.com/autowarefoundation/autoware/assets/36904941/c4ad02a3-6f83-4173-9679-ae15817b2239)

I am currently working on exactly that feature.

and for the logs, I'm not really sure why it wouldn't be logging things out, but try opening the app from the terminal `autoware-launch-gui` and if it logs things on there then it should be logging in the app as well, and if it isn't let me know i'll be looking into this more later

@zulfaqar-azmi-t4 "
Introducing Autoware Launch GUI: A Comprehensive Interface for Launching Autoware,D_kwDOAnasMc4AV0Ci,2023-10-09T15:21:07Z,KhalilSelyan,2,Answered,DC_kwDOAnasMc4Ab58u,buraakozcan,"Hi, I started installation as stated in the guide. After installing pnpm without any errors with the 'npm install -g pnpm' command, I get the 'pnpm command not found' error when I run the 'pnpm i' command."
Introducing Autoware Launch GUI: A Comprehensive Interface for Launching Autoware,D_kwDOAnasMc4AV0Ci,2023-10-09T15:21:07Z,KhalilSelyan,2,Answered,DC_kwDOAnasMc4Ab6Az,KhalilSelyan,"Try to use `npm install` directly instead that should work, just a bit slower to get all dependencies installed compared to pnpm.
Also you may want to look at this it could fix your issue: https://stackoverflow.com/questions/15054388/global-node-modules-not-installing-correctly-command-not-found.

If you're only planning to use the app and not develop extra features on it, you can just download the release `.deb` file from here as well https://github.com/leo-drive/autoware-launch-gui/releases/tag/v1.0.1"
Introducing Autoware Launch GUI: A Comprehensive Interface for Launching Autoware,D_kwDOAnasMc4AV0Ci,2023-10-09T15:21:07Z,KhalilSelyan,2,Answered,DC_kwDOAnasMc4Ab_tv,buraakozcan,"Thank you for your support. I fixed this problem but now, nothing happens when I click 'Launch Autoware' after I selected required parameters. https://hizliresim.com/cirbg46"
Reference Design WG Meeting (10/11/2023),D_kwDOAnasMc4AV0Ha,2023-10-09T17:14:28Z,chishengshih,0,Unanswered,,,
Software WG Meeting 2023/10/10,D_kwDOAnasMc4AV0cZ,2023-10-10T04:47:41Z,mitsudome-r,0,Unanswered,,,
Map loader error with Lanelet_2,D_kwDOAnasMc4AV04f,2023-10-10T14:46:25Z,danicannt,1,Answered,,,
Map loader error with Lanelet_2,D_kwDOAnasMc4AV04f,2023-10-10T14:46:25Z,danicannt,1,Answered,DC_kwDOAnasMc4AbpXE,KYabuuchi,"In the latest version of Autoware, if you provide Lanelet2 map crossing over multiple MGRS grids, they might not be loaded correctly by default. 
To handle this situation, you can create a `map_projector_info.yaml` file following the guidance at [map_projection_loader](https://github.com/autowarefoundation/autoware.universe/tree/main/map/map_projection_loader#map_projection_loader).

For example, by making `map_projector_info.yaml` as below, I was able to load your Lanelet2 map correctly in my environment with latest autoware.

```bash
$ ls -l
Town01.osm
lanelet2_map.osm -> Town01.osm
map_projector_info.yaml
pointcloud_map.pcd*

$ cat map_projector_info.yaml 
projector_type: local
```

![Screenshot from 2023-10-11 09-49-31](https://github.com/autowarefoundation/autoware/assets/24854875/044583a7-f2c5-48aa-8690-2e480c8cb355)

"
Map loader error with Lanelet_2,D_kwDOAnasMc4AV04f,2023-10-10T14:46:25Z,danicannt,1,Answered,DC_kwDOAnasMc4AbpzZ,danicannt,"I will try and I will let you know as soon as possible.

Thanks for your reply!"
Paper of Autoware Universe,D_kwDOAnasMc4AV095,2023-10-10T16:26:00Z,zillur-av,2,Answered,,,
Paper of Autoware Universe,D_kwDOAnasMc4AV095,2023-10-10T16:26:00Z,zillur-av,2,Answered,DC_kwDOAnasMc4Ab2B1,yukkysaito,"
Here is the paper when Autoware was released, although it is not the most recent.
https://ieeexplore.ieee.org/document/7368032
However, the architecture, etc. has changed significantly since then."
Paper of Autoware Universe,D_kwDOAnasMc4AV095,2023-10-10T16:26:00Z,zillur-av,2,Answered,DC_kwDOAnasMc4Ab4so,yukkysaito,">Thanks. Why there is no updated version of it for Universe/Core? You are not thinking of publishing one?

In my opinion, I don't know if it will be published as a paper or not since it is more of an implementation than a research.
If you want to cite it, I think it would be better if you use this link.
https://autoware.org/"
Paper of Autoware Universe,D_kwDOAnasMc4AV095,2023-10-10T16:26:00Z,zillur-av,2,Answered,DC_kwDOAnasMc4Ab3QS,zillur-av,Thanks. Why there is no updated version of it for Universe/Core? You are not thinking of publishing one?
2023-10-11 Simulation Working group Meeting,D_kwDOAnasMc4AV1VG,2023-10-11T02:18:16Z,Hyeongseok-Jeon,0,Unanswered,,,
Localization & Mapping WG Meeting 27/09/2023,D_kwDOAnasMc4AV1hd,2023-10-11T08:15:40Z,armaganarsln,0,Unanswered,,,
2023-10-12 Racing Working Group Meeting,D_kwDOAnasMc4AV2Vp,2023-10-12T05:05:01Z,pojenwang,0,Unanswered,,,
Introducing Scenario Simulator Failure Analysis,D_kwDOAnasMc4AV2Vw,2023-10-12T05:12:50Z,ahmeddesokyebrahim,0,Unanswered,,,
Planning&Control WG Meeting 2023/10/12,D_kwDOAnasMc4AV2YP,2023-10-12T06:33:59Z,mehmetdogru,2,Answered,,,
Planning&Control WG Meeting 2023/10/12,D_kwDOAnasMc4AV2YP,2023-10-12T06:33:59Z,mehmetdogru,2,Answered,DC_kwDOAnasMc4AbspI,maxime-clem,"- [ ] @maxime-clem ~to prepare a presentation of the recent improvements to the dynamic drivable area and the out_of_lane module~.
  - Not yet finalized. I should be able to present an update at the next weekend.


[Discord question](https://discord.com/channels/953808765935816715/953901253023379486/1159351250408710234): 
> Is there currently any alternative to the accel/brake map based actuation?
"
Planning&Control WG Meeting 2023/10/12,D_kwDOAnasMc4AV2YP,2023-10-12T06:33:59Z,mehmetdogru,2,Answered,DC_kwDOAnasMc4Abssl,mehmetdogru,@maxime-clem : There was a discord msg that proposes neural network to decide the pedal position. @maxime-clem can you share the msg?
Planning&Control WG Meeting 2023/10/12,D_kwDOAnasMc4AV2YP,2023-10-12T06:33:59Z,mehmetdogru,2,Answered,DC_kwDOAnasMc4Abssx,maxime-clem,"Discord thread ""lateral e2e neural network controller"" : https://discord.com/channels/953808765935816715/1100955968243781643/1135244162720092322"
Planning&Control WG Meeting 2023/10/12,D_kwDOAnasMc4AV2YP,2023-10-12T06:33:59Z,mehmetdogru,2,Answered,DC_kwDOAnasMc4Absqi,kyoichi-sugahara,"@ahmeddesokyebrahim 
https://github.com/tier4/scenario_simulator_v2/pull/1033
this is PR which visualize the current conditions status with rviz plugins"
Open ADKit Working Group Meeting - 12/10/2023,D_kwDOAnasMc4AV2de,2023-10-12T08:33:40Z,oguzkaganozt,0,Unanswered,,,
Obstacle Detection and Avoidance happening even with obstacle(trees) not in the path or drivable area.,D_kwDOAnasMc4AV2xD,2023-10-12T14:13:45Z,YashuMessi18,2,Answered,,,
Obstacle Detection and Avoidance happening even with obstacle(trees) not in the path or drivable area.,D_kwDOAnasMc4AV2xD,2023-10-12T14:13:45Z,YashuMessi18,2,Answered,DC_kwDOAnasMc4Ab2kI,mitsudome-r,"Just to confirm, you would still like to stop if other obstacle (e.g., pedestrains or other vehicles) exists on the path correct? 

If that's the case, ideally we should to classify the objects to distinguish if they are obstacle that we should avoid or if they are obstacles we can ignore. However, I don't think we have a classifier that detects ""plants"" at the moment so I don't think we can take that approach in an easy way.

Instead, there are two possible workarounds that I can think of:
- Filter out the pointclouds high above the ground before or after ray_ground_filter node so that leaves won't be detected in the planning stack. However, in this method, the vehicle won't be able to ignore the plants that are lower than the threshold.
- Use [vector_map_inside_area_filter](https://github.com/autowarefoundation/autoware.universe/blob/main/sensing/pointcloud_preprocessor/docs/vector-map-inside-area-filter.md#vector_map_inside_area_filter). This would remove the pointcloud within a specified area in the given vector map (i.e., lanelet2 map). However, you have to draw the area one by one in this approach. Also, any objects that exists within the area are also ignored as well so there could be a risk of hitting such obstacles."
Obstacle Detection and Avoidance happening even with obstacle(trees) not in the path or drivable area.,D_kwDOAnasMc4AV2xD,2023-10-12T14:13:45Z,YashuMessi18,2,Answered,DC_kwDOAnasMc4Ab7i6,wbq0206,"The best way is to solve it from the perspective of ground point cloud or point cloud processing. If you do not have the conditions, you can refer to the planning module for the problem of horizontal obstacle filtering. Relevant information:https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/docs/behavior_path_planner_avoidance_design/"
Map can't be loaded,D_kwDOAnasMc4AV3Ut,2023-10-13T07:04:20Z,KASUYASU,5,Answered,,,
Map can't be loaded,D_kwDOAnasMc4AV3Ut,2023-10-13T07:04:20Z,KASUYASU,5,Answered,DC_kwDOAnasMc4AbvGZ,maxime-clem,"This issue is usually caused by a mistake in the `map_path`. Can you confirm it is correct ? Can you also try using the absolute path `/home/USER/autoware_map` instead of `$HOME/autoware_map` ?

If this does not solve the issue, please share the full launch log (usually found in `$HOME/.ros/log/`)."
Map can't be loaded,D_kwDOAnasMc4AV3Ut,2023-10-13T07:04:20Z,KASUYASU,5,Answered,DC_kwDOAnasMc4AbvIx,KASUYASU,"Hi,

>Can you also try using the absolute path /home/USER/autoware_map instead of $HOME/autoware_map ?

 Yes, of course!

 It seems that 'map.pointcloud_map_loader' is not called.
[log.zip](https://github.com/autowarefoundation/autoware/files/12890673/log.zip)

Kaz
"
Map can't be loaded,D_kwDOAnasMc4AV3Ut,2023-10-13T07:04:20Z,KASUYASU,5,Answered,DC_kwDOAnasMc4Ab0KW,KASUYASU,"Hi, Mr.Maxime CLEMENT

The log file says that
 
 Waiting for pcd loader service. Check if the enable_differential_load in pointcloud_map_loader is set `true`. (MapUpdateModule() at /home/hamada-ken/autoware/src/universe/autoware.universe/localization/ndt_scan_matcher/src/map_update_module.cpp:59)
 
 , so the code is 
 
  pcd_loader_client_ =
    node->create_client<autoware_map_msgs::srv::GetDifferentialPointCloudMap>(""pcd_loader_service"");
  while (!pcd_loader_client_->wait_for_service(std::chrono::seconds(1)) && rclcpp::ok()) {
    RCLCPP_INFO(
      logger_,
      ""Waiting for pcd loader service. Check if the enable_differential_load in ""
      ""pointcloud_map_loader is set `true`."");
  }
  
 , and the execution is looping inside the while loop.
 
The function 'create_client' is maybe one of the 'rclcpp' libraries.
 
/// Create a service client with a given type.
/// \internal
template<typename ServiceT>
typename rclcpp::Client<ServiceT>::SharedPtr
create_client(
  std::shared_ptr<node_interfaces::NodeBaseInterface> node_base,
  std::shared_ptr<node_interfaces::NodeGraphInterface> node_graph,
  std::shared_ptr<node_interfaces::NodeServicesInterface> node_services,
  const std::string & service_name,
  const rmw_qos_profile_t & qos_profile,
  rclcpp::CallbackGroup::SharedPtr group)
{
  rcl_client_options_t options = rcl_client_get_default_options();
  options.qos = qos_profile;

  auto cli = rclcpp::Client<ServiceT>::make_shared(
    node_base.get(),
    node_graph,
    service_name,
    options);

  auto cli_base_ptr = std::dynamic_pointer_cast<rclcpp::ClientBase>(cli);
  node_services->add_client(cli_base_ptr, group);
  return cli;
}

The 'make_shared' will create a node on ROS2, but I think that the ready signal will not return(?).

I'm a complete newcomer to ROS2 and Autoware, so would you please teach me the methods to debug these things, for example, how to debug the creation process of nodes?

Kaz  "
Map can't be loaded,D_kwDOAnasMc4AV3Ut,2023-10-13T07:04:20Z,KASUYASU,5,Answered,DC_kwDOAnasMc4Ab8ia,KASUYASU,"Hi,

 I've debugged why the while sentence
 
while (!pcd_loader_client_->wait_for_service(std::chrono::seconds(1)) && rclcpp::ok()) {
 
loops forever, and found the reasen.
 
  ...... Firewall.
  
When I turn off my firewall, then everything goes fine.
So, would you please write an explanation like

Don't be afraid of hackings, and turn off your firewall.
Because you have the bravability to ride on the car which
is controlled by 'Autoware'!
 
But I strongly recommend that you may set appropriate rules
for your firewall that allows your Autoware communication.

Kaz"
Map can't be loaded,D_kwDOAnasMc4AV3Ut,2023-10-13T07:04:20Z,KASUYASU,5,Answered,DC_kwDOAnasMc4Ab8ne,maxime-clem,"Sorry for not replying to your previous messages. I did not have time to look deeply into your issue.
I am glad to read that you have found the solution on your own. I have no deep knowledge of the network side of ROS2, but I can see how a firewall could bother the execution of Autoware.
As you suggest, the best we can do on the Autoware side is probably to add some information in the [*Troubleshooting* section of the documentation](https://autowarefoundation.github.io/autoware-documentation/main/support/troubleshooting/performance-troubleshooting/)."
Map can't be loaded,D_kwDOAnasMc4AV3Ut,2023-10-13T07:04:20Z,KASUYASU,5,Answered,DC_kwDOAnasMc4Ab8pX,KASUYASU,"Hey,

Isn't it strange to mark a question as answered without permission?
In fact, I'm pissed off at this somewhat sloppy software. If you turn off the firewall, 
this software will scatter strange packets throughout the network. 
Thanks to that, I got banned by the system administrator.

Kaz"
Map can't be loaded,D_kwDOAnasMc4AV3Ut,2023-10-13T07:04:20Z,KASUYASU,5,Answered,DC_kwDOAnasMc4Ab8rT,maxime-clem,"Sorry if I misunderstood your previous post. 

> When I turn off my firewall, then everything goes fine.

From this I assumed the original issue was resolved.

> If you turn off the firewall,
this software will scatter strange packets throughout the network.

There is an option to restrict the network to the localhost (https://autowarefoundation.github.io/autoware-documentation/main/installation/additional-settings-for-developers/#network-settings-for-ros-2). If you are not happy with the way ROS2 uses the network I suggest posting on their discourse site or on https://robotics.stackexchange.com/questions/tagged/ros2"
Map can't be loaded,D_kwDOAnasMc4AV3Ut,2023-10-13T07:04:20Z,KASUYASU,5,Answered,DC_kwDOAnasMc4Ab_Ag,KASUYASU,"Hi, Mr.Maxime CLEMENT

I think the biggest problem is that the Autoware development team 
is creating software without a deep understanding of what kind of 
packets ROS2 sends within the network.

>There is an option to restrict the network to the localhost 

Could you please explain how docker daemon works in that case? 
Anyway, I couldn't read the map without sending out a strange multicast.

>If you are not happy with the way ROS2 uses the network I suggest 
>posting on their discourse site or on 

In Japan, this way of solving problems is called irresponsible throwing 
to others.

If I turn off the firewall, everything seems to work fine except for
getting scolded by the system administrator, but there are still many 
problems with the network that we haven't discovered yet.

Kaz"
Map can't be loaded,D_kwDOAnasMc4AV3Ut,2023-10-13T07:04:20Z,KASUYASU,5,Answered,DC_kwDOAnasMc4Ab_OZ,VRichardJP,"Just a kind reminder that replying to someone who's trying to help you in a contemptuous tone is not the best way to have one's problem solved. Both inside and outside Japan.

As @maxime-clem pointed out, ROS2 default behavior is to ""scatter"" packets over the network. The documentation he linked explains how to restrict ROS2 communication to localhost only, and also other important network configuration (again, a ROS2 thing). When configured properly, ROS2 applications such as Autoware have no problem running within docker containers."
Map can't be loaded,D_kwDOAnasMc4AV3Ut,2023-10-13T07:04:20Z,KASUYASU,5,Answered,DC_kwDOAnasMc4Ab_bZ,KASUYASU,"Hi, Mr.VRichardJP

It's not my intention to disrespect anyone. However, unless you evaluate the abilities of the people involved in the project to some extent, it is difficult to judge whether someone else can solve the problem that or whether you should solve it on your own. To judge that, you have to ask some questions that may be a little bit rude.

>ROS2 applications such as Autoware have no problem running within docker containers.

Yes, it will work fine in a container. But I can't let it out.

Kaz"
2023-10-16 ODD working group weekly meeting (161),D_kwDOAnasMc4AV5t2,2023-10-16T08:39:46Z,Igata-ctrl,0,Unanswered,,,
Localization not working,D_kwDOAnasMc4AV51i,2023-10-16T11:26:33Z,danicannt,2,Answered,,,
Localization not working,D_kwDOAnasMc4AV51i,2023-10-16T11:26:33Z,danicannt,2,Answered,DC_kwDOAnasMc4Ab2BX,yukkysaito,"@danicannt Is it tutorial?
Can you tell me your environment?


The error is that map matching fails because the initial position is specified where the point cloud map does not exist."
Localization not working,D_kwDOAnasMc4AV51i,2023-10-16T11:26:33Z,danicannt,2,Answered,DC_kwDOAnasMc4Ab2sO,danicannt,"I am using two computers for this,

In one of them I am running CARLA with the CARLA Ros Bridge and that is working properly, 

Then in another computer connected locally through a switch to the other computer I am launching autoware and loading one of the maps of the simulation. I don't have troubles loading the map and the vector map as I can see both of them, the problem is when I try to initialize the location with the rviz initial position tool on the computer that it is launching Autoware. 

"
Localization not working,D_kwDOAnasMc4AV51i,2023-10-16T11:26:33Z,danicannt,2,Answered,DC_kwDOAnasMc4Ab3Hj,danicannt,"I've been doing some research and I think that the problem comes from the network configuration between the two computers:

When I try to read the hz from one of the topics on the computer that is using Carla, in the camera topic for example I get 24 Hz and trying to read that topic on the other computer where I am launching Autoware I get 17 Hz,
The computer with Autoware has Ubuntu 22 and the cyclon configuration file that I am using is the following:


```
<?xml version=""1.0"" encoding=""UTF-8"" ?> 
<CycloneDDS xmlns=""https://cdds.io/config"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xsi:schemaLocation=""https://cdds.io/config https://raw.githubusercontent.com/eclipse-cyclonedds/cyclonedds/master/etc/cyclonedds.xsd""> 
    <Domain Id=""5""> 
        <General> 
        <Interfaces> 
                <NetworkInterface
                    address=""my_address_1"" 
                    autodetermine=""false""
                    multicast=""true""
                    prefer_multicast=""true""
                    priority=""default""
                /> 
            </Interfaces> 
            <AllowMulticast>true</AllowMulticast>
            <MaxMessageSize>65500B</MaxMessageSize>
            <!--  -->
            <!-- AllowMulticast>false</AllowMulticast --> 
            <DontRoute>false</DontRoute> 
            <EnableMulticastLoopback>true</EnableMulticastLoopback> 
            <ExternalNetworkAddress>auto</ExternalNetworkAddress> 
            <ExternalNetworkMask>0.0.0.0</ExternalNetworkMask> 
            <FragmentSize>1344 B</FragmentSize> 
                        
            <!--  -->
            <!-- MaxMessageSize>65500 B</MaxMessageSize --> 
            <MaxRexmitMessageSize>1456 B</MaxRexmitMessageSize> 
            <MulticastRecvNetworkInterfaceAddresses>preferred</MulticastRecvNetworkInterfaceAddresses> <!-- all, any, preferred, none -->
            <MulticastTimeToLive>32</MulticastTimeToLive> 
            <!-- RedundantNetworking>false</RedundantNetworking --> 
            <Transport>default</Transport> <!-- default, udp, udp6, tcp, tcp6, raweth -->
        </General> 
        <Internal>
            <SocketReceiveBufferSize min=""10MB""/> 
            <Watermarks> 
                <WhcHigh>500kB</WhcHigh> 
            </Watermarks> 
        </Internal> 
        <Discovery> 
            <ParticipantIndex>auto</ParticipantIndex> 
            <MaxAutoParticipantIndex>1000</MaxAutoParticipantIndex>
            <Peers>
                <Peer address=""my_address_1"" /> 
                <Peer address=""my_address_2"" /> 
            </Peers>
        </Discovery> 
    </Domain> 
</CycloneDDS>
```

On the other computer that is launching Carla it has Ubuntu 20 and the CycloneDDS config file that we are using is the following:


`````
<?xml` version=""1.0"" encoding=""UTF-8"" ?> 
<CycloneDDS xmlns=""https://cdds.io/config"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xsi:schemaLocation=""https://cdds.io/config https://raw.githubusercontent.com/eclipse-cyclonedds/cyclonedds/master/etc/cyclonedds.xsd""> 
    <Domain Id=""5""> 
        <General> 
        <Interfaces> 
                <NetworkInterface
                    address=""my_address_2"" 
                    autodetermine=""false""
                    multicast=""true""
                    prefer_multicast=""true""
                    priority=""default""
                /> 
            </Interfaces> 
            <AllowMulticast>true</AllowMulticast>
            <MaxMessageSize>65500B</MaxMessageSize>
            <!--  -->
            <!-- AllowMulticast>false</AllowMulticast --> 
            <DontRoute>false</DontRoute> 
            <EnableMulticastLoopback>true</EnableMulticastLoopback> 
            <ExternalNetworkAddress>auto</ExternalNetworkAddress> 
            <ExternalNetworkMask>0.0.0.0</ExternalNetworkMask> 
            <FragmentSize>1344 B</FragmentSize> 
                        
            <!--  -->
            <!-- MaxMessageSize>65500 B</MaxMessageSize --> 
            <MaxRexmitMessageSize>1456 B</MaxRexmitMessageSize> 
            <MulticastRecvNetworkInterfaceAddresses>preferred</MulticastRecvNetworkInterfaceAddresses> <!-- all, any, preferred, none -->
            <MulticastTimeToLive>32</MulticastTimeToLive> 
            <!-- RedundantNetworking>false</RedundantNetworking --> 
            <Transport>default</Transport> <!-- default, udp, udp6, tcp, tcp6, raweth -->
        </General> 
        <Internal>
            <SocketReceiveBufferSize min=""10MB""/> 
            <Watermarks> 
                <WhcHigh>500kB</WhcHigh> 
            </Watermarks> 
        </Internal> 
        <Discovery> 
            <ParticipantIndex>auto</ParticipantIndex> 
            <MaxAutoParticipantIndex>1000</MaxAutoParticipantIndex>
            <Peers>
                <Peer address=""my_address_2"" /> 
                <Peer address=""my_address_1"" /> 
            </Peers>
        </Discovery> 
    </Domain> 
</CycloneDDS> 
```"
Localization not working,D_kwDOAnasMc4AV51i,2023-10-16T11:26:33Z,danicannt,2,Answered,DC_kwDOAnasMc4Ab45w,yukkysaito,"I don't have your computer environment and don't know up to the CycloneDDS setup, maybe the ROS community would be better. :pray: 
If you need help with the Autoware layers, it would be helpful if you could give me the map and the rosbag data to reproduce."
Localization not working,D_kwDOAnasMc4AV51i,2023-10-16T11:26:33Z,danicannt,2,Answered,DC_kwDOAnasMc4Ab5Lk,Autostone-c,Carla 0.9.13 and autoware（humble）？
Localization not working,D_kwDOAnasMc4AV51i,2023-10-16T11:26:33Z,danicannt,2,Answered,DC_kwDOAnasMc4Ab5b2,danicannt,That's it. Autoware is running on Humble and and Carla is running on Galactic on Ubuntu 20
Localization not working,D_kwDOAnasMc4AV51i,2023-10-16T11:26:33Z,danicannt,2,Answered,DC_kwDOAnasMc4Ab7kz,Autostone-c, i guess you are run autoware on ubuntu22.04 。and carla on ubuntu20.04 ， it also has Galatic installed。 But how do you ensure that the versions of cyclonedds on both machines are consistent
Localization not working,D_kwDOAnasMc4AV51i,2023-10-16T11:26:33Z,danicannt,2,Answered,DC_kwDOAnasMc4Ab78_,danicannt,"I am using Carla on a Ubuntu 20 computer with Ros Galactic, and the other computer has Ubuntu 22 with ros Humble.

 The only way I have been able to check is to check the frequency of the topics on both computers and with Wire-shark been tracing what packages were being send in both computers
 
 Do you have any other method which would allow us to check if the consistence of the cyclone-dds config between two computers is well configured?"
Localization not working,D_kwDOAnasMc4AV51i,2023-10-16T11:26:33Z,danicannt,2,Answered,DC_kwDOAnasMc4Ab5e2,danicannt,"I have been able to tune properly the CycloneDDS configuration, I'll add here my steps to allow to others to replicate what I am trying:

I've to add this line (SocketReceiveBufferSize) on both of the cyclone dds computers config files:
```
       <Internal>
            <SocketReceiveBufferSize min=""10MB""/> 
            <Watermarks> 
                <WhcHigh>500kB</WhcHigh> 
            </Watermarks> 
        </Internal>
```

Also in interfaces have added the name of the interface that I am using and have set the priority to ""0"", but I don't know if this had any repercussion on the the performance:

```
         <Interfaces> 
                <NetworkInterface
                    name=""enp5s0""
                    address=""my_address_1"" 
                    autodetermine=""false""
                    multicast=""false""
                    prefer_multicast=""false""
                    priority=""0""
                /> 
            </Interfaces> 
```

Also had to create this two files to be able to increase the buffer receiving data size of the system for the cyclone configuration:
                    **/etc/sysctl.d/60-cyclone.conf**
With this configuration:

`
net.core.rmem_max=2147483647
net.core.rmem_default=2147483647
`


and
                    **/etc/sysctl.d/10-cyclone-max.conf**

```
net.core.rmem_max=2147483647
net.ipv4.ipfrag_time=3
net.ipv4.ipfrag_high_thresh=134217728
```

This is where I have found this suggestions:

[https://github.com/ros2/rmw_cyclonedds](url)
[https://github.com/orgs/autowarefoundation/discussions/3813](url)

Now the location is working without problems, the next step I have assigned is to be able to make work the lidar_camera fusion system on this environment, thanks for the help anyways!"
Service for vehicle kinematics,D_kwDOAnasMc4AV534,2023-10-16T12:18:26Z,wifo130,1,Answered,,,
Service for vehicle kinematics,D_kwDOAnasMc4AV534,2023-10-16T12:18:26Z,wifo130,1,Answered,DC_kwDOAnasMc4Ab2hk,mitsudome-r,"If you just want to read the vehicle pose via web server, maybe you can consider using https://github.com/RobotWebTools/rosbridge_suite which enables ros topic communication over websocket."
Optimizing Feature Management in Autoware: A Proposal for Deprecation and Deletion Process,D_kwDOAnasMc4AV5_T,2023-10-16T14:52:35Z,yukkysaito,2,Answered,,,
Optimizing Feature Management in Autoware: A Proposal for Deprecation and Deletion Process,D_kwDOAnasMc4AV5_T,2023-10-16T14:52:35Z,yukkysaito,2,Answered,DC_kwDOAnasMc4Ab2Bf,yukkysaito,@mitsudome-r @xmfcx Do you have an opinion?
Optimizing Feature Management in Autoware: A Proposal for Deprecation and Deletion Process,D_kwDOAnasMc4AV5_T,2023-10-16T14:52:35Z,yukkysaito,2,Answered,DC_kwDOAnasMc4Ab2K9,mitsudome-r,"I agree that we can consider workflow of removing packages.
Otherwise, packages would infinitely increase in the Autoware repository.

About the frequency of creating the list of candidate packages, maybe 3 months is too much. I was thinking something like once a year."
Optimizing Feature Management in Autoware: A Proposal for Deprecation and Deletion Process,D_kwDOAnasMc4AV5_T,2023-10-16T14:52:35Z,yukkysaito,2,Answered,DC_kwDOAnasMc4Ab2lG,yukkysaito,"@mitsudome-r How about making a judgment on the frequency as we observe the situation? For now, would it be okay to go with a six-month interval?"
Optimizing Feature Management in Autoware: A Proposal for Deprecation and Deletion Process,D_kwDOAnasMc4AV5_T,2023-10-16T14:52:35Z,yukkysaito,2,Answered,DC_kwDOAnasMc4Ab2ww,xmfcx,"We don't need to impose a strict schedule on ourselves for such an effort just yet.
We can do it once and see its impact.
Then we can judge the effort that it took and decide when the next cycle can be done accordingly. What do you think?"
Optimizing Feature Management in Autoware: A Proposal for Deprecation and Deletion Process,D_kwDOAnasMc4AV5_T,2023-10-16T14:52:35Z,yukkysaito,2,Answered,DC_kwDOAnasMc4Ab4sy,yukkysaito,"@xmfcx Thank you for your comment :+1: 
I agree with you. Let's try it and then decide."
Optimizing Feature Management in Autoware: A Proposal for Deprecation and Deletion Process,D_kwDOAnasMc4AV5_T,2023-10-16T14:52:35Z,yukkysaito,2,Answered,DC_kwDOAnasMc4Ab22q,xmfcx,"Dear @yukkysaito -san, your insightful post on the challenges surrounding Autoware's feature set underscores a deeper concern: our limited visibility into who our users are and how they leverage Autoware Universe. Our prime goal is to cater to our users' needs, and it becomes challenging without an understanding of our user base.

Recognizing this blind spot, here are some non-invasive, user-respecting approaches we might consider:

1. **Leverage Polls:** Let's initiate regular polls to directly gauge user behavior and preferences, such as which Autoware Universe features are most commonly used or which updates have been well-received.
1. **Active Engagement in Q&A:** Addressing user queries will serve a dual purpose. It assists our community while also shedding light on common challenges, areas of confusion, or features that might need clearer documentation.
   - Maybe we should analyze the existing questions to figure out the areas we should concentrate our efforts on.
1. **Company Outreach:** With due respect for privacy and community guidelines, we can review the GitHub discussions and create a list of companies that interact frequently or show a keen interest in Autoware Universe. 
   - Maybe we can extend an invitation for a focused feedback session or even a casual chat. This direct engagement can offer deeper insights and strengthen our relationship with key users."
Optimizing Feature Management in Autoware: A Proposal for Deprecation and Deletion Process,D_kwDOAnasMc4AV5_T,2023-10-16T14:52:35Z,yukkysaito,2,Answered,DC_kwDOAnasMc4Ab23U,xmfcx,"Building on our previous discussions, I'd like to propose an actionable first step towards optimizing Autoware Universe. The idea is to strike a balance between offering comprehensive functionalities and maintaining a clean, efficient architecture.

## Initiating with a Package Review:
Before we delve into gathering feedback from our community, we need a starting point—a list of potential areas for optimization. Our internal review can give us a preliminary list.

1. **Compile a Preliminary List:** By diving deep into our codebase, we can identify packages that, upon initial inspection, seem redundant or underutilized. This won't be a final list but rather a starting point for community feedback.
1. **Conduct the Poll:**
   - **The Questionnaire:** Frame the poll to offer clarity. For each package listed, we can provide a brief description and its intended use case. This ensures respondents have the context needed to provide informed feedback.
   - **Seek Specific Feedback:** Instead of a simple 'Keep' or 'Remove' option, perhaps we can have ratings. For example:
      - Essential for my use case.
      - Occasionally use it.
      - Never used it.
      - Didn't know it existed.
   - This granular feedback can provide insights beyond just the utility, revealing areas where we might need better documentation or user onboarding.
1. **Feedback Analysis & Implementation:**
   - Once the poll concludes, the feedback should guide our next steps. Instead of direct removal, perhaps packages that aren't widely used can be made optional or shifted to a separate module, ensuring they're available for those niche use cases without burdening the main codebase."
Cannot load SSD traffic light detection model,D_kwDOAnasMc4AV6VU,2023-10-16T23:43:36Z,boyang9602,0,Unanswered,,,
Software WG Meeting 2023/10/17,D_kwDOAnasMc4AV650,2023-10-17T14:38:38Z,xmfcx,0,Unanswered,,,
How to implement steering_tire_rotation_rate in pure-pursuit algorithm.,D_kwDOAnasMc4AV67B,2023-10-17T14:59:02Z,okataka123,0,Unanswered,,,
Wrong YOLOX traffic light model link,D_kwDOAnasMc4AV6_t,2023-10-17T16:36:40Z,boyang9602,1,Answered,,,
Wrong YOLOX traffic light model link,D_kwDOAnasMc4AV6_t,2023-10-17T16:36:40Z,boyang9602,1,Answered,DC_kwDOAnasMc4Ab4sW,yukkysaito,"@boyang9602 Thank you for your comment.
@miursh @yukke42 Can you fix the link?"
Wrong YOLOX traffic light model link,D_kwDOAnasMc4AV6_t,2023-10-17T16:36:40Z,boyang9602,1,Answered,DC_kwDOAnasMc4Ab4vx,miursh,"Thank you for letting me know.
I will remove that link from the document."
Wrong YOLOX traffic light model link,D_kwDOAnasMc4AV6_t,2023-10-17T16:36:40Z,boyang9602,1,Answered,DC_kwDOAnasMc4Ab4wy,miursh,"https://github.com/autowarefoundation/autoware.universe/pull/5339
"
Perception and Sensing WG Meeting 18/10/2023,D_kwDOAnasMc4AV7ke,2023-10-18T09:23:56Z,drwnz,0,Unanswered,,,
Appropriate MRM behavior with ECU redundant system,D_kwDOAnasMc4AV7uG,2023-10-18T12:40:49Z,asana17,0,Unanswered,,,
Gnss Poser Gnss_frame Param,D_kwDOAnasMc4AV7wq,2023-10-18T13:25:15Z,danicannt,0,Unanswered,,,
API WG Meeting (10/18/2023),D_kwDOAnasMc4AV7wy,2023-10-18T13:27:40Z,yuasabe,1,Answered,,,
API WG Meeting (10/18/2023),D_kwDOAnasMc4AV7wy,2023-10-18T13:27:40Z,yuasabe,1,Answered,DC_kwDOAnasMc4Ab6GU,jp-amaral,"Hello!
I'll leave here the updated diagrams presented at today's meeting.  

- **Safety of VRUs**
![SafetyOfVRUs](https://github.com/autowarefoundation/autoware/assets/80011136/6b60c4e5-74eb-4183-9db3-d63f42a57b9e)

- **Sharing sensor data between autonomous vehicles**
![SensorDataBetweenAVs](https://github.com/autowarefoundation/autoware/assets/80011136/ab6f68d6-e126-4dd2-bc44-3a1766ab236a)

- **Sharing sensor data between autonomous and non-autonomous vehicles**
![SensorDataBetweenAVandNonAV](https://github.com/autowarefoundation/autoware/assets/80011136/c522165e-5be1-4d46-bb1b-312e741e5370)


Any feedback to the provided use case diagrams is appreciated!"
Open ADKit Working Group Meeting 19/10/2003,D_kwDOAnasMc4AV8Nm,2023-10-19T00:41:44Z,HamburgDave,0,Unanswered,,,
Open ADKit Working Group Meeting 19/10/2023,D_kwDOAnasMc4AV8Nx,2023-10-19T00:52:01Z,HamburgDave,0,Unanswered,,,
What does the batch number mean in the model names?,D_kwDOAnasMc4AV8Q2,2023-10-19T02:49:38Z,boyang9602,0,Unanswered,,,
Is it possible to provide the pytorch model and weights?,D_kwDOAnasMc4AV8Ra,2023-10-19T03:04:15Z,boyang9602,0,Unanswered,,,
How to correctly use the data from https://autowarefoundation.github.io/autoware-documentation/main/datasets/?,D_kwDOAnasMc4AV8aY,2023-10-19T07:36:07Z,nainaigetuide,0,Unanswered,,,
Proposal for providing a stable interface,D_kwDOAnasMc4AV8kO,2023-10-19T10:29:00Z,isamu-takagi,2,Answered,,,
Proposal for providing a stable interface,D_kwDOAnasMc4AV8kO,2023-10-19T10:29:00Z,isamu-takagi,2,Answered,DC_kwDOAnasMc4Ab8df,isamu-takagi,"These ideas were considered, but were not adopted for the following reasons.

1. Duplicate message types and topics for each version like.
    - https://github.com/orgs/autowarefoundation/discussions/3668#discussioncomment-6634936
    - Duplicating topics increases processing load
2. Use [REP-2011] Evolving Message Types
    - Details are not yet known and release date is unknown.
    - This also looks like the topic is duplicated for each version."
Proposal for providing a stable interface,D_kwDOAnasMc4AV8kO,2023-10-19T10:29:00Z,isamu-takagi,2,Answered,DC_kwDOAnasMc4Ab_QH,xmfcx,"Hello @isamu-takagi san,
Thanks for this proposal. I have tried the type adaptation feature before and it is a promising feature for us to utilize in the Autoware too.

I would like to ask some simple questions. I'm asking these just to understand, not to criticize.

Let's assume we have adopted this feature for the entire Autoware, everything has integrated this feature as you've suggested.

I see this brings the following:
```cpp
const auto interface = ComponentInterfaceManager(node);
pub = interface.create_publisher<InterfaceClass>();
sub = interface.create_subscription<InterfaceClass>(callback);
```
- Do you think that every node in the Autoware codebase should use these interfaces to interact with any messages?
- How many `interface_specification_package` do we need?
   - Do we need per package/message or all should be handled within a single package?
- This feature protects only the Autoware packages from the message modifications, not the external tools/packages that depend on the messages right?
"
Proposal for providing a stable interface,D_kwDOAnasMc4AV8kO,2023-10-19T10:29:00Z,isamu-takagi,2,Answered,DC_kwDOAnasMc4Ab_hj,isamu-takagi,"@xmfcx Thank you for your question. In my opinion, only topics and services that we want to ensure compatibility is defined in a specification package. This can be thought of as a declaration of a public interface.

Currently, ROS messages defined by rosidl have two aspects: an interface and an implementation. This proposal separates custom types as interfaces and ROS messages as implementations.

For Autoware developers, this improves maintainability by reducing the impact of changing ROS messages. For external tools developers, this clarifies the public interface. Conversely, compatibility cannot be guaranteed if they directly reference topics that are not defined here.


> Do you think that every node in the Autoware codebase should use these interfaces to interact with any messages?

Not all nodes need to use this interface. This proposal targets interfaces that require stable specifications, such as interfaces between components. I think it will become complicated if it is applied to a topic within a component that is not defined as an interface.

> How many interface_specification_package do we need?
> Do we need per package/message or all should be handled within a single package?

It is desirable to  split packages as detailed as possible without making package management complicated. I think it would be a good combination of components that communicate, such as between planning-perception and planning-control.

> This feature protects only the Autoware packages from the message modifications, not the external tools/packages that depend on the messages right?

I'm not sure what scope Autoware packages is intended for, but rather this proposal is aimed at external tools/packages such as simulators. It is assumed that the repository of ROS messages and specification packages will be imported into the workspace of an external tools/packages.
"
Want to connect OSSDC/LGSVL simulator with autoware universe,D_kwDOAnasMc4AV8kk,2023-10-19T10:34:43Z,chavankunal,1,Answered,,,
Want to connect OSSDC/LGSVL simulator with autoware universe,D_kwDOAnasMc4AV8kk,2023-10-19T10:34:43Z,chavankunal,1,Answered,DC_kwDOAnasMc4Ab_Qr,mitsudome-r,"Currently, Autoware Universe is connected with AWSIM simulator developed by Robotec.ai and TIER IV.
In theory, if you can modify ros2-lgsvl bridge to support ROS messages by AWSIM, then it should be to connect with Autoware Universe. You can check out pub/sub topics of AWSIM in this documentation: https://tier4.github.io/AWSIM/Components/ROS2/ROS2TopicList/"
How to get `~/autoware_data` models inside a docker container?,D_kwDOAnasMc4AV9c5,2023-10-20T08:49:58Z,VRichardJP,1,Answered,,,
How to get `~/autoware_data` models inside a docker container?,D_kwDOAnasMc4AV9c5,2023-10-20T08:49:58Z,VRichardJP,1,Answered,DC_kwDOAnasMc4Ab_QG,mitsudome-r,"I think it's better to download the files on the host and mount autoware_data. I think it's unlikely to include the model files in docker container even for the future since it would increase the image size for people who doesn't need all the model data.

> By the way, is there any one-liner command to download all models at once? (the README only shows how to download them one by one).

Unfortunately, I don't think there is a one-liner command as of now, but I think we can consider creating a simple script."
Software WG Meeting 2023/10/24,D_kwDOAnasMc4AV_rD,2023-10-23T05:48:40Z,mitsudome-r,0,Unanswered,,,
How to deal with LIDAR points going through a sewer grid?,D_kwDOAnasMc4AV_ys,2023-10-23T08:04:37Z,VRichardJP,0,Unanswered,,,
Intermittently encountering issues with Rosbag replay simulation based on official documentation: RVIZ shows initialization but no vehicle position and no localization-related topics are present.,D_kwDOAnasMc4AV_1Z,2023-10-23T08:50:35Z,yuanchao16,1,Answered,,,
Intermittently encountering issues with Rosbag replay simulation based on official documentation: RVIZ shows initialization but no vehicle position and no localization-related topics are present.,D_kwDOAnasMc4AV_1Z,2023-10-23T08:50:35Z,yuanchao16,1,Answered,DC_kwDOAnasMc4AcEOx,VRichardJP,"This is indeed not normal.

You could first try to find which nodes die at runtime:
```
# copy stdout into log.txt
ros2 launch autoware_launch ... | tee log.txt
# check for any node that died
grep ""has died"" ./log.txt
```

In your case it looks like at least ekf dies. It would help to know exactly where (and why). For example, you could compile `ekf_localizer` in debug mode:

```
colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Debug --packages-select ekf_localizer
```

And then run `ekf_localizer` with `gdb` until it crashes by modifying `src/universe/autoware.universe/localization/ekf_localizer/launch/ekf_localizer.launch.xml`:
```diff
-  <node pkg=""ekf_localizer"" exec=""ekf_localizer"" name=""ekf_localizer"" output=""screen"">
+  <node pkg=""ekf_localizer"" exec=""ekf_localizer"" name=""ekf_localizer"" output=""screen"" launch-prefix=""gnome-terminal -- gdb -ex='set pagination off' -ex='run' --args "">
```

When it crashes, you should be able to get some idea of where you are with the `backtrace` command

"
2023-10-23 ODD working group weekly meeting (162),D_kwDOAnasMc4AV_2a,2023-10-23T09:05:37Z,Igata-ctrl,0,Unanswered,,,
Vehicle not stopping at Goal Points,D_kwDOAnasMc4AWAY0,2023-10-23T16:03:02Z,danicannt,2,Answered,,,
Vehicle not stopping at Goal Points,D_kwDOAnasMc4AWAY0,2023-10-23T16:03:02Z,danicannt,2,Answered,DC_kwDOAnasMc4AcKXD,danicannt,"I have compared the trajectory that autoware was creating in the same environment in Ubuntu 20 and have be able to check the planning that autoware is using in both of the environments.

These are the main differences:

Ubuntu 20:
![tries](https://github.com/autowarefoundation/autoware/assets/53301767/e5589618-2084-4676-bce2-6e6c403144f5)
![tries_](https://github.com/autowarefoundation/autoware/assets/53301767/7e526800-5e5a-44eb-a5a0-8304e8a2dd71)

Ubuntu 22:
![planner](https://github.com/autowarefoundation/autoware/assets/53301767/e6da1fba-3ae5-470d-a84f-bd0fcce21f78)

While in Ubuntu 20 the planned velocity decreased to 0 in Ubuntu 22 it gets increased just before the goal and the car does not stop

Is there any param that sets the velocity for arriving to the goal o the distance to start to decelerate?
Any suggestion will be appreciated!


"
Vehicle not stopping at Goal Points,D_kwDOAnasMc4AWAY0,2023-10-23T16:03:02Z,danicannt,2,Answered,DC_kwDOAnasMc4AcMPR,brkay54,"Hi @danicannt, thank you for the report. As I can understand, you tried it on different computers. Did you use Autoware in the same commits for both computers? Can you give more details?

> Is there any param that sets the velocity for arriving to the goal o the distance to start to decelerate?

Actually, you can try the parameter in motion_velocity_smoother to set velocity to the last trajectory points before goal pose [here](https://github.com/autowarefoundation/autoware_launch/blob/262a77491e187f4aa678d846bc2c2d53b6961687/autoware_launch/config/planning/scenario_planning/common/motion_velocity_smoother/motion_velocity_smoother.param.yaml#L34).

```    # stop velocity
    stopping_velocity: 2.778  # change target velocity to this value before v=0 point [m/s]
    stopping_distance: 0.0    # distance for the stopping_velocity [m]. 0 means the stopping velocity is not applied.
```

I am not sure if it would be about this problem or not, also, while I was on real vehicle tests, I realized that if the controller can not stop the goal, it causes weird behaviors like although it moved forward from goal pose, it continues to drive with constant acceleration. This PR solved this issue: https://github.com/autowarefoundation/autoware.universe/pull/5077"
Planning&Control WG Meeting 2023/10/26,D_kwDOAnasMc4AWAw-,2023-10-24T01:34:47Z,maxime-clem,1,Answered,,,
Planning&Control WG Meeting 2023/10/26,D_kwDOAnasMc4AWAw-,2023-10-24T01:34:47Z,maxime-clem,1,Answered,DC_kwDOAnasMc4AcMPH,zulfaqar-azmi-t4,"## Meeting notes
### About Vehicle not stopping at Goal Points issue
- @brkay54 have [some idea](https://github.com/orgs/autowarefoundation/discussions/3929#discussioncomment-7390161) on the issue and a [PR](https://github.com/autowarefoundation/autoware.universe/pull/5077) that might be related.

### Driving on the slope
- Should only happen in planning simulator since there is no gravitational force.
- However, the reported issue happens in real world as well.
- One suggestion is to recalibrate the raw vehicle converter.
- Action Item: confirm related to the slope compensation on hilly road and PID or is there need to be calibration on the raw vehicle converter in TIER IV.

### Monotonic Drivable area
- https://github.com/autowarefoundation/autoware.universe/pull/5397
   - The purpose of the function is not clear.
   - Action Item: @satoshi-ota might be better to remove the function.  


### About scenario simulator
- If there is any issues pertaining to running scenario simulator v2, if some degradation are found, please create an issue. Since @lchojnack  is working on the evaluations, he might post some issue if such situation happens. CC: @kyoichi-sugahara 
- It's possible that the degradation is not due to the autoware side but the scenario simulator side.
- One type of scenario failure regarding driving at intersection. Is currently under investigation. 

"
Planning&Control WG Meeting 2023/10/26,D_kwDOAnasMc4AWAw-,2023-10-24T01:34:47Z,maxime-clem,1,Answered,DC_kwDOAnasMc4AcMRQ,satoshi-ota,"> - https://github.com/autowarefoundation/autoware.universe/pull/5397
> The purpose of the function is not clear.
> Action Item: @satoshi-ota might be better to remove the function.

@mehmetdogru @zulfaqar-azmi-t4 Additionaly, I'll review this PR and ask @takayuki5168 the purpose of this process."
Autoware online course,D_kwDOAnasMc4AWBdS,2023-10-24T16:34:12Z,stefanofio,0,Unanswered,,,
Localization & Mapping WG Meeting 11/10/2023,D_kwDOAnasMc4AWCDx,2023-10-25T09:47:55Z,n-patiphon,0,Unanswered,,,
Reference Design WG Meeting (10/25/2023),D_kwDOAnasMc4AWCOj,2023-10-25T13:18:27Z,chishengshih,1,Answered,,,
Reference Design WG Meeting (10/25/2023),D_kwDOAnasMc4AWCOj,2023-10-25T13:18:27Z,chishengshih,1,Answered,DC_kwDOAnasMc4AcKYw,chishengshih,"- Presentation from Mert Colak (LeoDrive)
  - https://leodrive.atlassian.net/wiki/spaces/MD/overview
  - Weather conditions
  - Road Conditions
  - Software diagram
  - Safety instructions
  - Power distribution panel: is this customized or off-the-shelf? 
  - Error code.
  - Mitsudome-san: feature and use cases to be supported. 
  - Rahul: schema = software stack + use scenario + ODD definition to schematically define the system in a formal model. 
  - Rahul: the relationship between use case and software development.
  - David W.: How to help the device providers to look at our documents to design their products.
  - Rahul: One page to specify the schema to build the overall product. or scenario generation. 
  - Action item: 
  - [ ] Daniel, Mert, David, and Rahul: prepare the schematic description as the overview for the project. "
Is it possible to use only one lidar?,D_kwDOAnasMc4AWC6q,2023-10-26T06:30:24Z,LouiMilvus,0,Unanswered,,,
Open ADKit Working Group Meeting 26/10/2023,D_kwDOAnasMc4AWDEC,2023-10-26T09:39:38Z,oguzkaganozt,0,Unanswered,,,
Standardize the writing of CMakeLists.txt,D_kwDOAnasMc4AWDL9,2023-10-26T12:16:12Z,J-xinyu,0,Unanswered,,,
